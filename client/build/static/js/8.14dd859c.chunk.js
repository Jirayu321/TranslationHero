/*! For license information please see 8.14dd859c.chunk.js.LICENSE.txt */
(this["webpackJsonptranslate-hero"]=this["webpackJsonptranslate-hero"]||[]).push([[8],{111:function(e,t,i){"use strict";e.exports=i(142)},113:function(e,t,i){e.exports=i.p+"static/media/logo.10dc9650.svg"},117:function(e,t,i){"use strict";i.d(t,"b",(function(){return s}));var a=i(6),n=i(505),r=i(507),o=i(181);function s(e){return Object(n.a)("MuiInput",e)}var l=Object(a.a)({},o.a,Object(r.a)("MuiInput",["root","underline","input"]));t.a=l},119:function(e,t,i){"use strict";i.r(t),i.d(t,"capitalize",(function(){return n.a})),i.d(t,"createChainedFunction",(function(){return r})),i.d(t,"createSvgIcon",(function(){return o.a})),i.d(t,"debounce",(function(){return s.a})),i.d(t,"deprecatedPropType",(function(){return l})),i.d(t,"isMuiElement",(function(){return c.a})),i.d(t,"ownerDocument",(function(){return u.a})),i.d(t,"ownerWindow",(function(){return h.a})),i.d(t,"requirePropFactory",(function(){return d.a})),i.d(t,"setRef",(function(){return f})),i.d(t,"unstable_useEnhancedEffect",(function(){return p.a})),i.d(t,"unstable_useId",(function(){return m.a})),i.d(t,"unsupportedProp",(function(){return g.a})),i.d(t,"useControlled",(function(){return v.a})),i.d(t,"useEventCallback",(function(){return y.a})),i.d(t,"useForkRef",(function(){return x.a})),i.d(t,"useIsFocusVisible",(function(){return b.a})),i.d(t,"unstable_ClassNameGenerator",(function(){return _}));var a=i(506),n=i(99),r=i(524).a,o=i(109),s=i(133);var l=function(e,t){return function(){return null}},c=i(135),u=i(114),h=i(151),d=i(175),f=i(386).a,p=i(124),m=i(205),g=i(147),v=i(145),y=i(210),x=i(100),b=i(217),_={configure:function(e){console.warn(["MUI: `ClassNameGenerator` import from `@mui/material/utils` is outdated and might cause unexpected issues.","","You should use `import { unstable_ClassNameGenerator } from '@mui/material/className'` instead","","The detail of the issue: https://github.com/mui/material-ui/issues/30011#issuecomment-1024993401","","The updated documentation: https://mui.com/guides/classname-generator/"].join("\n")),a.a.configure(e)}}},120:function(e,t,i){"use strict";i.d(t,"b",(function(){return s}));var a=i(6),n=i(505),r=i(507),o=i(181);function s(e){return Object(n.a)("MuiOutlinedInput",e)}var l=Object(a.a)({},o.a,Object(r.a)("MuiOutlinedInput",["root","notchedOutline","input"]));t.a=l},121:function(e,t,i){"use strict";i.d(t,"b",(function(){return s}));var a=i(6),n=i(505),r=i(507),o=i(181);function s(e){return Object(n.a)("MuiFilledInput",e)}var l=Object(a.a)({},o.a,Object(r.a)("MuiFilledInput",["root","underline","input"]));t.a=l},122:function(e,t,i){"use strict";i(0);var a=i(109),n=i(31);t.a=Object(a.a)(Object(n.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown")},128:function(e,t,i){},132:function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"a",(function(){return r}));var a=i(118);function n(e){return Object(a.a)({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M11 21H5c-1.1 0-2-.9-2-2V5c0-1.1.9-2 2-2h6v18zm2 0h6c1.1 0 2-.9 2-2v-7h-8v9zm8-11V5c0-1.1-.9-2-2-2h-6v7h8z"}}]})(e)}function r(e){return Object(a.a)({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M7 10l5 5 5-5z"}}]})(e)}},141:function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return r})),i.d(t,"d",(function(){return o})),i.d(t,"e",(function(){return s})),i.d(t,"f",(function(){return l})),i.d(t,"g",(function(){return c}));var a=[{code:"",label:"English"},{code:"",label:"German"},{code:"",label:"Thai"}],n=[{code:"",label:"Official Document"},{code:"",label:"General Document"}],r=[{code:"",label:"5"},{code:"",label:"4"},{code:"",label:"3"},{code:"",label:"2"},{code:"",label:"1"},{code:"",label:"0"}],o=[{code:"",label:"Article"},{code:"",label:"Novel"},{code:"",label:"Submovie"},{code:"",label:"Treatise"},{code:"",label:"Essay"}],s=[{code:"",label:"Identification Card"},{code:"",label:"Family Status Registration"},{code:"",label:"Personal information"},{code:"",label:"Civil Registration Certificate"},{code:"",label:"Certificate of use (the noun prefix)"},{code:"",label:"House Registration"},{code:"",label:"Birth Certificate"}],l=[{code:"",label:"Article"},{code:"",label:"Novel"},{code:"",label:"Submovie"},{code:"",label:"Treatise"},{code:"",label:"Essay"},{code:"",label:"Identification Card"},{code:"",label:"Family Status Registration"},{code:"",label:"Personal information"},{code:"",label:"Civil Registration Certificate"},{code:"",label:"Certificate of use (the noun prefix)"},{code:"",label:"House Registration"},{code:"",label:"Birth Certificate"}],c=[{code:"",label:"In progress"},{code:"",label:"Cancle"},{code:"",label:"late"},{code:"",label:"Succeed"}]},142:function(e,t,i){"use strict";var a,n=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),u=Symbol.for("react.context"),h=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.for("react.offscreen");function y(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case o:case l:case s:case f:case p:return e;default:switch(e=e&&e.$$typeof){case h:case u:case d:case g:case m:case c:return e;default:return t}}case r:return t}}}a=Symbol.for("react.module.reference"),t.ContextConsumer=u,t.ContextProvider=c,t.Element=n,t.ForwardRef=d,t.Fragment=o,t.Lazy=g,t.Memo=m,t.Portal=r,t.Profiler=l,t.StrictMode=s,t.Suspense=f,t.SuspenseList=p,t.isAsyncMode=function(){return!1},t.isConcurrentMode=function(){return!1},t.isContextConsumer=function(e){return y(e)===u},t.isContextProvider=function(e){return y(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return y(e)===d},t.isFragment=function(e){return y(e)===o},t.isLazy=function(e){return y(e)===g},t.isMemo=function(e){return y(e)===m},t.isPortal=function(e){return y(e)===r},t.isProfiler=function(e){return y(e)===l},t.isStrictMode=function(e){return y(e)===s},t.isSuspense=function(e){return y(e)===f},t.isSuspenseList=function(e){return y(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===l||e===s||e===f||e===p||e===v||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===c||e.$$typeof===u||e.$$typeof===d||e.$$typeof===a||void 0!==e.getModuleId)},t.typeOf=y},143:function(e,t,i){"use strict";i(0);var a=i(109),n=i(31);t.a=Object(a.a)(Object(n.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},144:function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return r})),i.d(t,"c",(function(){return o})),i.d(t,"d",(function(){return s}));var a=i(118);function n(e){return Object(a.a)({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5.5 7a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1h-5zM5 9.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5z"}},{tag:"path",attr:{d:"M9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.5L9.5 0zm0 1v2A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5z"}}]})(e)}function r(e){return Object(a.a)({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0C5.829 0 5.556.01 4.703.048 3.85.088 3.269.222 2.76.42a3.917 3.917 0 0 0-1.417.923A3.927 3.927 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.7.01 5.555 0 5.827 0 8.001c0 2.172.01 2.444.048 3.297.04.852.174 1.433.372 1.942.205.526.478.972.923 1.417.444.445.89.719 1.416.923.51.198 1.09.333 1.942.372C5.555 15.99 5.827 16 8 16s2.444-.01 3.298-.048c.851-.04 1.434-.174 1.943-.372a3.916 3.916 0 0 0 1.416-.923c.445-.445.718-.891.923-1.417.197-.509.332-1.09.372-1.942C15.99 10.445 16 10.173 16 8s-.01-2.445-.048-3.299c-.04-.851-.175-1.433-.372-1.941a3.926 3.926 0 0 0-.923-1.417A3.911 3.911 0 0 0 13.24.42c-.51-.198-1.092-.333-1.943-.372C10.443.01 10.172 0 7.998 0h.003zm-.717 1.442h.718c2.136 0 2.389.007 3.232.046.78.035 1.204.166 1.486.275.373.145.64.319.92.599.28.28.453.546.598.92.11.281.24.705.275 1.485.039.843.047 1.096.047 3.231s-.008 2.389-.047 3.232c-.035.78-.166 1.203-.275 1.485a2.47 2.47 0 0 1-.599.919c-.28.28-.546.453-.92.598-.28.11-.704.24-1.485.276-.843.038-1.096.047-3.232.047s-2.39-.009-3.233-.047c-.78-.036-1.203-.166-1.485-.276a2.478 2.478 0 0 1-.92-.598 2.48 2.48 0 0 1-.6-.92c-.109-.281-.24-.705-.275-1.485-.038-.843-.046-1.096-.046-3.233 0-2.136.008-2.388.046-3.231.036-.78.166-1.204.276-1.486.145-.373.319-.64.599-.92.28-.28.546-.453.92-.598.282-.11.705-.24 1.485-.276.738-.034 1.024-.044 2.515-.045v.002zm4.988 1.328a.96.96 0 1 0 0 1.92.96.96 0 0 0 0-1.92zm-4.27 1.122a4.109 4.109 0 1 0 0 8.217 4.109 4.109 0 0 0 0-8.217zm0 1.441a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334z"}}]})(e)}function o(e){return Object(a.a)({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M4.545 6.714 4.11 8H3l1.862-5h1.284L8 8H6.833l-.435-1.286H4.545zm1.634-.736L5.5 3.956h-.049l-.679 2.022H6.18z"}},{tag:"path",attr:{d:"M0 2a2 2 0 0 1 2-2h7a2 2 0 0 1 2 2v3h3a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-3H2a2 2 0 0 1-2-2V2zm2-1a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h7a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H2zm7.138 9.995c.193.301.402.583.63.846-.748.575-1.673 1.001-2.768 1.292.178.217.451.635.555.867 1.125-.359 2.08-.844 2.886-1.494.777.665 1.739 1.165 2.93 1.472.133-.254.414-.673.629-.89-1.125-.253-2.057-.694-2.82-1.284.681-.747 1.222-1.651 1.621-2.757H14V8h-3v1.047h.765c-.318.844-.74 1.546-1.272 2.13a6.066 6.066 0 0 1-.415-.492 1.988 1.988 0 0 1-.94.31z"}}]})(e)}function s(e){return Object(a.a)({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z"}}]})(e)}},147:function(e,t,i){"use strict";t.a=function(e,t,i,a,n){return null}},175:function(e,t,i){"use strict";i(6);t.a=function(e,t){return function(){return null}}},182:function(e,t,i){"use strict";var a=i(32),n=i(33),r=i(17),o=i(6),s=i(0),l=i(504),c=i(508),u=i(116),h=i(96),d=i(98),f=i(117),p=i(31),m=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","type"],g=Object(h.a)(u.b,{shouldForwardProp:function(e){return Object(h.b)(e)||"classes"===e},name:"MuiInput",slot:"Root",overridesResolver:function(e,t){var i=e.ownerState;return[].concat(Object(n.a)(Object(u.e)(e,t)),[!i.disableUnderline&&t.underline])}})((function(e){var t,i=e.theme,n=e.ownerState,r="light"===i.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return i.vars&&(r="rgba(".concat(i.vars.palette.common.onBackgroundChannel," / ").concat(i.vars.opacity.inputUnderline,")")),Object(o.a)({position:"relative"},n.formControl&&{"label + &":{marginTop:16}},!n.disableUnderline&&(t={"&:after":{borderBottom:"2px solid ".concat((i.vars||i).palette[n.color].main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:i.transitions.create("transform",{duration:i.transitions.duration.shorter,easing:i.transitions.easing.easeOut}),pointerEvents:"none"}},Object(a.a)(t,"&.".concat(f.a.focused,":after"),{transform:"scaleX(1) translateX(0)"}),Object(a.a)(t,"&.".concat(f.a.error,":after"),{borderBottomColor:(i.vars||i).palette.error.main,transform:"scaleX(1)"}),Object(a.a)(t,"&:before",{borderBottom:"1px solid ".concat(r),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:i.transitions.create("border-bottom-color",{duration:i.transitions.duration.shorter}),pointerEvents:"none"}),Object(a.a)(t,"&:hover:not(.".concat(f.a.disabled,"):before"),{borderBottom:"2px solid ".concat((i.vars||i).palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(r)}}),Object(a.a)(t,"&.".concat(f.a.disabled,":before"),{borderBottomStyle:"dotted"}),t))})),v=Object(h.a)(u.a,{name:"MuiInput",slot:"Input",overridesResolver:u.d})({}),y=s.forwardRef((function(e,t){var i=Object(d.a)({props:e,name:"MuiInput"}),a=i.disableUnderline,n=i.components,s=void 0===n?{}:n,h=i.componentsProps,y=i.fullWidth,x=void 0!==y&&y,b=i.inputComponent,_=void 0===b?"input":b,w=i.multiline,k=void 0!==w&&w,S=i.type,C=void 0===S?"text":S,A=Object(r.a)(i,m),O=function(e){var t=e.classes,i={root:["root",!e.disableUnderline&&"underline"],input:["input"]},a=Object(l.a)(i,f.b,t);return Object(o.a)({},t,a)}(i),T={root:{ownerState:{disableUnderline:a}}},M=h?Object(c.a)(h,T):T;return Object(p.jsx)(u.c,Object(o.a)({components:Object(o.a)({Root:g,Input:v},s),componentsProps:M,fullWidth:x,inputComponent:_,multiline:k,ref:t,type:C},A,{classes:O}))}));y.muiName="Input",t.a=y},196:function(e,t,i){"use strict";var a=i(6),n=i(17),r=i(0),o=i(218),s=i(112),l=i(150),c=i(100),u=i(31),h=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function d(e){return"scale(".concat(e,", ").concat(Math.pow(e,2),")")}var f={entering:{opacity:1,transform:d(1)},entered:{opacity:1,transform:"none"}},p="undefined"!==typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),m=r.forwardRef((function(e,t){var i=e.addEndListener,m=e.appear,g=void 0===m||m,v=e.children,y=e.easing,x=e.in,b=e.onEnter,_=e.onEntered,w=e.onEntering,k=e.onExit,S=e.onExited,C=e.onExiting,A=e.style,O=e.timeout,T=void 0===O?"auto":O,M=e.TransitionComponent,E=void 0===M?o.e:M,I=Object(n.a)(e,h),P=r.useRef(),D=r.useRef(),z=Object(s.a)(),L=r.useRef(null),j=Object(c.a)(v.ref,t),R=Object(c.a)(L,j),F=function(e){return function(t){if(e){var i=L.current;void 0===t?e(i):e(i,t)}}},B=F(w),N=F((function(e,t){Object(l.b)(e);var i,a=Object(l.a)({style:A,timeout:T,easing:y},{mode:"enter"}),n=a.duration,r=a.delay,o=a.easing;"auto"===T?(i=z.transitions.getAutoHeightDuration(e.clientHeight),D.current=i):i=n,e.style.transition=[z.transitions.create("opacity",{duration:i,delay:r}),z.transitions.create("transform",{duration:p?i:.666*i,delay:r,easing:o})].join(","),b&&b(e,t)})),V=F(_),Y=F(C),W=F((function(e){var t,i=Object(l.a)({style:A,timeout:T,easing:y},{mode:"exit"}),a=i.duration,n=i.delay,r=i.easing;"auto"===T?(t=z.transitions.getAutoHeightDuration(e.clientHeight),D.current=t):t=a,e.style.transition=[z.transitions.create("opacity",{duration:t,delay:n}),z.transitions.create("transform",{duration:p?t:.666*t,delay:p?n:n||.333*t,easing:r})].join(","),e.style.opacity=0,e.style.transform=d(.75),k&&k(e)})),H=F(S);return r.useEffect((function(){return function(){clearTimeout(P.current)}}),[]),Object(u.jsx)(E,Object(a.a)({appear:g,in:x,nodeRef:L,onEnter:N,onEntered:V,onEntering:B,onExit:W,onExited:H,onExiting:Y,addEndListener:function(e){"auto"===T&&(P.current=setTimeout(e,D.current||0)),i&&i(L.current,e)},timeout:"auto"===T?null:T},I,{children:function(e,t){return r.cloneElement(v,Object(a.a)({style:Object(a.a)({opacity:0,transform:d(.75),visibility:"exited"!==e||x?void 0:"hidden"},f[e],A,v.props.style),ref:R},t))}}))}));m.muiSupportAuto=!0,t.a=m},197:function(e,t,i){"use strict";var a=i(6),n=i(17),r=i(0),o=i(97),s=i(504),l=i(516),c=i(96),u=i(98),h=i(182),d=i(32),f=i(33),p=i(508),m=i(116),g=i(121),v=i(31),y=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","type"],x=Object(c.a)(m.b,{shouldForwardProp:function(e){return Object(c.b)(e)||"classes"===e},name:"MuiFilledInput",slot:"Root",overridesResolver:function(e,t){var i=e.ownerState;return[].concat(Object(f.a)(Object(m.e)(e,t)),[!i.disableUnderline&&t.underline])}})((function(e){var t,i,n,r=e.theme,o=e.ownerState,s="light"===r.palette.mode,l=s?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",c=s?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",u=s?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",h=s?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return Object(a.a)((t={position:"relative",backgroundColor:r.vars?r.vars.palette.FilledInput.bg:c,borderTopLeftRadius:(r.vars||r).shape.borderRadius,borderTopRightRadius:(r.vars||r).shape.borderRadius,transition:r.transitions.create("background-color",{duration:r.transitions.duration.shorter,easing:r.transitions.easing.easeOut}),"&:hover":{backgroundColor:r.vars?r.vars.palette.FilledInput.hoverBg:u,"@media (hover: none)":{backgroundColor:r.vars?r.vars.palette.FilledInput.bg:c}}},Object(d.a)(t,"&.".concat(g.a.focused),{backgroundColor:r.vars?r.vars.palette.FilledInput.bg:c}),Object(d.a)(t,"&.".concat(g.a.disabled),{backgroundColor:r.vars?r.vars.palette.FilledInput.disabledBg:h}),t),!o.disableUnderline&&(i={"&:after":{borderBottom:"2px solid ".concat(null==(n=(r.vars||r).palette[o.color||"primary"])?void 0:n.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:r.transitions.create("transform",{duration:r.transitions.duration.shorter,easing:r.transitions.easing.easeOut}),pointerEvents:"none"}},Object(d.a)(i,"&.".concat(g.a.focused,":after"),{transform:"scaleX(1) translateX(0)"}),Object(d.a)(i,"&.".concat(g.a.error,":after"),{borderBottomColor:(r.vars||r).palette.error.main,transform:"scaleX(1)"}),Object(d.a)(i,"&:before",{borderBottom:"1px solid ".concat(r.vars?"rgba(".concat(r.vars.palette.common.onBackgroundChannel," / ").concat(r.vars.opacity.inputUnderline,")"):l),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:r.transitions.create("border-bottom-color",{duration:r.transitions.duration.shorter}),pointerEvents:"none"}),Object(d.a)(i,"&:hover:not(.".concat(g.a.disabled,"):before"),{borderBottom:"1px solid ".concat((r.vars||r).palette.text.primary)}),Object(d.a)(i,"&.".concat(g.a.disabled,":before"),{borderBottomStyle:"dotted"}),i),o.startAdornment&&{paddingLeft:12},o.endAdornment&&{paddingRight:12},o.multiline&&Object(a.a)({padding:"25px 12px 8px"},"small"===o.size&&{paddingTop:21,paddingBottom:4},o.hiddenLabel&&{paddingTop:16,paddingBottom:17}))})),b=Object(c.a)(m.a,{name:"MuiFilledInput",slot:"Input",overridesResolver:m.d})((function(e){var t=e.theme,i=e.ownerState;return Object(a.a)({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},t.vars&&Object(d.a)({"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},t.getColorSchemeSelector("dark"),{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}),"small"===i.size&&{paddingTop:21,paddingBottom:4},i.hiddenLabel&&{paddingTop:16,paddingBottom:17},i.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},i.startAdornment&&{paddingLeft:0},i.endAdornment&&{paddingRight:0},i.hiddenLabel&&"small"===i.size&&{paddingTop:8,paddingBottom:9})})),_=r.forwardRef((function(e,t){var i=Object(u.a)({props:e,name:"MuiFilledInput"}),r=i.components,o=void 0===r?{}:r,l=i.componentsProps,c=i.fullWidth,h=void 0!==c&&c,d=i.inputComponent,f=void 0===d?"input":d,_=i.multiline,w=void 0!==_&&_,k=i.type,S=void 0===k?"text":k,C=Object(n.a)(i,y),A=Object(a.a)({},i,{fullWidth:h,inputComponent:f,multiline:w,type:S}),O=function(e){var t=e.classes,i={root:["root",!e.disableUnderline&&"underline"],input:["input"]},n=Object(s.a)(i,g.b,t);return Object(a.a)({},t,n)}(i),T={root:{ownerState:A},input:{ownerState:A}},M=l?Object(p.a)(l,T):T;return Object(v.jsx)(m.c,Object(a.a)({components:Object(a.a)({Root:x,Input:b},o),componentsProps:M,fullWidth:h,inputComponent:f,multiline:w,ref:t,type:S},C,{classes:O}))}));_.muiName="Input";var w,k=_,S=["children","classes","className","label","notched"],C=Object(c.a)("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),A=Object(c.a)("legend")((function(e){var t=e.ownerState,i=e.theme;return Object(a.a)({float:"unset",overflow:"hidden"},!t.withLabel&&{padding:0,lineHeight:"11px",transition:i.transitions.create("width",{duration:150,easing:i.transitions.easing.easeOut})},t.withLabel&&Object(a.a)({display:"block",width:"auto",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:i.transitions.create("max-width",{duration:50,easing:i.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},t.notched&&{maxWidth:"100%",transition:i.transitions.create("max-width",{duration:100,easing:i.transitions.easing.easeOut,delay:50})}))}));var O=i(106),T=i(107),M=i(120),E=["components","fullWidth","inputComponent","label","multiline","notched","type"],I=Object(c.a)(m.b,{shouldForwardProp:function(e){return Object(c.b)(e)||"classes"===e},name:"MuiOutlinedInput",slot:"Root",overridesResolver:m.e})((function(e){var t,i=e.theme,n=e.ownerState,r="light"===i.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return Object(a.a)((t={position:"relative",borderRadius:(i.vars||i).shape.borderRadius},Object(d.a)(t,"&:hover .".concat(M.a.notchedOutline),{borderColor:(i.vars||i).palette.text.primary}),Object(d.a)(t,"@media (hover: none)",Object(d.a)({},"&:hover .".concat(M.a.notchedOutline),{borderColor:i.vars?"rgba(".concat(i.vars.palette.common.onBackgroundChannel," / 0.23)"):r})),Object(d.a)(t,"&.".concat(M.a.focused," .").concat(M.a.notchedOutline),{borderColor:(i.vars||i).palette[n.color].main,borderWidth:2}),Object(d.a)(t,"&.".concat(M.a.error," .").concat(M.a.notchedOutline),{borderColor:(i.vars||i).palette.error.main}),Object(d.a)(t,"&.".concat(M.a.disabled," .").concat(M.a.notchedOutline),{borderColor:(i.vars||i).palette.action.disabled}),t),n.startAdornment&&{paddingLeft:14},n.endAdornment&&{paddingRight:14},n.multiline&&Object(a.a)({padding:"16.5px 14px"},"small"===n.size&&{padding:"8.5px 14px"}))})),P=Object(c.a)((function(e){var t=e.className,i=e.label,r=e.notched,o=Object(n.a)(e,S),s=null!=i&&""!==i,l=Object(a.a)({},e,{notched:r,withLabel:s});return Object(v.jsx)(C,Object(a.a)({"aria-hidden":!0,className:t,ownerState:l},o,{children:Object(v.jsx)(A,{ownerState:l,children:s?Object(v.jsx)("span",{children:i}):w||(w=Object(v.jsx)("span",{className:"notranslate",children:"\u200b"}))})}))}),{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:function(e,t){return t.notchedOutline}})((function(e){var t=e.theme,i="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?"rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):i}})),D=Object(c.a)(m.a,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:m.d})((function(e){var t=e.theme,i=e.ownerState;return Object(a.a)({padding:"16.5px 14px"},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderRadius:"inherit"}},t.vars&&Object(d.a)({"&:-webkit-autofill":{borderRadius:"inherit"}},t.getColorSchemeSelector("dark"),{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}),"small"===i.size&&{padding:"8.5px 14px"},i.multiline&&{padding:0},i.startAdornment&&{paddingLeft:0},i.endAdornment&&{paddingRight:0})})),z=r.forwardRef((function(e,t){var i,o=Object(u.a)({props:e,name:"MuiOutlinedInput"}),l=o.components,c=void 0===l?{}:l,h=o.fullWidth,d=void 0!==h&&h,f=o.inputComponent,p=void 0===f?"input":f,g=o.label,y=o.multiline,x=void 0!==y&&y,b=o.notched,_=o.type,w=void 0===_?"text":_,k=Object(n.a)(o,E),S=function(e){var t=e.classes,i=Object(s.a)({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},M.b,t);return Object(a.a)({},t,i)}(o),C=Object(O.a)(),A=Object(T.a)({props:o,muiFormControl:C,states:["required"]}),z=Object(a.a)({},o,{color:A.color||"primary",disabled:A.disabled,error:A.error,focused:A.focused,formControl:C,fullWidth:d,hiddenLabel:A.hiddenLabel,multiline:x,size:A.size,type:w});return Object(v.jsx)(m.c,Object(a.a)({components:Object(a.a)({Root:I,Input:D},c),renderSuffix:function(e){return Object(v.jsx)(P,{ownerState:z,className:S.notchedOutline,label:null!=g&&""!==g&&A.required?i||(i=Object(v.jsxs)(r.Fragment,{children:[g,"\xa0","*"]})):g,notched:"undefined"!==typeof b?b:Boolean(e.startAdornment||e.filled||e.focused)})},fullWidth:d,inputComponent:p,multiline:x,ref:t,type:w},k,{classes:Object(a.a)({},S,{notchedOutline:null})}))}));z.muiName="Input";var L=z,j=i(99),R=i(505),F=i(507);function B(e){return Object(R.a)("MuiFormLabel",e)}var N=Object(F.a)("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),V=["children","className","color","component","disabled","error","filled","focused","required"],Y=Object(c.a)("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:function(e,t){var i=e.ownerState;return Object(a.a)({},t.root,"secondary"===i.color&&t.colorSecondary,i.filled&&t.filled)}})((function(e){var t,i=e.theme,n=e.ownerState;return Object(a.a)({color:(i.vars||i).palette.text.secondary},i.typography.body1,(t={lineHeight:"1.4375em",padding:0,position:"relative"},Object(d.a)(t,"&.".concat(N.focused),{color:(i.vars||i).palette[n.color].main}),Object(d.a)(t,"&.".concat(N.disabled),{color:(i.vars||i).palette.text.disabled}),Object(d.a)(t,"&.".concat(N.error),{color:(i.vars||i).palette.error.main}),t))})),W=Object(c.a)("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:function(e,t){return t.asterisk}})((function(e){var t=e.theme;return Object(d.a)({},"&.".concat(N.error),{color:(t.vars||t).palette.error.main})})),H=r.forwardRef((function(e,t){var i=Object(u.a)({props:e,name:"MuiFormLabel"}),r=i.children,l=i.className,c=i.component,h=void 0===c?"label":c,d=Object(n.a)(i,V),f=Object(O.a)(),p=Object(T.a)({props:i,muiFormControl:f,states:["color","required","focused","disabled","error","filled"]}),m=Object(a.a)({},i,{color:p.color||"primary",component:h,disabled:p.disabled,error:p.error,filled:p.filled,focused:p.focused,required:p.required}),g=function(e){var t=e.classes,i=e.color,a=e.focused,n=e.disabled,r=e.error,o=e.filled,l=e.required,c={root:["root","color".concat(Object(j.a)(i)),n&&"disabled",r&&"error",o&&"filled",a&&"focused",l&&"required"],asterisk:["asterisk",r&&"error"]};return Object(s.a)(c,B,t)}(m);return Object(v.jsxs)(Y,Object(a.a)({as:h,ownerState:m,className:Object(o.a)(g.root,l),ref:t},d,{children:[r,p.required&&Object(v.jsxs)(W,{ownerState:m,"aria-hidden":!0,className:g.asterisk,children:["\u2009","*"]})]}))}));function U(e){return Object(R.a)("MuiInputLabel",e)}Object(F.a)("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);var X=["disableAnimation","margin","shrink","variant"],G=Object(c.a)(H,{shouldForwardProp:function(e){return Object(c.b)(e)||"classes"===e},name:"MuiInputLabel",slot:"Root",overridesResolver:function(e,t){var i=e.ownerState;return[Object(d.a)({},"& .".concat(N.asterisk),t.asterisk),t.root,i.formControl&&t.formControl,"small"===i.size&&t.sizeSmall,i.shrink&&t.shrink,!i.disableAnimation&&t.animated,t[i.variant]]}})((function(e){var t=e.theme,i=e.ownerState;return Object(a.a)({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},i.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},"small"===i.size&&{transform:"translate(0, 17px) scale(1)"},i.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!i.disableAnimation&&{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})},"filled"===i.variant&&Object(a.a)({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===i.size&&{transform:"translate(12px, 13px) scale(1)"},i.shrink&&Object(a.a)({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},"small"===i.size&&{transform:"translate(12px, 4px) scale(0.75)"})),"outlined"===i.variant&&Object(a.a)({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===i.size&&{transform:"translate(14px, 9px) scale(1)"},i.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 24px)",transform:"translate(14px, -9px) scale(0.75)"}))})),q=r.forwardRef((function(e,t){var i=Object(u.a)({name:"MuiInputLabel",props:e}),r=i.disableAnimation,o=void 0!==r&&r,l=i.shrink,c=Object(n.a)(i,X),h=Object(O.a)(),d=l;"undefined"===typeof d&&h&&(d=h.filled||h.focused||h.adornedStart);var f=Object(T.a)({props:i,muiFormControl:h,states:["size","variant","required"]}),p=Object(a.a)({},i,{disableAnimation:o,formControl:h,shrink:d,size:f.size,variant:f.variant,required:f.required}),m=function(e){var t=e.classes,i=e.formControl,n=e.size,r=e.shrink,o={root:["root",i&&"formControl",!e.disableAnimation&&"animated",r&&"shrink","small"===n&&"sizeSmall",e.variant],asterisk:[e.required&&"asterisk"]},l=Object(s.a)(o,U,t);return Object(a.a)({},t,l)}(p);return Object(v.jsx)(G,Object(a.a)({"data-shrink":d,ownerState:p,ref:t},c,{classes:m}))})),Z=i(7),K=i(129),J=i(135),Q=i(153);function $(e){return Object(R.a)("MuiFormControl",e)}Object(F.a)("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);var ee=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],te=Object(c.a)("div",{name:"MuiFormControl",slot:"Root",overridesResolver:function(e,t){var i=e.ownerState;return Object(a.a)({},t.root,t["margin".concat(Object(j.a)(i.margin))],i.fullWidth&&t.fullWidth)}})((function(e){var t=e.ownerState;return Object(a.a)({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},"normal"===t.margin&&{marginTop:16,marginBottom:8},"dense"===t.margin&&{marginTop:8,marginBottom:4},t.fullWidth&&{width:"100%"})})),ie=r.forwardRef((function(e,t){var i=Object(u.a)({props:e,name:"MuiFormControl"}),l=i.children,c=i.className,h=i.color,d=void 0===h?"primary":h,f=i.component,p=void 0===f?"div":f,m=i.disabled,g=void 0!==m&&m,y=i.error,x=void 0!==y&&y,b=i.focused,_=i.fullWidth,w=void 0!==_&&_,k=i.hiddenLabel,S=void 0!==k&&k,C=i.margin,A=void 0===C?"none":C,O=i.required,T=void 0!==O&&O,M=i.size,E=void 0===M?"medium":M,I=i.variant,P=void 0===I?"outlined":I,D=Object(n.a)(i,ee),z=Object(a.a)({},i,{color:d,component:p,disabled:g,error:x,fullWidth:w,hiddenLabel:S,margin:A,required:T,size:E,variant:P}),L=function(e){var t=e.classes,i=e.margin,a=e.fullWidth,n={root:["root","none"!==i&&"margin".concat(Object(j.a)(i)),a&&"fullWidth"]};return Object(s.a)(n,$,t)}(z),R=r.useState((function(){var e=!1;return l&&r.Children.forEach(l,(function(t){if(Object(J.a)(t,["Input","Select"])){var i=Object(J.a)(t,["Select"])?t.props.input:t;i&&Object(K.a)(i.props)&&(e=!0)}})),e})),F=Object(Z.a)(R,2),B=F[0],N=F[1],V=r.useState((function(){var e=!1;return l&&r.Children.forEach(l,(function(t){Object(J.a)(t,["Input","Select"])&&Object(K.b)(t.props,!0)&&(e=!0)})),e})),Y=Object(Z.a)(V,2),W=Y[0],H=Y[1],U=r.useState(!1),X=Object(Z.a)(U,2),G=X[0],q=X[1];g&&G&&q(!1);var ie=void 0===b||g?G:b,ae=r.useCallback((function(){H(!0)}),[]),ne={adornedStart:B,setAdornedStart:N,color:d,disabled:g,error:x,filled:W,focused:ie,fullWidth:w,hiddenLabel:S,size:E,onBlur:function(){q(!1)},onEmpty:r.useCallback((function(){H(!1)}),[]),onFilled:ae,onFocus:function(){q(!0)},registerEffect:void 0,required:T,variant:P};return Object(v.jsx)(Q.a.Provider,{value:ne,children:Object(v.jsx)(te,Object(a.a)({as:p,ownerState:z,className:Object(o.a)(L.root,c),ref:t},D,{children:l}))})}));function ae(e){return Object(R.a)("MuiFormHelperText",e)}var ne,re=Object(F.a)("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),oe=["children","className","component","disabled","error","filled","focused","margin","required","variant"],se=Object(c.a)("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:function(e,t){var i=e.ownerState;return[t.root,i.size&&t["size".concat(Object(j.a)(i.size))],i.contained&&t.contained,i.filled&&t.filled]}})((function(e){var t,i=e.theme,n=e.ownerState;return Object(a.a)({color:(i.vars||i).palette.text.secondary},i.typography.caption,(t={textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0},Object(d.a)(t,"&.".concat(re.disabled),{color:(i.vars||i).palette.text.disabled}),Object(d.a)(t,"&.".concat(re.error),{color:(i.vars||i).palette.error.main}),t),"small"===n.size&&{marginTop:4},n.contained&&{marginLeft:14,marginRight:14})})),le=r.forwardRef((function(e,t){var i=Object(u.a)({props:e,name:"MuiFormHelperText"}),r=i.children,l=i.className,c=i.component,h=void 0===c?"p":c,d=Object(n.a)(i,oe),f=Object(O.a)(),p=Object(T.a)({props:i,muiFormControl:f,states:["variant","size","disabled","error","filled","focused","required"]}),m=Object(a.a)({},i,{component:h,contained:"filled"===p.variant||"outlined"===p.variant,variant:p.variant,size:p.size,disabled:p.disabled,error:p.error,filled:p.filled,focused:p.focused,required:p.required}),g=function(e){var t=e.classes,i=e.contained,a=e.size,n=e.disabled,r=e.error,o=e.filled,l=e.focused,c=e.required,u={root:["root",n&&"disabled",r&&"error",a&&"size".concat(Object(j.a)(a)),i&&"contained",l&&"focused",o&&"filled",c&&"required"]};return Object(s.a)(u,ae,t)}(m);return Object(v.jsx)(se,Object(a.a)({as:h,ownerState:m,className:Object(o.a)(g.root,l),ref:t},d,{children:" "===r?ne||(ne=Object(v.jsx)("span",{className:"notranslate",children:"\u200b"})):r}))})),ce=i(383),ue=(i(111),i(114)),he=i(553),de=i(523).a,fe=i(100),pe=i(124),me=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function ge(e,t,i){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:i?null:e.firstChild}function ve(e,t,i){return e===t?i?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:i?null:e.lastChild}function ye(e,t){if(void 0===t)return!0;var i=e.innerText;return void 0===i&&(i=e.textContent),0!==(i=i.trim().toLowerCase()).length&&(t.repeating?i[0]===t.keys[0]:0===i.indexOf(t.keys.join("")))}function xe(e,t,i,a,n,r){for(var o=!1,s=n(e,t,!!t&&i);s;){if(s===e.firstChild){if(o)return!1;o=!0}var l=!a&&(s.disabled||"true"===s.getAttribute("aria-disabled"));if(s.hasAttribute("tabindex")&&ye(s,r)&&!l)return s.focus(),!0;s=n(e,s,i)}return!1}var be=r.forwardRef((function(e,t){var i=e.actions,o=e.autoFocus,s=void 0!==o&&o,l=e.autoFocusItem,c=void 0!==l&&l,u=e.children,h=e.className,d=e.disabledItemsFocusable,f=void 0!==d&&d,p=e.disableListWrap,m=void 0!==p&&p,g=e.onKeyDown,y=e.variant,x=void 0===y?"selectedMenu":y,b=Object(n.a)(e,me),_=r.useRef(null),w=r.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Object(pe.a)((function(){s&&_.current.focus()}),[s]),r.useImperativeHandle(i,(function(){return{adjustStyleForScrollbar:function(e,t){var i=!_.current.style.width;if(e.clientHeight<_.current.clientHeight&&i){var a="".concat(de(Object(ue.a)(e)),"px");_.current.style["rtl"===t.direction?"paddingLeft":"paddingRight"]=a,_.current.style.width="calc(100% + ".concat(a,")")}return _.current}}}),[]);var k=Object(fe.a)(_,t),S=-1;r.Children.forEach(u,(function(e,t){r.isValidElement(e)&&(e.props.disabled||("selectedMenu"===x&&e.props.selected||-1===S)&&(S=t))}));var C=r.Children.map(u,(function(e,t){if(t===S){var i={};return c&&(i.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===x&&(i.tabIndex=0),r.cloneElement(e,i)}return e}));return Object(v.jsx)(he.a,Object(a.a)({role:"menu",ref:k,className:h,onKeyDown:function(e){var t=_.current,i=e.key,a=Object(ue.a)(t).activeElement;if("ArrowDown"===i)e.preventDefault(),xe(t,a,m,f,ge);else if("ArrowUp"===i)e.preventDefault(),xe(t,a,m,f,ve);else if("Home"===i)e.preventDefault(),xe(t,null,m,f,ge);else if("End"===i)e.preventDefault(),xe(t,null,m,f,ve);else if(1===i.length){var n=w.current,r=i.toLowerCase(),o=performance.now();n.keys.length>0&&(o-n.lastTime>500?(n.keys=[],n.repeating=!0,n.previousKeyMatched=!0):n.repeating&&r!==n.keys[0]&&(n.repeating=!1)),n.lastTime=o,n.keys.push(r);var s=a&&!n.repeating&&ye(a,n);n.previousKeyMatched&&(s||xe(t,a,!1,f,ge,n))?e.preventDefault():n.previousKeyMatched=!1}g&&g(e)},tabIndex:s?0:-1},b,{children:C}))})),_e=i(550),we=i(133),ke=i(151),Se=i(196),Ce=i(547);function Ae(e){return Object(R.a)("MuiPopover",e)}Object(F.a)("MuiPopover",["root","paper"]);var Oe=["onEntering"],Te=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"];function Me(e,t){var i=0;return"number"===typeof t?i=t:"center"===t?i=e.height/2:"bottom"===t&&(i=e.height),i}function Ee(e,t){var i=0;return"number"===typeof t?i=t:"center"===t?i=e.width/2:"right"===t&&(i=e.width),i}function Ie(e){return[e.horizontal,e.vertical].map((function(e){return"number"===typeof e?"".concat(e,"px"):e})).join(" ")}function Pe(e){return"function"===typeof e?e():e}var De=Object(c.a)(Ce.a,{name:"MuiPopover",slot:"Root",overridesResolver:function(e,t){return t.root}})({}),ze=Object(c.a)(_e.a,{name:"MuiPopover",slot:"Paper",overridesResolver:function(e,t){return t.paper}})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Le=r.forwardRef((function(e,t){var i=Object(u.a)({props:e,name:"MuiPopover"}),l=i.action,c=i.anchorEl,h=i.anchorOrigin,d=void 0===h?{vertical:"top",horizontal:"left"}:h,f=i.anchorPosition,p=i.anchorReference,m=void 0===p?"anchorEl":p,g=i.children,y=i.className,x=i.container,b=i.elevation,_=void 0===b?8:b,w=i.marginThreshold,k=void 0===w?16:w,S=i.open,C=i.PaperProps,A=void 0===C?{}:C,O=i.transformOrigin,T=void 0===O?{vertical:"top",horizontal:"left"}:O,M=i.TransitionComponent,E=void 0===M?Se.a:M,I=i.transitionDuration,P=void 0===I?"auto":I,D=i.TransitionProps,z=(D=void 0===D?{}:D).onEntering,L=Object(n.a)(i.TransitionProps,Oe),j=Object(n.a)(i,Te),R=r.useRef(),F=Object(fe.a)(R,A.ref),B=Object(a.a)({},i,{anchorOrigin:d,anchorReference:m,elevation:_,marginThreshold:k,PaperProps:A,transformOrigin:T,TransitionComponent:E,transitionDuration:P,TransitionProps:L}),N=function(e){var t=e.classes;return Object(s.a)({root:["root"],paper:["paper"]},Ae,t)}(B),V=r.useCallback((function(){if("anchorPosition"===m)return f;var e=Pe(c),t=(e&&1===e.nodeType?e:Object(ue.a)(R.current).body).getBoundingClientRect();return{top:t.top+Me(t,d.vertical),left:t.left+Ee(t,d.horizontal)}}),[c,d.horizontal,d.vertical,f,m]),Y=r.useCallback((function(e){return{vertical:Me(e,T.vertical),horizontal:Ee(e,T.horizontal)}}),[T.horizontal,T.vertical]),W=r.useCallback((function(e){var t={width:e.offsetWidth,height:e.offsetHeight},i=Y(t);if("none"===m)return{top:null,left:null,transformOrigin:Ie(i)};var a=V(),n=a.top-i.vertical,r=a.left-i.horizontal,o=n+t.height,s=r+t.width,l=Object(ke.a)(Pe(c)),u=l.innerHeight-k,h=l.innerWidth-k;if(n<k){var d=n-k;n-=d,i.vertical+=d}else if(o>u){var f=o-u;n-=f,i.vertical+=f}if(r<k){var p=r-k;r-=p,i.horizontal+=p}else if(s>h){var g=s-h;r-=g,i.horizontal+=g}return{top:"".concat(Math.round(n),"px"),left:"".concat(Math.round(r),"px"),transformOrigin:Ie(i)}}),[c,m,V,Y,k]),H=r.useCallback((function(){var e=R.current;if(e){var t=W(e);null!==t.top&&(e.style.top=t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin}}),[W]);r.useEffect((function(){S&&H()})),r.useImperativeHandle(l,(function(){return S?{updatePosition:function(){H()}}:null}),[S,H]),r.useEffect((function(){if(S){var e=Object(we.a)((function(){H()})),t=Object(ke.a)(c);return t.addEventListener("resize",e),function(){e.clear(),t.removeEventListener("resize",e)}}}),[c,S,H]);var U=P;"auto"!==P||E.muiSupportAuto||(U=void 0);var X=x||(c?Object(ue.a)(Pe(c)).body:void 0);return Object(v.jsx)(De,Object(a.a)({BackdropProps:{invisible:!0},className:Object(o.a)(N.root,y),container:X,open:S,ref:t,ownerState:B},j,{children:Object(v.jsx)(E,Object(a.a)({appear:!0,in:S,onEntering:function(e,t){z&&z(e,t),H()},timeout:U},L,{children:Object(v.jsx)(ze,Object(a.a)({elevation:_},A,{ref:F,className:Object(o.a)(N.paper,A.className),children:g}))}))}))})),je=i(112);function Re(e){return Object(R.a)("MuiMenu",e)}Object(F.a)("MuiMenu",["root","paper","list"]);var Fe=["onEntering"],Be=["autoFocus","children","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"],Ne={vertical:"top",horizontal:"right"},Ve={vertical:"top",horizontal:"left"},Ye=Object(c.a)(Le,{shouldForwardProp:function(e){return Object(c.b)(e)||"classes"===e},name:"MuiMenu",slot:"Root",overridesResolver:function(e,t){return t.root}})({}),We=Object(c.a)(_e.a,{name:"MuiMenu",slot:"Paper",overridesResolver:function(e,t){return t.paper}})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),He=Object(c.a)(be,{name:"MuiMenu",slot:"List",overridesResolver:function(e,t){return t.list}})({outline:0}),Ue=r.forwardRef((function(e,t){var i=Object(u.a)({props:e,name:"MuiMenu"}),l=i.autoFocus,c=void 0===l||l,h=i.children,d=i.disableAutoFocusItem,f=void 0!==d&&d,p=i.MenuListProps,m=void 0===p?{}:p,g=i.onClose,y=i.open,x=i.PaperProps,b=void 0===x?{}:x,_=i.PopoverClasses,w=i.transitionDuration,k=void 0===w?"auto":w,S=i.TransitionProps,C=(S=void 0===S?{}:S).onEntering,A=i.variant,O=void 0===A?"selectedMenu":A,T=Object(n.a)(i.TransitionProps,Fe),M=Object(n.a)(i,Be),E=Object(je.a)(),I="rtl"===E.direction,P=Object(a.a)({},i,{autoFocus:c,disableAutoFocusItem:f,MenuListProps:m,onEntering:C,PaperProps:b,transitionDuration:k,TransitionProps:T,variant:O}),D=function(e){var t=e.classes;return Object(s.a)({root:["root"],paper:["paper"],list:["list"]},Re,t)}(P),z=c&&!f&&y,L=r.useRef(null),j=-1;return r.Children.map(h,(function(e,t){r.isValidElement(e)&&(e.props.disabled||("selectedMenu"===O&&e.props.selected||-1===j)&&(j=t))})),Object(v.jsx)(Ye,Object(a.a)({classes:_,onClose:g,anchorOrigin:{vertical:"bottom",horizontal:I?"right":"left"},transformOrigin:I?Ne:Ve,PaperProps:Object(a.a)({component:We},b,{classes:Object(a.a)({},b.classes,{root:D.paper})}),className:D.root,open:y,ref:t,transitionDuration:k,TransitionProps:Object(a.a)({onEntering:function(e,t){L.current&&L.current.adjustStyleForScrollbar(e,E),C&&C(e,t)}},T),ownerState:P},M,{children:Object(v.jsx)(He,Object(a.a)({onKeyDown:function(e){"Tab"===e.key&&(e.preventDefault(),g&&g(e,"tabKeyDown"))},actions:L,autoFocus:c&&(-1===j||f),autoFocusItem:z,variant:O},m,{className:Object(o.a)(D.list,m.className),children:h}))}))}));function Xe(e){return Object(R.a)("MuiNativeSelect",e)}var Ge=Object(F.a)("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]),qe=["className","disabled","IconComponent","inputRef","variant"],Ze=function(e){var t,i=e.ownerState,n=e.theme;return Object(a.a)((t={MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{backgroundColor:"light"===n.palette.mode?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",borderRadius:0},"&::-ms-expand":{display:"none"}},Object(d.a)(t,"&.".concat(Ge.disabled),{cursor:"default"}),Object(d.a)(t,"&[multiple]",{height:"auto"}),Object(d.a)(t,"&:not([multiple]) option, &:not([multiple]) optgroup",{backgroundColor:n.palette.background.paper}),Object(d.a)(t,"&&&",{paddingRight:24,minWidth:16}),t),"filled"===i.variant&&{"&&&":{paddingRight:32}},"outlined"===i.variant&&{borderRadius:n.shape.borderRadius,"&:focus":{borderRadius:n.shape.borderRadius},"&&&":{paddingRight:32}})},Ke=Object(c.a)("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:c.b,overridesResolver:function(e,t){var i=e.ownerState;return[t.select,t[i.variant],Object(d.a)({},"&.".concat(Ge.multiple),t.multiple)]}})(Ze),Je=function(e){var t=e.ownerState,i=e.theme;return Object(a.a)(Object(d.a)({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:i.palette.action.active},"&.".concat(Ge.disabled),{color:i.palette.action.disabled}),t.open&&{transform:"rotate(180deg)"},"filled"===t.variant&&{right:7},"outlined"===t.variant&&{right:7})},Qe=Object(c.a)("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:function(e,t){var i=e.ownerState;return[t.icon,i.variant&&t["icon".concat(Object(j.a)(i.variant))],i.open&&t.iconOpen]}})(Je),$e=r.forwardRef((function(e,t){var i=e.className,l=e.disabled,c=e.IconComponent,u=e.inputRef,h=e.variant,d=void 0===h?"standard":h,f=Object(n.a)(e,qe),p=Object(a.a)({},e,{disabled:l,variant:d}),m=function(e){var t=e.classes,i=e.variant,a=e.disabled,n=e.multiple,r=e.open,o={select:["select",i,a&&"disabled",n&&"multiple"],icon:["icon","icon".concat(Object(j.a)(i)),r&&"iconOpen",a&&"disabled"]};return Object(s.a)(o,Xe,t)}(p);return Object(v.jsxs)(r.Fragment,{children:[Object(v.jsx)(Ke,Object(a.a)({ownerState:p,className:Object(o.a)(m.select,i),disabled:l,ref:u||t},f)),e.multiple?null:Object(v.jsx)(Qe,{as:c,ownerState:p,className:m.icon})]})})),et=i(145);function tt(e){return Object(R.a)("MuiSelect",e)}var it,at=Object(F.a)("MuiSelect",["select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]),nt=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],rt=Object(c.a)("div",{name:"MuiSelect",slot:"Select",overridesResolver:function(e,t){var i=e.ownerState;return[Object(d.a)({},"&.".concat(at.select),t.select),Object(d.a)({},"&.".concat(at.select),t[i.variant]),Object(d.a)({},"&.".concat(at.multiple),t.multiple)]}})(Ze,Object(d.a)({},"&.".concat(at.select),{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"})),ot=Object(c.a)("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:function(e,t){var i=e.ownerState;return[t.icon,i.variant&&t["icon".concat(Object(j.a)(i.variant))],i.open&&t.iconOpen]}})(Je),st=Object(c.a)("input",{shouldForwardProp:function(e){return Object(c.c)(e)&&"classes"!==e},name:"MuiSelect",slot:"NativeInput",overridesResolver:function(e,t){return t.nativeInput}})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function lt(e,t){return"object"===typeof t&&null!==t?e===t:String(e)===String(t)}function ct(e){return null==e||"string"===typeof e&&!e.trim()}var ut,ht,dt=r.forwardRef((function(e,t){var i=e["aria-describedby"],l=e["aria-label"],c=e.autoFocus,u=e.autoWidth,h=e.children,d=e.className,f=e.defaultOpen,p=e.defaultValue,m=e.disabled,g=e.displayEmpty,y=e.IconComponent,x=e.inputRef,b=e.labelId,_=e.MenuProps,w=void 0===_?{}:_,k=e.multiple,S=e.name,C=e.onBlur,A=e.onChange,O=e.onClose,T=e.onFocus,M=e.onOpen,E=e.open,I=e.readOnly,P=e.renderValue,D=e.SelectDisplayProps,z=void 0===D?{}:D,L=e.tabIndex,R=e.value,F=e.variant,B=void 0===F?"standard":F,N=Object(n.a)(e,nt),V=Object(et.a)({controlled:R,default:p,name:"Select"}),Y=Object(Z.a)(V,2),W=Y[0],H=Y[1],U=Object(et.a)({controlled:E,default:f,name:"Select"}),X=Object(Z.a)(U,2),G=X[0],q=X[1],J=r.useRef(null),Q=r.useRef(null),$=r.useState(null),ee=Object(Z.a)($,2),te=ee[0],ie=ee[1],ae=r.useRef(null!=E).current,ne=r.useState(),re=Object(Z.a)(ne,2),oe=re[0],se=re[1],le=Object(fe.a)(t,x),he=r.useCallback((function(e){Q.current=e,e&&ie(e)}),[]);r.useImperativeHandle(le,(function(){return{focus:function(){Q.current.focus()},node:J.current,value:W}}),[W]),r.useEffect((function(){f&&G&&te&&!ae&&(se(u?null:te.clientWidth),Q.current.focus())}),[te,u]),r.useEffect((function(){c&&Q.current.focus()}),[c]),r.useEffect((function(){if(b){var e=Object(ue.a)(Q.current).getElementById(b);if(e){var t=function(){getSelection().isCollapsed&&Q.current.focus()};return e.addEventListener("click",t),function(){e.removeEventListener("click",t)}}}}),[b]);var de,pe,me=function(e,t){e?M&&M(t):O&&O(t),ae||(se(u?null:te.clientWidth),q(e))},ge=r.Children.toArray(h),ve=function(e){return function(t){var i;if(t.currentTarget.hasAttribute("tabindex")){if(k){i=Array.isArray(W)?W.slice():[];var a=W.indexOf(e.props.value);-1===a?i.push(e.props.value):i.splice(a,1)}else i=e.props.value;if(e.props.onClick&&e.props.onClick(t),W!==i&&(H(i),A)){var n=t.nativeEvent||t,r=new n.constructor(n.type,n);Object.defineProperty(r,"target",{writable:!0,value:{value:i,name:S}}),A(r,e)}k||me(!1,t)}}},ye=null!==te&&G;delete N["aria-invalid"];var xe=[],be=!1;(Object(K.b)({value:W})||g)&&(P?de=P(W):be=!0);var _e=ge.map((function(e,t,i){if(!r.isValidElement(e))return null;var a;if(k){if(!Array.isArray(W))throw new Error(Object(ce.a)(2));(a=W.some((function(t){return lt(t,e.props.value)})))&&be&&xe.push(e.props.children)}else(a=lt(W,e.props.value))&&be&&(pe=e.props.children);if(a&&!0,void 0===e.props.value)return r.cloneElement(e,{"aria-readonly":!0,role:"option"});return r.cloneElement(e,{"aria-selected":a?"true":"false",onClick:ve(e),onKeyUp:function(t){" "===t.key&&t.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(t)},role:"option",selected:void 0===i[0].props.value||!0===i[0].props.disabled?function(){if(W)return a;var t=i.find((function(e){return void 0!==e.props.value&&!0!==e.props.disabled}));return e===t||a}():a,value:void 0,"data-value":e.props.value})}));be&&(de=k?0===xe.length?null:xe.reduce((function(e,t,i){return e.push(t),i<xe.length-1&&e.push(", "),e}),[]):pe);var we,ke=oe;!u&&ae&&te&&(ke=te.clientWidth),we="undefined"!==typeof L?L:m?null:0;var Se=z.id||(S?"mui-component-select-".concat(S):void 0),Ce=Object(a.a)({},e,{variant:B,value:W,open:ye}),Ae=function(e){var t=e.classes,i=e.variant,a=e.disabled,n=e.multiple,r=e.open,o={select:["select",i,a&&"disabled",n&&"multiple"],icon:["icon","icon".concat(Object(j.a)(i)),r&&"iconOpen",a&&"disabled"],nativeInput:["nativeInput"]};return Object(s.a)(o,tt,t)}(Ce);return Object(v.jsxs)(r.Fragment,{children:[Object(v.jsx)(rt,Object(a.a)({ref:he,tabIndex:we,role:"button","aria-disabled":m?"true":void 0,"aria-expanded":ye?"true":"false","aria-haspopup":"listbox","aria-label":l,"aria-labelledby":[b,Se].filter(Boolean).join(" ")||void 0,"aria-describedby":i,onKeyDown:function(e){if(!I){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(e.key)&&(e.preventDefault(),me(!0,e))}},onMouseDown:m||I?null:function(e){0===e.button&&(e.preventDefault(),Q.current.focus(),me(!0,e))},onBlur:function(e){!ye&&C&&(Object.defineProperty(e,"target",{writable:!0,value:{value:W,name:S}}),C(e))},onFocus:T},z,{ownerState:Ce,className:Object(o.a)(z.className,Ae.select,d),id:Se,children:ct(de)?it||(it=Object(v.jsx)("span",{className:"notranslate",children:"\u200b"})):de})),Object(v.jsx)(st,Object(a.a)({value:Array.isArray(W)?W.join(","):W,name:S,ref:J,"aria-hidden":!0,onChange:function(e){var t=ge.map((function(e){return e.props.value})).indexOf(e.target.value);if(-1!==t){var i=ge[t];H(i.props.value),A&&A(e,i)}},tabIndex:-1,disabled:m,className:Ae.nativeInput,autoFocus:c,ownerState:Ce},N)),Object(v.jsx)(ot,{as:y,className:Ae.icon,ownerState:Ce}),Object(v.jsx)(Ue,Object(a.a)({id:"menu-".concat(S||""),anchorEl:te,open:ye,onClose:function(e){me(!1,e)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},w,{MenuListProps:Object(a.a)({"aria-labelledby":b,role:"listbox",disableListWrap:!0},w.MenuListProps),PaperProps:Object(a.a)({},w.PaperProps,{style:Object(a.a)({minWidth:ke},null!=w.PaperProps?w.PaperProps.style:null)}),children:_e}))]})})),ft=i(122),pt=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],mt={name:"MuiSelect",overridesResolver:function(e,t){return t.root},shouldForwardProp:function(e){return Object(c.b)(e)&&"variant"!==e},slot:"Root"},gt=Object(c.a)(h.a,mt)(""),vt=Object(c.a)(L,mt)(""),yt=Object(c.a)(k,mt)(""),xt=r.forwardRef((function(e,t){var i=Object(u.a)({name:"MuiSelect",props:e}),s=i.autoWidth,l=void 0!==s&&s,c=i.children,h=i.classes,d=void 0===h?{}:h,f=i.className,m=i.defaultOpen,g=void 0!==m&&m,y=i.displayEmpty,x=void 0!==y&&y,b=i.IconComponent,_=void 0===b?ft.a:b,w=i.id,k=i.input,S=i.inputProps,C=i.label,A=i.labelId,M=i.MenuProps,E=i.multiple,I=void 0!==E&&E,P=i.native,D=void 0!==P&&P,z=i.onClose,L=i.onOpen,j=i.open,R=i.renderValue,F=i.SelectDisplayProps,B=i.variant,N=void 0===B?"outlined":B,V=Object(n.a)(i,pt),Y=D?$e:dt,W=Object(O.a)(),H=Object(T.a)({props:i,muiFormControl:W,states:["variant"]}).variant||N,U=k||{standard:ut||(ut=Object(v.jsx)(gt,{})),outlined:Object(v.jsx)(vt,{label:C}),filled:ht||(ht=Object(v.jsx)(yt,{}))}[H],X=function(e){return e.classes}(Object(a.a)({},i,{variant:H,classes:d})),G=Object(fe.a)(t,U.ref);return r.cloneElement(U,Object(a.a)({inputComponent:Y,inputProps:Object(a.a)({children:c,IconComponent:_,variant:H,type:void 0,multiple:I},D?{id:w}:{autoWidth:l,defaultOpen:g,displayEmpty:x,labelId:A,MenuProps:M,onClose:z,onOpen:L,open:j,renderValue:R,SelectDisplayProps:Object(a.a)({id:w},F)},S,{classes:S?Object(p.a)(X,S.classes):X},k?k.props.inputProps:{})},I&&D&&"outlined"===H?{notched:!0}:{},{ref:G,className:Object(o.a)(U.props.className,f),variant:H},V))}));xt.muiName="Select";var bt=xt;function _t(e){return Object(R.a)("MuiTextField",e)}Object(F.a)("MuiTextField",["root"]);var wt=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],kt={standard:h.a,filled:k,outlined:L},St=Object(c.a)(ie,{name:"MuiTextField",slot:"Root",overridesResolver:function(e,t){return t.root}})({}),Ct=r.forwardRef((function(e,t){var i=Object(u.a)({props:e,name:"MuiTextField"}),r=i.autoComplete,c=i.autoFocus,h=void 0!==c&&c,d=i.children,f=i.className,p=i.color,m=void 0===p?"primary":p,g=i.defaultValue,y=i.disabled,x=void 0!==y&&y,b=i.error,_=void 0!==b&&b,w=i.FormHelperTextProps,k=i.fullWidth,S=void 0!==k&&k,C=i.helperText,A=i.id,O=i.InputLabelProps,T=i.inputProps,M=i.InputProps,E=i.inputRef,I=i.label,P=i.maxRows,D=i.minRows,z=i.multiline,L=void 0!==z&&z,j=i.name,R=i.onBlur,F=i.onChange,B=i.onFocus,N=i.placeholder,V=i.required,Y=void 0!==V&&V,W=i.rows,H=i.select,U=void 0!==H&&H,X=i.SelectProps,G=i.type,Z=i.value,K=i.variant,J=void 0===K?"outlined":K,Q=Object(n.a)(i,wt),$=Object(a.a)({},i,{autoFocus:h,color:m,disabled:x,error:_,fullWidth:S,multiline:L,required:Y,select:U,variant:J}),ee=function(e){var t=e.classes;return Object(s.a)({root:["root"]},_t,t)}($);var te={};"outlined"===J&&(O&&"undefined"!==typeof O.shrink&&(te.notched=O.shrink),te.label=I),U&&(X&&X.native||(te.id=void 0),te["aria-describedby"]=void 0);var ie=Object(l.a)(A),ae=C&&ie?"".concat(ie,"-helper-text"):void 0,ne=I&&ie?"".concat(ie,"-label"):void 0,re=kt[J],oe=Object(v.jsx)(re,Object(a.a)({"aria-describedby":ae,autoComplete:r,autoFocus:h,defaultValue:g,fullWidth:S,multiline:L,name:j,rows:W,maxRows:P,minRows:D,type:G,value:Z,id:ie,inputRef:E,onBlur:R,onChange:F,onFocus:B,placeholder:N,inputProps:T},te,M));return Object(v.jsxs)(St,Object(a.a)({className:Object(o.a)(ee.root,f),disabled:x,error:_,fullWidth:S,ref:t,required:Y,color:m,variant:J,ownerState:$},Q,{children:[null!=I&&""!==I&&Object(v.jsx)(q,Object(a.a)({htmlFor:ie,id:ne},O,{children:I})),U?Object(v.jsx)(bt,Object(a.a)({"aria-describedby":ae,id:ie,labelId:ne,value:Z,input:oe},X,{children:d})):oe,C&&Object(v.jsx)(le,Object(a.a)({id:ae},w,{children:C}))]}))}));t.a=Ct},198:function(e,t,i){"use strict";var a=i(6),n=i(7),r=i(17),o=i(0),s=i(513),l=i(387),c=i(390),u=i(134),h=i(171),d=i(169),f=i(170),p=i(149),m=i(127);var g={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var i=t.styles[e]||{},a=t.attributes[e]||{},n=t.elements[e];Object(m.b)(n)&&Object(p.a)(n)&&(Object.assign(n.style,i),Object.keys(a).forEach((function(e){var t=a[e];!1===t?n.removeAttribute(e):n.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,i.popper),t.styles=i,t.elements.arrow&&Object.assign(t.elements.arrow.style,i.arrow),function(){Object.keys(t.elements).forEach((function(e){var a=t.elements[e],n=t.attributes[e]||{},r=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:i[e]).reduce((function(e,t){return e[t]="",e}),{});Object(m.b)(a)&&Object(p.a)(a)&&(Object.assign(a.style,r),Object.keys(n).forEach((function(e){a.removeAttribute(e)})))}))}},requires:["computeStyles"]},v=i(172),y=i(174),x=i(176),b=i(173),_=i(168),w=[h.a,d.a,f.a,g,v.a,y.a,x.a,b.a,_.a],k=Object(u.a)({defaultModifiers:w}),S=i(504),C=i(515),A=i(505),O=i(507);function T(e){return Object(A.a)("MuiPopperUnstyled",e)}Object(O.a)("MuiPopperUnstyled",["root"]);var M=i(544),E=i(31),I=["anchorEl","children","component","components","componentsProps","direction","disablePortal","modifiers","open","ownerState","placement","popperOptions","popperRef","TransitionProps"],P=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition"];function D(e){return"function"===typeof e?e():e}var z={},L=o.forwardRef((function(e,t){var i,c=e.anchorEl,u=e.children,h=e.component,d=e.components,f=void 0===d?{}:d,p=e.componentsProps,m=void 0===p?{}:p,g=e.direction,v=e.disablePortal,y=e.modifiers,x=e.open,b=e.ownerState,_=e.placement,w=e.popperOptions,C=e.popperRef,A=e.TransitionProps,O=Object(r.a)(e,I),P=o.useRef(null),z=Object(s.a)(P,t),L=o.useRef(null),j=Object(s.a)(L,C),R=o.useRef(j);Object(l.a)((function(){R.current=j}),[j]),o.useImperativeHandle(C,(function(){return L.current}),[]);var F=function(e,t){if("ltr"===t)return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}(_,g),B=o.useState(F),N=Object(n.a)(B,2),V=N[0],Y=N[1];o.useEffect((function(){L.current&&L.current.forceUpdate()})),Object(l.a)((function(){if(c&&x){D(c);var e=[{name:"preventOverflow",options:{altBoundary:v}},{name:"flip",options:{altBoundary:v}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:function(e){var t=e.state;Y(t.placement)}}];null!=y&&(e=e.concat(y)),w&&null!=w.modifiers&&(e=e.concat(w.modifiers));var t=k(D(c),P.current,Object(a.a)({placement:F},w,{modifiers:e}));return R.current(t),function(){t.destroy(),R.current(null)}}}),[c,v,y,x,w,F]);var W={placement:V};null!==A&&(W.TransitionProps=A);var H=Object(S.a)({root:["root"]},T,{}),U=null!=(i=null!=h?h:f.Root)?i:"div",X=Object(M.a)({elementType:U,externalSlotProps:m.root,externalForwardedProps:O,additionalProps:{role:"tooltip",ref:z},ownerState:Object(a.a)({},e,b),className:H.root});return Object(E.jsx)(U,Object(a.a)({},X,{children:"function"===typeof u?u(W):u}))})),j=o.forwardRef((function(e,t){var i=e.anchorEl,s=e.children,l=e.container,u=e.direction,h=void 0===u?"ltr":u,d=e.disablePortal,f=void 0!==d&&d,p=e.keepMounted,m=void 0!==p&&p,g=e.modifiers,v=e.open,y=e.placement,x=void 0===y?"bottom":y,b=e.popperOptions,_=void 0===b?z:b,w=e.popperRef,k=e.style,S=e.transition,A=void 0!==S&&S,O=Object(r.a)(e,P),T=o.useState(!0),M=Object(n.a)(T,2),I=M[0],j=M[1];if(!m&&!v&&(!A||I))return null;var R=l||(i?Object(c.a)(D(i)).body:void 0);return Object(E.jsx)(C.a,{disablePortal:f,container:R,children:Object(E.jsx)(L,Object(a.a)({anchorEl:i,direction:h,disablePortal:f,modifiers:g,ref:t,open:A?!I:v,placement:x,popperOptions:_,popperRef:w},O,{style:Object(a.a)({position:"fixed",top:0,left:0,display:v||!m||A&&!I?null:"none"},k),TransitionProps:A?{in:v,onEnter:function(){j(!1)},onExited:function(){j(!0)}}:null,children:s}))})})),R=i(384),F=i(96),B=i(98),N=Object(F.a)(j,{name:"MuiPopper",slot:"Root",overridesResolver:function(e,t){return t.root}})({}),V=o.forwardRef((function(e,t){var i=Object(R.a)(),n=Object(B.a)({props:e,name:"MuiPopper"});return Object(E.jsx)(N,Object(a.a)({direction:null==i?void 0:i.direction},n,{ref:t}))}));t.a=V},205:function(e,t,i){"use strict";var a=i(516);t.a=a.a},206:function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return r})),i.d(t,"c",(function(){return o}));var a=i(118);function n(e){return Object(a.a)({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M448 312.43c.77-1.11 1.51-2.26 2.27-3.34A174.55 174.55 0 00480 211.85C480.32 112.55 396.54 32 292.94 32c-90.36 0-165.74 61.49-183.4 143.12a172.81 172.81 0 00-4 36.83c0 99.4 80.56 182.11 184.16 182.11 16.47 0 38.66-4.95 50.83-8.29s24.23-7.75 27.35-8.94 8-2.41 11.89-1.29l77.42 22.38a4 4 0 005-4.86l-17.72-67.49c-1.23-5-1.39-5.94 3.53-13.14z"}},{tag:"path",attr:{d:"M312.54 415.38a165.32 165.32 0 01-23.26 2.05c-42.43 0-82.5-11.2-115-32.2a184.09 184.09 0 01-53.09-49.32c-26.08-34.57-40.3-78.51-40.3-124.49 0-3.13.11-6.14.22-9.16a4.34 4.34 0 00-7.54-3.12 158.76 158.76 0 00-14.86 195.24c2.47 3.77 3.87 6.68 3.44 8.62l-14.09 72.26a4 4 0 005.22 4.53l68-24.24a16.85 16.85 0 0112.92.22c20.35 8 42.86 12.92 65.37 12.92a169.45 169.45 0 00116.63-46 4.29 4.29 0 00-3.66-7.31z"}}]})(e)}function r(e){return Object(a.a)({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M428 224H288a48 48 0 01-48-48V36a4 4 0 00-4-4h-92a64 64 0 00-64 64v320a64 64 0 0064 64h224a64 64 0 0064-64V228a4 4 0 00-4-4zm-92 160H176a16 16 0 010-32h160a16 16 0 010 32zm0-80H176a16 16 0 010-32h160a16 16 0 010 32z"}},{tag:"path",attr:{d:"M419.22 188.59L275.41 44.78a2 2 0 00-3.41 1.41V176a16 16 0 0016 16h129.81a2 2 0 001.41-3.41z"}}]})(e)}function o(e){return Object(a.a)({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M408 16H104a24 24 0 00-24 24v432a24 24 0 0024 24h304a24 24 0 0024-24V40a24 24 0 00-24-24zm-61.1 296.77a43 43 0 11-40.71-40.71 43 43 0 0140.71 40.71zM192 64h128v32H192zm192 384H224v-24.6c0-32.72 53.27-49.21 80-49.21s80 16.49 80 49.21z"}}]})(e)}},207:function(e,t,i){"use strict";var a=i(32),n=i(17),r=i(6),o=i(0),s=i(97),l=i(504),c=i(7),u=i(516),h=i(517),d=i(514),f=i(386);function p(e){return"undefined"!==typeof e.normalize?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e}function m(e,t){for(var i=0;i<e.length;i+=1)if(t(e[i]))return i;return-1}var g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ignoreAccents,i=void 0===t||t,a=e.ignoreCase,n=void 0===a||a,r=e.limit,o=e.matchFrom,s=void 0===o?"any":o,l=e.stringify,c=e.trim,u=void 0!==c&&c;return function(e,t){var a=t.inputValue,o=t.getOptionLabel,c=u?a.trim():a;n&&(c=c.toLowerCase()),i&&(c=p(c));var h=e.filter((function(e){var t=(l||o)(e);return n&&(t=t.toLowerCase()),i&&(t=p(t)),"start"===s?0===t.indexOf(c):t.indexOf(c)>-1}));return"number"===typeof r?h.slice(0,r):h}}();function v(e){var t,i=e.autoComplete,a=void 0!==i&&i,n=e.autoHighlight,s=void 0!==n&&n,l=e.autoSelect,p=void 0!==l&&l,v=e.blurOnSelect,y=void 0!==v&&v,x=e.clearOnBlur,b=void 0===x?!e.freeSolo:x,_=e.clearOnEscape,w=void 0!==_&&_,k=e.componentName,S=void 0===k?"useAutocomplete":k,C=e.defaultValue,A=void 0===C?e.multiple?[]:null:C,O=e.disableClearable,T=void 0!==O&&O,M=e.disableCloseOnSelect,E=void 0!==M&&M,I=e.disabled,P=e.disabledItemsFocusable,D=void 0!==P&&P,z=e.disableListWrap,L=void 0!==z&&z,j=e.filterOptions,R=void 0===j?g:j,F=e.filterSelectedOptions,B=void 0!==F&&F,N=e.freeSolo,V=void 0!==N&&N,Y=e.getOptionDisabled,W=e.getOptionLabel,H=void 0===W?function(e){var t;return null!=(t=e.label)?t:e}:W,U=e.groupBy,X=e.handleHomeEndKeys,G=void 0===X?!e.freeSolo:X,q=e.id,Z=e.includeInputInList,K=void 0!==Z&&Z,J=e.inputValue,Q=e.isOptionEqualToValue,$=void 0===Q?function(e,t){return e===t}:Q,ee=e.multiple,te=void 0!==ee&&ee,ie=e.onChange,ae=e.onClose,ne=e.onHighlightChange,re=e.onInputChange,oe=e.onOpen,se=e.open,le=e.openOnFocus,ce=void 0!==le&&le,ue=e.options,he=e.readOnly,de=void 0!==he&&he,fe=e.selectOnFocus,pe=void 0===fe?!e.freeSolo:fe,me=e.value,ge=Object(u.a)(q);t=function(e){var t=H(e);return"string"!==typeof t?String(t):t};var ve=o.useRef(!1),ye=o.useRef(!0),xe=o.useRef(null),be=o.useRef(null),_e=o.useState(null),we=Object(c.a)(_e,2),ke=we[0],Se=we[1],Ce=o.useState(-1),Ae=Object(c.a)(Ce,2),Oe=Ae[0],Te=Ae[1],Me=s?0:-1,Ee=o.useRef(Me),Ie=Object(h.a)({controlled:me,default:A,name:S}),Pe=Object(c.a)(Ie,2),De=Pe[0],ze=Pe[1],Le=Object(h.a)({controlled:J,default:"",name:S,state:"inputValue"}),je=Object(c.a)(Le,2),Re=je[0],Fe=je[1],Be=o.useState(!1),Ne=Object(c.a)(Be,2),Ve=Ne[0],Ye=Ne[1],We=o.useCallback((function(e,i){if((te?De.length<i.length:null!==i)||b){var a;if(te)a="";else if(null==i)a="";else{var n=t(i);a="string"===typeof n?n:""}Re!==a&&(Fe(a),re&&re(e,a,"reset"))}}),[t,Re,te,re,Fe,b,De]),He=o.useRef();o.useEffect((function(){var e=De!==He.current;He.current=De,Ve&&!e||V&&!e||We(null,De)}),[De,We,Ve,He,V]);var Ue=Object(h.a)({controlled:se,default:!1,name:S,state:"open"}),Xe=Object(c.a)(Ue,2),Ge=Xe[0],qe=Xe[1],Ze=o.useState(!0),Ke=Object(c.a)(Ze,2),Je=Ke[0],Qe=Ke[1],$e=!te&&null!=De&&Re===t(De),et=Ge&&!de,tt=et?R(ue.filter((function(e){return!B||!(te?De:[De]).some((function(t){return null!==t&&$(e,t)}))})),{inputValue:$e&&Je?"":Re,getOptionLabel:t}):[],it=Ge&&tt.length>0&&!de,at=Object(d.a)((function(e){-1===e?xe.current.focus():ke.querySelector('[data-tag-index="'.concat(e,'"]')).focus()}));o.useEffect((function(){te&&Oe>De.length-1&&(Te(-1),at(-1))}),[De,te,Oe,at]);var nt=Object(d.a)((function(e){var t=e.event,i=e.index,a=e.reason,n=void 0===a?"auto":a;if(Ee.current=i,-1===i?xe.current.removeAttribute("aria-activedescendant"):xe.current.setAttribute("aria-activedescendant","".concat(ge,"-option-").concat(i)),ne&&ne(t,-1===i?null:tt[i],n),be.current){var r=be.current.querySelector('[role="option"].Mui-focused');r&&(r.classList.remove("Mui-focused"),r.classList.remove("Mui-focusVisible"));var o=be.current.parentElement.querySelector('[role="listbox"]');if(o)if(-1!==i){var s=be.current.querySelector('[data-option-index="'.concat(i,'"]'));if(s&&(s.classList.add("Mui-focused"),"keyboard"===n&&s.classList.add("Mui-focusVisible"),o.scrollHeight>o.clientHeight&&"mouse"!==n)){var l=s,c=o.clientHeight+o.scrollTop,u=l.offsetTop+l.offsetHeight;u>c?o.scrollTop=u-o.clientHeight:l.offsetTop-l.offsetHeight*(U?1.3:0)<o.scrollTop&&(o.scrollTop=l.offsetTop-l.offsetHeight*(U?1.3:0))}}else o.scrollTop=0}})),rt=Object(d.a)((function(e){var i=e.event,n=e.diff,r=e.direction,o=void 0===r?"next":r,s=e.reason,l=void 0===s?"auto":s;if(et){var c=function(e,t){if(!be.current||-1===e)return-1;for(var i=e;;){if("next"===t&&i===tt.length||"previous"===t&&-1===i)return-1;var a=be.current.querySelector('[data-option-index="'.concat(i,'"]')),n=!D&&(!a||a.disabled||"true"===a.getAttribute("aria-disabled"));if(!(a&&!a.hasAttribute("tabindex")||n))return i;i+="next"===t?1:-1}}(function(){var e=tt.length-1;if("reset"===n)return Me;if("start"===n)return 0;if("end"===n)return e;var t=Ee.current+n;return t<0?-1===t&&K?-1:L&&-1!==Ee.current||Math.abs(n)>1?0:e:t>e?t===e+1&&K?-1:L||Math.abs(n)>1?e:0:t}(),o);if(nt({index:c,reason:l,event:i}),a&&"reset"!==n)if(-1===c)xe.current.value=Re;else{var u=t(tt[c]);xe.current.value=u,0===u.toLowerCase().indexOf(Re.toLowerCase())&&Re.length>0&&xe.current.setSelectionRange(Re.length,u.length)}}})),ot=o.useCallback((function(){if(et){var e=te?De[0]:De;if(0!==tt.length&&null!=e){if(be.current)if(null==e)Ee.current>=tt.length-1?nt({index:tt.length-1}):nt({index:Ee.current});else{var t=tt[Ee.current];if(te&&t&&-1!==m(De,(function(e){return $(t,e)})))return;var i=m(tt,(function(t){return $(t,e)}));-1===i?rt({diff:"reset"}):nt({index:i})}}else rt({diff:"reset"})}}),[tt.length,!te&&De,B,rt,nt,et,Re,te]),st=Object(d.a)((function(e){Object(f.a)(be,e),e&&ot()}));o.useEffect((function(){ot()}),[ot]);var lt=function(e){Ge||(qe(!0),Qe(!0),oe&&oe(e))},ct=function(e,t){Ge&&(qe(!1),ae&&ae(e,t))},ut=function(e,t,i,a){if(te){if(De.length===t.length&&De.every((function(e,i){return e===t[i]})))return}else if(De===t)return;ie&&ie(e,t,i,a),ze(t)},ht=o.useRef(!1),dt=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"selectOption",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"options",n=i,r=t;if(te){var o=m(r=Array.isArray(De)?De.slice():[],(function(e){return $(t,e)}));-1===o?r.push(t):"freeSolo"!==a&&(r.splice(o,1),n="removeOption")}We(e,r),ut(e,r,n,{option:t}),E||e&&(e.ctrlKey||e.metaKey)||ct(e,n),(!0===y||"touch"===y&&ht.current||"mouse"===y&&!ht.current)&&xe.current.blur()};var ft=function(e,t){if(te){""===Re&&ct(e,"toggleInput");var i=Oe;-1===Oe?""===Re&&"previous"===t&&(i=De.length-1):((i+="next"===t?1:-1)<0&&(i=0),i===De.length&&(i=-1)),i=function(e,t){if(-1===e)return-1;for(var i=e;;){if("next"===t&&i===De.length||"previous"===t&&-1===i)return-1;var a=ke.querySelector('[data-tag-index="'.concat(i,'"]'));if(a&&a.hasAttribute("tabindex")&&!a.disabled&&"true"!==a.getAttribute("aria-disabled"))return i;i+="next"===t?1:-1}}(i,t),Te(i),at(i)}},pt=function(e){ve.current=!0,Fe(""),re&&re(e,"","clear"),ut(e,te?[]:null,"clear")},mt=function(e){return function(t){if(e.onKeyDown&&e.onKeyDown(t),!t.defaultMuiPrevented&&(-1!==Oe&&-1===["ArrowLeft","ArrowRight"].indexOf(t.key)&&(Te(-1),at(-1)),229!==t.which))switch(t.key){case"Home":et&&G&&(t.preventDefault(),rt({diff:"start",direction:"next",reason:"keyboard",event:t}));break;case"End":et&&G&&(t.preventDefault(),rt({diff:"end",direction:"previous",reason:"keyboard",event:t}));break;case"PageUp":t.preventDefault(),rt({diff:-5,direction:"previous",reason:"keyboard",event:t}),lt(t);break;case"PageDown":t.preventDefault(),rt({diff:5,direction:"next",reason:"keyboard",event:t}),lt(t);break;case"ArrowDown":t.preventDefault(),rt({diff:1,direction:"next",reason:"keyboard",event:t}),lt(t);break;case"ArrowUp":t.preventDefault(),rt({diff:-1,direction:"previous",reason:"keyboard",event:t}),lt(t);break;case"ArrowLeft":ft(t,"previous");break;case"ArrowRight":ft(t,"next");break;case"Enter":if(-1!==Ee.current&&et){var i=tt[Ee.current],n=!!Y&&Y(i);if(t.preventDefault(),n)return;dt(t,i,"selectOption"),a&&xe.current.setSelectionRange(xe.current.value.length,xe.current.value.length)}else V&&""!==Re&&!1===$e&&(te&&t.preventDefault(),dt(t,Re,"createOption","freeSolo"));break;case"Escape":et?(t.preventDefault(),t.stopPropagation(),ct(t,"escape")):w&&(""!==Re||te&&De.length>0)&&(t.preventDefault(),t.stopPropagation(),pt(t));break;case"Backspace":if(te&&!de&&""===Re&&De.length>0){var r=-1===Oe?De.length-1:Oe,o=De.slice();o.splice(r,1),ut(t,o,"removeOption",{option:De[r]})}}}},gt=function(e){Ye(!0),ce&&!ve.current&&lt(e)},vt=function(e){null!==be.current&&be.current.parentElement.contains(document.activeElement)?xe.current.focus():(Ye(!1),ye.current=!0,ve.current=!1,p&&-1!==Ee.current&&et?dt(e,tt[Ee.current],"blur"):p&&V&&""!==Re?dt(e,Re,"blur","freeSolo"):b&&We(e,De),ct(e,"blur"))},yt=function(e){var t=e.target.value;Re!==t&&(Fe(t),Qe(!1),re&&re(e,t,"input")),""===t?T||te||ut(e,null,"clear"):lt(e)},xt=function(e){nt({event:e,index:Number(e.currentTarget.getAttribute("data-option-index")),reason:"mouse"})},bt=function(){ht.current=!0},_t=function(e){var t=Number(e.currentTarget.getAttribute("data-option-index"));dt(e,tt[t],"selectOption"),ht.current=!1},wt=function(e){return function(t){var i=De.slice();i.splice(e,1),ut(t,i,"removeOption",{option:De[e]})}},kt=function(e){Ge?ct(e,"toggleInput"):lt(e)},St=function(e){e.target.getAttribute("id")!==ge&&e.preventDefault()},Ct=function(){xe.current.focus(),pe&&ye.current&&xe.current.selectionEnd-xe.current.selectionStart===0&&xe.current.select(),ye.current=!1},At=function(e){""!==Re&&Ge||kt(e)},Ot=V&&Re.length>0;Ot=Ot||(te?De.length>0:null!==De);var Tt=tt;if(U){new Map;Tt=tt.reduce((function(e,t,i){var a=U(t);return e.length>0&&e[e.length-1].group===a?e[e.length-1].options.push(t):e.push({key:i,index:i,group:a,options:[t]}),e}),[])}return I&&Ve&&vt(),{getRootProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r.a)({"aria-owns":it?"".concat(ge,"-listbox"):null},e,{onKeyDown:mt(e),onMouseDown:St,onClick:Ct})},getInputLabelProps:function(){return{id:"".concat(ge,"-label"),htmlFor:ge}},getInputProps:function(){return{id:ge,value:Re,onBlur:vt,onFocus:gt,onChange:yt,onMouseDown:At,"aria-activedescendant":et?"":null,"aria-autocomplete":a?"both":"list","aria-controls":it?"".concat(ge,"-listbox"):void 0,"aria-expanded":it,autoComplete:"off",ref:xe,autoCapitalize:"none",spellCheck:"false",role:"combobox"}},getClearProps:function(){return{tabIndex:-1,onClick:pt}},getPopupIndicatorProps:function(){return{tabIndex:-1,onClick:kt}},getTagProps:function(e){var t=e.index;return Object(r.a)({key:t,"data-tag-index":t,tabIndex:-1},!de&&{onDelete:wt(t)})},getListboxProps:function(){return{role:"listbox",id:"".concat(ge,"-listbox"),"aria-labelledby":"".concat(ge,"-label"),ref:st,onMouseDown:function(e){e.preventDefault()}}},getOptionProps:function(e){var i=e.index,a=e.option,n=(te?De:[De]).some((function(e){return null!=e&&$(a,e)})),r=!!Y&&Y(a);return{key:t(a),tabIndex:-1,role:"option",id:"".concat(ge,"-option-").concat(i),onMouseOver:xt,onClick:_t,onTouchStart:bt,"data-option-index":i,"aria-disabled":r,"aria-selected":n}},id:ge,inputValue:Re,value:De,dirty:Ot,popupOpen:et,focused:Ve||-1!==Oe,anchorEl:ke,setAnchorEl:Se,focusedTag:Oe,groupedOptions:Tt}}var y=i(510),x=i(198),b=i(96),_=i(98),w=i(99),k=i(505),S=i(507);function C(e){return Object(k.a)("MuiListSubheader",e)}Object(S.a)("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);var A=i(31),O=["className","color","component","disableGutters","disableSticky","inset"],T=Object(b.a)("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:function(e,t){var i=e.ownerState;return[t.root,"default"!==i.color&&t["color".concat(Object(w.a)(i.color))],!i.disableGutters&&t.gutters,i.inset&&t.inset,!i.disableSticky&&t.sticky]}})((function(e){var t=e.theme,i=e.ownerState;return Object(r.a)({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(t.vars||t).palette.text.secondary,fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(14)},"primary"===i.color&&{color:(t.vars||t).palette.primary.main},"inherit"===i.color&&{color:"inherit"},!i.disableGutters&&{paddingLeft:16,paddingRight:16},i.inset&&{paddingLeft:72},!i.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:(t.vars||t).palette.background.paper})})),M=o.forwardRef((function(e,t){var i=Object(_.a)({props:e,name:"MuiListSubheader"}),a=i.className,o=i.color,c=void 0===o?"default":o,u=i.component,h=void 0===u?"li":u,d=i.disableGutters,f=void 0!==d&&d,p=i.disableSticky,m=void 0!==p&&p,g=i.inset,v=void 0!==g&&g,y=Object(n.a)(i,O),x=Object(r.a)({},i,{color:c,component:h,disableGutters:f,disableSticky:m,inset:v}),b=function(e){var t=e.classes,i=e.color,a=e.disableGutters,n=e.inset,r=e.disableSticky,o={root:["root","default"!==i&&"color".concat(Object(w.a)(i)),!a&&"gutters",n&&"inset",!r&&"sticky"]};return Object(l.a)(o,C,t)}(x);return Object(A.jsx)(T,Object(r.a)({as:h,className:Object(s.a)(b.root,a),ref:t,ownerState:x},y))})),E=i(550),I=i(549),P=i(109),D=Object(P.a)(Object(A.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel"),z=i(100),L=i(543);function j(e){return Object(k.a)("MuiChip",e)}var R=Object(S.a)("MuiChip",["root","sizeSmall","sizeMedium","colorPrimary","colorSecondary","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),F=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant"],B=Object(b.a)("div",{name:"MuiChip",slot:"Root",overridesResolver:function(e,t){var i=e.ownerState,n=i.color,r=i.clickable,o=i.onDelete,s=i.size,l=i.variant;return[Object(a.a)({},"& .".concat(R.avatar),t.avatar),Object(a.a)({},"& .".concat(R.avatar),t["avatar".concat(Object(w.a)(s))]),Object(a.a)({},"& .".concat(R.avatar),t["avatarColor".concat(Object(w.a)(n))]),Object(a.a)({},"& .".concat(R.icon),t.icon),Object(a.a)({},"& .".concat(R.icon),t["icon".concat(Object(w.a)(s))]),Object(a.a)({},"& .".concat(R.icon),t["iconColor".concat(Object(w.a)(n))]),Object(a.a)({},"& .".concat(R.deleteIcon),t.deleteIcon),Object(a.a)({},"& .".concat(R.deleteIcon),t["deleteIcon".concat(Object(w.a)(s))]),Object(a.a)({},"& .".concat(R.deleteIcon),t["deleteIconColor".concat(Object(w.a)(n))]),Object(a.a)({},"& .".concat(R.deleteIcon),t["deleteIcon".concat(Object(w.a)(l),"Color").concat(Object(w.a)(n))]),t.root,t["size".concat(Object(w.a)(s))],t["color".concat(Object(w.a)(n))],r&&t.clickable,r&&"default"!==n&&t["clickableColor".concat(Object(w.a)(n),")")],o&&t.deletable,o&&"default"!==n&&t["deletableColor".concat(Object(w.a)(n))],t[l],t["".concat(l).concat(Object(w.a)(n))]]}})((function(e){var t,i=e.theme,n=e.ownerState,o=Object(y.a)(i.palette.text.primary,.26),s="light"===i.palette.mode?i.palette.grey[700]:i.palette.grey[300];return Object(r.a)((t={maxWidth:"100%",fontFamily:i.typography.fontFamily,fontSize:i.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(i.vars||i).palette.text.primary,backgroundColor:(i.vars||i).palette.action.selected,borderRadius:16,whiteSpace:"nowrap",transition:i.transitions.create(["background-color","box-shadow"]),cursor:"default",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box"},Object(a.a)(t,"&.".concat(R.disabled),{opacity:(i.vars||i).palette.action.disabledOpacity,pointerEvents:"none"}),Object(a.a)(t,"& .".concat(R.avatar),{marginLeft:5,marginRight:-6,width:24,height:24,color:i.vars?i.vars.palette.Chip.defaultAvatarColor:s,fontSize:i.typography.pxToRem(12)}),Object(a.a)(t,"& .".concat(R.avatarColorPrimary),{color:(i.vars||i).palette.primary.contrastText,backgroundColor:(i.vars||i).palette.primary.dark}),Object(a.a)(t,"& .".concat(R.avatarColorSecondary),{color:(i.vars||i).palette.secondary.contrastText,backgroundColor:(i.vars||i).palette.secondary.dark}),Object(a.a)(t,"& .".concat(R.avatarSmall),{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:i.typography.pxToRem(10)}),Object(a.a)(t,"& .".concat(R.icon),Object(r.a)({color:i.vars?i.vars.palette.Chip.defaultIconColor:s,marginLeft:5,marginRight:-6},"small"===n.size&&{fontSize:18,marginLeft:4,marginRight:-4},"default"!==n.color&&{color:"inherit"})),Object(a.a)(t,"& .".concat(R.deleteIcon),Object(r.a)({WebkitTapHighlightColor:"transparent",color:i.vars?"rgba(".concat(i.vars.palette.text.primaryChannel," / 0.26)"):o,fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:i.vars?"rgba(".concat(i.vars.palette.text.primaryChannel," / 0.4)"):Object(y.a)(o,.4)}},"small"===n.size&&{fontSize:16,marginRight:4,marginLeft:-4},"default"!==n.color&&{color:i.vars?"rgba(".concat(i.vars.palette[n.color].contrastTextChannel," / 0.7)"):Object(y.a)(i.palette[n.color].contrastText,.7),"&:hover, &:active":{color:(i.vars||i).palette[n.color].contrastText}})),t),"small"===n.size&&{height:24},"default"!==n.color&&{backgroundColor:(i.vars||i).palette[n.color].main,color:(i.vars||i).palette[n.color].contrastText},n.onDelete&&Object(a.a)({},"&.".concat(R.focusVisible),{backgroundColor:i.vars?"rgba(".concat(i.vars.palette.action.selectedChannel," / calc(").concat(i.vars.palette.action.selectedOpacity+i.vars.palette.action.focusOpacity,"))"):Object(y.a)(i.palette.action.selected,i.palette.action.selectedOpacity+i.palette.action.focusOpacity)}),n.onDelete&&"default"!==n.color&&Object(a.a)({},"&.".concat(R.focusVisible),{backgroundColor:(i.vars||i).palette[n.color].dark}))}),(function(e){var t,i=e.theme,n=e.ownerState;return Object(r.a)({},n.clickable&&(t={userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:i.vars?"rgba(".concat(i.vars.palette.action.selectedChannel," / calc(").concat(i.vars.palette.action.selectedOpacity+i.vars.palette.action.hoverOpacity,"))"):Object(y.a)(i.palette.action.selected,i.palette.action.selectedOpacity+i.palette.action.hoverOpacity)}},Object(a.a)(t,"&.".concat(R.focusVisible),{backgroundColor:i.vars?"rgba(".concat(i.vars.palette.action.selectedChannel," / calc(").concat(i.vars.palette.action.selectedOpacity+i.vars.palette.action.focusOpacity,"))"):Object(y.a)(i.palette.action.selected,i.palette.action.selectedOpacity+i.palette.action.focusOpacity)}),Object(a.a)(t,"&:active",{boxShadow:(i.vars||i).shadows[1]}),t),n.clickable&&"default"!==n.color&&Object(a.a)({},"&:hover, &.".concat(R.focusVisible),{backgroundColor:(i.vars||i).palette[n.color].dark}))}),(function(e){var t,i,n=e.theme,o=e.ownerState;return Object(r.a)({},"outlined"===o.variant&&(t={backgroundColor:"transparent",border:n.vars?"1px solid ".concat(n.vars.palette.Chip.defaultBorder):"1px solid ".concat("light"===n.palette.mode?n.palette.grey[400]:n.palette.grey[700])},Object(a.a)(t,"&.".concat(R.clickable,":hover"),{backgroundColor:(n.vars||n).palette.action.hover}),Object(a.a)(t,"&.".concat(R.focusVisible),{backgroundColor:(n.vars||n).palette.action.focus}),Object(a.a)(t,"& .".concat(R.avatar),{marginLeft:4}),Object(a.a)(t,"& .".concat(R.avatarSmall),{marginLeft:2}),Object(a.a)(t,"& .".concat(R.icon),{marginLeft:4}),Object(a.a)(t,"& .".concat(R.iconSmall),{marginLeft:2}),Object(a.a)(t,"& .".concat(R.deleteIcon),{marginRight:5}),Object(a.a)(t,"& .".concat(R.deleteIconSmall),{marginRight:3}),t),"outlined"===o.variant&&"default"!==o.color&&(i={color:(n.vars||n).palette[o.color].main,border:"1px solid ".concat(n.vars?"rgba(".concat(n.vars.palette[o.color].mainChannel," / 0.7)"):Object(y.a)(n.palette[o.color].main,.7))},Object(a.a)(i,"&.".concat(R.clickable,":hover"),{backgroundColor:n.vars?"rgba(".concat(n.vars.palette[o.color].mainChannel," / ").concat(n.vars.palette.action.hoverOpacity,")"):Object(y.a)(n.palette[o.color].main,n.palette.action.hoverOpacity)}),Object(a.a)(i,"&.".concat(R.focusVisible),{backgroundColor:n.vars?"rgba(".concat(n.vars.palette[o.color].mainChannel," / ").concat(n.vars.palette.action.focusOpacity,")"):Object(y.a)(n.palette[o.color].main,n.palette.action.focusOpacity)}),Object(a.a)(i,"& .".concat(R.deleteIcon),{color:n.vars?"rgba(".concat(n.vars.palette[o.color].mainChannel," / 0.7)"):Object(y.a)(n.palette[o.color].main,.7),"&:hover, &:active":{color:(n.vars||n).palette[o.color].main}}),i))})),N=Object(b.a)("span",{name:"MuiChip",slot:"Label",overridesResolver:function(e,t){var i=e.ownerState.size;return[t.label,t["label".concat(Object(w.a)(i))]]}})((function(e){var t=e.ownerState;return Object(r.a)({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},"small"===t.size&&{paddingLeft:8,paddingRight:8})}));function V(e){return"Backspace"===e.key||"Delete"===e.key}var Y=o.forwardRef((function(e,t){var i=Object(_.a)({props:e,name:"MuiChip"}),a=i.avatar,c=i.className,u=i.clickable,h=i.color,d=void 0===h?"default":h,f=i.component,p=i.deleteIcon,m=i.disabled,g=void 0!==m&&m,v=i.icon,y=i.label,x=i.onClick,b=i.onDelete,k=i.onKeyDown,S=i.onKeyUp,C=i.size,O=void 0===C?"medium":C,T=i.variant,M=void 0===T?"filled":T,E=Object(n.a)(i,F),I=o.useRef(null),P=Object(z.a)(I,t),R=function(e){e.stopPropagation(),b&&b(e)},Y=!(!1===u||!x)||u,W=Y||b?L.a:f||"div",H=Object(r.a)({},i,{component:W,disabled:g,size:O,color:d,onDelete:!!b,clickable:Y,variant:M}),U=function(e){var t=e.classes,i=e.disabled,a=e.size,n=e.color,r=e.onDelete,o=e.clickable,s=e.variant,c={root:["root",s,i&&"disabled","size".concat(Object(w.a)(a)),"color".concat(Object(w.a)(n)),o&&"clickable",o&&"clickableColor".concat(Object(w.a)(n)),r&&"deletable",r&&"deletableColor".concat(Object(w.a)(n)),"".concat(s).concat(Object(w.a)(n))],label:["label","label".concat(Object(w.a)(a))],avatar:["avatar","avatar".concat(Object(w.a)(a)),"avatarColor".concat(Object(w.a)(n))],icon:["icon","icon".concat(Object(w.a)(a)),"iconColor".concat(Object(w.a)(n))],deleteIcon:["deleteIcon","deleteIcon".concat(Object(w.a)(a)),"deleteIconColor".concat(Object(w.a)(n)),"deleteIcon".concat(Object(w.a)(s),"Color").concat(Object(w.a)(n))]};return Object(l.a)(c,j,t)}(H),X=W===L.a?Object(r.a)({component:f||"div",focusVisibleClassName:U.focusVisible},b&&{disableRipple:!0}):{},G=null;b&&(G=p&&o.isValidElement(p)?o.cloneElement(p,{className:Object(s.a)(p.props.className,U.deleteIcon),onClick:R}):Object(A.jsx)(D,{className:Object(s.a)(U.deleteIcon),onClick:R}));var q=null;a&&o.isValidElement(a)&&(q=o.cloneElement(a,{className:Object(s.a)(U.avatar,a.props.className)}));var Z=null;return v&&o.isValidElement(v)&&(Z=o.cloneElement(v,{className:Object(s.a)(U.icon,v.props.className)})),Object(A.jsxs)(B,Object(r.a)({as:W,className:Object(s.a)(U.root,c),disabled:!(!Y||!g)||void 0,onClick:x,onKeyDown:function(e){e.currentTarget===e.target&&V(e)&&e.preventDefault(),k&&k(e)},onKeyUp:function(e){e.currentTarget===e.target&&(b&&V(e)?b(e):"Escape"===e.key&&I.current&&I.current.blur()),S&&S(e)},ref:P,ownerState:H},X,E,{children:[q||Z,Object(A.jsx)(N,{className:Object(s.a)(U.label),ownerState:H,children:y}),G]}))})),W=i(117),H=i(181),U=i(120),X=i(121),G=i(143),q=i(122);function Z(e){return Object(k.a)("MuiAutocomplete",e)}var K,J,Q=Object(S.a)("MuiAutocomplete",["root","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]),$=["autoComplete","autoHighlight","autoSelect","blurOnSelect","ChipProps","className","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","componentsProps","defaultValue","disableClearable","disableCloseOnSelect","disabled","disabledItemsFocusable","disableListWrap","disablePortal","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","fullWidth","getLimitTagsText","getOptionDisabled","getOptionLabel","isOptionEqualToValue","groupBy","handleHomeEndKeys","id","includeInputInList","inputValue","limitTags","ListboxComponent","ListboxProps","loading","loadingText","multiple","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","PaperComponent","PopperComponent","popupIcon","readOnly","renderGroup","renderInput","renderOption","renderTags","selectOnFocus","size","value"],ee=Object(b.a)("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:function(e,t){var i=e.ownerState,n=i.fullWidth,r=i.hasClearIcon,o=i.hasPopupIcon,s=i.inputFocused,l=i.size;return[Object(a.a)({},"& .".concat(Q.tag),t.tag),Object(a.a)({},"& .".concat(Q.tag),t["tagSize".concat(Object(w.a)(l))]),Object(a.a)({},"& .".concat(Q.inputRoot),t.inputRoot),Object(a.a)({},"& .".concat(Q.input),t.input),Object(a.a)({},"& .".concat(Q.input),s&&t.inputFocused),t.root,n&&t.fullWidth,o&&t.hasPopupIcon,r&&t.hasClearIcon]}})((function(e){var t,i,n,o,s,l=e.ownerState;return Object(r.a)((t={},Object(a.a)(t,"&.".concat(Q.focused," .").concat(Q.clearIndicator),{visibility:"visible"}),Object(a.a)(t,"@media (pointer: fine)",Object(a.a)({},"&:hover .".concat(Q.clearIndicator),{visibility:"visible"})),t),l.fullWidth&&{width:"100%"},(s={},Object(a.a)(s,"& .".concat(Q.tag),Object(r.a)({margin:3,maxWidth:"calc(100% - 6px)"},"small"===l.size&&{margin:2,maxWidth:"calc(100% - 4px)"})),Object(a.a)(s,"& .".concat(Q.inputRoot),(i={flexWrap:"wrap"},Object(a.a)(i,".".concat(Q.hasPopupIcon,"&, .").concat(Q.hasClearIcon,"&"),{paddingRight:30}),Object(a.a)(i,".".concat(Q.hasPopupIcon,".").concat(Q.hasClearIcon,"&"),{paddingRight:56}),Object(a.a)(i,"& .".concat(Q.input),{width:0,minWidth:30}),i)),Object(a.a)(s,"& .".concat(W.a.root),{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}}),Object(a.a)(s,"& .".concat(W.a.root,".").concat(H.a.sizeSmall),Object(a.a)({},"& .".concat(W.a.input),{padding:"2px 4px 3px 0"})),Object(a.a)(s,"& .".concat(U.a.root),(n={padding:9},Object(a.a)(n,".".concat(Q.hasPopupIcon,"&, .").concat(Q.hasClearIcon,"&"),{paddingRight:39}),Object(a.a)(n,".".concat(Q.hasPopupIcon,".").concat(Q.hasClearIcon,"&"),{paddingRight:65}),Object(a.a)(n,"& .".concat(Q.input),{padding:"7.5px 4px 7.5px 6px"}),Object(a.a)(n,"& .".concat(Q.endAdornment),{right:9}),n)),Object(a.a)(s,"& .".concat(U.a.root,".").concat(H.a.sizeSmall),Object(a.a)({padding:6},"& .".concat(Q.input),{padding:"2.5px 4px 2.5px 6px"})),Object(a.a)(s,"& .".concat(X.a.root),(o={paddingTop:19,paddingLeft:8},Object(a.a)(o,".".concat(Q.hasPopupIcon,"&, .").concat(Q.hasClearIcon,"&"),{paddingRight:39}),Object(a.a)(o,".".concat(Q.hasPopupIcon,".").concat(Q.hasClearIcon,"&"),{paddingRight:65}),Object(a.a)(o,"& .".concat(X.a.input),{padding:"7px 4px"}),Object(a.a)(o,"& .".concat(Q.endAdornment),{right:9}),o)),Object(a.a)(s,"& .".concat(X.a.root,".").concat(H.a.sizeSmall),Object(a.a)({paddingBottom:1},"& .".concat(X.a.input),{padding:"2.5px 4px"})),Object(a.a)(s,"& .".concat(H.a.hiddenLabel),{paddingTop:8}),Object(a.a)(s,"& .".concat(Q.input),Object(r.a)({flexGrow:1,textOverflow:"ellipsis",opacity:0},l.inputFocused&&{opacity:1})),s))})),te=Object(b.a)("div",{name:"MuiAutocomplete",slot:"EndAdornment",overridesResolver:function(e,t){return t.endAdornment}})({position:"absolute",right:0,top:"calc(50% - 14px)"}),ie=Object(b.a)(I.a,{name:"MuiAutocomplete",slot:"ClearIndicator",overridesResolver:function(e,t){return t.clearIndicator}})({marginRight:-2,padding:4,visibility:"hidden"}),ae=Object(b.a)(I.a,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:function(e,t){var i=e.ownerState;return Object(r.a)({},t.popupIndicator,i.popupOpen&&t.popupIndicatorOpen)}})((function(e){var t=e.ownerState;return Object(r.a)({padding:2,marginRight:-2},t.popupOpen&&{transform:"rotate(180deg)"})})),ne=Object(b.a)(x.a,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:function(e,t){var i=e.ownerState;return[Object(a.a)({},"& .".concat(Q.option),t.option),t.popper,i.disablePortal&&t.popperDisablePortal]}})((function(e){var t=e.theme,i=e.ownerState;return Object(r.a)({zIndex:(t.vars||t).zIndex.modal},i.disablePortal&&{position:"absolute"})})),re=Object(b.a)(E.a,{name:"MuiAutocomplete",slot:"Paper",overridesResolver:function(e,t){return t.paper}})((function(e){var t=e.theme;return Object(r.a)({},t.typography.body1,{overflow:"auto"})})),oe=Object(b.a)("div",{name:"MuiAutocomplete",slot:"Loading",overridesResolver:function(e,t){return t.loading}})((function(e){var t=e.theme;return{color:(t.vars||t).palette.text.secondary,padding:"14px 16px"}})),se=Object(b.a)("div",{name:"MuiAutocomplete",slot:"NoOptions",overridesResolver:function(e,t){return t.noOptions}})((function(e){var t=e.theme;return{color:(t.vars||t).palette.text.secondary,padding:"14px 16px"}})),le=Object(b.a)("div",{name:"MuiAutocomplete",slot:"Listbox",overridesResolver:function(e,t){return t.listbox}})((function(e){var t,i,n=e.theme;return Object(a.a)({listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto"},"& .".concat(Q.option),(i={minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16},Object(a.a)(i,n.breakpoints.up("sm"),{minHeight:"auto"}),Object(a.a)(i,"&.".concat(Q.focused),{backgroundColor:(n.vars||n).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}),Object(a.a)(i,'&[aria-disabled="true"]',{opacity:(n.vars||n).palette.action.disabledOpacity,pointerEvents:"none"}),Object(a.a)(i,"&.".concat(Q.focusVisible),{backgroundColor:(n.vars||n).palette.action.focus}),Object(a.a)(i,'&[aria-selected="true"]',(t={backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / ").concat(n.vars.palette.action.selectedOpacity,")"):Object(y.a)(n.palette.primary.main,n.palette.action.selectedOpacity)},Object(a.a)(t,"&.".concat(Q.focused),{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / calc(").concat(n.vars.palette.action.selectedOpacity," + ").concat(n.vars.palette.action.hoverOpacity,"))"):Object(y.a)(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(n.vars||n).palette.action.selected}}),Object(a.a)(t,"&.".concat(Q.focusVisible),{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / calc(").concat(n.vars.palette.action.selectedOpacity," + ").concat(n.vars.palette.action.focusOpacity,"))"):Object(y.a)(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)}),t)),i))})),ce=Object(b.a)(M,{name:"MuiAutocomplete",slot:"GroupLabel",overridesResolver:function(e,t){return t.groupLabel}})((function(e){var t=e.theme;return{backgroundColor:(t.vars||t).palette.background.paper,top:-8}})),ue=Object(b.a)("ul",{name:"MuiAutocomplete",slot:"GroupUl",overridesResolver:function(e,t){return t.groupUl}})(Object(a.a)({padding:0},"& .".concat(Q.option),{paddingLeft:24})),he=o.forwardRef((function(e,t){var i,a,c,u,h,d=Object(_.a)({props:e,name:"MuiAutocomplete"}),f=(d.autoComplete,d.autoHighlight,d.autoSelect,d.blurOnSelect,d.ChipProps),p=d.className,m=d.clearIcon,g=void 0===m?K||(K=Object(A.jsx)(G.a,{fontSize:"small"})):m,y=d.clearOnBlur,b=(void 0===y&&d.freeSolo,d.clearOnEscape,d.clearText),k=void 0===b?"Clear":b,S=d.closeText,C=void 0===S?"Close":S,O=d.componentsProps,T=void 0===O?{}:O,M=d.defaultValue,I=(void 0===M&&d.multiple,d.disableClearable),P=void 0!==I&&I,D=(d.disableCloseOnSelect,d.disabled),z=void 0!==D&&D,L=(d.disabledItemsFocusable,d.disableListWrap,d.disablePortal),j=void 0!==L&&L,R=(d.filterSelectedOptions,d.forcePopupIcon),F=void 0===R?"auto":R,B=d.freeSolo,N=void 0!==B&&B,V=d.fullWidth,W=void 0!==V&&V,H=d.getLimitTagsText,U=void 0===H?function(e){return"+".concat(e)}:H,X=d.getOptionLabel,Q=void 0===X?function(e){var t;return null!=(t=e.label)?t:e}:X,he=d.groupBy,de=d.handleHomeEndKeys,fe=(void 0===de&&d.freeSolo,d.includeInputInList,d.limitTags),pe=void 0===fe?-1:fe,me=d.ListboxComponent,ge=void 0===me?"ul":me,ve=d.ListboxProps,ye=d.loading,xe=void 0!==ye&&ye,be=d.loadingText,_e=void 0===be?"Loading\u2026":be,we=d.multiple,ke=void 0!==we&&we,Se=d.noOptionsText,Ce=void 0===Se?"No options":Se,Ae=(d.openOnFocus,d.openText),Oe=void 0===Ae?"Open":Ae,Te=d.PaperComponent,Me=void 0===Te?E.a:Te,Ee=d.PopperComponent,Ie=void 0===Ee?x.a:Ee,Pe=d.popupIcon,De=void 0===Pe?J||(J=Object(A.jsx)(q.a,{})):Pe,ze=d.readOnly,Le=void 0!==ze&&ze,je=d.renderGroup,Re=d.renderInput,Fe=d.renderOption,Be=d.renderTags,Ne=d.selectOnFocus,Ve=(void 0===Ne&&d.freeSolo,d.size),Ye=void 0===Ve?"medium":Ve,We=Object(n.a)(d,$),He=v(Object(r.a)({},d,{componentName:"Autocomplete"})),Ue=He.getRootProps,Xe=He.getInputProps,Ge=He.getInputLabelProps,qe=He.getPopupIndicatorProps,Ze=He.getClearProps,Ke=He.getTagProps,Je=He.getListboxProps,Qe=He.getOptionProps,$e=He.value,et=He.dirty,tt=He.id,it=He.popupOpen,at=He.focused,nt=He.focusedTag,rt=He.anchorEl,ot=He.setAnchorEl,st=He.inputValue,lt=He.groupedOptions,ct=!P&&!z&&et&&!Le,ut=(!N||!0===F)&&!1!==F,ht=Object(r.a)({},d,{disablePortal:j,focused:at,fullWidth:W,hasClearIcon:ct,hasPopupIcon:ut,inputFocused:-1===nt,popupOpen:it,size:Ye}),dt=function(e){var t=e.classes,i=e.disablePortal,a=e.focused,n=e.fullWidth,r=e.hasClearIcon,o=e.hasPopupIcon,s=e.inputFocused,c=e.popupOpen,u=e.size,h={root:["root",a&&"focused",n&&"fullWidth",r&&"hasClearIcon",o&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",s&&"inputFocused"],tag:["tag","tagSize".concat(Object(w.a)(u))],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",c&&"popupIndicatorOpen"],popper:["popper",i&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return Object(l.a)(h,Z,t)}(ht);if(ke&&$e.length>0){var ft=function(e){return Object(r.a)({className:dt.tag,disabled:z},Ke(e))};h=Be?Be($e,ft,ht):$e.map((function(e,t){return Object(A.jsx)(Y,Object(r.a)({label:Q(e),size:Ye},ft({index:t}),f))}))}if(pe>-1&&Array.isArray(h)){var pt=h.length-pe;!at&&pt>0&&(h=h.splice(0,pe)).push(Object(A.jsx)("span",{className:dt.tag,children:U(pt)},h.length))}var mt=je||function(e){return Object(A.jsxs)("li",{children:[Object(A.jsx)(ce,{className:dt.groupLabel,ownerState:ht,component:"div",children:e.group}),Object(A.jsx)(ue,{className:dt.groupUl,ownerState:ht,children:e.children})]},e.key)},gt=Fe||function(e,t){return Object(A.jsx)("li",Object(r.a)({},e,{children:Q(t)}))},vt=function(e,t){var i=Qe({option:e,index:t});return gt(Object(r.a)({},i,{className:dt.option}),e,{selected:i["aria-selected"],inputValue:st})};return Object(A.jsxs)(o.Fragment,{children:[Object(A.jsx)(ee,Object(r.a)({ref:t,className:Object(s.a)(dt.root,p),ownerState:ht},Ue(We),{children:Re({id:tt,disabled:z,fullWidth:!0,size:"small"===Ye?"small":void 0,InputLabelProps:Ge(),InputProps:Object(r.a)({ref:ot,className:dt.inputRoot,startAdornment:h},(ct||ut)&&{endAdornment:Object(A.jsxs)(te,{className:dt.endAdornment,ownerState:ht,children:[ct?Object(A.jsx)(ie,Object(r.a)({},Ze(),{"aria-label":k,title:k,ownerState:ht},T.clearIndicator,{className:Object(s.a)(dt.clearIndicator,null==(i=T.clearIndicator)?void 0:i.className),children:g})):null,ut?Object(A.jsx)(ae,Object(r.a)({},qe(),{disabled:z,"aria-label":it?C:Oe,title:it?C:Oe,ownerState:ht},T.popupIndicator,{className:Object(s.a)(dt.popupIndicator,null==(a=T.popupIndicator)?void 0:a.className),children:De})):null]})}),inputProps:Object(r.a)({className:dt.input,disabled:z,readOnly:Le},Xe())})})),it&&rt?Object(A.jsx)(ne,Object(r.a)({as:Ie,disablePortal:j,style:{width:rt?rt.clientWidth:null},ownerState:ht,role:"presentation",anchorEl:rt,open:!0},T.popper,{className:Object(s.a)(dt.popper,null==(c=T.popper)?void 0:c.className),children:Object(A.jsxs)(re,Object(r.a)({ownerState:ht,as:Me},T.paper,{className:Object(s.a)(dt.paper,null==(u=T.paper)?void 0:u.className),children:[xe&&0===lt.length?Object(A.jsx)(oe,{className:dt.loading,ownerState:ht,children:_e}):null,0!==lt.length||N||xe?null:Object(A.jsx)(se,{className:dt.noOptions,ownerState:ht,role:"presentation",onMouseDown:function(e){e.preventDefault()},children:Ce}),lt.length>0?Object(A.jsx)(le,Object(r.a)({as:ge,className:dt.listbox,ownerState:ht},Je(),ve,{children:lt.map((function(e,t){return he?mt({key:e.key,group:e.group,children:e.options.map((function(t,i){return vt(t,e.index+i)}))}):vt(e,t)}))})):null]}))})):null]})}));t.a=he},216:function(e,t,i){"use strict";var a=i(0),n=i(113),r=i.n(n),o=i(540),s=i(502),l=i(545),c=i(2),u=i(101),h=i(103),d=i.n(h),f=i(90),p=i.n(f),m=i(31),g=["as","className","type","tooltip"],v={type:p.a.string,tooltip:p.a.bool,as:p.a.elementType},y=a.forwardRef((function(e,t){var i=e.as,a=void 0===i?"div":i,n=e.className,r=e.type,o=void 0===r?"valid":r,s=e.tooltip,l=void 0!==s&&s,h=Object(u.a)(e,g);return Object(m.jsx)(a,Object(c.a)(Object(c.a)({},h),{},{ref:t,className:d()(n,"".concat(o,"-").concat(l?"tooltip":"feedback"))}))}));y.displayName="Feedback",y.propTypes=v;var x=y,b=a.createContext({}),_=i(105),w=["id","bsPrefix","className","type","isValid","isInvalid","as"],k=a.forwardRef((function(e,t){var i=e.id,n=e.bsPrefix,r=e.className,o=e.type,s=void 0===o?"checkbox":o,l=e.isValid,h=void 0!==l&&l,f=e.isInvalid,p=void 0!==f&&f,g=e.as,v=void 0===g?"input":g,y=Object(u.a)(e,w),x=Object(a.useContext)(b).controlId;return n=Object(_.c)(n,"form-check-input"),Object(m.jsx)(v,Object(c.a)(Object(c.a)({},y),{},{ref:t,type:s,id:i||x,className:d()(r,n,h&&"is-valid",p&&"is-invalid")}))}));k.displayName="FormCheckInput";var S=k,C=["bsPrefix","className","htmlFor"],A=a.forwardRef((function(e,t){var i=e.bsPrefix,n=e.className,r=e.htmlFor,o=Object(u.a)(e,C),s=Object(a.useContext)(b).controlId;return i=Object(_.c)(i,"form-check-label"),Object(m.jsx)("label",Object(c.a)(Object(c.a)({},o),{},{ref:t,htmlFor:r||s,className:d()(n,i)}))}));A.displayName="FormCheckLabel";var O=A;var T=["id","bsPrefix","bsSwitchPrefix","inline","reverse","disabled","isValid","isInvalid","feedbackTooltip","feedback","feedbackType","className","style","title","type","label","children","as"],M=a.forwardRef((function(e,t){var i=e.id,n=e.bsPrefix,r=e.bsSwitchPrefix,o=e.inline,s=void 0!==o&&o,l=e.reverse,h=void 0!==l&&l,f=e.disabled,p=void 0!==f&&f,g=e.isValid,v=void 0!==g&&g,y=e.isInvalid,w=void 0!==y&&y,k=e.feedbackTooltip,C=void 0!==k&&k,A=e.feedback,M=e.feedbackType,E=e.className,I=e.style,P=e.title,D=void 0===P?"":P,z=e.type,L=void 0===z?"checkbox":z,j=e.label,R=e.children,F=e.as,B=void 0===F?"input":F,N=Object(u.a)(e,T);n=Object(_.c)(n,"form-check"),r=Object(_.c)(r,"form-switch");var V=Object(a.useContext)(b).controlId,Y=Object(a.useMemo)((function(){return{controlId:i||V}}),[V,i]),W=!R&&null!=j&&!1!==j||function(e,t){return a.Children.toArray(e).some((function(e){return a.isValidElement(e)&&e.type===t}))}(R,O),H=Object(m.jsx)(S,Object(c.a)(Object(c.a)({},N),{},{type:"switch"===L?"checkbox":L,ref:t,isValid:v,isInvalid:w,disabled:p,as:B}));return Object(m.jsx)(b.Provider,{value:Y,children:Object(m.jsx)("div",{style:I,className:d()(E,W&&n,s&&"".concat(n,"-inline"),h&&"".concat(n,"-reverse"),"switch"===L&&r),children:R||Object(m.jsxs)(m.Fragment,{children:[H,W&&Object(m.jsx)(O,{title:D,children:j}),A&&Object(m.jsx)(x,{type:M,tooltip:C,children:A})]})})})}));M.displayName="FormCheck";var E=Object.assign(M,{Input:S,Label:O}),I=i(32),P=(i(179),["bsPrefix","type","size","htmlSize","id","className","isValid","isInvalid","plaintext","readOnly","as"]),D=a.forwardRef((function(e,t){var i,n,r=e.bsPrefix,o=e.type,s=e.size,l=e.htmlSize,h=e.id,f=e.className,p=e.isValid,g=void 0!==p&&p,v=e.isInvalid,y=void 0!==v&&v,x=e.plaintext,w=e.readOnly,k=e.as,S=void 0===k?"input":k,C=Object(u.a)(e,P),A=Object(a.useContext)(b).controlId;(r=Object(_.c)(r,"form-control"),x)?i=Object(I.a)({},"".concat(r,"-plaintext"),!0):(n={},Object(I.a)(n,r,!0),Object(I.a)(n,"".concat(r,"-").concat(s),s),i=n);return Object(m.jsx)(S,Object(c.a)(Object(c.a)({},C),{},{type:o,size:l,ref:t,readOnly:w,id:h||A,className:d()(f,i,g&&"is-valid",y&&"is-invalid","color"===o&&"".concat(r,"-color"))}))}));D.displayName="FormControl";var z=Object.assign(D,{Feedback:x}),L=i(199),j=Object(L.a)("form-floating"),R=["controlId","as"],F=a.forwardRef((function(e,t){var i=e.controlId,n=e.as,r=void 0===n?"div":n,o=Object(u.a)(e,R),s=Object(a.useMemo)((function(){return{controlId:i}}),[i]);return Object(m.jsx)(b.Provider,{value:s,children:Object(m.jsx)(r,Object(c.a)(Object(c.a)({},o),{},{ref:t}))})}));F.displayName="FormGroup";var B=F,N=i(7),V=["as","bsPrefix","className"],Y=["className"];var W=a.forwardRef((function(e,t){var i=function(e){var t=e.as,i=e.bsPrefix,a=e.className,n=Object(u.a)(e,V);i=Object(_.c)(i,"col");var r=Object(_.a)(),o=Object(_.b)(),s=[],l=[];return r.forEach((function(e){var t,a,r,c=n[e];delete n[e],"object"===typeof c&&null!=c?(t=c.span,a=c.offset,r=c.order):t=c;var u=e!==o?"-".concat(e):"";t&&s.push(!0===t?"".concat(i).concat(u):"".concat(i).concat(u,"-").concat(t)),null!=r&&l.push("order".concat(u,"-").concat(r)),null!=a&&l.push("offset".concat(u,"-").concat(a))})),[Object(c.a)(Object(c.a)({},n),{},{className:d.a.apply(void 0,[a].concat(s,l))}),{as:t,bsPrefix:i,spans:s}]}(e),a=Object(N.a)(i,2),n=a[0],r=n.className,o=Object(u.a)(n,Y),s=a[1],l=s.as,h=void 0===l?"div":l,f=s.bsPrefix,p=s.spans;return Object(m.jsx)(h,Object(c.a)(Object(c.a)({},o),{},{ref:t,className:d()(r,!p.length&&f)}))}));W.displayName="Col";var H=W,U=["as","bsPrefix","column","visuallyHidden","className","htmlFor"],X=a.forwardRef((function(e,t){var i=e.as,n=void 0===i?"label":i,r=e.bsPrefix,o=e.column,s=e.visuallyHidden,l=e.className,h=e.htmlFor,f=Object(u.a)(e,U),p=Object(a.useContext)(b).controlId;r=Object(_.c)(r,"form-label");var g="col-form-label";"string"===typeof o&&(g="".concat(g," ").concat(g,"-").concat(o));var v=d()(l,r,s&&"visually-hidden",o&&g);return h=h||p,o?Object(m.jsx)(H,Object(c.a)({ref:t,as:"label",className:v,htmlFor:h},f)):Object(m.jsx)(n,Object(c.a)({ref:t,className:v,htmlFor:h},f))}));X.displayName="FormLabel",X.defaultProps={column:!1,visuallyHidden:!1};var G=X,q=["bsPrefix","className","id"],Z=a.forwardRef((function(e,t){var i=e.bsPrefix,n=e.className,r=e.id,o=Object(u.a)(e,q),s=Object(a.useContext)(b).controlId;return i=Object(_.c)(i,"form-range"),Object(m.jsx)("input",Object(c.a)(Object(c.a)({},o),{},{type:"range",ref:t,className:d()(n,i),id:r||s}))}));Z.displayName="FormRange";var K=Z,J=["bsPrefix","size","htmlSize","className","isValid","isInvalid","id"],Q=a.forwardRef((function(e,t){var i=e.bsPrefix,n=e.size,r=e.htmlSize,o=e.className,s=e.isValid,l=void 0!==s&&s,h=e.isInvalid,f=void 0!==h&&h,p=e.id,g=Object(u.a)(e,J),v=Object(a.useContext)(b).controlId;return i=Object(_.c)(i,"form-select"),Object(m.jsx)("select",Object(c.a)(Object(c.a)({},g),{},{size:r,ref:t,className:d()(o,i,n&&"".concat(i,"-").concat(n),l&&"is-valid",f&&"is-invalid"),id:p||v}))}));Q.displayName="FormSelect";var $=Q,ee=["bsPrefix","className","as","muted"],te=a.forwardRef((function(e,t){var i=e.bsPrefix,a=e.className,n=e.as,r=void 0===n?"small":n,o=e.muted,s=Object(u.a)(e,ee);return i=Object(_.c)(i,"form-text"),Object(m.jsx)(r,Object(c.a)(Object(c.a)({},s),{},{ref:t,className:d()(a,i,o&&"text-muted")}))}));te.displayName="FormText";var ie=te,ae=a.forwardRef((function(e,t){return Object(m.jsx)(E,Object(c.a)(Object(c.a)({},e),{},{ref:t,type:"switch"}))}));ae.displayName="Switch";var ne=Object.assign(ae,{Input:E.Input,Label:E.Label}),re=["bsPrefix","className","children","controlId","label"],oe=a.forwardRef((function(e,t){var i=e.bsPrefix,a=e.className,n=e.children,r=e.controlId,o=e.label,s=Object(u.a)(e,re);return i=Object(_.c)(i,"form-floating"),Object(m.jsxs)(B,Object(c.a)(Object(c.a)({ref:t,className:d()(a,i),controlId:r},s),{},{children:[n,Object(m.jsx)("label",{htmlFor:r,children:o})]}))}));oe.displayName="FloatingLabel";var se=oe,le=["className","validated","as"],ce={_ref:p.a.any,validated:p.a.bool,as:p.a.elementType},ue=a.forwardRef((function(e,t){var i=e.className,a=e.validated,n=e.as,r=void 0===n?"form":n,o=Object(u.a)(e,le);return Object(m.jsx)(r,Object(c.a)(Object(c.a)({},o),{},{ref:t,className:d()(i,a&&"was-validated")}))}));ue.displayName="Form",ue.propTypes=ce;var he=Object.assign(ue,{Group:B,Control:z,Floating:j,Check:E,Switch:ne,Label:G,Text:ie,Range:K,Select:$,FloatingLabel:se}),de=i(542),fe=i(146),pe=i(19);i(128),t.a=function(e){var t=null===e||void 0===e?void 0:e.navigate,i=null===e||void 0===e?void 0:e.languages,n=null===e||void 0===e?void 0:e.dispatch,c=null===e||void 0===e?void 0:e.value,u=function(e){var i=window.location.pathname;t("/In"===i?"/In":"/Matching"===i?"/Matching":"/Order"===i?"/Order":"/Chat"===i?"/Chat":"/Chats"===i?"/Chats":"/Dashboard_freelance"===i?"/Dashboard_freelance":"/Notification",{state:{languages:"".concat(e),value:"".concat(c)}})};return a.createElement(o.a,{expand:"lg",id:"navbardb2"},a.createElement(s.a,{fluid:!0},a.createElement(o.a.Brand,null,a.createElement("img",{src:r.a,alt:"Logo"})),a.createElement(o.a.Toggle,{"aria-controls":"navbarScroll"}),a.createElement(o.a.Collapse,{id:"navbarScroll"},a.createElement(l.a,{className:"me-auto my-2 my-lg-0",style:{maxHeight:"100px"},navbarScroll:!0}),a.createElement(he,{className:"d-flex"},a.createElement("div",{className:"box4navbarHome2"},a.createElement(fe.c,{size:"20px",color:"#808080",style:{float:"left"}}),"English"===i?a.createElement(de.a,{title:"EN",style:{marginLeft:10,color:"#808080",fontSize:13,float:"left",padding:0}},a.createElement(de.a.Item,{onClick:function(){return u("English")}},"English"),a.createElement(de.a.Item,{onClick:function(){return u("Thai")}},"Thai"),a.createElement(de.a.Item,{onClick:function(){return u("German")}},"German")):"German"===i?a.createElement(de.a,{title:"DE",style:{marginLeft:10,color:"#808080",fontSize:13,float:"left",padding:0}},a.createElement(de.a.Item,{onClick:function(){return u("English")}},"English"),a.createElement(de.a.Item,{onClick:function(){return u("Thai")}},"Thai"),a.createElement(de.a.Item,{onClick:function(){return u("German")}},"German")):"Thai"===i?a.createElement(de.a,{title:"TH",style:{marginLeft:10,color:"#808080",fontSize:13,float:"left",padding:0}},a.createElement(de.a.Item,{onClick:function(){return u("English")}},"English"),a.createElement(de.a.Item,{onClick:function(){return u("Thai")}},"Thai"),a.createElement(de.a.Item,{onClick:function(){return u("German")}},"German")):a.createElement(de.a,{title:"EN",style:{marginLeft:10,color:"#808080",fontSize:13,float:"left",padding:0}},a.createElement(de.a.Item,{onClick:function(){return u("English")}},"English"),a.createElement(de.a.Item,{onClick:function(){return u("Thai")}},"Thai"),a.createElement(de.a.Item,{onClick:function(){return u("German")}},"German"))),a.createElement("div",{className:"box4navbarHome2"},a.createElement(fe.g,{size:"20px",color:"#808080",style:{float:"left"}}),a.createElement("p",{style:{marginLeft:10,color:"#808080",fontSize:13,float:"left"}},"TH")),a.createElement("div",{className:"box4navbarHome2_1"},a.createElement(de.a,{title:a.createElement("div",{className:"icon_accounts"},a.createElement(fe.l,{alt:"avatar",className:"avatar"})),style:{marginLeft:10,color:"#808080",fontSize:20,float:"left",padding:0}},a.createElement(de.a.Item,{onClick:function(){return n(Object(pe.c)()),void window.location.reload()},className:"Logout"},"Logout")))))))}},223:function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},224:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.createSvgIcon}});var a=i(119)},233:function(e,t){function i(t){return e.exports=i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},i(t)}e.exports=i},238:function(e,t,i){"use strict";i.d(t,"b",(function(){return u})),i.d(t,"a",(function(){return h}));var a,n=i(6),r=i(0),o=i(98),s={previousMonth:"Previous month",nextMonth:"Next month",openPreviousView:"open previous view",openNextView:"open next view",calendarViewSwitchingButtonAriaLabel:function(e){return"year"===e?"year view is open, switch to calendar view":"calendar view is open, switch to year view"},start:"Start",end:"End",cancelButtonLabel:"Cancel",clearButtonLabel:"Clear",okButtonLabel:"OK",todayButtonLabel:"Today",clockLabelText:function(e,t,i){return"Select ".concat(e,". ").concat(null===t?"No time selected":"Selected time is ".concat(i.format(t,"fullTime")))},hoursClockNumberText:function(e){return"".concat(e," hours")},minutesClockNumberText:function(e){return"".concat(e," minutes")},secondsClockNumberText:function(e){return"".concat(e," seconds")},openDatePickerDialogue:function(e,t){return e&&t.isValid(t.date(e))?"Choose date, selected date is ".concat(t.format(t.date(e),"fullDate")):"Choose date"},openTimePickerDialogue:function(e,t){return e&&t.isValid(t.date(e))?"Choose time, selected time is ".concat(t.format(t.date(e),"fullTime")):"Choose time"},timeTableLabel:"pick time",dateTableLabel:"pick date"},l=s,c=(a=s,Object(n.a)({},a),i(31)),u=r.createContext(null);function h(e){var t=Object(o.a)({props:e,name:"MuiLocalizationProvider"}),i=t.children,a=t.dateAdapter,s=t.dateFormats,h=t.dateLibInstance,d=t.locale,f=t.adapterLocale,p=t.localeText;var m=r.useMemo((function(){return new a({locale:null!=f?f:d,formats:s,instance:h})}),[a,d,f,s,h]),g=r.useMemo((function(){return{minDate:m.date("1900-01-01T00:00:00.000"),maxDate:m.date("2099-12-31T00:00:00.000")}}),[m]),v=r.useMemo((function(){return{utils:m,defaultDates:g,localeText:Object(n.a)({},l,null!=p?p:{})}}),[g,m,p]);return Object(c.jsx)(u.Provider,{value:v,children:i})}},251:function(e,t,i){var a=i(358);e.exports=function(e,t){if(e){if("string"===typeof e)return a(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(e,t):void 0}}},279:function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return r})),i.d(t,"c",(function(){return o})),i.d(t,"d",(function(){return s}));var a=i(118);function n(e){return Object(a.a)({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M217.9 256L345 129c9.4-9.4 9.4-24.6 0-33.9-9.4-9.4-24.6-9.3-34 0L167 239c-9.1 9.1-9.3 23.7-.7 33.1L310.9 417c4.7 4.7 10.9 7 17 7s12.3-2.3 17-7c9.4-9.4 9.4-24.6 0-33.9L217.9 256z"}}]})(e)}function r(e){return Object(a.a)({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M294.1 256L167 129c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.3 34 0L345 239c9.1 9.1 9.3 23.7.7 33.1L201.1 417c-4.7 4.7-10.9 7-17 7s-12.3-2.3-17-7c-9.4-9.4-9.4-24.6 0-33.9l127-127.1z"}}]})(e)}function o(e){return Object(a.a)({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M255.8 112c-80.4 0-143.8 50.6-219.6 133.3-5.5 6.1-5.6 15.2-.1 21.3C101 338.3 158.2 400 255.8 400c96.4 0 168.7-77.7 220.1-134 5.3-5.8 5.6-14.6.5-20.7C424 181.8 351.5 112 255.8 112zm4.4 233.9c-53 2.4-96.6-41.2-94.1-94.1 2.1-46.2 39.5-83.6 85.7-85.7 53-2.4 96.6 41.2 94.1 94.1-2.1 46.2-39.5 83.6-85.7 85.7z"}},{tag:"path",attr:{d:"M256 209c0-6 1.1-11.7 3.1-16.9-1 0-2-.1-3.1-.1-36.9 0-66.6 31.4-63.8 68.9 2.4 31.3 27.6 56.5 58.9 58.9 37.5 2.8 68.9-26.9 68.9-63.8 0-1.3-.1-2.6-.1-3.9-5.6 2.5-11.7 3.9-18.2 3.9-25.2 0-45.7-21.1-45.7-47z"}}]})(e)}function s(e){return Object(a.a)({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M363 277h-86v86h-42v-86h-86v-42h86v-86h42v86h86v42z"}},{tag:"path",attr:{d:"M256 90c44.3 0 86 17.3 117.4 48.6C404.7 170 422 211.7 422 256s-17.3 86-48.6 117.4C342 404.7 300.3 422 256 422c-44.3 0-86-17.3-117.4-48.6C107.3 342 90 300.3 90 256c0-44.3 17.3-86 48.6-117.4C170 107.3 211.7 90 256 90m0-42C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48z"}}]})(e)}},281:function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));var a=i(32),n=i(0),r=i(316),o=i(318),s=i(551),l=i(553),c=i(314),u=i(319),h=i(206),d=i(144),f=i(132),p=i(1);function m(e){var t=window.location.pathname,i=Object(p.f)(),m=null===e||void 0===e?void 0:e.value,g=null===e||void 0===e?void 0:e.languages;return n.createElement(r.a,{variant:"permanent",anchor:"left",sx:Object(a.a)({width:100},"& .MuiDrawer-paper",{width:100,boxSizing:"border-box"}),style:{zIndex:0,height:"100%"}},n.createElement(o.a,null),n.createElement(s.a,{sx:{overflow:"hidden"},className:"manuTranslate"},"/Dashboard_freelance"===t?n.createElement(l.a,null,["0","1","2","3"].map((function(e,t){return n.createElement(c.a,{button:!0,key:e,id:"button_manu_Translate"},0===t?n.createElement(u.a,{id:"icons_translate2"},n.createElement(f.b,{style:{fontSize:30},className:"icons",onClick:function(){return i("/Dashboard_freelance",{state:{languages:"".concat(g),value:"".concat(m)}})}})):1===t?n.createElement(u.a,{id:"icons_translate"},n.createElement(d.c,{className:"icons",onClick:function(){return i("/Tool",{state:{languages:"".concat(g),value:"".concat(m)}})}})):2===t?n.createElement(u.a,{id:"icons_translate"},n.createElement(h.a,{className:"icons",onClick:function(){return i("/Chats",{state:{languages:"".concat(g),value:"".concat(m)}})}})):null)}))):"/Tool"===t?n.createElement(l.a,null,["0","1","2","3"].map((function(e,t){return n.createElement(c.a,{button:!0,key:e,id:"button_manu_Translate"},0===t?n.createElement(u.a,{id:"icons_translate"},n.createElement(f.b,{style:{fontSize:30},className:"icons",onClick:function(){return i("/Dashboard_freelance",{state:{languages:"".concat(g),value:"".concat(m)}})}})):1===t?n.createElement(u.a,{id:"icons_translate2"},n.createElement(d.c,{className:"icons",onClick:function(){return i("/Tool",{state:{languages:"".concat(g),value:"".concat(m)}})}})):2===t?n.createElement(u.a,{id:"icons_translate"},n.createElement(h.a,{className:"icons",onClick:function(){return i("/Chats",{state:{languages:"".concat(g),value:"".concat(m)}})}})):null)}))):n.createElement(l.a,null,["0","1","2","3"].map((function(e,t){return n.createElement(c.a,{button:!0,key:e,id:"button_manu_Translate"},0===t?n.createElement(u.a,{id:"icons_translate"},n.createElement(f.b,{style:{fontSize:30},className:"icons",onClick:function(){return i("/Dashboard_freelance",{state:{languages:"".concat(g),value:"".concat(m)}})}})):1===t?n.createElement(u.a,{id:"icons_translate"},n.createElement(d.c,{className:"icons",onClick:function(){return i("/Tool",{state:{languages:"".concat(g),value:"".concat(m)}})}})):2===t?n.createElement(u.a,{id:"icons_translate2"},n.createElement(h.a,{className:"icons",onClick:function(){return i("/Chats",{state:{languages:"".concat(g),value:"".concat(m)}})}})):null)})))))}},282:function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},283:function(e,t,i){var a=i(284),n=i(353);function r(t,i,o){return n()?e.exports=r=Reflect.construct:e.exports=r=function(e,t,i){var n=[null];n.push.apply(n,t);var r=new(Function.bind.apply(e,n));return i&&a(r,i.prototype),r},r.apply(null,arguments)}e.exports=r},284:function(e,t){function i(t,a){return e.exports=i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(t,a)}e.exports=i},285:function(e,t,i){var a=i(433),n=i(282);e.exports=function(e,t){return!t||"object"!==a(t)&&"function"!==typeof t?n(e):t}},286:function(e,t,i){"use strict";function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,m(a.key),a)}}function n(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e}).apply(this,arguments)}function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,l(e,t)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function u(e,t,i){return(u=c()?Reflect.construct.bind():function(e,t,i){var a=[null];a.push.apply(a,t);var n=new(Function.bind.apply(e,a));return i&&l(n,i.prototype),n}).apply(null,arguments)}function h(e){var t="function"===typeof Map?new Map:void 0;return(h=function(e){if(null===e||(i=e,-1===Function.toString.call(i).indexOf("[native code]")))return e;var i;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,a)}function a(){return u(e,arguments,s(this).constructor)}return a.prototype=Object.create(e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),l(a,e)})(e)}function d(e,t){if(null==e)return{};var i,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)i=r[a],t.indexOf(i)>=0||(n[i]=e[i]);return n}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function p(e,t){var i="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=function(e,t){if(e){if("string"===typeof e)return f(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?f(e,t):void 0}}(e))||t&&e&&"number"===typeof e.length){i&&(e=i);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!==typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}Object.defineProperty(t,"__esModule",{value:!0});var g=function(e){function t(){return e.apply(this,arguments)||this}return o(t,e),t}(h(Error)),v=function(e){function t(t){return e.call(this,"Invalid DateTime: "+t.toMessage())||this}return o(t,e),t}(g),y=function(e){function t(t){return e.call(this,"Invalid Interval: "+t.toMessage())||this}return o(t,e),t}(g),x=function(e){function t(t){return e.call(this,"Invalid Duration: "+t.toMessage())||this}return o(t,e),t}(g),b=function(e){function t(){return e.apply(this,arguments)||this}return o(t,e),t}(g),_=function(e){function t(t){return e.call(this,"Invalid unit "+t)||this}return o(t,e),t}(g),w=function(e){function t(){return e.apply(this,arguments)||this}return o(t,e),t}(g),k=function(e){function t(){return e.call(this,"Zone is an abstract class")||this}return o(t,e),t}(g),S="numeric",C="short",A="long",O={year:S,month:S,day:S},T={year:S,month:C,day:S},M={year:S,month:C,day:S,weekday:C},E={year:S,month:A,day:S},I={year:S,month:A,day:S,weekday:A},P={hour:S,minute:S},D={hour:S,minute:S,second:S},z={hour:S,minute:S,second:S,timeZoneName:C},L={hour:S,minute:S,second:S,timeZoneName:A},j={hour:S,minute:S,hourCycle:"h23"},R={hour:S,minute:S,second:S,hourCycle:"h23"},F={hour:S,minute:S,second:S,hourCycle:"h23",timeZoneName:C},B={hour:S,minute:S,second:S,hourCycle:"h23",timeZoneName:A},N={year:S,month:S,day:S,hour:S,minute:S},V={year:S,month:S,day:S,hour:S,minute:S,second:S},Y={year:S,month:C,day:S,hour:S,minute:S},W={year:S,month:C,day:S,hour:S,minute:S,second:S},H={year:S,month:C,day:S,weekday:C,hour:S,minute:S},U={year:S,month:A,day:S,hour:S,minute:S,timeZoneName:C},X={year:S,month:A,day:S,hour:S,minute:S,second:S,timeZoneName:C},G={year:S,month:A,day:S,weekday:A,hour:S,minute:S,timeZoneName:A},q={year:S,month:A,day:S,weekday:A,hour:S,minute:S,second:S,timeZoneName:A},Z=function(){function e(){}var t=e.prototype;return t.offsetName=function(e,t){throw new k},t.formatOffset=function(e,t){throw new k},t.offset=function(e){throw new k},t.equals=function(e){throw new k},n(e,[{key:"type",get:function(){throw new k}},{key:"name",get:function(){throw new k}},{key:"ianaName",get:function(){return this.name}},{key:"isUniversal",get:function(){throw new k}},{key:"isValid",get:function(){throw new k}}]),e}(),K=null,J=function(e){function t(){return e.apply(this,arguments)||this}o(t,e);var i=t.prototype;return i.offsetName=function(e,t){return Ue(e,t.format,t.locale)},i.formatOffset=function(e,t){return Ze(this.offset(e),t)},i.offset=function(e){return-new Date(e).getTimezoneOffset()},i.equals=function(e){return"system"===e.type},n(t,[{key:"type",get:function(){return"system"}},{key:"name",get:function(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!0}}],[{key:"instance",get:function(){return null===K&&(K=new t),K}}]),t}(Z),Q={};var $={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};var ee={},te=function(e){function t(i){var a;return(a=e.call(this)||this).zoneName=i,a.valid=t.isValidZone(i),a}o(t,e),t.create=function(e){return ee[e]||(ee[e]=new t(e)),ee[e]},t.resetCache=function(){ee={},Q={}},t.isValidSpecifier=function(e){return this.isValidZone(e)},t.isValidZone=function(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch(t){return!1}};var i=t.prototype;return i.offsetName=function(e,t){return Ue(e,t.format,t.locale,this.name)},i.formatOffset=function(e,t){return Ze(this.offset(e),t)},i.offset=function(e){var t=new Date(e);if(isNaN(t))return NaN;var i,a=(i=this.name,Q[i]||(Q[i]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:i,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),Q[i]),n=a.formatToParts?function(e,t){for(var i=e.formatToParts(t),a=[],n=0;n<i.length;n++){var r=i[n],o=r.type,s=r.value,l=$[o];"era"===o?a[l]=s:Oe(l)||(a[l]=parseInt(s,10))}return a}(a,t):function(e,t){var i=e.format(t).replace(/\u200E/g,""),a=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),n=a[1],r=a[2];return[a[3],n,r,a[4],a[5],a[6],a[7]]}(a,t),r=n[0],o=n[1],s=n[2],l=n[3],c=n[4],u=n[5],h=n[6];"BC"===l&&(r=1-Math.abs(r));var d=+t,f=d%1e3;return(Ye({year:r,month:o,day:s,hour:24===c?0:c,minute:u,second:h,millisecond:0})-(d-=f>=0?f:1e3+f))/6e4},i.equals=function(e){return"iana"===e.type&&e.name===this.name},n(t,[{key:"type",get:function(){return"iana"}},{key:"name",get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return this.valid}}]),t}(Z),ie=["base"],ae=["padTo","floor"],ne={};var re={};function oe(e,t){void 0===t&&(t={});var i=JSON.stringify([e,t]),a=re[i];return a||(a=new Intl.DateTimeFormat(e,t),re[i]=a),a}var se={};var le={};var ce=null;function ue(e,t,i,a,n){var r=e.listingMode(i);return"error"===r?null:"en"===r?a(t):n(t)}var he=function(){function e(e,t,i){this.padTo=i.padTo||0,this.floor=i.floor||!1,i.padTo,i.floor;var a=d(i,ae);if(!t||Object.keys(a).length>0){var n=r({useGrouping:!1},i);i.padTo>0&&(n.minimumIntegerDigits=i.padTo),this.inf=function(e,t){void 0===t&&(t={});var i=JSON.stringify([e,t]),a=se[i];return a||(a=new Intl.NumberFormat(e,t),se[i]=a),a}(e,n)}}return e.prototype.format=function(e){if(this.inf){var t=this.floor?Math.floor(e):e;return this.inf.format(t)}return ze(this.floor?Math.floor(e):Fe(e,3),this.padTo)},e}(),de=function(){function e(e,t,i){this.opts=i,this.originalZone=void 0;var a=void 0;if(this.opts.timeZone)this.dt=e;else if("fixed"===e.zone.type){var n=e.offset/60*-1,o=n>=0?"Etc/GMT+"+n:"Etc/GMT"+n;0!==e.offset&&te.create(o).valid?(a=o,this.dt=e):(a="UTC",this.dt=0===e.offset?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else"system"===e.zone.type?this.dt=e:"iana"===e.zone.type?(this.dt=e,a=e.zone.name):(a="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);var s=r({},this.opts);s.timeZone=s.timeZone||a,this.dtf=oe(t,s)}var t=e.prototype;return t.format=function(){return this.originalZone?this.formatToParts().map((function(e){return e.value})).join(""):this.dtf.format(this.dt.toJSDate())},t.formatToParts=function(){var e=this,t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map((function(t){return"timeZoneName"===t.type?r({},t,{value:e.originalZone.offsetName(e.dt.ts,{locale:e.dt.locale,format:e.opts.timeZoneName})}):t})):t},t.resolvedOptions=function(){return this.dtf.resolvedOptions()},e}(),fe=function(){function e(e,t,i){this.opts=r({style:"long"},i),!t&&Ee()&&(this.rtf=function(e,t){void 0===t&&(t={});var i=t;i.base;var a=d(i,ie),n=JSON.stringify([e,a]),r=le[n];return r||(r=new Intl.RelativeTimeFormat(e,t),le[n]=r),r}(e,i))}var t=e.prototype;return t.format=function(e,t){return this.rtf?this.rtf.format(e,t):function(e,t,i,a){void 0===i&&(i="always");void 0===a&&(a=!1);var n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},r=-1===["hours","minutes","seconds"].indexOf(e);if("auto"===i&&r){var o="days"===e;switch(t){case 1:return o?"tomorrow":"next "+n[e][0];case-1:return o?"yesterday":"last "+n[e][0];case 0:return o?"today":"this "+n[e][0]}}var s=Object.is(t,-0)||t<0,l=Math.abs(t),c=1===l,u=n[e],h=a?c?u[1]:u[2]||u[1]:c?n[e][0]:e;return s?l+" "+h+" ago":"in "+l+" "+h}(t,e,this.opts.numeric,"long"!==this.opts.style)},t.formatToParts=function(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]},e}(),pe=function(){function e(e,t,i,a){var n=function(e){var t=e.indexOf("-x-");-1!==t&&(e=e.substring(0,t));var i,a,n=e.indexOf("-u-");if(-1===n)return[e];try{i=oe(e).resolvedOptions(),a=e}catch(s){var r=e.substring(0,n);i=oe(r).resolvedOptions(),a=r}var o=i;return[a,o.numberingSystem,o.calendar]}(e),r=n[0],o=n[1],s=n[2];this.locale=r,this.numberingSystem=t||o||null,this.outputCalendar=i||s||null,this.intl=function(e,t,i){return i||t?(e.includes("-u-")||(e+="-u"),i&&(e+="-ca-"+i),t&&(e+="-nu-"+t),e):e}(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=a,this.fastNumbersCached=null}e.fromOpts=function(t){return e.create(t.locale,t.numberingSystem,t.outputCalendar,t.defaultToEN)},e.create=function(t,i,a,n){void 0===n&&(n=!1);var r=t||Ae.defaultLocale;return new e(r||(n?"en-US":ce||(ce=(new Intl.DateTimeFormat).resolvedOptions().locale)),i||Ae.defaultNumberingSystem,a||Ae.defaultOutputCalendar,r)},e.resetCache=function(){ce=null,re={},se={},le={}},e.fromObject=function(t){var i=void 0===t?{}:t,a=i.locale,n=i.numberingSystem,r=i.outputCalendar;return e.create(a,n,r)};var t=e.prototype;return t.listingMode=function(){var e=this.isEnglish(),t=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);return e&&t?"en":"intl"},t.clone=function(t){return t&&0!==Object.getOwnPropertyNames(t).length?e.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,t.defaultToEN||!1):this},t.redefaultToEN=function(e){return void 0===e&&(e={}),this.clone(r({},e,{defaultToEN:!0}))},t.redefaultToSystem=function(e){return void 0===e&&(e={}),this.clone(r({},e,{defaultToEN:!1}))},t.months=function(e,t,i){var a=this;return void 0===t&&(t=!1),void 0===i&&(i=!0),ue(this,e,i,et,(function(){var i=t?{month:e,day:"numeric"}:{month:e},n=t?"format":"standalone";return a.monthsCache[n][e]||(a.monthsCache[n][e]=function(e){for(var t=[],i=1;i<=12;i++){var a=da.utc(2016,i,1);t.push(e(a))}return t}((function(e){return a.extract(e,i,"month")}))),a.monthsCache[n][e]}))},t.weekdays=function(e,t,i){var a=this;return void 0===t&&(t=!1),void 0===i&&(i=!0),ue(this,e,i,nt,(function(){var i=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},n=t?"format":"standalone";return a.weekdaysCache[n][e]||(a.weekdaysCache[n][e]=function(e){for(var t=[],i=1;i<=7;i++){var a=da.utc(2016,11,13+i);t.push(e(a))}return t}((function(e){return a.extract(e,i,"weekday")}))),a.weekdaysCache[n][e]}))},t.meridiems=function(e){var t=this;return void 0===e&&(e=!0),ue(this,void 0,e,(function(){return rt}),(function(){if(!t.meridiemCache){var e={hour:"numeric",hourCycle:"h12"};t.meridiemCache=[da.utc(2016,11,13,9),da.utc(2016,11,13,19)].map((function(i){return t.extract(i,e,"dayperiod")}))}return t.meridiemCache}))},t.eras=function(e,t){var i=this;return void 0===t&&(t=!0),ue(this,e,t,ct,(function(){var t={era:e};return i.eraCache[e]||(i.eraCache[e]=[da.utc(-40,1,1),da.utc(2017,1,1)].map((function(e){return i.extract(e,t,"era")}))),i.eraCache[e]}))},t.extract=function(e,t,i){var a=this.dtFormatter(e,t).formatToParts().find((function(e){return e.type.toLowerCase()===i}));return a?a.value:null},t.numberFormatter=function(e){return void 0===e&&(e={}),new he(this.intl,e.forceSimple||this.fastNumbers,e)},t.dtFormatter=function(e,t){return void 0===t&&(t={}),new de(e,this.intl,t)},t.relFormatter=function(e){return void 0===e&&(e={}),new fe(this.intl,this.isEnglish(),e)},t.listFormatter=function(e){return void 0===e&&(e={}),function(e,t){void 0===t&&(t={});var i=JSON.stringify([e,t]),a=ne[i];return a||(a=new Intl.ListFormat(e,t),ne[i]=a),a}(this.intl,e)},t.isEnglish=function(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")},t.equals=function(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar},n(e,[{key:"fastNumbers",get:function(){var e;return null==this.fastNumbersCached&&(this.fastNumbersCached=(!(e=this).numberingSystem||"latn"===e.numberingSystem)&&("latn"===e.numberingSystem||!e.locale||e.locale.startsWith("en")||"latn"===new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem)),this.fastNumbersCached}}]),e}(),me=null,ge=function(e){function t(t){var i;return(i=e.call(this)||this).fixed=t,i}o(t,e),t.instance=function(e){return 0===e?t.utcInstance:new t(e)},t.parseSpecifier=function(e){if(e){var i=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new t(Xe(i[1],i[2]))}return null};var i=t.prototype;return i.offsetName=function(){return this.name},i.formatOffset=function(e,t){return Ze(this.fixed,t)},i.offset=function(){return this.fixed},i.equals=function(e){return"fixed"===e.type&&e.fixed===this.fixed},n(t,[{key:"type",get:function(){return"fixed"}},{key:"name",get:function(){return 0===this.fixed?"UTC":"UTC"+Ze(this.fixed,"narrow")}},{key:"ianaName",get:function(){return 0===this.fixed?"Etc/UTC":"Etc/GMT"+Ze(-this.fixed,"narrow")}},{key:"isUniversal",get:function(){return!0}},{key:"isValid",get:function(){return!0}}],[{key:"utcInstance",get:function(){return null===me&&(me=new t(0)),me}}]),t}(Z),ve=function(e){function t(t){var i;return(i=e.call(this)||this).zoneName=t,i}o(t,e);var i=t.prototype;return i.offsetName=function(){return null},i.formatOffset=function(){return""},i.offset=function(){return NaN},i.equals=function(){return!1},n(t,[{key:"type",get:function(){return"invalid"}},{key:"name",get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!1}}]),t}(Z);function ye(e,t){if(Oe(e)||null===e)return t;if(e instanceof Z)return e;if("string"===typeof e){var i=e.toLowerCase();return"default"===i?t:"local"===i||"system"===i?J.instance:"utc"===i||"gmt"===i?ge.utcInstance:ge.parseSpecifier(i)||te.create(e)}return Te(e)?ge.instance(e):"object"===typeof e&&e.offset&&"number"===typeof e.offset?e:new ve(e)}var xe,be=function(){return Date.now()},_e="system",we=null,ke=null,Se=null,Ce=60,Ae=function(){function e(){}return e.resetCaches=function(){pe.resetCache(),te.resetCache()},n(e,null,[{key:"now",get:function(){return be},set:function(e){be=e}},{key:"defaultZone",get:function(){return ye(_e,J.instance)},set:function(e){_e=e}},{key:"defaultLocale",get:function(){return we},set:function(e){we=e}},{key:"defaultNumberingSystem",get:function(){return ke},set:function(e){ke=e}},{key:"defaultOutputCalendar",get:function(){return Se},set:function(e){Se=e}},{key:"twoDigitCutoffYear",get:function(){return Ce},set:function(e){Ce=e%100}},{key:"throwOnInvalid",get:function(){return xe},set:function(e){xe=e}}]),e}();function Oe(e){return"undefined"===typeof e}function Te(e){return"number"===typeof e}function Me(e){return"number"===typeof e&&e%1===0}function Ee(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(e){return!1}}function Ie(e,t,i){if(0!==e.length)return e.reduce((function(e,a){var n=[t(a),a];return e&&i(e[0],n[0])===e[0]?e:n}),null)[1]}function Pe(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function De(e,t,i){return Me(e)&&e>=t&&e<=i}function ze(e,t){return void 0===t&&(t=2),e<0?"-"+(""+-e).padStart(t,"0"):(""+e).padStart(t,"0")}function Le(e){return Oe(e)||null===e||""===e?void 0:parseInt(e,10)}function je(e){return Oe(e)||null===e||""===e?void 0:parseFloat(e)}function Re(e){if(!Oe(e)&&null!==e&&""!==e){var t=1e3*parseFloat("0."+e);return Math.floor(t)}}function Fe(e,t,i){void 0===i&&(i=!1);var a=Math.pow(10,t);return(i?Math.trunc:Math.round)(e*a)/a}function Be(e){return e%4===0&&(e%100!==0||e%400===0)}function Ne(e){return Be(e)?366:365}function Ve(e,t){var i=function(e,t){return e-t*Math.floor(e/t)}(t-1,12)+1;return 2===i?Be(e+(t-i)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function Ye(e){var t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t)).setUTCFullYear(e.year,e.month-1,e.day),+t}function We(e){var t=(e+Math.floor(e/4)-Math.floor(e/100)+Math.floor(e/400))%7,i=e-1,a=(i+Math.floor(i/4)-Math.floor(i/100)+Math.floor(i/400))%7;return 4===t||3===a?53:52}function He(e){return e>99?e:e>Ae.twoDigitCutoffYear?1900+e:2e3+e}function Ue(e,t,i,a){void 0===a&&(a=null);var n=new Date(e),o={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};a&&(o.timeZone=a);var s=r({timeZoneName:t},o),l=new Intl.DateTimeFormat(i,s).formatToParts(n).find((function(e){return"timezonename"===e.type.toLowerCase()}));return l?l.value:null}function Xe(e,t){var i=parseInt(e,10);Number.isNaN(i)&&(i=0);var a=parseInt(t,10)||0;return 60*i+(i<0||Object.is(i,-0)?-a:a)}function Ge(e){var t=Number(e);if("boolean"===typeof e||""===e||Number.isNaN(t))throw new w("Invalid unit value "+e);return t}function qe(e,t){var i={};for(var a in e)if(Pe(e,a)){var n=e[a];if(void 0===n||null===n)continue;i[t(a)]=Ge(n)}return i}function Ze(e,t){var i=Math.trunc(Math.abs(e/60)),a=Math.trunc(Math.abs(e%60)),n=e>=0?"+":"-";switch(t){case"short":return""+n+ze(i,2)+":"+ze(a,2);case"narrow":return""+n+i+(a>0?":"+a:"");case"techie":return""+n+ze(i,2)+ze(a,2);default:throw new RangeError("Value format "+t+" is out of range for property format")}}function Ke(e){return function(e,t){return t.reduce((function(t,i){return t[i]=e[i],t}),{})}(e,["hour","minute","second","millisecond"])}var Je=["January","February","March","April","May","June","July","August","September","October","November","December"],Qe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],$e=["J","F","M","A","M","J","J","A","S","O","N","D"];function et(e){switch(e){case"narrow":return[].concat($e);case"short":return[].concat(Qe);case"long":return[].concat(Je);case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}var tt=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],it=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],at=["M","T","W","T","F","S","S"];function nt(e){switch(e){case"narrow":return[].concat(at);case"short":return[].concat(it);case"long":return[].concat(tt);case"numeric":return["1","2","3","4","5","6","7"];default:return null}}var rt=["AM","PM"],ot=["Before Christ","Anno Domini"],st=["BC","AD"],lt=["B","A"];function ct(e){switch(e){case"narrow":return[].concat(lt);case"short":return[].concat(st);case"long":return[].concat(ot);default:return null}}function ut(e,t){for(var i,a="",n=p(e);!(i=n()).done;){var r=i.value;r.literal?a+=r.val:a+=t(r.val)}return a}var ht={D:O,DD:T,DDD:E,DDDD:I,t:P,tt:D,ttt:z,tttt:L,T:j,TT:R,TTT:F,TTTT:B,f:N,ff:Y,fff:U,ffff:G,F:V,FF:W,FFF:X,FFFF:q},dt=function(){function e(e,t){this.opts=t,this.loc=e,this.systemLoc=null}e.create=function(t,i){return void 0===i&&(i={}),new e(t,i)},e.parseFormat=function(e){for(var t=null,i="",a=!1,n=[],r=0;r<e.length;r++){var o=e.charAt(r);"'"===o?(i.length>0&&n.push({literal:a||/^\s+$/.test(i),val:i}),t=null,i="",a=!a):a||o===t?i+=o:(i.length>0&&n.push({literal:/^\s+$/.test(i),val:i}),i=o,t=o)}return i.length>0&&n.push({literal:a||/^\s+$/.test(i),val:i}),n},e.macroTokenToFormatOpts=function(e){return ht[e]};var t=e.prototype;return t.formatWithSystemDefault=function(e,t){return null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,r({},this.opts,t)).format()},t.formatDateTime=function(e,t){return void 0===t&&(t={}),this.loc.dtFormatter(e,r({},this.opts,t)).format()},t.formatDateTimeParts=function(e,t){return void 0===t&&(t={}),this.loc.dtFormatter(e,r({},this.opts,t)).formatToParts()},t.formatInterval=function(e,t){return void 0===t&&(t={}),this.loc.dtFormatter(e.start,r({},this.opts,t)).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())},t.resolvedOptions=function(e,t){return void 0===t&&(t={}),this.loc.dtFormatter(e,r({},this.opts,t)).resolvedOptions()},t.num=function(e,t){if(void 0===t&&(t=0),this.opts.forceSimple)return ze(e,t);var i=r({},this.opts);return t>0&&(i.padTo=t),this.loc.numberFormatter(i).format(e)},t.formatDateTimeFromString=function(t,i){var a=this,n="en"===this.loc.listingMode(),r=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,o=function(e,i){return a.loc.extract(t,e,i)},s=function(e){return t.isOffsetFixed&&0===t.offset&&e.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,e.format):""},l=function(){return n?function(e){return rt[e.hour<12?0:1]}(t):o({hour:"numeric",hourCycle:"h12"},"dayperiod")},c=function(e,i){return n?function(e,t){return et(t)[e.month-1]}(t,e):o(i?{month:e}:{month:e,day:"numeric"},"month")},u=function(e,i){return n?function(e,t){return nt(t)[e.weekday-1]}(t,e):o(i?{weekday:e}:{weekday:e,month:"long",day:"numeric"},"weekday")},h=function(e){return n?function(e,t){return ct(t)[e.year<0?0:1]}(t,e):o({era:e},"era")};return ut(e.parseFormat(i),(function(i){switch(i){case"S":return a.num(t.millisecond);case"u":case"SSS":return a.num(t.millisecond,3);case"s":return a.num(t.second);case"ss":return a.num(t.second,2);case"uu":return a.num(Math.floor(t.millisecond/10),2);case"uuu":return a.num(Math.floor(t.millisecond/100));case"m":return a.num(t.minute);case"mm":return a.num(t.minute,2);case"h":return a.num(t.hour%12===0?12:t.hour%12);case"hh":return a.num(t.hour%12===0?12:t.hour%12,2);case"H":return a.num(t.hour);case"HH":return a.num(t.hour,2);case"Z":return s({format:"narrow",allowZ:a.opts.allowZ});case"ZZ":return s({format:"short",allowZ:a.opts.allowZ});case"ZZZ":return s({format:"techie",allowZ:a.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:a.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:a.loc.locale});case"z":return t.zoneName;case"a":return l();case"d":return r?o({day:"numeric"},"day"):a.num(t.day);case"dd":return r?o({day:"2-digit"},"day"):a.num(t.day,2);case"c":return a.num(t.weekday);case"ccc":return u("short",!0);case"cccc":return u("long",!0);case"ccccc":return u("narrow",!0);case"E":return a.num(t.weekday);case"EEE":return u("short",!1);case"EEEE":return u("long",!1);case"EEEEE":return u("narrow",!1);case"L":return r?o({month:"numeric",day:"numeric"},"month"):a.num(t.month);case"LL":return r?o({month:"2-digit",day:"numeric"},"month"):a.num(t.month,2);case"LLL":return c("short",!0);case"LLLL":return c("long",!0);case"LLLLL":return c("narrow",!0);case"M":return r?o({month:"numeric"},"month"):a.num(t.month);case"MM":return r?o({month:"2-digit"},"month"):a.num(t.month,2);case"MMM":return c("short",!1);case"MMMM":return c("long",!1);case"MMMMM":return c("narrow",!1);case"y":return r?o({year:"numeric"},"year"):a.num(t.year);case"yy":return r?o({year:"2-digit"},"year"):a.num(t.year.toString().slice(-2),2);case"yyyy":return r?o({year:"numeric"},"year"):a.num(t.year,4);case"yyyyyy":return r?o({year:"numeric"},"year"):a.num(t.year,6);case"G":return h("short");case"GG":return h("long");case"GGGGG":return h("narrow");case"kk":return a.num(t.weekYear.toString().slice(-2),2);case"kkkk":return a.num(t.weekYear,4);case"W":return a.num(t.weekNumber);case"WW":return a.num(t.weekNumber,2);case"o":return a.num(t.ordinal);case"ooo":return a.num(t.ordinal,3);case"q":return a.num(t.quarter);case"qq":return a.num(t.quarter,2);case"X":return a.num(Math.floor(t.ts/1e3));case"x":return a.num(t.ts);default:return function(i){var n=e.macroTokenToFormatOpts(i);return n?a.formatWithSystemDefault(t,n):i}(i)}}))},t.formatDurationFromString=function(t,i){var a,n=this,r=function(e){switch(e[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},o=e.parseFormat(i),s=o.reduce((function(e,t){var i=t.literal,a=t.val;return i?e:e.concat(a)}),[]),l=t.shiftTo.apply(t,s.map(r).filter((function(e){return e})));return ut(o,(a=l,function(e){var t=r(e);return t?n.num(a.get(t),e.length):e}))},e}(),ft=function(){function e(e,t){this.reason=e,this.explanation=t}return e.prototype.toMessage=function(){return this.explanation?this.reason+": "+this.explanation:this.reason},e}(),pt=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function mt(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var a=t.reduce((function(e,t){return e+t.source}),"");return RegExp("^"+a+"$")}function gt(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e){return t.reduce((function(t,i){var a=t[0],n=t[1],o=t[2],s=i(e,o),l=s[0],c=s[1],u=s[2];return[r({},a,l),c||n,u]}),[{},null,1]).slice(0,2)}}function vt(e){if(null==e)return[null,null];for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];for(var n=0,r=i;n<r.length;n++){var o=r[n],s=o[0],l=o[1],c=s.exec(e);if(c)return l(c)}return[null,null]}function yt(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e,i){var a,n={};for(a=0;a<t.length;a++)n[t[a]]=Le(e[i+a]);return[n,null,i+a]}}var xt=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,bt=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,_t=RegExp(""+bt.source+("(?:"+xt.source+"?(?:\\[("+pt.source+")\\])?)?")),wt=RegExp("(?:T"+_t.source+")?"),kt=yt("weekYear","weekNumber","weekDay"),St=yt("year","ordinal"),Ct=RegExp(bt.source+" ?(?:"+xt.source+"|("+pt.source+"))?"),At=RegExp("(?: "+Ct.source+")?");function Ot(e,t,i){var a=e[t];return Oe(a)?i:Le(a)}function Tt(e,t){return[{hours:Ot(e,t,0),minutes:Ot(e,t+1,0),seconds:Ot(e,t+2,0),milliseconds:Re(e[t+3])},null,t+4]}function Mt(e,t){var i=!e[t]&&!e[t+1],a=Xe(e[t+1],e[t+2]);return[{},i?null:ge.instance(a),t+3]}function Et(e,t){return[{},e[t]?te.create(e[t]):null,t+1]}var It=RegExp("^T?"+bt.source+"$"),Pt=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function Dt(e){var t=e[0],i=e[1],a=e[2],n=e[3],r=e[4],o=e[5],s=e[6],l=e[7],c=e[8],u="-"===t[0],h=l&&"-"===l[0],d=function(e,t){return void 0===t&&(t=!1),void 0!==e&&(t||e&&u)?-e:e};return[{years:d(je(i)),months:d(je(a)),weeks:d(je(n)),days:d(je(r)),hours:d(je(o)),minutes:d(je(s)),seconds:d(je(l),"-0"===l),milliseconds:d(Re(c),h)}]}var zt={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Lt(e,t,i,a,n,r,o){var s={year:2===t.length?He(Le(t)):Le(t),month:Qe.indexOf(i)+1,day:Le(a),hour:Le(n),minute:Le(r)};return o&&(s.second=Le(o)),e&&(s.weekday=e.length>3?tt.indexOf(e)+1:it.indexOf(e)+1),s}var jt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Rt(e){var t,i=e[1],a=e[2],n=e[3],r=e[4],o=e[5],s=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11],f=Lt(i,r,n,a,o,s,l);return t=c?zt[c]:u?0:Xe(h,d),[f,new ge(t)]}var Ft=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Bt=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Nt=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Vt(e){var t=e[1],i=e[2],a=e[3];return[Lt(t,e[4],a,i,e[5],e[6],e[7]),ge.utcInstance]}function Yt(e){var t=e[1],i=e[2],a=e[3],n=e[4],r=e[5],o=e[6];return[Lt(t,e[7],i,a,n,r,o),ge.utcInstance]}var Wt=mt(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,wt),Ht=mt(/(\d{4})-?W(\d\d)(?:-?(\d))?/,wt),Ut=mt(/(\d{4})-?(\d{3})/,wt),Xt=mt(_t),Gt=gt((function(e,t){return[{year:Ot(e,t),month:Ot(e,t+1,1),day:Ot(e,t+2,1)},null,t+3]}),Tt,Mt,Et),qt=gt(kt,Tt,Mt,Et),Zt=gt(St,Tt,Mt,Et),Kt=gt(Tt,Mt,Et);var Jt=gt(Tt);var Qt=mt(/(\d{4})-(\d\d)-(\d\d)/,At),$t=mt(Ct),ei=gt(Tt,Mt,Et);var ti={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048e5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864e5},hours:{minutes:60,seconds:3600,milliseconds:36e5},minutes:{seconds:60,milliseconds:6e4},seconds:{milliseconds:1e3}},ii=r({years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536e3,milliseconds:31536e6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624e5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592e3,milliseconds:2592e6}},ti),ai=r({years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:525949.2*60,milliseconds:525949.2*60*1e3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:525949.2*60/4,milliseconds:7889237999.999999},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746e3}},ti),ni=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],ri=ni.slice(0).reverse();function oi(e,t,i){void 0===i&&(i=!1);var a={values:i?t.values:r({},e.values,t.values||{}),loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new li(a)}function si(e,t,i,a,n){var r=e[n][i],o=t[i]/r,s=!(Math.sign(o)===Math.sign(a[n]))&&0!==a[n]&&Math.abs(o)<=1?function(e){return e<0?Math.floor(e):Math.ceil(e)}(o):Math.trunc(o);a[n]+=s,t[i]-=s*r}var li=function(){function e(e){var t="longterm"===e.conversionAccuracy||!1,i=t?ai:ii;e.matrix&&(i=e.matrix),this.values=e.values,this.loc=e.loc||pe.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=i,this.isLuxonDuration=!0}e.fromMillis=function(t,i){return e.fromObject({milliseconds:t},i)},e.fromObject=function(t,i){if(void 0===i&&(i={}),null==t||"object"!==typeof t)throw new w("Duration.fromObject: argument expected to be an object, got "+(null===t?"null":typeof t));return new e({values:qe(t,e.normalizeUnit),loc:pe.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})},e.fromDurationLike=function(t){if(Te(t))return e.fromMillis(t);if(e.isDuration(t))return t;if("object"===typeof t)return e.fromObject(t);throw new w("Unknown duration argument "+t+" of type "+typeof t)},e.fromISO=function(t,i){var a=function(e){return vt(e,[Pt,Dt])}(t)[0];return a?e.fromObject(a,i):e.invalid("unparsable",'the input "'+t+"\" can't be parsed as ISO 8601")},e.fromISOTime=function(t,i){var a=function(e){return vt(e,[It,Jt])}(t)[0];return a?e.fromObject(a,i):e.invalid("unparsable",'the input "'+t+"\" can't be parsed as ISO 8601")},e.invalid=function(t,i){if(void 0===i&&(i=null),!t)throw new w("need to specify a reason the Duration is invalid");var a=t instanceof ft?t:new ft(t,i);if(Ae.throwOnInvalid)throw new x(a);return new e({invalid:a})},e.normalizeUnit=function(e){var t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e?e.toLowerCase():e];if(!t)throw new _(e);return t},e.isDuration=function(e){return e&&e.isLuxonDuration||!1};var t=e.prototype;return t.toFormat=function(e,t){void 0===t&&(t={});var i=r({},t,{floor:!1!==t.round&&!1!==t.floor});return this.isValid?dt.create(this.loc,i).formatDurationFromString(this,e):"Invalid Duration"},t.toHuman=function(e){var t=this;void 0===e&&(e={});var i=ni.map((function(i){var a=t.values[i];return Oe(a)?null:t.loc.numberFormatter(r({style:"unit",unitDisplay:"long"},e,{unit:i.slice(0,-1)})).format(a)})).filter((function(e){return e}));return this.loc.listFormatter(r({type:"conjunction",style:e.listStyle||"narrow"},e)).format(i)},t.toObject=function(){return this.isValid?r({},this.values):{}},t.toISO=function(){if(!this.isValid)return null;var e="P";return 0!==this.years&&(e+=this.years+"Y"),0===this.months&&0===this.quarters||(e+=this.months+3*this.quarters+"M"),0!==this.weeks&&(e+=this.weeks+"W"),0!==this.days&&(e+=this.days+"D"),0===this.hours&&0===this.minutes&&0===this.seconds&&0===this.milliseconds||(e+="T"),0!==this.hours&&(e+=this.hours+"H"),0!==this.minutes&&(e+=this.minutes+"M"),0===this.seconds&&0===this.milliseconds||(e+=Fe(this.seconds+this.milliseconds/1e3,3)+"S"),"P"===e&&(e+="T0S"),e},t.toISOTime=function(e){if(void 0===e&&(e={}),!this.isValid)return null;var t=this.toMillis();if(t<0||t>=864e5)return null;e=r({suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended"},e);var i=this.shiftTo("hours","minutes","seconds","milliseconds"),a="basic"===e.format?"hhmm":"hh:mm";e.suppressSeconds&&0===i.seconds&&0===i.milliseconds||(a+="basic"===e.format?"ss":":ss",e.suppressMilliseconds&&0===i.milliseconds||(a+=".SSS"));var n=i.toFormat(a);return e.includePrefix&&(n="T"+n),n},t.toJSON=function(){return this.toISO()},t.toString=function(){return this.toISO()},t.toMillis=function(){return this.as("milliseconds")},t.valueOf=function(){return this.toMillis()},t.plus=function(t){if(!this.isValid)return this;for(var i=e.fromDurationLike(t),a={},n=0,r=ni;n<r.length;n++){var o=r[n];(Pe(i.values,o)||Pe(this.values,o))&&(a[o]=i.get(o)+this.get(o))}return oi(this,{values:a},!0)},t.minus=function(t){if(!this.isValid)return this;var i=e.fromDurationLike(t);return this.plus(i.negate())},t.mapUnits=function(e){if(!this.isValid)return this;for(var t={},i=0,a=Object.keys(this.values);i<a.length;i++){var n=a[i];t[n]=Ge(e(this.values[n],n))}return oi(this,{values:t},!0)},t.get=function(t){return this[e.normalizeUnit(t)]},t.set=function(t){return this.isValid?oi(this,{values:r({},this.values,qe(t,e.normalizeUnit))}):this},t.reconfigure=function(e){var t=void 0===e?{}:e,i=t.locale,a=t.numberingSystem,n=t.conversionAccuracy,r=t.matrix;return oi(this,{loc:this.loc.clone({locale:i,numberingSystem:a}),matrix:r,conversionAccuracy:n})},t.as=function(e){return this.isValid?this.shiftTo(e).get(e):NaN},t.normalize=function(){if(!this.isValid)return this;var e=this.toObject();return function(e,t){ri.reduce((function(i,a){return Oe(t[a])?i:(i&&si(e,t,i,t,a),a)}),null)}(this.matrix,e),oi(this,{values:e},!0)},t.rescale=function(){return this.isValid?oi(this,{values:function(e){for(var t={},i=0,a=Object.entries(e);i<a.length;i++){var n=a[i],r=n[0],o=n[1];0!==o&&(t[r]=o)}return t}(this.normalize().shiftToAll().toObject())},!0):this},t.shiftTo=function(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];if(!this.isValid)return this;if(0===i.length)return this;i=i.map((function(t){return e.normalizeUnit(t)}));for(var n,r={},o={},s=this.toObject(),l=0,c=ni;l<c.length;l++){var u=c[l];if(i.indexOf(u)>=0){n=u;var h=0;for(var d in o)h+=this.matrix[d][u]*o[d],o[d]=0;Te(s[u])&&(h+=s[u]);var f=Math.trunc(h);for(var p in r[u]=f,o[u]=(1e3*h-1e3*f)/1e3,s)ni.indexOf(p)>ni.indexOf(u)&&si(this.matrix,s,p,r,u)}else Te(s[u])&&(o[u]=s[u])}for(var m in o)0!==o[m]&&(r[n]+=m===n?o[m]:o[m]/this.matrix[n][m]);return oi(this,{values:r},!0).normalize()},t.shiftToAll=function(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this},t.negate=function(){if(!this.isValid)return this;for(var e={},t=0,i=Object.keys(this.values);t<i.length;t++){var a=i[t];e[a]=0===this.values[a]?0:-this.values[a]}return oi(this,{values:e},!0)},t.equals=function(e){if(!this.isValid||!e.isValid)return!1;if(!this.loc.equals(e.loc))return!1;for(var t=0,i=ni;t<i.length;t++){var a=i[t];if(n=this.values[a],r=e.values[a],!(void 0===n||0===n?void 0===r||0===r:n===r))return!1}var n,r;return!0},n(e,[{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"years",get:function(){return this.isValid?this.values.years||0:NaN}},{key:"quarters",get:function(){return this.isValid?this.values.quarters||0:NaN}},{key:"months",get:function(){return this.isValid?this.values.months||0:NaN}},{key:"weeks",get:function(){return this.isValid?this.values.weeks||0:NaN}},{key:"days",get:function(){return this.isValid?this.values.days||0:NaN}},{key:"hours",get:function(){return this.isValid?this.values.hours||0:NaN}},{key:"minutes",get:function(){return this.isValid?this.values.minutes||0:NaN}},{key:"seconds",get:function(){return this.isValid?this.values.seconds||0:NaN}},{key:"milliseconds",get:function(){return this.isValid?this.values.milliseconds||0:NaN}},{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]),e}(),ci="Invalid Interval";function ui(e,t){return e&&e.isValid?t&&t.isValid?t<e?hi.invalid("end before start","The end of an interval must be after its start, but you had start="+e.toISO()+" and end="+t.toISO()):null:hi.invalid("missing or invalid end"):hi.invalid("missing or invalid start")}var hi=function(){function e(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}e.invalid=function(t,i){if(void 0===i&&(i=null),!t)throw new w("need to specify a reason the Interval is invalid");var a=t instanceof ft?t:new ft(t,i);if(Ae.throwOnInvalid)throw new y(a);return new e({invalid:a})},e.fromDateTimes=function(t,i){var a=fa(t),n=fa(i),r=ui(a,n);return null==r?new e({start:a,end:n}):r},e.after=function(t,i){var a=li.fromDurationLike(i),n=fa(t);return e.fromDateTimes(n,n.plus(a))},e.before=function(t,i){var a=li.fromDurationLike(i),n=fa(t);return e.fromDateTimes(n.minus(a),n)},e.fromISO=function(t,i){var a=(t||"").split("/",2),n=a[0],r=a[1];if(n&&r){var o,s,l,c;try{s=(o=da.fromISO(n,i)).isValid}catch(r){s=!1}try{c=(l=da.fromISO(r,i)).isValid}catch(r){c=!1}if(s&&c)return e.fromDateTimes(o,l);if(s){var u=li.fromISO(r,i);if(u.isValid)return e.after(o,u)}else if(c){var h=li.fromISO(n,i);if(h.isValid)return e.before(l,h)}}return e.invalid("unparsable",'the input "'+t+"\" can't be parsed as ISO 8601")},e.isInterval=function(e){return e&&e.isLuxonInterval||!1};var t=e.prototype;return t.length=function(e){return void 0===e&&(e="milliseconds"),this.isValid?this.toDuration.apply(this,[e]).get(e):NaN},t.count=function(e){if(void 0===e&&(e="milliseconds"),!this.isValid)return NaN;var t=this.start.startOf(e),i=this.end.startOf(e);return Math.floor(i.diff(t,e).get(e))+(i.valueOf()!==this.end.valueOf())},t.hasSame=function(e){return!!this.isValid&&(this.isEmpty()||this.e.minus(1).hasSame(this.s,e))},t.isEmpty=function(){return this.s.valueOf()===this.e.valueOf()},t.isAfter=function(e){return!!this.isValid&&this.s>e},t.isBefore=function(e){return!!this.isValid&&this.e<=e},t.contains=function(e){return!!this.isValid&&(this.s<=e&&this.e>e)},t.set=function(t){var i=void 0===t?{}:t,a=i.start,n=i.end;return this.isValid?e.fromDateTimes(a||this.s,n||this.e):this},t.splitAt=function(){var t=this;if(!this.isValid)return[];for(var i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];for(var r=a.map(fa).filter((function(e){return t.contains(e)})).sort(),o=[],s=this.s,l=0;s<this.e;){var c=r[l]||this.e,u=+c>+this.e?this.e:c;o.push(e.fromDateTimes(s,u)),s=u,l+=1}return o},t.splitBy=function(t){var i=li.fromDurationLike(t);if(!this.isValid||!i.isValid||0===i.as("milliseconds"))return[];for(var a,n=this.s,r=1,o=[];n<this.e;){var s=this.start.plus(i.mapUnits((function(e){return e*r})));a=+s>+this.e?this.e:s,o.push(e.fromDateTimes(n,a)),n=a,r+=1}return o},t.divideEqually=function(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]},t.overlaps=function(e){return this.e>e.s&&this.s<e.e},t.abutsStart=function(e){return!!this.isValid&&+this.e===+e.s},t.abutsEnd=function(e){return!!this.isValid&&+e.e===+this.s},t.engulfs=function(e){return!!this.isValid&&(this.s<=e.s&&this.e>=e.e)},t.equals=function(e){return!(!this.isValid||!e.isValid)&&(this.s.equals(e.s)&&this.e.equals(e.e))},t.intersection=function(t){if(!this.isValid)return this;var i=this.s>t.s?this.s:t.s,a=this.e<t.e?this.e:t.e;return i>=a?null:e.fromDateTimes(i,a)},t.union=function(t){if(!this.isValid)return this;var i=this.s<t.s?this.s:t.s,a=this.e>t.e?this.e:t.e;return e.fromDateTimes(i,a)},e.merge=function(e){var t=e.sort((function(e,t){return e.s-t.s})).reduce((function(e,t){var i=e[0],a=e[1];return a?a.overlaps(t)||a.abutsStart(t)?[i,a.union(t)]:[i.concat([a]),t]:[i,t]}),[[],null]),i=t[0],a=t[1];return a&&i.push(a),i},e.xor=function(t){for(var i,a,n=null,r=0,o=[],s=t.map((function(e){return[{time:e.s,type:"s"},{time:e.e,type:"e"}]})),l=p((i=Array.prototype).concat.apply(i,s).sort((function(e,t){return e.time-t.time})));!(a=l()).done;){var c=a.value;1===(r+="s"===c.type?1:-1)?n=c.time:(n&&+n!==+c.time&&o.push(e.fromDateTimes(n,c.time)),n=null)}return e.merge(o)},t.difference=function(){for(var t=this,i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];return e.xor([this].concat(a)).map((function(e){return t.intersection(e)})).filter((function(e){return e&&!e.isEmpty()}))},t.toString=function(){return this.isValid?"["+this.s.toISO()+" \u2013 "+this.e.toISO()+")":ci},t.toLocaleString=function(e,t){return void 0===e&&(e=O),void 0===t&&(t={}),this.isValid?dt.create(this.s.loc.clone(t),e).formatInterval(this):ci},t.toISO=function(e){return this.isValid?this.s.toISO(e)+"/"+this.e.toISO(e):ci},t.toISODate=function(){return this.isValid?this.s.toISODate()+"/"+this.e.toISODate():ci},t.toISOTime=function(e){return this.isValid?this.s.toISOTime(e)+"/"+this.e.toISOTime(e):ci},t.toFormat=function(e,t){var i=(void 0===t?{}:t).separator,a=void 0===i?" \u2013 ":i;return this.isValid?""+this.s.toFormat(e)+a+this.e.toFormat(e):ci},t.toDuration=function(e,t){return this.isValid?this.e.diff(this.s,e,t):li.invalid(this.invalidReason)},t.mapEndpoints=function(t){return e.fromDateTimes(t(this.s),t(this.e))},n(e,[{key:"start",get:function(){return this.isValid?this.s:null}},{key:"end",get:function(){return this.isValid?this.e:null}},{key:"isValid",get:function(){return null===this.invalidReason}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]),e}(),di=function(){function e(){}return e.hasDST=function(e){void 0===e&&(e=Ae.defaultZone);var t=da.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset},e.isValidIANAZone=function(e){return te.isValidZone(e)},e.normalizeZone=function(e){return ye(e,Ae.defaultZone)},e.months=function(e,t){void 0===e&&(e="long");var i=void 0===t?{}:t,a=i.locale,n=void 0===a?null:a,r=i.numberingSystem,o=void 0===r?null:r,s=i.locObj,l=void 0===s?null:s,c=i.outputCalendar,u=void 0===c?"gregory":c;return(l||pe.create(n,o,u)).months(e)},e.monthsFormat=function(e,t){void 0===e&&(e="long");var i=void 0===t?{}:t,a=i.locale,n=void 0===a?null:a,r=i.numberingSystem,o=void 0===r?null:r,s=i.locObj,l=void 0===s?null:s,c=i.outputCalendar,u=void 0===c?"gregory":c;return(l||pe.create(n,o,u)).months(e,!0)},e.weekdays=function(e,t){void 0===e&&(e="long");var i=void 0===t?{}:t,a=i.locale,n=void 0===a?null:a,r=i.numberingSystem,o=void 0===r?null:r,s=i.locObj;return((void 0===s?null:s)||pe.create(n,o,null)).weekdays(e)},e.weekdaysFormat=function(e,t){void 0===e&&(e="long");var i=void 0===t?{}:t,a=i.locale,n=void 0===a?null:a,r=i.numberingSystem,o=void 0===r?null:r,s=i.locObj;return((void 0===s?null:s)||pe.create(n,o,null)).weekdays(e,!0)},e.meridiems=function(e){var t=(void 0===e?{}:e).locale,i=void 0===t?null:t;return pe.create(i).meridiems()},e.eras=function(e,t){void 0===e&&(e="short");var i=(void 0===t?{}:t).locale,a=void 0===i?null:i;return pe.create(a,null,"gregory").eras(e)},e.features=function(){return{relative:Ee()}},e}();function fi(e,t){var i=function(e){return e.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()},a=i(t)-i(e);return Math.floor(li.fromMillis(a).as("days"))}function pi(e,t,i,a){var n=function(e,t,i){for(var a,n,r={},o=e,s=0,l=[["years",function(e,t){return t.year-e.year}],["quarters",function(e,t){return t.quarter-e.quarter+4*(t.year-e.year)}],["months",function(e,t){return t.month-e.month+12*(t.year-e.year)}],["weeks",function(e,t){var i=fi(e,t);return(i-i%7)/7}],["days",fi]];s<l.length;s++){var c=l[s],u=c[0],h=c[1];i.indexOf(u)>=0&&(a=u,r[u]=h(e,t),(n=o.plus(r))>t?(r[u]--,e=o.plus(r)):e=n)}return[e,r,n,a]}(e,t,i),r=n[0],o=n[1],s=n[2],l=n[3],c=t-r,u=i.filter((function(e){return["hours","minutes","seconds","milliseconds"].indexOf(e)>=0}));if(0===u.length){var h;if(s<t)s=r.plus(((h={})[l]=1,h));s!==r&&(o[l]=(o[l]||0)+c/(s-r))}var d,f=li.fromObject(o,a);return u.length>0?(d=li.fromMillis(c,a)).shiftTo.apply(d,u).plus(f):f}var mi={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",latn:"\\d"},gi={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},vi=mi.hanidec.replace(/[\[|\]]/g,"").split("");function yi(e,t){var i=e.numberingSystem;return void 0===t&&(t=""),new RegExp(""+mi[i||"latn"]+t)}function xi(e,t){return void 0===t&&(t=function(e){return e}),{regex:e,deser:function(e){var i=e[0];return t(function(e){var t=parseInt(e,10);if(isNaN(t)){t="";for(var i=0;i<e.length;i++){var a=e.charCodeAt(i);if(-1!==e[i].search(mi.hanidec))t+=vi.indexOf(e[i]);else for(var n in gi){var r=gi[n],o=r[0],s=r[1];a>=o&&a<=s&&(t+=a-o)}}return parseInt(t,10)}return t}(i))}}}var bi="[ "+String.fromCharCode(160)+"]",_i=new RegExp(bi,"g");function wi(e){return e.replace(/\./g,"\\.?").replace(_i,bi)}function ki(e){return e.replace(/\./g,"").replace(_i," ").toLowerCase()}function Si(e,t){return null===e?null:{regex:RegExp(e.map(wi).join("|")),deser:function(i){var a=i[0];return e.findIndex((function(e){return ki(a)===ki(e)}))+t}}}function Ci(e,t){return{regex:e,deser:function(e){return Xe(e[1],e[2])},groups:t}}function Ai(e){return{regex:e,deser:function(e){return e[0]}}}var Oi={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};var Ti=null;function Mi(e,t){var i;return(i=Array.prototype).concat.apply(i,e.map((function(e){return function(e,t){if(e.literal)return e;var i=Ii(dt.macroTokenToFormatOpts(e.val),t);return null==i||i.includes(void 0)?e:i}(e,t)})))}function Ei(e,t,i){var a=Mi(dt.parseFormat(i),e),n=a.map((function(t){return function(e,t){var i=yi(t),a=yi(t,"{2}"),n=yi(t,"{3}"),r=yi(t,"{4}"),o=yi(t,"{6}"),s=yi(t,"{1,2}"),l=yi(t,"{1,3}"),c=yi(t,"{1,6}"),u=yi(t,"{1,9}"),h=yi(t,"{2,4}"),d=yi(t,"{4,6}"),f=function(e){return{regex:RegExp((t=e.val,t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"))),deser:function(e){return e[0]},literal:!0};var t},p=function(p){if(e.literal)return f(p);switch(p.val){case"G":return Si(t.eras("short",!1),0);case"GG":return Si(t.eras("long",!1),0);case"y":return xi(c);case"yy":return xi(h,He);case"yyyy":return xi(r);case"yyyyy":return xi(d);case"yyyyyy":return xi(o);case"M":return xi(s);case"MM":return xi(a);case"MMM":return Si(t.months("short",!0,!1),1);case"MMMM":return Si(t.months("long",!0,!1),1);case"L":return xi(s);case"LL":return xi(a);case"LLL":return Si(t.months("short",!1,!1),1);case"LLLL":return Si(t.months("long",!1,!1),1);case"d":return xi(s);case"dd":return xi(a);case"o":return xi(l);case"ooo":return xi(n);case"HH":return xi(a);case"H":return xi(s);case"hh":return xi(a);case"h":return xi(s);case"mm":return xi(a);case"m":case"q":return xi(s);case"qq":return xi(a);case"s":return xi(s);case"ss":return xi(a);case"S":return xi(l);case"SSS":return xi(n);case"u":return Ai(u);case"uu":return Ai(s);case"uuu":return xi(i);case"a":return Si(t.meridiems(),0);case"kkkk":return xi(r);case"kk":return xi(h,He);case"W":return xi(s);case"WW":return xi(a);case"E":case"c":return xi(i);case"EEE":return Si(t.weekdays("short",!1,!1),1);case"EEEE":return Si(t.weekdays("long",!1,!1),1);case"ccc":return Si(t.weekdays("short",!0,!1),1);case"cccc":return Si(t.weekdays("long",!0,!1),1);case"Z":case"ZZ":return Ci(new RegExp("([+-]"+s.source+")(?::("+a.source+"))?"),2);case"ZZZ":return Ci(new RegExp("([+-]"+s.source+")("+a.source+")?"),2);case"z":return Ai(/[a-z_+-/]{1,256}?/i);case" ":return Ai(/[^\S\n\r]/);default:return f(p)}}(e)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};return p.token=e,p}(t,e)})),r=n.find((function(e){return e.invalidReason}));if(r)return{input:t,tokens:a,invalidReason:r.invalidReason};var o=function(e){return["^"+e.map((function(e){return e.regex})).reduce((function(e,t){return e+"("+t.source+")"}),"")+"$",e]}(n),s=o[0],l=o[1],c=RegExp(s,"i"),u=function(e,t,i){var a=e.match(t);if(a){var n={},r=1;for(var o in i)if(Pe(i,o)){var s=i[o],l=s.groups?s.groups+1:1;!s.literal&&s.token&&(n[s.token.val[0]]=s.deser(a.slice(r,r+l))),r+=l}return[a,n]}return[a,{}]}(t,c,l),h=u[0],d=u[1],f=d?function(e){var t,i=null;return Oe(e.z)||(i=te.create(e.z)),Oe(e.Z)||(i||(i=new ge(e.Z)),t=e.Z),Oe(e.q)||(e.M=3*(e.q-1)+1),Oe(e.h)||(e.h<12&&1===e.a?e.h+=12:12===e.h&&0===e.a&&(e.h=0)),0===e.G&&e.y&&(e.y=-e.y),Oe(e.u)||(e.S=Re(e.u)),[Object.keys(e).reduce((function(t,i){var a=function(e){switch(e){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}}(i);return a&&(t[a]=e[i]),t}),{}),i,t]}(d):[null,null,void 0],p=f[0],m=f[1],g=f[2];if(Pe(d,"a")&&Pe(d,"H"))throw new b("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:a,regex:c,rawMatches:h,matches:d,result:p,zone:m,specificOffset:g}}function Ii(e,t){return e?dt.create(t,e).formatDateTimeParts((Ti||(Ti=da.fromMillis(1555555555555)),Ti)).map((function(t){return function(e,t){var i=e.type,a=e.value;if("literal"===i){var n=/^\s+$/.test(a);return{literal:!n,val:n?" ":a}}var r=t[i],o=Oi[i];if("object"===typeof o&&(o=o[r]),o)return{literal:!1,val:o}}(t,e)})):null}var Pi=[0,31,59,90,120,151,181,212,243,273,304,334],Di=[0,31,60,91,121,152,182,213,244,274,305,335];function zi(e,t){return new ft("unit out of range","you specified "+t+" (of type "+typeof t+") as a "+e+", which is invalid")}function Li(e,t,i){var a=new Date(Date.UTC(e,t-1,i));e<100&&e>=0&&a.setUTCFullYear(a.getUTCFullYear()-1900);var n=a.getUTCDay();return 0===n?7:n}function ji(e,t,i){return i+(Be(e)?Di:Pi)[t-1]}function Ri(e,t){var i=Be(e)?Di:Pi,a=i.findIndex((function(e){return e<t}));return{month:a+1,day:t-i[a]}}function Fi(e){var t,i=e.year,a=e.month,n=e.day,o=ji(i,a,n),s=Li(i,a,n),l=Math.floor((o-s+10)/7);return l<1?l=We(t=i-1):l>We(i)?(t=i+1,l=1):t=i,r({weekYear:t,weekNumber:l,weekday:s},Ke(e))}function Bi(e){var t,i=e.weekYear,a=e.weekNumber,n=e.weekday,o=Li(i,1,4),s=Ne(i),l=7*a+n-o-3;l<1?l+=Ne(t=i-1):l>s?(t=i+1,l-=Ne(i)):t=i;var c=Ri(t,l);return r({year:t,month:c.month,day:c.day},Ke(e))}function Ni(e){var t=e.year;return r({year:t,ordinal:ji(t,e.month,e.day)},Ke(e))}function Vi(e){var t=e.year,i=Ri(t,e.ordinal);return r({year:t,month:i.month,day:i.day},Ke(e))}function Yi(e){var t=Me(e.year),i=De(e.month,1,12),a=De(e.day,1,Ve(e.year,e.month));return t?i?!a&&zi("day",e.day):zi("month",e.month):zi("year",e.year)}function Wi(e){var t=e.hour,i=e.minute,a=e.second,n=e.millisecond,r=De(t,0,23)||24===t&&0===i&&0===a&&0===n,o=De(i,0,59),s=De(a,0,59),l=De(n,0,999);return r?o?s?!l&&zi("millisecond",n):zi("second",a):zi("minute",i):zi("hour",t)}var Hi="Invalid DateTime";function Ui(e){return new ft("unsupported zone",'the zone "'+e.name+'" is not supported')}function Xi(e){return null===e.weekData&&(e.weekData=Fi(e.c)),e.weekData}function Gi(e,t){var i={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new da(r({},i,t,{old:i}))}function qi(e,t,i){var a=e-60*t*1e3,n=i.offset(a);if(t===n)return[a,t];a-=60*(n-t)*1e3;var r=i.offset(a);return n===r?[a,n]:[e-60*Math.min(n,r)*1e3,Math.max(n,r)]}function Zi(e,t){var i=new Date(e+=60*t*1e3);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function Ki(e,t,i){return qi(Ye(e),t,i)}function Ji(e,t){var i=e.o,a=e.c.year+Math.trunc(t.years),n=e.c.month+Math.trunc(t.months)+3*Math.trunc(t.quarters),o=r({},e.c,{year:a,month:n,day:Math.min(e.c.day,Ve(a,n))+Math.trunc(t.days)+7*Math.trunc(t.weeks)}),s=li.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),l=qi(Ye(o),i,e.zone),c=l[0],u=l[1];return 0!==s&&(c+=s,u=e.zone.offset(c)),{ts:c,o:u}}function Qi(e,t,i,a,n,o){var s=i.setZone,l=i.zone;if(e&&0!==Object.keys(e).length||t){var c=t||l,u=da.fromObject(e,r({},i,{zone:c,specificOffset:o}));return s?u:u.setZone(l)}return da.invalid(new ft("unparsable",'the input "'+n+"\" can't be parsed as "+a))}function $i(e,t,i){return void 0===i&&(i=!0),e.isValid?dt.create(pe.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(e,t):null}function ea(e,t){var i=e.c.year>9999||e.c.year<0,a="";return i&&e.c.year>=0&&(a+="+"),a+=ze(e.c.year,i?6:4),t?(a+="-",a+=ze(e.c.month),a+="-",a+=ze(e.c.day)):(a+=ze(e.c.month),a+=ze(e.c.day)),a}function ta(e,t,i,a,n,r){var o=ze(e.c.hour);return t?(o+=":",o+=ze(e.c.minute),0===e.c.second&&i||(o+=":")):o+=ze(e.c.minute),0===e.c.second&&i||(o+=ze(e.c.second),0===e.c.millisecond&&a||(o+=".",o+=ze(e.c.millisecond,3))),n&&(e.isOffsetFixed&&0===e.offset&&!r?o+="Z":e.o<0?(o+="-",o+=ze(Math.trunc(-e.o/60)),o+=":",o+=ze(Math.trunc(-e.o%60))):(o+="+",o+=ze(Math.trunc(e.o/60)),o+=":",o+=ze(Math.trunc(e.o%60)))),r&&(o+="["+e.zone.ianaName+"]"),o}var ia={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},aa={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},na={ordinal:1,hour:0,minute:0,second:0,millisecond:0},ra=["year","month","day","hour","minute","second","millisecond"],oa=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],sa=["year","ordinal","hour","minute","second","millisecond"];function la(e){var t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new _(e);return t}function ca(e,t){var i,a,n=ye(t.zone,Ae.defaultZone),r=pe.fromObject(t),o=Ae.now();if(Oe(e.year))i=o;else{for(var s=0,l=ra;s<l.length;s++){var c=l[s];Oe(e[c])&&(e[c]=ia[c])}var u=Yi(e)||Wi(e);if(u)return da.invalid(u);var h=Ki(e,n.offset(o),n);i=h[0],a=h[1]}return new da({ts:i,zone:n,loc:r,o:a})}function ua(e,t,i){var a=!!Oe(i.round)||i.round,n=function(e,n){return e=Fe(e,a||i.calendary?0:2,!0),t.loc.clone(i).relFormatter(i).format(e,n)},r=function(a){return i.calendary?t.hasSame(e,a)?0:t.startOf(a).diff(e.startOf(a),a).get(a):t.diff(e,a).get(a)};if(i.unit)return n(r(i.unit),i.unit);for(var o,s=p(i.units);!(o=s()).done;){var l=o.value,c=r(l);if(Math.abs(c)>=1)return n(c,l)}return n(e>t?-0:0,i.units[i.units.length-1])}function ha(e){var t,i={};return e.length>0&&"object"===typeof e[e.length-1]?(i=e[e.length-1],t=Array.from(e).slice(0,e.length-1)):t=Array.from(e),[i,t]}var da=function(){function e(e){var t=e.zone||Ae.defaultZone,i=e.invalid||(Number.isNaN(e.ts)?new ft("invalid input"):null)||(t.isValid?null:Ui(t));this.ts=Oe(e.ts)?Ae.now():e.ts;var a=null,n=null;if(!i)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t)){var r=[e.old.c,e.old.o];a=r[0],n=r[1]}else{var o=t.offset(this.ts);a=Zi(this.ts,o),a=(i=Number.isNaN(a.year)?new ft("invalid input"):null)?null:a,n=i?null:o}this._zone=t,this.loc=e.loc||pe.create(),this.invalid=i,this.weekData=null,this.c=a,this.o=n,this.isLuxonDateTime=!0}e.now=function(){return new e({})},e.local=function(){var e=ha(arguments),t=e[0],i=e[1],a=i[0],n=i[1],r=i[2],o=i[3],s=i[4],l=i[5],c=i[6];return ca({year:a,month:n,day:r,hour:o,minute:s,second:l,millisecond:c},t)},e.utc=function(){var e=ha(arguments),t=e[0],i=e[1],a=i[0],n=i[1],r=i[2],o=i[3],s=i[4],l=i[5],c=i[6];return t.zone=ge.utcInstance,ca({year:a,month:n,day:r,hour:o,minute:s,second:l,millisecond:c},t)},e.fromJSDate=function(t,i){void 0===i&&(i={});var a,n=(a=t,"[object Date]"===Object.prototype.toString.call(a)?t.valueOf():NaN);if(Number.isNaN(n))return e.invalid("invalid input");var r=ye(i.zone,Ae.defaultZone);return r.isValid?new e({ts:n,zone:r,loc:pe.fromObject(i)}):e.invalid(Ui(r))},e.fromMillis=function(t,i){if(void 0===i&&(i={}),Te(t))return t<-864e13||t>864e13?e.invalid("Timestamp out of range"):new e({ts:t,zone:ye(i.zone,Ae.defaultZone),loc:pe.fromObject(i)});throw new w("fromMillis requires a numerical input, but received a "+typeof t+" with value "+t)},e.fromSeconds=function(t,i){if(void 0===i&&(i={}),Te(t))return new e({ts:1e3*t,zone:ye(i.zone,Ae.defaultZone),loc:pe.fromObject(i)});throw new w("fromSeconds requires a numerical input")},e.fromObject=function(t,i){void 0===i&&(i={}),t=t||{};var a=ye(i.zone,Ae.defaultZone);if(!a.isValid)return e.invalid(Ui(a));var n=Ae.now(),r=Oe(i.specificOffset)?a.offset(n):i.specificOffset,o=qe(t,la),s=!Oe(o.ordinal),l=!Oe(o.year),c=!Oe(o.month)||!Oe(o.day),u=l||c,h=o.weekYear||o.weekNumber,d=pe.fromObject(i);if((u||s)&&h)throw new b("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&s)throw new b("Can't mix ordinal dates with month/day");var f,m,g=h||o.weekday&&!u,v=Zi(n,r);g?(f=oa,m=aa,v=Fi(v)):s?(f=sa,m=na,v=Ni(v)):(f=ra,m=ia);for(var y,x=!1,_=p(f);!(y=_()).done;){var w=y.value;Oe(o[w])?o[w]=x?m[w]:v[w]:x=!0}var k=(g?function(e){var t=Me(e.weekYear),i=De(e.weekNumber,1,We(e.weekYear)),a=De(e.weekday,1,7);return t?i?!a&&zi("weekday",e.weekday):zi("week",e.week):zi("weekYear",e.weekYear)}(o):s?function(e){var t=Me(e.year),i=De(e.ordinal,1,Ne(e.year));return t?!i&&zi("ordinal",e.ordinal):zi("year",e.year)}(o):Yi(o))||Wi(o);if(k)return e.invalid(k);var S=Ki(g?Bi(o):s?Vi(o):o,r,a),C=new e({ts:S[0],zone:a,o:S[1],loc:d});return o.weekday&&u&&t.weekday!==C.weekday?e.invalid("mismatched weekday","you can't specify both a weekday of "+o.weekday+" and a date of "+C.toISO()):C},e.fromISO=function(e,t){void 0===t&&(t={});var i=function(e){return vt(e,[Wt,Gt],[Ht,qt],[Ut,Zt],[Xt,Kt])}(e);return Qi(i[0],i[1],t,"ISO 8601",e)},e.fromRFC2822=function(e,t){void 0===t&&(t={});var i=function(e){return vt(function(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(e),[jt,Rt])}(e);return Qi(i[0],i[1],t,"RFC 2822",e)},e.fromHTTP=function(e,t){void 0===t&&(t={});var i=function(e){return vt(e,[Ft,Vt],[Bt,Vt],[Nt,Yt])}(e);return Qi(i[0],i[1],t,"HTTP",t)},e.fromFormat=function(t,i,a){if(void 0===a&&(a={}),Oe(t)||Oe(i))throw new w("fromFormat requires an input string and a format");var n=a,r=n.locale,o=void 0===r?null:r,s=n.numberingSystem,l=void 0===s?null:s,c=function(e,t,i){var a=Ei(e,t,i);return[a.result,a.zone,a.specificOffset,a.invalidReason]}(pe.fromOpts({locale:o,numberingSystem:l,defaultToEN:!0}),t,i),u=c[0],h=c[1],d=c[2],f=c[3];return f?e.invalid(f):Qi(u,h,a,"format "+i,t,d)},e.fromString=function(t,i,a){return void 0===a&&(a={}),e.fromFormat(t,i,a)},e.fromSQL=function(e,t){void 0===t&&(t={});var i=function(e){return vt(e,[Qt,Gt],[$t,ei])}(e);return Qi(i[0],i[1],t,"SQL",e)},e.invalid=function(t,i){if(void 0===i&&(i=null),!t)throw new w("need to specify a reason the DateTime is invalid");var a=t instanceof ft?t:new ft(t,i);if(Ae.throwOnInvalid)throw new v(a);return new e({invalid:a})},e.isDateTime=function(e){return e&&e.isLuxonDateTime||!1},e.parseFormatForOpts=function(e,t){void 0===t&&(t={});var i=Ii(e,pe.fromObject(t));return i?i.map((function(e){return e?e.val:null})).join(""):null},e.expandFormat=function(e,t){return void 0===t&&(t={}),Mi(dt.parseFormat(e),pe.fromObject(t)).map((function(e){return e.val})).join("")};var t=e.prototype;return t.get=function(e){return this[e]},t.resolvedLocaleOptions=function(e){void 0===e&&(e={});var t=dt.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t.locale,numberingSystem:t.numberingSystem,outputCalendar:t.calendar}},t.toUTC=function(e,t){return void 0===e&&(e=0),void 0===t&&(t={}),this.setZone(ge.instance(e),t)},t.toLocal=function(){return this.setZone(Ae.defaultZone)},t.setZone=function(t,i){var a=void 0===i?{}:i,n=a.keepLocalTime,r=void 0!==n&&n,o=a.keepCalendarTime,s=void 0!==o&&o;if((t=ye(t,Ae.defaultZone)).equals(this.zone))return this;if(t.isValid){var l=this.ts;if(r||s){var c=t.offset(this.ts);l=Ki(this.toObject(),c,t)[0]}return Gi(this,{ts:l,zone:t})}return e.invalid(Ui(t))},t.reconfigure=function(e){var t=void 0===e?{}:e,i=t.locale,a=t.numberingSystem,n=t.outputCalendar;return Gi(this,{loc:this.loc.clone({locale:i,numberingSystem:a,outputCalendar:n})})},t.setLocale=function(e){return this.reconfigure({locale:e})},t.set=function(e){if(!this.isValid)return this;var t,i=qe(e,la),a=!Oe(i.weekYear)||!Oe(i.weekNumber)||!Oe(i.weekday),n=!Oe(i.ordinal),o=!Oe(i.year),s=!Oe(i.month)||!Oe(i.day),l=o||s,c=i.weekYear||i.weekNumber;if((l||n)&&c)throw new b("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(s&&n)throw new b("Can't mix ordinal dates with month/day");a?t=Bi(r({},Fi(this.c),i)):Oe(i.ordinal)?(t=r({},this.toObject(),i),Oe(i.day)&&(t.day=Math.min(Ve(t.year,t.month),t.day))):t=Vi(r({},Ni(this.c),i));var u=Ki(t,this.o,this.zone);return Gi(this,{ts:u[0],o:u[1]})},t.plus=function(e){return this.isValid?Gi(this,Ji(this,li.fromDurationLike(e))):this},t.minus=function(e){return this.isValid?Gi(this,Ji(this,li.fromDurationLike(e).negate())):this},t.startOf=function(e){if(!this.isValid)return this;var t={},i=li.normalizeUnit(e);switch(i){case"years":t.month=1;case"quarters":case"months":t.day=1;case"weeks":case"days":t.hour=0;case"hours":t.minute=0;case"minutes":t.second=0;case"seconds":t.millisecond=0}if("weeks"===i&&(t.weekday=1),"quarters"===i){var a=Math.ceil(this.month/3);t.month=3*(a-1)+1}return this.set(t)},t.endOf=function(e){var t;return this.isValid?this.plus((t={},t[e]=1,t)).startOf(e).minus(1):this},t.toFormat=function(e,t){return void 0===t&&(t={}),this.isValid?dt.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):Hi},t.toLocaleString=function(e,t){return void 0===e&&(e=O),void 0===t&&(t={}),this.isValid?dt.create(this.loc.clone(t),e).formatDateTime(this):Hi},t.toLocaleParts=function(e){return void 0===e&&(e={}),this.isValid?dt.create(this.loc.clone(e),e).formatDateTimeParts(this):[]},t.toISO=function(e){var t=void 0===e?{}:e,i=t.format,a=void 0===i?"extended":i,n=t.suppressSeconds,r=void 0!==n&&n,o=t.suppressMilliseconds,s=void 0!==o&&o,l=t.includeOffset,c=void 0===l||l,u=t.extendedZone,h=void 0!==u&&u;if(!this.isValid)return null;var d="extended"===a,f=ea(this,d);return f+="T",f+=ta(this,d,r,s,c,h)},t.toISODate=function(e){var t=(void 0===e?{}:e).format,i=void 0===t?"extended":t;return this.isValid?ea(this,"extended"===i):null},t.toISOWeekDate=function(){return $i(this,"kkkk-'W'WW-c")},t.toISOTime=function(e){var t=void 0===e?{}:e,i=t.suppressMilliseconds,a=void 0!==i&&i,n=t.suppressSeconds,r=void 0!==n&&n,o=t.includeOffset,s=void 0===o||o,l=t.includePrefix,c=void 0!==l&&l,u=t.extendedZone,h=void 0!==u&&u,d=t.format,f=void 0===d?"extended":d;return this.isValid?(c?"T":"")+ta(this,"extended"===f,r,a,s,h):null},t.toRFC2822=function(){return $i(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)},t.toHTTP=function(){return $i(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")},t.toSQLDate=function(){return this.isValid?ea(this,!0):null},t.toSQLTime=function(e){var t=void 0===e?{}:e,i=t.includeOffset,a=void 0===i||i,n=t.includeZone,r=void 0!==n&&n,o=t.includeOffsetSpace,s="HH:mm:ss.SSS";return(r||a)&&((void 0===o||o)&&(s+=" "),r?s+="z":a&&(s+="ZZ")),$i(this,s,!0)},t.toSQL=function(e){return void 0===e&&(e={}),this.isValid?this.toSQLDate()+" "+this.toSQLTime(e):null},t.toString=function(){return this.isValid?this.toISO():Hi},t.valueOf=function(){return this.toMillis()},t.toMillis=function(){return this.isValid?this.ts:NaN},t.toSeconds=function(){return this.isValid?this.ts/1e3:NaN},t.toUnixInteger=function(){return this.isValid?Math.floor(this.ts/1e3):NaN},t.toJSON=function(){return this.toISO()},t.toBSON=function(){return this.toJSDate()},t.toObject=function(e){if(void 0===e&&(e={}),!this.isValid)return{};var t=r({},this.c);return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t},t.toJSDate=function(){return new Date(this.isValid?this.ts:NaN)},t.diff=function(e,t,i){if(void 0===t&&(t="milliseconds"),void 0===i&&(i={}),!this.isValid||!e.isValid)return li.invalid("created by diffing an invalid DateTime");var a,n=r({locale:this.locale,numberingSystem:this.numberingSystem},i),o=(a=t,Array.isArray(a)?a:[a]).map(li.normalizeUnit),s=e.valueOf()>this.valueOf(),l=pi(s?this:e,s?e:this,o,n);return s?l.negate():l},t.diffNow=function(t,i){return void 0===t&&(t="milliseconds"),void 0===i&&(i={}),this.diff(e.now(),t,i)},t.until=function(e){return this.isValid?hi.fromDateTimes(this,e):this},t.hasSame=function(e,t){if(!this.isValid)return!1;var i=e.valueOf(),a=this.setZone(e.zone,{keepLocalTime:!0});return a.startOf(t)<=i&&i<=a.endOf(t)},t.equals=function(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)},t.toRelative=function(t){if(void 0===t&&(t={}),!this.isValid)return null;var i=t.base||e.fromObject({},{zone:this.zone}),a=t.padding?this<i?-t.padding:t.padding:0,n=["years","months","days","hours","minutes","seconds"],o=t.unit;return Array.isArray(t.unit)&&(n=t.unit,o=void 0),ua(i,this.plus(a),r({},t,{numeric:"always",units:n,unit:o}))},t.toRelativeCalendar=function(t){return void 0===t&&(t={}),this.isValid?ua(t.base||e.fromObject({},{zone:this.zone}),this,r({},t,{numeric:"auto",units:["years","months","days"],calendary:!0})):null},e.min=function(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];if(!i.every(e.isDateTime))throw new w("min requires all arguments be DateTimes");return Ie(i,(function(e){return e.valueOf()}),Math.min)},e.max=function(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];if(!i.every(e.isDateTime))throw new w("max requires all arguments be DateTimes");return Ie(i,(function(e){return e.valueOf()}),Math.max)},e.fromFormatExplain=function(e,t,i){void 0===i&&(i={});var a=i,n=a.locale,r=void 0===n?null:n,o=a.numberingSystem,s=void 0===o?null:o;return Ei(pe.fromOpts({locale:r,numberingSystem:s,defaultToEN:!0}),e,t)},e.fromStringExplain=function(t,i,a){return void 0===a&&(a={}),e.fromFormatExplain(t,i,a)},n(e,[{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}},{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"outputCalendar",get:function(){return this.isValid?this.loc.outputCalendar:null}},{key:"zone",get:function(){return this._zone}},{key:"zoneName",get:function(){return this.isValid?this.zone.name:null}},{key:"year",get:function(){return this.isValid?this.c.year:NaN}},{key:"quarter",get:function(){return this.isValid?Math.ceil(this.c.month/3):NaN}},{key:"month",get:function(){return this.isValid?this.c.month:NaN}},{key:"day",get:function(){return this.isValid?this.c.day:NaN}},{key:"hour",get:function(){return this.isValid?this.c.hour:NaN}},{key:"minute",get:function(){return this.isValid?this.c.minute:NaN}},{key:"second",get:function(){return this.isValid?this.c.second:NaN}},{key:"millisecond",get:function(){return this.isValid?this.c.millisecond:NaN}},{key:"weekYear",get:function(){return this.isValid?Xi(this).weekYear:NaN}},{key:"weekNumber",get:function(){return this.isValid?Xi(this).weekNumber:NaN}},{key:"weekday",get:function(){return this.isValid?Xi(this).weekday:NaN}},{key:"ordinal",get:function(){return this.isValid?Ni(this.c).ordinal:NaN}},{key:"monthShort",get:function(){return this.isValid?di.months("short",{locObj:this.loc})[this.month-1]:null}},{key:"monthLong",get:function(){return this.isValid?di.months("long",{locObj:this.loc})[this.month-1]:null}},{key:"weekdayShort",get:function(){return this.isValid?di.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}},{key:"weekdayLong",get:function(){return this.isValid?di.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}},{key:"offset",get:function(){return this.isValid?+this.o:NaN}},{key:"offsetNameShort",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}},{key:"offsetNameLong",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}},{key:"isOffsetFixed",get:function(){return this.isValid?this.zone.isUniversal:null}},{key:"isInDST",get:function(){return!this.isOffsetFixed&&(this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset)}},{key:"isInLeapYear",get:function(){return Be(this.year)}},{key:"daysInMonth",get:function(){return Ve(this.year,this.month)}},{key:"daysInYear",get:function(){return this.isValid?Ne(this.year):NaN}},{key:"weeksInWeekYear",get:function(){return this.isValid?We(this.weekYear):NaN}}],[{key:"DATE_SHORT",get:function(){return O}},{key:"DATE_MED",get:function(){return T}},{key:"DATE_MED_WITH_WEEKDAY",get:function(){return M}},{key:"DATE_FULL",get:function(){return E}},{key:"DATE_HUGE",get:function(){return I}},{key:"TIME_SIMPLE",get:function(){return P}},{key:"TIME_WITH_SECONDS",get:function(){return D}},{key:"TIME_WITH_SHORT_OFFSET",get:function(){return z}},{key:"TIME_WITH_LONG_OFFSET",get:function(){return L}},{key:"TIME_24_SIMPLE",get:function(){return j}},{key:"TIME_24_WITH_SECONDS",get:function(){return R}},{key:"TIME_24_WITH_SHORT_OFFSET",get:function(){return F}},{key:"TIME_24_WITH_LONG_OFFSET",get:function(){return B}},{key:"DATETIME_SHORT",get:function(){return N}},{key:"DATETIME_SHORT_WITH_SECONDS",get:function(){return V}},{key:"DATETIME_MED",get:function(){return Y}},{key:"DATETIME_MED_WITH_SECONDS",get:function(){return W}},{key:"DATETIME_MED_WITH_WEEKDAY",get:function(){return H}},{key:"DATETIME_FULL",get:function(){return U}},{key:"DATETIME_FULL_WITH_SECONDS",get:function(){return X}},{key:"DATETIME_HUGE",get:function(){return G}},{key:"DATETIME_HUGE_WITH_SECONDS",get:function(){return q}}]),e}();function fa(e){if(da.isDateTime(e))return e;if(e&&e.valueOf&&Te(e.valueOf()))return da.fromJSDate(e);if(e&&"object"===typeof e)return da.fromObject(e);throw new w("Unknown datetime argument: "+e+", of type "+typeof e)}t.DateTime=da,t.Duration=li,t.FixedOffsetZone=ge,t.IANAZone=te,t.Info=di,t.Interval=hi,t.InvalidZone=ve,t.Settings=Ae,t.SystemZone=J,t.VERSION="3.3.0",t.Zone=Z},314:function(e,t,i){"use strict";var a=i(32),n=i(17),r=i(6),o=i(0),s=i(97),l=i(504),c=i(389),u=i(510),h=i(96),d=i(98),f=i(543),p=i(135),m=i(124),g=i(100),v=i(161),y=i(505),x=i(507);function b(e){return Object(y.a)("MuiListItem",e)}var _=Object(x.a)("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]);var w=Object(x.a)("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function k(e){return Object(y.a)("MuiListItemSecondaryAction",e)}Object(x.a)("MuiListItemSecondaryAction",["root","disableGutters"]);var S=i(31),C=["className"],A=Object(h.a)("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:function(e,t){var i=e.ownerState;return[t.root,i.disableGutters&&t.disableGutters]}})((function(e){var t=e.ownerState;return Object(r.a)({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},t.disableGutters&&{right:0})})),O=o.forwardRef((function(e,t){var i=Object(d.a)({props:e,name:"MuiListItemSecondaryAction"}),a=i.className,c=Object(n.a)(i,C),u=o.useContext(v.a),h=Object(r.a)({},i,{disableGutters:u.disableGutters}),f=function(e){var t=e.disableGutters,i=e.classes,a={root:["root",t&&"disableGutters"]};return Object(l.a)(a,k,i)}(h);return Object(S.jsx)(A,Object(r.a)({className:Object(s.a)(f.root,a),ownerState:h,ref:t},c))}));O.muiName="ListItemSecondaryAction";var T=O,M=["className"],E=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected"],I=Object(h.a)("div",{name:"MuiListItem",slot:"Root",overridesResolver:function(e,t){var i=e.ownerState;return[t.root,i.dense&&t.dense,"flex-start"===i.alignItems&&t.alignItemsFlexStart,i.divider&&t.divider,!i.disableGutters&&t.gutters,!i.disablePadding&&t.padding,i.button&&t.button,i.hasSecondaryAction&&t.secondaryAction]}})((function(e){var t,i=e.theme,n=e.ownerState;return Object(r.a)({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!n.disablePadding&&Object(r.a)({paddingTop:8,paddingBottom:8},n.dense&&{paddingTop:4,paddingBottom:4},!n.disableGutters&&{paddingLeft:16,paddingRight:16},!!n.secondaryAction&&{paddingRight:48}),!!n.secondaryAction&&Object(a.a)({},"& > .".concat(w.root),{paddingRight:48}),(t={},Object(a.a)(t,"&.".concat(_.focusVisible),{backgroundColor:(i.vars||i).palette.action.focus}),Object(a.a)(t,"&.".concat(_.selected),Object(a.a)({backgroundColor:i.vars?"rgba(".concat(i.vars.palette.primary.mainChannel," / ").concat(i.vars.palette.action.selectedOpacity,")"):Object(u.a)(i.palette.primary.main,i.palette.action.selectedOpacity)},"&.".concat(_.focusVisible),{backgroundColor:i.vars?"rgba(".concat(i.vars.palette.primary.mainChannel," / calc(").concat(i.vars.palette.action.selectedOpacity," + ").concat(i.vars.palette.action.focusOpacity,"))"):Object(u.a)(i.palette.primary.main,i.palette.action.selectedOpacity+i.palette.action.focusOpacity)})),Object(a.a)(t,"&.".concat(_.disabled),{opacity:(i.vars||i).palette.action.disabledOpacity}),t),"flex-start"===n.alignItems&&{alignItems:"flex-start"},n.divider&&{borderBottom:"1px solid ".concat((i.vars||i).palette.divider),backgroundClip:"padding-box"},n.button&&Object(a.a)({transition:i.transitions.create("background-color",{duration:i.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(i.vars||i).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},"&.".concat(_.selected,":hover"),{backgroundColor:i.vars?"rgba(".concat(i.vars.palette.primary.mainChannel," / calc(").concat(i.vars.palette.action.selectedOpacity," + ").concat(i.vars.palette.action.hoverOpacity,"))"):Object(u.a)(i.palette.primary.main,i.palette.action.selectedOpacity+i.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:i.vars?"rgba(".concat(i.vars.palette.primary.mainChannel," / ").concat(i.vars.palette.action.selectedOpacity,")"):Object(u.a)(i.palette.primary.main,i.palette.action.selectedOpacity)}}),n.hasSecondaryAction&&{paddingRight:48})})),P=Object(h.a)("li",{name:"MuiListItem",slot:"Container",overridesResolver:function(e,t){return t.container}})({position:"relative"}),D=o.forwardRef((function(e,t){var i=Object(d.a)({props:e,name:"MuiListItem"}),a=i.alignItems,u=void 0===a?"center":a,h=i.autoFocus,y=void 0!==h&&h,x=i.button,w=void 0!==x&&x,k=i.children,C=i.className,A=i.component,O=i.components,D=void 0===O?{}:O,z=i.componentsProps,L=void 0===z?{}:z,j=i.ContainerComponent,R=void 0===j?"li":j,F=i.ContainerProps,B=(F=void 0===F?{}:F).className,N=i.dense,V=void 0!==N&&N,Y=i.disabled,W=void 0!==Y&&Y,H=i.disableGutters,U=void 0!==H&&H,X=i.disablePadding,G=void 0!==X&&X,q=i.divider,Z=void 0!==q&&q,K=i.focusVisibleClassName,J=i.secondaryAction,Q=i.selected,$=void 0!==Q&&Q,ee=Object(n.a)(i.ContainerProps,M),te=Object(n.a)(i,E),ie=o.useContext(v.a),ae={dense:V||ie.dense||!1,alignItems:u,disableGutters:U},ne=o.useRef(null);Object(m.a)((function(){y&&ne.current&&ne.current.focus()}),[y]);var re=o.Children.toArray(k),oe=re.length&&Object(p.a)(re[re.length-1],["ListItemSecondaryAction"]),se=Object(r.a)({},i,{alignItems:u,autoFocus:y,button:w,dense:ae.dense,disabled:W,disableGutters:U,disablePadding:G,divider:Z,hasSecondaryAction:oe,selected:$}),le=function(e){var t=e.alignItems,i=e.button,a=e.classes,n=e.dense,r=e.disabled,o={root:["root",n&&"dense",!e.disableGutters&&"gutters",!e.disablePadding&&"padding",e.divider&&"divider",r&&"disabled",i&&"button","flex-start"===t&&"alignItemsFlexStart",e.hasSecondaryAction&&"secondaryAction",e.selected&&"selected"],container:["container"]};return Object(l.a)(o,b,a)}(se),ce=Object(g.a)(ne,t),ue=D.Root||I,he=L.root||{},de=Object(r.a)({className:Object(s.a)(le.root,he.className,C),disabled:W},te),fe=A||"li";return w&&(de.component=A||"div",de.focusVisibleClassName=Object(s.a)(_.focusVisible,K),fe=f.a),oe?(fe=de.component||A?fe:"div","li"===R&&("li"===fe?fe="div":"li"===de.component&&(de.component="div")),Object(S.jsx)(v.a.Provider,{value:ae,children:Object(S.jsxs)(P,Object(r.a)({as:R,className:Object(s.a)(le.container,B),ref:ce,ownerState:se},ee,{children:[Object(S.jsx)(ue,Object(r.a)({},he,!Object(c.a)(ue)&&{as:fe,ownerState:Object(r.a)({},se,he.ownerState)},de,{children:re})),re.pop()]}))})):Object(S.jsx)(v.a.Provider,{value:ae,children:Object(S.jsxs)(ue,Object(r.a)({},he,{as:fe,ref:ce,ownerState:se},!Object(c.a)(ue)&&{ownerState:Object(r.a)({},se,he.ownerState)},de,{children:[re,J&&Object(S.jsx)(T,{children:J})]}))})}));t.a=D},316:function(e,t,i){"use strict";var a=i(17),n=i(6),r=i(0),o=i(97),s=i(504),l=i(547),c=i(218),u=i(133),h=i(100),d=i(112),f=i(150),p=i(151),m=i(31),g=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function v(e,t,i){var a,n=function(e,t,i){var a,n=t.getBoundingClientRect(),r=i&&i.getBoundingClientRect(),o=Object(p.a)(t);if(t.fakeTransform)a=t.fakeTransform;else{var s=o.getComputedStyle(t);a=s.getPropertyValue("-webkit-transform")||s.getPropertyValue("transform")}var l=0,c=0;if(a&&"none"!==a&&"string"===typeof a){var u=a.split("(")[1].split(")")[0].split(",");l=parseInt(u[4],10),c=parseInt(u[5],10)}return"left"===e?"translateX(".concat(r?r.right+l-n.left:o.innerWidth+l-n.left,"px)"):"right"===e?"translateX(-".concat(r?n.right-r.left-l:n.left+n.width-l,"px)"):"up"===e?"translateY(".concat(r?r.bottom+c-n.top:o.innerHeight+c-n.top,"px)"):"translateY(-".concat(r?n.top-r.top+n.height-c:n.top+n.height-c,"px)")}(e,t,"function"===typeof(a=i)?a():a);n&&(t.style.webkitTransform=n,t.style.transform=n)}var y=r.forwardRef((function(e,t){var i=Object(d.a)(),o={enter:i.transitions.easing.easeOut,exit:i.transitions.easing.sharp},s={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},l=e.addEndListener,y=e.appear,x=void 0===y||y,b=e.children,_=e.container,w=e.direction,k=void 0===w?"down":w,S=e.easing,C=void 0===S?o:S,A=e.in,O=e.onEnter,T=e.onEntered,M=e.onEntering,E=e.onExit,I=e.onExited,P=e.onExiting,D=e.style,z=e.timeout,L=void 0===z?s:z,j=e.TransitionComponent,R=void 0===j?c.e:j,F=Object(a.a)(e,g),B=r.useRef(null),N=Object(h.a)(b.ref,B),V=Object(h.a)(N,t),Y=function(e){return function(t){e&&(void 0===t?e(B.current):e(B.current,t))}},W=Y((function(e,t){v(k,e,_),Object(f.b)(e),O&&O(e,t)})),H=Y((function(e,t){var a=Object(f.a)({timeout:L,style:D,easing:C},{mode:"enter"});e.style.webkitTransition=i.transitions.create("-webkit-transform",Object(n.a)({},a)),e.style.transition=i.transitions.create("transform",Object(n.a)({},a)),e.style.webkitTransform="none",e.style.transform="none",M&&M(e,t)})),U=Y(T),X=Y(P),G=Y((function(e){var t=Object(f.a)({timeout:L,style:D,easing:C},{mode:"exit"});e.style.webkitTransition=i.transitions.create("-webkit-transform",t),e.style.transition=i.transitions.create("transform",t),v(k,e,_),E&&E(e)})),q=Y((function(e){e.style.webkitTransition="",e.style.transition="",I&&I(e)})),Z=r.useCallback((function(){B.current&&v(k,B.current,_)}),[k,_]);return r.useEffect((function(){if(!A&&"down"!==k&&"right"!==k){var e=Object(u.a)((function(){B.current&&v(k,B.current,_)})),t=Object(p.a)(B.current);return t.addEventListener("resize",e),function(){e.clear(),t.removeEventListener("resize",e)}}}),[k,A,_]),r.useEffect((function(){A||Z()}),[A,Z]),Object(m.jsx)(R,Object(n.a)({nodeRef:B,onEnter:W,onEntered:U,onEntering:H,onExit:G,onExited:q,onExiting:X,addEndListener:function(e){l&&l(B.current,e)},appear:x,in:A,timeout:L},F,{children:function(e,t){return r.cloneElement(b,Object(n.a)({ref:V,style:Object(n.a)({visibility:"exited"!==e||A?void 0:"hidden"},D,b.props.style)},t))}}))})),x=i(550),b=i(99),_=i(98),w=i(96),k=i(505),S=i(507);function C(e){return Object(k.a)("MuiDrawer",e)}Object(S.a)("MuiDrawer",["root","docked","paper","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);var A=["BackdropProps"],O=["anchor","BackdropProps","children","className","elevation","hideBackdrop","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"],T=function(e,t){var i=e.ownerState;return[t.root,("permanent"===i.variant||"persistent"===i.variant)&&t.docked,t.modal]},M=Object(w.a)(l.a,{name:"MuiDrawer",slot:"Root",overridesResolver:T})((function(e){var t=e.theme;return{zIndex:(t.vars||t).zIndex.drawer}})),E=Object(w.a)("div",{shouldForwardProp:w.b,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:T})({flex:"0 0 auto"}),I=Object(w.a)(x.a,{name:"MuiDrawer",slot:"Paper",overridesResolver:function(e,t){var i=e.ownerState;return[t.paper,t["paperAnchor".concat(Object(b.a)(i.anchor))],"temporary"!==i.variant&&t["paperAnchorDocked".concat(Object(b.a)(i.anchor))]]}})((function(e){var t=e.theme,i=e.ownerState;return Object(n.a)({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(t.vars||t).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},"left"===i.anchor&&{left:0},"top"===i.anchor&&{top:0,left:0,right:0,height:"auto",maxHeight:"100%"},"right"===i.anchor&&{right:0},"bottom"===i.anchor&&{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},"left"===i.anchor&&"temporary"!==i.variant&&{borderRight:"1px solid ".concat((t.vars||t).palette.divider)},"top"===i.anchor&&"temporary"!==i.variant&&{borderBottom:"1px solid ".concat((t.vars||t).palette.divider)},"right"===i.anchor&&"temporary"!==i.variant&&{borderLeft:"1px solid ".concat((t.vars||t).palette.divider)},"bottom"===i.anchor&&"temporary"!==i.variant&&{borderTop:"1px solid ".concat((t.vars||t).palette.divider)})})),P={left:"right",right:"left",top:"down",bottom:"up"};var D=r.forwardRef((function(e,t){var i=Object(_.a)({props:e,name:"MuiDrawer"}),l=Object(d.a)(),c={enter:l.transitions.duration.enteringScreen,exit:l.transitions.duration.leavingScreen},u=i.anchor,h=void 0===u?"left":u,f=i.BackdropProps,p=i.children,g=i.className,v=i.elevation,x=void 0===v?16:v,w=i.hideBackdrop,k=void 0!==w&&w,S=i.ModalProps,T=(S=void 0===S?{}:S).BackdropProps,D=i.onClose,z=i.open,L=void 0!==z&&z,j=i.PaperProps,R=void 0===j?{}:j,F=i.SlideProps,B=i.TransitionComponent,N=void 0===B?y:B,V=i.transitionDuration,Y=void 0===V?c:V,W=i.variant,H=void 0===W?"temporary":W,U=Object(a.a)(i.ModalProps,A),X=Object(a.a)(i,O),G=r.useRef(!1);r.useEffect((function(){G.current=!0}),[]);var q=function(e,t){return"rtl"===e.direction&&function(e){return-1!==["left","right"].indexOf(e)}(t)?P[t]:t}(l,h),Z=h,K=Object(n.a)({},i,{anchor:Z,elevation:x,open:L,variant:H},X),J=function(e){var t=e.classes,i=e.anchor,a=e.variant,n={root:["root"],docked:[("permanent"===a||"persistent"===a)&&"docked"],modal:["modal"],paper:["paper","paperAnchor".concat(Object(b.a)(i)),"temporary"!==a&&"paperAnchorDocked".concat(Object(b.a)(i))]};return Object(s.a)(n,C,t)}(K),Q=Object(m.jsx)(I,Object(n.a)({elevation:"temporary"===H?x:0,square:!0},R,{className:Object(o.a)(J.paper,R.className),ownerState:K,children:p}));if("permanent"===H)return Object(m.jsx)(E,Object(n.a)({className:Object(o.a)(J.root,J.docked,g),ownerState:K,ref:t},X,{children:Q}));var $=Object(m.jsx)(N,Object(n.a)({in:L,direction:P[q],timeout:Y,appear:G.current},F,{children:Q}));return"persistent"===H?Object(m.jsx)(E,Object(n.a)({className:Object(o.a)(J.root,J.docked,g),ownerState:K,ref:t},X,{children:$})):Object(m.jsx)(M,Object(n.a)({BackdropProps:Object(n.a)({},f,T,{transitionDuration:Y}),className:Object(o.a)(J.root,J.modal,g),open:L,ownerState:K,onClose:D,hideBackdrop:k,ref:t},X,U,{children:$}))}));t.a=D},317:function(e,t,i){"use strict";var a=i(17),n=i(6),r=i(0),o=i(97),s=i(518),l=i(504),c=i(96),u=i(98),h=i(99),d=i(505),f=i(507);function p(e){return Object(d.a)("MuiTypography",e)}Object(f.a)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);var m=i(31),g=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],v=Object(c.a)("span",{name:"MuiTypography",slot:"Root",overridesResolver:function(e,t){var i=e.ownerState;return[t.root,i.variant&&t[i.variant],"inherit"!==i.align&&t["align".concat(Object(h.a)(i.align))],i.noWrap&&t.noWrap,i.gutterBottom&&t.gutterBottom,i.paragraph&&t.paragraph]}})((function(e){var t=e.theme,i=e.ownerState;return Object(n.a)({margin:0},i.variant&&t.typography[i.variant],"inherit"!==i.align&&{textAlign:i.align},i.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},i.gutterBottom&&{marginBottom:"0.35em"},i.paragraph&&{marginBottom:16})})),y={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},x={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},b=r.forwardRef((function(e,t){var i=Object(u.a)({props:e,name:"MuiTypography"}),r=function(e){return x[e]||e}(i.color),c=Object(s.a)(Object(n.a)({},i,{color:r})),d=c.align,f=void 0===d?"inherit":d,b=c.className,_=c.component,w=c.gutterBottom,k=void 0!==w&&w,S=c.noWrap,C=void 0!==S&&S,A=c.paragraph,O=void 0!==A&&A,T=c.variant,M=void 0===T?"body1":T,E=c.variantMapping,I=void 0===E?y:E,P=Object(a.a)(c,g),D=Object(n.a)({},c,{align:f,color:r,className:b,component:_,gutterBottom:k,noWrap:C,paragraph:O,variant:M,variantMapping:I}),z=_||(O?"p":I[M]||y[M])||"span",L=function(e){var t=e.align,i=e.gutterBottom,a=e.noWrap,n=e.paragraph,r=e.variant,o=e.classes,s={root:["root",r,"inherit"!==e.align&&"align".concat(Object(h.a)(t)),i&&"gutterBottom",a&&"noWrap",n&&"paragraph"]};return Object(l.a)(s,p,o)}(D);return Object(m.jsx)(v,Object(n.a)({as:z,ref:t,ownerState:D,className:Object(o.a)(L.root,b)},P))}));t.a=b},318:function(e,t,i){"use strict";var a=i(32),n=i(17),r=i(6),o=i(0),s=i(97),l=i(504),c=i(98),u=i(96),h=i(505),d=i(507);function f(e){return Object(h.a)("MuiToolbar",e)}Object(d.a)("MuiToolbar",["root","gutters","regular","dense"]);var p=i(31),m=["className","component","disableGutters","variant"],g=Object(u.a)("div",{name:"MuiToolbar",slot:"Root",overridesResolver:function(e,t){var i=e.ownerState;return[t.root,!i.disableGutters&&t.gutters,t[i.variant]]}})((function(e){var t=e.theme,i=e.ownerState;return Object(r.a)({position:"relative",display:"flex",alignItems:"center"},!i.disableGutters&&Object(a.a)({paddingLeft:t.spacing(2),paddingRight:t.spacing(2)},t.breakpoints.up("sm"),{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}),"dense"===i.variant&&{minHeight:48})}),(function(e){var t=e.theme;return"regular"===e.ownerState.variant&&t.mixins.toolbar})),v=o.forwardRef((function(e,t){var i=Object(c.a)({props:e,name:"MuiToolbar"}),a=i.className,o=i.component,u=void 0===o?"div":o,h=i.disableGutters,d=void 0!==h&&h,v=i.variant,y=void 0===v?"regular":v,x=Object(n.a)(i,m),b=Object(r.a)({},i,{component:u,disableGutters:d,variant:y}),_=function(e){var t=e.classes,i={root:["root",!e.disableGutters&&"gutters",e.variant]};return Object(l.a)(i,f,t)}(b);return Object(p.jsx)(g,Object(r.a)({as:u,className:Object(s.a)(_.root,a),ref:t,ownerState:b},x))}));t.a=v},319:function(e,t,i){"use strict";var a=i(17),n=i(6),r=i(0),o=i(97),s=i(504),l=i(96),c=i(98),u=i(505),h=i(507);function d(e){return Object(u.a)("MuiListItemIcon",e)}Object(h.a)("MuiListItemIcon",["root","alignItemsFlexStart"]);var f=i(161),p=i(31),m=["className"],g=Object(l.a)("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:function(e,t){var i=e.ownerState;return[t.root,"flex-start"===i.alignItems&&t.alignItemsFlexStart]}})((function(e){var t=e.theme,i=e.ownerState;return Object(n.a)({minWidth:56,color:(t.vars||t).palette.action.active,flexShrink:0,display:"inline-flex"},"flex-start"===i.alignItems&&{marginTop:8})})),v=r.forwardRef((function(e,t){var i=Object(c.a)({props:e,name:"MuiListItemIcon"}),l=i.className,u=Object(a.a)(i,m),h=r.useContext(f.a),v=Object(n.a)({},i,{alignItems:h.alignItems}),y=function(e){var t=e.alignItems,i=e.classes,a={root:["root","flex-start"===t&&"alignItemsFlexStart"]};return Object(s.a)(a,d,i)}(v);return Object(p.jsx)(g,Object(n.a)({className:Object(o.a)(y.root,l),ownerState:v,ref:t},u))}));t.a=v},352:function(e,t){e.exports=function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}},353:function(e,t){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}},354:function(e,t,i){var a=i(432);function n(t,i,r){return"undefined"!==typeof Reflect&&Reflect.get?e.exports=n=Reflect.get:e.exports=n=function(e,t,i){var n=a(e,t);if(n){var r=Object.getOwnPropertyDescriptor(n,t);return r.get?r.get.call(i):r.value}},n(t,i,r||t)}e.exports=n},355:function(e,t,i){var a=i(356),n=i(357),r=i(251),o=i(359);e.exports=function(e){return a(e)||n(e)||r(e)||o()}},356:function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},357:function(e,t){e.exports=function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},358:function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}},359:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},360:function(e,t,i){var a=i(434),n=i(357),r=i(251),o=i(435);e.exports=function(e){return a(e)||n(e)||r(e)||o()}},361:function(e,t,i){var a=i(356),n=i(436),r=i(251),o=i(359);e.exports=function(e,t){return a(e)||n(e,t)||r(e,t)||o()}},362:function(e,t,i){var a=i(251);e.exports=function(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=a(e))){var t=0,i=function(){};return{s:i,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,r,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}},363:function(e,t){function i(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}e.exports=function(e,t,a){return t&&i(e.prototype,t),a&&i(e,a),e}},364:function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},365:function(e,t,i){var a=i(284);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}},366:function(e,t,i){var a=i(233),n=i(353),r=i(285);e.exports=function(e){return function(){var t,i=a(e);if(n()){var o=a(this).constructor;t=Reflect.construct(i,arguments,o)}else t=i.apply(this,arguments);return r(this,t)}}},367:function(e,t,i){var a=i(233),n=i(284),r=i(437),o=i(283);function s(t){var i="function"===typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!r(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof i){if(i.has(e))return i.get(e);i.set(e,t)}function t(){return o(e,arguments,a(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n(t,e)},s(t)}e.exports=s},369:function(e,t,i){"use strict";i.d(t,"a",(function(){return Ya}));var a=i(6),n=i(17),r=i(0),o=i.n(r),s=i(98),l=i(7),c=i(384),u=i(385),h=i(124);function d(e,t,i,a,n){var o="undefined"!==typeof window&&"undefined"!==typeof window.matchMedia,s=r.useState((function(){return n&&o?i(e).matches:a?a(e).matches:t})),c=Object(l.a)(s,2),u=c[0],d=c[1];return Object(h.a)((function(){var t=!0;if(o){var a=i(e),n=function(){t&&d(a.matches)};return n(),a.addListener(n),function(){t=!1,a.removeListener(n)}}}),[e,i,o]),u}var f=r.useSyncExternalStore;function p(e,t,i,a){var n=r.useCallback((function(){return t}),[t]),o=r.useMemo((function(){if(null!==a){var t=a(e).matches;return function(){return t}}return n}),[n,e,a]),s=r.useMemo((function(){if(null===i)return[n,function(){return function(){}}];var t=i(e);return[function(){return t.matches},function(e){return t.addListener(e),function(){t.removeListener(e)}}]}),[n,i,e]),c=Object(l.a)(s,2),u=c[0],h=c[1];return f(h,u,o)}var m=i(238),g=function(){var e=r.useContext(m.b);if(null===e)throw new Error("MUI: Can not find utils in context. It looks like you forgot to wrap your component in LocalizationProvider, or pass dateAdapter prop directly.");return e},v=function(){return g().utils},y=function(){return g().defaultDates},x=function(){return g().localeText},b=function(){var e=v();return r.useRef(e.date()).current},_=function(e){var t=e.date,i=e.disableFuture,a=e.disablePast,n=e.maxDate,r=e.minDate,o=e.isDateDisabled,s=e.utils,l=s.startOfDay(s.date());a&&s.isBefore(r,l)&&(r=l),i&&s.isAfter(n,l)&&(n=l);var c=t,u=t;for(s.isBefore(t,r)&&(c=s.date(r),u=null),s.isAfter(t,n)&&(u&&(u=s.date(n)),c=null);c||u;){if(c&&s.isAfter(c,n)&&(c=null),u&&s.isBefore(u,r)&&(u=null),c){if(!o(c))return c;c=s.addDays(c,1)}if(u){if(!o(u))return u;u=s.addDays(u,-1)}}return null},w=function(e){return 1===e.length&&"year"===e[0]},k=function(e){return 2===e.length&&-1!==e.indexOf("month")&&-1!==e.indexOf("year")};function S(e,t){var i,n=v(),r=y(),o=Object(s.a)({props:e,name:t}),l=null!=(i=o.views)?i:["year","day"];return Object(a.a)({openTo:"day",minDate:r.minDate,maxDate:r.maxDate},function(e,t){return w(e)?{inputFormat:t.formats.year}:k(e)?{disableMaskedInput:!0,inputFormat:t.formats.monthAndYear}:{inputFormat:t.formats.keyboardDate}}(l,n),o,{views:l})}var C={emptyValue:null,getTodayValue:function(e){return e.date()},parseInput:function(e,t){var i=e.date(t);return e.isValid(i)?i:null},areValuesEqual:function(e,t,i){return e.isEqual(t,i)}},A=i(32),O=i(317),T=i(96),M=i(507),E=i(97),I=i(33),P=i(222),D=i(518),z=i(504),L=i(112);var j=r.createContext(),R=i(505);function F(e){return Object(R.a)("MuiGrid",e)}var B=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],N=Object(M.a)("MuiGrid",["root","container","item","zeroMinWidth"].concat(Object(I.a)([0,1,2,3,4,5,6,7,8,9,10].map((function(e){return"spacing-xs-".concat(e)}))),Object(I.a)(["column-reverse","column","row-reverse","row"].map((function(e){return"direction-xs-".concat(e)}))),Object(I.a)(["nowrap","wrap-reverse","wrap"].map((function(e){return"wrap-xs-".concat(e)}))),Object(I.a)(B.map((function(e){return"grid-xs-".concat(e)}))),Object(I.a)(B.map((function(e){return"grid-sm-".concat(e)}))),Object(I.a)(B.map((function(e){return"grid-md-".concat(e)}))),Object(I.a)(B.map((function(e){return"grid-lg-".concat(e)}))),Object(I.a)(B.map((function(e){return"grid-xl-".concat(e)}))))),V=i(31),Y=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function W(e){var t=parseFloat(e);return"".concat(t).concat(String(e).replace(String(t),"")||"px")}function H(e){var t=e.breakpoints,i=e.values,a="";Object.keys(i).forEach((function(e){""===a&&0!==i[e]&&(a=e)}));var n=Object.keys(t).sort((function(e,i){return t[e]-t[i]}));return n.slice(0,n.indexOf(a))}var U=Object(T.a)("div",{name:"MuiGrid",slot:"Root",overridesResolver:function(e,t){var i=e.ownerState,a=i.container,n=i.direction,r=i.item,o=i.spacing,s=i.wrap,l=i.zeroMinWidth,c=i.breakpoints,u=[];a&&(u=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return[i["spacing-xs-".concat(String(e))]];var a=[];return t.forEach((function(t){var n=e[t];Number(n)>0&&a.push(i["spacing-".concat(t,"-").concat(String(n))])})),a}(o,c,t));var h=[];return c.forEach((function(e){var a=i[e];a&&h.push(t["grid-".concat(e,"-").concat(String(a))])})),[t.root,a&&t.container,r&&t.item,l&&t.zeroMinWidth].concat(Object(I.a)(u),["row"!==n&&t["direction-xs-".concat(String(n))],"wrap"!==s&&t["wrap-xs-".concat(String(s))]],h)}})((function(e){var t=e.ownerState;return Object(a.a)({boxSizing:"border-box"},t.container&&{display:"flex",flexWrap:"wrap",width:"100%"},t.item&&{margin:0},t.zeroMinWidth&&{minWidth:0},"wrap"!==t.wrap&&{flexWrap:t.wrap})}),(function(e){var t=e.theme,i=e.ownerState,a=Object(P.e)({values:i.direction,breakpoints:t.breakpoints.values});return Object(P.b)({theme:t},a,(function(e){var t={flexDirection:e};return 0===e.indexOf("column")&&(t["& > .".concat(N.item)]={maxWidth:"none"}),t}))}),(function(e){var t=e.theme,i=e.ownerState,a=i.container,n=i.rowSpacing,r={};if(a&&0!==n){var o,s=Object(P.e)({values:n,breakpoints:t.breakpoints.values});"object"===typeof s&&(o=H({breakpoints:t.breakpoints.values,values:s})),r=Object(P.b)({theme:t},s,(function(e,i){var a=t.spacing(e);return"0px"!==a?Object(A.a)({marginTop:"-".concat(W(a))},"& > .".concat(N.item),{paddingTop:W(a)}):o.includes(i)?{}:Object(A.a)({marginTop:0},"& > .".concat(N.item),{paddingTop:0})}))}return r}),(function(e){var t=e.theme,i=e.ownerState,a=i.container,n=i.columnSpacing,r={};if(a&&0!==n){var o,s=Object(P.e)({values:n,breakpoints:t.breakpoints.values});"object"===typeof s&&(o=H({breakpoints:t.breakpoints.values,values:s})),r=Object(P.b)({theme:t},s,(function(e,i){var a=t.spacing(e);return"0px"!==a?Object(A.a)({width:"calc(100% + ".concat(W(a),")"),marginLeft:"-".concat(W(a))},"& > .".concat(N.item),{paddingLeft:W(a)}):o.includes(i)?{}:Object(A.a)({width:"100%",marginLeft:0},"& > .".concat(N.item),{paddingLeft:0})}))}return r}),(function(e){var t,i=e.theme,n=e.ownerState;return i.breakpoints.keys.reduce((function(e,r){var o={};if(n[r]&&(t=n[r]),!t)return e;if(!0===t)o={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if("auto"===t)o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{var s=Object(P.e)({values:n.columns,breakpoints:i.breakpoints.values}),l="object"===typeof s?s[r]:s;if(void 0===l||null===l)return e;var c="".concat(Math.round(t/l*1e8)/1e6,"%"),u={};if(n.container&&n.item&&0!==n.columnSpacing){var h=i.spacing(n.columnSpacing);if("0px"!==h){var d="calc(".concat(c," + ").concat(W(h),")");u={flexBasis:d,maxWidth:d}}}o=Object(a.a)({flexBasis:c,flexGrow:0,maxWidth:c},u)}return 0===i.breakpoints.values[r]?Object.assign(e,o):e[i.breakpoints.up(r)]=o,e}),{})}));var X=function(e){var t=e.classes,i=e.container,a=e.direction,n=e.item,r=e.spacing,o=e.wrap,s=e.zeroMinWidth,l=e.breakpoints,c=[];i&&(c=function(e,t){if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return["spacing-xs-".concat(String(e))];var i=[];return t.forEach((function(t){var a=e[t];if(Number(a)>0){var n="spacing-".concat(t,"-").concat(String(a));i.push(n)}})),i}(r,l));var u=[];l.forEach((function(t){var i=e[t];i&&u.push("grid-".concat(t,"-").concat(String(i)))}));var h={root:["root",i&&"container",n&&"item",s&&"zeroMinWidth"].concat(Object(I.a)(c),["row"!==a&&"direction-xs-".concat(String(a)),"wrap"!==o&&"wrap-xs-".concat(String(o))],u)};return Object(z.a)(h,F,t)},G=r.forwardRef((function(e,t){var i=Object(s.a)({props:e,name:"MuiGrid"}),o=Object(L.a)().breakpoints,l=Object(D.a)(i),c=l.className,u=l.columns,h=l.columnSpacing,d=l.component,f=void 0===d?"div":d,p=l.container,m=void 0!==p&&p,g=l.direction,v=void 0===g?"row":g,y=l.item,x=void 0!==y&&y,b=l.rowSpacing,_=l.spacing,w=void 0===_?0:_,k=l.wrap,S=void 0===k?"wrap":k,C=l.zeroMinWidth,A=void 0!==C&&C,O=Object(n.a)(l,Y),T=b||w,M=h||w,I=r.useContext(j),P=m?u||12:I,z={},R=Object(a.a)({},O);o.keys.forEach((function(e){null!=O[e]&&(z[e]=O[e],delete R[e])}));var F=Object(a.a)({},l,{columns:P,container:m,direction:v,item:x,rowSpacing:T,columnSpacing:M,wrap:S,zeroMinWidth:A,spacing:w},z,{breakpoints:o.keys}),B=X(F);return Object(V.jsx)(j.Provider,{value:P,children:Object(V.jsx)(U,Object(a.a)({ownerState:F,className:Object(E.a)(B.root,c),as:f,ref:t},R))})})),q=i(549),Z=i(109),K=Object(Z.a)(Object(V.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),J=Object(Z.a)(Object(V.jsx)("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"}),"ArrowLeft"),Q=Object(Z.a)(Object(V.jsx)("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"ArrowRight"),$=Object(Z.a)(Object(V.jsx)("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}),"Calendar"),ee=Object(Z.a)(Object(V.jsxs)(r.Fragment,{children:[Object(V.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),Object(V.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),"Clock"),te=(Object(Z.a)(Object(V.jsx)("path",{d:"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"}),"DateRange"),Object(Z.a)(Object(V.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Pen")),ie=(Object(Z.a)(Object(V.jsxs)(r.Fragment,{children:[Object(V.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),Object(V.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),"Time"),Object(M.a)("MuiPickersToolbar",["root","content","penIconButton","penIconButtonLandscape"])),ae=Object(T.a)("div",{name:"MuiPickersToolbar",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(e){var t=e.theme,i=e.ownerState;return Object(a.a)({display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between",padding:t.spacing(2,3)},i.isLandscape&&{height:"auto",maxWidth:160,padding:16,justifyContent:"flex-start",flexWrap:"wrap"})})),ne=Object(T.a)(G,{name:"MuiPickersToolbar",slot:"Content",overridesResolver:function(e,t){return t.content}})({flex:1}),re=Object(T.a)(q.a,{name:"MuiPickersToolbar",slot:"PenIconButton",overridesResolver:function(e,t){return t.penIconButton}})({}),oe=function(e){return"clock"===e?Object(V.jsx)(ee,{color:"inherit"}):Object(V.jsx)($,{color:"inherit"})};function se(e,t){return e?"text input view is open, go to ".concat(t," view"):"".concat(t," view is open, go to text input view")}var le=r.forwardRef((function(e,t){var i=e.children,a=e.className,n=e.getMobileKeyboardInputViewButtonText,r=void 0===n?se:n,o=e.isLandscape,s=e.isMobileKeyboardViewOpen,l=e.landscapeDirection,c=void 0===l?"column":l,u=e.toggleMobileKeyboardView,h=e.toolbarTitle,d=e.viewType,f=void 0===d?"calendar":d,p=e;return Object(V.jsxs)(ae,{ref:t,className:Object(E.a)(ie.root,a),ownerState:p,children:[Object(V.jsx)(O.a,{color:"text.secondary",variant:"overline",children:h}),Object(V.jsxs)(ne,{container:!0,justifyContent:"space-between",className:ie.content,ownerState:p,direction:o?c:"row",alignItems:o?"flex-start":"flex-end",children:[i,Object(V.jsx)(re,{onClick:u,className:Object(E.a)(ie.penIconButton,o&&ie.penIconButtonLandscape),ownerState:p,color:"inherit","aria-label":r(s,f),children:s?oe(f):Object(V.jsx)(te,{color:"inherit"})})]})]})})),ce=["parsedValue","isLandscape","isMobileKeyboardViewOpen","onChange","toggleMobileKeyboardView","toolbarFormat","toolbarPlaceholder","toolbarTitle","views"],ue=Object(M.a)("MuiDatePickerToolbar",["root","title"]),he=Object(T.a)(le,{name:"MuiDatePickerToolbar",slot:"Root",overridesResolver:function(e,t){return t.root}})(Object(A.a)({},"& .".concat(ie.penIconButton),{position:"relative",top:4})),de=Object(T.a)(O.a,{name:"MuiDatePickerToolbar",slot:"Title",overridesResolver:function(e,t){return t.title}})((function(e){var t=e.ownerState;return Object(a.a)({},t.isLandscape&&{margin:"auto 16px auto auto"})})),fe=r.forwardRef((function(e,t){var i=e.parsedValue,o=e.isLandscape,s=e.isMobileKeyboardViewOpen,l=e.toggleMobileKeyboardView,c=e.toolbarFormat,u=e.toolbarPlaceholder,h=void 0===u?"\u2013\u2013":u,d=e.toolbarTitle,f=void 0===d?"Select date":d,p=e.views,m=Object(n.a)(e,ce),g=v(),y=r.useMemo((function(){return i?c?g.formatByString(i,c):w(p)?g.format(i,"year"):k(p)?g.format(i,"month"):/en/.test(g.getCurrentLocaleCode())?g.format(i,"normalDateWithWeekday"):g.format(i,"normalDate"):h}),[i,c,h,g,p]),x=e;return Object(V.jsx)(he,Object(a.a)({ref:t,toolbarTitle:f,isMobileKeyboardViewOpen:s,toggleMobileKeyboardView:l,isLandscape:o,ownerState:x,className:ue.root},m,{children:Object(V.jsx)(de,{variant:"h4",align:o?"left":"center",ownerState:x,className:ue.title,children:y})}))})),pe=i(100),me=r.createContext(null),ge=i(196),ve=i(550),ye=i(198),xe=i(525),be=i(210),_e=i(114),we=i(512),ke=i(510),Se=i(543),Ce=i(99);function Ae(e){return Object(R.a)("MuiButton",e)}var Oe=Object(M.a)("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);var Te=r.createContext({}),Me=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],Ee=["root"],Ie=function(e){return Object(a.a)({},"small"===e.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===e.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===e.size&&{"& > *:nth-of-type(1)":{fontSize:22}})},Pe=Object(T.a)(Se.a,{shouldForwardProp:function(e){return Object(T.b)(e)||"classes"===e},name:"MuiButton",slot:"Root",overridesResolver:function(e,t){var i=e.ownerState;return[t.root,t[i.variant],t["".concat(i.variant).concat(Object(Ce.a)(i.color))],t["size".concat(Object(Ce.a)(i.size))],t["".concat(i.variant,"Size").concat(Object(Ce.a)(i.size))],"inherit"===i.color&&t.colorInherit,i.disableElevation&&t.disableElevation,i.fullWidth&&t.fullWidth]}})((function(e){var t,i,n,r=e.theme,o=e.ownerState;return Object(a.a)({},r.typography.button,(t={minWidth:64,padding:"6px 16px",borderRadius:(r.vars||r).shape.borderRadius,transition:r.transitions.create(["background-color","box-shadow","border-color","color"],{duration:r.transitions.duration.short}),"&:hover":Object(a.a)({textDecoration:"none",backgroundColor:r.vars?"rgba(".concat(r.vars.palette.text.primaryChannel," / ").concat(r.vars.palette.action.hoverOpacity,")"):Object(ke.a)(r.palette.text.primary,r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===o.variant&&"inherit"!==o.color&&{backgroundColor:r.vars?"rgba(".concat(r.vars.palette[o.color].mainChannel," / ").concat(r.vars.palette.action.hoverOpacity,")"):Object(ke.a)(r.palette[o.color].main,r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===o.variant&&"inherit"!==o.color&&{border:"1px solid ".concat((r.vars||r).palette[o.color].main),backgroundColor:r.vars?"rgba(".concat(r.vars.palette[o.color].mainChannel," / ").concat(r.vars.palette.action.hoverOpacity,")"):Object(ke.a)(r.palette[o.color].main,r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===o.variant&&{backgroundColor:(r.vars||r).palette.grey.A100,boxShadow:(r.vars||r).shadows[4],"@media (hover: none)":{boxShadow:(r.vars||r).shadows[2],backgroundColor:(r.vars||r).palette.grey[300]}},"contained"===o.variant&&"inherit"!==o.color&&{backgroundColor:(r.vars||r).palette[o.color].dark,"@media (hover: none)":{backgroundColor:(r.vars||r).palette[o.color].main}}),"&:active":Object(a.a)({},"contained"===o.variant&&{boxShadow:(r.vars||r).shadows[8]})},Object(A.a)(t,"&.".concat(Oe.focusVisible),Object(a.a)({},"contained"===o.variant&&{boxShadow:(r.vars||r).shadows[6]})),Object(A.a)(t,"&.".concat(Oe.disabled),Object(a.a)({color:(r.vars||r).palette.action.disabled},"outlined"===o.variant&&{border:"1px solid ".concat((r.vars||r).palette.action.disabledBackground)},"outlined"===o.variant&&"secondary"===o.color&&{border:"1px solid ".concat((r.vars||r).palette.action.disabled)},"contained"===o.variant&&{color:(r.vars||r).palette.action.disabled,boxShadow:(r.vars||r).shadows[0],backgroundColor:(r.vars||r).palette.action.disabledBackground})),t),"text"===o.variant&&{padding:"6px 8px"},"text"===o.variant&&"inherit"!==o.color&&{color:(r.vars||r).palette[o.color].main},"outlined"===o.variant&&{padding:"5px 15px",border:"1px solid currentColor"},"outlined"===o.variant&&"inherit"!==o.color&&{color:(r.vars||r).palette[o.color].main,border:r.vars?"1px solid rgba(".concat(r.vars.palette[o.color].mainChannel," / 0.5)"):"1px solid ".concat(Object(ke.a)(r.palette[o.color].main,.5))},"contained"===o.variant&&{color:r.vars?r.vars.palette.text.primary:null==(i=(n=r.palette).getContrastText)?void 0:i.call(n,r.palette.grey[300]),backgroundColor:(r.vars||r).palette.grey[300],boxShadow:(r.vars||r).shadows[2]},"contained"===o.variant&&"inherit"!==o.color&&{color:(r.vars||r).palette[o.color].contrastText,backgroundColor:(r.vars||r).palette[o.color].main},"inherit"===o.color&&{color:"inherit",borderColor:"currentColor"},"small"===o.size&&"text"===o.variant&&{padding:"4px 5px",fontSize:r.typography.pxToRem(13)},"large"===o.size&&"text"===o.variant&&{padding:"8px 11px",fontSize:r.typography.pxToRem(15)},"small"===o.size&&"outlined"===o.variant&&{padding:"3px 9px",fontSize:r.typography.pxToRem(13)},"large"===o.size&&"outlined"===o.variant&&{padding:"7px 21px",fontSize:r.typography.pxToRem(15)},"small"===o.size&&"contained"===o.variant&&{padding:"4px 10px",fontSize:r.typography.pxToRem(13)},"large"===o.size&&"contained"===o.variant&&{padding:"8px 22px",fontSize:r.typography.pxToRem(15)},o.fullWidth&&{width:"100%"})}),(function(e){var t;return e.ownerState.disableElevation&&(t={boxShadow:"none","&:hover":{boxShadow:"none"}},Object(A.a)(t,"&.".concat(Oe.focusVisible),{boxShadow:"none"}),Object(A.a)(t,"&:active",{boxShadow:"none"}),Object(A.a)(t,"&.".concat(Oe.disabled),{boxShadow:"none"}),t)})),De=Object(T.a)("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:function(e,t){var i=e.ownerState;return[t.startIcon,t["iconSize".concat(Object(Ce.a)(i.size))]]}})((function(e){var t=e.ownerState;return Object(a.a)({display:"inherit",marginRight:8,marginLeft:-4},"small"===t.size&&{marginLeft:-2},Ie(t))})),ze=Object(T.a)("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:function(e,t){var i=e.ownerState;return[t.endIcon,t["iconSize".concat(Object(Ce.a)(i.size))]]}})((function(e){var t=e.ownerState;return Object(a.a)({display:"inherit",marginRight:-4,marginLeft:8},"small"===t.size&&{marginRight:-2},Ie(t))})),Le=r.forwardRef((function(e,t){var i=r.useContext(Te),o=Object(we.a)(i,e),l=Object(s.a)({props:o,name:"MuiButton"}),c=l.children,u=l.color,h=void 0===u?"primary":u,d=l.component,f=void 0===d?"button":d,p=l.className,m=l.disabled,g=void 0!==m&&m,v=l.disableElevation,y=void 0!==v&&v,x=l.disableFocusRipple,b=void 0!==x&&x,_=l.endIcon,w=l.focusVisibleClassName,k=l.fullWidth,S=void 0!==k&&k,C=l.size,A=void 0===C?"medium":C,O=l.startIcon,T=l.type,M=l.variant,I=void 0===M?"text":M,P=Object(n.a)(l,Me),D=Object(a.a)({},l,{color:h,component:f,disabled:g,disableElevation:y,disableFocusRipple:b,fullWidth:S,size:A,type:T,variant:I}),L=function(e){var t=e.color,i=e.disableElevation,n=e.fullWidth,r=e.size,o=e.variant,s=e.classes,l={root:["root",o,"".concat(o).concat(Object(Ce.a)(t)),"size".concat(Object(Ce.a)(r)),"".concat(o,"Size").concat(Object(Ce.a)(r)),"inherit"===t&&"colorInherit",i&&"disableElevation",n&&"fullWidth"],label:["label"],startIcon:["startIcon","iconSize".concat(Object(Ce.a)(r))],endIcon:["endIcon","iconSize".concat(Object(Ce.a)(r))]},c=Object(z.a)(l,Ae,s);return Object(a.a)({},s,c)}(D),j=L.root,R=Object(n.a)(L,Ee),F=O&&Object(V.jsx)(De,{className:R.startIcon,ownerState:D,children:O}),B=_&&Object(V.jsx)(ze,{className:R.endIcon,ownerState:D,children:_});return Object(V.jsxs)(Pe,Object(a.a)({ownerState:D,className:Object(E.a)(i.className,j,p),component:f,disabled:g,focusRipple:!b,focusVisibleClassName:Object(E.a)(R.focusVisible,w),ref:t,type:T},P,{classes:R,children:[F,c,B]}))}));function je(e){return Object(R.a)("MuiDialogActions",e)}Object(M.a)("MuiDialogActions",["root","spacing"]);var Re=["className","disableSpacing"],Fe=Object(T.a)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:function(e,t){var i=e.ownerState;return[t.root,!i.disableSpacing&&t.spacing]}})((function(e){var t=e.ownerState;return Object(a.a)({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!t.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})})),Be=r.forwardRef((function(e,t){var i=Object(s.a)({props:e,name:"MuiDialogActions"}),r=i.className,o=i.disableSpacing,l=void 0!==o&&o,c=Object(n.a)(i,Re),u=Object(a.a)({},i,{disableSpacing:l}),h=function(e){var t=e.classes,i={root:["root",!e.disableSpacing&&"spacing"]};return Object(z.a)(i,je,t)}(u);return Object(V.jsx)(Fe,Object(a.a)({className:Object(E.a)(h.root,r),ownerState:u,ref:t},c))})),Ne=function(e){var t=e.onAccept,i=e.onClear,a=e.onCancel,n=e.onSetToday,o=e.actions,s=r.useContext(me),l=x(),c="function"===typeof o?o(s):o;if(null==c||0===c.length)return null;var u=null==c?void 0:c.map((function(e){switch(e){case"clear":return Object(V.jsx)(Le,{onClick:i,children:l.clearButtonLabel},e);case"cancel":return Object(V.jsx)(Le,{onClick:a,children:l.cancelButtonLabel},e);case"accept":return Object(V.jsx)(Le,{onClick:t,children:l.okButtonLabel},e);case"today":return Object(V.jsx)(Le,{onClick:n,children:l.todayButtonLabel},e);default:return null}}));return Object(V.jsx)(Be,{children:u})},Ve=["onClick","onTouchStart"],Ye=Object(T.a)(ye.a)((function(e){return{zIndex:e.theme.zIndex.modal}})),We=Object(T.a)(ve.a)((function(e){var t=e.ownerState;return Object(a.a)({transformOrigin:"top center",outline:0},"top"===t.placement&&{transformOrigin:"bottom center"})}));var He=function(e){var t,i=e.anchorEl,o=e.children,s=e.containerRef,c=void 0===s?null:s,u=e.onBlur,h=e.onClose,d=e.onClear,f=e.onAccept,p=e.onCancel,m=e.onSetToday,g=e.open,v=e.PopperProps,y=e.role,x=e.TransitionComponent,b=void 0===x?ge.a:x,_=e.TrapFocusProps,w=e.PaperProps,k=void 0===w?{}:w,S=e.components,C=e.componentsProps;r.useEffect((function(){function e(e){!g||"Escape"!==e.key&&"Esc"!==e.key||h()}return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[h,g]);var A=r.useRef(null);r.useEffect((function(){"tooltip"!==y&&(g?A.current=document.activeElement:A.current&&A.current instanceof HTMLElement&&A.current.focus())}),[g,y]);var O=function(e,t){var i=r.useRef(!1),a=r.useRef(!1),n=r.useRef(null),o=r.useRef(!1);r.useEffect((function(){if(e)return document.addEventListener("mousedown",t,!0),document.addEventListener("touchstart",t,!0),function(){document.removeEventListener("mousedown",t,!0),document.removeEventListener("touchstart",t,!0),o.current=!1};function t(){o.current=!0}}),[e]);var s=Object(be.a)((function(e){if(o.current){var r=a.current;a.current=!1;var s=Object(_e.a)(n.current);if(!(!n.current||"clientX"in e&&function(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}(e,s)))if(i.current)i.current=!1;else(e.composedPath?e.composedPath().indexOf(n.current)>-1:!s.documentElement.contains(e.target)||n.current.contains(e.target))||r||t(e)}})),l=function(){a.current=!0};return r.useEffect((function(){if(e){var t=Object(_e.a)(n.current),a=function(){i.current=!0};return t.addEventListener("touchstart",s),t.addEventListener("touchmove",a),function(){t.removeEventListener("touchstart",s),t.removeEventListener("touchmove",a)}}}),[e,s]),r.useEffect((function(){if(e){var t=Object(_e.a)(n.current);return t.addEventListener("click",s),function(){t.removeEventListener("click",s),a.current=!1}}}),[e,s]),[n,l,l]}(g,null!=u?u:h),T=Object(l.a)(O,3),M=T[0],E=T[1],I=T[2],P=r.useRef(null),D=Object(pe.a)(P,c),z=Object(pe.a)(D,M),L=e,j=k.onClick,R=k.onTouchStart,F=Object(n.a)(k,Ve),B=null!=(t=null==S?void 0:S.ActionBar)?t:Ne;return Object(V.jsx)(Ye,Object(a.a)({transition:!0,role:y,open:g,anchorEl:i,ownerState:L,onKeyDown:function(e){"Escape"===e.key&&(e.stopPropagation(),h())}},v,{children:function(e){var t=e.TransitionProps,i=e.placement;return Object(V.jsx)(xe.a,Object(a.a)({open:g,disableAutoFocus:!0,disableEnforceFocus:"tooltip"===y,isEnabled:function(){return!0}},_,{children:Object(V.jsx)(b,Object(a.a)({},t,{children:Object(V.jsxs)(We,Object(a.a)({tabIndex:-1,elevation:8,ref:z,onClick:function(e){E(e),j&&j(e)},onTouchStart:function(e){I(e),R&&R(e)},ownerState:Object(a.a)({},L,{placement:i})},F,{children:[o,Object(V.jsx)(B,Object(a.a)({onAccept:f,onClear:d,onCancel:p,onSetToday:m,actions:[]},null==C?void 0:C.actionBar))]}))}))}))}}))};function Ue(e){var t=e.children,i=e.DateInputProps,n=e.KeyboardDateInputComponent,o=e.onClear,s=e.onDismiss,l=e.onCancel,c=e.onAccept,u=e.onSetToday,h=e.open,d=e.PopperProps,f=e.PaperProps,p=e.TransitionComponent,m=e.components,g=e.componentsProps,v=r.useRef(null),y=Object(pe.a)(i.inputRef,v);return Object(V.jsxs)(me.Provider,{value:"desktop",children:[Object(V.jsx)(n,Object(a.a)({},i,{inputRef:y})),Object(V.jsx)(He,{role:"dialog",open:h,anchorEl:v.current,TransitionComponent:p,PopperProps:d,PaperProps:f,onClose:s,onCancel:l,onClear:o,onAccept:c,onSetToday:u,components:m,componentsProps:g,children:t})]})}var Xe=i(145);function Ge(e,t){return Array.isArray(t)?t.every((function(t){return-1!==e.indexOf(t)})):-1!==e.indexOf(t)}var qe=function(e,t){return function(i){"Enter"!==i.key&&" "!==i.key||(e(),i.preventDefault(),i.stopPropagation()),t&&t(i)}};function Ze(e){var t,i,a=e.onChange,n=e.onViewChange,o=e.openTo,s=e.view,c=e.views,u=Object(Xe.a)({name:"Picker",state:"view",controlled:s,default:o&&Ge(c,o)?o:c[0]}),h=Object(l.a)(u,2),d=h[0],f=h[1],p=null!=(t=c[c.indexOf(d)-1])?t:null,m=null!=(i=c[c.indexOf(d)+1])?i:null,g=r.useCallback((function(e){f(e),n&&n(e)}),[f,n]),v=r.useCallback((function(){m&&g(m)}),[m,g]);return{handleChangeAndOpenNext:r.useCallback((function(e,t){var i="finish"===t,n=i&&Boolean(m)?"partial":t;a(e,n),i&&v()}),[m,a,v]),nextView:m,previousView:p,openNext:v,openView:d,setOpenView:g}}var Ke=i(516),Je=i(387),Qe=i(193),$e=i(194),et=i(256),tt=i(254),it={x:110,y:110},at=it.x-it.x,nt=0-it.y,rt=function(e,t,i){var a=t-it.x,n=i-it.y,r=Math.atan2(at,nt)-Math.atan2(a,n),o=r*(180/Math.PI);o=Math.round(o/e)*e,o%=360;var s=Math.floor(o/e)||0,l=Math.pow(a,2)+Math.pow(n,2);return{value:s,distance:Math.sqrt(l)}},ot=["className","hasSelected","isInner","type","value"],st=Object(T.a)("div")((function(e){var t=e.theme,i=e.ownerState;return Object(a.a)({width:2,backgroundColor:t.palette.primary.main,position:"absolute",left:"calc(50% - 1px)",bottom:"50%",transformOrigin:"center bottom 0px"},i.toAnimateTransform&&{transition:t.transitions.create(["transform","height"])})})),lt=Object(T.a)("div")((function(e){var t=e.theme,i=e.ownerState;return Object(a.a)({width:4,height:4,backgroundColor:t.palette.primary.contrastText,borderRadius:"50%",position:"absolute",top:-21,left:"calc(50% - ".concat(18,"px)"),border:"".concat(16,"px solid ").concat(t.palette.primary.main),boxSizing:"content-box"},i.hasSelected&&{backgroundColor:t.palette.primary.main})})),ct=function(e){Object(et.a)(i,e);var t=Object(tt.a)(i);function i(){var e;Object(Qe.a)(this,i);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={toAnimateTransform:!1,previousType:void 0},e}return Object($e.a)(i,[{key:"render",value:function(){var e=this.props,t=e.className,i=e.isInner,r=e.type,o=e.value,s=Object(n.a)(e,ot),l=Object(a.a)({},this.props,this.state);return Object(V.jsx)(st,Object(a.a)({style:function(){var e=360/("hours"===r?12:60)*o;return"hours"===r&&o>12&&(e-=360),{height:Math.round(220*(i?.26:.4)),transform:"rotateZ(".concat(e,"deg)")}}(),className:t,ownerState:l},s,{children:Object(V.jsx)(lt,{ownerState:l})}))}}]),i}(r.Component);ct.getDerivedStateFromProps=function(e,t){return e.type!==t.previousType?{toAnimateTransform:!0,previousType:e.type}:{toAnimateTransform:!1,previousType:e.type}};var ut=Object(T.a)("div")((function(e){return{display:"flex",justifyContent:"center",alignItems:"center",margin:e.theme.spacing(2)}})),ht=Object(T.a)("div")({backgroundColor:"rgba(0,0,0,.07)",borderRadius:"50%",height:220,width:220,flexShrink:0,position:"relative",pointerEvents:"none"}),dt=Object(T.a)("div")((function(e){var t=e.ownerState;return Object(a.a)({width:"100%",height:"100%",position:"absolute",pointerEvents:"auto",outline:0,touchAction:"none",userSelect:"none"},t.disabled?{}:{"@media (pointer: fine)":{cursor:"pointer",borderRadius:"50%"},"&:active":{cursor:"move"}})})),ft=Object(T.a)("div")((function(e){return{width:6,height:6,borderRadius:"50%",backgroundColor:e.theme.palette.primary.main,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}})),pt=Object(T.a)(q.a)((function(e){var t=e.theme,i=e.ownerState;return Object(a.a)({zIndex:1,position:"absolute",bottom:i.ampmInClock?64:8,left:8},"am"===i.meridiemMode&&{backgroundColor:t.palette.primary.main,color:t.palette.primary.contrastText,"&:hover":{backgroundColor:t.palette.primary.light}})})),mt=Object(T.a)(q.a)((function(e){var t=e.theme,i=e.ownerState;return Object(a.a)({zIndex:1,position:"absolute",bottom:i.ampmInClock?64:8,right:8},"pm"===i.meridiemMode&&{backgroundColor:t.palette.primary.main,color:t.palette.primary.contrastText,"&:hover":{backgroundColor:t.palette.primary.light}})}));function gt(e){var t=e.ampm,i=e.ampmInClock,a=e.autoFocus,n=e.children,o=e.date,s=e.getClockLabelText,l=e.handleMeridiemChange,c=e.isTimeDisabled,u=e.meridiemMode,h=e.minutesStep,d=void 0===h?1:h,f=e.onChange,p=e.selectedId,m=e.type,g=e.value,y=e.disabled,x=e.readOnly,b=e,_=v(),w=r.useContext(me),k=r.useRef(!1),S=c(g,m),C=!t&&"hours"===m&&(g<1||g>12),A=function(e,t){y||x||c(e,m)||f(e,t)},T=function(e,i){var a=e.offsetX,n=e.offsetY;if(void 0===a){var r=e.target.getBoundingClientRect();a=e.changedTouches[0].clientX-r.left,n=e.changedTouches[0].clientY-r.top}var o="seconds"===m||"minutes"===m?function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=6*i,n=rt(a,e,t),r=n.value;return r=r*i%60}(a,n,d):function(e,t,i){var a=rt(30,e,t),n=a.value,r=a.distance,o=n||12;return i?o%=12:r<74&&(o+=12,o%=24),o}(a,n,Boolean(t));A(o,i)},M=r.useMemo((function(){return"hours"===m||g%5===0}),[m,g]),E="minutes"===m?d:1,I=r.useRef(null);Object(Je.a)((function(){a&&I.current.focus()}),[a]);return Object(V.jsxs)(ut,{children:[Object(V.jsxs)(ht,{children:[Object(V.jsx)(dt,{onTouchMove:function(e){k.current=!0,T(e,"shallow")},onTouchEnd:function(e){k.current&&(T(e,"finish"),k.current=!1)},onMouseUp:function(e){k.current&&(k.current=!1),T(e.nativeEvent,"finish")},onMouseMove:function(e){e.buttons>0&&T(e.nativeEvent,"shallow")},ownerState:{disabled:y}}),!S&&Object(V.jsxs)(r.Fragment,{children:[Object(V.jsx)(ft,{}),o&&Object(V.jsx)(ct,{type:m,value:g,isInner:C,hasSelected:M})]}),Object(V.jsx)("div",{"aria-activedescendant":p,"aria-label":s(m,o,_),ref:I,role:"listbox",onKeyDown:function(e){if(!k.current)switch(e.key){case"Home":A(0,"partial"),e.preventDefault();break;case"End":A("minutes"===m?59:23,"partial"),e.preventDefault();break;case"ArrowUp":A(g+E,"partial"),e.preventDefault();break;case"ArrowDown":A(g-E,"partial"),e.preventDefault()}},tabIndex:0,children:n})]}),t&&("desktop"===w||i)&&Object(V.jsxs)(r.Fragment,{children:[Object(V.jsx)(pt,{onClick:x?void 0:function(){return l("am")},disabled:y||null===u,ownerState:b,children:Object(V.jsx)(O.a,{variant:"caption",children:"AM"})}),Object(V.jsx)(mt,{disabled:y||null===u,onClick:x?void 0:function(){return l("pm")},ownerState:b,children:Object(V.jsx)(O.a,{variant:"caption",children:"PM"})})]})]})}var vt=["className","disabled","index","inner","label","selected"],yt=Object(M.a)("PrivateClockNumber",["selected","disabled"]),xt=Object(T.a)("span")((function(e){var t,i=e.theme,n=e.ownerState;return Object(a.a)((t={height:36,width:36,position:"absolute",left:"calc((100% - ".concat(36,"px) / 2)"),display:"inline-flex",justifyContent:"center",alignItems:"center",borderRadius:"50%",color:i.palette.text.primary,fontFamily:i.typography.fontFamily,"&:focused":{backgroundColor:i.palette.background.paper}},Object(A.a)(t,"&.".concat(yt.selected),{color:i.palette.primary.contrastText}),Object(A.a)(t,"&.".concat(yt.disabled),{pointerEvents:"none",color:i.palette.text.disabled}),t),n.inner&&Object(a.a)({},i.typography.body2,{color:i.palette.text.secondary}))}));function bt(e){var t=e.className,i=e.disabled,r=e.index,o=e.inner,s=e.label,l=e.selected,c=Object(n.a)(e,vt),u=e,h=r%12/12*Math.PI*2-Math.PI/2,d=91*(o?.65:1),f=Math.round(Math.cos(h)*d),p=Math.round(Math.sin(h)*d);return Object(V.jsx)(xt,Object(a.a)({className:Object(E.a)(t,l&&yt.selected,i&&yt.disabled),"aria-disabled":!!i||void 0,"aria-selected":!!l||void 0,role:"option",style:{transform:"translate(".concat(f,"px, ").concat(p+92,"px")},ownerState:u},c,{children:s}))}var _t=function(e){for(var t=e.ampm,i=e.date,a=e.getClockNumberText,n=e.isDisabled,r=e.selectedId,o=e.utils,s=i?o.getHours(i):null,l=[],c=t?12:23,u=function(e){return null!==s&&(t?12===e?12===s||0===s:s===e||s-12===e:s===e)},h=t?1:0;h<=c;h+=1){var d=h.toString();0===h&&(d="00");var f=!t&&(0===h||h>12);d=o.formatNumber(d);var p=u(h);l.push(Object(V.jsx)(bt,{id:p?r:void 0,index:h,inner:f,selected:p,disabled:n(h),label:d,"aria-label":a(d)},h))}return l},wt=function(e){var t=e.utils,i=e.value,a=e.isDisabled,n=e.getClockNumberText,r=e.selectedId,o=t.formatNumber;return[[5,o("05")],[10,o("10")],[15,o("15")],[20,o("20")],[25,o("25")],[30,o("30")],[35,o("35")],[40,o("40")],[45,o("45")],[50,o("50")],[55,o("55")],[0,o("00")]].map((function(e,t){var o=Object(l.a)(e,2),s=o[0],c=o[1],u=s===i;return Object(V.jsx)(bt,{label:c,id:u?r:void 0,index:t+1,inner:!1,disabled:a(s),selected:u,"aria-label":n(c)},s)}))},kt=["children","className","components","componentsProps","isLeftDisabled","isLeftHidden","isRightDisabled","isRightHidden","leftArrowButtonText","onLeftClick","onRightClick","rightArrowButtonText"],St=Object(M.a)("MuiPickersArrowSwitcher",["root","spacer","button"]),Ct=Object(T.a)("div",{name:"MuiPickersArrowSwitcher",slot:"Root",overridesResolver:function(e,t){return t.root}})({display:"flex"}),At=Object(T.a)("div",{name:"MuiPickersArrowSwitcher",slot:"Spacer",overridesResolver:function(e,t){return t.spacer}})((function(e){return{width:e.theme.spacing(3)}})),Ot=Object(T.a)(q.a,{name:"MuiPickersArrowSwitcher",slot:"Button",overridesResolver:function(e,t){return t.button}})((function(e){var t=e.ownerState;return Object(a.a)({},t.hidden&&{visibility:"hidden"})})),Tt=r.forwardRef((function(e,t){var i=e.children,r=e.className,o=e.components,s=e.componentsProps,l=e.isLeftDisabled,c=e.isLeftHidden,u=e.isRightDisabled,h=e.isRightHidden,d=e.leftArrowButtonText,f=e.onLeftClick,p=e.onRightClick,m=e.rightArrowButtonText,g=Object(n.a)(e,kt),v="rtl"===Object(L.a)().direction,y=(null==s?void 0:s.leftArrowButton)||{},x=(null==o?void 0:o.LeftArrowIcon)||J,b=(null==s?void 0:s.rightArrowButton)||{},_=(null==o?void 0:o.RightArrowIcon)||Q,w=e;return Object(V.jsxs)(Ct,Object(a.a)({ref:t,className:Object(E.a)(St.root,r),ownerState:w},g,{children:[Object(V.jsx)(Ot,Object(a.a)({as:null==o?void 0:o.LeftArrowButton,size:"small","aria-label":d,title:d,disabled:l,edge:"end",onClick:f},y,{className:Object(E.a)(St.button,y.className),ownerState:Object(a.a)({},w,y,{hidden:c}),children:v?Object(V.jsx)(_,{}):Object(V.jsx)(x,{})})),i?Object(V.jsx)(O.a,{variant:"subtitle1",component:"span",children:i}):Object(V.jsx)(At,{className:St.spacer,ownerState:w}),Object(V.jsx)(Ot,Object(a.a)({as:null==o?void 0:o.RightArrowButton,size:"small","aria-label":m,title:m,edge:"start",disabled:u,onClick:p},b,{className:Object(E.a)(St.button,b.className),ownerState:Object(a.a)({},w,b,{hidden:h}),children:v?Object(V.jsx)(x,{}):Object(V.jsx)(_,{})}))]}))})),Mt=function(e,t,i){if(i&&(e>=12?"pm":"am")!==t)return"am"===t?e-12:e+12;return e},Et=function(e,t){return 3600*t.getHours(e)+60*t.getMinutes(e)+t.getSeconds(e)};function It(e,t,i){var a=v();return{meridiemMode:function(e,t){return e?t.getHours(e)>=12?"pm":"am":null}(e,a),handleMeridiemChange:r.useCallback((function(n){var r=null==e?null:function(e,t,i,a){var n=Mt(a.getHours(e),t,i);return a.setHours(e,n)}(e,n,Boolean(t),a);i(r,"partial")}),[t,e,i,a])}}function Pt(e){return Object(R.a)("MuiClockPicker",e)}Object(M.a)("MuiClockPicker",["root","arrowSwitcher"]);var Dt=Object(T.a)("div")({overflowX:"hidden",width:320,maxHeight:358,display:"flex",flexDirection:"column",margin:"0 auto"}),zt=Object(T.a)(Dt,{name:"MuiClockPicker",slot:"Root",overridesResolver:function(e,t){return t.root}})({display:"flex",flexDirection:"column"}),Lt=Object(T.a)(Tt,{name:"MuiClockPicker",slot:"ArrowSwitcher",overridesResolver:function(e,t){return t.arrowSwitcher}})({position:"absolute",right:12,top:15}),jt=function(){},Rt=r.forwardRef((function(e,t){var i=Object(s.a)({props:e,name:"MuiClockPicker"}),n=i.ampm,o=void 0!==n&&n,l=i.ampmInClock,c=void 0!==l&&l,u=i.autoFocus,h=i.components,d=i.componentsProps,f=i.date,p=i.disableIgnoringDatePartForTimeValidation,m=i.getClockLabelText,g=i.getHoursClockNumberText,y=i.getMinutesClockNumberText,_=i.getSecondsClockNumberText,w=i.leftArrowButtonText,k=i.maxTime,S=i.minTime,C=i.minutesStep,A=void 0===C?1:C,O=i.rightArrowButtonText,T=i.shouldDisableTime,M=i.showViewSwitcher,I=i.onChange,P=i.view,D=i.views,L=void 0===D?["hours","minutes"]:D,j=i.openTo,R=i.onViewChange,F=i.className,B=i.disabled,N=i.readOnly;jt({leftArrowButtonText:w,rightArrowButtonText:O,getClockLabelText:m,getHoursClockNumberText:g,getMinutesClockNumberText:y,getSecondsClockNumberText:_});var Y=x(),W=null!=w?w:Y.openPreviousView,H=null!=O?O:Y.openNextView,U=null!=m?m:Y.clockLabelText,X=null!=g?g:Y.hoursClockNumberText,G=null!=y?y:Y.minutesClockNumberText,q=null!=_?_:Y.secondsClockNumberText,Z=Ze({view:P,views:L,openTo:j,onViewChange:R,onChange:I}),K=Z.openView,J=Z.setOpenView,Q=Z.nextView,$=Z.previousView,ee=Z.handleChangeAndOpenNext,te=b(),ie=v(),ae=r.useMemo((function(){return f||ie.setSeconds(ie.setMinutes(ie.setHours(te,0),0),0)}),[f,te,ie]),ne=It(ae,o,ee),re=ne.meridiemMode,oe=ne.handleMeridiemChange,se=r.useCallback((function(e,t){var i=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return function(i,a){return e?t.isAfter(i,a):Et(i,t)>Et(a,t)}}(p,ie),a=function(e){var t=e.start,a=e.end;return(!S||!i(S,a))&&(!k||!i(t,k))},n=function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e%i===0&&(!T||!T(e,t))};switch(t){case"hours":var r=Mt(e,re,o),s=ie.setHours(ae,r);return!a({start:ie.setSeconds(ie.setMinutes(s,0),0),end:ie.setSeconds(ie.setMinutes(s,59),59)})||!n(r);case"minutes":var l=ie.setMinutes(ae,e);return!a({start:ie.setSeconds(l,0),end:ie.setSeconds(l,59)})||!n(e,A);case"seconds":var c=ie.setSeconds(ae,e);return!a({start:c,end:c})||!n(e);default:throw new Error("not supported")}}),[o,ae,p,k,re,S,A,T,ie]),le=Object(Ke.a)(),ce=r.useMemo((function(){switch(K){case"hours":var e=function(e,t){var i=Mt(e,re,o);ee(ie.setHours(ae,i),t)};return{onChange:e,value:ie.getHours(ae),children:_t({date:f,utils:ie,ampm:o,onChange:e,getClockNumberText:X,isDisabled:function(e){return B||se(e,"hours")},selectedId:le})};case"minutes":var t=ie.getMinutes(ae),i=function(e,t){ee(ie.setMinutes(ae,e),t)};return{value:t,onChange:i,children:wt({utils:ie,value:t,onChange:i,getClockNumberText:G,isDisabled:function(e){return B||se(e,"minutes")},selectedId:le})};case"seconds":var a=ie.getSeconds(ae),n=function(e,t){ee(ie.setSeconds(ae,e),t)};return{value:a,onChange:n,children:wt({utils:ie,value:a,onChange:n,getClockNumberText:q,isDisabled:function(e){return B||se(e,"seconds")},selectedId:le})};default:throw new Error("You must provide the type for ClockView")}}),[K,ie,f,o,X,G,q,re,ee,ae,se,le,B]),ue=i,he=function(e){var t=e.classes;return Object(z.a)({root:["root"],arrowSwitcher:["arrowSwitcher"]},Pt,t)}(ue);return Object(V.jsxs)(zt,{ref:t,className:Object(E.a)(he.root,F),ownerState:ue,children:[M&&Object(V.jsx)(Lt,{className:he.arrowSwitcher,leftArrowButtonText:W,rightArrowButtonText:H,components:h,componentsProps:d,onLeftClick:function(){return J($)},onRightClick:function(){return J(Q)},isLeftDisabled:!$,isRightDisabled:!Q,ownerState:ue}),Object(V.jsx)(gt,Object(a.a)({autoFocus:u,date:f,ampmInClock:c,type:K,ampm:o,getClockLabelText:U,minutesStep:A,isTimeDisabled:se,meridiemMode:re,handleMeridiemChange:oe,selectedId:le,disabled:B,readOnly:N},ce))]})})),Ft=["disabled","onSelect","selected","value"],Bt=Object(M.a)("PrivatePickersMonth",["root","selected"]),Nt=Object(T.a)(O.a)((function(e){var t=e.theme;return Object(a.a)({flex:"1 0 33.33%",display:"flex",alignItems:"center",justifyContent:"center",color:"unset",backgroundColor:"transparent",border:0,outline:0},t.typography.subtitle1,Object(A.a)({margin:"8px 0",height:36,borderRadius:18,cursor:"pointer","&:focus, &:hover":{backgroundColor:Object(ke.a)(t.palette.action.active,t.palette.action.hoverOpacity)},"&:disabled":{pointerEvents:"none",color:t.palette.text.secondary}},"&.".concat(Bt.selected),{color:t.palette.primary.contrastText,backgroundColor:t.palette.primary.main,"&:focus, &:hover":{backgroundColor:t.palette.primary.dark}}))})),Vt=function(e){var t=e.disabled,i=e.onSelect,r=e.selected,o=e.value,s=Object(n.a)(e,Ft),l=function(){i(o)};return Object(V.jsx)(Nt,Object(a.a)({component:"button",type:"button",className:Object(E.a)(Bt.root,r&&Bt.selected),tabIndex:t?-1:0,onClick:l,onKeyDown:qe(l),color:r?"primary":void 0,variant:r?"h5":"subtitle1",disabled:t},s))};function Yt(e){return Object(R.a)("MuiMonthPicker",e)}Object(M.a)("MuiMonthPicker",["root"]);var Wt=["className","date","disabled","disableFuture","disablePast","maxDate","minDate","onChange","shouldDisableMonth","readOnly"],Ht=Object(T.a)("div",{name:"MuiMonthPicker",slot:"Root",overridesResolver:function(e,t){return t.root}})({width:310,display:"flex",flexWrap:"wrap",alignContent:"stretch",margin:"0 4px"}),Ut=r.forwardRef((function(e,t){var i=v(),r=b(),o=y(),l=Object(s.a)({props:e,name:"MuiMonthPicker"}),c=l.className,u=l.date,h=l.disabled,d=l.disableFuture,f=l.disablePast,p=l.maxDate,m=void 0===p?o.maxDate:p,g=l.minDate,x=void 0===g?o.minDate:g,_=l.onChange,w=l.shouldDisableMonth,k=l.readOnly,S=Object(n.a)(l,Wt),C=l,A=function(e){var t=e.classes;return Object(z.a)({root:["root"]},Yt,t)}(C),O=null!=u?u:r,T=i.getMonth(O),M=function(e){var t=i.startOfMonth(f&&i.isAfter(r,x)?r:x),a=i.startOfMonth(d&&i.isBefore(r,m)?r:m);return!!i.isBefore(e,t)||(!!i.isAfter(e,a)||!!w&&w(e))},I=function(e){if(!k){var t=i.setMonth(O,e);_(t,"finish")}};return Object(V.jsx)(Ht,Object(a.a)({ref:t,className:Object(E.a)(A.root,c),ownerState:C},S,{children:i.getMonthArray(O).map((function(e){var t=i.getMonth(e),a=i.format(e,"monthShort");return Object(V.jsx)(Vt,{value:t,selected:t===T,onSelect:I,disabled:h||M(e),children:a},a)}))}))}));var Xt=function(e){var t=e.props,i=e.value,a=e.adapter,n=a.utils.date(),r=a.utils.date(i),o=t.shouldDisableDate,s=t.minDate,l=void 0===s?a.defaultDates.minDate:s,c=t.maxDate,u=void 0===c?a.defaultDates.maxDate:c,h=t.disableFuture,d=t.disablePast;if(null===r)return null;switch(!0){case!a.utils.isValid(i):return"invalidDate";case Boolean(o&&o(r)):return"shouldDisableDate";case Boolean(h&&a.utils.isAfterDay(r,n)):return"disableFuture";case Boolean(d&&a.utils.isBeforeDay(r,n)):return"disablePast";case Boolean(l&&a.utils.isBeforeDay(r,l)):return"minDate";case Boolean(u&&a.utils.isAfterDay(r,u)):return"maxDate";default:return null}},Gt=function(e){var t=e.shouldDisableDate,i=e.minDate,a=e.maxDate,n=e.disableFuture,o=e.disablePast,s=g();return r.useCallback((function(e){return null!==Xt({adapter:s,value:e,props:{shouldDisableDate:t,minDate:i,maxDate:a,disableFuture:n,disablePast:o}})}),[s,t,i,a,n,o])},qt=function(e,t){return e===t},Zt=function(e){return function(e,t,i){var a=e.value,n=e.onError,o=g(),s=r.useRef(null),l=t({adapter:o,value:a,props:e});return r.useEffect((function(){n&&!i(l,s.current)&&n(l,a),s.current=l}),[i,n,s,l,a]),l}(e,Xt,qt)},Kt=function(e){var t,i=e.date,n=e.defaultCalendarMonth,o=e.disableFuture,s=e.disablePast,c=e.disableSwitchToMonthOnDayFocus,u=void 0!==c&&c,h=e.maxDate,d=e.minDate,f=e.onMonthChange,p=e.reduceAnimations,m=e.shouldDisableDate,g=b(),y=v(),x=r.useRef(function(e,t,i){return function(n,r){switch(r.type){case"changeMonth":return Object(a.a)({},n,{slideDirection:r.direction,currentMonth:r.newMonth,isMonthSwitchingAnimating:!e});case"finishMonthSwitchingAnimation":return Object(a.a)({},n,{isMonthSwitchingAnimating:!1});case"changeFocusedDay":if(null!=n.focusedDay&&null!=r.focusedDay&&i.isSameDay(r.focusedDay,n.focusedDay))return n;var o=null!=r.focusedDay&&!t&&!i.isSameMonth(n.currentMonth,r.focusedDay);return Object(a.a)({},n,{focusedDay:r.focusedDay,isMonthSwitchingAnimating:o&&!e,currentMonth:o?i.startOfMonth(r.focusedDay):n.currentMonth,slideDirection:null!=r.focusedDay&&i.isAfterDay(r.focusedDay,n.currentMonth)?"left":"right"});default:throw new Error("missing support")}}}(Boolean(p),u,y)).current,_=r.useReducer(x,{isMonthSwitchingAnimating:!1,focusedDay:i||g,currentMonth:y.startOfMonth(null!=(t=null!=i?i:n)?t:g),slideDirection:"left"}),w=Object(l.a)(_,2),k=w[0],S=w[1],C=r.useCallback((function(e){S(Object(a.a)({type:"changeMonth"},e)),f&&f(e.newMonth)}),[f]),A=r.useCallback((function(e){var t=null!=e?e:g;y.isSameMonth(t,k.currentMonth)||C({newMonth:y.startOfMonth(t),direction:y.isAfterDay(t,k.currentMonth)?"left":"right"})}),[k.currentMonth,C,g,y]),O=Gt({shouldDisableDate:m,minDate:d,maxDate:h,disableFuture:o,disablePast:s}),T=r.useCallback((function(){S({type:"finishMonthSwitchingAnimation"})}),[]),M=r.useCallback((function(e){O(e)||S({type:"changeFocusedDay",focusedDay:e})}),[O]);return{calendarState:k,changeMonth:A,changeFocusedDay:M,isDateDisabled:O,onMonthSwitchingAnimationEnd:T,handleChangeMonth:C}},Jt=i(522),Qt=i(554),$t=Object(M.a)("PrivatePickersFadeTransitionGroup",["root"]),ei=Object(T.a)(Qt.a)({display:"block",position:"relative"}),ti=function(e){var t=e.children,i=e.className,a=e.reduceAnimations,n=e.transKey;return a?t:Object(V.jsx)(ei,{className:Object(E.a)($t.root,i),children:Object(V.jsx)(Jt.a,{appear:!1,mountOnEnter:!0,unmountOnExit:!0,timeout:{appear:500,enter:250,exit:0},children:t},n)})};function ii(e){return Object(R.a)("MuiPickersDay",e)}var ai=Object(M.a)("MuiPickersDay",["root","dayWithMargin","dayOutsideMonth","hiddenDaySpacingFiller","today","selected","disabled"]),ni=["autoFocus","className","day","disabled","disableHighlightToday","disableMargin","hidden","isAnimating","onClick","onDayFocus","onDaySelect","onFocus","onKeyDown","outsideCurrentMonth","selected","showDaysOutsideCurrentMonth","children","today"],ri=function(e){var t,i=e.theme,n=e.ownerState;return Object(a.a)({},i.typography.caption,(t={width:36,height:36,borderRadius:"50%",padding:0,backgroundColor:i.palette.background.paper,color:i.palette.text.primary,"&:hover":{backgroundColor:Object(ke.a)(i.palette.action.active,i.palette.action.hoverOpacity)},"&:focus":Object(A.a)({backgroundColor:Object(ke.a)(i.palette.action.active,i.palette.action.hoverOpacity)},"&.".concat(ai.selected),{willChange:"background-color",backgroundColor:i.palette.primary.dark})},Object(A.a)(t,"&.".concat(ai.selected),{color:i.palette.primary.contrastText,backgroundColor:i.palette.primary.main,fontWeight:i.typography.fontWeightMedium,transition:i.transitions.create("background-color",{duration:i.transitions.duration.short}),"&:hover":{willChange:"background-color",backgroundColor:i.palette.primary.dark}}),Object(A.a)(t,"&.".concat(ai.disabled),{color:i.palette.text.disabled}),t),!n.disableMargin&&{margin:"0 ".concat(2,"px")},n.outsideCurrentMonth&&n.showDaysOutsideCurrentMonth&&{color:i.palette.text.secondary},!n.disableHighlightToday&&n.today&&Object(A.a)({},"&:not(.".concat(ai.selected,")"),{border:"1px solid ".concat(i.palette.text.secondary)}))},oi=function(e,t){var i=e.ownerState;return[t.root,!i.disableMargin&&t.dayWithMargin,!i.disableHighlightToday&&i.today&&t.today,!i.outsideCurrentMonth&&i.showDaysOutsideCurrentMonth&&t.dayOutsideMonth,i.outsideCurrentMonth&&!i.showDaysOutsideCurrentMonth&&t.hiddenDaySpacingFiller]},si=Object(T.a)(Se.a,{name:"MuiPickersDay",slot:"Root",overridesResolver:oi})(ri),li=Object(T.a)("div",{name:"MuiPickersDay",slot:"Root",overridesResolver:oi})((function(e){var t=e.theme,i=e.ownerState;return Object(a.a)({},ri({theme:t,ownerState:i}),{visibility:"hidden"})})),ci=function(){},ui=r.forwardRef((function(e,t){var i=Object(s.a)({props:e,name:"MuiPickersDay"}),o=i.autoFocus,l=void 0!==o&&o,c=i.className,u=i.day,h=i.disabled,d=void 0!==h&&h,f=i.disableHighlightToday,p=void 0!==f&&f,m=i.disableMargin,g=void 0!==m&&m,y=i.isAnimating,x=i.onClick,b=i.onDayFocus,_=void 0===b?ci:b,w=i.onDaySelect,k=i.onFocus,S=i.onKeyDown,C=i.outsideCurrentMonth,A=i.selected,O=void 0!==A&&A,T=i.showDaysOutsideCurrentMonth,M=void 0!==T&&T,I=i.children,P=i.today,D=void 0!==P&&P,j=Object(n.a)(i,ni),R=Object(a.a)({},i,{autoFocus:l,disabled:d,disableHighlightToday:p,disableMargin:g,selected:O,showDaysOutsideCurrentMonth:M,today:D}),F=function(e){var t=e.selected,i=e.disableMargin,a=e.disableHighlightToday,n=e.today,r=e.outsideCurrentMonth,o=e.showDaysOutsideCurrentMonth,s=e.classes,l={root:["root",t&&"selected",!i&&"dayWithMargin",!a&&n&&"today",r&&o&&"dayOutsideMonth"],hiddenDaySpacingFiller:["hiddenDaySpacingFiller"]};return Object(z.a)(l,ii,s)}(R),B=v(),N=r.useRef(null),Y=Object(pe.a)(N,t);Object(Je.a)((function(){!l||d||y||C||N.current.focus()}),[l,d,y,C]);var W=Object(L.a)();return C&&!M?Object(V.jsx)(li,{className:Object(E.a)(F.root,F.hiddenDaySpacingFiller,c),ownerState:R}):Object(V.jsx)(si,Object(a.a)({className:Object(E.a)(F.root,c),ownerState:R,ref:Y,centerRipple:!0,disabled:d,"aria-label":I?void 0:B.format(u,"fullDate"),tabIndex:O?0:-1,onFocus:function(e){_&&_(u),k&&k(e)},onKeyDown:function(e){switch(void 0!==S&&S(e),e.key){case"ArrowUp":_(B.addDays(u,-7)),e.preventDefault();break;case"ArrowDown":_(B.addDays(u,7)),e.preventDefault();break;case"ArrowLeft":_(B.addDays(u,"ltr"===W.direction?-1:1)),e.preventDefault();break;case"ArrowRight":_(B.addDays(u,"ltr"===W.direction?1:-1)),e.preventDefault();break;case"Home":_(B.startOfWeek(u)),e.preventDefault();break;case"End":_(B.endOfWeek(u)),e.preventDefault();break;case"PageUp":_(B.getNextMonth(u)),e.preventDefault();break;case"PageDown":_(B.getPreviousMonth(u)),e.preventDefault()}},onClick:function(e){d||w(u,"finish"),x&&x(e)}},j,{children:I||B.format(u,"dayOfMonth")}))})),hi=function(e,t){return e.autoFocus===t.autoFocus&&e.isAnimating===t.isAnimating&&e.today===t.today&&e.disabled===t.disabled&&e.selected===t.selected&&e.disableMargin===t.disableMargin&&e.showDaysOutsideCurrentMonth===t.showDaysOutsideCurrentMonth&&e.disableHighlightToday===t.disableHighlightToday&&e.className===t.className&&e.outsideCurrentMonth===t.outsideCurrentMonth&&e.onDayFocus===t.onDayFocus&&e.onDaySelect===t.onDaySelect},di=r.memo(ui,hi),fi=i(219),pi=i(257),mi=i(243),gi=i(218),vi=i(241),yi=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return Object(mi.a)(e,t)}))},xi=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];return(t=e.call.apply(e,[this].concat(a))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,i){var a=t.resolveArguments(e,i),n=a[0],r=a[1];t.removeClasses(n,"exit"),t.addClass(n,r?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,i)},t.onEntering=function(e,i){var a=t.resolveArguments(e,i),n=a[0],r=a[1]?"appear":"enter";t.addClass(n,r,"active"),t.props.onEntering&&t.props.onEntering(e,i)},t.onEntered=function(e,i){var a=t.resolveArguments(e,i),n=a[0],r=a[1]?"appear":"enter";t.removeClasses(n,r),t.addClass(n,r,"done"),t.props.onEntered&&t.props.onEntered(e,i)},t.onExit=function(e){var i=t.resolveArguments(e)[0];t.removeClasses(i,"appear"),t.removeClasses(i,"enter"),t.addClass(i,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var i=t.resolveArguments(e)[0];t.addClass(i,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var i=t.resolveArguments(e)[0];t.removeClasses(i,"exit"),t.addClass(i,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,i){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,i]},t.getClassNames=function(e){var i=t.props.classNames,a="string"===typeof i,n=a?""+(a&&i?i+"-":"")+e:i[e];return{baseClassName:n,activeClassName:a?n+"-active":i[e+"Active"],doneClassName:a?n+"-done":i[e+"Done"]}},t}Object(fi.a)(t,e);var i=t.prototype;return i.addClass=function(e,t,i){var a=this.getClassNames(t)[i+"ClassName"],n=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===i&&n&&(a+=" "+n),"active"===i&&e&&Object(vi.a)(e),a&&(this.appliedClasses[t][i]=a,function(e,t){e&&t&&t.split(" ").forEach((function(t){return Object(pi.a)(e,t)}))}(e,a))},i.removeClasses=function(e,t){var i=this.appliedClasses[t],a=i.base,n=i.active,r=i.done;this.appliedClasses[t]={},a&&yi(e,a),n&&yi(e,n),r&&yi(e,r)},i.render=function(){var e=this.props,t=(e.classNames,Object(n.a)(e,["classNames"]));return o.a.createElement(gi.e,Object(a.a)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(o.a.Component);xi.defaultProps={classNames:""},xi.propTypes={};var bi=xi,_i=["children","className","reduceAnimations","slideDirection","transKey"],wi=Object(M.a)("PrivatePickersSlideTransition",["root","slideEnter-left","slideEnter-right","slideEnterActive","slideEnterActive","slideExit","slideExitActiveLeft-left","slideExitActiveLeft-right"]),ki=Object(T.a)(Qt.a)((function(e){var t,i=e.theme.transitions.create("transform",{duration:350,easing:"cubic-bezier(0.35, 0.8, 0.4, 1)"});return t={display:"block",position:"relative",overflowX:"hidden","& > *":{position:"absolute",top:0,right:0,left:0}},Object(A.a)(t,"& .".concat(wi["slideEnter-left"]),{willChange:"transform",transform:"translate(100%)",zIndex:1}),Object(A.a)(t,"& .".concat(wi["slideEnter-right"]),{willChange:"transform",transform:"translate(-100%)",zIndex:1}),Object(A.a)(t,"& .".concat(wi.slideEnterActive),{transform:"translate(0%)",transition:i}),Object(A.a)(t,"& .".concat(wi.slideExit),{transform:"translate(0%)"}),Object(A.a)(t,"& .".concat(wi["slideExitActiveLeft-left"]),{willChange:"transform",transform:"translate(-100%)",transition:i,zIndex:0}),Object(A.a)(t,"& .".concat(wi["slideExitActiveLeft-right"]),{willChange:"transform",transform:"translate(100%)",transition:i,zIndex:0}),t})),Si=function(e){return e.charAt(0).toUpperCase()},Ci=Object(T.a)("div")({display:"flex",justifyContent:"center",alignItems:"center"}),Ai=Object(T.a)(O.a)((function(e){return{width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:e.theme.palette.text.secondary}})),Oi=Object(T.a)("div")({display:"flex",justifyContent:"center",alignItems:"center",minHeight:240}),Ti=Object(T.a)((function(e){var t=e.children,i=e.className,o=e.reduceAnimations,s=e.slideDirection,l=e.transKey,c=Object(n.a)(e,_i);if(o)return Object(V.jsx)("div",{className:Object(E.a)(wi.root,i),children:t});var u={exit:wi.slideExit,enterActive:wi.slideEnterActive,enter:wi["slideEnter-".concat(s)],exitActive:wi["slideExitActiveLeft-".concat(s)]};return Object(V.jsx)(ki,{className:Object(E.a)(wi.root,i),childFactory:function(e){return r.cloneElement(e,{classNames:u})},children:Object(V.jsx)(bi,Object(a.a)({mountOnEnter:!0,unmountOnExit:!0,timeout:350,classNames:u},c,{children:t}),l)})}))({minHeight:240}),Mi=Object(T.a)("div")({overflow:"hidden"}),Ei=Object(T.a)("div")({margin:"".concat(2,"px 0"),display:"flex",justifyContent:"center"});function Ii(e){var t=b(),i=v(),n=e.autoFocus,o=e.onFocusedDayChange,s=e.className,l=e.currentMonth,c=e.selectedDays,u=e.disabled,h=e.disableHighlightToday,d=e.focusedDay,f=e.isMonthSwitchingAnimating,p=e.loading,m=e.onSelectedDaysChange,g=e.onMonthSwitchingAnimationEnd,y=e.readOnly,x=e.reduceAnimations,_=e.renderDay,w=e.renderLoading,k=void 0===w?function(){return Object(V.jsx)("span",{children:"..."})}:w,S=e.showDaysOutsideCurrentMonth,C=e.slideDirection,A=e.TransitionProps,O=e.disablePast,T=e.disableFuture,M=e.minDate,E=e.maxDate,I=e.shouldDisableDate,P=e.dayOfWeekFormatter,D=void 0===P?Si:P,z=Gt({shouldDisableDate:I,minDate:M,maxDate:E,disablePast:O,disableFuture:T}),L=r.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"finish";y||m(e,t)}),[m,y]),j=i.getMonth(l),R=c.filter((function(e){return!!e})).map((function(e){return i.startOfDay(e)})),F=j,B=r.useMemo((function(){return r.createRef()}),[F]);return Object(V.jsxs)(r.Fragment,{children:[Object(V.jsx)(Ci,{children:i.getWeekdays().map((function(e,t){var i;return Object(V.jsx)(Ai,{"aria-hidden":!0,variant:"caption",children:null!=(i=null==D?void 0:D(e))?i:e},e+t.toString())}))}),p?Object(V.jsx)(Oi,{children:k()}):Object(V.jsx)(Ti,Object(a.a)({transKey:F,onExited:g,reduceAnimations:x,slideDirection:C,className:s},A,{nodeRef:B,children:Object(V.jsx)(Mi,{ref:B,role:"grid",children:i.getWeekArray(l).map((function(e){return Object(V.jsx)(Ei,{role:"row",children:e.map((function(e){var r={key:null==e?void 0:e.toString(),day:e,isAnimating:f,disabled:u||z(e),autoFocus:n&&null!==d&&i.isSameDay(e,d),today:i.isSameDay(e,t),outsideCurrentMonth:i.getMonth(e)!==j,selected:R.some((function(t){return i.isSameDay(t,e)})),disableHighlightToday:h,showDaysOutsideCurrentMonth:S,onDayFocus:o,onDaySelect:L};return _?_(e,R,r):Object(V.jsx)("div",{role:"cell",children:Object(V.jsx)(di,Object(a.a)({},r))},r.key)}))},"week-".concat(e[0]))}))})}))]})}var Pi=Object(T.a)("div")({display:"flex",alignItems:"center",marginTop:16,marginBottom:8,paddingLeft:24,paddingRight:12,maxHeight:30,minHeight:30}),Di=Object(T.a)("div")((function(e){var t=e.theme;return Object(a.a)({display:"flex",maxHeight:30,overflow:"hidden",alignItems:"center",cursor:"pointer",marginRight:"auto"},t.typography.body1,{fontWeight:t.typography.fontWeightMedium})})),zi=Object(T.a)("div")({marginRight:6}),Li=Object(T.a)(q.a)({marginRight:"auto"}),ji=Object(T.a)(K)((function(e){var t=e.theme,i=e.ownerState;return Object(a.a)({willChange:"transform",transition:t.transitions.create("transform"),transform:"rotate(0deg)"},"year"===i.openView&&{transform:"rotate(180deg)"})})),Ri=function(){};function Fi(e){var t=e.components,i=void 0===t?{}:t,n=e.componentsProps,o=void 0===n?{}:n,s=e.currentMonth,l=e.disabled,c=e.disableFuture,u=e.disablePast,h=e.getViewSwitchingButtonText,d=e.leftArrowButtonText,f=e.maxDate,p=e.minDate,m=e.onMonthChange,g=e.onViewChange,y=e.openView,b=e.reduceAnimations,_=e.rightArrowButtonText,w=e.views;Ri({leftArrowButtonText:d,rightArrowButtonText:_,getViewSwitchingButtonText:h});var k=x(),S=null!=d?d:k.previousMonth,C=null!=_?_:k.nextMonth,A=null!=h?h:k.calendarViewSwitchingButtonAriaLabel,O=v(),T=o.switchViewButton||{},M=function(e,t){var i=t.disableFuture,a=t.maxDate,n=v();return r.useMemo((function(){var t=n.date(),r=n.startOfMonth(i&&n.isBefore(t,a)?t:a);return!n.isAfter(r,e)}),[i,a,e,n])}(s,{disableFuture:c,maxDate:f}),E=function(e,t){var i=t.disablePast,a=t.minDate,n=v();return r.useMemo((function(){var t=n.date(),r=n.startOfMonth(i&&n.isAfter(t,a)?t:a);return!n.isBefore(r,e)}),[i,a,e,n])}(s,{disablePast:u,minDate:p});if(1===w.length&&"year"===w[0])return null;var I=e;return Object(V.jsxs)(Pi,{ownerState:I,children:[Object(V.jsxs)(Di,{role:"presentation",onClick:function(){if(1!==w.length&&g&&!l)if(2===w.length)g(w.find((function(e){return e!==y}))||w[0]);else{var e=0!==w.indexOf(y)?0:1;g(w[e])}},ownerState:I,children:[Object(V.jsx)(ti,{reduceAnimations:b,transKey:O.format(s,"monthAndYear"),children:Object(V.jsx)(zi,{"aria-live":"polite",ownerState:I,children:O.format(s,"monthAndYear")})}),w.length>1&&!l&&Object(V.jsx)(Li,Object(a.a)({size:"small",as:i.SwitchViewButton,"aria-label":A(y)},T,{children:Object(V.jsx)(ji,{as:i.SwitchViewIcon,ownerState:I})}))]}),Object(V.jsx)(Jt.a,{in:"day"===y,children:Object(V.jsx)(Tt,{leftArrowButtonText:S,rightArrowButtonText:C,components:i,componentsProps:o,onLeftClick:function(){return m(O.getPreviousMonth(s),"right")},onRightClick:function(){return m(O.getNextMonth(s),"left")},isLeftDisabled:E,isRightDisabled:M})})]})}function Bi(e){return Object(R.a)("PrivatePickersYear",e)}var Ni=Object(M.a)("PrivatePickersYear",["root","modeMobile","modeDesktop","yearButton","disabled","selected"]),Vi=Object(T.a)("div")((function(e){var t=e.ownerState;return Object(a.a)({flexBasis:"33.3%",display:"flex",alignItems:"center",justifyContent:"center"},"desktop"===(null==t?void 0:t.wrapperVariant)&&{flexBasis:"25%"})})),Yi=Object(T.a)("button")((function(e){var t,i=e.theme;return Object(a.a)({color:"unset",backgroundColor:"transparent",border:0,outline:0},i.typography.subtitle1,(t={margin:"8px 0",height:36,width:72,borderRadius:18,cursor:"pointer","&:focus, &:hover":{backgroundColor:Object(ke.a)(i.palette.action.active,i.palette.action.hoverOpacity)}},Object(A.a)(t,"&.".concat(Ni.disabled),{color:i.palette.text.secondary}),Object(A.a)(t,"&.".concat(Ni.selected),{color:i.palette.primary.contrastText,backgroundColor:i.palette.primary.main,"&:focus, &:hover":{backgroundColor:i.palette.primary.dark}}),t))})),Wi=r.forwardRef((function(e,t){var i=e.autoFocus,n=e.className,o=e.children,s=e.disabled,l=e.onClick,c=e.onKeyDown,u=e.selected,h=e.value,d=r.useRef(null),f=Object(pe.a)(d,t),p=r.useContext(me),m=Object(a.a)({},e,{wrapperVariant:p}),g=function(e){var t=e.wrapperVariant,i=e.disabled,a=e.selected,n=e.classes,r={root:["root",t&&"mode".concat(Object(Ce.a)(t))],yearButton:["yearButton",i&&"disabled",a&&"selected"]};return Object(z.a)(r,Bi,n)}(m);return r.useEffect((function(){i&&d.current.focus()}),[i]),Object(V.jsx)(Vi,{className:Object(E.a)(g.root,n),ownerState:m,children:Object(V.jsx)(Yi,{ref:f,disabled:s,type:"button",tabIndex:u?0:-1,onClick:function(e){return l(e,h)},onKeyDown:function(e){return c(e,h)},className:g.yearButton,ownerState:m,children:o})})}));function Hi(e){return Object(R.a)("MuiYearPicker",e)}Object(M.a)("MuiYearPicker",["root"]);var Ui=Object(T.a)("div",{name:"MuiYearPicker",slot:"Root",overridesResolver:function(e,t){return t.root}})({display:"flex",flexDirection:"row",flexWrap:"wrap",overflowY:"auto",height:"100%",margin:"0 4px"}),Xi=r.forwardRef((function(e,t){var i=b(),a=Object(L.a)(),n=v(),o=y(),c=Object(s.a)({props:e,name:"MuiYearPicker"}),u=c.autoFocus,h=c.className,d=c.date,f=c.disabled,p=c.disableFuture,m=c.disablePast,g=c.maxDate,x=void 0===g?o.maxDate:g,_=c.minDate,w=void 0===_?o.minDate:_,k=c.onChange,S=c.readOnly,C=c.shouldDisableYear,A=c,O=function(e){var t=e.classes;return Object(z.a)({root:["root"]},Hi,t)}(A),T=d||i,M=n.getYear(T),I=r.useContext(me),P=r.useRef(null),D=r.useState(M),j=Object(l.a)(D,2),R=j[0],F=j[1],B=r.useCallback((function(e){return!(!m||!n.isBeforeYear(e,i))||(!(!p||!n.isAfterYear(e,i))||(!(!w||!n.isBeforeYear(e,w))||(!(!x||!n.isAfterYear(e,x))||!(!C||!C(e)))))}),[p,m,x,w,i,C,n]),N=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"finish";if(!S){var a=n.setYear(T,t);k(a,i)}},Y=r.useCallback((function(e){B(n.setYear(T,e))||F(e)}),[T,B,n]),W="desktop"===I?4:3,H=function(e,t){switch(e.key){case"ArrowUp":Y(t-W),e.preventDefault();break;case"ArrowDown":Y(t+W),e.preventDefault();break;case"ArrowLeft":Y(t+("ltr"===a.direction?-1:1)),e.preventDefault();break;case"ArrowRight":Y(t+("ltr"===a.direction?1:-1)),e.preventDefault()}};return Object(V.jsx)(Ui,{ref:t,className:Object(E.a)(O.root,h),ownerState:A,children:n.getYearRange(w,x).map((function(e){var t=n.getYear(e),i=t===M;return Object(V.jsx)(Wi,{selected:i,value:t,onClick:N,onKeyDown:H,autoFocus:u&&t===R,ref:i?P:void 0,disabled:f||B(e),children:n.format(e,"year")},n.format(e,"year"))}))})})),Gi="undefined"!==typeof navigator&&/(android)/i.test(navigator.userAgent),qi=function(e){return Object(R.a)("MuiCalendarPicker",e)},Zi=(Object(M.a)("MuiCalendarPicker",["root","viewTransitionContainer"]),["autoFocus","onViewChange","date","disableFuture","disablePast","defaultCalendarMonth","loading","onChange","onYearChange","onMonthChange","reduceAnimations","renderLoading","shouldDisableDate","shouldDisableMonth","shouldDisableYear","view","views","openTo","className","disabled","readOnly","minDate","maxDate"]),Ki=Object(T.a)(Dt,{name:"MuiCalendarPicker",slot:"Root",overridesResolver:function(e,t){return t.root}})({display:"flex",flexDirection:"column"}),Ji=Object(T.a)(ti,{name:"MuiCalendarPicker",slot:"ViewTransitionContainer",overridesResolver:function(e,t){return t.viewTransitionContainer}})({overflowY:"auto"}),Qi=r.forwardRef((function(e,t){var i=v(),o=y(),l=Object(s.a)({props:e,name:"MuiCalendarPicker"}),c=l.autoFocus,u=l.onViewChange,h=l.date,d=l.disableFuture,f=l.disablePast,p=l.defaultCalendarMonth,m=l.loading,g=void 0!==m&&m,x=l.onChange,b=l.onYearChange,w=l.onMonthChange,k=l.reduceAnimations,S=void 0===k?Gi:k,C=l.renderLoading,A=void 0===C?function(){return Object(V.jsx)("span",{children:"..."})}:C,O=l.shouldDisableDate,T=l.shouldDisableMonth,M=l.shouldDisableYear,I=l.view,P=l.views,D=void 0===P?["year","day"]:P,L=l.openTo,j=void 0===L?"day":L,R=l.className,F=l.disabled,B=l.readOnly,N=l.minDate,Y=void 0===N?o.minDate:N,W=l.maxDate,H=void 0===W?o.maxDate:W,U=Object(n.a)(l,Zi),X=Ze({view:I,views:D,openTo:j,onChange:x,onViewChange:u}),G=X.openView,q=X.setOpenView,Z=X.openNext,K=Kt({date:h,defaultCalendarMonth:p,reduceAnimations:S,onMonthChange:w,minDate:Y,maxDate:H,shouldDisableDate:O,disablePast:f,disableFuture:d}),J=K.calendarState,Q=K.changeFocusedDay,$=K.changeMonth,ee=K.handleChangeMonth,te=K.isDateDisabled,ie=K.onMonthSwitchingAnimationEnd,ae=r.useCallback((function(e,t){var a=i.startOfMonth(e),n=i.endOfMonth(e),r=te(e)?_({utils:i,date:e,minDate:i.isBefore(Y,a)?a:Y,maxDate:i.isAfter(H,n)?n:H,disablePast:f,disableFuture:d,isDateDisabled:te}):e;r?(x(r,t),null==w||w(a)):(Z(),$(a)),Q(r)}),[Q,d,f,te,H,Y,x,w,$,Z,i]),ne=r.useCallback((function(e,t){var a=i.startOfYear(e),n=i.endOfYear(e),r=te(e)?_({utils:i,date:e,minDate:i.isBefore(Y,a)?a:Y,maxDate:i.isAfter(H,n)?n:H,disablePast:f,disableFuture:d,isDateDisabled:te}):e;r?(x(r,t),null==b||b(r)):(Z(),$(a)),Q(r)}),[Q,d,f,te,H,Y,x,b,Z,i,$]),re=r.useCallback((function(e,t){return x(h&&e?i.mergeDateAndTime(e,h):e,t)}),[i,h,x]);r.useEffect((function(){if(h&&te(h)){var e=_({utils:i,date:h,minDate:Y,maxDate:H,disablePast:f,disableFuture:d,isDateDisabled:te});x(e,"partial")}}),[]),r.useEffect((function(){h&&$(h)}),[h]);var oe=l,se=function(e){var t=e.classes;return Object(z.a)({root:["root"],viewTransitionContainer:["viewTransitionContainer"]},qi,t)}(oe),le={disablePast:f,disableFuture:d,maxDate:H,minDate:Y},ce=F&&h||Y,ue=F&&h||H;return Object(V.jsxs)(Ki,{ref:t,className:Object(E.a)(se.root,R),ownerState:oe,children:[Object(V.jsx)(Fi,Object(a.a)({},U,{views:D,openView:G,currentMonth:J.currentMonth,onViewChange:q,onMonthChange:function(e,t){return ee({newMonth:e,direction:t})},minDate:ce,maxDate:ue,disabled:F,disablePast:f,disableFuture:d,reduceAnimations:S})),Object(V.jsx)(Ji,{reduceAnimations:S,className:se.viewTransitionContainer,transKey:G,ownerState:oe,children:Object(V.jsxs)("div",{children:["year"===G&&Object(V.jsx)(Xi,Object(a.a)({},U,le,{autoFocus:c,date:h,onChange:ne,shouldDisableYear:M,disabled:F,readOnly:B})),"month"===G&&Object(V.jsx)(Ut,Object(a.a)({},le,{className:R,date:h,onChange:ae,disabled:F,readOnly:B,shouldDisableMonth:T})),"day"===G&&Object(V.jsx)(Ii,Object(a.a)({},U,J,le,{autoFocus:c,onMonthSwitchingAnimationEnd:ie,onFocusedDayChange:Q,reduceAnimations:S,selectedDays:[h],onSelectedDaysChange:re,loading:g,renderLoading:A,disabled:F,readOnly:B,shouldDisableDate:O}))]})})]})})),$i=i(372),ea=function(e){var t=Object(r.useReducer)((function(e){return e+1}),0),i=Object(l.a)(t,2)[1],a=Object(r.useRef)(null),n=e.replace,o=e.append,s=n?n(e.format(e.value)):e.format(e.value),c=Object(r.useRef)(!1);return Object(r.useLayoutEffect)((function(){if(null!=a.current){var t=Object(l.a)(a.current,5),r=t[0],c=t[1],u=t[2],h=t[3],d=t[4];a.current=null;var f=h&&d,p=r.slice(c.selectionStart).search(e.accept||/\d/g),m=-1!==p?p:0,g=function(t){return(t.match(e.accept||/\d/g)||[]).join("")},v=g(r.substr(0,c.selectionStart)),y=function(e){for(var t=0,i=0,a=0;a!==v.length;++a){var n=e.indexOf(v[a],t)+1,r=g(e).indexOf(v[a],i)+1;r-i>1&&(n=t,r=i),i=Math.max(r,i),t=Math.max(t,n)}return t};if(!0===e.mask&&u&&!d){var x=y(r),b=g(r.substr(x))[0];x=r.indexOf(b,x),r="".concat(r.substr(0,x)).concat(r.substr(x+1))}var _=e.format(r);null==o||c.selectionStart!==r.length||d||(u?_=o(_):""===g(_.slice(-1))&&(_=_.slice(0,-1)));var w=n?n(_):_;return s===w?i():e.onChange(w),function(){var t=y(_);if(null!=e.mask&&(u||h&&!f))for(;_[t]&&""===g(_[t]);)t+=1;c.selectionStart=c.selectionEnd=t+(f?1+m:0)}}})),Object(r.useEffect)((function(){var e=function(e){"Delete"===e.code&&(c.current=!0)},t=function(e){"Delete"===e.code&&(c.current=!1)};return document.addEventListener("keydown",e),document.addEventListener("keyup",t),function(){document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}}),[]),{value:null!=a.current?a.current[0]:s,onChange:function(t){var n=t.target.value;a.current=[n,t.target,n.length>s.length,c.current,s===e.format(n)],i()}}},ta=function(e,t,i){var a=e.date(t);return null===t?"":e.isValid(a)?e.formatByString(a,i):""};function ia(e,t,i,a){if(!e)return!1;var n=a.formatByString(a.date("2019-01-01T09:00:00.000"),t).replace(i,"_"),r=a.formatByString(a.date("2019-11-21T22:30:00.000"),t).replace(i,"_"),o=r===n&&e===r;return!o&&a.lib,o}var aa=["components","disableOpenPicker","getOpenDialogAriaText","InputAdornmentProps","InputProps","inputRef","openPicker","OpenPickerButtonProps","renderInput"],na=r.forwardRef((function(e,t){var i=e.components,o=void 0===i?{}:i,s=e.disableOpenPicker,c=e.getOpenDialogAriaText,u=e.InputAdornmentProps,h=e.InputProps,d=e.inputRef,f=e.openPicker,p=e.OpenPickerButtonProps,m=e.renderInput,g=Object(n.a)(e,aa),y=x(),b=null!=c?c:y.openDatePickerDialogue,_=v(),w=function(e){var t=e.acceptRegex,i=void 0===t?/[\d]/gi:t,n=e.disabled,o=e.disableMaskedInput,s=e.ignoreInvalidInputs,c=e.inputFormat,u=e.inputProps,h=e.label,d=e.mask,f=e.onChange,p=e.rawValue,m=e.readOnly,g=e.rifmFormatter,y=e.TextFieldProps,x=e.validationError,b=v(),_=b.getFormatHelperText(c),w=r.useMemo((function(){if(o)return{shouldUseMaskedInput:!1,maskToUse:""};var e=function(e,t,i,a){if(e)return e;var n=a.formatByString(a.date("2019-01-01T09:00:00.000"),t).replace(i,"_");return n===a.formatByString(a.date("2019-11-21T22:30:00.000"),t).replace(i,"_")?n:""}(d,c,i,b);return{shouldUseMaskedInput:ia(e,c,i,b),maskToUse:e}}),[i,o,c,d,b]),k=w.shouldUseMaskedInput,S=w.maskToUse,C=r.useMemo((function(){return k&&S?function(e,t){return function(i){var a=0;return i.split("").map((function(n,r){if(t.lastIndex=0,a>e.length-1)return"";var o=e[a],s=e[a+1],l=t.test(n)?n:"",c="_"===o?l:o+l;return a+=c.length,r===i.length-1&&s&&"_"!==s?c?c+s:"":c})).join("")}}(S,i):function(e){return e}}),[i,S,k]),A=null===p?null:b.date(p),O=r.useState(A),T=Object(l.a)(O,2),M=T[0],E=T[1],I=r.useState(ta(b,p,c)),P=Object(l.a)(I,2),D=P[0],z=P[1],L=r.useRef();r.useEffect((function(){var e=p!==L.current;if(L.current=p,e){var t=null===p?null:b.date(p);if((null===p||b.isValid(t))&&!b.isEqual(M,t)){var i=ta(b,p,c);E(t),z(i)}}}),[b,p,c,M]);var j=function(e){var t=""===e||e===d?"":e;z(t);var i=null===t?null:b.parse(t,c);s&&!b.isValid(i)||(E(i),f(i,t||void 0))},R=ea({value:D,onChange:j,format:g||C}),F=k?R:{value:D,onChange:function(e){j(e.currentTarget.value)}};return Object(a.a)({label:h,disabled:n,error:x,inputProps:Object(a.a)({},F,{disabled:n,placeholder:_,readOnly:m,type:k?"tel":"text"},u)},y)}(g),k=(null==u?void 0:u.position)||"end",S=o.OpenPickerIcon||$;return m(Object(a.a)({ref:t,inputRef:d},w,{InputProps:Object(a.a)({},h,Object(A.a)({},"".concat(k,"Adornment"),s?void 0:Object(V.jsx)($i.a,Object(a.a)({position:k},u,{children:Object(V.jsx)(q.a,Object(a.a)({edge:k,disabled:g.disabled||g.readOnly,"aria-label":b(g.rawValue,_)},p,{onClick:f,children:Object(V.jsx)(S,{})}))}))))}))}));function ra(){return"undefined"===typeof window?"portrait":window.screen&&window.screen.orientation&&window.screen.orientation.angle?90===Math.abs(window.screen.orientation.angle)?"landscape":"portrait":window.orientation&&90===Math.abs(Number(window.orientation))?"landscape":"portrait"}var oa=["autoFocus","className","parsedValue","DateInputProps","isMobileKeyboardViewOpen","onDateChange","onViewChange","openTo","orientation","showToolbar","toggleMobileKeyboardView","ToolbarComponent","toolbarFormat","toolbarPlaceholder","toolbarTitle","views"],sa=Object(T.a)("div")({padding:"16px 24px"}),la=Object(T.a)("div")((function(e){var t=e.ownerState;return Object(a.a)({display:"flex",flexDirection:"column"},t.isLandscape&&{flexDirection:"row"})})),ca={fullWidth:!0},ua=function(e){return"year"===e||"month"===e||"day"===e},ha=function(e){return"hours"===e||"minutes"===e||"seconds"===e};function da(e){var t=e.autoFocus,i=e.parsedValue,o=e.DateInputProps,s=e.isMobileKeyboardViewOpen,c=e.onDateChange,u=e.onViewChange,h=e.openTo,d=e.orientation,f=e.showToolbar,p=e.toggleMobileKeyboardView,m=e.ToolbarComponent,g=void 0===m?function(){return null}:m,v=e.toolbarFormat,y=e.toolbarPlaceholder,x=e.toolbarTitle,b=e.views,_=Object(n.a)(e,oa),w=function(e,t){var i=r.useState(ra),a=Object(l.a)(i,2),n=a[0],o=a[1];return Object(Je.a)((function(){var e=function(){o(ra())};return window.addEventListener("orientationchange",e),function(){window.removeEventListener("orientationchange",e)}}),[]),!Ge(e,["hours","minutes","seconds"])&&"landscape"===(t||n)}(b,d),k=r.useContext(me),S=null!=f?f:"desktop"!==k,C=r.useCallback((function(e,t){c(e,k,t)}),[c,k]),A=Ze({view:void 0,views:b,openTo:h,onChange:C,onViewChange:r.useCallback((function(e){s&&p(),u&&u(e)}),[s,u,p])}),O=A.openView,T=A.setOpenView,M=A.handleChangeAndOpenNext;return Object(V.jsxs)(la,{ownerState:{isLandscape:w},children:[S&&Object(V.jsx)(g,Object(a.a)({},_,{views:b,isLandscape:w,parsedValue:i,onChange:C,setOpenView:T,openView:O,toolbarTitle:x,toolbarFormat:v,toolbarPlaceholder:y,isMobileKeyboardViewOpen:s,toggleMobileKeyboardView:p})),Object(V.jsx)(Dt,{children:s?Object(V.jsx)(sa,{children:Object(V.jsx)(na,Object(a.a)({},o,{ignoreInvalidInputs:!0,disableOpenPicker:!0,TextFieldProps:ca}))}):Object(V.jsxs)(r.Fragment,{children:[ua(O)&&Object(V.jsx)(Qi,Object(a.a)({autoFocus:t,date:i,onViewChange:T,onChange:M,view:O,views:b.filter(ua)},_)),ha(O)&&Object(V.jsx)(Rt,Object(a.a)({},_,{autoFocus:t,date:i,view:O,views:b.filter(ha),onChange:M,onViewChange:T,showViewSwitcher:"desktop"===k}))]})})]})}var fa=function(e,t){var i=e.onAccept,n=e.onChange,o=e.value,s=e.closeOnSelect,c=v(),u=function(e){var t=e.open,i=e.onOpen,a=e.onClose,n=r.useRef("boolean"===typeof t).current,o=r.useState(!1),s=Object(l.a)(o,2),c=s[0],u=s[1];return r.useEffect((function(){if(n){if("boolean"!==typeof t)throw new Error("You must not mix controlling and uncontrolled mode for `open` prop");u(t)}}),[n,t]),{isOpen:c,setIsOpen:r.useCallback((function(e){n||u(e),e&&i&&i(),!e&&a&&a()}),[n,i,a])}}(e),h=u.isOpen,d=u.setIsOpen,f=r.useMemo((function(){return t.parseInput(c,o)}),[t,c,o]),p=r.useState(f),m=Object(l.a)(p,2),g=m[0],y=m[1],x=r.useState((function(){return{committed:f,draft:f,resetFallback:f}})),b=Object(l.a)(x,2),_=b[0],w=b[1],k=r.useCallback((function(e){w((function(t){switch(e.action){case"setAll":case"acceptAndClose":return{draft:e.value,committed:e.value,resetFallback:e.value};case"setCommitted":return Object(a.a)({},t,{draft:e.value,committed:e.value});case"setDraft":return Object(a.a)({},t,{draft:e.value});default:return t}})),e.skipOnChangeCall||t.areValuesEqual(c,_.committed,e.value)||n(e.value),"acceptAndClose"===e.action&&(d(!1),i&&!t.areValuesEqual(c,_.resetFallback,e.value)&&i(e.value))}),[i,n,d,_,c,t]);r.useEffect((function(){c.isValid(f)&&y(f)}),[c,f]),r.useEffect((function(){h&&k({action:"setAll",value:f,skipOnChangeCall:!0})}),[h]),t.areValuesEqual(c,_.committed,f)||k({action:"setCommitted",value:f,skipOnChangeCall:!0});var S=r.useMemo((function(){return{open:h,onClear:function(){k({value:t.emptyValue,action:"acceptAndClose"})},onAccept:function(){k({value:_.draft,action:"acceptAndClose"})},onDismiss:function(){k({value:_.committed,action:"acceptAndClose"})},onCancel:function(){k({value:_.resetFallback,action:"acceptAndClose"})},onSetToday:function(){k({value:t.getTodayValue(c),action:"acceptAndClose"})}}}),[k,h,c,_,t]),C=r.useState(!1),A=Object(l.a)(C,2),O=A[0],T=A[1],M=r.useMemo((function(){return{parsedValue:_.draft,isMobileKeyboardViewOpen:O,toggleMobileKeyboardView:function(){return T(!O)},onDateChange:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"partial";switch(i){case"shallow":return k({action:"setDraft",value:e,skipOnChangeCall:!0});case"partial":return k({action:"setDraft",value:e});case"finish":return k((null!=s?s:"desktop"===t)?{value:e,action:"acceptAndClose"}:{value:e,action:"setCommitted"});default:throw new Error("MUI: Invalid selectionState passed to `onDateChange`")}}}}),[k,O,_.draft,s]),E=r.useCallback((function(e,i){var a=t.valueReducer?t.valueReducer(c,g,e):e;n(a,i)}),[n,t,g,c]),I={pickerProps:M,inputProps:r.useMemo((function(){return{onChange:E,open:h,rawValue:o,openPicker:function(){return d(!0)}}}),[E,h,o,d]),wrapperProps:S};return r.useDebugValue(I,(function(){return{MuiPickerState:{dateState:_,other:I}}})),I},pa=["onChange","PopperProps","PaperProps","ToolbarComponent","TransitionComponent","value","components","componentsProps"],ma=r.forwardRef((function(e,t){var i=S(e,"MuiDesktopDatePicker"),r=null!==Zt(i),o=fa(i,C),s=o.pickerProps,l=o.inputProps,c=o.wrapperProps,u=i.PopperProps,h=i.PaperProps,d=i.ToolbarComponent,f=void 0===d?fe:d,p=i.TransitionComponent,m=i.components,g=i.componentsProps,v=Object(n.a)(i,pa),y=Object(a.a)({},l,v,{components:m,componentsProps:g,ref:t,validationError:r});return Object(V.jsx)(Ue,Object(a.a)({},c,{DateInputProps:y,KeyboardDateInputComponent:na,PopperProps:u,PaperProps:h,TransitionComponent:p,components:m,componentsProps:g,children:Object(V.jsx)(da,Object(a.a)({},s,{autoFocus:!0,toolbarTitle:i.label||i.toolbarTitle,ToolbarComponent:f,DateInputProps:y,components:m,componentsProps:g},v))}))}));function ga(e){return Object(R.a)("MuiDialogContent",e)}Object(M.a)("MuiDialogContent",["root","dividers"]);var va=Object(M.a)("MuiDialogTitle",["root"]),ya=["className","dividers"],xa=Object(T.a)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:function(e,t){var i=e.ownerState;return[t.root,i.dividers&&t.dividers]}})((function(e){var t=e.theme,i=e.ownerState;return Object(a.a)({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},i.dividers?{padding:"16px 24px",borderTop:"1px solid ".concat((t.vars||t).palette.divider),borderBottom:"1px solid ".concat((t.vars||t).palette.divider)}:Object(A.a)({},".".concat(va.root," + &"),{paddingTop:0}))})),ba=r.forwardRef((function(e,t){var i=Object(s.a)({props:e,name:"MuiDialogContent"}),r=i.className,o=i.dividers,l=void 0!==o&&o,c=Object(n.a)(i,ya),u=Object(a.a)({},i,{dividers:l}),h=function(e){var t=e.classes,i={root:["root",e.dividers&&"dividers"]};return Object(z.a)(i,ga,t)}(u);return Object(V.jsx)(xa,Object(a.a)({className:Object(E.a)(h.root,r),ownerState:u,ref:t},c))})),_a=i(547);function wa(e){return Object(R.a)("MuiDialog",e)}var ka=Object(M.a)("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]);var Sa,Ca=Object(r.createContext)({}),Aa=i(552),Oa=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],Ta=Object(T.a)(Aa.a,{name:"MuiDialog",slot:"Backdrop",overrides:function(e,t){return t.backdrop}})({zIndex:-1}),Ma=Object(T.a)(_a.a,{name:"MuiDialog",slot:"Root",overridesResolver:function(e,t){return t.root}})({"@media print":{position:"absolute !important"}}),Ea=Object(T.a)("div",{name:"MuiDialog",slot:"Container",overridesResolver:function(e,t){var i=e.ownerState;return[t.container,t["scroll".concat(Object(Ce.a)(i.scroll))]]}})((function(e){var t=e.ownerState;return Object(a.a)({height:"100%","@media print":{height:"auto"},outline:0},"paper"===t.scroll&&{display:"flex",justifyContent:"center",alignItems:"center"},"body"===t.scroll&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})})),Ia=Object(T.a)(ve.a,{name:"MuiDialog",slot:"Paper",overridesResolver:function(e,t){var i=e.ownerState;return[t.paper,t["scrollPaper".concat(Object(Ce.a)(i.scroll))],t["paperWidth".concat(Object(Ce.a)(String(i.maxWidth)))],i.fullWidth&&t.paperFullWidth,i.fullScreen&&t.paperFullScreen]}})((function(e){var t=e.theme,i=e.ownerState;return Object(a.a)({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},"paper"===i.scroll&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},"body"===i.scroll&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!i.maxWidth&&{maxWidth:"calc(100% - 64px)"},"xs"===i.maxWidth&&Object(A.a)({maxWidth:"px"===t.breakpoints.unit?Math.max(t.breakpoints.values.xs,444):"".concat(t.breakpoints.values.xs).concat(t.breakpoints.unit)},"&.".concat(ka.paperScrollBody),Object(A.a)({},t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+64),{maxWidth:"calc(100% - 64px)"})),i.maxWidth&&"xs"!==i.maxWidth&&Object(A.a)({maxWidth:"".concat(t.breakpoints.values[i.maxWidth]).concat(t.breakpoints.unit)},"&.".concat(ka.paperScrollBody),Object(A.a)({},t.breakpoints.down(t.breakpoints.values[i.maxWidth]+64),{maxWidth:"calc(100% - 64px)"})),i.fullWidth&&{width:"calc(100% - 64px)"},i.fullScreen&&Object(A.a)({margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0},"&.".concat(ka.paperScrollBody),{margin:0,maxWidth:"100%"}))})),Pa=r.forwardRef((function(e,t){var i=Object(s.a)({props:e,name:"MuiDialog"}),o=Object(L.a)(),l={enter:o.transitions.duration.enteringScreen,exit:o.transitions.duration.leavingScreen},c=i["aria-describedby"],u=i["aria-labelledby"],h=i.BackdropComponent,d=i.BackdropProps,f=i.children,p=i.className,m=i.disableEscapeKeyDown,g=void 0!==m&&m,v=i.fullScreen,y=void 0!==v&&v,x=i.fullWidth,b=void 0!==x&&x,_=i.maxWidth,w=void 0===_?"sm":_,k=i.onBackdropClick,S=i.onClose,C=i.open,A=i.PaperComponent,O=void 0===A?ve.a:A,T=i.PaperProps,M=void 0===T?{}:T,I=i.scroll,P=void 0===I?"paper":I,D=i.TransitionComponent,j=void 0===D?Jt.a:D,R=i.transitionDuration,F=void 0===R?l:R,B=i.TransitionProps,N=Object(n.a)(i,Oa),Y=Object(a.a)({},i,{disableEscapeKeyDown:g,fullScreen:y,fullWidth:b,maxWidth:w,scroll:P}),W=function(e){var t=e.classes,i=e.scroll,a=e.maxWidth,n=e.fullWidth,r=e.fullScreen,o={root:["root"],container:["container","scroll".concat(Object(Ce.a)(i))],paper:["paper","paperScroll".concat(Object(Ce.a)(i)),"paperWidth".concat(Object(Ce.a)(String(a))),n&&"paperFullWidth",r&&"paperFullScreen"]};return Object(z.a)(o,wa,t)}(Y),H=r.useRef(),U=Object(Ke.a)(u),X=r.useMemo((function(){return{titleId:U}}),[U]);return Object(V.jsx)(Ma,Object(a.a)({className:Object(E.a)(W.root,p),closeAfterTransition:!0,components:{Backdrop:Ta},componentsProps:{backdrop:Object(a.a)({transitionDuration:F,as:h},d)},disableEscapeKeyDown:g,onClose:S,open:C,ref:t,onClick:function(e){H.current&&(H.current=null,k&&k(e),S&&S(e,"backdropClick"))},ownerState:Y},N,{children:Object(V.jsx)(j,Object(a.a)({appear:!0,in:C,timeout:F,role:"presentation"},B,{children:Object(V.jsx)(Ea,{className:Object(E.a)(W.container),onMouseDown:function(e){H.current=e.target===e.currentTarget},ownerState:Y,children:Object(V.jsx)(Ia,Object(a.a)({as:O,elevation:24,role:"dialog","aria-describedby":c,"aria-labelledby":U},M,{className:Object(E.a)(W.paper,M.className),ownerState:Y,children:Object(V.jsx)(Ca.Provider,{value:X,children:f})}))})}))}))})),Da=Object(T.a)(Pa)((Sa={},Object(A.a)(Sa,"& .".concat(ka.container),{outline:0}),Object(A.a)(Sa,"& .".concat(ka.paper),{outline:0,minWidth:320}),Sa)),za=Object(T.a)(ba)({"&:first-of-type":{padding:0}}),La=function(e){var t,i=e.children,n=e.DialogProps,r=void 0===n?{}:n,o=e.onAccept,s=e.onClear,l=e.onDismiss,c=e.onCancel,u=e.onSetToday,h=e.open,d=e.components,f=e.componentsProps,p=null!=(t=null==d?void 0:d.ActionBar)?t:Ne;return Object(V.jsxs)(Da,Object(a.a)({open:h,onClose:l},r,{children:[Object(V.jsx)(za,{children:i}),Object(V.jsx)(p,Object(a.a)({onAccept:o,onClear:s,onCancel:c,onSetToday:u,actions:["cancel","accept"]},null==f?void 0:f.actionBar))]}))},ja=["children","DateInputProps","DialogProps","onAccept","onClear","onDismiss","onCancel","onSetToday","open","PureDateInputComponent","components","componentsProps"];function Ra(e){var t=e.children,i=e.DateInputProps,r=e.DialogProps,o=e.onAccept,s=e.onClear,l=e.onDismiss,c=e.onCancel,u=e.onSetToday,h=e.open,d=e.PureDateInputComponent,f=e.components,p=e.componentsProps,m=Object(n.a)(e,ja);return Object(V.jsxs)(me.Provider,{value:"mobile",children:[Object(V.jsx)(d,Object(a.a)({components:f},m,i)),Object(V.jsx)(La,{DialogProps:r,onAccept:o,onClear:s,onDismiss:l,onCancel:c,onSetToday:u,open:h,components:f,componentsProps:p,children:t})]})}var Fa=r.forwardRef((function(e,t){var i=e.disabled,n=e.getOpenDialogAriaText,o=e.inputFormat,s=e.InputProps,l=e.inputRef,c=e.label,u=e.openPicker,h=e.rawValue,d=e.renderInput,f=e.TextFieldProps,p=void 0===f?{}:f,m=e.validationError,g=x(),y=null!=n?n:g.openDatePickerDialogue,b=v(),_=r.useMemo((function(){return Object(a.a)({},s,{readOnly:!0})}),[s]),w=ta(b,h,o);return d(Object(a.a)({label:c,disabled:i,ref:t,inputRef:l,error:m,InputProps:_,inputProps:Object(a.a)({disabled:i,readOnly:!0,"aria-readonly":!0,"aria-label":y(h,b),value:w},!e.readOnly&&{onClick:u},{onKeyDown:qe(u)})},p))})),Ba=["ToolbarComponent","value","onChange","components","componentsProps"],Na=r.forwardRef((function(e,t){var i=S(e,"MuiMobileDatePicker"),r=null!==Zt(i),o=fa(i,C),s=o.pickerProps,l=o.inputProps,c=o.wrapperProps,u=i.ToolbarComponent,h=void 0===u?fe:u,d=i.components,f=i.componentsProps,p=Object(n.a)(i,Ba),m=Object(a.a)({},l,p,{components:d,componentsProps:f,ref:t,validationError:r});return Object(V.jsx)(Ra,Object(a.a)({},p,c,{DateInputProps:m,PureDateInputComponent:Fa,components:d,componentsProps:f,children:Object(V.jsx)(da,Object(a.a)({},s,{autoFocus:!0,toolbarTitle:i.label||i.toolbarTitle,ToolbarComponent:h,DateInputProps:m,components:d,componentsProps:f},p))}))})),Va=["desktopModeMediaQuery","DialogProps","PopperProps","TransitionComponent"],Ya=r.forwardRef((function(e,t){var i=Object(s.a)({props:e,name:"MuiDatePicker"}),r=i.desktopModeMediaQuery,o=void 0===r?"@media (pointer: fine)":r,l=i.DialogProps,h=i.PopperProps,m=i.TransitionComponent,g=Object(n.a)(i,Va);return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Object(c.a)(),a="undefined"!==typeof window&&"undefined"!==typeof window.matchMedia,n=Object(u.a)({name:"MuiUseMediaQuery",props:t,theme:i}),r=n.defaultMatches,o=void 0!==r&&r,s=n.matchMedia,l=void 0===s?a?window.matchMedia:null:s,h=n.ssrMatchMedia,m=void 0===h?null:h,g=n.noSsr,v="function"===typeof e?e(i):e;v=v.replace(/^@media( ?)/m,"");var y=void 0!==f?p:d,x=y(v,o,l,m,g);return x}(o)?Object(V.jsx)(ma,Object(a.a)({ref:t,PopperProps:h,TransitionComponent:m},g)):Object(V.jsx)(Na,Object(a.a)({ref:t,DialogProps:l},g))}))},372:function(e,t,i){"use strict";var a=i(32),n=i(17),r=i(6),o=i(0),s=i(97),l=i(504),c=i(99),u=i(317),h=i(153),d=i(106),f=i(96),p=i(505),m=i(507);function g(e){return Object(p.a)("MuiInputAdornment",e)}var v,y=Object(m.a)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]),x=i(98),b=i(31),_=["children","className","component","disablePointerEvents","disableTypography","position","variant"],w=Object(f.a)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:function(e,t){var i=e.ownerState;return[t.root,t["position".concat(Object(c.a)(i.position))],!0===i.disablePointerEvents&&t.disablePointerEvents,t[i.variant]]}})((function(e){var t=e.theme,i=e.ownerState;return Object(r.a)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(t.vars||t).palette.action.active},"filled"===i.variant&&Object(a.a)({},"&.".concat(y.positionStart,"&:not(.").concat(y.hiddenLabel,")"),{marginTop:16}),"start"===i.position&&{marginRight:8},"end"===i.position&&{marginLeft:8},!0===i.disablePointerEvents&&{pointerEvents:"none"})})),k=o.forwardRef((function(e,t){var i=Object(x.a)({props:e,name:"MuiInputAdornment"}),a=i.children,f=i.className,p=i.component,m=void 0===p?"div":p,y=i.disablePointerEvents,k=void 0!==y&&y,S=i.disableTypography,C=void 0!==S&&S,A=i.position,O=i.variant,T=Object(n.a)(i,_),M=Object(d.a)()||{},E=O;O&&M.variant,M&&!E&&(E=M.variant);var I=Object(r.a)({},i,{hiddenLabel:M.hiddenLabel,size:M.size,disablePointerEvents:k,position:A,variant:E}),P=function(e){var t=e.classes,i=e.disablePointerEvents,a=e.hiddenLabel,n=e.position,r=e.size,o=e.variant,s={root:["root",i&&"disablePointerEvents",n&&"position".concat(Object(c.a)(n)),o,a&&"hiddenLabel",r&&"size".concat(Object(c.a)(r))]};return Object(l.a)(s,g,t)}(I);return Object(b.jsx)(h.a.Provider,{value:null,children:Object(b.jsx)(w,Object(r.a)({as:m,ownerState:I,className:Object(s.a)(P.root,f),ref:t},T,{children:"string"!==typeof a||C?Object(b.jsxs)(o.Fragment,{children:["start"===A?v||(v=Object(b.jsx)("span",{className:"notranslate",children:"\u200b"})):null,a]}):Object(b.jsx)(u.a,{color:"text.secondary",children:a})}))})}));t.a=k},421:function(e,t,i){(function(e){e.exports=function(){"use strict";var t,i;function a(){return t.apply(null,arguments)}function n(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function r(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function s(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(o(e,t))return!1;return!0}function l(e){return void 0===e}function c(e){return"number"===typeof e||"[object Number]"===Object.prototype.toString.call(e)}function u(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function h(e,t){var i,a=[],n=e.length;for(i=0;i<n;++i)a.push(t(e[i],i));return a}function d(e,t){for(var i in t)o(t,i)&&(e[i]=t[i]);return o(t,"toString")&&(e.toString=t.toString),o(t,"valueOf")&&(e.valueOf=t.valueOf),e}function f(e,t,i,a){return St(e,t,i,a,!0).utc()}function p(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function m(e){if(null==e._isValid){var t=p(e),a=i.call(t.parsedDateParts,(function(e){return null!=e})),n=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&a);if(e._strict&&(n=n&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return n;e._isValid=n}return e._isValid}function g(e){var t=f(NaN);return null!=e?d(p(t),e):p(t).userInvalidated=!0,t}i=Array.prototype.some?Array.prototype.some:function(e){var t,i=Object(this),a=i.length>>>0;for(t=0;t<a;t++)if(t in i&&e.call(this,i[t],t,i))return!0;return!1};var v=a.momentProperties=[],y=!1;function x(e,t){var i,a,n,r=v.length;if(l(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),l(t._i)||(e._i=t._i),l(t._f)||(e._f=t._f),l(t._l)||(e._l=t._l),l(t._strict)||(e._strict=t._strict),l(t._tzm)||(e._tzm=t._tzm),l(t._isUTC)||(e._isUTC=t._isUTC),l(t._offset)||(e._offset=t._offset),l(t._pf)||(e._pf=p(t)),l(t._locale)||(e._locale=t._locale),r>0)for(i=0;i<r;i++)l(n=t[a=v[i]])||(e[a]=n);return e}function b(e){x(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===y&&(y=!0,a.updateOffset(this),y=!1)}function _(e){return e instanceof b||null!=e&&null!=e._isAMomentObject}function w(e){!1===a.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function k(e,t){var i=!0;return d((function(){if(null!=a.deprecationHandler&&a.deprecationHandler(null,e),i){var n,r,s,l=[],c=arguments.length;for(r=0;r<c;r++){if(n="","object"===typeof arguments[r]){for(s in n+="\n["+r+"] ",arguments[0])o(arguments[0],s)&&(n+=s+": "+arguments[0][s]+", ");n=n.slice(0,-2)}else n=arguments[r];l.push(n)}w(e+"\nArguments: "+Array.prototype.slice.call(l).join("")+"\n"+(new Error).stack),i=!1}return t.apply(this,arguments)}),t)}var S,C={};function A(e,t){null!=a.deprecationHandler&&a.deprecationHandler(e,t),C[e]||(w(t),C[e]=!0)}function O(e){return"undefined"!==typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function T(e,t){var i,a=d({},e);for(i in t)o(t,i)&&(r(e[i])&&r(t[i])?(a[i]={},d(a[i],e[i]),d(a[i],t[i])):null!=t[i]?a[i]=t[i]:delete a[i]);for(i in e)o(e,i)&&!o(t,i)&&r(e[i])&&(a[i]=d({},a[i]));return a}function M(e){null!=e&&this.set(e)}function E(e,t,i){var a=""+Math.abs(e),n=t-a.length;return(e>=0?i?"+":"":"-")+Math.pow(10,Math.max(0,n)).toString().substr(1)+a}a.suppressDeprecationWarnings=!1,a.deprecationHandler=null,S=Object.keys?Object.keys:function(e){var t,i=[];for(t in e)o(e,t)&&i.push(t);return i};var I=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,P=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,D={},z={};function L(e,t,i,a){var n=a;"string"===typeof a&&(n=function(){return this[a]()}),e&&(z[e]=n),t&&(z[t[0]]=function(){return E(n.apply(this,arguments),t[1],t[2])}),i&&(z[i]=function(){return this.localeData().ordinal(n.apply(this,arguments),e)})}function j(e,t){return e.isValid()?(t=R(t,e.localeData()),D[t]=D[t]||function(e){var t,i,a,n=e.match(I);for(t=0,i=n.length;t<i;t++)z[n[t]]?n[t]=z[n[t]]:n[t]=(a=n[t]).match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"");return function(t){var a,r="";for(a=0;a<i;a++)r+=O(n[a])?n[a].call(t,e):n[a];return r}}(t),D[t](e)):e.localeData().invalidDate()}function R(e,t){var i=5;function a(e){return t.longDateFormat(e)||e}for(P.lastIndex=0;i>=0&&P.test(e);)e=e.replace(P,a),P.lastIndex=0,i-=1;return e}var F={};function B(e,t){var i=e.toLowerCase();F[i]=F[i+"s"]=F[t]=e}function N(e){return"string"===typeof e?F[e]||F[e.toLowerCase()]:void 0}function V(e){var t,i,a={};for(i in e)o(e,i)&&(t=N(i))&&(a[t]=e[i]);return a}var Y={};function W(e,t){Y[e]=t}function H(e){return e%4===0&&e%100!==0||e%400===0}function U(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function X(e){var t=+e,i=0;return 0!==t&&isFinite(t)&&(i=U(t)),i}function G(e,t){return function(i){return null!=i?(Z(this,e,i),a.updateOffset(this,t),this):q(this,e)}}function q(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function Z(e,t,i){e.isValid()&&!isNaN(i)&&("FullYear"===t&&H(e.year())&&1===e.month()&&29===e.date()?(i=X(i),e._d["set"+(e._isUTC?"UTC":"")+t](i,e.month(),_e(i,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](i))}var K,J=/\d/,Q=/\d\d/,$=/\d{3}/,ee=/\d{4}/,te=/[+-]?\d{6}/,ie=/\d\d?/,ae=/\d\d\d\d?/,ne=/\d\d\d\d\d\d?/,re=/\d{1,3}/,oe=/\d{1,4}/,se=/[+-]?\d{1,6}/,le=/\d+/,ce=/[+-]?\d+/,ue=/Z|[+-]\d\d:?\d\d/gi,he=/Z|[+-]\d\d(?::?\d\d)?/gi,de=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function fe(e,t,i){K[e]=O(t)?t:function(e,a){return e&&i?i:t}}function pe(e,t){return o(K,e)?K[e](t._strict,t._locale):new RegExp(me(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,i,a,n){return t||i||a||n}))))}function me(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}K={};var ge,ve={};function ye(e,t){var i,a,n=t;for("string"===typeof e&&(e=[e]),c(t)&&(n=function(e,i){i[t]=X(e)}),a=e.length,i=0;i<a;i++)ve[e[i]]=n}function xe(e,t){ye(e,(function(e,i,a,n){a._w=a._w||{},t(e,a._w,a,n)}))}function be(e,t,i){null!=t&&o(ve,e)&&ve[e](t,i._a,i,e)}function _e(e,t){if(isNaN(e)||isNaN(t))return NaN;var i,a=(t%(i=12)+i)%i;return e+=(t-a)/12,1===a?H(e)?29:28:31-a%7%2}ge=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},L("M",["MM",2],"Mo",(function(){return this.month()+1})),L("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),L("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),B("month","M"),W("month",8),fe("M",ie),fe("MM",ie,Q),fe("MMM",(function(e,t){return t.monthsShortRegex(e)})),fe("MMMM",(function(e,t){return t.monthsRegex(e)})),ye(["M","MM"],(function(e,t){t[1]=X(e)-1})),ye(["MMM","MMMM"],(function(e,t,i,a){var n=i._locale.monthsParse(e,a,i._strict);null!=n?t[1]=n:p(i).invalidMonth=e}));var we="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ke="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Se=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Ce=de,Ae=de;function Oe(e,t,i){var a,n,r,o=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],a=0;a<12;++a)r=f([2e3,a]),this._shortMonthsParse[a]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[a]=this.months(r,"").toLocaleLowerCase();return i?"MMM"===t?-1!==(n=ge.call(this._shortMonthsParse,o))?n:null:-1!==(n=ge.call(this._longMonthsParse,o))?n:null:"MMM"===t?-1!==(n=ge.call(this._shortMonthsParse,o))||-1!==(n=ge.call(this._longMonthsParse,o))?n:null:-1!==(n=ge.call(this._longMonthsParse,o))||-1!==(n=ge.call(this._shortMonthsParse,o))?n:null}function Te(e,t){var i;if(!e.isValid())return e;if("string"===typeof t)if(/^\d+$/.test(t))t=X(t);else if(!c(t=e.localeData().monthsParse(t)))return e;return i=Math.min(e.date(),_e(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,i),e}function Me(e){return null!=e?(Te(this,e),a.updateOffset(this,!0),this):q(this,"Month")}function Ee(){function e(e,t){return t.length-e.length}var t,i,a=[],n=[],r=[];for(t=0;t<12;t++)i=f([2e3,t]),a.push(this.monthsShort(i,"")),n.push(this.months(i,"")),r.push(this.months(i,"")),r.push(this.monthsShort(i,""));for(a.sort(e),n.sort(e),r.sort(e),t=0;t<12;t++)a[t]=me(a[t]),n[t]=me(n[t]);for(t=0;t<24;t++)r[t]=me(r[t]);this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Ie(e){return H(e)?366:365}L("Y",0,0,(function(){var e=this.year();return e<=9999?E(e,4):"+"+e})),L(0,["YY",2],0,(function(){return this.year()%100})),L(0,["YYYY",4],0,"year"),L(0,["YYYYY",5],0,"year"),L(0,["YYYYYY",6,!0],0,"year"),B("year","y"),W("year",1),fe("Y",ce),fe("YY",ie,Q),fe("YYYY",oe,ee),fe("YYYYY",se,te),fe("YYYYYY",se,te),ye(["YYYYY","YYYYYY"],0),ye("YYYY",(function(e,t){t[0]=2===e.length?a.parseTwoDigitYear(e):X(e)})),ye("YY",(function(e,t){t[0]=a.parseTwoDigitYear(e)})),ye("Y",(function(e,t){t[0]=parseInt(e,10)})),a.parseTwoDigitYear=function(e){return X(e)+(X(e)>68?1900:2e3)};var Pe=G("FullYear",!0);function De(e,t,i,a,n,r,o){var s;return e<100&&e>=0?(s=new Date(e+400,t,i,a,n,r,o),isFinite(s.getFullYear())&&s.setFullYear(e)):s=new Date(e,t,i,a,n,r,o),s}function ze(e){var t,i;return e<100&&e>=0?((i=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,i)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Le(e,t,i){var a=7+t-i;return-(7+ze(e,0,a).getUTCDay()-t)%7+a-1}function je(e,t,i,a,n){var r,o,s=1+7*(t-1)+(7+i-a)%7+Le(e,a,n);return s<=0?o=Ie(r=e-1)+s:s>Ie(e)?(r=e+1,o=s-Ie(e)):(r=e,o=s),{year:r,dayOfYear:o}}function Re(e,t,i){var a,n,r=Le(e.year(),t,i),o=Math.floor((e.dayOfYear()-r-1)/7)+1;return o<1?a=o+Fe(n=e.year()-1,t,i):o>Fe(e.year(),t,i)?(a=o-Fe(e.year(),t,i),n=e.year()+1):(n=e.year(),a=o),{week:a,year:n}}function Fe(e,t,i){var a=Le(e,t,i),n=Le(e+1,t,i);return(Ie(e)-a+n)/7}function Be(e,t){return e.slice(t,7).concat(e.slice(0,t))}L("w",["ww",2],"wo","week"),L("W",["WW",2],"Wo","isoWeek"),B("week","w"),B("isoWeek","W"),W("week",5),W("isoWeek",5),fe("w",ie),fe("ww",ie,Q),fe("W",ie),fe("WW",ie,Q),xe(["w","ww","W","WW"],(function(e,t,i,a){t[a.substr(0,1)]=X(e)})),L("d",0,"do","day"),L("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),L("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),L("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),L("e",0,0,"weekday"),L("E",0,0,"isoWeekday"),B("day","d"),B("weekday","e"),B("isoWeekday","E"),W("day",11),W("weekday",11),W("isoWeekday",11),fe("d",ie),fe("e",ie),fe("E",ie),fe("dd",(function(e,t){return t.weekdaysMinRegex(e)})),fe("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),fe("dddd",(function(e,t){return t.weekdaysRegex(e)})),xe(["dd","ddd","dddd"],(function(e,t,i,a){var n=i._locale.weekdaysParse(e,a,i._strict);null!=n?t.d=n:p(i).invalidWeekday=e})),xe(["d","e","E"],(function(e,t,i,a){t[a]=X(e)}));var Ne="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ve="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ye="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),We=de,He=de,Ue=de;function Xe(e,t,i){var a,n,r,o=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],a=0;a<7;++a)r=f([2e3,1]).day(a),this._minWeekdaysParse[a]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[a]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[a]=this.weekdays(r,"").toLocaleLowerCase();return i?"dddd"===t?-1!==(n=ge.call(this._weekdaysParse,o))?n:null:"ddd"===t?-1!==(n=ge.call(this._shortWeekdaysParse,o))?n:null:-1!==(n=ge.call(this._minWeekdaysParse,o))?n:null:"dddd"===t?-1!==(n=ge.call(this._weekdaysParse,o))||-1!==(n=ge.call(this._shortWeekdaysParse,o))||-1!==(n=ge.call(this._minWeekdaysParse,o))?n:null:"ddd"===t?-1!==(n=ge.call(this._shortWeekdaysParse,o))||-1!==(n=ge.call(this._weekdaysParse,o))||-1!==(n=ge.call(this._minWeekdaysParse,o))?n:null:-1!==(n=ge.call(this._minWeekdaysParse,o))||-1!==(n=ge.call(this._weekdaysParse,o))||-1!==(n=ge.call(this._shortWeekdaysParse,o))?n:null}function Ge(){function e(e,t){return t.length-e.length}var t,i,a,n,r,o=[],s=[],l=[],c=[];for(t=0;t<7;t++)i=f([2e3,1]).day(t),a=me(this.weekdaysMin(i,"")),n=me(this.weekdaysShort(i,"")),r=me(this.weekdays(i,"")),o.push(a),s.push(n),l.push(r),c.push(a),c.push(n),c.push(r);o.sort(e),s.sort(e),l.sort(e),c.sort(e),this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function qe(){return this.hours()%12||12}function Ze(e,t){L(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function Ke(e,t){return t._meridiemParse}L("H",["HH",2],0,"hour"),L("h",["hh",2],0,qe),L("k",["kk",2],0,(function(){return this.hours()||24})),L("hmm",0,0,(function(){return""+qe.apply(this)+E(this.minutes(),2)})),L("hmmss",0,0,(function(){return""+qe.apply(this)+E(this.minutes(),2)+E(this.seconds(),2)})),L("Hmm",0,0,(function(){return""+this.hours()+E(this.minutes(),2)})),L("Hmmss",0,0,(function(){return""+this.hours()+E(this.minutes(),2)+E(this.seconds(),2)})),Ze("a",!0),Ze("A",!1),B("hour","h"),W("hour",13),fe("a",Ke),fe("A",Ke),fe("H",ie),fe("h",ie),fe("k",ie),fe("HH",ie,Q),fe("hh",ie,Q),fe("kk",ie,Q),fe("hmm",ae),fe("hmmss",ne),fe("Hmm",ae),fe("Hmmss",ne),ye(["H","HH"],3),ye(["k","kk"],(function(e,t,i){var a=X(e);t[3]=24===a?0:a})),ye(["a","A"],(function(e,t,i){i._isPm=i._locale.isPM(e),i._meridiem=e})),ye(["h","hh"],(function(e,t,i){t[3]=X(e),p(i).bigHour=!0})),ye("hmm",(function(e,t,i){var a=e.length-2;t[3]=X(e.substr(0,a)),t[4]=X(e.substr(a)),p(i).bigHour=!0})),ye("hmmss",(function(e,t,i){var a=e.length-4,n=e.length-2;t[3]=X(e.substr(0,a)),t[4]=X(e.substr(a,2)),t[5]=X(e.substr(n)),p(i).bigHour=!0})),ye("Hmm",(function(e,t,i){var a=e.length-2;t[3]=X(e.substr(0,a)),t[4]=X(e.substr(a))})),ye("Hmmss",(function(e,t,i){var a=e.length-4,n=e.length-2;t[3]=X(e.substr(0,a)),t[4]=X(e.substr(a,2)),t[5]=X(e.substr(n))}));var Je,Qe=G("Hours",!0),$e={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:we,monthsShort:ke,week:{dow:0,doy:6},weekdays:Ne,weekdaysMin:Ye,weekdaysShort:Ve,meridiemParse:/[ap]\.?m?\.?/i},et={},tt={};function it(e,t){var i,a=Math.min(e.length,t.length);for(i=0;i<a;i+=1)if(e[i]!==t[i])return i;return a}function at(e){return e?e.toLowerCase().replace("_","-"):e}function nt(t){var i=null;if(void 0===et[t]&&"undefined"!==typeof e&&e&&e.exports&&function(e){return null!=e.match("^[^/\\\\]*$")}(t))try{i=Je._abbr,function(){var e=new Error("Cannot find module 'undefined'");throw e.code="MODULE_NOT_FOUND",e}(),rt(i)}catch(a){et[t]=null}return et[t]}function rt(e,t){var i;return e&&((i=l(t)?st(e):ot(e,t))?Je=i:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Je._abbr}function ot(e,t){if(null!==t){var i,a=$e;if(t.abbr=e,null!=et[e])A("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),a=et[e]._config;else if(null!=t.parentLocale)if(null!=et[t.parentLocale])a=et[t.parentLocale]._config;else{if(null==(i=nt(t.parentLocale)))return tt[t.parentLocale]||(tt[t.parentLocale]=[]),tt[t.parentLocale].push({name:e,config:t}),null;a=i._config}return et[e]=new M(T(a,t)),tt[e]&&tt[e].forEach((function(e){ot(e.name,e.config)})),rt(e),et[e]}return delete et[e],null}function st(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Je;if(!n(e)){if(t=nt(e))return t;e=[e]}return function(e){for(var t,i,a,n,r=0;r<e.length;){for(t=(n=at(e[r]).split("-")).length,i=(i=at(e[r+1]))?i.split("-"):null;t>0;){if(a=nt(n.slice(0,t).join("-")))return a;if(i&&i.length>=t&&it(n,i)>=t-1)break;t--}r++}return Je}(e)}function lt(e){var t,i=e._a;return i&&-2===p(e).overflow&&(t=i[1]<0||i[1]>11?1:i[2]<1||i[2]>_e(i[0],i[1])?2:i[3]<0||i[3]>24||24===i[3]&&(0!==i[4]||0!==i[5]||0!==i[6])?3:i[4]<0||i[4]>59?4:i[5]<0||i[5]>59?5:i[6]<0||i[6]>999?6:-1,p(e)._overflowDayOfYear&&(t<0||t>2)&&(t=2),p(e)._overflowWeeks&&-1===t&&(t=7),p(e)._overflowWeekday&&-1===t&&(t=8),p(e).overflow=t),e}var ct=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ut=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ht=/Z|[+-]\d\d(?::?\d\d)?/,dt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],ft=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],pt=/^\/?Date\((-?\d+)/i,mt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,gt={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function vt(e){var t,i,a,n,r,o,s=e._i,l=ct.exec(s)||ut.exec(s),c=dt.length,u=ft.length;if(l){for(p(e).iso=!0,t=0,i=c;t<i;t++)if(dt[t][1].exec(l[1])){n=dt[t][0],a=!1!==dt[t][2];break}if(null==n)return void(e._isValid=!1);if(l[3]){for(t=0,i=u;t<i;t++)if(ft[t][1].exec(l[3])){r=(l[2]||" ")+ft[t][0];break}if(null==r)return void(e._isValid=!1)}if(!a&&null!=r)return void(e._isValid=!1);if(l[4]){if(!ht.exec(l[4]))return void(e._isValid=!1);o="Z"}e._f=n+(r||"")+(o||""),wt(e)}else e._isValid=!1}function yt(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function xt(e){var t,i=mt.exec(e._i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(i){if(t=function(e,t,i,a,n,r){var o=[yt(e),ke.indexOf(t),parseInt(i,10),parseInt(a,10),parseInt(n,10)];return r&&o.push(parseInt(r,10)),o}(i[4],i[3],i[2],i[5],i[6],i[7]),!function(e,t,i){return!e||Ve.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(p(i).weekdayMismatch=!0,i._isValid=!1,!1)}(i[1],t,e))return;e._a=t,e._tzm=function(e,t,i){if(e)return gt[e];if(t)return 0;var a=parseInt(i,10),n=a%100;return(a-n)/100*60+n}(i[8],i[9],i[10]),e._d=ze.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),p(e).rfc2822=!0}else e._isValid=!1}function bt(e,t,i){return null!=e?e:null!=t?t:i}function _t(e){var t,i,n,r,o,s=[];if(!e._d){for(n=function(e){var t=new Date(a.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}(e),e._w&&null==e._a[2]&&null==e._a[1]&&function(e){var t,i,a,n,r,o,s,l,c;null!=(t=e._w).GG||null!=t.W||null!=t.E?(r=1,o=4,i=bt(t.GG,e._a[0],Re(Ct(),1,4).year),a=bt(t.W,1),((n=bt(t.E,1))<1||n>7)&&(l=!0)):(r=e._locale._week.dow,o=e._locale._week.doy,c=Re(Ct(),r,o),i=bt(t.gg,e._a[0],c.year),a=bt(t.w,c.week),null!=t.d?((n=t.d)<0||n>6)&&(l=!0):null!=t.e?(n=t.e+r,(t.e<0||t.e>6)&&(l=!0)):n=r),a<1||a>Fe(i,r,o)?p(e)._overflowWeeks=!0:null!=l?p(e)._overflowWeekday=!0:(s=je(i,a,n,r,o),e._a[0]=s.year,e._dayOfYear=s.dayOfYear)}(e),null!=e._dayOfYear&&(o=bt(e._a[0],n[0]),(e._dayOfYear>Ie(o)||0===e._dayOfYear)&&(p(e)._overflowDayOfYear=!0),i=ze(o,0,e._dayOfYear),e._a[1]=i.getUTCMonth(),e._a[2]=i.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=s[t]=n[t];for(;t<7;t++)e._a[t]=s[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[3]&&0===e._a[4]&&0===e._a[5]&&0===e._a[6]&&(e._nextDay=!0,e._a[3]=0),e._d=(e._useUTC?ze:De).apply(null,s),r=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[3]=24),e._w&&"undefined"!==typeof e._w.d&&e._w.d!==r&&(p(e).weekdayMismatch=!0)}}function wt(e){if(e._f!==a.ISO_8601)if(e._f!==a.RFC_2822){e._a=[],p(e).empty=!0;var t,i,n,r,o,s,l,c=""+e._i,u=c.length,h=0;for(l=(n=R(e._f,e._locale).match(I)||[]).length,t=0;t<l;t++)r=n[t],(i=(c.match(pe(r,e))||[])[0])&&((o=c.substr(0,c.indexOf(i))).length>0&&p(e).unusedInput.push(o),c=c.slice(c.indexOf(i)+i.length),h+=i.length),z[r]?(i?p(e).empty=!1:p(e).unusedTokens.push(r),be(r,i,e)):e._strict&&!i&&p(e).unusedTokens.push(r);p(e).charsLeftOver=u-h,c.length>0&&p(e).unusedInput.push(c),e._a[3]<=12&&!0===p(e).bigHour&&e._a[3]>0&&(p(e).bigHour=void 0),p(e).parsedDateParts=e._a.slice(0),p(e).meridiem=e._meridiem,e._a[3]=function(e,t,i){var a;return null==i?t:null!=e.meridiemHour?e.meridiemHour(t,i):null!=e.isPM?((a=e.isPM(i))&&t<12&&(t+=12),a||12!==t||(t=0),t):t}(e._locale,e._a[3],e._meridiem),null!==(s=p(e).era)&&(e._a[0]=e._locale.erasConvertYear(s,e._a[0])),_t(e),lt(e)}else xt(e);else vt(e)}function kt(e){var t=e._i,i=e._f;return e._locale=e._locale||st(e._l),null===t||void 0===i&&""===t?g({nullInput:!0}):("string"===typeof t&&(e._i=t=e._locale.preparse(t)),_(t)?new b(lt(t)):(u(t)?e._d=t:n(i)?function(e){var t,i,a,n,r,o,s=!1,l=e._f.length;if(0===l)return p(e).invalidFormat=!0,void(e._d=new Date(NaN));for(n=0;n<l;n++)r=0,o=!1,t=x({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[n],wt(t),m(t)&&(o=!0),r+=p(t).charsLeftOver,r+=10*p(t).unusedTokens.length,p(t).score=r,s?r<a&&(a=r,i=t):(null==a||r<a||o)&&(a=r,i=t,o&&(s=!0));d(e,i||t)}(e):i?wt(e):function(e){var t=e._i;l(t)?e._d=new Date(a.now()):u(t)?e._d=new Date(t.valueOf()):"string"===typeof t?function(e){var t=pt.exec(e._i);null===t?(vt(e),!1===e._isValid&&(delete e._isValid,xt(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:a.createFromInputFallback(e)))):e._d=new Date(+t[1])}(e):n(t)?(e._a=h(t.slice(0),(function(e){return parseInt(e,10)})),_t(e)):r(t)?function(e){if(!e._d){var t=V(e._i),i=void 0===t.day?t.date:t.day;e._a=h([t.year,t.month,i,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),_t(e)}}(e):c(t)?e._d=new Date(t):a.createFromInputFallback(e)}(e),m(e)||(e._d=null),e))}function St(e,t,i,a,o){var l={};return!0!==t&&!1!==t||(a=t,t=void 0),!0!==i&&!1!==i||(a=i,i=void 0),(r(e)&&s(e)||n(e)&&0===e.length)&&(e=void 0),l._isAMomentObject=!0,l._useUTC=l._isUTC=o,l._l=i,l._i=e,l._f=t,l._strict=a,function(e){var t=new b(lt(kt(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}(l)}function Ct(e,t,i,a){return St(e,t,i,a,!1)}a.createFromInputFallback=k("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),a.ISO_8601=function(){},a.RFC_2822=function(){};var At=k("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Ct.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:g()})),Ot=k("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Ct.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:g()}));function Tt(e,t){var i,a;if(1===t.length&&n(t[0])&&(t=t[0]),!t.length)return Ct();for(i=t[0],a=1;a<t.length;++a)t[a].isValid()&&!t[a][e](i)||(i=t[a]);return i}var Mt=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Et(e){var t=V(e),i=t.year||0,a=t.quarter||0,n=t.month||0,r=t.week||t.isoWeek||0,s=t.day||0,l=t.hour||0,c=t.minute||0,u=t.second||0,h=t.millisecond||0;this._isValid=function(e){var t,i,a=!1,n=Mt.length;for(t in e)if(o(e,t)&&(-1===ge.call(Mt,t)||null!=e[t]&&isNaN(e[t])))return!1;for(i=0;i<n;++i)if(e[Mt[i]]){if(a)return!1;parseFloat(e[Mt[i]])!==X(e[Mt[i]])&&(a=!0)}return!0}(t),this._milliseconds=+h+1e3*u+6e4*c+1e3*l*60*60,this._days=+s+7*r,this._months=+n+3*a+12*i,this._data={},this._locale=st(),this._bubble()}function It(e){return e instanceof Et}function Pt(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Dt(e,t){L(e,0,0,(function(){var e=this.utcOffset(),i="+";return e<0&&(e=-e,i="-"),i+E(~~(e/60),2)+t+E(~~e%60,2)}))}Dt("Z",":"),Dt("ZZ",""),fe("Z",he),fe("ZZ",he),ye(["Z","ZZ"],(function(e,t,i){i._useUTC=!0,i._tzm=Lt(he,e)}));var zt=/([\+\-]|\d\d)/gi;function Lt(e,t){var i,a,n=(t||"").match(e);return null===n?null:0===(a=60*(i=((n[n.length-1]||[])+"").match(zt)||["-",0,0])[1]+X(i[2]))?0:"+"===i[0]?a:-a}function jt(e,t){var i,n;return t._isUTC?(i=t.clone(),n=(_(e)||u(e)?e.valueOf():Ct(e).valueOf())-i.valueOf(),i._d.setTime(i._d.valueOf()+n),a.updateOffset(i,!1),i):Ct(e).local()}function Rt(e){return-Math.round(e._d.getTimezoneOffset())}function Ft(){return!!this.isValid()&&this._isUTC&&0===this._offset}a.updateOffset=function(){};var Bt=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Nt=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Vt(e,t){var i,a,n,r=e,s=null;return It(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:c(e)||!isNaN(+e)?(r={},t?r[t]=+e:r.milliseconds=+e):(s=Bt.exec(e))?(i="-"===s[1]?-1:1,r={y:0,d:X(s[2])*i,h:X(s[3])*i,m:X(s[4])*i,s:X(s[5])*i,ms:X(Pt(1e3*s[6]))*i}):(s=Nt.exec(e))?(i="-"===s[1]?-1:1,r={y:Yt(s[2],i),M:Yt(s[3],i),w:Yt(s[4],i),d:Yt(s[5],i),h:Yt(s[6],i),m:Yt(s[7],i),s:Yt(s[8],i)}):null==r?r={}:"object"===typeof r&&("from"in r||"to"in r)&&(n=function(e,t){var i;return e.isValid()&&t.isValid()?(t=jt(t,e),e.isBefore(t)?i=Wt(e,t):((i=Wt(t,e)).milliseconds=-i.milliseconds,i.months=-i.months),i):{milliseconds:0,months:0}}(Ct(r.from),Ct(r.to)),(r={}).ms=n.milliseconds,r.M=n.months),a=new Et(r),It(e)&&o(e,"_locale")&&(a._locale=e._locale),It(e)&&o(e,"_isValid")&&(a._isValid=e._isValid),a}function Yt(e,t){var i=e&&parseFloat(e.replace(",","."));return(isNaN(i)?0:i)*t}function Wt(e,t){var i={};return i.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+e.clone().add(i.months,"M"),i}function Ht(e,t){return function(i,a){var n;return null===a||isNaN(+a)||(A(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),n=i,i=a,a=n),Ut(this,Vt(i,a),e),this}}function Ut(e,t,i,n){var r=t._milliseconds,o=Pt(t._days),s=Pt(t._months);e.isValid()&&(n=null==n||n,s&&Te(e,q(e,"Month")+s*i),o&&Z(e,"Date",q(e,"Date")+o*i),r&&e._d.setTime(e._d.valueOf()+r*i),n&&a.updateOffset(e,o||s))}Vt.fn=Et.prototype,Vt.invalid=function(){return Vt(NaN)};var Xt=Ht(1,"add"),Gt=Ht(-1,"subtract");function qt(e){return"string"===typeof e||e instanceof String}function Zt(e){return _(e)||u(e)||qt(e)||c(e)||function(e){var t=n(e),i=!1;return t&&(i=0===e.filter((function(t){return!c(t)&&qt(e)})).length),t&&i}(e)||function(e){var t,i,a=r(e)&&!s(e),n=!1,l=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],c=l.length;for(t=0;t<c;t+=1)i=l[t],n=n||o(e,i);return a&&n}(e)||null===e||void 0===e}function Kt(e){var t,i=r(e)&&!s(e),a=!1,n=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<n.length;t+=1)a=a||o(e,n[t]);return i&&a}function Jt(e,t){if(e.date()<t.date())return-Jt(t,e);var i=12*(t.year()-e.year())+(t.month()-e.month()),a=e.clone().add(i,"months");return-(i+(t-a<0?(t-a)/(a-e.clone().add(i-1,"months")):(t-a)/(e.clone().add(i+1,"months")-a)))||0}function Qt(e){var t;return void 0===e?this._locale._abbr:(null!=(t=st(e))&&(this._locale=t),this)}a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",a.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var $t=k("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function ei(){return this._locale}function ti(e,t){return(e%t+t)%t}function ii(e,t,i){return e<100&&e>=0?new Date(e+400,t,i)-126227808e5:new Date(e,t,i).valueOf()}function ai(e,t,i){return e<100&&e>=0?Date.UTC(e+400,t,i)-126227808e5:Date.UTC(e,t,i)}function ni(e,t){return t.erasAbbrRegex(e)}function ri(){var e,t,i=[],a=[],n=[],r=[],o=this.eras();for(e=0,t=o.length;e<t;++e)a.push(me(o[e].name)),i.push(me(o[e].abbr)),n.push(me(o[e].narrow)),r.push(me(o[e].name)),r.push(me(o[e].abbr)),r.push(me(o[e].narrow));this._erasRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+a.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+i.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}function oi(e,t){L(0,[e,e.length],0,t)}function si(e,t,i,a,n){var r;return null==e?Re(this,a,n).year:(t>(r=Fe(e,a,n))&&(t=r),li.call(this,e,t,i,a,n))}function li(e,t,i,a,n){var r=je(e,t,i,a,n),o=ze(r.year,0,r.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}L("N",0,0,"eraAbbr"),L("NN",0,0,"eraAbbr"),L("NNN",0,0,"eraAbbr"),L("NNNN",0,0,"eraName"),L("NNNNN",0,0,"eraNarrow"),L("y",["y",1],"yo","eraYear"),L("y",["yy",2],0,"eraYear"),L("y",["yyy",3],0,"eraYear"),L("y",["yyyy",4],0,"eraYear"),fe("N",ni),fe("NN",ni),fe("NNN",ni),fe("NNNN",(function(e,t){return t.erasNameRegex(e)})),fe("NNNNN",(function(e,t){return t.erasNarrowRegex(e)})),ye(["N","NN","NNN","NNNN","NNNNN"],(function(e,t,i,a){var n=i._locale.erasParse(e,a,i._strict);n?p(i).era=n:p(i).invalidEra=e})),fe("y",le),fe("yy",le),fe("yyy",le),fe("yyyy",le),fe("yo",(function(e,t){return t._eraYearOrdinalRegex||le})),ye(["y","yy","yyy","yyyy"],0),ye(["yo"],(function(e,t,i,a){var n;i._locale._eraYearOrdinalRegex&&(n=e.match(i._locale._eraYearOrdinalRegex)),i._locale.eraYearOrdinalParse?t[0]=i._locale.eraYearOrdinalParse(e,n):t[0]=parseInt(e,10)})),L(0,["gg",2],0,(function(){return this.weekYear()%100})),L(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),oi("gggg","weekYear"),oi("ggggg","weekYear"),oi("GGGG","isoWeekYear"),oi("GGGGG","isoWeekYear"),B("weekYear","gg"),B("isoWeekYear","GG"),W("weekYear",1),W("isoWeekYear",1),fe("G",ce),fe("g",ce),fe("GG",ie,Q),fe("gg",ie,Q),fe("GGGG",oe,ee),fe("gggg",oe,ee),fe("GGGGG",se,te),fe("ggggg",se,te),xe(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,i,a){t[a.substr(0,2)]=X(e)})),xe(["gg","GG"],(function(e,t,i,n){t[n]=a.parseTwoDigitYear(e)})),L("Q",0,"Qo","quarter"),B("quarter","Q"),W("quarter",7),fe("Q",J),ye("Q",(function(e,t){t[1]=3*(X(e)-1)})),L("D",["DD",2],"Do","date"),B("date","D"),W("date",9),fe("D",ie),fe("DD",ie,Q),fe("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),ye(["D","DD"],2),ye("Do",(function(e,t){t[2]=X(e.match(ie)[0])}));var ci=G("Date",!0);L("DDD",["DDDD",3],"DDDo","dayOfYear"),B("dayOfYear","DDD"),W("dayOfYear",4),fe("DDD",re),fe("DDDD",$),ye(["DDD","DDDD"],(function(e,t,i){i._dayOfYear=X(e)})),L("m",["mm",2],0,"minute"),B("minute","m"),W("minute",14),fe("m",ie),fe("mm",ie,Q),ye(["m","mm"],4);var ui=G("Minutes",!1);L("s",["ss",2],0,"second"),B("second","s"),W("second",15),fe("s",ie),fe("ss",ie,Q),ye(["s","ss"],5);var hi,di,fi=G("Seconds",!1);for(L("S",0,0,(function(){return~~(this.millisecond()/100)})),L(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),L(0,["SSS",3],0,"millisecond"),L(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),L(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),L(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),L(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),L(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),L(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),B("millisecond","ms"),W("millisecond",16),fe("S",re,J),fe("SS",re,Q),fe("SSS",re,$),hi="SSSS";hi.length<=9;hi+="S")fe(hi,le);function pi(e,t){t[6]=X(1e3*("0."+e))}for(hi="S";hi.length<=9;hi+="S")ye(hi,pi);di=G("Milliseconds",!1),L("z",0,0,"zoneAbbr"),L("zz",0,0,"zoneName");var mi=b.prototype;function gi(e){return e}mi.add=Xt,mi.calendar=function(e,t){1===arguments.length&&(arguments[0]?Zt(arguments[0])?(e=arguments[0],t=void 0):Kt(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var i=e||Ct(),n=jt(i,this).startOf("day"),r=a.calendarFormat(this,n)||"sameElse",o=t&&(O(t[r])?t[r].call(this,i):t[r]);return this.format(o||this.localeData().calendar(r,this,Ct(i)))},mi.clone=function(){return new b(this)},mi.diff=function(e,t,i){var a,n,r;if(!this.isValid())return NaN;if(!(a=jt(e,this)).isValid())return NaN;switch(n=6e4*(a.utcOffset()-this.utcOffset()),t=N(t)){case"year":r=Jt(this,a)/12;break;case"month":r=Jt(this,a);break;case"quarter":r=Jt(this,a)/3;break;case"second":r=(this-a)/1e3;break;case"minute":r=(this-a)/6e4;break;case"hour":r=(this-a)/36e5;break;case"day":r=(this-a-n)/864e5;break;case"week":r=(this-a-n)/6048e5;break;default:r=this-a}return i?r:U(r)},mi.endOf=function(e){var t,i;if(void 0===(e=N(e))||"millisecond"===e||!this.isValid())return this;switch(i=this._isUTC?ai:ii,e){case"year":t=i(this.year()+1,0,1)-1;break;case"quarter":t=i(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=i(this.year(),this.month()+1,1)-1;break;case"week":t=i(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=i(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=36e5-ti(t+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":t=this._d.valueOf(),t+=6e4-ti(t,6e4)-1;break;case"second":t=this._d.valueOf(),t+=1e3-ti(t,1e3)-1}return this._d.setTime(t),a.updateOffset(this,!0),this},mi.format=function(e){e||(e=this.isUtc()?a.defaultFormatUtc:a.defaultFormat);var t=j(this,e);return this.localeData().postformat(t)},mi.from=function(e,t){return this.isValid()&&(_(e)&&e.isValid()||Ct(e).isValid())?Vt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},mi.fromNow=function(e){return this.from(Ct(),e)},mi.to=function(e,t){return this.isValid()&&(_(e)&&e.isValid()||Ct(e).isValid())?Vt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},mi.toNow=function(e){return this.to(Ct(),e)},mi.get=function(e){return O(this[e=N(e)])?this[e]():this},mi.invalidAt=function(){return p(this).overflow},mi.isAfter=function(e,t){var i=_(e)?e:Ct(e);return!(!this.isValid()||!i.isValid())&&("millisecond"===(t=N(t)||"millisecond")?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(t).valueOf())},mi.isBefore=function(e,t){var i=_(e)?e:Ct(e);return!(!this.isValid()||!i.isValid())&&("millisecond"===(t=N(t)||"millisecond")?this.valueOf()<i.valueOf():this.clone().endOf(t).valueOf()<i.valueOf())},mi.isBetween=function(e,t,i,a){var n=_(e)?e:Ct(e),r=_(t)?t:Ct(t);return!!(this.isValid()&&n.isValid()&&r.isValid())&&(("("===(a=a||"()")[0]?this.isAfter(n,i):!this.isBefore(n,i))&&(")"===a[1]?this.isBefore(r,i):!this.isAfter(r,i)))},mi.isSame=function(e,t){var i,a=_(e)?e:Ct(e);return!(!this.isValid()||!a.isValid())&&("millisecond"===(t=N(t)||"millisecond")?this.valueOf()===a.valueOf():(i=a.valueOf(),this.clone().startOf(t).valueOf()<=i&&i<=this.clone().endOf(t).valueOf()))},mi.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},mi.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},mi.isValid=function(){return m(this)},mi.lang=$t,mi.locale=Qt,mi.localeData=ei,mi.max=Ot,mi.min=At,mi.parsingFlags=function(){return d({},p(this))},mi.set=function(e,t){if("object"===typeof e){var i,a=function(e){var t,i=[];for(t in e)o(e,t)&&i.push({unit:t,priority:Y[t]});return i.sort((function(e,t){return e.priority-t.priority})),i}(e=V(e)),n=a.length;for(i=0;i<n;i++)this[a[i].unit](e[a[i].unit])}else if(O(this[e=N(e)]))return this[e](t);return this},mi.startOf=function(e){var t,i;if(void 0===(e=N(e))||"millisecond"===e||!this.isValid())return this;switch(i=this._isUTC?ai:ii,e){case"year":t=i(this.year(),0,1);break;case"quarter":t=i(this.year(),this.month()-this.month()%3,1);break;case"month":t=i(this.year(),this.month(),1);break;case"week":t=i(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=i(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=ti(t+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":t=this._d.valueOf(),t-=ti(t,6e4);break;case"second":t=this._d.valueOf(),t-=ti(t,1e3)}return this._d.setTime(t),a.updateOffset(this,!0),this},mi.subtract=Gt,mi.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},mi.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},mi.toDate=function(){return new Date(this.valueOf())},mi.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,i=t?this.clone().utc():this;return i.year()<0||i.year()>9999?j(i,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):O(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",j(i,"Z")):j(i,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},mi.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,i,a="moment",n="";return this.isLocal()||(a=0===this.utcOffset()?"moment.utc":"moment.parseZone",n="Z"),e="["+a+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i=n+'[")]',this.format(e+t+"-MM-DD[T]HH:mm:ss.SSS"+i)},"undefined"!==typeof Symbol&&null!=Symbol.for&&(mi[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),mi.toJSON=function(){return this.isValid()?this.toISOString():null},mi.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},mi.unix=function(){return Math.floor(this.valueOf()/1e3)},mi.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},mi.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},mi.eraName=function(){var e,t,i,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e){if(i=this.clone().startOf("day").valueOf(),a[e].since<=i&&i<=a[e].until)return a[e].name;if(a[e].until<=i&&i<=a[e].since)return a[e].name}return""},mi.eraNarrow=function(){var e,t,i,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e){if(i=this.clone().startOf("day").valueOf(),a[e].since<=i&&i<=a[e].until)return a[e].narrow;if(a[e].until<=i&&i<=a[e].since)return a[e].narrow}return""},mi.eraAbbr=function(){var e,t,i,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e){if(i=this.clone().startOf("day").valueOf(),a[e].since<=i&&i<=a[e].until)return a[e].abbr;if(a[e].until<=i&&i<=a[e].since)return a[e].abbr}return""},mi.eraYear=function(){var e,t,i,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(i=r[e].since<=r[e].until?1:-1,n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until||r[e].until<=n&&n<=r[e].since)return(this.year()-a(r[e].since).year())*i+r[e].offset;return this.year()},mi.year=Pe,mi.isLeapYear=function(){return H(this.year())},mi.weekYear=function(e){return si.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},mi.isoWeekYear=function(e){return si.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},mi.quarter=mi.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},mi.month=Me,mi.daysInMonth=function(){return _e(this.year(),this.month())},mi.week=mi.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},mi.isoWeek=mi.isoWeeks=function(e){var t=Re(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},mi.weeksInYear=function(){var e=this.localeData()._week;return Fe(this.year(),e.dow,e.doy)},mi.weeksInWeekYear=function(){var e=this.localeData()._week;return Fe(this.weekYear(),e.dow,e.doy)},mi.isoWeeksInYear=function(){return Fe(this.year(),1,4)},mi.isoWeeksInISOWeekYear=function(){return Fe(this.isoWeekYear(),1,4)},mi.date=ci,mi.day=mi.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=function(e,t){return"string"!==typeof e?e:isNaN(e)?"number"===typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}(e,this.localeData()),this.add(e-t,"d")):t},mi.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},mi.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=function(e,t){return"string"===typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7},mi.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},mi.hour=mi.hours=Qe,mi.minute=mi.minutes=ui,mi.second=mi.seconds=fi,mi.millisecond=mi.milliseconds=di,mi.utcOffset=function(e,t,i){var n,r=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"===typeof e){if(null===(e=Lt(he,e)))return this}else Math.abs(e)<16&&!i&&(e*=60);return!this._isUTC&&t&&(n=Rt(this)),this._offset=e,this._isUTC=!0,null!=n&&this.add(n,"m"),r!==e&&(!t||this._changeInProgress?Ut(this,Vt(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?r:Rt(this)},mi.utc=function(e){return this.utcOffset(0,e)},mi.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Rt(this),"m")),this},mi.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var e=Lt(ue,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},mi.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?Ct(e).utcOffset():0,(this.utcOffset()-e)%60===0)},mi.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},mi.isLocal=function(){return!!this.isValid()&&!this._isUTC},mi.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},mi.isUtc=Ft,mi.isUTC=Ft,mi.zoneAbbr=function(){return this._isUTC?"UTC":""},mi.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},mi.dates=k("dates accessor is deprecated. Use date instead.",ci),mi.months=k("months accessor is deprecated. Use month instead",Me),mi.years=k("years accessor is deprecated. Use year instead",Pe),mi.zone=k("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function(e,t){return null!=e?("string"!==typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()})),mi.isDSTShifted=k("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function(){if(!l(this._isDSTShifted))return this._isDSTShifted;var e,t={};return x(t,this),(t=kt(t))._a?(e=t._isUTC?f(t._a):Ct(t._a),this._isDSTShifted=this.isValid()&&function(e,t,i){var a,n=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),o=0;for(a=0;a<n;a++)(i&&e[a]!==t[a]||!i&&X(e[a])!==X(t[a]))&&o++;return o+r}(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}));var vi=M.prototype;function yi(e,t,i,a){var n=st(),r=f().set(a,t);return n[i](r,e)}function xi(e,t,i){if(c(e)&&(t=e,e=void 0),e=e||"",null!=t)return yi(e,t,i,"month");var a,n=[];for(a=0;a<12;a++)n[a]=yi(e,a,i,"month");return n}function bi(e,t,i,a){"boolean"===typeof e?(c(t)&&(i=t,t=void 0),t=t||""):(i=t=e,e=!1,c(t)&&(i=t,t=void 0),t=t||"");var n,r=st(),o=e?r._week.dow:0,s=[];if(null!=i)return yi(t,(i+o)%7,a,"day");for(n=0;n<7;n++)s[n]=yi(t,(n+o)%7,a,"day");return s}vi.calendar=function(e,t,i){var a=this._calendar[e]||this._calendar.sameElse;return O(a)?a.call(t,i):a},vi.longDateFormat=function(e){var t=this._longDateFormat[e],i=this._longDateFormat[e.toUpperCase()];return t||!i?t:(this._longDateFormat[e]=i.match(I).map((function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e})).join(""),this._longDateFormat[e])},vi.invalidDate=function(){return this._invalidDate},vi.ordinal=function(e){return this._ordinal.replace("%d",e)},vi.preparse=gi,vi.postformat=gi,vi.relativeTime=function(e,t,i,a){var n=this._relativeTime[i];return O(n)?n(e,t,i,a):n.replace(/%d/i,e)},vi.pastFuture=function(e,t){var i=this._relativeTime[e>0?"future":"past"];return O(i)?i(t):i.replace(/%s/i,t)},vi.set=function(e){var t,i;for(i in e)o(e,i)&&(O(t=e[i])?this[i]=t:this["_"+i]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},vi.eras=function(e,t){var i,n,r,o=this._eras||st("en")._eras;for(i=0,n=o.length;i<n;++i){switch(typeof o[i].since){case"string":r=a(o[i].since).startOf("day"),o[i].since=r.valueOf()}switch(typeof o[i].until){case"undefined":o[i].until=1/0;break;case"string":r=a(o[i].until).startOf("day").valueOf(),o[i].until=r.valueOf()}}return o},vi.erasParse=function(e,t,i){var a,n,r,o,s,l=this.eras();for(e=e.toUpperCase(),a=0,n=l.length;a<n;++a)if(r=l[a].name.toUpperCase(),o=l[a].abbr.toUpperCase(),s=l[a].narrow.toUpperCase(),i)switch(t){case"N":case"NN":case"NNN":if(o===e)return l[a];break;case"NNNN":if(r===e)return l[a];break;case"NNNNN":if(s===e)return l[a]}else if([r,o,s].indexOf(e)>=0)return l[a]},vi.erasConvertYear=function(e,t){var i=e.since<=e.until?1:-1;return void 0===t?a(e.since).year():a(e.since).year()+(t-e.offset)*i},vi.erasAbbrRegex=function(e){return o(this,"_erasAbbrRegex")||ri.call(this),e?this._erasAbbrRegex:this._erasRegex},vi.erasNameRegex=function(e){return o(this,"_erasNameRegex")||ri.call(this),e?this._erasNameRegex:this._erasRegex},vi.erasNarrowRegex=function(e){return o(this,"_erasNarrowRegex")||ri.call(this),e?this._erasNarrowRegex:this._erasRegex},vi.months=function(e,t){return e?n(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Se).test(t)?"format":"standalone"][e.month()]:n(this._months)?this._months:this._months.standalone},vi.monthsShort=function(e,t){return e?n(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Se.test(t)?"format":"standalone"][e.month()]:n(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},vi.monthsParse=function(e,t,i){var a,n,r;if(this._monthsParseExact)return Oe.call(this,e,t,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),a=0;a<12;a++){if(n=f([2e3,a]),i&&!this._longMonthsParse[a]&&(this._longMonthsParse[a]=new RegExp("^"+this.months(n,"").replace(".","")+"$","i"),this._shortMonthsParse[a]=new RegExp("^"+this.monthsShort(n,"").replace(".","")+"$","i")),i||this._monthsParse[a]||(r="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[a]=new RegExp(r.replace(".",""),"i")),i&&"MMMM"===t&&this._longMonthsParse[a].test(e))return a;if(i&&"MMM"===t&&this._shortMonthsParse[a].test(e))return a;if(!i&&this._monthsParse[a].test(e))return a}},vi.monthsRegex=function(e){return this._monthsParseExact?(o(this,"_monthsRegex")||Ee.call(this),e?this._monthsStrictRegex:this._monthsRegex):(o(this,"_monthsRegex")||(this._monthsRegex=Ae),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},vi.monthsShortRegex=function(e){return this._monthsParseExact?(o(this,"_monthsRegex")||Ee.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(o(this,"_monthsShortRegex")||(this._monthsShortRegex=Ce),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},vi.week=function(e){return Re(e,this._week.dow,this._week.doy).week},vi.firstDayOfYear=function(){return this._week.doy},vi.firstDayOfWeek=function(){return this._week.dow},vi.weekdays=function(e,t){var i=n(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?Be(i,this._week.dow):e?i[e.day()]:i},vi.weekdaysMin=function(e){return!0===e?Be(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},vi.weekdaysShort=function(e){return!0===e?Be(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},vi.weekdaysParse=function(e,t,i){var a,n,r;if(this._weekdaysParseExact)return Xe.call(this,e,t,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),a=0;a<7;a++){if(n=f([2e3,1]).day(a),i&&!this._fullWeekdaysParse[a]&&(this._fullWeekdaysParse[a]=new RegExp("^"+this.weekdays(n,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[a]=new RegExp("^"+this.weekdaysShort(n,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[a]=new RegExp("^"+this.weekdaysMin(n,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[a]||(r="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[a]=new RegExp(r.replace(".",""),"i")),i&&"dddd"===t&&this._fullWeekdaysParse[a].test(e))return a;if(i&&"ddd"===t&&this._shortWeekdaysParse[a].test(e))return a;if(i&&"dd"===t&&this._minWeekdaysParse[a].test(e))return a;if(!i&&this._weekdaysParse[a].test(e))return a}},vi.weekdaysRegex=function(e){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Ge.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(o(this,"_weekdaysRegex")||(this._weekdaysRegex=We),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},vi.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Ge.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(o(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=He),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},vi.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Ge.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(o(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ue),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},vi.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},vi.meridiem=function(e,t,i){return e>11?i?"pm":"PM":i?"am":"AM"},rt("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===X(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),a.lang=k("moment.lang is deprecated. Use moment.locale instead.",rt),a.langData=k("moment.langData is deprecated. Use moment.localeData instead.",st);var _i=Math.abs;function wi(e,t,i,a){var n=Vt(t,i);return e._milliseconds+=a*n._milliseconds,e._days+=a*n._days,e._months+=a*n._months,e._bubble()}function ki(e){return e<0?Math.floor(e):Math.ceil(e)}function Si(e){return 4800*e/146097}function Ci(e){return 146097*e/4800}function Ai(e){return function(){return this.as(e)}}var Oi=Ai("ms"),Ti=Ai("s"),Mi=Ai("m"),Ei=Ai("h"),Ii=Ai("d"),Pi=Ai("w"),Di=Ai("M"),zi=Ai("Q"),Li=Ai("y");function ji(e){return function(){return this.isValid()?this._data[e]:NaN}}var Ri=ji("milliseconds"),Fi=ji("seconds"),Bi=ji("minutes"),Ni=ji("hours"),Vi=ji("days"),Yi=ji("months"),Wi=ji("years"),Hi=Math.round,Ui={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Xi(e,t,i,a,n){return n.relativeTime(t||1,!!i,e,a)}var Gi=Math.abs;function qi(e){return(e>0)-(e<0)||+e}function Zi(){if(!this.isValid())return this.localeData().invalidDate();var e,t,i,a,n,r,o,s,l=Gi(this._milliseconds)/1e3,c=Gi(this._days),u=Gi(this._months),h=this.asSeconds();return h?(e=U(l/60),t=U(e/60),l%=60,e%=60,i=U(u/12),u%=12,a=l?l.toFixed(3).replace(/\.?0+$/,""):"",n=h<0?"-":"",r=qi(this._months)!==qi(h)?"-":"",o=qi(this._days)!==qi(h)?"-":"",s=qi(this._milliseconds)!==qi(h)?"-":"",n+"P"+(i?r+i+"Y":"")+(u?r+u+"M":"")+(c?o+c+"D":"")+(t||e||l?"T":"")+(t?s+t+"H":"")+(e?s+e+"M":"")+(l?s+a+"S":"")):"P0D"}var Ki=Et.prototype;return Ki.isValid=function(){return this._isValid},Ki.abs=function(){var e=this._data;return this._milliseconds=_i(this._milliseconds),this._days=_i(this._days),this._months=_i(this._months),e.milliseconds=_i(e.milliseconds),e.seconds=_i(e.seconds),e.minutes=_i(e.minutes),e.hours=_i(e.hours),e.months=_i(e.months),e.years=_i(e.years),this},Ki.add=function(e,t){return wi(this,e,t,1)},Ki.subtract=function(e,t){return wi(this,e,t,-1)},Ki.as=function(e){if(!this.isValid())return NaN;var t,i,a=this._milliseconds;if("month"===(e=N(e))||"quarter"===e||"year"===e)switch(t=this._days+a/864e5,i=this._months+Si(t),e){case"month":return i;case"quarter":return i/3;case"year":return i/12}else switch(t=this._days+Math.round(Ci(this._months)),e){case"week":return t/7+a/6048e5;case"day":return t+a/864e5;case"hour":return 24*t+a/36e5;case"minute":return 1440*t+a/6e4;case"second":return 86400*t+a/1e3;case"millisecond":return Math.floor(864e5*t)+a;default:throw new Error("Unknown unit "+e)}},Ki.asMilliseconds=Oi,Ki.asSeconds=Ti,Ki.asMinutes=Mi,Ki.asHours=Ei,Ki.asDays=Ii,Ki.asWeeks=Pi,Ki.asMonths=Di,Ki.asQuarters=zi,Ki.asYears=Li,Ki.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*X(this._months/12):NaN},Ki._bubble=function(){var e,t,i,a,n,r=this._milliseconds,o=this._days,s=this._months,l=this._data;return r>=0&&o>=0&&s>=0||r<=0&&o<=0&&s<=0||(r+=864e5*ki(Ci(s)+o),o=0,s=0),l.milliseconds=r%1e3,e=U(r/1e3),l.seconds=e%60,t=U(e/60),l.minutes=t%60,i=U(t/60),l.hours=i%24,o+=U(i/24),n=U(Si(o)),s+=n,o-=ki(Ci(n)),a=U(s/12),s%=12,l.days=o,l.months=s,l.years=a,this},Ki.clone=function(){return Vt(this)},Ki.get=function(e){return e=N(e),this.isValid()?this[e+"s"]():NaN},Ki.milliseconds=Ri,Ki.seconds=Fi,Ki.minutes=Bi,Ki.hours=Ni,Ki.days=Vi,Ki.weeks=function(){return U(this.days()/7)},Ki.months=Yi,Ki.years=Wi,Ki.humanize=function(e,t){if(!this.isValid())return this.localeData().invalidDate();var i,a,n=!1,r=Ui;return"object"===typeof e&&(t=e,e=!1),"boolean"===typeof e&&(n=e),"object"===typeof t&&(r=Object.assign({},Ui,t),null!=t.s&&null==t.ss&&(r.ss=t.s-1)),i=this.localeData(),a=function(e,t,i,a){var n=Vt(e).abs(),r=Hi(n.as("s")),o=Hi(n.as("m")),s=Hi(n.as("h")),l=Hi(n.as("d")),c=Hi(n.as("M")),u=Hi(n.as("w")),h=Hi(n.as("y")),d=r<=i.ss&&["s",r]||r<i.s&&["ss",r]||o<=1&&["m"]||o<i.m&&["mm",o]||s<=1&&["h"]||s<i.h&&["hh",s]||l<=1&&["d"]||l<i.d&&["dd",l];return null!=i.w&&(d=d||u<=1&&["w"]||u<i.w&&["ww",u]),(d=d||c<=1&&["M"]||c<i.M&&["MM",c]||h<=1&&["y"]||["yy",h])[2]=t,d[3]=+e>0,d[4]=a,Xi.apply(null,d)}(this,!n,r,i),n&&(a=i.pastFuture(+this,a)),i.postformat(a)},Ki.toISOString=Zi,Ki.toString=Zi,Ki.toJSON=Zi,Ki.locale=Qt,Ki.localeData=ei,Ki.toIsoString=k("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Zi),Ki.lang=$t,L("X",0,0,"unix"),L("x",0,0,"valueOf"),fe("x",ce),fe("X",/[+-]?\d+(\.\d{1,3})?/),ye("X",(function(e,t,i){i._d=new Date(1e3*parseFloat(e))})),ye("x",(function(e,t,i){i._d=new Date(X(e))})),a.version="2.29.4",t=Ct,a.fn=mi,a.min=function(){var e=[].slice.call(arguments,0);return Tt("isBefore",e)},a.max=function(){var e=[].slice.call(arguments,0);return Tt("isAfter",e)},a.now=function(){return Date.now?Date.now():+new Date},a.utc=f,a.unix=function(e){return Ct(1e3*e)},a.months=function(e,t){return xi(e,t,"months")},a.isDate=u,a.locale=rt,a.invalid=g,a.duration=Vt,a.isMoment=_,a.weekdays=function(e,t,i){return bi(e,t,i,"weekdays")},a.parseZone=function(){return Ct.apply(null,arguments).parseZone()},a.localeData=st,a.isDuration=It,a.monthsShort=function(e,t){return xi(e,t,"monthsShort")},a.weekdaysMin=function(e,t,i){return bi(e,t,i,"weekdaysMin")},a.defineLocale=ot,a.updateLocale=function(e,t){if(null!=t){var i,a,n=$e;null!=et[e]&&null!=et[e].parentLocale?et[e].set(T(et[e]._config,t)):(null!=(a=nt(e))&&(n=a._config),t=T(n,t),null==a&&(t.abbr=e),(i=new M(t)).parentLocale=et[e],et[e]=i),rt(e)}else null!=et[e]&&(null!=et[e].parentLocale?(et[e]=et[e].parentLocale,e===rt()&&rt(e)):null!=et[e]&&delete et[e]);return et[e]},a.locales=function(){return S(et)},a.weekdaysShort=function(e,t,i){return bi(e,t,i,"weekdaysShort")},a.normalizeUnits=N,a.relativeTimeRounding=function(e){return void 0===e?Hi:"function"===typeof e&&(Hi=e,!0)},a.relativeTimeThreshold=function(e,t){return void 0!==Ui[e]&&(void 0===t?Ui[e]:(Ui[e]=t,"s"===e&&(Ui.ss=t-1),!0))},a.calendarFormat=function(e,t){var i=e.diff(t,"days",!0);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"},a.prototype=mi,a.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},a}()}).call(this,i(422)(e))},422:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},423:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD0AAAAqCAYAAAAAsVPKAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAOgSURBVHgB7VlbVhNBEL0dwe9xBeIKhE+PqLAC4gocdmBWQLICYQXgCoQVMCr84wpgB46/YNJWPzJkmJ6e7p7ukHPwnpOTSTI1XbcfVbcqwBMEwxLBf2IHAwzB8YE+btAro1dJrxvy5Dtucch26ToxlkKanxPBdRzT5U7nzQwnRH6Sknxy0vwHrexAEs48zErMsM/e4xQJkJS0JvwNoXiGnL3BV0RGMtJySz/HOZ3fDYSjxB22Ym/1AVJhHeOehAUyHQuiwrrSOtp+IueHmEdaRuesI9DowHWNWODYZe9QIJKfrSvNL3FAhmJ75rgPQpn8TITk721Yw2fExRAR/TSSpgCUk9EYNtDv/KKFHMNrxMWe6ctQP43bm2bn2vE8ikDzirZQWbO/wG/4pahOsO2mr6F+NlZang/3AJRRWhkav0+MPn42tzfDJnzAjAOXSI0efqZKWVeIi6jPa5LmngOY7uf4hZhgxjGC/WyS/it/dNuejHLg1Jg/42rmmUGK9vCzQVpHuAlcwHH0MHLLZyghUSAOCpMw6eOn8UxTejikGycdD5rI+9pwh330D2ilfo4RoX7aZaiSk2MocTCXdwVttyObLKzsL6V4CNfOjMrLt1Rfd43j6efq1tMMIxfCIUhXZWnIRgCVh3R55mhSyHIyEWHpE5YI2u5CUOStPbIZTl2OTV809WyzTGuzvIFYlcT9rDbQOd6kJkVOE7XXogrnaJSZNdKyDOuqWswYWSN5ZMjqahAQIBnGdGwma7UHhRCmHEhC4QTLxJRWTqwus9T0Jqgy80+10h5l2hzGjmV1PGb0Pt92ShFNhCrq6LhkZJtTRSRSz47++krK0CnOGmOpOlkQ98oMrHJUdB98oBp2lZ7VZI8dJu5KTsJsQZ8P8JLsRJCzV0568oj8SW1cT98VaTVjXzzsameY7IVt7BZRO/TZXBjfy3+Vp7nH9qB/IB6VsByUzublfSDT/hSu5v7i5HZhhlXTbbmEq8GR13pfFo3+EH6kxSrrQCT1Ln8kwvc4kH5AVl03cFR9ijRzrIYW61ol8JP3wjqQ1drN3E0rqEB2Lv9JuIadREln50X1fP8Ulwq1TqdDJ7aUKy0NGHZh70XV09NqEBYQq72Y6mwcCvL7Y6XIKAWIm7fgAi7V0OpAdUYLebktF8+KsNKSrcwqK3C/2JK8nl5F/Cf9VBBGmi+/aWCFpz9hpKeyxOvb3o2HqV+LKYi0zusjrAZGvu2qf/EUdrJ1PZaoAAAAAElFTkSuQmCC"},424:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAwCAYAAACITIOYAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAI5SURBVHgB7ZndUcJAFIXPRvA5dCAdyKOjzEAHdkDsQCpAO9AKDBVoBzCiz2oFWkKe5We9e/NDmEHIZjcmjPmYnSRLyBw2m7vn3gikkDP0IDCi3VNqLspjSjqG4hzv6U4R78hnXMLBI6rEETxxhnF8yGLlBCc4xgSSttUiwBxt0act4XDXEd326glVuGjCiw9CsYLnaDWR62fHwQFRiy2KWqxVaJGSL5Cq1SNbFLbEBhQPb6n1xQWEavTpUP8YFmnAFIEvfJPIPm3T3aEJ8Wgpv7G1lJuP7Bahafg7OgcI13cDAjOxAv4uoclp6hyJe+SBplc0tVpmYlcac3IBH4aYiV1smuNdZLkD+/hHoauR3VpSVDC2oaYj28t8ZhMDGBKmNTOKhWGiqItKOzr75iOnTU28wTAJNR1ZVwV8FvMLSX5nIVs2f8Akj9qnfMUDtWReqn1qIx5RS/md+XIbIzmx88jKxcfWqS1iQeT2BlMsMaR6Q5vtIBUi+Fjgib8Lyz8+983RSizjClfs0nRIeQP9Oat+3KVQlyIKXXdR20pkGVXz84ZKvZHdIjQPfI0cLiy7WLp9NoQml+viGpoeN7tYiQ/YRuqlPTpiM9tBDQoa2bLIWTcosxLO6DxgA66OW4JfCTh6tlEnzrqqjJ+s/TbQ9A+1NyiIoPpirdUN/phabFEcoFhpXtopjJS2UOySHb5pSbIYlpx5MCyW343SW2hUj2G6gJLMWUo7fFVdAdb/pCQC1hCW/DfSpB/BvKd1e8f7+QAAAABJRU5ErkJggg=="},425:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAQWSURBVHgBzVrdeRJBFD2zYHzFCiQVaB791EgqMKlAUkGSCiQVxFQgVpBYQfjyo48mFUgH8mxCxjN3BrLsLsMsO4uc71tYYGHvmfszZ+6gUBP0T7TxiJYcBglG+Iuh2uFzRChEgL6gkQ3s8vhAgzv81bbnckPgltfc8dpz9R4DVEAlAvpKjP3M0w6WhcKQjwN655jeGaIkliLgDD/h6WvEhEK/LJFSBBgqbTzDV1QZ8UUwHtE4Ve/wJezyQOhLxngixrc8lz3F95jP5rVySav5PUWPJXgF4zntzRNj2Tm9cbTIG0EE9A3jXKPnuWTAz4/xgNuQKiOe3MBFAIkhSez4SCwksMB4MbxMJXH5cwa/J9MWekl4CXiMH7EE7qtturkEAjxZDA+JuQT0DxzQyKJEusM9dstUCpknNpg/mnm0LCyJrWyIJnNuaGbRXsFHxvhO6XrdxGEl48UoyZuT7NuFBCTB8jE6Mb60FGCO9EzIuUlreWh0pRqmfzt3zSW6rlymr1pYDYLub0vxGaphxIHcnAxk3gMNkQazMAlb0XiBiiLkWhKSDjMEZPSztZnTe1XBFR0KB1IYkPVA0ehTm2D90KKk6ZqTKQGZYIpGP0bo1IOP5iHtgaIyd4r1RceE0RMBxcVIGqw86q0IsvUFF1FCwCVEVtsPsO6gum3KSbNgYTLGd0SCVLexCL9WnEWsA6PGEij64Tg128oSMzEmiA89yYGkQJc3I1UfK0vqAZsHloDOa3P1pjoBJ5/bqBFNVICL7fOswNPXoqXMrF47Jh4YZj+QxpQHYqSJ7ZQukfetWuxiRSidWqbkTkfYIKVLBGMpv6uZPzjwibtp/oZj/KahOntQg/zB7AjPqEMJp8dA/WRbKDuckDb5nT33Xp/HVuj3Jx4YogqyXggpwez9yBKRStcUDFlfG0KP+BasADTuhIBLwipub+G5VbJCJOF6uhgjab/c4wUNP8wmPw3fnEp3HeBFzTbO9PyKC3g198bVYEZ2jCOTH2WWpAtt4sosncSlWiSlYMJiO19uF0J7o8IMxjQH4FwXtXc/RYKXiA0Oiv3pNHRN+t90E25mV3tSjjkRykKqLGxISsTMzsQPjLlnEnNhbb8yYEeOZbjjztvpTRCS6zOB93PfadBzRbO5CUkXjvm2yrXU9BOsGpm9gbltyEyLp1Cdk8QvxN68iAXbk+1PXhZLCSXurCehq8A0GVLGGxQScDPherVTbOjkbJor5mSLR68JCU9r06tGpSn7v0lY4/eW2uCYgLW657ZTV4uApnLQemDaHl9tYg9COuLrt81qB+k4+jZrGrIWbtSwYK97ozsLtxnyCdU8MhINRhmz1O4PIkBCq0ESDXaMrVd8s/j6/NnDB+lqPKRCzPzdhkeMflMa/wB/l5mrLJYQTgAAAABJRU5ErkJggg=="},426:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADEAAAAqCAYAAAAajbNEAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEtSURBVHgB7ZnLjcIwEIZ/r3bvKSHbQRrYFXQAFQAlUAFQAaVAByAedUAJuSMwgxFISBz8Gmmw5pMi+TCO8smPiT1AARgkYFdo8IM5NRt6KqSxxgkj08URgURL2C061HuB9I9/5YK++ccypEu8xB4HWNTIT0sj8ksj0vp2+EIEdoMek8CNiqboMKRDlASNXwNObNgUjZMQxjdyYjEzf5h6h28p1mCCRIoYiSIkXrbYzMmLm2dyfEqwJS9ubsnx0WZMXty0bk0wJy9uqvvC5k5ezOgWKwWVkIJKSKEICUXJiPsBzHXC0pNdAiohBZV487YBndNrn1AXR/HIQO57p5ouGg525x2fBZ1OUlAJKaiEFAqSsOEVS0ncJc6uWuld6BOFwdFJuErlBSN8ImeMr5ZESMQOhDv8AAAAAElFTkSuQmCC"},427:function(e,t,i){e.exports=i.p+"static/media/Map.2555544a.png"},428:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},r=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),o=u(i(429)),s=i(0),l=u(s),c=u(i(90));function u(e){return e&&e.__esModule?e:{default:e}}window.ApexCharts=o.default;var h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.default.createRef?i.chartRef=l.default.createRef():i.setRef=function(e){return i.chartRef=e},i.chart=null,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,s.Component),r(e,[{key:"render",value:function(){var e=this.props,t=(e.type,e.height,e.width,e.series,e.options,function(e,t){var i={};for(var a in e)0<=t.indexOf(a)||Object.prototype.hasOwnProperty.call(e,a)&&(i[a]=e[a]);return i}(e,["type","height","width","series","options"]));return l.default.createElement("div",n({ref:l.default.createRef?this.chartRef:this.setRef},t))}},{key:"componentDidMount",value:function(){var e=l.default.createRef?this.chartRef.current:this.chartRef;this.chart=new o.default(e,this.getConfig()),this.chart.render()}},{key:"getConfig",value:function(){var e=this.props,t=e.type,i=e.height,a=e.width,n=e.series,r=e.options,o={chart:{type:t,height:i,width:a},series:n};return this.extend(r,o)}},{key:"isObject",value:function(e){return e&&"object"===(void 0===e?"undefined":a(e))&&!Array.isArray(e)&&null!=e}},{key:"extend",value:function(e,t){var i=this;"function"!=typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),i=1;i<arguments.length;i++){var a=arguments[i];if(null!=a)for(var n in a)a.hasOwnProperty(n)&&(t[n]=a[n])}return t});var a=Object.assign({},e);return this.isObject(e)&&this.isObject(t)&&Object.keys(t).forEach((function(n){i.isObject(t[n])&&n in e?a[n]=i.extend(e[n],t[n]):Object.assign(a,function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}({},n,t[n]))})),a}},{key:"componentDidUpdate",value:function(e){if(!this.chart)return null;var t=this.props,i=t.options,a=t.series,n=t.height,r=t.width,o=JSON.stringify(e.options),s=JSON.stringify(e.series),l=JSON.stringify(i),c=JSON.stringify(a);o===l&&s===c&&n===e.height&&r===e.width||(s===c?this.chart.updateOptions(this.getConfig()):o===l&&n===e.height&&r===e.width?this.chart.updateSeries(a):this.chart.updateOptions(this.getConfig()))}},{key:"componentWillUnmount",value:function(){this.chart&&"function"==typeof this.chart.destroy&&this.chart.destroy()}}]),e}();(t.default=h).propTypes={type:c.default.string.isRequired,width:c.default.any,height:c.default.any,series:c.default.array.isRequired,options:c.default.object.isRequired},h.defaultProps={type:"line",width:"100%",height:"auto"}},429:function(e,t,i){"use strict";var a;function n(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach((function(t){u(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function c(e,t,i){return t&&l(e.prototype,t),i&&l(e,i),e}function u(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,a=d(e);if(t){var n=d(this).constructor;i=Reflect.construct(a,arguments,n)}else i=a.apply(this,arguments);return p(this,i)}}function g(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||v(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){if(e){if("string"==typeof e)return y(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}var x=function(){function e(){s(this,e)}return c(e,[{key:"shadeRGBColor",value:function(e,t){var i=t.split(","),a=e<0?0:255,n=e<0?-1*e:e,r=parseInt(i[0].slice(4),10),o=parseInt(i[1],10),s=parseInt(i[2],10);return"rgb("+(Math.round((a-r)*n)+r)+","+(Math.round((a-o)*n)+o)+","+(Math.round((a-s)*n)+s)+")"}},{key:"shadeHexColor",value:function(e,t){var i=parseInt(t.slice(1),16),a=e<0?0:255,n=e<0?-1*e:e,r=i>>16,o=i>>8&255,s=255&i;return"#"+(16777216+65536*(Math.round((a-r)*n)+r)+256*(Math.round((a-o)*n)+o)+(Math.round((a-s)*n)+s)).toString(16).slice(1)}},{key:"shadeColor",value:function(t,i){return e.isColorHex(i)?this.shadeHexColor(t,i):this.shadeRGBColor(t,i)}}],[{key:"bind",value:function(e,t){return function(){return e.apply(t,arguments)}}},{key:"isObject",value:function(e){return e&&"object"===o(e)&&!Array.isArray(e)&&null!=e}},{key:"is",value:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"}},{key:"listToArray",value:function(e){var t,i=[];for(t=0;t<e.length;t++)i[t]=e[t];return i}},{key:"extend",value:function(e,t){var i=this;"function"!=typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),i=1;i<arguments.length;i++){var a=arguments[i];if(null!=a)for(var n in a)a.hasOwnProperty(n)&&(t[n]=a[n])}return t});var a=Object.assign({},e);return this.isObject(e)&&this.isObject(t)&&Object.keys(t).forEach((function(n){i.isObject(t[n])&&n in e?a[n]=i.extend(e[n],t[n]):Object.assign(a,u({},n,t[n]))})),a}},{key:"extendArray",value:function(t,i){var a=[];return t.map((function(t){a.push(e.extend(i,t))})),a}},{key:"monthMod",value:function(e){return e%12}},{key:"clone",value:function(t){if(e.is("Array",t)){for(var i=[],a=0;a<t.length;a++)i[a]=this.clone(t[a]);return i}if(e.is("Null",t))return null;if(e.is("Date",t))return t;if("object"===o(t)){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=this.clone(t[r]));return n}return t}},{key:"log10",value:function(e){return Math.log(e)/Math.LN10}},{key:"roundToBase10",value:function(e){return Math.pow(10,Math.floor(Math.log10(e)))}},{key:"roundToBase",value:function(e,t){return Math.pow(t,Math.floor(Math.log(e)/Math.log(t)))}},{key:"parseNumber",value:function(e){return null===e?e:parseFloat(e)}},{key:"randomId",value:function(){return(Math.random()+1).toString(36).substring(4)}},{key:"noExponents",value:function(e){var t=String(e).split(/[eE]/);if(1===t.length)return t[0];var i="",a=e<0?"-":"",n=t[0].replace(".",""),r=Number(t[1])+1;if(r<0){for(i=a+"0.";r++;)i+="0";return i+n.replace(/^-/,"")}for(r-=n.length;r--;)i+="0";return n+i}},{key:"getDimensions",value:function(e){var t=getComputedStyle(e,null),i=e.clientHeight,a=e.clientWidth;return i-=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),[a-=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight),i]}},{key:"getBoundingClientRect",value:function(e){var t=e.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:e.clientWidth,height:e.clientHeight,x:t.left,y:t.top}}},{key:"getLargestStringFromArr",value:function(e){return e.reduce((function(e,t){return Array.isArray(t)&&(t=t.reduce((function(e,t){return e.length>t.length?e:t}))),e.length>t.length?e:t}),0)}},{key:"hexToRgba",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#999999",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.6;"#"!==e.substring(0,1)&&(e="#999999");var i=e.replace("#","");i=i.match(new RegExp("(.{"+i.length/3+"})","g"));for(var a=0;a<i.length;a++)i[a]=parseInt(1===i[a].length?i[a]+i[a]:i[a],16);return void 0!==t&&i.push(t),"rgba("+i.join(",")+")"}},{key:"getOpacityFromRGBA",value:function(e){return parseFloat(e.replace(/^.*,(.+)\)/,"$1"))}},{key:"rgb2hex",value:function(e){return(e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===e.length?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""}},{key:"isColorHex",value:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)|(^#[0-9A-F]{8}$)/i.test(e)}},{key:"getPolygonPos",value:function(e,t){for(var i=[],a=2*Math.PI/t,n=0;n<t;n++){var r={};r.x=e*Math.sin(n*a),r.y=-e*Math.cos(n*a),i.push(r)}return i}},{key:"polarToCartesian",value:function(e,t,i,a){var n=(a-90)*Math.PI/180;return{x:e+i*Math.cos(n),y:t+i*Math.sin(n)}}},{key:"escapeString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",i=e.toString().slice();return i.replace(/[` ~!@#$%^&*()|+\=?;:'",.<>{}[\]\\/]/gi,t)}},{key:"negToZero",value:function(e){return e<0?0:e}},{key:"moveIndexInArray",value:function(e,t,i){if(i>=e.length)for(var a=i-e.length+1;a--;)e.push(void 0);return e.splice(i,0,e.splice(t,1)[0]),e}},{key:"extractNumber",value:function(e){return parseFloat(e.replace(/[^\d.]*/g,""))}},{key:"findAncestor",value:function(e,t){for(;(e=e.parentElement)&&!e.classList.contains(t););return e}},{key:"setELstyles",value:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e.style.key=t[i])}},{key:"isNumber",value:function(e){return!isNaN(e)&&parseFloat(Number(e))===e&&!isNaN(parseInt(e,10))}},{key:"isFloat",value:function(e){return Number(e)===e&&e%1!=0}},{key:"isSafari",value:function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}},{key:"isFirefox",value:function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1}},{key:"isIE11",value:function(){if(-1!==window.navigator.userAgent.indexOf("MSIE")||window.navigator.appVersion.indexOf("Trident/")>-1)return!0}},{key:"isIE",value:function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>0){var i=e.indexOf("rv:");return parseInt(e.substring(i+3,e.indexOf(".",i)),10)}var a=e.indexOf("Edge/");return a>0&&parseInt(e.substring(a+5,e.indexOf(".",a)),10)}}]),e}(),b=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.setEasingFunctions()}return c(e,[{key:"setEasingFunctions",value:function(){var e;if(!this.w.globals.easing){switch(this.w.config.chart.animations.easing){case"linear":e="-";break;case"easein":e="<";break;case"easeout":e=">";break;case"easeinout":default:e="<>";break;case"swing":e=function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1};break;case"bounce":e=function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375};break;case"elastic":e=function(e){return e===!!e?e:Math.pow(2,-10*e)*Math.sin((e-.075)*(2*Math.PI)/.3)+1}}this.w.globals.easing=e}}},{key:"animateLine",value:function(e,t,i,a){e.attr(t).animate(a).attr(i)}},{key:"animateMarker",value:function(e,t,i,a,n,r){t||(t=0),e.attr({r:t,width:t,height:t}).animate(a,n).attr({r:i,width:i.width,height:i.height}).afterAll((function(){r()}))}},{key:"animateCircle",value:function(e,t,i,a,n){e.attr({r:t.r,cx:t.cx,cy:t.cy}).animate(a,n).attr({r:i.r,cx:i.cx,cy:i.cy})}},{key:"animateRect",value:function(e,t,i,a,n){e.attr(t).animate(a).attr(i).afterAll((function(){return n()}))}},{key:"animatePathsGradually",value:function(e){var t=e.el,i=e.realIndex,a=e.j,n=e.fill,r=e.pathFrom,o=e.pathTo,s=e.speed,l=e.delay,c=this.w,u=0;c.config.chart.animations.animateGradually.enabled&&(u=c.config.chart.animations.animateGradually.delay),c.config.chart.animations.dynamicAnimation.enabled&&c.globals.dataChanged&&"bar"!==c.config.chart.type&&(u=0),this.morphSVG(t,i,a,"line"!==c.config.chart.type||c.globals.comboCharts?n:"stroke",r,o,s,l*u)}},{key:"showDelayedElements",value:function(){this.w.globals.delayedElements.forEach((function(e){e.el.classList.remove("apexcharts-element-hidden")}))}},{key:"animationCompleted",value:function(e){var t=this.w;t.globals.animationEnded||(t.globals.animationEnded=!0,this.showDelayedElements(),"function"==typeof t.config.chart.events.animationEnd&&t.config.chart.events.animationEnd(this.ctx,{el:e,w:t}))}},{key:"morphSVG",value:function(e,t,i,a,n,r,o,s){var l=this,c=this.w;n||(n=e.attr("pathFrom")),r||(r=e.attr("pathTo"));var u=function(e){return"radar"===c.config.chart.type&&(o=1),"M 0 ".concat(c.globals.gridHeight)};(!n||n.indexOf("undefined")>-1||n.indexOf("NaN")>-1)&&(n=u()),(!r||r.indexOf("undefined")>-1||r.indexOf("NaN")>-1)&&(r=u()),c.globals.shouldAnimate||(o=1),e.plot(n).animate(1,c.globals.easing,s).plot(n).animate(o,c.globals.easing,s).plot(r).afterAll((function(){x.isNumber(i)?i===c.globals.series[c.globals.maxValsInArrayIndex].length-2&&c.globals.shouldAnimate&&l.animationCompleted(e):"none"!==a&&c.globals.shouldAnimate&&(!c.globals.comboCharts&&t===c.globals.series.length-1||c.globals.comboCharts)&&l.animationCompleted(e),l.showDelayedElements()}))}}]),e}(),_=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"getDefaultFilter",value:function(e,t){var i=this.w;e.unfilter(!0),(new window.SVG.Filter).size("120%","180%","-5%","-40%"),"none"!==i.config.states.normal.filter?this.applyFilter(e,t,i.config.states.normal.filter.type,i.config.states.normal.filter.value):i.config.chart.dropShadow.enabled&&this.dropShadow(e,i.config.chart.dropShadow,t)}},{key:"addNormalFilter",value:function(e,t){var i=this.w;i.config.chart.dropShadow.enabled&&!e.node.classList.contains("apexcharts-marker")&&this.dropShadow(e,i.config.chart.dropShadow,t)}},{key:"addLightenFilter",value:function(e,t,i){var a=this,n=this.w,r=i.intensity;e.unfilter(!0),new window.SVG.Filter,e.filter((function(e){var i=n.config.chart.dropShadow;(i.enabled?a.addShadow(e,t,i):e).componentTransfer({rgb:{type:"linear",slope:1.5,intercept:r}})})),e.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(e.filterer.node)}},{key:"addDarkenFilter",value:function(e,t,i){var a=this,n=this.w,r=i.intensity;e.unfilter(!0),new window.SVG.Filter,e.filter((function(e){var i=n.config.chart.dropShadow;(i.enabled?a.addShadow(e,t,i):e).componentTransfer({rgb:{type:"linear",slope:r}})})),e.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(e.filterer.node)}},{key:"applyFilter",value:function(e,t,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;switch(i){case"none":this.addNormalFilter(e,t);break;case"lighten":this.addLightenFilter(e,t,{intensity:a});break;case"darken":this.addDarkenFilter(e,t,{intensity:a})}}},{key:"addShadow",value:function(e,t,i){var a=i.blur,n=i.top,r=i.left,o=i.color,s=i.opacity,l=e.flood(Array.isArray(o)?o[t]:o,s).composite(e.sourceAlpha,"in").offset(r,n).gaussianBlur(a).merge(e.source);return e.blend(e.source,l)}},{key:"dropShadow",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=t.top,n=t.left,r=t.blur,o=t.color,s=t.opacity,l=t.noUserSpaceOnUse,c=this.w;return e.unfilter(!0),x.isIE()&&"radialBar"===c.config.chart.type||(o=Array.isArray(o)?o[i]:o,e.filter((function(e){var t;t=x.isSafari()||x.isFirefox()||x.isIE()?e.flood(o,s).composite(e.sourceAlpha,"in").offset(n,a).gaussianBlur(r):e.flood(o,s).composite(e.sourceAlpha,"in").offset(n,a).gaussianBlur(r).merge(e.source),e.blend(e.source,t)})),l||e.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(e.filterer.node)),e}},{key:"setSelectionFilter",value:function(e,t,i){var a=this.w;if(void 0!==a.globals.selectedDataPoints[t]&&a.globals.selectedDataPoints[t].indexOf(i)>-1){e.node.setAttribute("selected",!0);var n=a.config.states.active.filter;"none"!==n&&this.applyFilter(e,t,n.type,n.value)}}},{key:"_scaleFilterSize",value:function(e){!function(t){for(var i in t)t.hasOwnProperty(i)&&e.setAttribute(i,t[i])}({width:"200%",height:"200%",x:"-50%",y:"-50%"})}}]),e}(),w=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"roundPathCorners",value:function(e,t){function i(e,t,i){var n=t.x-e.x,r=t.y-e.y,o=Math.sqrt(n*n+r*r);return a(e,t,Math.min(1,i/o))}function a(e,t,i){return{x:e.x+(t.x-e.x)*i,y:e.y+(t.y-e.y)*i}}function n(e,t){e.length>2&&(e[e.length-2]=t.x,e[e.length-1]=t.y)}function r(e){return{x:parseFloat(e[e.length-2]),y:parseFloat(e[e.length-1])}}var o=e.split(/[,\s]/).reduce((function(e,t){var i=t.match("([a-zA-Z])(.+)");return i?(e.push(i[1]),e.push(i[2])):e.push(t),e}),[]).reduce((function(e,t){return parseFloat(t)==t&&e.length?e[e.length-1].push(t):e.push([t]),e}),[]),s=[];if(o.length>1){var l=r(o[0]),c=null;"Z"==o[o.length-1][0]&&o[0].length>2&&(c=["L",l.x,l.y],o[o.length-1]=c),s.push(o[0]);for(var u=1;u<o.length;u++){var h=s[s.length-1],d=o[u],f=d==c?o[1]:o[u+1];if(f&&h&&h.length>2&&"L"==d[0]&&f.length>2&&"L"==f[0]){var p,m,g=r(h),v=r(d),y=r(f);p=i(v,g,t),m=i(v,y,t),n(d,p),d.origPoint=v,s.push(d);var x=a(p,v,.5),b=a(v,m,.5),_=["C",x.x,x.y,b.x,b.y,m.x,m.y];_.origPoint=v,s.push(_)}else s.push(d)}if(c){var w=r(s[s.length-1]);s.push(["Z"]),n(s[0],w)}}else s=o;return s.reduce((function(e,t){return e+t.join(" ")+" "}),"")}},{key:"drawLine",value:function(e,t,i,a){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#a8a8a8",r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"butt",l=this.w,c=l.globals.dom.Paper.line().attr({x1:e,y1:t,x2:i,y2:a,stroke:n,"stroke-dasharray":r,"stroke-width":o,"stroke-linecap":s});return c}},{key:"drawRect",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#fefefe",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,u=this.w,h=u.globals.dom.Paper.rect();return h.attr({x:e,y:t,width:i>0?i:0,height:a>0?a:0,rx:n,ry:n,opacity:o,"stroke-width":null!==s?s:0,stroke:null!==l?l:"none","stroke-dasharray":c}),h.node.setAttribute("fill",r),h}},{key:"drawPolygon",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#e1e1e1",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none",n=this.w,r=n.globals.dom.Paper.polygon(e).attr({fill:a,stroke:t,"stroke-width":i});return r}},{key:"drawCircle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this.w;e<0&&(e=0);var a=i.globals.dom.Paper.circle(2*e);return null!==t&&a.attr(t),a}},{key:"drawPath",value:function(e){var t=e.d,i=void 0===t?"":t,a=e.stroke,n=void 0===a?"#a8a8a8":a,r=e.strokeWidth,o=void 0===r?1:r,s=e.fill,l=e.fillOpacity,c=void 0===l?1:l,u=e.strokeOpacity,h=void 0===u?1:u,d=e.classes,f=e.strokeLinecap,p=void 0===f?null:f,m=e.strokeDashArray,g=void 0===m?0:m,v=this.w;return null===p&&(p=v.config.stroke.lineCap),(i.indexOf("undefined")>-1||i.indexOf("NaN")>-1)&&(i="M 0 ".concat(v.globals.gridHeight)),v.globals.dom.Paper.path(i).attr({fill:s,"fill-opacity":c,stroke:n,"stroke-opacity":h,"stroke-linecap":p,"stroke-width":o,"stroke-dasharray":g,class:d})}},{key:"group",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.w,i=t.globals.dom.Paper.group();return null!==e&&i.attr(e),i}},{key:"move",value:function(e,t){return["M",e,t].join(" ")}},{key:"line",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=null;return null===i?a=[" L",e,t].join(" "):"H"===i?a=[" H",e].join(" "):"V"===i&&(a=[" V",t].join(" ")),a}},{key:"curve",value:function(e,t,i,a,n,r){return["C",e,t,i,a,n,r].join(" ")}},{key:"quadraticCurve",value:function(e,t,i,a){return["Q",e,t,i,a].join(" ")}},{key:"arc",value:function(e,t,i,a,n,r,o){var s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l="A";s&&(l="a");var c=[l,e,t,i,a,n,r,o].join(" ");return c}},{key:"renderPaths",value:function(e){var t,i=e.j,a=e.realIndex,n=e.pathFrom,o=e.pathTo,s=e.stroke,l=e.strokeWidth,c=e.strokeLinecap,u=e.fill,h=e.animationDelay,d=e.initialSpeed,f=e.dataChangeSpeed,p=e.className,m=e.shouldClipToGrid,g=void 0===m||m,v=e.bindEventsOnPaths,y=void 0===v||v,x=e.drawShadow,w=void 0===x||x,k=this.w,S=new _(this.ctx),C=new b(this.ctx),A=this.w.config.chart.animations.enabled,O=A&&this.w.config.chart.animations.dynamicAnimation.enabled,T=!!(A&&!k.globals.resized||O&&k.globals.dataChanged&&k.globals.shouldAnimate);T?t=n:(t=o,k.globals.animationEnded=!0);var M,E=k.config.stroke.dashArray;M=Array.isArray(E)?E[a]:k.config.stroke.dashArray;var I=this.drawPath({d:t,stroke:s,strokeWidth:l,fill:u,fillOpacity:1,classes:p,strokeLinecap:c,strokeDashArray:M});if(I.attr("index",a),g&&I.attr({"clip-path":"url(#gridRectMask".concat(k.globals.cuid,")")}),"none"!==k.config.states.normal.filter.type)S.getDefaultFilter(I,a);else if(k.config.chart.dropShadow.enabled&&w&&(!k.config.chart.dropShadow.enabledOnSeries||k.config.chart.dropShadow.enabledOnSeries&&-1!==k.config.chart.dropShadow.enabledOnSeries.indexOf(a))){var P=k.config.chart.dropShadow;S.dropShadow(I,P,a)}y&&(I.node.addEventListener("mouseenter",this.pathMouseEnter.bind(this,I)),I.node.addEventListener("mouseleave",this.pathMouseLeave.bind(this,I)),I.node.addEventListener("mousedown",this.pathMouseDown.bind(this,I))),I.attr({pathTo:o,pathFrom:n});var D={el:I,j:i,realIndex:a,pathFrom:n,pathTo:o,fill:u,strokeWidth:l,delay:h};return!A||k.globals.resized||k.globals.dataChanged?!k.globals.resized&&k.globals.dataChanged||C.showDelayedElements():C.animatePathsGradually(r(r({},D),{},{speed:d})),k.globals.dataChanged&&O&&T&&C.animatePathsGradually(r(r({},D),{},{speed:f})),I}},{key:"drawPattern",value:function(e,t,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#a8a8a8",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=this.w,o=r.globals.dom.Paper.pattern(t,i,(function(r){"horizontalLines"===e?r.line(0,0,i,0).stroke({color:a,width:n+1}):"verticalLines"===e?r.line(0,0,0,t).stroke({color:a,width:n+1}):"slantedLines"===e?r.line(0,0,t,i).stroke({color:a,width:n}):"squares"===e?r.rect(t,i).fill("none").stroke({color:a,width:n}):"circles"===e&&r.circle(t).fill("none").stroke({color:a,width:n})}));return o}},{key:"drawGradient",value:function(e,t,i,a,n){var r,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,u=this.w;t.length<9&&0===t.indexOf("#")&&(t=x.hexToRgba(t,a)),i.length<9&&0===i.indexOf("#")&&(i=x.hexToRgba(i,n));var h=0,d=1,f=1,p=null;null!==s&&(h=void 0!==s[0]?s[0]/100:0,d=void 0!==s[1]?s[1]/100:1,f=void 0!==s[2]?s[2]/100:1,p=void 0!==s[3]?s[3]/100:null);var m=!("donut"!==u.config.chart.type&&"pie"!==u.config.chart.type&&"polarArea"!==u.config.chart.type&&"bubble"!==u.config.chart.type);if(r=null===l||0===l.length?u.globals.dom.Paper.gradient(m?"radial":"linear",(function(e){e.at(h,t,a),e.at(d,i,n),e.at(f,i,n),null!==p&&e.at(p,t,a)})):u.globals.dom.Paper.gradient(m?"radial":"linear",(function(e){(Array.isArray(l[c])?l[c]:l).forEach((function(t){e.at(t.offset/100,t.color,t.opacity)}))})),m){var g=u.globals.gridWidth/2,v=u.globals.gridHeight/2;"bubble"!==u.config.chart.type?r.attr({gradientUnits:"userSpaceOnUse",cx:g,cy:v,r:o}):r.attr({cx:.5,cy:.5,r:.8,fx:.2,fy:.2})}else"vertical"===e?r.from(0,0).to(0,1):"diagonal"===e?r.from(0,0).to(1,1):"horizontal"===e?r.from(0,1).to(1,1):"diagonal2"===e&&r.from(1,0).to(0,1);return r}},{key:"getTextBasedOnMaxWidth",value:function(e){var t=e.text,i=e.maxWidth,a=e.fontSize,n=e.fontFamily,r=this.getTextRects(t,a,n),o=r.width/t.length,s=Math.floor(i/o);return i<r.width?t.slice(0,s-3)+"...":t}},{key:"drawText",value:function(e){var t=this,i=e.x,a=e.y,n=e.text,o=e.textAnchor,s=e.fontSize,l=e.fontFamily,c=e.fontWeight,u=e.foreColor,h=e.opacity,d=e.maxWidth,f=e.cssClass,p=void 0===f?"":f,m=e.isPlainText,g=void 0===m||m,v=this.w;void 0===n&&(n="");var y=n;o||(o="start"),u&&u.length||(u=v.config.chart.foreColor),l=l||v.config.chart.fontFamily,c=c||"regular";var x,b={maxWidth:d,fontSize:s=s||"11px",fontFamily:l};return Array.isArray(n)?x=v.globals.dom.Paper.text((function(e){for(var i=0;i<n.length;i++)y=n[i],d&&(y=t.getTextBasedOnMaxWidth(r({text:n[i]},b))),0===i?e.tspan(y):e.tspan(y).newLine()})):(d&&(y=this.getTextBasedOnMaxWidth(r({text:n},b))),x=g?v.globals.dom.Paper.plain(n):v.globals.dom.Paper.text((function(e){return e.tspan(y)}))),x.attr({x:i,y:a,"text-anchor":o,"dominant-baseline":"auto","font-size":s,"font-family":l,"font-weight":c,fill:u,class:"apexcharts-text "+p}),x.node.style.fontFamily=l,x.node.style.opacity=h,x}},{key:"drawMarker",value:function(e,t,i){e=e||0;var a=i.pSize||0,n=null;if("square"===i.shape||"rect"===i.shape){var r=void 0===i.pRadius?a/2:i.pRadius;null!==t&&a||(a=0,r=0);var o=1.2*a+r,s=this.drawRect(o,o,o,o,r);s.attr({x:e-o/2,y:t-o/2,cx:e,cy:t,class:i.class?i.class:"",fill:i.pointFillColor,"fill-opacity":i.pointFillOpacity?i.pointFillOpacity:1,stroke:i.pointStrokeColor,"stroke-width":i.pointStrokeWidth?i.pointStrokeWidth:0,"stroke-opacity":i.pointStrokeOpacity?i.pointStrokeOpacity:1}),n=s}else"circle"!==i.shape&&i.shape||(x.isNumber(t)||(a=0,t=0),n=this.drawCircle(a,{cx:e,cy:t,class:i.class?i.class:"",stroke:i.pointStrokeColor,fill:i.pointFillColor,"fill-opacity":i.pointFillOpacity?i.pointFillOpacity:1,"stroke-width":i.pointStrokeWidth?i.pointStrokeWidth:0,"stroke-opacity":i.pointStrokeOpacity?i.pointStrokeOpacity:1}));return n}},{key:"pathMouseEnter",value:function(e,t){var i=this.w,a=new _(this.ctx),n=parseInt(e.node.getAttribute("index"),10),r=parseInt(e.node.getAttribute("j"),10);if("function"==typeof i.config.chart.events.dataPointMouseEnter&&i.config.chart.events.dataPointMouseEnter(t,this.ctx,{seriesIndex:n,dataPointIndex:r,w:i}),this.ctx.events.fireEvent("dataPointMouseEnter",[t,this.ctx,{seriesIndex:n,dataPointIndex:r,w:i}]),("none"===i.config.states.active.filter.type||"true"!==e.node.getAttribute("selected"))&&"none"!==i.config.states.hover.filter.type&&!i.globals.isTouchDevice){var o=i.config.states.hover.filter;a.applyFilter(e,n,o.type,o.value)}}},{key:"pathMouseLeave",value:function(e,t){var i=this.w,a=new _(this.ctx),n=parseInt(e.node.getAttribute("index"),10),r=parseInt(e.node.getAttribute("j"),10);"function"==typeof i.config.chart.events.dataPointMouseLeave&&i.config.chart.events.dataPointMouseLeave(t,this.ctx,{seriesIndex:n,dataPointIndex:r,w:i}),this.ctx.events.fireEvent("dataPointMouseLeave",[t,this.ctx,{seriesIndex:n,dataPointIndex:r,w:i}]),"none"!==i.config.states.active.filter.type&&"true"===e.node.getAttribute("selected")||"none"!==i.config.states.hover.filter.type&&a.getDefaultFilter(e,n)}},{key:"pathMouseDown",value:function(e,t){var i=this.w,a=new _(this.ctx),n=parseInt(e.node.getAttribute("index"),10),r=parseInt(e.node.getAttribute("j"),10),o="false";if("true"===e.node.getAttribute("selected")){if(e.node.setAttribute("selected","false"),i.globals.selectedDataPoints[n].indexOf(r)>-1){var s=i.globals.selectedDataPoints[n].indexOf(r);i.globals.selectedDataPoints[n].splice(s,1)}}else{if(!i.config.states.active.allowMultipleDataPointsSelection&&i.globals.selectedDataPoints.length>0){i.globals.selectedDataPoints=[];var l=i.globals.dom.Paper.select(".apexcharts-series path").members,c=i.globals.dom.Paper.select(".apexcharts-series circle, .apexcharts-series rect").members,u=function(e){Array.prototype.forEach.call(e,(function(e){e.node.setAttribute("selected","false"),a.getDefaultFilter(e,n)}))};u(l),u(c)}e.node.setAttribute("selected","true"),o="true",void 0===i.globals.selectedDataPoints[n]&&(i.globals.selectedDataPoints[n]=[]),i.globals.selectedDataPoints[n].push(r)}if("true"===o){var h=i.config.states.active.filter;if("none"!==h)a.applyFilter(e,n,h.type,h.value);else if("none"!==i.config.states.hover.filter&&!i.globals.isTouchDevice){var d=i.config.states.hover.filter;a.applyFilter(e,n,d.type,d.value)}}else"none"!==i.config.states.active.filter.type&&("none"===i.config.states.hover.filter.type||i.globals.isTouchDevice?a.getDefaultFilter(e,n):(d=i.config.states.hover.filter,a.applyFilter(e,n,d.type,d.value)));"function"==typeof i.config.chart.events.dataPointSelection&&i.config.chart.events.dataPointSelection(t,this.ctx,{selectedDataPoints:i.globals.selectedDataPoints,seriesIndex:n,dataPointIndex:r,w:i}),t&&this.ctx.events.fireEvent("dataPointSelection",[t,this.ctx,{selectedDataPoints:i.globals.selectedDataPoints,seriesIndex:n,dataPointIndex:r,w:i}])}},{key:"rotateAroundCenter",value:function(e){var t={};return e&&"function"==typeof e.getBBox&&(t=e.getBBox()),{x:t.x+t.width/2,y:t.y+t.height/2}}},{key:"getTextRects",value:function(e,t,i,a){var n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=this.w,o=this.drawText({x:-200,y:-200,text:e,textAnchor:"start",fontSize:t,fontFamily:i,foreColor:"#fff",opacity:0});a&&o.attr("transform",a),r.globals.dom.Paper.add(o);var s=o.bbox();return n||(s=o.node.getBoundingClientRect()),o.remove(),{width:s.width,height:s.height}}},{key:"placeTextWithEllipsis",value:function(e,t,i){if("function"==typeof e.getComputedTextLength&&(e.textContent=t,t.length>0&&e.getComputedTextLength()>=i/1.1)){for(var a=t.length-3;a>0;a-=3)if(e.getSubStringLength(0,a)<=i/1.1)return void(e.textContent=t.substring(0,a)+"...");e.textContent="."}}}],[{key:"setAttrs",value:function(e,t){for(var i in t)t.hasOwnProperty(i)&&e.setAttribute(i,t[i])}}]),e}(),k=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"getStackedSeriesTotals",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.w,i=[];if(0===t.globals.series.length)return i;for(var a=0;a<t.globals.series[t.globals.maxValsInArrayIndex].length;a++){for(var n=0,r=0;r<t.globals.series.length;r++)void 0!==t.globals.series[r][a]&&-1===e.indexOf(r)&&(n+=t.globals.series[r][a]);i.push(n)}return i}},{key:"getSeriesTotalByIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===e?this.w.config.series.reduce((function(e,t){return e+t}),0):this.w.globals.series[e].reduce((function(e,t){return e+t}),0)}},{key:"isSeriesNull",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return 0===(null===e?this.w.config.series.filter((function(e){return null!==e})):this.w.config.series[e].data.filter((function(e){return null!==e}))).length}},{key:"seriesHaveSameValues",value:function(e){return this.w.globals.series[e].every((function(e,t,i){return e===i[0]}))}},{key:"getCategoryLabels",value:function(e){var t=this.w,i=e.slice();return t.config.xaxis.convertedCatToNumeric&&(i=e.map((function(e,i){return t.config.xaxis.labels.formatter(e-t.globals.minX+1)}))),i}},{key:"getLargestSeries",value:function(){var e=this.w;e.globals.maxValsInArrayIndex=e.globals.series.map((function(e){return e.length})).indexOf(Math.max.apply(Math,e.globals.series.map((function(e){return e.length}))))}},{key:"getLargestMarkerSize",value:function(){var e=this.w,t=0;return e.globals.markers.size.forEach((function(e){t=Math.max(t,e)})),e.config.markers.discrete&&e.config.markers.discrete.length&&e.config.markers.discrete.forEach((function(e){t=Math.max(t,e.size)})),t>0&&(t+=e.config.markers.hover.sizeOffset+1),e.globals.markers.largestSize=t,t}},{key:"getSeriesTotals",value:function(){var e=this.w;e.globals.seriesTotals=e.globals.series.map((function(e,t){var i=0;if(Array.isArray(e))for(var a=0;a<e.length;a++)i+=e[a];else i+=e;return i}))}},{key:"getSeriesTotalsXRange",value:function(e,t){var i=this.w;return i.globals.series.map((function(a,n){for(var r=0,o=0;o<a.length;o++)i.globals.seriesX[n][o]>e&&i.globals.seriesX[n][o]<t&&(r+=a[o]);return r}))}},{key:"getPercentSeries",value:function(){var e=this.w;e.globals.seriesPercent=e.globals.series.map((function(t,i){var a=[];if(Array.isArray(t))for(var n=0;n<t.length;n++){var r=e.globals.stackedSeriesTotals[n],o=0;r&&(o=100*t[n]/r),a.push(o)}else{var s=100*t/e.globals.seriesTotals.reduce((function(e,t){return e+t}),0);a.push(s)}return a}))}},{key:"getCalculatedRatios",value:function(){var e,t,i,a,n=this.w.globals,r=[],o=0,s=[],l=.1,c=0;if(n.yRange=[],n.isMultipleYAxis)for(var u=0;u<n.minYArr.length;u++)n.yRange.push(Math.abs(n.minYArr[u]-n.maxYArr[u])),s.push(0);else n.yRange.push(Math.abs(n.minY-n.maxY));n.xRange=Math.abs(n.maxX-n.minX),n.zRange=Math.abs(n.maxZ-n.minZ);for(var h=0;h<n.yRange.length;h++)r.push(n.yRange[h]/n.gridHeight);if(t=n.xRange/n.gridWidth,i=Math.abs(n.initialMaxX-n.initialMinX)/n.gridWidth,e=n.yRange/n.gridWidth,a=n.xRange/n.gridHeight,(o=n.zRange/n.gridHeight*16)||(o=1),n.minY!==Number.MIN_VALUE&&0!==Math.abs(n.minY)&&(n.hasNegs=!0),n.isMultipleYAxis){s=[];for(var d=0;d<r.length;d++)s.push(-n.minYArr[d]/r[d])}else s.push(-n.minY/r[0]),n.minY!==Number.MIN_VALUE&&0!==Math.abs(n.minY)&&(l=-n.minY/e,c=n.minX/t);return{yRatio:r,invertedYRatio:e,zRatio:o,xRatio:t,initialXRatio:i,invertedXRatio:a,baseLineInvertedY:l,baseLineY:s,baseLineX:c}}},{key:"getLogSeries",value:function(e){var t=this,i=this.w;return i.globals.seriesLog=e.map((function(e,a){return i.config.yaxis[a]&&i.config.yaxis[a].logarithmic?e.map((function(e){return null===e?null:t.getLogVal(i.config.yaxis[a].logBase,e,a)})):e})),i.globals.invalidLogScale?e:i.globals.seriesLog}},{key:"getBaseLog",value:function(e,t){return Math.log(t)/Math.log(e)}},{key:"getLogVal",value:function(e,t,i){if(0===t)return 0;var a=this.w,n=0===a.globals.minYArr[i]?-1:this.getBaseLog(e,a.globals.minYArr[i]),r=(0===a.globals.maxYArr[i]?0:this.getBaseLog(e,a.globals.maxYArr[i]))-n;return t<1?t/r:(this.getBaseLog(e,t)-n)/r}},{key:"getLogYRatios",value:function(e){var t=this,i=this.w,a=this.w.globals;return a.yLogRatio=e.slice(),a.logYRange=a.yRange.map((function(e,n){if(i.config.yaxis[n]&&t.w.config.yaxis[n].logarithmic){var r,o=-Number.MAX_VALUE,s=Number.MIN_VALUE;return a.seriesLog.forEach((function(e,t){e.forEach((function(e){i.config.yaxis[t]&&i.config.yaxis[t].logarithmic&&(o=Math.max(e,o),s=Math.min(e,s))}))})),r=Math.pow(a.yRange[n],Math.abs(s-o)/a.yRange[n]),a.yLogRatio[n]=r/a.gridHeight,r}})),a.invalidLogScale?e.slice():a.yLogRatio}}],[{key:"checkComboSeries",value:function(e){var t=!1,i=0,a=0;return e.length&&void 0!==e[0].type&&e.forEach((function(e){"bar"!==e.type&&"column"!==e.type&&"candlestick"!==e.type&&"boxPlot"!==e.type||i++,void 0!==e.type&&a++})),a>0&&(t=!0),{comboBarCount:i,comboCharts:t}}},{key:"extendArrayProps",value:function(e,t,i){return t.yaxis&&(t=e.extendYAxis(t,i)),t.annotations&&(t.annotations.yaxis&&(t=e.extendYAxisAnnotations(t)),t.annotations.xaxis&&(t=e.extendXAxisAnnotations(t)),t.annotations.points&&(t=e.extendPointAnnotations(t))),t}}]),e}(),S=function(){function e(t){s(this,e),this.w=t.w,this.annoCtx=t}return c(e,[{key:"setOrientations",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this.w;if("vertical"===e.label.orientation){var a=null!==t?t:0,n=i.globals.dom.baseEl.querySelector(".apexcharts-xaxis-annotations .apexcharts-xaxis-annotation-label[rel='".concat(a,"']"));if(null!==n){var r=n.getBoundingClientRect();n.setAttribute("x",parseFloat(n.getAttribute("x"))-r.height+4),"top"===e.label.position?n.setAttribute("y",parseFloat(n.getAttribute("y"))+r.width):n.setAttribute("y",parseFloat(n.getAttribute("y"))-r.width);var o=this.annoCtx.graphics.rotateAroundCenter(n),s=o.x,l=o.y;n.setAttribute("transform","rotate(-90 ".concat(s," ").concat(l,")"))}}}},{key:"addBackgroundToAnno",value:function(e,t){var i=this.w;if(!e||void 0===t.label.text||void 0!==t.label.text&&!String(t.label.text).trim())return null;var a=i.globals.dom.baseEl.querySelector(".apexcharts-grid").getBoundingClientRect(),n=e.getBoundingClientRect(),r=t.label.style.padding.left,o=t.label.style.padding.right,s=t.label.style.padding.top,l=t.label.style.padding.bottom;"vertical"===t.label.orientation&&(s=t.label.style.padding.left,l=t.label.style.padding.right,r=t.label.style.padding.top,o=t.label.style.padding.bottom);var c=n.left-a.left-r,u=n.top-a.top-s,h=this.annoCtx.graphics.drawRect(c-i.globals.barPadForNumericAxis,u,n.width+r+o,n.height+s+l,t.label.borderRadius,t.label.style.background,1,t.label.borderWidth,t.label.borderColor,0);return t.id&&h.node.classList.add(t.id),h}},{key:"annotationsBackground",value:function(){var e=this,t=this.w,i=function(i,a,n){var r=t.globals.dom.baseEl.querySelector(".apexcharts-".concat(n,"-annotations .apexcharts-").concat(n,"-annotation-label[rel='").concat(a,"']"));if(r){var o=r.parentNode,s=e.addBackgroundToAnno(r,i);s&&(o.insertBefore(s.node,r),i.label.mouseEnter&&s.node.addEventListener("mouseenter",i.label.mouseEnter.bind(e,i)),i.label.mouseLeave&&s.node.addEventListener("mouseleave",i.label.mouseLeave.bind(e,i)),i.label.click&&s.node.addEventListener("click",i.label.click.bind(e,i)))}};t.config.annotations.xaxis.map((function(e,t){i(e,t,"xaxis")})),t.config.annotations.yaxis.map((function(e,t){i(e,t,"yaxis")})),t.config.annotations.points.map((function(e,t){i(e,t,"point")}))}},{key:"getY1Y2",value:function(e,t){var i,a="y1"===e?t.y:t.y2,n=this.w;if(this.annoCtx.invertAxis){var r=n.globals.labels.indexOf(a);n.config.xaxis.convertedCatToNumeric&&(r=n.globals.categoryLabels.indexOf(a));var o=n.globals.dom.baseEl.querySelector(".apexcharts-yaxis-texts-g text:nth-child("+(r+1)+")");o&&(i=parseFloat(o.getAttribute("y")))}else{var s;s=n.config.yaxis[t.yAxisIndex].logarithmic?(a=new k(this.annoCtx.ctx).getLogVal(a,t.yAxisIndex))/n.globals.yLogRatio[t.yAxisIndex]:(a-n.globals.minYArr[t.yAxisIndex])/(n.globals.yRange[t.yAxisIndex]/n.globals.gridHeight),i=n.globals.gridHeight-s,!t.marker||void 0!==t.y&&null!==t.y||(i=0),n.config.yaxis[t.yAxisIndex]&&n.config.yaxis[t.yAxisIndex].reversed&&(i=s)}return"string"==typeof a&&a.indexOf("px")>-1&&(i=parseFloat(a)),i}},{key:"getX1X2",value:function(e,t){var i=this.w,a=this.annoCtx.invertAxis?i.globals.minY:i.globals.minX,n=this.annoCtx.invertAxis?i.globals.maxY:i.globals.maxX,r=this.annoCtx.invertAxis?i.globals.yRange[0]:i.globals.xRange,o=(t.x-a)/(r/i.globals.gridWidth);this.annoCtx.inversedReversedAxis&&(o=(n-t.x)/(r/i.globals.gridWidth)),"category"!==i.config.xaxis.type&&!i.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||i.globals.dataFormatXNumeric||(o=this.getStringX(t.x));var s=(t.x2-a)/(r/i.globals.gridWidth);return this.annoCtx.inversedReversedAxis&&(s=(n-t.x2)/(r/i.globals.gridWidth)),"category"!==i.config.xaxis.type&&!i.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||i.globals.dataFormatXNumeric||(s=this.getStringX(t.x2)),void 0!==t.x&&null!==t.x||!t.marker||(o=i.globals.gridWidth),"x1"===e&&"string"==typeof t.x&&t.x.indexOf("px")>-1&&(o=parseFloat(t.x)),"x2"===e&&"string"==typeof t.x2&&t.x2.indexOf("px")>-1&&(s=parseFloat(t.x2)),"x1"===e?o:s}},{key:"getStringX",value:function(e){var t=this.w,i=e;t.config.xaxis.convertedCatToNumeric&&t.globals.categoryLabels.length&&(e=t.globals.categoryLabels.indexOf(e)+1);var a=t.globals.labels.indexOf(e),n=t.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g text:nth-child("+(a+1)+")");return n&&(i=parseFloat(n.getAttribute("x"))),i}}]),e}(),C=function(){function e(t){s(this,e),this.w=t.w,this.annoCtx=t,this.invertAxis=this.annoCtx.invertAxis,this.helpers=new S(this.annoCtx)}return c(e,[{key:"addXaxisAnnotation",value:function(e,t,i){var a,n=this.w,r=this.helpers.getX1X2("x1",e),o=e.label.text,s=e.strokeDashArray;if(x.isNumber(r)){if(null===e.x2||void 0===e.x2){var l=this.annoCtx.graphics.drawLine(r+e.offsetX,0+e.offsetY,r+e.offsetX,n.globals.gridHeight+e.offsetY,e.borderColor,s,e.borderWidth);t.appendChild(l.node),e.id&&l.node.classList.add(e.id)}else{if((a=this.helpers.getX1X2("x2",e))<r){var c=r;r=a,a=c}var u=this.annoCtx.graphics.drawRect(r+e.offsetX,0+e.offsetY,a-r,n.globals.gridHeight+e.offsetY,0,e.fillColor,e.opacity,1,e.borderColor,s);u.node.classList.add("apexcharts-annotation-rect"),u.attr("clip-path","url(#gridRectMask".concat(n.globals.cuid,")")),t.appendChild(u.node),e.id&&u.node.classList.add(e.id)}var h=this.annoCtx.graphics.getTextRects(o,parseFloat(e.label.style.fontSize)),d="top"===e.label.position?4:"center"===e.label.position?n.globals.gridHeight/2+("vertical"===e.label.orientation?h.width/2:0):n.globals.gridHeight,f=this.annoCtx.graphics.drawText({x:r+e.label.offsetX,y:d+e.label.offsetY-("vertical"===e.label.orientation?"top"===e.label.position?h.width/2-12:-h.width/2:0),text:o,textAnchor:e.label.textAnchor,fontSize:e.label.style.fontSize,fontFamily:e.label.style.fontFamily,fontWeight:e.label.style.fontWeight,foreColor:e.label.style.color,cssClass:"apexcharts-xaxis-annotation-label ".concat(e.label.style.cssClass," ").concat(e.id?e.id:"")});f.attr({rel:i}),t.appendChild(f.node),this.annoCtx.helpers.setOrientations(e,i)}}},{key:"drawXAxisAnnotations",value:function(){var e=this,t=this.w,i=this.annoCtx.graphics.group({class:"apexcharts-xaxis-annotations"});return t.config.annotations.xaxis.map((function(t,a){e.addXaxisAnnotation(t,i.node,a)})),i}}]),e}(),A=function(){function e(t){s(this,e),this.w=t.w,this.annoCtx=t,this.helpers=new S(this.annoCtx)}return c(e,[{key:"addYaxisAnnotation",value:function(e,t,i){var a,n=this.w,r=e.strokeDashArray,o=this.helpers.getY1Y2("y1",e),s=e.label.text;if(null===e.y2||void 0===e.y2){var l=this.annoCtx.graphics.drawLine(0+e.offsetX,o+e.offsetY,this._getYAxisAnnotationWidth(e),o+e.offsetY,e.borderColor,r,e.borderWidth);t.appendChild(l.node),e.id&&l.node.classList.add(e.id)}else{if((a=this.helpers.getY1Y2("y2",e))>o){var c=o;o=a,a=c}var u=this.annoCtx.graphics.drawRect(0+e.offsetX,a+e.offsetY,this._getYAxisAnnotationWidth(e),o-a,0,e.fillColor,e.opacity,1,e.borderColor,r);u.node.classList.add("apexcharts-annotation-rect"),u.attr("clip-path","url(#gridRectMask".concat(n.globals.cuid,")")),t.appendChild(u.node),e.id&&u.node.classList.add(e.id)}var h="right"===e.label.position?n.globals.gridWidth:"center"===e.label.position?n.globals.gridWidth/2:0,d=this.annoCtx.graphics.drawText({x:h+e.label.offsetX,y:(null!=a?a:o)+e.label.offsetY-3,text:s,textAnchor:e.label.textAnchor,fontSize:e.label.style.fontSize,fontFamily:e.label.style.fontFamily,fontWeight:e.label.style.fontWeight,foreColor:e.label.style.color,cssClass:"apexcharts-yaxis-annotation-label ".concat(e.label.style.cssClass," ").concat(e.id?e.id:"")});d.attr({rel:i}),t.appendChild(d.node)}},{key:"_getYAxisAnnotationWidth",value:function(e){var t=this.w;return t.globals.gridWidth,(e.width.indexOf("%")>-1?t.globals.gridWidth*parseInt(e.width,10)/100:parseInt(e.width,10))+e.offsetX}},{key:"drawYAxisAnnotations",value:function(){var e=this,t=this.w,i=this.annoCtx.graphics.group({class:"apexcharts-yaxis-annotations"});return t.config.annotations.yaxis.map((function(t,a){e.addYaxisAnnotation(t,i.node,a)})),i}}]),e}(),O=function(){function e(t){s(this,e),this.w=t.w,this.annoCtx=t,this.helpers=new S(this.annoCtx)}return c(e,[{key:"addPointAnnotation",value:function(e,t,i){this.w;var a=this.helpers.getX1X2("x1",e),n=this.helpers.getY1Y2("y1",e);if(x.isNumber(a)){var r={pSize:e.marker.size,pointStrokeWidth:e.marker.strokeWidth,pointFillColor:e.marker.fillColor,pointStrokeColor:e.marker.strokeColor,shape:e.marker.shape,pRadius:e.marker.radius,class:"apexcharts-point-annotation-marker ".concat(e.marker.cssClass," ").concat(e.id?e.id:"")},o=this.annoCtx.graphics.drawMarker(a+e.marker.offsetX,n+e.marker.offsetY,r);t.appendChild(o.node);var s=e.label.text?e.label.text:"",l=this.annoCtx.graphics.drawText({x:a+e.label.offsetX,y:n+e.label.offsetY-e.marker.size-parseFloat(e.label.style.fontSize)/1.6,text:s,textAnchor:e.label.textAnchor,fontSize:e.label.style.fontSize,fontFamily:e.label.style.fontFamily,fontWeight:e.label.style.fontWeight,foreColor:e.label.style.color,cssClass:"apexcharts-point-annotation-label ".concat(e.label.style.cssClass," ").concat(e.id?e.id:"")});if(l.attr({rel:i}),t.appendChild(l.node),e.customSVG.SVG){var c=this.annoCtx.graphics.group({class:"apexcharts-point-annotations-custom-svg "+e.customSVG.cssClass});c.attr({transform:"translate(".concat(a+e.customSVG.offsetX,", ").concat(n+e.customSVG.offsetY,")")}),c.node.innerHTML=e.customSVG.SVG,t.appendChild(c.node)}if(e.image.path){var u=e.image.width?e.image.width:20,h=e.image.height?e.image.height:20;o=this.annoCtx.addImage({x:a+e.image.offsetX-u/2,y:n+e.image.offsetY-h/2,width:u,height:h,path:e.image.path,appendTo:".apexcharts-point-annotations"})}e.mouseEnter&&o.node.addEventListener("mouseenter",e.mouseEnter.bind(this,e)),e.mouseLeave&&o.node.addEventListener("mouseleave",e.mouseLeave.bind(this,e)),e.click&&o.node.addEventListener("click",e.click.bind(this,e))}}},{key:"drawPointAnnotations",value:function(){var e=this,t=this.w,i=this.annoCtx.graphics.group({class:"apexcharts-point-annotations"});return t.config.annotations.points.map((function(t,a){e.addPointAnnotation(t,i.node,a)})),i}}]),e}(),T={name:"en",options:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],toolbar:{exportToSVG:"Download SVG",exportToPNG:"Download PNG",exportToCSV:"Download CSV",menu:"Menu",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reset Zoom"}}},M=function(){function e(){s(this,e),this.yAxis={show:!0,showAlways:!1,showForNullSeries:!0,seriesName:void 0,opposite:!1,reversed:!1,logarithmic:!1,logBase:10,tickAmount:void 0,forceNiceScale:!1,max:void 0,min:void 0,floating:!1,decimalsInFloat:void 0,labels:{show:!0,minWidth:0,maxWidth:160,offsetX:0,offsetY:0,align:void 0,rotate:0,padding:20,style:{colors:[],fontSize:"11px",fontWeight:400,fontFamily:void 0,cssClass:""},formatter:void 0},axisBorder:{show:!1,color:"#e0e0e0",width:1,offsetX:0,offsetY:0},axisTicks:{show:!1,color:"#e0e0e0",width:6,offsetX:0,offsetY:0},title:{text:void 0,rotate:-90,offsetY:0,offsetX:0,style:{color:void 0,fontSize:"11px",fontWeight:900,fontFamily:void 0,cssClass:""}},tooltip:{enabled:!1,offsetX:0},crosshairs:{show:!0,position:"front",stroke:{color:"#b6b6b6",width:1,dashArray:0}}},this.pointAnnotation={id:void 0,x:0,y:null,yAxisIndex:0,seriesIndex:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,marker:{size:4,fillColor:"#fff",strokeWidth:2,strokeColor:"#333",shape:"circle",offsetX:0,offsetY:0,radius:2,cssClass:""},label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}},customSVG:{SVG:void 0,cssClass:void 0,offsetX:0,offsetY:0},image:{path:void 0,width:20,height:20,offsetX:0,offsetY:0}},this.yAxisAnnotation={id:void 0,y:0,y2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,width:"100%",yAxisIndex:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"end",position:"right",offsetX:0,offsetY:-3,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.xAxisAnnotation={id:void 0,x:0,x2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",orientation:"vertical",position:"top",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.text={x:0,y:0,text:"",textAnchor:"start",foreColor:void 0,fontSize:"13px",fontFamily:void 0,fontWeight:400,appendTo:".apexcharts-annotations",backgroundColor:"transparent",borderColor:"#c2c2c2",borderRadius:0,borderWidth:0,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2}}return c(e,[{key:"init",value:function(){return{annotations:{position:"front",yaxis:[this.yAxisAnnotation],xaxis:[this.xAxisAnnotation],points:[this.pointAnnotation],texts:[],images:[],shapes:[]},chart:{animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{delay:150,enabled:!0},dynamicAnimation:{enabled:!0,speed:350}},background:"transparent",locales:[T],defaultLocale:"en",dropShadow:{enabled:!1,enabledOnSeries:void 0,top:2,left:2,blur:4,color:"#000",opacity:.35},events:{animationEnd:void 0,beforeMount:void 0,mounted:void 0,updated:void 0,click:void 0,mouseMove:void 0,mouseLeave:void 0,xAxisLabelClick:void 0,legendClick:void 0,markerClick:void 0,selection:void 0,dataPointSelection:void 0,dataPointMouseEnter:void 0,dataPointMouseLeave:void 0,beforeZoom:void 0,beforeResetZoom:void 0,zoomed:void 0,scrolled:void 0,brushScrolled:void 0},foreColor:"#373d3f",fontFamily:"Helvetica, Arial, sans-serif",height:"auto",parentHeightOffset:15,redrawOnParentResize:!0,redrawOnWindowResize:!0,id:void 0,group:void 0,offsetX:0,offsetY:0,selection:{enabled:!1,type:"x",fill:{color:"#24292e",opacity:.1},stroke:{width:1,color:"#24292e",opacity:.4,dashArray:3},xaxis:{min:void 0,max:void 0},yaxis:{min:void 0,max:void 0}},sparkline:{enabled:!1},brush:{enabled:!1,autoScaleYaxis:!0,target:void 0},stacked:!1,stackType:"normal",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0,customIcons:[]},export:{csv:{filename:void 0,columnDelimiter:",",headerCategory:"category",headerValue:"value",dateFormatter:function(e){return new Date(e).toDateString()}},png:{filename:void 0},svg:{filename:void 0}},autoSelected:"zoom"},type:"line",width:"100%",zoom:{enabled:!0,type:"x",autoScaleYaxis:!1,zoomedArea:{fill:{color:"#90CAF9",opacity:.4},stroke:{color:"#0D47A1",opacity:.4,width:1}}}},plotOptions:{area:{fillTo:"origin"},bar:{horizontal:!1,columnWidth:"70%",barHeight:"70%",distributed:!1,borderRadius:0,borderRadiusApplication:"around",borderRadiusWhenStacked:"last",rangeBarOverlap:!0,rangeBarGroupRows:!1,colors:{ranges:[],backgroundBarColors:[],backgroundBarOpacity:1,backgroundBarRadius:0},dataLabels:{position:"top",maxItems:100,hideOverflowingLabels:!0,orientation:"horizontal",total:{enabled:!1,formatter:void 0,offsetX:0,offsetY:0,style:{color:"#373d3f",fontSize:"12px",fontFamily:void 0,fontWeight:600}}}},bubble:{zScaling:!0,minBubbleRadius:void 0,maxBubbleRadius:void 0},candlestick:{colors:{upward:"#00B746",downward:"#EF403C"},wick:{useFillColor:!0}},boxPlot:{colors:{upper:"#00E396",lower:"#008FFB"}},heatmap:{radius:2,enableShades:!0,shadeIntensity:.5,reverseNegativeShade:!1,distributed:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},treemap:{enableShades:!0,shadeIntensity:.5,distributed:!1,reverseNegativeShade:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},radialBar:{inverseOrder:!1,startAngle:0,endAngle:360,offsetX:0,offsetY:0,hollow:{margin:5,size:"50%",background:"transparent",image:void 0,imageWidth:150,imageHeight:150,imageOffsetX:0,imageOffsetY:0,imageClipped:!0,position:"front",dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},track:{show:!0,startAngle:void 0,endAngle:void 0,background:"#f2f2f2",strokeWidth:"97%",opacity:1,margin:5,dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:0,formatter:function(e){return e}},value:{show:!0,fontSize:"14px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:16,formatter:function(e){return e+"%"}},total:{show:!1,label:"Total",fontSize:"16px",fontWeight:600,fontFamily:void 0,color:void 0,formatter:function(e){return e.globals.seriesTotals.reduce((function(e,t){return e+t}),0)/e.globals.series.length+"%"}}}},pie:{customScale:1,offsetX:0,offsetY:0,startAngle:0,endAngle:360,expandOnClick:!0,dataLabels:{offset:0,minAngleToShowLabel:10},donut:{size:"65%",background:"transparent",labels:{show:!1,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:-10,formatter:function(e){return e}},value:{show:!0,fontSize:"20px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:10,formatter:function(e){return e}},total:{show:!1,showAlways:!1,label:"Total",fontSize:"16px",fontWeight:400,fontFamily:void 0,color:void 0,formatter:function(e){return e.globals.seriesTotals.reduce((function(e,t){return e+t}),0)}}}}},polarArea:{rings:{strokeWidth:1,strokeColor:"#e8e8e8"},spokes:{strokeWidth:1,connectorColors:"#e8e8e8"}},radar:{size:void 0,offsetX:0,offsetY:0,polygons:{strokeWidth:1,strokeColors:"#e8e8e8",connectorColors:"#e8e8e8",fill:{colors:void 0}}}},colors:void 0,dataLabels:{enabled:!0,enabledOnSeries:void 0,formatter:function(e){return null!==e?e:""},textAnchor:"middle",distributed:!1,offsetX:0,offsetY:0,style:{fontSize:"12px",fontFamily:void 0,fontWeight:600,colors:void 0},background:{enabled:!0,foreColor:"#fff",borderRadius:2,padding:4,opacity:.9,borderWidth:1,borderColor:"#fff",dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]},image:{src:[],width:void 0,height:void 0},pattern:{style:"squares",width:6,height:6,strokeWidth:2}},forecastDataPoints:{count:0,fillOpacity:.5,strokeWidth:void 0,dashArray:4},grid:{show:!0,borderColor:"#e0e0e0",strokeDashArray:0,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},row:{colors:void 0,opacity:.5},column:{colors:void 0,opacity:.5},padding:{top:0,right:10,bottom:0,left:12}},labels:[],legend:{show:!0,showForSingleSeries:!1,showForNullSeries:!0,showForZeroSeries:!0,floating:!1,position:"bottom",horizontalAlign:"center",inverseOrder:!1,fontSize:"12px",fontFamily:void 0,fontWeight:400,width:void 0,height:void 0,formatter:void 0,tooltipHoverFormatter:void 0,offsetX:-20,offsetY:4,customLegendItems:[],labels:{colors:void 0,useSeriesColors:!1},markers:{width:12,height:12,strokeWidth:0,fillColors:void 0,strokeColor:"#fff",radius:12,customHTML:void 0,offsetX:0,offsetY:0,onClick:void 0},itemMargin:{horizontal:5,vertical:2},onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}},markers:{discrete:[],size:0,colors:void 0,strokeColors:"#fff",strokeWidth:2,strokeOpacity:.9,strokeDashArray:0,fillOpacity:1,shape:"circle",width:8,height:8,radius:2,offsetX:0,offsetY:0,onClick:void 0,onDblClick:void 0,showNullDataPoints:!0,hover:{size:void 0,sizeOffset:3}},noData:{text:void 0,align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[],series:void 0,states:{normal:{filter:{type:"none",value:0}},hover:{filter:{type:"lighten",value:.1}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken",value:.5}}},title:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:900,fontFamily:void 0,color:void 0}},subtitle:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:30,floating:!1,style:{fontSize:"12px",fontWeight:400,fontFamily:void 0,color:void 0}},stroke:{show:!0,curve:"smooth",lineCap:"butt",width:2,colors:void 0,dashArray:0,fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]}}},tooltip:{enabled:!0,enabledOnSeries:void 0,shared:!0,followCursor:!1,intersect:!1,inverseOrder:!1,custom:void 0,fillSeriesColor:!1,theme:"light",cssClass:"",style:{fontSize:"12px",fontFamily:void 0},onDatasetHover:{highlightDataSeries:!1},x:{show:!0,format:"dd MMM",formatter:void 0},y:{formatter:void 0,title:{formatter:function(e){return e?e+": ":""}}},z:{formatter:void 0,title:"Size: "},marker:{show:!0,fillColors:void 0},items:{display:"flex"},fixed:{enabled:!1,position:"topRight",offsetX:0,offsetY:0}},xaxis:{type:"category",categories:[],convertedCatToNumeric:!1,offsetX:0,offsetY:0,overwriteCategories:void 0,labels:{show:!0,rotate:-45,rotateAlways:!1,hideOverlappingLabels:!0,trim:!1,minHeight:void 0,maxHeight:120,showDuplicates:!0,style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""},offsetX:0,offsetY:0,format:void 0,formatter:void 0,datetimeUTC:!0,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"dd MMM",hour:"HH:mm",minute:"HH:mm:ss",second:"HH:mm:ss"}},group:{groups:[],style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""}},axisBorder:{show:!0,color:"#e0e0e0",width:"100%",height:1,offsetX:0,offsetY:0},axisTicks:{show:!0,color:"#e0e0e0",height:6,offsetX:0,offsetY:0},tickAmount:void 0,tickPlacement:"on",min:void 0,max:void 0,range:void 0,floating:!1,decimalsInFloat:void 0,position:"bottom",title:{text:void 0,offsetX:0,offsetY:0,style:{color:void 0,fontSize:"12px",fontWeight:900,fontFamily:void 0,cssClass:""}},crosshairs:{show:!0,width:1,position:"back",opacity:.9,stroke:{color:"#b6b6b6",width:1,dashArray:3},fill:{type:"solid",color:"#B1B9C4",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}},dropShadow:{enabled:!1,left:0,top:0,blur:1,opacity:.4}},tooltip:{enabled:!0,offsetY:0,formatter:void 0,style:{fontSize:"12px",fontFamily:void 0}}},yaxis:this.yAxis,theme:{mode:"light",palette:"palette1",monochrome:{enabled:!1,color:"#008FFB",shadeTo:"light",shadeIntensity:.65}}}}}]),e}(),E=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.graphics=new w(this.ctx),this.w.globals.isBarHorizontal&&(this.invertAxis=!0),this.helpers=new S(this),this.xAxisAnnotations=new C(this),this.yAxisAnnotations=new A(this),this.pointsAnnotations=new O(this),this.w.globals.isBarHorizontal&&this.w.config.yaxis[0].reversed&&(this.inversedReversedAxis=!0),this.xDivision=this.w.globals.gridWidth/this.w.globals.dataPoints}return c(e,[{key:"drawAxesAnnotations",value:function(){var e=this.w;if(e.globals.axisCharts){for(var t=this.yAxisAnnotations.drawYAxisAnnotations(),i=this.xAxisAnnotations.drawXAxisAnnotations(),a=this.pointsAnnotations.drawPointAnnotations(),n=e.config.chart.animations.enabled,r=[t,i,a],o=[i.node,t.node,a.node],s=0;s<3;s++)e.globals.dom.elGraphical.add(r[s]),!n||e.globals.resized||e.globals.dataChanged||"scatter"!==e.config.chart.type&&"bubble"!==e.config.chart.type&&e.globals.dataPoints>1&&o[s].classList.add("apexcharts-element-hidden"),e.globals.delayedElements.push({el:o[s],index:0});this.helpers.annotationsBackground()}}},{key:"drawImageAnnos",value:function(){var e=this;this.w.config.annotations.images.map((function(t,i){e.addImage(t,i)}))}},{key:"drawTextAnnos",value:function(){var e=this;this.w.config.annotations.texts.map((function(t,i){e.addText(t,i)}))}},{key:"addXaxisAnnotation",value:function(e,t,i){this.xAxisAnnotations.addXaxisAnnotation(e,t,i)}},{key:"addYaxisAnnotation",value:function(e,t,i){this.yAxisAnnotations.addYaxisAnnotation(e,t,i)}},{key:"addPointAnnotation",value:function(e,t,i){this.pointsAnnotations.addPointAnnotation(e,t,i)}},{key:"addText",value:function(e,t){var i=e.x,a=e.y,n=e.text,r=e.textAnchor,o=e.foreColor,s=e.fontSize,l=e.fontFamily,c=e.fontWeight,u=e.cssClass,h=e.backgroundColor,d=e.borderWidth,f=e.strokeDashArray,p=e.borderRadius,m=e.borderColor,g=e.appendTo,v=void 0===g?".apexcharts-annotations":g,y=e.paddingLeft,x=void 0===y?4:y,b=e.paddingRight,_=void 0===b?4:b,w=e.paddingBottom,k=void 0===w?2:w,S=e.paddingTop,C=void 0===S?2:S,A=this.w,O=this.graphics.drawText({x:i,y:a,text:n,textAnchor:r||"start",fontSize:s||"12px",fontWeight:c||"regular",fontFamily:l||A.config.chart.fontFamily,foreColor:o||A.config.chart.foreColor,cssClass:u}),T=A.globals.dom.baseEl.querySelector(v);T&&T.appendChild(O.node);var M=O.bbox();if(n){var E=this.graphics.drawRect(M.x-x,M.y-C,M.width+x+_,M.height+k+C,p,h||"transparent",1,d,m,f);T.insertBefore(E.node,O.node)}}},{key:"addImage",value:function(e,t){var i=this.w,a=e.path,n=e.x,r=void 0===n?0:n,o=e.y,s=void 0===o?0:o,l=e.width,c=void 0===l?20:l,u=e.height,h=void 0===u?20:u,d=e.appendTo,f=void 0===d?".apexcharts-annotations":d,p=i.globals.dom.Paper.image(a);p.size(c,h).move(r,s);var m=i.globals.dom.baseEl.querySelector(f);return m&&m.appendChild(p.node),p}},{key:"addXaxisAnnotationExternal",value:function(e,t,i){return this.addAnnotationExternal({params:e,pushToMemory:t,context:i,type:"xaxis",contextMethod:i.addXaxisAnnotation}),i}},{key:"addYaxisAnnotationExternal",value:function(e,t,i){return this.addAnnotationExternal({params:e,pushToMemory:t,context:i,type:"yaxis",contextMethod:i.addYaxisAnnotation}),i}},{key:"addPointAnnotationExternal",value:function(e,t,i){return void 0===this.invertAxis&&(this.invertAxis=i.w.globals.isBarHorizontal),this.addAnnotationExternal({params:e,pushToMemory:t,context:i,type:"point",contextMethod:i.addPointAnnotation}),i}},{key:"addAnnotationExternal",value:function(e){var t=e.params,i=e.pushToMemory,a=e.context,n=e.type,r=e.contextMethod,o=a,s=o.w,l=s.globals.dom.baseEl.querySelector(".apexcharts-".concat(n,"-annotations")),c=l.childNodes.length+1,u=new M,h=Object.assign({},"xaxis"===n?u.xAxisAnnotation:"yaxis"===n?u.yAxisAnnotation:u.pointAnnotation),d=x.extend(h,t);switch(n){case"xaxis":this.addXaxisAnnotation(d,l,c);break;case"yaxis":this.addYaxisAnnotation(d,l,c);break;case"point":this.addPointAnnotation(d,l,c)}var f=s.globals.dom.baseEl.querySelector(".apexcharts-".concat(n,"-annotations .apexcharts-").concat(n,"-annotation-label[rel='").concat(c,"']")),p=this.helpers.addBackgroundToAnno(f,d);return p&&l.insertBefore(p.node,f),i&&s.globals.memory.methodsToExec.push({context:o,id:d.id?d.id:x.randomId(),method:r,label:"addAnnotation",params:t}),a}},{key:"clearAnnotations",value:function(e){var t=e.w,i=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-annotations, .apexcharts-xaxis-annotations, .apexcharts-point-annotations");t.globals.memory.methodsToExec.map((function(e,i){"addText"!==e.label&&"addAnnotation"!==e.label||t.globals.memory.methodsToExec.splice(i,1)})),i=x.listToArray(i),Array.prototype.forEach.call(i,(function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}))}},{key:"removeAnnotation",value:function(e,t){var i=e.w,a=i.globals.dom.baseEl.querySelectorAll(".".concat(t));a&&(i.globals.memory.methodsToExec.map((function(e,a){e.id===t&&i.globals.memory.methodsToExec.splice(a,1)})),Array.prototype.forEach.call(a,(function(e){e.parentElement.removeChild(e)})))}}]),e}(),I=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.months31=[1,3,5,7,8,10,12],this.months30=[2,4,6,9,11],this.daysCntOfYear=[0,31,59,90,120,151,181,212,243,273,304,334]}return c(e,[{key:"isValidDate",value:function(e){return!isNaN(this.parseDate(e))}},{key:"getTimeStamp",value:function(e){return Date.parse(e)?this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(e).toISOString().substr(0,25)).getTime():new Date(e).getTime():e}},{key:"getDate",value:function(e){return this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(e).toUTCString()):new Date(e)}},{key:"parseDate",value:function(e){var t=Date.parse(e);if(!isNaN(t))return this.getTimeStamp(e);var i=Date.parse(e.replace(/-/g,"/").replace(/[a-z]+/gi," "));return this.getTimeStamp(i)}},{key:"parseDateWithTimezone",value:function(e){return Date.parse(e.replace(/-/g,"/").replace(/[a-z]+/gi," "))}},{key:"formatDate",value:function(e,t){var i=this.w.globals.locale,a=this.w.config.xaxis.labels.datetimeUTC,n=["\0"].concat(g(i.months)),r=["\x01"].concat(g(i.shortMonths)),o=["\x02"].concat(g(i.days)),s=["\x03"].concat(g(i.shortDays));function l(e,t){var i=e+"";for(t=t||2;i.length<t;)i="0"+i;return i}var c=a?e.getUTCFullYear():e.getFullYear();t=(t=(t=t.replace(/(^|[^\\])yyyy+/g,"$1"+c)).replace(/(^|[^\\])yy/g,"$1"+c.toString().substr(2,2))).replace(/(^|[^\\])y/g,"$1"+c);var u=(a?e.getUTCMonth():e.getMonth())+1;t=(t=(t=(t=t.replace(/(^|[^\\])MMMM+/g,"$1"+n[0])).replace(/(^|[^\\])MMM/g,"$1"+r[0])).replace(/(^|[^\\])MM/g,"$1"+l(u))).replace(/(^|[^\\])M/g,"$1"+u);var h=a?e.getUTCDate():e.getDate();t=(t=(t=(t=t.replace(/(^|[^\\])dddd+/g,"$1"+o[0])).replace(/(^|[^\\])ddd/g,"$1"+s[0])).replace(/(^|[^\\])dd/g,"$1"+l(h))).replace(/(^|[^\\])d/g,"$1"+h);var d=a?e.getUTCHours():e.getHours(),f=d>12?d-12:0===d?12:d;t=(t=(t=(t=t.replace(/(^|[^\\])HH+/g,"$1"+l(d))).replace(/(^|[^\\])H/g,"$1"+d)).replace(/(^|[^\\])hh+/g,"$1"+l(f))).replace(/(^|[^\\])h/g,"$1"+f);var p=a?e.getUTCMinutes():e.getMinutes();t=(t=t.replace(/(^|[^\\])mm+/g,"$1"+l(p))).replace(/(^|[^\\])m/g,"$1"+p);var m=a?e.getUTCSeconds():e.getSeconds();t=(t=t.replace(/(^|[^\\])ss+/g,"$1"+l(m))).replace(/(^|[^\\])s/g,"$1"+m);var v=a?e.getUTCMilliseconds():e.getMilliseconds();t=t.replace(/(^|[^\\])fff+/g,"$1"+l(v,3)),v=Math.round(v/10),t=t.replace(/(^|[^\\])ff/g,"$1"+l(v)),v=Math.round(v/10);var y=d<12?"AM":"PM";t=(t=(t=t.replace(/(^|[^\\])f/g,"$1"+v)).replace(/(^|[^\\])TT+/g,"$1"+y)).replace(/(^|[^\\])T/g,"$1"+y.charAt(0));var x=y.toLowerCase();t=(t=t.replace(/(^|[^\\])tt+/g,"$1"+x)).replace(/(^|[^\\])t/g,"$1"+x.charAt(0));var b=-e.getTimezoneOffset(),_=a||!b?"Z":b>0?"+":"-";if(!a){var w=(b=Math.abs(b))%60;_+=l(Math.floor(b/60))+":"+l(w)}t=t.replace(/(^|[^\\])K/g,"$1"+_);var k=(a?e.getUTCDay():e.getDay())+1;return(t=(t=(t=(t=t.replace(new RegExp(o[0],"g"),o[k])).replace(new RegExp(s[0],"g"),s[k])).replace(new RegExp(n[0],"g"),n[u])).replace(new RegExp(r[0],"g"),r[u])).replace(/\\(.)/g,"$1")}},{key:"getTimeUnitsfromTimestamp",value:function(e,t,i){var a=this.w;void 0!==a.config.xaxis.min&&(e=a.config.xaxis.min),void 0!==a.config.xaxis.max&&(t=a.config.xaxis.max);var n=this.getDate(e),r=this.getDate(t),o=this.formatDate(n,"yyyy MM dd HH mm ss fff").split(" "),s=this.formatDate(r,"yyyy MM dd HH mm ss fff").split(" ");return{minMillisecond:parseInt(o[6],10),maxMillisecond:parseInt(s[6],10),minSecond:parseInt(o[5],10),maxSecond:parseInt(s[5],10),minMinute:parseInt(o[4],10),maxMinute:parseInt(s[4],10),minHour:parseInt(o[3],10),maxHour:parseInt(s[3],10),minDate:parseInt(o[2],10),maxDate:parseInt(s[2],10),minMonth:parseInt(o[1],10)-1,maxMonth:parseInt(s[1],10)-1,minYear:parseInt(o[0],10),maxYear:parseInt(s[0],10)}}},{key:"isLeapYear",value:function(e){return e%4==0&&e%100!=0||e%400==0}},{key:"calculcateLastDaysOfMonth",value:function(e,t,i){return this.determineDaysOfMonths(e,t)-i}},{key:"determineDaysOfYear",value:function(e){var t=365;return this.isLeapYear(e)&&(t=366),t}},{key:"determineRemainingDaysOfYear",value:function(e,t,i){var a=this.daysCntOfYear[t]+i;return t>1&&this.isLeapYear()&&a++,a}},{key:"determineDaysOfMonths",value:function(e,t){var i=30;switch(e=x.monthMod(e),!0){case this.months30.indexOf(e)>-1:2===e&&(i=this.isLeapYear(t)?29:28);break;case this.months31.indexOf(e)>-1:default:i=31}return i}}]),e}(),P=function(e){var t,i=e.ctx,a=e.seriesIndex,n=e.dataPointIndex,r=e.y1,o=e.y2,s=e.w,l=s.globals.seriesRangeStart[a][n],c=s.globals.seriesRangeEnd[a][n],u=s.globals.labels[n],h=s.config.series[a].name?s.config.series[a].name:"",d=s.config.tooltip.y.formatter,f=s.config.tooltip.y.title.formatter,p={w:s,seriesIndex:a,dataPointIndex:n,start:l,end:c};"function"==typeof f&&(h=f(h,p)),null!==(t=s.config.series[a].data[n])&&void 0!==t&&t.x&&(u=s.config.series[a].data[n].x+":"),"function"==typeof d&&(u=d(u,p)),Number.isFinite(r)&&Number.isFinite(o)&&(l=r,c=o);var m="",g="",v=s.globals.colors[a];if(void 0===s.config.tooltip.x.formatter)if("datetime"===s.config.xaxis.type){var y=new I(i);m=y.formatDate(y.getDate(l),s.config.tooltip.x.format),g=y.formatDate(y.getDate(c),s.config.tooltip.x.format)}else m=l,g=c;else m=s.config.tooltip.x.formatter(l),g=s.config.tooltip.x.formatter(c);return{start:l,end:c,startVal:m,endVal:g,ylabel:u,color:v,seriesName:h}},D=function(e){var t=e.color,i=e.seriesName,a=e.ylabel,n=e.start,r=e.end,o=e.seriesIndex,s=e.dataPointIndex,l=e.ctx.tooltip.tooltipLabels.getFormatters(o);n=l.yLbFormatter(n),r=l.yLbFormatter(r);var c=l.yLbFormatter(e.w.globals.series[o][s]),u='<span class="value start-value">\n  '.concat(n,'\n  </span> <span class="separator">-</span> <span class="value end-value">\n  ').concat(r,"\n  </span>");return'<div class="apexcharts-tooltip-rangebar"><div> <span class="series-name" style="color: '+t+'">'+(i||"")+'</span></div><div> <span class="category">'+a+" </span> "+(e.w.globals.comboCharts?"rangeArea"===e.w.config.series[o].type||"rangeBar"===e.w.config.series[o].type?u:"<span>".concat(c,"</span>"):u)+" </div></div>"},z=function(){function e(t){s(this,e),this.opts=t}return c(e,[{key:"line",value:function(){return{chart:{animations:{easing:"swing"}},dataLabels:{enabled:!1},stroke:{width:5,curve:"straight"},markers:{size:0,hover:{sizeOffset:6}},xaxis:{crosshairs:{width:1}}}}},{key:"sparkline",value:function(e){return this.opts.yaxis[0].show=!1,this.opts.yaxis[0].title.text="",this.opts.yaxis[0].axisBorder.show=!1,this.opts.yaxis[0].axisTicks.show=!1,this.opts.yaxis[0].floating=!0,x.extend(e,{grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},legend:{show:!1},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}},chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1}})}},{key:"bar",value:function(){return{chart:{stacked:!1,animations:{easing:"swing"}},plotOptions:{bar:{dataLabels:{position:"center"}}},dataLabels:{style:{colors:["#fff"]},background:{enabled:!1}},stroke:{width:0,lineCap:"round"},fill:{opacity:.85},legend:{markers:{shape:"square",radius:2,size:8}},tooltip:{shared:!1,intersect:!0},xaxis:{tooltip:{enabled:!1},tickPlacement:"between",crosshairs:{width:"barWidth",position:"back",fill:{type:"gradient"},dropShadow:{enabled:!1},stroke:{width:0}}}}}},{key:"candlestick",value:function(){var e=this;return{stroke:{width:1,colors:["#333"]},fill:{opacity:1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(t){var i=t.seriesIndex,a=t.dataPointIndex,n=t.w;return e._getBoxTooltip(n,i,a,["Open","High","","Low","Close"],"candlestick")}},states:{active:{filter:{type:"none"}}},xaxis:{crosshairs:{width:1}}}}},{key:"boxPlot",value:function(){var e=this;return{chart:{animations:{dynamicAnimation:{enabled:!1}}},stroke:{width:1,colors:["#24292e"]},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(t){var i=t.seriesIndex,a=t.dataPointIndex,n=t.w;return e._getBoxTooltip(n,i,a,["Minimum","Q1","Median","Q3","Maximum"],"boxPlot")}},markers:{size:5,strokeWidth:1,strokeColors:"#111"},xaxis:{crosshairs:{width:1}}}}},{key:"rangeBar",value:function(){return{stroke:{width:0,lineCap:"square"},plotOptions:{bar:{borderRadius:0,dataLabels:{position:"center"}}},dataLabels:{enabled:!1,formatter:function(e,t){t.ctx;var i=t.seriesIndex,a=t.dataPointIndex,n=t.w,r=function(){var e=n.globals.seriesRangeStart[i][a];return n.globals.seriesRangeEnd[i][a]-e};return n.globals.comboCharts?"rangeBar"===n.config.series[i].type||"rangeArea"===n.config.series[i].type?r():e:r()},background:{enabled:!1},style:{colors:["#fff"]}},tooltip:{shared:!1,followCursor:!0,custom:function(e){return e.w.config.plotOptions&&e.w.config.plotOptions.bar&&e.w.config.plotOptions.bar.horizontal?function(e){var t=P(e),i=t.color,a=t.seriesName,n=t.ylabel,o=t.startVal,s=t.endVal;return D(r(r({},e),{},{color:i,seriesName:a,ylabel:n,start:o,end:s}))}(e):function(e){var t=P(e),i=t.color,a=t.seriesName,n=t.ylabel,o=t.start,s=t.end;return D(r(r({},e),{},{color:i,seriesName:a,ylabel:n,start:o,end:s}))}(e)}},xaxis:{tickPlacement:"between",tooltip:{enabled:!1},crosshairs:{stroke:{width:0}}}}}},{key:"area",value:function(){return{stroke:{width:4,fill:{type:"solid",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}}},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}},markers:{size:0,hover:{sizeOffset:6}},tooltip:{followCursor:!1}}}},{key:"rangeArea",value:function(){return{stroke:{curve:"straight",width:0},fill:{type:"solid",opacity:.6},markers:{size:0},states:{hover:{filter:{type:"none"}},active:{filter:{type:"none"}}},tooltip:{intersect:!1,shared:!0,followCursor:!0,custom:function(e){return function(e){var t=P(e),i=t.color,a=t.seriesName,n=t.ylabel,o=t.start,s=t.end;return D(r(r({},e),{},{color:i,seriesName:a,ylabel:n,start:o,end:s}))}(e)}}}}},{key:"brush",value:function(e){return x.extend(e,{chart:{toolbar:{autoSelected:"selection",show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{width:1},tooltip:{enabled:!1},xaxis:{tooltip:{enabled:!1}}})}},{key:"stacked100",value:function(e){e.dataLabels=e.dataLabels||{},e.dataLabels.formatter=e.dataLabels.formatter||void 0;var t=e.dataLabels.formatter;return e.yaxis.forEach((function(t,i){e.yaxis[i].min=0,e.yaxis[i].max=100})),"bar"===e.chart.type&&(e.dataLabels.formatter=t||function(e){return"number"==typeof e&&e?e.toFixed(0)+"%":e}),e}},{key:"convertCatToNumeric",value:function(e){return e.xaxis.convertedCatToNumeric=!0,e}},{key:"convertCatToNumericXaxis",value:function(e,t,i){e.xaxis.type="numeric",e.xaxis.labels=e.xaxis.labels||{},e.xaxis.labels.formatter=e.xaxis.labels.formatter||function(e){return x.isNumber(e)?Math.floor(e):e};var a=e.xaxis.labels.formatter,n=e.xaxis.categories&&e.xaxis.categories.length?e.xaxis.categories:e.labels;return i&&i.length&&(n=i.map((function(e){return Array.isArray(e)?e:String(e)}))),n&&n.length&&(e.xaxis.labels.formatter=function(e){return x.isNumber(e)?a(n[Math.floor(e)-1]):a(e)}),e.xaxis.categories=[],e.labels=[],e.xaxis.tickAmount=e.xaxis.tickAmount||"dataPoints",e}},{key:"bubble",value:function(){return{dataLabels:{style:{colors:["#fff"]}},tooltip:{shared:!1,intersect:!0},xaxis:{crosshairs:{width:0}},fill:{type:"solid",gradient:{shade:"light",inverse:!0,shadeIntensity:.55,opacityFrom:.4,opacityTo:.8}}}}},{key:"scatter",value:function(){return{dataLabels:{enabled:!1},tooltip:{shared:!1,intersect:!0},markers:{size:6,strokeWidth:1,hover:{sizeOffset:2}}}}},{key:"heatmap",value:function(){return{chart:{stacked:!1},fill:{opacity:1},dataLabels:{style:{colors:["#fff"]}},stroke:{colors:["#fff"]},tooltip:{followCursor:!0,marker:{show:!1},x:{show:!1}},legend:{position:"top",markers:{shape:"square",size:10,offsetY:2}},grid:{padding:{right:20}}}}},{key:"treemap",value:function(){return{chart:{zoom:{enabled:!1}},dataLabels:{style:{fontSize:14,fontWeight:600,colors:["#fff"]}},stroke:{show:!0,width:2,colors:["#fff"]},legend:{show:!1},fill:{gradient:{stops:[0,100]}},tooltip:{followCursor:!0,x:{show:!1}},grid:{padding:{left:0,right:0}},xaxis:{crosshairs:{show:!1},tooltip:{enabled:!1}}}}},{key:"pie",value:function(){return{chart:{toolbar:{show:!1}},plotOptions:{pie:{donut:{labels:{show:!1}}}},dataLabels:{formatter:function(e){return e.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",stops:[0,100]}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"donut",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(e){return e.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",shadeIntensity:.35,stops:[80,100],opacityFrom:1,opacityTo:1}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"polarArea",value:function(){return this.opts.yaxis[0].tickAmount=this.opts.yaxis[0].tickAmount?this.opts.yaxis[0].tickAmount:6,{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(e){return e.toFixed(1)+"%"},enabled:!1},stroke:{show:!0,width:2},fill:{opacity:.7},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"radar",value:function(){return this.opts.yaxis[0].labels.offsetY=this.opts.yaxis[0].labels.offsetY?this.opts.yaxis[0].labels.offsetY:6,{dataLabels:{enabled:!1,style:{fontSize:"11px"}},stroke:{width:2},markers:{size:3,strokeWidth:1,strokeOpacity:1},fill:{opacity:.2},tooltip:{shared:!1,intersect:!0,followCursor:!0},grid:{show:!1},xaxis:{labels:{formatter:function(e){return e},style:{colors:["#a8a8a8"],fontSize:"11px"}},tooltip:{enabled:!1},crosshairs:{show:!1}}}}},{key:"radialBar",value:function(){return{chart:{animations:{dynamicAnimation:{enabled:!0,speed:800}},toolbar:{show:!1}},fill:{gradient:{shade:"dark",shadeIntensity:.4,inverseColors:!1,type:"diagonal2",opacityFrom:1,opacityTo:1,stops:[70,98,100]}},legend:{show:!1,position:"right"},tooltip:{enabled:!1,fillSeriesColor:!0}}}},{key:"_getBoxTooltip",value:function(e,t,i,a,n){var r=e.globals.seriesCandleO[t][i],o=e.globals.seriesCandleH[t][i],s=e.globals.seriesCandleM[t][i],l=e.globals.seriesCandleL[t][i],c=e.globals.seriesCandleC[t][i];return e.config.series[t].type&&e.config.series[t].type!==n?'<div class="apexcharts-custom-tooltip">\n          '.concat(e.config.series[t].name?e.config.series[t].name:"series-"+(t+1),": <strong>").concat(e.globals.series[t][i],"</strong>\n        </div>"):'<div class="apexcharts-tooltip-box apexcharts-tooltip-'.concat(e.config.chart.type,'">')+"<div>".concat(a[0],': <span class="value">')+r+"</span></div>"+"<div>".concat(a[1],': <span class="value">')+o+"</span></div>"+(s?"<div>".concat(a[2],': <span class="value">')+s+"</span></div>":"")+"<div>".concat(a[3],': <span class="value">')+l+"</span></div>"+"<div>".concat(a[4],': <span class="value">')+c+"</span></div></div>"}}]),e}(),L=function(){function e(t){s(this,e),this.opts=t}return c(e,[{key:"init",value:function(e){var t=e.responsiveOverride,i=this.opts,a=new M,n=new z(i);this.chartType=i.chart.type,"histogram"===this.chartType&&(i.chart.type="bar",i=x.extend({plotOptions:{bar:{columnWidth:"99.99%"}}},i)),i=this.extendYAxis(i),i=this.extendAnnotations(i);var r=a.init(),s={};if(i&&"object"===o(i)){var l={};l=-1!==["line","area","bar","candlestick","boxPlot","rangeBar","rangeArea","histogram","bubble","scatter","heatmap","treemap","pie","polarArea","donut","radar","radialBar"].indexOf(i.chart.type)?n[i.chart.type]():n.line(),i.chart.brush&&i.chart.brush.enabled&&(l=n.brush(l)),i.chart.stacked&&"100%"===i.chart.stackType&&(i=n.stacked100(i)),this.checkForDarkTheme(window.Apex),this.checkForDarkTheme(i),i.xaxis=i.xaxis||window.Apex.xaxis||{},t||(i.xaxis.convertedCatToNumeric=!1),((i=this.checkForCatToNumericXAxis(this.chartType,l,i)).chart.sparkline&&i.chart.sparkline.enabled||window.Apex.chart&&window.Apex.chart.sparkline&&window.Apex.chart.sparkline.enabled)&&(l=n.sparkline(l)),s=x.extend(r,l)}var c=x.extend(s,window.Apex);return r=x.extend(c,i),this.handleUserInputErrors(r)}},{key:"checkForCatToNumericXAxis",value:function(e,t,i){var a=new z(i),n=("bar"===e||"boxPlot"===e)&&i.plotOptions&&i.plotOptions.bar&&i.plotOptions.bar.horizontal,r="pie"===e||"polarArea"===e||"donut"===e||"radar"===e||"radialBar"===e||"heatmap"===e,o="datetime"!==i.xaxis.type&&"numeric"!==i.xaxis.type,s=i.xaxis.tickPlacement?i.xaxis.tickPlacement:t.xaxis&&t.xaxis.tickPlacement;return n||r||!o||"between"===s||(i=a.convertCatToNumeric(i)),i}},{key:"extendYAxis",value:function(e,t){var i=new M;(void 0===e.yaxis||!e.yaxis||Array.isArray(e.yaxis)&&0===e.yaxis.length)&&(e.yaxis={}),e.yaxis.constructor!==Array&&window.Apex.yaxis&&window.Apex.yaxis.constructor!==Array&&(e.yaxis=x.extend(e.yaxis,window.Apex.yaxis)),e.yaxis.constructor!==Array?e.yaxis=[x.extend(i.yAxis,e.yaxis)]:e.yaxis=x.extendArray(e.yaxis,i.yAxis);var a=!1;e.yaxis.forEach((function(e){e.logarithmic&&(a=!0)}));var n=e.series;return t&&!n&&(n=t.config.series),a&&n.length!==e.yaxis.length&&n.length&&(e.yaxis=n.map((function(t,a){if(t.name||(n[a].name="series-".concat(a+1)),e.yaxis[a])return e.yaxis[a].seriesName=n[a].name,e.yaxis[a];var r=x.extend(i.yAxis,e.yaxis[0]);return r.show=!1,r}))),a&&n.length>1&&n.length!==e.yaxis.length&&console.warn("A multi-series logarithmic chart should have equal number of series and y-axes. Please make sure to equalize both."),e}},{key:"extendAnnotations",value:function(e){return void 0===e.annotations&&(e.annotations={},e.annotations.yaxis=[],e.annotations.xaxis=[],e.annotations.points=[]),e=this.extendYAxisAnnotations(e),e=this.extendXAxisAnnotations(e),this.extendPointAnnotations(e)}},{key:"extendYAxisAnnotations",value:function(e){var t=new M;return e.annotations.yaxis=x.extendArray(void 0!==e.annotations.yaxis?e.annotations.yaxis:[],t.yAxisAnnotation),e}},{key:"extendXAxisAnnotations",value:function(e){var t=new M;return e.annotations.xaxis=x.extendArray(void 0!==e.annotations.xaxis?e.annotations.xaxis:[],t.xAxisAnnotation),e}},{key:"extendPointAnnotations",value:function(e){var t=new M;return e.annotations.points=x.extendArray(void 0!==e.annotations.points?e.annotations.points:[],t.pointAnnotation),e}},{key:"checkForDarkTheme",value:function(e){e.theme&&"dark"===e.theme.mode&&(e.tooltip||(e.tooltip={}),"light"!==e.tooltip.theme&&(e.tooltip.theme="dark"),e.chart.foreColor||(e.chart.foreColor="#f6f7f8"),e.chart.background||(e.chart.background="#424242"),e.theme.palette||(e.theme.palette="palette4"))}},{key:"handleUserInputErrors",value:function(e){var t=e;if(t.tooltip.shared&&t.tooltip.intersect)throw new Error("tooltip.shared cannot be enabled when tooltip.intersect is true. Turn off any other option by setting it to false.");if("bar"===t.chart.type&&t.plotOptions.bar.horizontal){if(t.yaxis.length>1)throw new Error("Multiple Y Axis for bars are not supported. Switch to column chart by setting plotOptions.bar.horizontal=false");t.yaxis[0].reversed&&(t.yaxis[0].opposite=!0),t.xaxis.tooltip.enabled=!1,t.yaxis[0].tooltip.enabled=!1,t.chart.zoom.enabled=!1}return"bar"!==t.chart.type&&"rangeBar"!==t.chart.type||t.tooltip.shared&&"barWidth"===t.xaxis.crosshairs.width&&t.series.length>1&&(t.xaxis.crosshairs.width="tickWidth"),"candlestick"!==t.chart.type&&"boxPlot"!==t.chart.type||t.yaxis[0].reversed&&(console.warn("Reversed y-axis in ".concat(t.chart.type," chart is not supported.")),t.yaxis[0].reversed=!1),t}}]),e}(),j=function(){function e(){s(this,e)}return c(e,[{key:"initGlobalVars",value:function(e){e.series=[],e.seriesCandleO=[],e.seriesCandleH=[],e.seriesCandleM=[],e.seriesCandleL=[],e.seriesCandleC=[],e.seriesRangeStart=[],e.seriesRangeEnd=[],e.seriesRange=[],e.seriesPercent=[],e.seriesGoals=[],e.seriesX=[],e.seriesZ=[],e.seriesNames=[],e.seriesTotals=[],e.seriesLog=[],e.seriesColors=[],e.stackedSeriesTotals=[],e.seriesXvalues=[],e.seriesYvalues=[],e.labels=[],e.hasGroups=!1,e.groups=[],e.categoryLabels=[],e.timescaleLabels=[],e.noLabelsProvided=!1,e.resizeTimer=null,e.selectionResizeTimer=null,e.delayedElements=[],e.pointsArray=[],e.dataLabelsRects=[],e.isXNumeric=!1,e.xaxisLabelsCount=0,e.skipLastTimelinelabel=!1,e.skipFirstTimelinelabel=!1,e.isDataXYZ=!1,e.isMultiLineX=!1,e.isMultipleYAxis=!1,e.maxY=-Number.MAX_VALUE,e.minY=Number.MIN_VALUE,e.minYArr=[],e.maxYArr=[],e.maxX=-Number.MAX_VALUE,e.minX=Number.MAX_VALUE,e.initialMaxX=-Number.MAX_VALUE,e.initialMinX=Number.MAX_VALUE,e.maxDate=0,e.minDate=Number.MAX_VALUE,e.minZ=Number.MAX_VALUE,e.maxZ=-Number.MAX_VALUE,e.minXDiff=Number.MAX_VALUE,e.yAxisScale=[],e.xAxisScale=null,e.xAxisTicksPositions=[],e.yLabelsCoords=[],e.yTitleCoords=[],e.barPadForNumericAxis=0,e.padHorizontal=0,e.xRange=0,e.yRange=[],e.zRange=0,e.dataPoints=0,e.xTickAmount=0}},{key:"globalVars",value:function(e){return{chartID:null,cuid:null,events:{beforeMount:[],mounted:[],updated:[],clicked:[],selection:[],dataPointSelection:[],zoomed:[],scrolled:[]},colors:[],clientX:null,clientY:null,fill:{colors:[]},stroke:{colors:[]},dataLabels:{style:{colors:[]}},radarPolygons:{fill:{colors:[]}},markers:{colors:[],size:e.markers.size,largestSize:0},animationEnded:!1,isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints,isDirty:!1,isExecCalled:!1,initialConfig:null,initialSeries:[],lastXAxis:[],lastYAxis:[],columnSeries:null,labels:[],timescaleLabels:[],noLabelsProvided:!1,allSeriesCollapsed:!1,collapsedSeries:[],collapsedSeriesIndices:[],ancillaryCollapsedSeries:[],ancillaryCollapsedSeriesIndices:[],risingSeries:[],dataFormatXNumeric:!1,capturedSeriesIndex:-1,capturedDataPointIndex:-1,selectedDataPoints:[],goldenPadding:35,invalidLogScale:!1,ignoreYAxisIndexes:[],yAxisSameScaleIndices:[],maxValsInArrayIndex:0,radialSize:0,selection:void 0,zoomEnabled:"zoom"===e.chart.toolbar.autoSelected&&e.chart.toolbar.tools.zoom&&e.chart.zoom.enabled,panEnabled:"pan"===e.chart.toolbar.autoSelected&&e.chart.toolbar.tools.pan,selectionEnabled:"selection"===e.chart.toolbar.autoSelected&&e.chart.toolbar.tools.selection,yaxis:null,mousedown:!1,lastClientPosition:{},visibleXRange:void 0,yValueDecimal:0,total:0,SVGNS:"http://www.w3.org/2000/svg",svgWidth:0,svgHeight:0,noData:!1,locale:{},dom:{},memory:{methodsToExec:[]},shouldAnimate:!0,skipLastTimelinelabel:!1,skipFirstTimelinelabel:!1,delayedElements:[],axisCharts:!0,isDataXYZ:!1,resized:!1,resizeTimer:null,comboCharts:!1,dataChanged:!1,previousPaths:[],allSeriesHasEqualX:!0,pointsArray:[],dataLabelsRects:[],lastDrawnDataLabelsIndexes:[],hasNullValues:!1,easing:null,zoomed:!1,gridWidth:0,gridHeight:0,rotateXLabels:!1,defaultLabels:!1,xLabelFormatter:void 0,yLabelFormatters:[],xaxisTooltipFormatter:void 0,ttKeyFormatter:void 0,ttVal:void 0,ttZFormatter:void 0,LINE_HEIGHT_RATIO:1.618,xAxisLabelsHeight:0,xAxisGroupLabelsHeight:0,xAxisLabelsWidth:0,yAxisLabelsWidth:0,scaleX:1,scaleY:1,translateX:0,translateY:0,translateYAxisX:[],yAxisWidths:[],translateXAxisY:0,translateXAxisX:0,tooltip:null}}},{key:"init",value:function(e){var t=this.globalVars(e);return this.initGlobalVars(t),t.initialConfig=x.extend({},e),t.initialSeries=x.clone(e.series),t.lastXAxis=x.clone(t.initialConfig.xaxis),t.lastYAxis=x.clone(t.initialConfig.yaxis),t}}]),e}(),R=function(){function e(t){s(this,e),this.opts=t}return c(e,[{key:"init",value:function(){var e=new L(this.opts).init({responsiveOverride:!1});return{config:e,globals:(new j).init(e)}}}]),e}(),F=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.opts=null,this.seriesIndex=0}return c(e,[{key:"clippedImgArea",value:function(e){var t=this.w,i=t.config,a=parseInt(t.globals.gridWidth,10),n=parseInt(t.globals.gridHeight,10),r=a>n?a:n,o=e.image,s=0,l=0;void 0===e.width&&void 0===e.height?void 0!==i.fill.image.width&&void 0!==i.fill.image.height?(s=i.fill.image.width+1,l=i.fill.image.height):(s=r+1,l=r):(s=e.width,l=e.height);var c=document.createElementNS(t.globals.SVGNS,"pattern");w.setAttrs(c,{id:e.patternID,patternUnits:e.patternUnits?e.patternUnits:"userSpaceOnUse",width:s+"px",height:l+"px"});var u=document.createElementNS(t.globals.SVGNS,"image");c.appendChild(u),u.setAttributeNS(window.SVG.xlink,"href",o),w.setAttrs(u,{x:0,y:0,preserveAspectRatio:"none",width:s+"px",height:l+"px"}),u.style.opacity=e.opacity,t.globals.dom.elDefs.node.appendChild(c)}},{key:"getSeriesIndex",value:function(e){var t=this.w;return("bar"===t.config.chart.type||"rangeBar"===t.config.chart.type)&&t.config.plotOptions.bar.distributed||"heatmap"===t.config.chart.type||"treemap"===t.config.chart.type?this.seriesIndex=e.seriesNumber:this.seriesIndex=e.seriesNumber%t.globals.series.length,this.seriesIndex}},{key:"fillPath",value:function(e){var t=this.w;this.opts=e;var i,a,n,r=this.w.config;this.seriesIndex=this.getSeriesIndex(e);var o=this.getFillColors()[this.seriesIndex];void 0!==t.globals.seriesColors[this.seriesIndex]&&(o=t.globals.seriesColors[this.seriesIndex]),"function"==typeof o&&(o=o({seriesIndex:this.seriesIndex,dataPointIndex:e.dataPointIndex,value:e.value,w:t}));var s=e.fillType?e.fillType:this.getFillType(this.seriesIndex),l=Array.isArray(r.fill.opacity)?r.fill.opacity[this.seriesIndex]:r.fill.opacity;e.color&&(o=e.color);var c=o;if(-1===o.indexOf("rgb")?o.length<9&&(c=x.hexToRgba(o,l)):o.indexOf("rgba")>-1&&(l=x.getOpacityFromRGBA(o)),e.opacity&&(l=e.opacity),"pattern"===s&&(a=this.handlePatternFill({fillConfig:e.fillConfig,patternFill:a,fillColor:o,fillOpacity:l,defaultColor:c})),"gradient"===s&&(n=this.handleGradientFill({fillConfig:e.fillConfig,fillColor:o,fillOpacity:l,i:this.seriesIndex})),"image"===s){var u=r.fill.image.src,h=e.patternID?e.patternID:"";this.clippedImgArea({opacity:l,image:Array.isArray(u)?e.seriesNumber<u.length?u[e.seriesNumber]:u[0]:u,width:e.width?e.width:void 0,height:e.height?e.height:void 0,patternUnits:e.patternUnits,patternID:"pattern".concat(t.globals.cuid).concat(e.seriesNumber+1).concat(h)}),i="url(#pattern".concat(t.globals.cuid).concat(e.seriesNumber+1).concat(h,")")}else i="gradient"===s?n:"pattern"===s?a:c;return e.solid&&(i=c),i}},{key:"getFillType",value:function(e){var t=this.w;return Array.isArray(t.config.fill.type)?t.config.fill.type[e]:t.config.fill.type}},{key:"getFillColors",value:function(){var e=this.w,t=e.config,i=this.opts,a=[];return e.globals.comboCharts?"line"===e.config.series[this.seriesIndex].type?Array.isArray(e.globals.stroke.colors)?a=e.globals.stroke.colors:a.push(e.globals.stroke.colors):Array.isArray(e.globals.fill.colors)?a=e.globals.fill.colors:a.push(e.globals.fill.colors):"line"===t.chart.type?Array.isArray(e.globals.stroke.colors)?a=e.globals.stroke.colors:a.push(e.globals.stroke.colors):Array.isArray(e.globals.fill.colors)?a=e.globals.fill.colors:a.push(e.globals.fill.colors),void 0!==i.fillColors&&(a=[],Array.isArray(i.fillColors)?a=i.fillColors.slice():a.push(i.fillColors)),a}},{key:"handlePatternFill",value:function(e){var t=e.fillConfig,i=(e.patternFill,e.fillColor),a=e.fillOpacity,n=e.defaultColor,r=this.w.config.fill;t&&(r=t);var o=this.opts,s=new w(this.ctx),l=Array.isArray(r.pattern.strokeWidth)?r.pattern.strokeWidth[this.seriesIndex]:r.pattern.strokeWidth,c=i;return Array.isArray(r.pattern.style)?void 0!==r.pattern.style[o.seriesNumber]?s.drawPattern(r.pattern.style[o.seriesNumber],r.pattern.width,r.pattern.height,c,l,a):n:s.drawPattern(r.pattern.style,r.pattern.width,r.pattern.height,c,l,a)}},{key:"handleGradientFill",value:function(e){var t=e.fillColor,i=e.fillOpacity,a=e.fillConfig,n=e.i,o=this.w.config.fill;a&&(o=r(r({},o),a));var s,l=this.opts,c=new w(this.ctx),u=new x,h=o.gradient.type,d=t,f=void 0===o.gradient.opacityFrom?i:Array.isArray(o.gradient.opacityFrom)?o.gradient.opacityFrom[n]:o.gradient.opacityFrom;d.indexOf("rgba")>-1&&(f=x.getOpacityFromRGBA(d));var p=void 0===o.gradient.opacityTo?i:Array.isArray(o.gradient.opacityTo)?o.gradient.opacityTo[n]:o.gradient.opacityTo;if(void 0===o.gradient.gradientToColors||0===o.gradient.gradientToColors.length)s="dark"===o.gradient.shade?u.shadeColor(-1*parseFloat(o.gradient.shadeIntensity),t.indexOf("rgb")>-1?x.rgb2hex(t):t):u.shadeColor(parseFloat(o.gradient.shadeIntensity),t.indexOf("rgb")>-1?x.rgb2hex(t):t);else if(o.gradient.gradientToColors[l.seriesNumber]){var m=o.gradient.gradientToColors[l.seriesNumber];s=m,m.indexOf("rgba")>-1&&(p=x.getOpacityFromRGBA(m))}else s=t;if(o.gradient.gradientFrom&&(d=o.gradient.gradientFrom),o.gradient.gradientTo&&(s=o.gradient.gradientTo),o.gradient.inverseColors){var g=d;d=s,s=g}return d.indexOf("rgb")>-1&&(d=x.rgb2hex(d)),s.indexOf("rgb")>-1&&(s=x.rgb2hex(s)),c.drawGradient(h,d,s,f,p,l.size,o.gradient.stops,o.gradient.colorStops,n)}}]),e}(),B=function(){function e(t,i){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"setGlobalMarkerSize",value:function(){var e=this.w;if(e.globals.markers.size=Array.isArray(e.config.markers.size)?e.config.markers.size:[e.config.markers.size],e.globals.markers.size.length>0){if(e.globals.markers.size.length<e.globals.series.length+1)for(var t=0;t<=e.globals.series.length;t++)void 0===e.globals.markers.size[t]&&e.globals.markers.size.push(e.globals.markers.size[0])}else e.globals.markers.size=e.config.series.map((function(t){return e.config.markers.size}))}},{key:"plotChartMarkers",value:function(e,t,i,a){var n,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=this.w,s=t,l=e,c=null,u=new w(this.ctx),h=o.config.markers.discrete&&o.config.markers.discrete.length;if((o.globals.markers.size[t]>0||r||h)&&(c=u.group({class:r||h?"":"apexcharts-series-markers"})).attr("clip-path","url(#gridRectMarkerMask".concat(o.globals.cuid,")")),Array.isArray(l.x))for(var d=0;d<l.x.length;d++){var f=i;1===i&&0===d&&(f=0),1===i&&1===d&&(f=1);var p="apexcharts-marker";"line"!==o.config.chart.type&&"area"!==o.config.chart.type||o.globals.comboCharts||o.config.tooltip.intersect||(p+=" no-pointer-events");var m=Array.isArray(o.config.markers.size)?o.globals.markers.size[t]>0:o.config.markers.size>0;if(m||r||h){x.isNumber(l.y[d])?p+=" w".concat(x.randomId()):p="apexcharts-nullpoint";var g=this.getMarkerConfig({cssClass:p,seriesIndex:t,dataPointIndex:f});o.config.series[s].data[f]&&(o.config.series[s].data[f].fillColor&&(g.pointFillColor=o.config.series[s].data[f].fillColor),o.config.series[s].data[f].strokeColor&&(g.pointStrokeColor=o.config.series[s].data[f].strokeColor)),a&&(g.pSize=a),(n=u.drawMarker(l.x[d],l.y[d],g)).attr("rel",f),n.attr("j",f),n.attr("index",t),n.node.setAttribute("default-marker-size",g.pSize);var v=new _(this.ctx);v.setSelectionFilter(n,t,f),this.addEvents(n),c&&c.add(n)}else void 0===o.globals.pointsArray[t]&&(o.globals.pointsArray[t]=[]),o.globals.pointsArray[t].push([l.x[d],l.y[d]])}return c}},{key:"getMarkerConfig",value:function(e){var t=e.cssClass,i=e.seriesIndex,a=e.dataPointIndex,n=void 0===a?null:a,r=e.finishRadius,o=void 0===r?null:r,s=this.w,l=this.getMarkerStyle(i),c=s.globals.markers.size[i],u=s.config.markers;return null!==n&&u.discrete.length&&u.discrete.map((function(e){e.seriesIndex===i&&e.dataPointIndex===n&&(l.pointStrokeColor=e.strokeColor,l.pointFillColor=e.fillColor,c=e.size,l.pointShape=e.shape)})),{pSize:null===o?c:o,pRadius:u.radius,width:Array.isArray(u.width)?u.width[i]:u.width,height:Array.isArray(u.height)?u.height[i]:u.height,pointStrokeWidth:Array.isArray(u.strokeWidth)?u.strokeWidth[i]:u.strokeWidth,pointStrokeColor:l.pointStrokeColor,pointFillColor:l.pointFillColor,shape:l.pointShape||(Array.isArray(u.shape)?u.shape[i]:u.shape),class:t,pointStrokeOpacity:Array.isArray(u.strokeOpacity)?u.strokeOpacity[i]:u.strokeOpacity,pointStrokeDashArray:Array.isArray(u.strokeDashArray)?u.strokeDashArray[i]:u.strokeDashArray,pointFillOpacity:Array.isArray(u.fillOpacity)?u.fillOpacity[i]:u.fillOpacity,seriesIndex:i}}},{key:"addEvents",value:function(e){var t=this.w,i=new w(this.ctx);e.node.addEventListener("mouseenter",i.pathMouseEnter.bind(this.ctx,e)),e.node.addEventListener("mouseleave",i.pathMouseLeave.bind(this.ctx,e)),e.node.addEventListener("mousedown",i.pathMouseDown.bind(this.ctx,e)),e.node.addEventListener("click",t.config.markers.onClick),e.node.addEventListener("dblclick",t.config.markers.onDblClick),e.node.addEventListener("touchstart",i.pathMouseDown.bind(this.ctx,e),{passive:!0})}},{key:"getMarkerStyle",value:function(e){var t=this.w,i=t.globals.markers.colors,a=t.config.markers.strokeColor||t.config.markers.strokeColors;return{pointStrokeColor:Array.isArray(a)?a[e]:a,pointFillColor:Array.isArray(i)?i[e]:i}}}]),e}(),N=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled}return c(e,[{key:"draw",value:function(e,t,i){var a=this.w,n=new w(this.ctx),r=i.realIndex,o=i.pointsPos,s=i.zRatio,l=i.elParent,c=n.group({class:"apexcharts-series-markers apexcharts-series-".concat(a.config.chart.type)});if(c.attr("clip-path","url(#gridRectMarkerMask".concat(a.globals.cuid,")")),Array.isArray(o.x))for(var u=0;u<o.x.length;u++){var h=t+1,d=!0;0===t&&0===u&&(h=0),0===t&&1===u&&(h=1);var f=0,p=a.globals.markers.size[r];if(s!==1/0){var m=a.config.plotOptions.bubble;p=a.globals.seriesZ[r][h],m.zScaling&&(p/=s),m.minBubbleRadius&&p<m.minBubbleRadius&&(p=m.minBubbleRadius),m.maxBubbleRadius&&p>m.maxBubbleRadius&&(p=m.maxBubbleRadius)}a.config.chart.animations.enabled||(f=p);var g=o.x[u],v=o.y[u];if(f=f||0,null!==v&&void 0!==a.globals.series[r][h]||(d=!1),d){var y=this.drawPoint(g,v,f,p,r,h,t);c.add(y)}l.add(c)}}},{key:"drawPoint",value:function(e,t,i,a,n,r,o){var s=this.w,l=n,c=new b(this.ctx),u=new _(this.ctx),h=new F(this.ctx),d=new B(this.ctx),f=new w(this.ctx),p=d.getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:l,dataPointIndex:r,finishRadius:"bubble"===s.config.chart.type||s.globals.comboCharts&&s.config.series[n]&&"bubble"===s.config.series[n].type?a:null});a=p.pSize;var m,g=h.fillPath({seriesNumber:n,dataPointIndex:r,color:p.pointFillColor,patternUnits:"objectBoundingBox",value:s.globals.series[n][o]});if("circle"===p.shape?m=f.drawCircle(i):"square"!==p.shape&&"rect"!==p.shape||(m=f.drawRect(0,0,p.width-p.pointStrokeWidth/2,p.height-p.pointStrokeWidth/2,p.pRadius)),s.config.series[l].data[r]&&s.config.series[l].data[r].fillColor&&(g=s.config.series[l].data[r].fillColor),m.attr({x:e-p.width/2-p.pointStrokeWidth/2,y:t-p.height/2-p.pointStrokeWidth/2,cx:e,cy:t,fill:g,"fill-opacity":p.pointFillOpacity,stroke:p.pointStrokeColor,r:a,"stroke-width":p.pointStrokeWidth,"stroke-dasharray":p.pointStrokeDashArray,"stroke-opacity":p.pointStrokeOpacity}),s.config.chart.dropShadow.enabled){var v=s.config.chart.dropShadow;u.dropShadow(m,v,n)}if(!this.initialAnim||s.globals.dataChanged||s.globals.resized)s.globals.animationEnded=!0;else{var y=s.config.chart.animations.speed;c.animateMarker(m,0,"circle"===p.shape?a:{width:p.width,height:p.height},y,s.globals.easing,(function(){window.setTimeout((function(){c.animationCompleted(m)}),100)}))}if(s.globals.dataChanged&&"circle"===p.shape)if(this.dynamicAnim){var x,k,S,C,A=s.config.chart.animations.dynamicAnimation.speed;null!=(C=s.globals.previousPaths[n]&&s.globals.previousPaths[n][o])&&(x=C.x,k=C.y,S=void 0!==C.r?C.r:a);for(var O=0;O<s.globals.collapsedSeries.length;O++)s.globals.collapsedSeries[O].index===n&&(A=1,a=0);0===e&&0===t&&(a=0),c.animateCircle(m,{cx:x,cy:k,r:S},{cx:e,cy:t,r:a},A,s.globals.easing)}else m.attr({r:a});return m.attr({rel:r,j:r,index:n,"default-marker-size":a}),u.setSelectionFilter(m,n,r),d.addEvents(m),m.node.classList.add("apexcharts-marker"),m}},{key:"centerTextInBubble",value:function(e){var t=this.w;return{y:e+=parseInt(t.config.dataLabels.style.fontSize,10)/4}}}]),e}(),V=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"dataLabelsCorrection",value:function(e,t,i,a,n,r,o){var s=this.w,l=!1,c=new w(this.ctx).getTextRects(i,o),u=c.width,h=c.height;t<0&&(t=0),t>s.globals.gridHeight+h&&(t=s.globals.gridHeight+h/2),void 0===s.globals.dataLabelsRects[a]&&(s.globals.dataLabelsRects[a]=[]),s.globals.dataLabelsRects[a].push({x:e,y:t,width:u,height:h});var d=s.globals.dataLabelsRects[a].length-2,f=void 0!==s.globals.lastDrawnDataLabelsIndexes[a]?s.globals.lastDrawnDataLabelsIndexes[a][s.globals.lastDrawnDataLabelsIndexes[a].length-1]:0;if(void 0!==s.globals.dataLabelsRects[a][d]){var p=s.globals.dataLabelsRects[a][f];(e>p.x+p.width+2||t>p.y+p.height+2||e+u<p.x)&&(l=!0)}return(0===n||r)&&(l=!0),{x:e,y:t,textRects:c,drawnextLabel:l}}},{key:"drawDataLabel",value:function(e){var t=this,i=e.type,a=e.pos,n=e.i,r=e.j,o=e.isRangeStart,s=e.strokeWidth,l=void 0===s?2:s,c=this.w,u=new w(this.ctx),h=c.config.dataLabels,d=0,f=0,p=r,m=null;if(!h.enabled||!Array.isArray(a.x))return m;m=u.group({class:"apexcharts-data-labels"});for(var g=0;g<a.x.length;g++)if(d=a.x[g]+h.offsetX,f=a.y[g]+h.offsetY+l,!isNaN(d)){1===r&&0===g&&(p=0),1===r&&1===g&&(p=1);var v=c.globals.series[n][p];"rangeArea"===i&&(v=o?c.globals.seriesRangeStart[n][p]:c.globals.seriesRangeEnd[n][p]);var y="",x=function(e){return c.config.dataLabels.formatter(e,{ctx:t.ctx,seriesIndex:n,dataPointIndex:p,w:c})};"bubble"===c.config.chart.type?(y=x(v=c.globals.seriesZ[n][p]),f=a.y[g],f=new N(this.ctx).centerTextInBubble(f,n,p).y):void 0!==v&&(y=x(v)),this.plotDataLabelsText({x:d,y:f,text:y,i:n,j:p,parent:m,offsetCorrection:!0,dataLabelsConfig:c.config.dataLabels})}return m}},{key:"plotDataLabelsText",value:function(e){var t=this.w,i=new w(this.ctx),a=e.x,n=e.y,r=e.i,o=e.j,s=e.text,l=e.textAnchor,c=e.fontSize,u=e.parent,h=e.dataLabelsConfig,d=e.color,f=e.alwaysDrawDataLabel,p=e.offsetCorrection;if(!(Array.isArray(t.config.dataLabels.enabledOnSeries)&&t.config.dataLabels.enabledOnSeries.indexOf(r)<0)){var m={x:a,y:n,drawnextLabel:!0,textRects:null};p&&(m=this.dataLabelsCorrection(a,n,s,r,o,f,parseInt(h.style.fontSize,10))),t.globals.zoomed||(a=m.x,n=m.y),m.textRects&&(a<-10-m.textRects.width||a>t.globals.gridWidth+m.textRects.width+10)&&(s="");var g=t.globals.dataLabels.style.colors[r];(("bar"===t.config.chart.type||"rangeBar"===t.config.chart.type)&&t.config.plotOptions.bar.distributed||t.config.dataLabels.distributed)&&(g=t.globals.dataLabels.style.colors[o]),"function"==typeof g&&(g=g({series:t.globals.series,seriesIndex:r,dataPointIndex:o,w:t})),d&&(g=d);var v=h.offsetX,y=h.offsetY;if("bar"!==t.config.chart.type&&"rangeBar"!==t.config.chart.type||(v=0,y=0),m.drawnextLabel){var x=i.drawText({width:100,height:parseInt(h.style.fontSize,10),x:a+v,y:n+y,foreColor:g,textAnchor:l||h.textAnchor,text:s,fontSize:c||h.style.fontSize,fontFamily:h.style.fontFamily,fontWeight:h.style.fontWeight||"normal"});if(x.attr({class:"apexcharts-datalabel",cx:a,cy:n}),h.dropShadow.enabled){var b=h.dropShadow;new _(this.ctx).dropShadow(x,b)}u.add(x),void 0===t.globals.lastDrawnDataLabelsIndexes[r]&&(t.globals.lastDrawnDataLabelsIndexes[r]=[]),t.globals.lastDrawnDataLabelsIndexes[r].push(o)}}}},{key:"addBackgroundToDataLabel",value:function(e,t){var i=this.w,a=i.config.dataLabels.background,n=a.padding,r=a.padding/2,o=t.width,s=t.height,l=new w(this.ctx).drawRect(t.x-n,t.y-r/2,o+2*n,s+r,a.borderRadius,"transparent"===i.config.chart.background?"#fff":i.config.chart.background,a.opacity,a.borderWidth,a.borderColor);return a.dropShadow.enabled&&new _(this.ctx).dropShadow(l,a.dropShadow),l}},{key:"dataLabelsBackground",value:function(){var e=this.w;if("bubble"!==e.config.chart.type)for(var t=e.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels text"),i=0;i<t.length;i++){var a=t[i],n=a.getBBox(),r=null;if(n.width&&n.height&&(r=this.addBackgroundToDataLabel(a,n)),r){a.parentNode.insertBefore(r.node,a);var o=a.getAttribute("fill");!e.config.chart.animations.enabled||e.globals.resized||e.globals.dataChanged?r.attr({fill:o}):r.animate().attr({fill:o}),a.setAttribute("fill",e.config.dataLabels.background.foreColor)}}}},{key:"bringForward",value:function(){for(var e=this.w,t=e.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels"),i=e.globals.dom.baseEl.querySelector(".apexcharts-plot-series:last-child"),a=0;a<t.length;a++)i&&i.insertBefore(t[a],i.nextSibling)}}]),e}(),Y=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.legendInactiveClass="legend-mouseover-inactive"}return c(e,[{key:"getAllSeriesEls",value:function(){return this.w.globals.dom.baseEl.getElementsByClassName("apexcharts-series")}},{key:"getSeriesByName",value:function(e){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner .apexcharts-series[seriesName='".concat(x.escapeString(e),"']"))}},{key:"isSeriesHidden",value:function(e){var t=this.getSeriesByName(e),i=parseInt(t.getAttribute("data:realIndex"),10);return{isHidden:t.classList.contains("apexcharts-series-collapsed"),realIndex:i}}},{key:"addCollapsedClassToSeries",value:function(e,t){var i=this.w;function a(i){for(var a=0;a<i.length;a++)i[a].index===t&&e.node.classList.add("apexcharts-series-collapsed")}a(i.globals.collapsedSeries),a(i.globals.ancillaryCollapsedSeries)}},{key:"toggleSeries",value:function(e){var t=this.isSeriesHidden(e);return this.ctx.legend.legendHelpers.toggleDataSeries(t.realIndex,t.isHidden),t.isHidden}},{key:"showSeries",value:function(e){var t=this.isSeriesHidden(e);t.isHidden&&this.ctx.legend.legendHelpers.toggleDataSeries(t.realIndex,!0)}},{key:"hideSeries",value:function(e){var t=this.isSeriesHidden(e);t.isHidden||this.ctx.legend.legendHelpers.toggleDataSeries(t.realIndex,!1)}},{key:"resetSeries",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=this.w,n=x.clone(a.globals.initialSeries);a.globals.previousPaths=[],i?(a.globals.collapsedSeries=[],a.globals.ancillaryCollapsedSeries=[],a.globals.collapsedSeriesIndices=[],a.globals.ancillaryCollapsedSeriesIndices=[]):n=this.emptyCollapsedSeries(n),a.config.series=n,e&&(t&&(a.globals.zoomed=!1,this.ctx.updateHelpers.revertDefaultAxisMinMax()),this.ctx.updateHelpers._updateSeries(n,a.config.chart.animations.dynamicAnimation.enabled))}},{key:"emptyCollapsedSeries",value:function(e){for(var t=this.w,i=0;i<e.length;i++)t.globals.collapsedSeriesIndices.indexOf(i)>-1&&(e[i].data=[]);return e}},{key:"toggleSeriesOnHover",value:function(e,t){var i=this.w;t||(t=e.target);var a=i.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels");if("mousemove"===e.type){var n=parseInt(t.getAttribute("rel"),10)-1,r=null,o=null;i.globals.axisCharts||"radialBar"===i.config.chart.type?i.globals.axisCharts?(r=i.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(n,"']")),o=i.globals.dom.baseEl.querySelector(".apexcharts-datalabels[data\\:realIndex='".concat(n,"']"))):r=i.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(n+1,"']")):r=i.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(n+1,"'] path"));for(var s=0;s<a.length;s++)a[s].classList.add(this.legendInactiveClass);null!==r&&(i.globals.axisCharts||r.parentNode.classList.remove(this.legendInactiveClass),r.classList.remove(this.legendInactiveClass),null!==o&&o.classList.remove(this.legendInactiveClass))}else if("mouseout"===e.type)for(var l=0;l<a.length;l++)a[l].classList.remove(this.legendInactiveClass)}},{key:"highlightRangeInSeries",value:function(e,t){var i=this,a=this.w,n=a.globals.dom.baseEl.getElementsByClassName("apexcharts-heatmap-rect"),r=function(e){for(var t=0;t<n.length;t++)n[t].classList[e](i.legendInactiveClass)};if("mousemove"===e.type){var o=parseInt(t.getAttribute("rel"),10)-1;r("add"),function(e){for(var t=0;t<n.length;t++){var a=parseInt(n[t].getAttribute("val"),10);a>=e.from&&a<=e.to&&n[t].classList.remove(i.legendInactiveClass)}}(a.config.plotOptions.heatmap.colorScale.ranges[o])}else"mouseout"===e.type&&r("remove")}},{key:"getActiveConfigSeriesIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"asc",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=this.w,a=0;if(i.config.series.length>1)for(var n=i.config.series.map((function(e,a){return e.data&&e.data.length>0&&-1===i.globals.collapsedSeriesIndices.indexOf(a)&&(!i.globals.comboCharts||0===t.length||t.length&&t.indexOf(i.config.series[a].type)>-1)?a:-1})),r="asc"===e?0:n.length-1;"asc"===e?r<n.length:r>=0;"asc"===e?r++:r--)if(-1!==n[r]){a=n[r];break}return a}},{key:"getBarSeriesIndices",value:function(){return this.w.globals.comboCharts?this.w.config.series.map((function(e,t){return"bar"===e.type||"column"===e.type?t:-1})).filter((function(e){return-1!==e})):this.w.config.series.map((function(e,t){return t}))}},{key:"getPreviousPaths",value:function(){var e=this.w;function t(t,i,a){for(var n=t[i].childNodes,r={type:a,paths:[],realIndex:t[i].getAttribute("data:realIndex")},o=0;o<n.length;o++)if(n[o].hasAttribute("pathTo")){var s=n[o].getAttribute("pathTo");r.paths.push({d:s})}e.globals.previousPaths.push(r)}e.globals.previousPaths=[],["line","area","bar","rangebar","rangeArea","candlestick","radar"].forEach((function(i){for(var a,n=(a=i,e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(a,"-series .apexcharts-series"))),r=0;r<n.length;r++)t(n,r,i)})),this.handlePrevBubbleScatterPaths("bubble"),this.handlePrevBubbleScatterPaths("scatter");var i=e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(e.config.chart.type," .apexcharts-series"));if(i.length>0)for(var a=function(t){for(var i=e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(e.config.chart.type," .apexcharts-series[data\\:realIndex='").concat(t,"'] rect")),a=[],n=function(e){var t=function(t){return i[e].getAttribute(t)},n={x:parseFloat(t("x")),y:parseFloat(t("y")),width:parseFloat(t("width")),height:parseFloat(t("height"))};a.push({rect:n,color:i[e].getAttribute("color")})},r=0;r<i.length;r++)n(r);e.globals.previousPaths.push(a)},n=0;n<i.length;n++)a(n);e.globals.axisCharts||(e.globals.previousPaths=e.globals.series)}},{key:"handlePrevBubbleScatterPaths",value:function(e){var t=this.w,i=t.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(e,"-series .apexcharts-series"));if(i.length>0)for(var a=0;a<i.length;a++){for(var n=t.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(e,"-series .apexcharts-series[data\\:realIndex='").concat(a,"'] circle")),r=[],o=0;o<n.length;o++)r.push({x:n[o].getAttribute("cx"),y:n[o].getAttribute("cy"),r:n[o].getAttribute("r")});t.globals.previousPaths.push(r)}}},{key:"clearPreviousPaths",value:function(){var e=this.w;e.globals.previousPaths=[],e.globals.allSeriesCollapsed=!1}},{key:"handleNoData",value:function(){var e=this.w,t=e.config.noData,i=new w(this.ctx),a=e.globals.svgWidth/2,n=e.globals.svgHeight/2,r="middle";if(e.globals.noData=!0,e.globals.animationEnded=!0,"left"===t.align?(a=10,r="start"):"right"===t.align&&(a=e.globals.svgWidth-10,r="end"),"top"===t.verticalAlign?n=50:"bottom"===t.verticalAlign&&(n=e.globals.svgHeight-50),a+=t.offsetX,n=n+parseInt(t.style.fontSize,10)+2+t.offsetY,void 0!==t.text&&""!==t.text){var o=i.drawText({x:a,y:n,text:t.text,textAnchor:r,fontSize:t.style.fontSize,fontFamily:t.style.fontFamily,foreColor:t.style.color,opacity:1,class:"apexcharts-text-nodata"});e.globals.dom.Paper.add(o)}}},{key:"setNullSeriesToZeroValues",value:function(e){for(var t=this.w,i=0;i<e.length;i++)if(0===e[i].length)for(var a=0;a<e[t.globals.maxValsInArrayIndex].length;a++)e[i].push(0);return e}},{key:"hasAllSeriesEqualX",value:function(){for(var e=!0,t=this.w,i=this.filteredSeriesX(),a=0;a<i.length-1;a++)if(i[a][0]!==i[a+1][0]){e=!1;break}return t.globals.allSeriesHasEqualX=e,e}},{key:"filteredSeriesX",value:function(){return this.w.globals.seriesX.map((function(e){return e.length>0?e:[]}))}}]),e}(),W=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.twoDSeries=[],this.threeDSeries=[],this.twoDSeriesX=[],this.seriesGoals=[],this.coreUtils=new k(this.ctx)}return c(e,[{key:"isMultiFormat",value:function(){return this.isFormatXY()||this.isFormat2DArray()}},{key:"isFormatXY",value:function(){var e=this.w.config.series.slice(),t=new Y(this.ctx);if(this.activeSeriesIndex=t.getActiveConfigSeriesIndex(),void 0!==e[this.activeSeriesIndex].data&&e[this.activeSeriesIndex].data.length>0&&null!==e[this.activeSeriesIndex].data[0]&&void 0!==e[this.activeSeriesIndex].data[0].x&&null!==e[this.activeSeriesIndex].data[0])return!0}},{key:"isFormat2DArray",value:function(){var e=this.w.config.series.slice(),t=new Y(this.ctx);if(this.activeSeriesIndex=t.getActiveConfigSeriesIndex(),void 0!==e[this.activeSeriesIndex].data&&e[this.activeSeriesIndex].data.length>0&&void 0!==e[this.activeSeriesIndex].data[0]&&null!==e[this.activeSeriesIndex].data[0]&&e[this.activeSeriesIndex].data[0].constructor===Array)return!0}},{key:"handleFormat2DArray",value:function(e,t){for(var i=this.w.config,a=this.w.globals,n="boxPlot"===i.chart.type||"boxPlot"===i.series[t].type,r=0;r<e[t].data.length;r++)if(void 0!==e[t].data[r][1]&&(Array.isArray(e[t].data[r][1])&&4===e[t].data[r][1].length&&!n?this.twoDSeries.push(x.parseNumber(e[t].data[r][1][3])):e[t].data[r].length>=5?this.twoDSeries.push(x.parseNumber(e[t].data[r][4])):this.twoDSeries.push(x.parseNumber(e[t].data[r][1])),a.dataFormatXNumeric=!0),"datetime"===i.xaxis.type){var o=new Date(e[t].data[r][0]);o=new Date(o).getTime(),this.twoDSeriesX.push(o)}else this.twoDSeriesX.push(e[t].data[r][0]);for(var s=0;s<e[t].data.length;s++)void 0!==e[t].data[s][2]&&(this.threeDSeries.push(e[t].data[s][2]),a.isDataXYZ=!0)}},{key:"handleFormatXY",value:function(e,t){var i=this.w.config,a=this.w.globals,n=new I(this.ctx),r=t;a.collapsedSeriesIndices.indexOf(t)>-1&&(r=this.activeSeriesIndex);for(var o=0;o<e[t].data.length;o++)void 0!==e[t].data[o].y&&(Array.isArray(e[t].data[o].y)?this.twoDSeries.push(x.parseNumber(e[t].data[o].y[e[t].data[o].y.length-1])):this.twoDSeries.push(x.parseNumber(e[t].data[o].y))),void 0!==e[t].data[o].goals&&Array.isArray(e[t].data[o].goals)?(void 0===this.seriesGoals[t]&&(this.seriesGoals[t]=[]),this.seriesGoals[t].push(e[t].data[o].goals)):(void 0===this.seriesGoals[t]&&(this.seriesGoals[t]=[]),this.seriesGoals[t].push(null));for(var s=0;s<e[r].data.length;s++){var l="string"==typeof e[r].data[s].x,c=Array.isArray(e[r].data[s].x),u=!c&&!!n.isValidDate(e[r].data[s].x.toString());if(l||u)if(l||i.xaxis.convertedCatToNumeric){var h=a.isBarHorizontal&&a.isRangeData;"datetime"!==i.xaxis.type||h?(this.fallbackToCategory=!0,this.twoDSeriesX.push(e[r].data[s].x)):this.twoDSeriesX.push(n.parseDate(e[r].data[s].x))}else"datetime"===i.xaxis.type?this.twoDSeriesX.push(n.parseDate(e[r].data[s].x.toString())):(a.dataFormatXNumeric=!0,a.isXNumeric=!0,this.twoDSeriesX.push(parseFloat(e[r].data[s].x)));else c?(this.fallbackToCategory=!0,this.twoDSeriesX.push(e[r].data[s].x)):(a.isXNumeric=!0,a.dataFormatXNumeric=!0,this.twoDSeriesX.push(e[r].data[s].x))}if(e[t].data[0]&&void 0!==e[t].data[0].z){for(var d=0;d<e[t].data.length;d++)this.threeDSeries.push(e[t].data[d].z);a.isDataXYZ=!0}}},{key:"handleRangeData",value:function(e,t){var i=this.w.globals,a={};return this.isFormat2DArray()?a=this.handleRangeDataFormat("array",e,t):this.isFormatXY()&&(a=this.handleRangeDataFormat("xy",e,t)),i.seriesRangeStart.push(a.start),i.seriesRangeEnd.push(a.end),i.seriesRange.push(a.rangeUniques),i.seriesRange.forEach((function(e,t){e&&e.forEach((function(e,t){e.y.forEach((function(t,i){for(var a=0;a<e.y.length;a++)if(i!==a){var n=t.y1,r=t.y2,o=e.y[a].y1;n<=e.y[a].y2&&o<=r&&(e.overlaps.indexOf(t.rangeName)<0&&e.overlaps.push(t.rangeName),e.overlaps.indexOf(e.y[a].rangeName)<0&&e.overlaps.push(e.y[a].rangeName))}}))}))})),a}},{key:"handleCandleStickBoxData",value:function(e,t){var i=this.w.globals,a={};return this.isFormat2DArray()?a=this.handleCandleStickBoxDataFormat("array",e,t):this.isFormatXY()&&(a=this.handleCandleStickBoxDataFormat("xy",e,t)),i.seriesCandleO[t]=a.o,i.seriesCandleH[t]=a.h,i.seriesCandleM[t]=a.m,i.seriesCandleL[t]=a.l,i.seriesCandleC[t]=a.c,a}},{key:"handleRangeDataFormat",value:function(e,t,i){var a=[],n=[],r=t[i].data.filter((function(e,t,i){return t===i.findIndex((function(t){return t.x===e.x}))})).map((function(e,t){return{x:e.x,overlaps:[],y:[]}}));if("array"===e)for(var o=0;o<t[i].data.length;o++)Array.isArray(t[i].data[o])?(a.push(t[i].data[o][1][0]),n.push(t[i].data[o][1][1])):(a.push(t[i].data[o]),n.push(t[i].data[o]));else if("xy"===e)for(var s=function(e){var o=Array.isArray(t[i].data[e].y),s=x.randomId(),l=t[i].data[e].x,c={y1:o?t[i].data[e].y[0]:t[i].data[e].y,y2:o?t[i].data[e].y[1]:t[i].data[e].y,rangeName:s};t[i].data[e].rangeName=s;var u=r.findIndex((function(e){return e.x===l}));r[u].y.push(c),a.push(c.y1),n.push(c.y2)},l=0;l<t[i].data.length;l++)s(l);return{start:a,end:n,rangeUniques:r}}},{key:"handleCandleStickBoxDataFormat",value:function(e,t,i){var a=this.w,n="boxPlot"===a.config.chart.type||"boxPlot"===a.config.series[i].type,r=[],o=[],s=[],l=[],c=[];if("array"===e)if(n&&6===t[i].data[0].length||!n&&5===t[i].data[0].length)for(var u=0;u<t[i].data.length;u++)r.push(t[i].data[u][1]),o.push(t[i].data[u][2]),n?(s.push(t[i].data[u][3]),l.push(t[i].data[u][4]),c.push(t[i].data[u][5])):(l.push(t[i].data[u][3]),c.push(t[i].data[u][4]));else for(var h=0;h<t[i].data.length;h++)Array.isArray(t[i].data[h][1])&&(r.push(t[i].data[h][1][0]),o.push(t[i].data[h][1][1]),n?(s.push(t[i].data[h][1][2]),l.push(t[i].data[h][1][3]),c.push(t[i].data[h][1][4])):(l.push(t[i].data[h][1][2]),c.push(t[i].data[h][1][3])));else if("xy"===e)for(var d=0;d<t[i].data.length;d++)Array.isArray(t[i].data[d].y)&&(r.push(t[i].data[d].y[0]),o.push(t[i].data[d].y[1]),n?(s.push(t[i].data[d].y[2]),l.push(t[i].data[d].y[3]),c.push(t[i].data[d].y[4])):(l.push(t[i].data[d].y[2]),c.push(t[i].data[d].y[3])));return{o:r,h:o,m:s,l:l,c:c}}},{key:"parseDataAxisCharts",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.ctx,a=this.w.config,n=this.w.globals,r=new I(i),o=a.labels.length>0?a.labels.slice():a.xaxis.categories.slice();n.isRangeBar="rangeBar"===a.chart.type&&n.isBarHorizontal,n.hasGroups="category"===a.xaxis.type&&a.xaxis.group.groups.length>0,n.hasGroups&&(n.groups=a.xaxis.group.groups);for(var s=function(){for(var e=0;e<o.length;e++)if("string"==typeof o[e]){if(!r.isValidDate(o[e]))throw new Error("You have provided invalid Date format. Please provide a valid JavaScript Date");t.twoDSeriesX.push(r.parseDate(o[e]))}else t.twoDSeriesX.push(o[e])},l=0;l<e.length;l++){if(this.twoDSeries=[],this.twoDSeriesX=[],this.threeDSeries=[],void 0===e[l].data)return void console.error("It is a possibility that you may have not included 'data' property in series.");if("rangeBar"!==a.chart.type&&"rangeArea"!==a.chart.type&&"rangeBar"!==e[l].type&&"rangeArea"!==e[l].type||(n.isRangeData=!0,n.isComboCharts?"rangeBar"!==e[l].type&&"rangeArea"!==e[l].type||this.handleRangeData(e,l):"rangeBar"!==a.chart.type&&"rangeArea"!==a.chart.type||this.handleRangeData(e,l)),this.isMultiFormat())this.isFormat2DArray()?this.handleFormat2DArray(e,l):this.isFormatXY()&&this.handleFormatXY(e,l),"candlestick"!==a.chart.type&&"candlestick"!==e[l].type&&"boxPlot"!==a.chart.type&&"boxPlot"!==e[l].type||this.handleCandleStickBoxData(e,l),n.series.push(this.twoDSeries),n.labels.push(this.twoDSeriesX),n.seriesX.push(this.twoDSeriesX),n.seriesGoals=this.seriesGoals,l!==this.activeSeriesIndex||this.fallbackToCategory||(n.isXNumeric=!0);else{"datetime"===a.xaxis.type?(n.isXNumeric=!0,s(),n.seriesX.push(this.twoDSeriesX)):"numeric"===a.xaxis.type&&(n.isXNumeric=!0,o.length>0&&(this.twoDSeriesX=o,n.seriesX.push(this.twoDSeriesX))),n.labels.push(this.twoDSeriesX);var c=e[l].data.map((function(e){return x.parseNumber(e)}));n.series.push(c)}n.seriesZ.push(this.threeDSeries),void 0!==e[l].name?n.seriesNames.push(e[l].name):n.seriesNames.push("series-"+parseInt(l+1,10)),void 0!==e[l].color?n.seriesColors.push(e[l].color):n.seriesColors.push(void 0)}return this.w}},{key:"parseDataNonAxisCharts",value:function(e){var t=this.w.globals,i=this.w.config;t.series=e.slice(),t.seriesNames=i.labels.slice();for(var a=0;a<t.series.length;a++)void 0===t.seriesNames[a]&&t.seriesNames.push("series-"+(a+1));return this.w}},{key:"handleExternalLabelsData",value:function(e){var t=this.w.config,i=this.w.globals;t.xaxis.categories.length>0?i.labels=t.xaxis.categories:t.labels.length>0?i.labels=t.labels.slice():this.fallbackToCategory?(i.labels=i.labels[0],i.seriesRange.length&&(i.seriesRange.map((function(e){e.forEach((function(e){i.labels.indexOf(e.x)<0&&e.x&&i.labels.push(e.x)}))})),i.labels=i.labels.filter((function(e,t,i){return i.indexOf(e)===t}))),t.xaxis.convertedCatToNumeric&&(new z(t).convertCatToNumericXaxis(t,this.ctx,i.seriesX[0]),this._generateExternalLabels(e))):this._generateExternalLabels(e)}},{key:"_generateExternalLabels",value:function(e){var t=this.w.globals,i=this.w.config,a=[];if(t.axisCharts){if(t.series.length>0)if(this.isFormatXY())for(var n=i.series.map((function(e,t){return e.data.filter((function(e,t,i){return i.findIndex((function(t){return t.x===e.x}))===t}))})),r=n.reduce((function(e,t,i,a){return a[e].length>t.length?e:i}),0),o=0;o<n[r].length;o++)a.push(o+1);else for(var s=0;s<t.series[t.maxValsInArrayIndex].length;s++)a.push(s+1);t.seriesX=[];for(var l=0;l<e.length;l++)t.seriesX.push(a);t.isXNumeric=!0}if(0===a.length){a=t.axisCharts?[]:t.series.map((function(e,t){return t+1}));for(var c=0;c<e.length;c++)t.seriesX.push(a)}t.labels=a,i.xaxis.convertedCatToNumeric&&(t.categoryLabels=a.map((function(e){return i.xaxis.labels.formatter(e)}))),t.noLabelsProvided=!0}},{key:"parseData",value:function(e){var t=this.w,i=t.config,a=t.globals;if(this.excludeCollapsedSeriesInYAxis(),this.fallbackToCategory=!1,this.ctx.core.resetGlobals(),this.ctx.core.isMultipleY(),a.axisCharts?(this.parseDataAxisCharts(e),this.coreUtils.getLargestSeries()):this.parseDataNonAxisCharts(e),"bar"===i.chart.type&&i.chart.stacked){var n=new Y(this.ctx);a.series=n.setNullSeriesToZeroValues(a.series)}this.coreUtils.getSeriesTotals(),a.axisCharts&&(a.stackedSeriesTotals=this.coreUtils.getStackedSeriesTotals()),this.coreUtils.getPercentSeries(),a.dataFormatXNumeric||a.isXNumeric&&("numeric"!==i.xaxis.type||0!==i.labels.length||0!==i.xaxis.categories.length)||this.handleExternalLabelsData(e);for(var r=this.coreUtils.getCategoryLabels(a.labels),o=0;o<r.length;o++)if(Array.isArray(r[o])){a.isMultiLineX=!0;break}}},{key:"excludeCollapsedSeriesInYAxis",value:function(){var e=this,t=this.w;t.globals.ignoreYAxisIndexes=t.globals.collapsedSeries.map((function(i,a){if(e.w.globals.isMultipleYAxis&&!t.config.chart.stacked)return i.index}))}}]),e}(),H=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.tooltipKeyFormat="dd MMM"}return c(e,[{key:"xLabelFormat",value:function(e,t,i,a){var n=this.w;if("datetime"===n.config.xaxis.type&&void 0===n.config.xaxis.labels.formatter&&void 0===n.config.tooltip.x.formatter){var r=new I(this.ctx);return r.formatDate(r.getDate(t),n.config.tooltip.x.format)}return e(t,i,a)}},{key:"defaultGeneralFormatter",value:function(e){return Array.isArray(e)?e.map((function(e){return e})):e}},{key:"defaultYFormatter",value:function(e,t,i){var a=this.w;return x.isNumber(e)&&(e=0!==a.globals.yValueDecimal?e.toFixed(void 0!==t.decimalsInFloat?t.decimalsInFloat:a.globals.yValueDecimal):a.globals.maxYArr[i]-a.globals.minYArr[i]<5?e.toFixed(1):e.toFixed(0)),e}},{key:"setLabelFormatters",value:function(){var e=this,t=this.w;return t.globals.xaxisTooltipFormatter=function(t){return e.defaultGeneralFormatter(t)},t.globals.ttKeyFormatter=function(t){return e.defaultGeneralFormatter(t)},t.globals.ttZFormatter=function(e){return e},t.globals.legendFormatter=function(t){return e.defaultGeneralFormatter(t)},void 0!==t.config.xaxis.labels.formatter?t.globals.xLabelFormatter=t.config.xaxis.labels.formatter:t.globals.xLabelFormatter=function(e){if(x.isNumber(e)){if(!t.config.xaxis.convertedCatToNumeric&&"numeric"===t.config.xaxis.type){if(x.isNumber(t.config.xaxis.decimalsInFloat))return e.toFixed(t.config.xaxis.decimalsInFloat);var i=t.globals.maxX-t.globals.minX;return i>0&&i<100?e.toFixed(1):e.toFixed(0)}return t.globals.isBarHorizontal&&t.globals.maxY-t.globals.minYArr<4?e.toFixed(1):e.toFixed(0)}return e},"function"==typeof t.config.tooltip.x.formatter?t.globals.ttKeyFormatter=t.config.tooltip.x.formatter:t.globals.ttKeyFormatter=t.globals.xLabelFormatter,"function"==typeof t.config.xaxis.tooltip.formatter&&(t.globals.xaxisTooltipFormatter=t.config.xaxis.tooltip.formatter),(Array.isArray(t.config.tooltip.y)||void 0!==t.config.tooltip.y.formatter)&&(t.globals.ttVal=t.config.tooltip.y),void 0!==t.config.tooltip.z.formatter&&(t.globals.ttZFormatter=t.config.tooltip.z.formatter),void 0!==t.config.legend.formatter&&(t.globals.legendFormatter=t.config.legend.formatter),t.config.yaxis.forEach((function(i,a){void 0!==i.labels.formatter?t.globals.yLabelFormatters[a]=i.labels.formatter:t.globals.yLabelFormatters[a]=function(n){return t.globals.xyCharts?Array.isArray(n)?n.map((function(t){return e.defaultYFormatter(t,i,a)})):e.defaultYFormatter(n,i,a):n}})),t.globals}},{key:"heatmapLabelFormatters",value:function(){var e=this.w;if("heatmap"===e.config.chart.type){e.globals.yAxisScale[0].result=e.globals.seriesNames.slice();var t=e.globals.seriesNames.reduce((function(e,t){return e.length>t.length?e:t}),0);e.globals.yAxisScale[0].niceMax=t,e.globals.yAxisScale[0].niceMin=t}}}]),e}(),U=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"getLabel",value:function(e,t,i,a){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"12px",o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=this.w,l=void 0===e[a]?"":e[a],c=l,u=s.globals.xLabelFormatter,h=s.config.xaxis.labels.formatter,d=!1,f=new H(this.ctx),p=l;o&&(c=f.xLabelFormat(u,l,p,{i:a,dateFormatter:new I(this.ctx).formatDate,w:s}),void 0!==h&&(c=h(l,e[a],{i:a,dateFormatter:new I(this.ctx).formatDate,w:s})));var m=function(e){var i=null;return t.forEach((function(e){"month"===e.unit?i="year":"day"===e.unit?i="month":"hour"===e.unit?i="day":"minute"===e.unit&&(i="hour")})),i===e};t.length>0?(d=m(t[a].unit),i=t[a].position,c=t[a].value):"datetime"===s.config.xaxis.type&&void 0===h&&(c=""),void 0===c&&(c=""),c=Array.isArray(c)?c:c.toString();var g=new w(this.ctx),v={};v=s.globals.rotateXLabels&&o?g.getTextRects(c,parseInt(r,10),null,"rotate(".concat(s.config.xaxis.labels.rotate," 0 0)"),!1):g.getTextRects(c,parseInt(r,10));var y=!s.config.xaxis.labels.showDuplicates&&this.ctx.timeScale;return!Array.isArray(c)&&(0===c.indexOf("NaN")||0===c.toLowerCase().indexOf("invalid")||c.toLowerCase().indexOf("infinity")>=0||n.indexOf(c)>=0&&y)&&(c=""),{x:i,text:c,textRect:v,isBold:d}}},{key:"checkLabelBasedOnTickamount",value:function(e,t,i){var a=this.w,n=a.config.xaxis.tickAmount;return"dataPoints"===n&&(n=Math.round(a.globals.gridWidth/120)),n>i||e%Math.round(i/(n+1))==0||(t.text=""),t}},{key:"checkForOverflowingLabels",value:function(e,t,i,a,n){var r=this.w;if(0===e&&r.globals.skipFirstTimelinelabel&&(t.text=""),e===i-1&&r.globals.skipLastTimelinelabel&&(t.text=""),r.config.xaxis.labels.hideOverlappingLabels&&a.length>0){var o=n[n.length-1];t.x<o.textRect.width/(r.globals.rotateXLabels?Math.abs(r.config.xaxis.labels.rotate)/12:1.01)+o.x&&(t.text="")}return t}},{key:"checkForReversedLabels",value:function(e,t){var i=this.w;return i.config.yaxis[e]&&i.config.yaxis[e].reversed&&t.reverse(),t}},{key:"isYAxisHidden",value:function(e){var t=this.w,i=new k(this.ctx);return!t.config.yaxis[e].show||!t.config.yaxis[e].showForNullSeries&&i.isSeriesNull(e)&&-1===t.globals.collapsedSeriesIndices.indexOf(e)}},{key:"getYAxisForeColor",value:function(e,t){var i=this.w;return Array.isArray(e)&&i.globals.yAxisScale[t]&&this.ctx.theme.pushExtraColors(e,i.globals.yAxisScale[t].result.length,!1),e}},{key:"drawYAxisTicks",value:function(e,t,i,a,n,r,o){var s=this.w,l=new w(this.ctx),c=s.globals.translateY;if(a.show&&t>0){!0===s.config.yaxis[n].opposite&&(e+=a.width);for(var u=t;u>=0;u--){var h=c+t/10+s.config.yaxis[n].labels.offsetY-1;s.globals.isBarHorizontal&&(h=r*u),"heatmap"===s.config.chart.type&&(h+=r/2);var d=l.drawLine(e+i.offsetX-a.width+a.offsetX,h+a.offsetY,e+i.offsetX+a.offsetX,h+a.offsetY,a.color);o.add(d),c+=r}}}}]),e}(),X=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"scaleSvgNode",value:function(e,t){var i=parseFloat(e.getAttributeNS(null,"width")),a=parseFloat(e.getAttributeNS(null,"height"));e.setAttributeNS(null,"width",i*t),e.setAttributeNS(null,"height",a*t),e.setAttributeNS(null,"viewBox","0 0 "+i+" "+a)}},{key:"fixSvgStringForIe11",value:function(e){if(!x.isIE11())return e.replace(/&nbsp;/g,"&#160;");var t=0,i=e.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g,(function(e){return 2===++t?'xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.dev"':e}));return(i=i.replace(/xmlns:NS\d+=""/g,"")).replace(/NS\d+:(\w+:\w+=")/g,"$1")}},{key:"getSvgString",value:function(e){null==e&&(e=1);var t=this.w.globals.dom.Paper.svg();if(1!==e){var i=this.w.globals.dom.Paper.node.cloneNode(!0);this.scaleSvgNode(i,e),t=(new XMLSerializer).serializeToString(i)}return this.fixSvgStringForIe11(t)}},{key:"cleanup",value:function(){var e=this.w,t=e.globals.dom.baseEl.getElementsByClassName("apexcharts-xcrosshairs"),i=e.globals.dom.baseEl.getElementsByClassName("apexcharts-ycrosshairs"),a=e.globals.dom.baseEl.querySelectorAll(".apexcharts-zoom-rect, .apexcharts-selection-rect");Array.prototype.forEach.call(a,(function(e){e.setAttribute("width",0)})),t&&t[0]&&(t[0].setAttribute("x",-500),t[0].setAttribute("x1",-500),t[0].setAttribute("x2",-500)),i&&i[0]&&(i[0].setAttribute("y",-100),i[0].setAttribute("y1",-100),i[0].setAttribute("y2",-100))}},{key:"svgUrl",value:function(){this.cleanup();var e=this.getSvgString(),t=new Blob([e],{type:"image/svg+xml;charset=utf-8"});return URL.createObjectURL(t)}},{key:"dataURI",value:function(e){var t=this;return new Promise((function(i){var a=t.w,n=e?e.scale||e.width/a.globals.svgWidth:1;t.cleanup();var r=document.createElement("canvas");r.width=a.globals.svgWidth*n,r.height=parseInt(a.globals.dom.elWrap.style.height,10)*n;var o="transparent"===a.config.chart.background?"#fff":a.config.chart.background,s=r.getContext("2d");s.fillStyle=o,s.fillRect(0,0,r.width*n,r.height*n);var l=t.getSvgString(n);if(window.canvg&&x.isIE11()){var c=window.canvg.Canvg.fromString(s,l,{ignoreClear:!0,ignoreDimensions:!0});c.start();var u=r.msToBlob();c.stop(),i({blob:u})}else{var h="data:image/svg+xml,"+encodeURIComponent(l),d=new Image;d.crossOrigin="anonymous",d.onload=function(){if(s.drawImage(d,0,0),r.msToBlob){var e=r.msToBlob();i({blob:e})}else{var t=r.toDataURL("image/png");i({imgURI:t})}},d.src=h}}))}},{key:"exportToSVG",value:function(){this.triggerDownload(this.svgUrl(),this.w.config.chart.toolbar.export.svg.filename,".svg")}},{key:"exportToPng",value:function(){var e=this;this.dataURI().then((function(t){var i=t.imgURI,a=t.blob;a?navigator.msSaveOrOpenBlob(a,e.w.globals.chartID+".png"):e.triggerDownload(i,e.w.config.chart.toolbar.export.png.filename,".png")}))}},{key:"exportToCSV",value:function(e){var t=this,i=e.series,a=e.fileName,n=e.columnDelimiter,r=void 0===n?",":n,o=e.lineDelimiter,s=void 0===o?"\n":o,l=this.w;i||(i=l.config.series);var c=[],u=[],h="",d=l.globals.series.map((function(e,t){return-1===l.globals.collapsedSeriesIndices.indexOf(t)?e:[]})),f=Math.max.apply(Math,g(i.map((function(e){return e.data?e.data.length:0})))),p=new W(this.ctx),m=new U(this.ctx),v=function(e){var i="";if(l.globals.axisCharts){if("category"===l.config.xaxis.type||l.config.xaxis.convertedCatToNumeric)if(l.globals.isBarHorizontal){var a=l.globals.yLabelFormatters[0],n=new Y(t.ctx).getActiveConfigSeriesIndex();i=a(l.globals.labels[e],{seriesIndex:n,dataPointIndex:e,w:l})}else i=m.getLabel(l.globals.labels,l.globals.timescaleLabels,0,e).text;"datetime"===l.config.xaxis.type&&(l.config.xaxis.categories.length?i=l.config.xaxis.categories[e]:l.config.labels.length&&(i=l.config.labels[e]))}else i=l.config.labels[e];return Array.isArray(i)&&(i=i.join(" ")),x.isNumber(i)?i:i.split(r).join("")};c.push(l.config.chart.toolbar.export.csv.headerCategory),"boxPlot"===l.config.chart.type?(c.push("minimum"),c.push("q1"),c.push("median"),c.push("q3"),c.push("maximum")):"candlestick"===l.config.chart.type?(c.push("open"),c.push("high"),c.push("low"),c.push("close")):"rangeBar"===l.config.chart.type?(c.push("minimum"),c.push("maximum")):i.map((function(e,t){var i=e.name?e.name:"series-".concat(t);l.globals.axisCharts&&c.push(i.split(r).join("")?i.split(r).join(""):"series-".concat(t))})),l.globals.axisCharts||(c.push(l.config.chart.toolbar.export.csv.headerValue),u.push(c.join(r))),i.map((function(e,t){l.globals.axisCharts?function(e,t){if(c.length&&0===t&&u.push(c.join(r)),e.data){e.data=e.data.length&&e.data||g(Array(f)).map((function(){return""}));for(var a=0;a<e.data.length;a++){c=[];var n=v(a);if(n||(p.isFormatXY()?n=i[t].data[a].x:p.isFormat2DArray()&&(n=i[t].data[a]?i[t].data[a][0]:"")),0===t){c.push((s=n,"datetime"===l.config.xaxis.type&&String(s).length>=10?l.config.chart.toolbar.export.csv.dateFormatter(n):x.isNumber(n)?n:n.split(r).join("")));for(var o=0;o<l.globals.series.length;o++)p.isFormatXY()?c.push(i[o].data[a].y):c.push(d[o][a])}("candlestick"===l.config.chart.type||e.type&&"candlestick"===e.type)&&(c.pop(),c.push(l.globals.seriesCandleO[t][a]),c.push(l.globals.seriesCandleH[t][a]),c.push(l.globals.seriesCandleL[t][a]),c.push(l.globals.seriesCandleC[t][a])),("boxPlot"===l.config.chart.type||e.type&&"boxPlot"===e.type)&&(c.pop(),c.push(l.globals.seriesCandleO[t][a]),c.push(l.globals.seriesCandleH[t][a]),c.push(l.globals.seriesCandleM[t][a]),c.push(l.globals.seriesCandleL[t][a]),c.push(l.globals.seriesCandleC[t][a])),"rangeBar"===l.config.chart.type&&(c.pop(),c.push(l.globals.seriesRangeStart[t][a]),c.push(l.globals.seriesRangeEnd[t][a])),c.length&&u.push(c.join(r))}}var s}(e,t):((c=[]).push(l.globals.labels[t].split(r).join("")),c.push(d[t]),u.push(c.join(r)))})),h+=u.join(s),this.triggerDownload("data:text/csv; charset=utf-8,"+encodeURIComponent("\ufeff"+h),a||l.config.chart.toolbar.export.csv.filename,".csv")}},{key:"triggerDownload",value:function(e,t,i){var a=document.createElement("a");a.href=e,a.download=(t||this.w.globals.chartID)+i,document.body.appendChild(a),a.click(),document.body.removeChild(a)}}]),e}(),G=function(){function e(t,i){s(this,e),this.ctx=t,this.elgrid=i,this.w=t.w;var a=this.w;this.axesUtils=new U(t),this.xaxisLabels=a.globals.labels.slice(),a.globals.timescaleLabels.length>0&&!a.globals.isBarHorizontal&&(this.xaxisLabels=a.globals.timescaleLabels.slice()),a.config.xaxis.overwriteCategories&&(this.xaxisLabels=a.config.xaxis.overwriteCategories),this.drawnLabels=[],this.drawnLabelsRects=[],"top"===a.config.xaxis.position?this.offY=0:this.offY=a.globals.gridHeight+1,this.offY=this.offY+a.config.xaxis.axisBorder.offsetY,this.isCategoryBarHorizontal="bar"===a.config.chart.type&&a.config.plotOptions.bar.horizontal,this.xaxisFontSize=a.config.xaxis.labels.style.fontSize,this.xaxisFontFamily=a.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=a.config.xaxis.labels.style.colors,this.xaxisBorderWidth=a.config.xaxis.axisBorder.width,this.isCategoryBarHorizontal&&(this.xaxisBorderWidth=a.config.yaxis[0].axisBorder.width.toString()),this.xaxisBorderWidth.indexOf("%")>-1?this.xaxisBorderWidth=a.globals.gridWidth*parseInt(this.xaxisBorderWidth,10)/100:this.xaxisBorderWidth=parseInt(this.xaxisBorderWidth,10),this.xaxisBorderHeight=a.config.xaxis.axisBorder.height,this.yaxis=a.config.yaxis[0]}return c(e,[{key:"drawXaxis",value:function(){var e=this.w,t=new w(this.ctx),i=t.group({class:"apexcharts-xaxis",transform:"translate(".concat(e.config.xaxis.offsetX,", ").concat(e.config.xaxis.offsetY,")")}),a=t.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(e.globals.translateXAxisX,", ").concat(e.globals.translateXAxisY,")")});i.add(a);for(var n=[],r=0;r<this.xaxisLabels.length;r++)n.push(this.xaxisLabels[r]);if(this.drawXAxisLabelAndGroup(!0,t,a,n,e.globals.isXNumeric,(function(e,t){return t})),e.globals.hasGroups){var o=e.globals.groups;n=[];for(var s=0;s<o.length;s++)n.push(o[s].title);var l={};e.config.xaxis.group.style&&(l.xaxisFontSize=e.config.xaxis.group.style.fontSize,l.xaxisFontFamily=e.config.xaxis.group.style.fontFamily,l.xaxisForeColors=e.config.xaxis.group.style.colors,l.fontWeight=e.config.xaxis.group.style.fontWeight,l.cssClass=e.config.xaxis.group.style.cssClass),this.drawXAxisLabelAndGroup(!1,t,a,n,!1,(function(e,t){return o[e].cols*t}),l)}if(void 0!==e.config.xaxis.title.text){var c=t.group({class:"apexcharts-xaxis-title"}),u=t.drawText({x:e.globals.gridWidth/2+e.config.xaxis.title.offsetX,y:this.offY+parseFloat(this.xaxisFontSize)+("bottom"===e.config.xaxis.title.position?e.globals.xAxisLabelsHeight:-e.globals.xAxisLabelsHeight-10)+e.config.xaxis.title.offsetY,text:e.config.xaxis.title.text,textAnchor:"middle",fontSize:e.config.xaxis.title.style.fontSize,fontFamily:e.config.xaxis.title.style.fontFamily,fontWeight:e.config.xaxis.title.style.fontWeight,foreColor:e.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+e.config.xaxis.title.style.cssClass});c.add(u),i.add(c)}if(e.config.xaxis.axisBorder.show){var h=e.globals.barPadForNumericAxis,d=t.drawLine(e.globals.padHorizontal+e.config.xaxis.axisBorder.offsetX-h,this.offY,this.xaxisBorderWidth+h,this.offY,e.config.xaxis.axisBorder.color,0,this.xaxisBorderHeight);this.elgrid&&this.elgrid.elGridBorders?this.elgrid.elGridBorders.add(d):i.add(d)}return i}},{key:"drawXAxisLabelAndGroup",value:function(e,t,i,a,n,r){var o,s=this,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},c=[],u=[],h=this.w,d=l.xaxisFontSize||this.xaxisFontSize,f=l.xaxisFontFamily||this.xaxisFontFamily,p=l.xaxisForeColors||this.xaxisForeColors,m=l.fontWeight||h.config.xaxis.labels.style.fontWeight,g=l.cssClass||h.config.xaxis.labels.style.cssClass,v=h.globals.padHorizontal,y=a.length,x="category"===h.config.xaxis.type?h.globals.dataPoints:y;if(0===x&&y>x&&(x=y),n){var b=x>1?x-1:x;o=h.globals.gridWidth/b,v=v+r(0,o)/2+h.config.xaxis.labels.offsetX}else o=h.globals.gridWidth/x,v=v+r(0,o)+h.config.xaxis.labels.offsetX;for(var _=function(n){var l=v-r(n,o)/2+h.config.xaxis.labels.offsetX;0===n&&1===y&&o/2===v&&1===x&&(l=h.globals.gridWidth/2);var b=s.axesUtils.getLabel(a,h.globals.timescaleLabels,l,n,c,d,e),_=28;if(h.globals.rotateXLabels&&e&&(_=22),h.config.xaxis.title.text&&"top"===h.config.xaxis.position&&(_+=parseFloat(h.config.xaxis.title.style.fontSize)+2),e||(_=_+parseFloat(d)+(h.globals.xAxisLabelsHeight-h.globals.xAxisGroupLabelsHeight)+(h.globals.rotateXLabels?10:0)),b=void 0!==h.config.xaxis.tickAmount&&"dataPoints"!==h.config.xaxis.tickAmount&&"datetime"!==h.config.xaxis.type?s.axesUtils.checkLabelBasedOnTickamount(n,b,y):s.axesUtils.checkForOverflowingLabels(n,b,y,c,u),e&&b.text&&h.globals.xaxisLabelsCount++,h.config.xaxis.labels.show){var w=t.drawText({x:b.x,y:s.offY+h.config.xaxis.labels.offsetY+_-("top"===h.config.xaxis.position?h.globals.xAxisHeight+h.config.xaxis.axisTicks.height-2:0),text:b.text,textAnchor:"middle",fontWeight:b.isBold?600:m,fontSize:d,fontFamily:f,foreColor:Array.isArray(p)?e&&h.config.xaxis.convertedCatToNumeric?p[h.globals.minX+n-1]:p[n]:p,isPlainText:!1,cssClass:(e?"apexcharts-xaxis-label ":"apexcharts-xaxis-group-label ")+g});if(i.add(w),w.on("click",(function(e){if("function"==typeof h.config.chart.events.xAxisLabelClick){var t=Object.assign({},h,{labelIndex:n});h.config.chart.events.xAxisLabelClick(e,s.ctx,t)}})),e){var k=document.createElementNS(h.globals.SVGNS,"title");k.textContent=Array.isArray(b.text)?b.text.join(" "):b.text,w.node.appendChild(k),""!==b.text&&(c.push(b.text),u.push(b))}}n<y-1&&(v+=r(n+1,o))},w=0;w<=y-1;w++)_(w)}},{key:"drawXaxisInversed",value:function(e){var t,i,a=this,n=this.w,r=new w(this.ctx),o=n.config.yaxis[0].opposite?n.globals.translateYAxisX[e]:0,s=r.group({class:"apexcharts-yaxis apexcharts-xaxis-inversed",rel:e}),l=r.group({class:"apexcharts-yaxis-texts-g apexcharts-xaxis-inversed-texts-g",transform:"translate("+o+", 0)"});s.add(l);var c=[];if(n.config.yaxis[e].show)for(var u=0;u<this.xaxisLabels.length;u++)c.push(this.xaxisLabels[u]);t=n.globals.gridHeight/c.length,i=-t/2.2;var h=n.globals.yLabelFormatters[0],d=n.config.yaxis[0].labels;if(d.show)for(var f=function(o){var s=void 0===c[o]?"":c[o];s=h(s,{seriesIndex:e,dataPointIndex:o,w:n});var u=a.axesUtils.getYAxisForeColor(d.style.colors,e),f=0;Array.isArray(s)&&(f=s.length/2*parseInt(d.style.fontSize,10));var p=r.drawText({x:d.offsetX-15,y:i+t+d.offsetY-f,text:s,textAnchor:a.yaxis.opposite?"start":"end",foreColor:Array.isArray(u)?u[o]:u,fontSize:d.style.fontSize,fontFamily:d.style.fontFamily,fontWeight:d.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+d.style.cssClass,maxWidth:d.maxWidth});l.add(p),p.on("click",(function(e){if("function"==typeof n.config.chart.events.xAxisLabelClick){var t=Object.assign({},n,{labelIndex:o});n.config.chart.events.xAxisLabelClick(e,a.ctx,t)}}));var m=document.createElementNS(n.globals.SVGNS,"title");if(m.textContent=Array.isArray(s)?s.join(" "):s,p.node.appendChild(m),0!==n.config.yaxis[e].labels.rotate){var g=r.rotateAroundCenter(p.node);p.node.setAttribute("transform","rotate(".concat(n.config.yaxis[e].labels.rotate," 0 ").concat(g.y,")"))}i+=t},p=0;p<=c.length-1;p++)f(p);if(void 0!==n.config.yaxis[0].title.text){var m=r.group({class:"apexcharts-yaxis-title apexcharts-xaxis-title-inversed",transform:"translate("+o+", 0)"}),g=r.drawText({x:n.config.yaxis[0].title.offsetX,y:n.globals.gridHeight/2+n.config.yaxis[0].title.offsetY,text:n.config.yaxis[0].title.text,textAnchor:"middle",foreColor:n.config.yaxis[0].title.style.color,fontSize:n.config.yaxis[0].title.style.fontSize,fontWeight:n.config.yaxis[0].title.style.fontWeight,fontFamily:n.config.yaxis[0].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+n.config.yaxis[0].title.style.cssClass});m.add(g),s.add(m)}var v=0;this.isCategoryBarHorizontal&&n.config.yaxis[0].opposite&&(v=n.globals.gridWidth);var y=n.config.xaxis.axisBorder;if(y.show){var x=r.drawLine(n.globals.padHorizontal+y.offsetX+v,1+y.offsetY,n.globals.padHorizontal+y.offsetX+v,n.globals.gridHeight+y.offsetY,y.color,0);this.elgrid&&this.elgrid.elGridBorders?this.elgrid.elGridBorders.add(x):s.add(x)}return n.config.yaxis[0].axisTicks.show&&this.axesUtils.drawYAxisTicks(v,c.length,n.config.yaxis[0].axisBorder,n.config.yaxis[0].axisTicks,0,t,s),s}},{key:"drawXaxisTicks",value:function(e,t,i){var a=this.w,n=e;if(!(e<0||e-2>a.globals.gridWidth)){var r=this.offY+a.config.xaxis.axisTicks.offsetY;if(t=t+r+a.config.xaxis.axisTicks.height,"top"===a.config.xaxis.position&&(t=r-a.config.xaxis.axisTicks.height),a.config.xaxis.axisTicks.show){var o=new w(this.ctx).drawLine(e+a.config.xaxis.axisTicks.offsetX,r+a.config.xaxis.offsetY,n+a.config.xaxis.axisTicks.offsetX,t+a.config.xaxis.offsetY,a.config.xaxis.axisTicks.color);i.add(o),o.node.classList.add("apexcharts-xaxis-tick")}}}},{key:"getXAxisTicksPositions",value:function(){var e=this.w,t=[],i=this.xaxisLabels.length,a=e.globals.padHorizontal;if(e.globals.timescaleLabels.length>0)for(var n=0;n<i;n++)a=this.xaxisLabels[n].position,t.push(a);else for(var r=i,o=0;o<r;o++){var s=r;e.globals.isXNumeric&&"bar"!==e.config.chart.type&&(s-=1),a+=e.globals.gridWidth/s,t.push(a)}return t}},{key:"xAxisLabelCorrections",value:function(){var e=this.w,t=new w(this.ctx),i=e.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g"),a=e.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-texts-g text:not(.apexcharts-xaxis-group-label)"),n=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-inversed text"),r=e.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-inversed-texts-g text tspan");if(e.globals.rotateXLabels||e.config.xaxis.labels.rotateAlways)for(var o=0;o<a.length;o++){var s=t.rotateAroundCenter(a[o]);s.y=s.y-1,s.x=s.x+1,a[o].setAttribute("transform","rotate(".concat(e.config.xaxis.labels.rotate," ").concat(s.x," ").concat(s.y,")")),a[o].setAttribute("text-anchor","end"),i.setAttribute("transform","translate(0, ".concat(-10,")"));var l=a[o].childNodes;e.config.xaxis.labels.trim&&Array.prototype.forEach.call(l,(function(i){t.placeTextWithEllipsis(i,i.textContent,e.globals.xAxisLabelsHeight-("bottom"===e.config.legend.position?20:10))}))}else!function(){for(var i=e.globals.gridWidth/(e.globals.labels.length+1),n=0;n<a.length;n++){var r=a[n].childNodes;e.config.xaxis.labels.trim&&"datetime"!==e.config.xaxis.type&&Array.prototype.forEach.call(r,(function(e){t.placeTextWithEllipsis(e,e.textContent,i)}))}}();if(n.length>0){var c=n[n.length-1].getBBox(),u=n[0].getBBox();c.x<-20&&n[n.length-1].parentNode.removeChild(n[n.length-1]),u.x+u.width>e.globals.gridWidth&&!e.globals.isBarHorizontal&&n[0].parentNode.removeChild(n[0]);for(var h=0;h<r.length;h++)t.placeTextWithEllipsis(r[h],r[h].textContent,e.config.yaxis[0].labels.maxWidth-(e.config.yaxis[0].title.text?2*parseFloat(e.config.yaxis[0].title.style.fontSize):0)-15)}}}]),e}(),q=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w;var i=this.w;this.xaxisLabels=i.globals.labels.slice(),this.axesUtils=new U(t),this.isRangeBar=i.globals.seriesRange.length,i.globals.timescaleLabels.length>0&&(this.xaxisLabels=i.globals.timescaleLabels.slice())}return c(e,[{key:"drawGridArea",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.w,i=new w(this.ctx);null===e&&(e=i.group({class:"apexcharts-grid"}));var a=i.drawLine(t.globals.padHorizontal,1,t.globals.padHorizontal,t.globals.gridHeight,"transparent"),n=i.drawLine(t.globals.padHorizontal,t.globals.gridHeight,t.globals.gridWidth,t.globals.gridHeight,"transparent");return e.add(n),e.add(a),e}},{key:"drawGrid",value:function(){var e=null;return this.w.globals.axisCharts&&(e=this.renderGrid(),this.drawGridArea(e.el)),e}},{key:"createGridMask",value:function(){var e=this.w,t=e.globals,i=new w(this.ctx),a=Array.isArray(e.config.stroke.width)?0:e.config.stroke.width;if(Array.isArray(e.config.stroke.width)){var n=0;e.config.stroke.width.forEach((function(e){n=Math.max(n,e)})),a=n}t.dom.elGridRectMask=document.createElementNS(t.SVGNS,"clipPath"),t.dom.elGridRectMask.setAttribute("id","gridRectMask".concat(t.cuid)),t.dom.elGridRectMarkerMask=document.createElementNS(t.SVGNS,"clipPath"),t.dom.elGridRectMarkerMask.setAttribute("id","gridRectMarkerMask".concat(t.cuid)),t.dom.elForecastMask=document.createElementNS(t.SVGNS,"clipPath"),t.dom.elForecastMask.setAttribute("id","forecastMask".concat(t.cuid)),t.dom.elNonForecastMask=document.createElementNS(t.SVGNS,"clipPath"),t.dom.elNonForecastMask.setAttribute("id","nonForecastMask".concat(t.cuid));var r=e.config.chart.type,o=0,s=0;("bar"===r||"rangeBar"===r||"candlestick"===r||"boxPlot"===r||e.globals.comboBarCount>0)&&e.globals.isXNumeric&&!e.globals.isBarHorizontal&&(o=e.config.grid.padding.left,s=e.config.grid.padding.right,t.barPadForNumericAxis>o&&(o=t.barPadForNumericAxis,s=t.barPadForNumericAxis)),t.dom.elGridRect=i.drawRect(-a/2-o-2,-a/2,t.gridWidth+a+s+o+4,t.gridHeight+a,0,"#fff");var l=e.globals.markers.largestSize+1;t.dom.elGridRectMarker=i.drawRect(2*-l,2*-l,t.gridWidth+4*l,t.gridHeight+4*l,0,"#fff"),t.dom.elGridRectMask.appendChild(t.dom.elGridRect.node),t.dom.elGridRectMarkerMask.appendChild(t.dom.elGridRectMarker.node);var c=t.dom.baseEl.querySelector("defs");c.appendChild(t.dom.elGridRectMask),c.appendChild(t.dom.elForecastMask),c.appendChild(t.dom.elNonForecastMask),c.appendChild(t.dom.elGridRectMarkerMask)}},{key:"_drawGridLines",value:function(e){var t=e.i,i=e.x1,a=e.y1,n=e.x2,r=e.y2,o=e.xCount,s=e.parent,l=this.w;if(!(0===t&&l.globals.skipFirstTimelinelabel||t===o-1&&l.globals.skipLastTimelinelabel&&!l.config.xaxis.labels.formatter||"radar"===l.config.chart.type)){l.config.grid.xaxis.lines.show&&this._drawGridLine({i:t,x1:i,y1:a,x2:n,y2:r,xCount:o,parent:s});var c=0;if(l.globals.hasGroups&&"between"===l.config.xaxis.tickPlacement){var u=l.globals.groups;if(u){for(var h=0,d=0;h<t&&d<u.length;d++)h+=u[d].cols;h===t&&(c=.6*l.globals.xAxisLabelsHeight)}}new G(this.ctx).drawXaxisTicks(i,c,l.globals.dom.elGraphical)}}},{key:"_drawGridLine",value:function(e){var t=e.i,i=e.x1,a=e.y1,n=e.x2,r=e.y2,o=e.xCount,s=e.parent,l=this.w,c=!1,u=s.node.classList.contains("apexcharts-gridlines-horizontal"),h=l.config.grid.strokeDashArray,d=l.globals.barPadForNumericAxis;(0===a&&0===r||0===i&&0===n)&&(c=!0),a===l.globals.gridHeight&&r===l.globals.gridHeight&&(c=!0),!l.globals.isBarHorizontal||0!==t&&t!==o-1||(c=!0);var f=new w(this).drawLine(i-(u?d:0),a,n+(u?d:0),r,l.config.grid.borderColor,h);f.node.classList.add("apexcharts-gridline"),c?this.elGridBorders.add(f):s.add(f)}},{key:"_drawGridBandRect",value:function(e){var t=e.c,i=e.x1,a=e.y1,n=e.x2,r=e.y2,o=e.type,s=this.w,l=new w(this.ctx),c=s.globals.barPadForNumericAxis;if("column"!==o||"datetime"!==s.config.xaxis.type){var u=s.config.grid[o].colors[t],h=l.drawRect(i-("row"===o?c:0),a,n+("row"===o?2*c:0),r,0,u,s.config.grid[o].opacity);this.elg.add(h),h.attr("clip-path","url(#gridRectMask".concat(s.globals.cuid,")")),h.node.classList.add("apexcharts-grid-".concat(o))}}},{key:"_drawXYLines",value:function(e){var t=this,i=e.xCount,a=e.tickAmount,n=this.w;if(n.config.grid.xaxis.lines.show||n.config.xaxis.axisTicks.show){var r,o=n.globals.padHorizontal,s=n.globals.gridHeight;n.globals.timescaleLabels.length?function(e){for(var a=e.xC,n=e.x1,r=e.y1,o=e.x2,s=e.y2,l=0;l<a;l++)n=t.xaxisLabels[l].position,o=t.xaxisLabels[l].position,t._drawGridLines({i:l,x1:n,y1:r,x2:o,y2:s,xCount:i,parent:t.elgridLinesV})}({xC:i,x1:o,y1:0,x2:r,y2:s}):(n.globals.isXNumeric&&(i=n.globals.xAxisScale.result.length),n.config.xaxis.convertedCatToNumeric&&(i=n.globals.xaxisLabelsCount),function(e){var a=e.xC,r=e.x1,o=e.y1,s=e.x2,l=e.y2;if(void 0!==n.config.xaxis.tickAmount&&"dataPoints"!==n.config.xaxis.tickAmount&&"on"===n.config.xaxis.tickPlacement)n.globals.dom.baseEl.querySelectorAll(".apexcharts-text.apexcharts-xaxis-label tspan:not(:empty)").forEach((function(e,a){var n=e.getBBox();t._drawGridLines({i:a,x1:n.x+n.width/2,y1:o,x2:n.x+n.width/2,y2:l,xCount:i,parent:t.elgridLinesV})}));else for(var c=0;c<a+(n.globals.isXNumeric?0:1);c++)0===c&&1===a&&1===n.globals.dataPoints&&(s=r=n.globals.gridWidth/2),t._drawGridLines({i:c,x1:r,y1:o,x2:s,y2:l,xCount:i,parent:t.elgridLinesV}),s=r+=n.globals.gridWidth/(n.globals.isXNumeric?a-1:a)}({xC:i,x1:o,y1:0,x2:r,y2:s}))}if(n.config.grid.yaxis.lines.show){var l=0,c=0,u=n.globals.gridWidth,h=a+1;this.isRangeBar&&(h=n.globals.labels.length);for(var d=0;d<h+(this.isRangeBar?1:0);d++)this._drawGridLine({i:d,xCount:h+(this.isRangeBar?1:0),x1:0,y1:l,x2:u,y2:c,parent:this.elgridLinesH}),c=l+=n.globals.gridHeight/(this.isRangeBar?h:a)}}},{key:"_drawInvertedXYLines",value:function(e){var t=e.xCount,i=this.w;if(i.config.grid.xaxis.lines.show||i.config.xaxis.axisTicks.show)for(var a,n=i.globals.padHorizontal,r=i.globals.gridHeight,o=0;o<t+1;o++)i.config.grid.xaxis.lines.show&&this._drawGridLine({i:o,xCount:t+1,x1:n,y1:0,x2:a,y2:r,parent:this.elgridLinesV}),new G(this.ctx).drawXaxisTicks(n,0,i.globals.dom.elGraphical),a=n=n+i.globals.gridWidth/t+.3;if(i.config.grid.yaxis.lines.show)for(var s=0,l=0,c=i.globals.gridWidth,u=0;u<i.globals.dataPoints+1;u++)this._drawGridLine({i:u,xCount:i.globals.dataPoints+1,x1:0,y1:s,x2:c,y2:l,parent:this.elgridLinesH}),l=s+=i.globals.gridHeight/i.globals.dataPoints}},{key:"renderGrid",value:function(){var e=this.w,t=new w(this.ctx);this.elg=t.group({class:"apexcharts-grid"}),this.elgridLinesH=t.group({class:"apexcharts-gridlines-horizontal"}),this.elgridLinesV=t.group({class:"apexcharts-gridlines-vertical"}),this.elGridBorders=t.group({class:"apexcharts-grid-borders"}),this.elg.add(this.elgridLinesH),this.elg.add(this.elgridLinesV),e.config.grid.show||(this.elgridLinesV.hide(),this.elgridLinesH.hide(),this.elGridBorders.hide());for(var i,a=e.globals.yAxisScale.length?e.globals.yAxisScale[0].result.length-1:5,n=0;n<e.globals.series.length&&(void 0!==e.globals.yAxisScale[n]&&(a=e.globals.yAxisScale[n].result.length-1),!(a>2));n++);return!e.globals.isBarHorizontal||this.isRangeBar?(i=this.xaxisLabels.length,this.isRangeBar&&(a=e.globals.labels.length,e.config.xaxis.tickAmount&&e.config.xaxis.labels.formatter&&(i=e.config.xaxis.tickAmount)),this._drawXYLines({xCount:i,tickAmount:a})):(i=a,a=e.globals.xTickAmount,this._drawInvertedXYLines({xCount:i,tickAmount:a})),this.drawGridBands(i,a),{el:this.elg,elGridBorders:this.elGridBorders,xAxisTickWidth:e.globals.gridWidth/i}}},{key:"drawGridBands",value:function(e,t){var i=this.w;if(void 0!==i.config.grid.row.colors&&i.config.grid.row.colors.length>0)for(var a=0,n=i.globals.gridHeight/t,r=i.globals.gridWidth,o=0,s=0;o<t;o++,s++)s>=i.config.grid.row.colors.length&&(s=0),this._drawGridBandRect({c:s,x1:0,y1:a,x2:r,y2:n,type:"row"}),a+=i.globals.gridHeight/t;if(void 0!==i.config.grid.column.colors&&i.config.grid.column.colors.length>0)for(var l=i.globals.isBarHorizontal||"category"!==i.config.xaxis.type&&!i.config.xaxis.convertedCatToNumeric?e:e-1,c=i.globals.padHorizontal,u=i.globals.padHorizontal+i.globals.gridWidth/l,h=i.globals.gridHeight,d=0,f=0;d<e;d++,f++)f>=i.config.grid.column.colors.length&&(f=0),this._drawGridBandRect({c:f,x1:c,y1:0,x2:u,y2:h,type:"column"}),c+=i.globals.gridWidth/l}}]),e}(),Z=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"niceScale",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4?arguments[4]:void 0,r=this.w,o=Math.abs(t-e);if("dataPoints"===(i=this._adjustTicksForSmallRange(i,a,o))&&(i=r.globals.dataPoints-1),e===Number.MIN_VALUE&&0===t||!x.isNumber(e)&&!x.isNumber(t)||e===Number.MIN_VALUE&&t===-Number.MAX_VALUE){e=0,t=i;var s=this.linearScale(e,t,i);return s}e>t?(console.warn("axis.min cannot be greater than axis.max"),t=e+.1):e===t&&(e=0===e?0:e-.5,t=0===t?2:t+.5);var l=[];o<1&&n&&("candlestick"===r.config.chart.type||"candlestick"===r.config.series[a].type||"boxPlot"===r.config.chart.type||"boxPlot"===r.config.series[a].type||r.globals.isRangeData)&&(t*=1.01);var c=i+1;c<2?c=2:c>2&&(c-=2);var u=o/c,h=Math.floor(x.log10(u)),d=Math.pow(10,h),f=Math.round(u/d);f<1&&(f=1);var p=f*d,m=p*Math.floor(e/p),g=p*Math.ceil(t/p),v=m;if(n&&o>2){for(;l.push(v),!((v+=p)>g););return{result:l,niceMin:l[0],niceMax:l[l.length-1]}}var y=e;(l=[]).push(y);for(var b=Math.abs(t-e)/i,_=0;_<=i;_++)y+=b,l.push(y);return l[l.length-2]>=t&&l.pop(),{result:l,niceMin:l[0],niceMax:l[l.length-1]}}},{key:"linearScale",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,a=arguments.length>3?arguments[3]:void 0,n=Math.abs(t-e);"dataPoints"===(i=this._adjustTicksForSmallRange(i,a,n))&&(i=this.w.globals.dataPoints-1);var r=n/i;i===Number.MAX_VALUE&&(i=10,r=1);for(var o=[],s=e;i>=0;)o.push(s),s+=r,i-=1;return{result:o,niceMin:o[0],niceMax:o[o.length-1]}}},{key:"logarithmicScaleNice",value:function(e,t,i){t<=0&&(t=Math.max(e,i)),e<=0&&(e=Math.min(t,i));for(var a=[],n=Math.ceil(Math.log(t)/Math.log(i)+1),r=Math.floor(Math.log(e)/Math.log(i));r<n;r++)a.push(Math.pow(i,r));return{result:a,niceMin:a[0],niceMax:a[a.length-1]}}},{key:"logarithmicScale",value:function(e,t,i){t<=0&&(t=Math.max(e,i)),e<=0&&(e=Math.min(t,i));for(var a=[],n=Math.log(t)/Math.log(i),r=Math.log(e)/Math.log(i),o=n-r,s=Math.round(o),l=o/s,c=0,u=r;c<s;c++,u+=l)a.push(Math.pow(i,u));return a.push(Math.pow(i,n)),{result:a,niceMin:e,niceMax:t}}},{key:"_adjustTicksForSmallRange",value:function(e,t,i){var a=e;if(void 0!==t&&this.w.config.yaxis[t].labels.formatter&&void 0===this.w.config.yaxis[t].tickAmount){var n=this.w.config.yaxis[t].labels.formatter(1);x.isNumber(Number(n))&&!x.isFloat(n)&&(a=Math.ceil(i))}return a<e?a:e}},{key:"setYScaleForIndex",value:function(e,t,i){var a=this.w.globals,n=this.w.config,r=a.isBarHorizontal?n.xaxis:n.yaxis[e];void 0===a.yAxisScale[e]&&(a.yAxisScale[e]=[]);var o=Math.abs(i-t);if(r.logarithmic&&o<=5&&(a.invalidLogScale=!0),r.logarithmic&&o>5)a.allSeriesCollapsed=!1,a.yAxisScale[e]=this.logarithmicScale(t,i,r.logBase),a.yAxisScale[e]=r.forceNiceScale?this.logarithmicScaleNice(t,i,r.logBase):this.logarithmicScale(t,i,r.logBase);else if(i!==-Number.MAX_VALUE&&x.isNumber(i))if(a.allSeriesCollapsed=!1,void 0===r.min&&void 0===r.max||r.forceNiceScale){var s=void 0===n.yaxis[e].max&&void 0===n.yaxis[e].min||n.yaxis[e].forceNiceScale;a.yAxisScale[e]=this.niceScale(t,i,r.tickAmount?r.tickAmount:o<5&&o>1?o+1:5,e,s)}else a.yAxisScale[e]=this.linearScale(t,i,r.tickAmount,e);else a.yAxisScale[e]=this.linearScale(0,5,5)}},{key:"setXScale",value:function(e,t){var i=this.w,a=i.globals,n=i.config.xaxis,r=Math.abs(t-e);return t!==-Number.MAX_VALUE&&x.isNumber(t)?a.xAxisScale=this.linearScale(e,t,n.tickAmount?n.tickAmount:r<5&&r>1?r+1:5,0):a.xAxisScale=this.linearScale(0,5,5),a.xAxisScale}},{key:"setMultipleYScales",value:function(){var e=this,t=this.w.globals,i=this.w.config,a=t.minYArr.concat([]),n=t.maxYArr.concat([]),r=[];i.yaxis.forEach((function(t,o){var s=o;i.series.forEach((function(e,i){e.name===t.seriesName&&(s=i,o!==i?r.push({index:i,similarIndex:o,alreadyExists:!0}):r.push({index:i}))}));var l=a[s],c=n[s];e.setYScaleForIndex(o,l,c)})),this.sameScaleInMultipleAxes(a,n,r)}},{key:"sameScaleInMultipleAxes",value:function(e,t,i){var a=this,n=this.w.config,r=this.w.globals,o=[];i.forEach((function(e){e.alreadyExists&&(void 0===o[e.index]&&(o[e.index]=[]),o[e.index].push(e.index),o[e.index].push(e.similarIndex))})),r.yAxisSameScaleIndices=o,o.forEach((function(e,t){o.forEach((function(i,a){var n,r;t!==a&&(n=e,r=i,n.filter((function(e){return-1!==r.indexOf(e)}))).length>0&&(o[t]=o[t].concat(o[a]))}))}));var s=o.map((function(e){return e.filter((function(t,i){return e.indexOf(t)===i}))})).map((function(e){return e.sort()}));o=o.filter((function(e){return!!e}));var l=s.slice(),c=l.map((function(e){return JSON.stringify(e)}));l=l.filter((function(e,t){return c.indexOf(JSON.stringify(e))===t}));var u=[],h=[];e.forEach((function(e,i){l.forEach((function(a,n){a.indexOf(i)>-1&&(void 0===u[n]&&(u[n]=[],h[n]=[]),u[n].push({key:i,value:e}),h[n].push({key:i,value:t[i]}))}))}));var d=Array.apply(null,Array(l.length)).map(Number.prototype.valueOf,Number.MIN_VALUE),f=Array.apply(null,Array(l.length)).map(Number.prototype.valueOf,-Number.MAX_VALUE);u.forEach((function(e,t){e.forEach((function(e,i){d[t]=Math.min(e.value,d[t])}))})),h.forEach((function(e,t){e.forEach((function(e,i){f[t]=Math.max(e.value,f[t])}))})),e.forEach((function(e,t){h.forEach((function(e,i){var o=d[i],s=f[i];n.chart.stacked&&(s=0,e.forEach((function(e,t){e.value!==-Number.MAX_VALUE&&(s+=e.value),o!==Number.MIN_VALUE&&(o+=u[i][t].value)}))),e.forEach((function(i,l){e[l].key===t&&(void 0!==n.yaxis[t].min&&(o="function"==typeof n.yaxis[t].min?n.yaxis[t].min(r.minY):n.yaxis[t].min),void 0!==n.yaxis[t].max&&(s="function"==typeof n.yaxis[t].max?n.yaxis[t].max(r.maxY):n.yaxis[t].max),a.setYScaleForIndex(t,o,s))}))}))}))}},{key:"autoScaleY",value:function(e,t,i){e||(e=this);var a=e.w;if(a.globals.isMultipleYAxis||a.globals.collapsedSeries.length)return console.warn("autoScaleYaxis is not supported in a multi-yaxis chart."),t;var n=a.globals.seriesX[0],r=a.config.chart.stacked;return t.forEach((function(e,o){for(var s=0,l=0;l<n.length;l++)if(n[l]>=i.xaxis.min){s=l;break}var c,u,h=a.globals.minYArr[o],d=a.globals.maxYArr[o],f=a.globals.stackedSeriesTotals;a.globals.series.forEach((function(o,l){var p=o[s];r?(p=f[s],c=u=p,f.forEach((function(e,t){n[t]<=i.xaxis.max&&n[t]>=i.xaxis.min&&(e>u&&null!==e&&(u=e),o[t]<c&&null!==o[t]&&(c=o[t]))}))):(c=u=p,o.forEach((function(e,t){if(n[t]<=i.xaxis.max&&n[t]>=i.xaxis.min){var r=e,o=e;a.globals.series.forEach((function(i,a){null!==e&&(r=Math.min(i[t],r),o=Math.max(i[t],o))})),o>u&&null!==o&&(u=o),r<c&&null!==r&&(c=r)}}))),void 0===c&&void 0===u&&(c=h,u=d),u*=u<0?.9:1.1,0===(c*=c<0?1.1:.9)&&0===u&&(c=-1,u=1),u<0&&u<d&&(u=d),c<0&&c>h&&(c=h),t.length>1?(t[l].min=void 0===e.min?c:e.min,t[l].max=void 0===e.max?u:e.max):(t[0].min=void 0===e.min?c:e.min,t[0].max=void 0===e.max?u:e.max)}))})),t}}]),e}(),K=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.scales=new Z(t)}return c(e,[{key:"init",value:function(){this.setYRange(),this.setXRange(),this.setZRange()}},{key:"getMinYMaxY",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-Number.MAX_VALUE,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=this.w.config,r=this.w.globals,o=-Number.MAX_VALUE,s=Number.MIN_VALUE;null===a&&(a=e+1);var l=r.series,c=l,u=l;"candlestick"===n.chart.type?(c=r.seriesCandleL,u=r.seriesCandleH):"boxPlot"===n.chart.type?(c=r.seriesCandleO,u=r.seriesCandleC):r.isRangeData&&(c=r.seriesRangeStart,u=r.seriesRangeEnd);for(var h=e;h<a;h++){r.dataPoints=Math.max(r.dataPoints,l[h].length),r.categoryLabels.length&&(r.dataPoints=r.categoryLabels.filter((function(e){return void 0!==e})).length);for(var d=0;d<r.series[h].length;d++){var f=l[h][d];null!==f&&x.isNumber(f)?(void 0!==u[h][d]&&(o=Math.max(o,u[h][d]),t=Math.min(t,u[h][d])),void 0!==c[h][d]&&(t=Math.min(t,c[h][d]),i=Math.max(i,c[h][d])),"candlestick"!==this.w.config.chart.type&&"boxPlot"!==this.w.config.chart.type&&"rangeArea"===this.w.config.chart.type&&"rangeBar"===this.w.config.chart.type||("candlestick"!==this.w.config.chart.type&&"boxPlot"!==this.w.config.chart.type||void 0!==r.seriesCandleC[h][d]&&(o=Math.max(o,r.seriesCandleO[h][d]),o=Math.max(o,r.seriesCandleH[h][d]),o=Math.max(o,r.seriesCandleL[h][d]),o=Math.max(o,r.seriesCandleC[h][d]),"boxPlot"===this.w.config.chart.type&&(o=Math.max(o,r.seriesCandleM[h][d]))),!n.series[h].type||"candlestick"===n.series[h].type&&"boxPlot"===n.series[h].type&&"rangeArea"===n.series[h].type&&"rangeBar"===n.series[h].type||(o=Math.max(o,r.series[h][d]),t=Math.min(t,r.series[h][d])),i=o),r.seriesGoals[h]&&r.seriesGoals[h][d]&&Array.isArray(r.seriesGoals[h][d])&&r.seriesGoals[h][d].forEach((function(e){s!==Number.MIN_VALUE&&(s=Math.min(s,e.value),t=s),o=Math.max(o,e.value),i=o})),x.isFloat(f)&&(f=x.noExponents(f),r.yValueDecimal=Math.max(r.yValueDecimal,f.toString().split(".")[1].length)),s>c[h][d]&&c[h][d]<0&&(s=c[h][d])):r.hasNullValues=!0}}return"rangeBar"===n.chart.type&&r.seriesRangeStart.length&&r.isBarHorizontal&&(s=t),"bar"===n.chart.type&&(s<0&&o<0&&(o=0),s===Number.MIN_VALUE&&(s=0)),{minY:s,maxY:o,lowestY:t,highestY:i}}},{key:"setYRange",value:function(){var e=this.w.globals,t=this.w.config;e.maxY=-Number.MAX_VALUE,e.minY=Number.MIN_VALUE;var i=Number.MAX_VALUE;if(e.isMultipleYAxis)for(var a=0;a<e.series.length;a++){var n=this.getMinYMaxY(a,i,null,a+1);e.minYArr.push(n.minY),e.maxYArr.push(n.maxY),i=n.lowestY}var r=this.getMinYMaxY(0,i,null,e.series.length);if(e.minY=r.minY,e.maxY=r.maxY,i=r.lowestY,t.chart.stacked&&this._setStackedMinMax(),("line"===t.chart.type||"area"===t.chart.type||"candlestick"===t.chart.type||"boxPlot"===t.chart.type||"rangeBar"===t.chart.type&&!e.isBarHorizontal)&&e.minY===Number.MIN_VALUE&&i!==-Number.MAX_VALUE&&i!==e.maxY){var o=e.maxY-i;(i>=0&&i<=10||void 0!==t.yaxis[0].min||void 0!==t.yaxis[0].max)&&(o=0),e.minY=i-5*o/100,i>0&&e.minY<0&&(e.minY=0),e.maxY=e.maxY+5*o/100}return t.yaxis.forEach((function(t,i){void 0!==t.max&&("number"==typeof t.max?e.maxYArr[i]=t.max:"function"==typeof t.max&&(e.maxYArr[i]=t.max(e.isMultipleYAxis?e.maxYArr[i]:e.maxY)),e.maxY=e.maxYArr[i]),void 0!==t.min&&("number"==typeof t.min?e.minYArr[i]=t.min:"function"==typeof t.min&&(e.minYArr[i]=t.min(e.isMultipleYAxis?e.minYArr[i]===Number.MIN_VALUE?0:e.minYArr[i]:e.minY)),e.minY=e.minYArr[i])})),e.isBarHorizontal&&["min","max"].forEach((function(i){void 0!==t.xaxis[i]&&"number"==typeof t.xaxis[i]&&("min"===i?e.minY=t.xaxis[i]:e.maxY=t.xaxis[i])})),e.isMultipleYAxis?(this.scales.setMultipleYScales(),e.minY=i,e.yAxisScale.forEach((function(t,i){e.minYArr[i]=t.niceMin,e.maxYArr[i]=t.niceMax}))):(this.scales.setYScaleForIndex(0,e.minY,e.maxY),e.minY=e.yAxisScale[0].niceMin,e.maxY=e.yAxisScale[0].niceMax,e.minYArr[0]=e.yAxisScale[0].niceMin,e.maxYArr[0]=e.yAxisScale[0].niceMax),{minY:e.minY,maxY:e.maxY,minYArr:e.minYArr,maxYArr:e.maxYArr,yAxisScale:e.yAxisScale}}},{key:"setXRange",value:function(){var e=this.w.globals,t=this.w.config,i="numeric"===t.xaxis.type||"datetime"===t.xaxis.type||"category"===t.xaxis.type&&!e.noLabelsProvided||e.noLabelsProvided||e.isXNumeric;if(e.isXNumeric&&function(){for(var t=0;t<e.series.length;t++)if(e.labels[t])for(var i=0;i<e.labels[t].length;i++)null!==e.labels[t][i]&&x.isNumber(e.labels[t][i])&&(e.maxX=Math.max(e.maxX,e.labels[t][i]),e.initialMaxX=Math.max(e.maxX,e.labels[t][i]),e.minX=Math.min(e.minX,e.labels[t][i]),e.initialMinX=Math.min(e.minX,e.labels[t][i]))}(),e.noLabelsProvided&&0===t.xaxis.categories.length&&(e.maxX=e.labels[e.labels.length-1],e.initialMaxX=e.labels[e.labels.length-1],e.minX=1,e.initialMinX=1),e.isXNumeric||e.noLabelsProvided||e.dataFormatXNumeric){var a;if(void 0===t.xaxis.tickAmount?(a=Math.round(e.svgWidth/150),"numeric"===t.xaxis.type&&e.dataPoints<30&&(a=e.dataPoints-1),a>e.dataPoints&&0!==e.dataPoints&&(a=e.dataPoints-1)):"dataPoints"===t.xaxis.tickAmount?(e.series.length>1&&(a=e.series[e.maxValsInArrayIndex].length-1),e.isXNumeric&&(a=e.maxX-e.minX-1)):a=t.xaxis.tickAmount,e.xTickAmount=a,void 0!==t.xaxis.max&&"number"==typeof t.xaxis.max&&(e.maxX=t.xaxis.max),void 0!==t.xaxis.min&&"number"==typeof t.xaxis.min&&(e.minX=t.xaxis.min),void 0!==t.xaxis.range&&(e.minX=e.maxX-t.xaxis.range),e.minX!==Number.MAX_VALUE&&e.maxX!==-Number.MAX_VALUE)if(t.xaxis.convertedCatToNumeric&&!e.dataFormatXNumeric){for(var n=[],r=e.minX-1;r<e.maxX;r++)n.push(r+1);e.xAxisScale={result:n,niceMin:n[0],niceMax:n[n.length-1]}}else e.xAxisScale=this.scales.setXScale(e.minX,e.maxX);else e.xAxisScale=this.scales.linearScale(1,a,a),e.noLabelsProvided&&e.labels.length>0&&(e.xAxisScale=this.scales.linearScale(1,e.labels.length,a-1),e.seriesX=e.labels.slice());i&&(e.labels=e.xAxisScale.result.slice())}return e.isBarHorizontal&&e.labels.length&&(e.xTickAmount=e.labels.length),this._handleSingleDataPoint(),this._getMinXDiff(),{minX:e.minX,maxX:e.maxX}}},{key:"setZRange",value:function(){var e=this.w.globals;if(e.isDataXYZ)for(var t=0;t<e.series.length;t++)if(void 0!==e.seriesZ[t])for(var i=0;i<e.seriesZ[t].length;i++)null!==e.seriesZ[t][i]&&x.isNumber(e.seriesZ[t][i])&&(e.maxZ=Math.max(e.maxZ,e.seriesZ[t][i]),e.minZ=Math.min(e.minZ,e.seriesZ[t][i]))}},{key:"_handleSingleDataPoint",value:function(){var e=this.w.globals,t=this.w.config;if(e.minX===e.maxX){var i=new I(this.ctx);if("datetime"===t.xaxis.type){var a=i.getDate(e.minX);t.xaxis.labels.datetimeUTC?a.setUTCDate(a.getUTCDate()-2):a.setDate(a.getDate()-2),e.minX=new Date(a).getTime();var n=i.getDate(e.maxX);t.xaxis.labels.datetimeUTC?n.setUTCDate(n.getUTCDate()+2):n.setDate(n.getDate()+2),e.maxX=new Date(n).getTime()}else("numeric"===t.xaxis.type||"category"===t.xaxis.type&&!e.noLabelsProvided)&&(e.minX=e.minX-2,e.initialMinX=e.minX,e.maxX=e.maxX+2,e.initialMaxX=e.maxX)}}},{key:"_getMinXDiff",value:function(){var e=this.w.globals;e.isXNumeric&&e.seriesX.forEach((function(t,i){1===t.length&&t.push(e.seriesX[e.maxValsInArrayIndex][e.seriesX[e.maxValsInArrayIndex].length-1]);var a=t.slice();a.sort((function(e,t){return e-t})),a.forEach((function(t,i){if(i>0){var n=t-a[i-1];n>0&&(e.minXDiff=Math.min(n,e.minXDiff))}})),1!==e.dataPoints&&e.minXDiff!==Number.MAX_VALUE||(e.minXDiff=.5)}))}},{key:"_setStackedMinMax",value:function(){var e=this.w.globals,t=[],i=[];if(e.series.length)for(var a=0;a<e.series[e.maxValsInArrayIndex].length;a++)for(var n=0,r=0,o=0;o<e.series.length;o++)null!==e.series[o][a]&&x.isNumber(e.series[o][a])&&(e.series[o][a]>0?n=n+parseFloat(e.series[o][a])+1e-4:r+=parseFloat(e.series[o][a])),o===e.series.length-1&&(t.push(n),i.push(r));for(var s=0;s<t.length;s++)e.maxY=Math.max(e.maxY,t[s]),e.minY=Math.min(e.minY,i[s])}}]),e}(),J=function(){function e(t,i){s(this,e),this.ctx=t,this.elgrid=i,this.w=t.w;var a=this.w;this.xaxisFontSize=a.config.xaxis.labels.style.fontSize,this.axisFontFamily=a.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=a.config.xaxis.labels.style.colors,this.isCategoryBarHorizontal="bar"===a.config.chart.type&&a.config.plotOptions.bar.horizontal,this.xAxisoffX=0,"bottom"===a.config.xaxis.position&&(this.xAxisoffX=a.globals.gridHeight),this.drawnLabels=[],this.axesUtils=new U(t)}return c(e,[{key:"drawYaxis",value:function(e){var t=this,i=this.w,a=new w(this.ctx),n=i.config.yaxis[e].labels.style,r=n.fontSize,o=n.fontFamily,s=n.fontWeight,l=a.group({class:"apexcharts-yaxis",rel:e,transform:"translate("+i.globals.translateYAxisX[e]+", 0)"});if(this.axesUtils.isYAxisHidden(e))return l;var c=a.group({class:"apexcharts-yaxis-texts-g"});l.add(c);var u=i.globals.yAxisScale[e].result.length-1,h=i.globals.gridHeight/u,d=i.globals.translateY,f=i.globals.yLabelFormatters[e],p=i.globals.yAxisScale[e].result.slice();p=this.axesUtils.checkForReversedLabels(e,p);var m="";if(i.config.yaxis[e].labels.show)for(var g=function(l){var g=p[l];g=f(g,l,i);var v=i.config.yaxis[e].labels.padding;i.config.yaxis[e].opposite&&0!==i.config.yaxis.length&&(v*=-1);var y=t.axesUtils.getYAxisForeColor(n.colors,e),x=a.drawText({x:v,y:d+u/10+i.config.yaxis[e].labels.offsetY+1,text:g,textAnchor:i.config.yaxis[e].opposite?"start":"end",fontSize:r,fontFamily:o,fontWeight:s,maxWidth:i.config.yaxis[e].labels.maxWidth,foreColor:Array.isArray(y)?y[l]:y,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+n.cssClass});l===u&&(m=x),c.add(x);var b=document.createElementNS(i.globals.SVGNS,"title");if(b.textContent=Array.isArray(g)?g.join(" "):g,x.node.appendChild(b),0!==i.config.yaxis[e].labels.rotate){var _=a.rotateAroundCenter(m.node),w=a.rotateAroundCenter(x.node);x.node.setAttribute("transform","rotate(".concat(i.config.yaxis[e].labels.rotate," ").concat(_.x," ").concat(w.y,")"))}d+=h},v=u;v>=0;v--)g(v);if(void 0!==i.config.yaxis[e].title.text){var y=a.group({class:"apexcharts-yaxis-title"}),x=0;i.config.yaxis[e].opposite&&(x=i.globals.translateYAxisX[e]);var b=a.drawText({x:x,y:i.globals.gridHeight/2+i.globals.translateY+i.config.yaxis[e].title.offsetY,text:i.config.yaxis[e].title.text,textAnchor:"end",foreColor:i.config.yaxis[e].title.style.color,fontSize:i.config.yaxis[e].title.style.fontSize,fontWeight:i.config.yaxis[e].title.style.fontWeight,fontFamily:i.config.yaxis[e].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+i.config.yaxis[e].title.style.cssClass});y.add(b),l.add(y)}var _=i.config.yaxis[e].axisBorder,k=31+_.offsetX;if(i.config.yaxis[e].opposite&&(k=-31-_.offsetX),_.show){var S=a.drawLine(k,i.globals.translateY+_.offsetY-2,k,i.globals.gridHeight+i.globals.translateY+_.offsetY+2,_.color,0,_.width);l.add(S)}return i.config.yaxis[e].axisTicks.show&&this.axesUtils.drawYAxisTicks(k,u,_,i.config.yaxis[e].axisTicks,e,h,l),l}},{key:"drawYaxisInversed",value:function(e){var t=this.w,i=new w(this.ctx),a=i.group({class:"apexcharts-xaxis apexcharts-yaxis-inversed"}),n=i.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(t.globals.translateXAxisX,", ").concat(t.globals.translateXAxisY,")")});a.add(n);var r=t.globals.yAxisScale[e].result.length-1,o=t.globals.gridWidth/r+.1,s=o+t.config.xaxis.labels.offsetX,l=t.globals.xLabelFormatter,c=t.globals.yAxisScale[e].result.slice(),u=t.globals.timescaleLabels;u.length>0&&(this.xaxisLabels=u.slice(),r=(c=u.slice()).length),c=this.axesUtils.checkForReversedLabels(e,c);var h=u.length;if(t.config.xaxis.labels.show)for(var d=h?0:r;h?d<h:d>=0;h?d++:d--){var f=c[d];f=l(f,d,t);var p=t.globals.gridWidth+t.globals.padHorizontal-(s-o+t.config.xaxis.labels.offsetX);if(u.length){var m=this.axesUtils.getLabel(c,u,p,d,this.drawnLabels,this.xaxisFontSize);p=m.x,f=m.text,this.drawnLabels.push(m.text),0===d&&t.globals.skipFirstTimelinelabel&&(f=""),d===c.length-1&&t.globals.skipLastTimelinelabel&&(f="")}var g=i.drawText({x:p,y:this.xAxisoffX+t.config.xaxis.labels.offsetY+30-("top"===t.config.xaxis.position?t.globals.xAxisHeight+t.config.xaxis.axisTicks.height-2:0),text:f,textAnchor:"middle",foreColor:Array.isArray(this.xaxisForeColors)?this.xaxisForeColors[e]:this.xaxisForeColors,fontSize:this.xaxisFontSize,fontFamily:this.xaxisFontFamily,fontWeight:t.config.xaxis.labels.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-xaxis-label "+t.config.xaxis.labels.style.cssClass});n.add(g),g.tspan(f);var v=document.createElementNS(t.globals.SVGNS,"title");v.textContent=f,g.node.appendChild(v),s+=o}return this.inversedYAxisTitleText(a),this.inversedYAxisBorder(a),a}},{key:"inversedYAxisBorder",value:function(e){var t=this.w,i=new w(this.ctx),a=t.config.xaxis.axisBorder;if(a.show){var n=0;"bar"===t.config.chart.type&&t.globals.isXNumeric&&(n-=15);var r=i.drawLine(t.globals.padHorizontal+n+a.offsetX,this.xAxisoffX,t.globals.gridWidth,this.xAxisoffX,a.color,0,a.height);this.elgrid&&this.elgrid.elGridBorders?this.elgrid.elGridBorders.add(r):e.add(r)}}},{key:"inversedYAxisTitleText",value:function(e){var t=this.w,i=new w(this.ctx);if(void 0!==t.config.xaxis.title.text){var a=i.group({class:"apexcharts-xaxis-title apexcharts-yaxis-title-inversed"}),n=i.drawText({x:t.globals.gridWidth/2+t.config.xaxis.title.offsetX,y:this.xAxisoffX+parseFloat(this.xaxisFontSize)+parseFloat(t.config.xaxis.title.style.fontSize)+t.config.xaxis.title.offsetY+20,text:t.config.xaxis.title.text,textAnchor:"middle",fontSize:t.config.xaxis.title.style.fontSize,fontFamily:t.config.xaxis.title.style.fontFamily,fontWeight:t.config.xaxis.title.style.fontWeight,foreColor:t.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+t.config.xaxis.title.style.cssClass});a.add(n),e.add(a)}}},{key:"yAxisTitleRotate",value:function(e,t){var i=this.w,a=new w(this.ctx),n={width:0,height:0},r={width:0,height:0},o=i.globals.dom.baseEl.querySelector(" .apexcharts-yaxis[rel='".concat(e,"'] .apexcharts-yaxis-texts-g"));null!==o&&(n=o.getBoundingClientRect());var s=i.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(e,"'] .apexcharts-yaxis-title text"));if(null!==s&&(r=s.getBoundingClientRect()),null!==s){var l=this.xPaddingForYAxisTitle(e,n,r,t);s.setAttribute("x",l.xPos-(t?10:0))}if(null!==s){var c=a.rotateAroundCenter(s);s.setAttribute("transform","rotate(".concat(t?-1*i.config.yaxis[e].title.rotate:i.config.yaxis[e].title.rotate," ").concat(c.x," ").concat(c.y,")"))}}},{key:"xPaddingForYAxisTitle",value:function(e,t,i,a){var n=this.w,r=0,o=0,s=10;return void 0===n.config.yaxis[e].title.text||e<0?{xPos:o,padd:0}:(a?(o=t.width+n.config.yaxis[e].title.offsetX+i.width/2+s/2,0===(r+=1)&&(o-=s/2)):(o=-1*t.width+n.config.yaxis[e].title.offsetX+s/2+i.width/2,n.globals.isBarHorizontal&&(s=25,o=-1*t.width-n.config.yaxis[e].title.offsetX-s)),{xPos:o,padd:s})}},{key:"setYAxisXPosition",value:function(e,t){var i=this.w,a=0,n=0,r=18,o=1;i.config.yaxis.length>1&&(this.multipleYs=!0),i.config.yaxis.map((function(s,l){var c=i.globals.ignoreYAxisIndexes.indexOf(l)>-1||!s.show||s.floating||0===e[l].width,u=e[l].width+t[l].width;s.opposite?i.globals.isBarHorizontal?(n=i.globals.gridWidth+i.globals.translateX-1,i.globals.translateYAxisX[l]=n-s.labels.offsetX):(n=i.globals.gridWidth+i.globals.translateX+o,c||(o=o+u+20),i.globals.translateYAxisX[l]=n-s.labels.offsetX+20):(a=i.globals.translateX-r,c||(r=r+u+20),i.globals.translateYAxisX[l]=a+s.labels.offsetX)}))}},{key:"setYAxisTextAlignments",value:function(){var e=this.w,t=e.globals.dom.baseEl.getElementsByClassName("apexcharts-yaxis");(t=x.listToArray(t)).forEach((function(t,i){var a=e.config.yaxis[i];if(a&&void 0!==a.labels.align){var n=e.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(i,"'] .apexcharts-yaxis-texts-g")),r=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(i,"'] .apexcharts-yaxis-label"));r=x.listToArray(r);var o=n.getBoundingClientRect();"left"===a.labels.align?(r.forEach((function(e,t){e.setAttribute("text-anchor","start")})),a.opposite||n.setAttribute("transform","translate(-".concat(o.width,", 0)"))):"center"===a.labels.align?(r.forEach((function(e,t){e.setAttribute("text-anchor","middle")})),n.setAttribute("transform","translate(".concat(o.width/2*(a.opposite?1:-1),", 0)"))):"right"===a.labels.align&&(r.forEach((function(e,t){e.setAttribute("text-anchor","end")})),a.opposite&&n.setAttribute("transform","translate(".concat(o.width,", 0)")))}}))}}]),e}(),Q=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.documentEvent=x.bind(this.documentEvent,this)}return c(e,[{key:"addEventListener",value:function(e,t){var i=this.w;i.globals.events.hasOwnProperty(e)?i.globals.events[e].push(t):i.globals.events[e]=[t]}},{key:"removeEventListener",value:function(e,t){var i=this.w;if(i.globals.events.hasOwnProperty(e)){var a=i.globals.events[e].indexOf(t);-1!==a&&i.globals.events[e].splice(a,1)}}},{key:"fireEvent",value:function(e,t){var i=this.w;if(i.globals.events.hasOwnProperty(e)){t&&t.length||(t=[]);for(var a=i.globals.events[e],n=a.length,r=0;r<n;r++)a[r].apply(null,t)}}},{key:"setupEventHandlers",value:function(){var e=this,t=this.w,i=this.ctx,a=t.globals.dom.baseEl.querySelector(t.globals.chartClass);this.ctx.eventList.forEach((function(e){a.addEventListener(e,(function(e){var a=Object.assign({},t,{seriesIndex:t.globals.capturedSeriesIndex,dataPointIndex:t.globals.capturedDataPointIndex});"mousemove"===e.type||"touchmove"===e.type?"function"==typeof t.config.chart.events.mouseMove&&t.config.chart.events.mouseMove(e,i,a):"mouseleave"===e.type||"touchleave"===e.type?"function"==typeof t.config.chart.events.mouseLeave&&t.config.chart.events.mouseLeave(e,i,a):("mouseup"===e.type&&1===e.which||"touchend"===e.type)&&("function"==typeof t.config.chart.events.click&&t.config.chart.events.click(e,i,a),i.ctx.events.fireEvent("click",[e,i,a]))}),{capture:!1,passive:!0})})),this.ctx.eventList.forEach((function(i){t.globals.dom.baseEl.addEventListener(i,e.documentEvent,{passive:!0})})),this.ctx.core.setupBrushHandler()}},{key:"documentEvent",value:function(e){var t=this.w,i=e.target.className;if("click"===e.type){var a=t.globals.dom.baseEl.querySelector(".apexcharts-menu");a&&a.classList.contains("apexcharts-menu-open")&&"apexcharts-menu-icon"!==i&&a.classList.remove("apexcharts-menu-open")}t.globals.clientX="touchmove"===e.type?e.touches[0].clientX:e.clientX,t.globals.clientY="touchmove"===e.type?e.touches[0].clientY:e.clientY}}]),e}(),$=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"setCurrentLocaleValues",value:function(e){var t=this.w.config.chart.locales;window.Apex.chart&&window.Apex.chart.locales&&window.Apex.chart.locales.length>0&&(t=this.w.config.chart.locales.concat(window.Apex.chart.locales));var i=t.filter((function(t){return t.name===e}))[0];if(!i)throw new Error("Wrong locale name provided. Please make sure you set the correct locale name in options");var a=x.extend(T,i);this.w.globals.locale=a.options}}]),e}(),ee=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"drawAxis",value:function(e,t){var i,a,n=this.w.globals,r=this.w.config,o=new G(this.ctx,t),s=new J(this.ctx,t);n.axisCharts&&"radar"!==e&&(n.isBarHorizontal?(a=s.drawYaxisInversed(0),i=o.drawXaxisInversed(0),n.dom.elGraphical.add(i),n.dom.elGraphical.add(a)):(i=o.drawXaxis(),n.dom.elGraphical.add(i),r.yaxis.map((function(e,t){-1===n.ignoreYAxisIndexes.indexOf(t)&&(a=s.drawYaxis(t),n.dom.Paper.add(a))}))))}}]),e}(),te=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"drawXCrosshairs",value:function(){var e=this.w,t=new w(this.ctx),i=new _(this.ctx),a=e.config.xaxis.crosshairs.fill.gradient,n=e.config.xaxis.crosshairs.dropShadow,r=e.config.xaxis.crosshairs.fill.type,o=a.colorFrom,s=a.colorTo,l=a.opacityFrom,c=a.opacityTo,u=a.stops,h=n.enabled,d=n.left,f=n.top,p=n.blur,m=n.color,g=n.opacity,v=e.config.xaxis.crosshairs.fill.color;if(e.config.xaxis.crosshairs.show){"gradient"===r&&(v=t.drawGradient("vertical",o,s,l,c,null,u,null));var y=t.drawRect();1===e.config.xaxis.crosshairs.width&&(y=t.drawLine());var b=e.globals.gridHeight;(!x.isNumber(b)||b<0)&&(b=0);var k=e.config.xaxis.crosshairs.width;(!x.isNumber(k)||k<0)&&(k=0),y.attr({class:"apexcharts-xcrosshairs",x:0,y:0,y2:b,width:k,height:b,fill:v,filter:"none","fill-opacity":e.config.xaxis.crosshairs.opacity,stroke:e.config.xaxis.crosshairs.stroke.color,"stroke-width":e.config.xaxis.crosshairs.stroke.width,"stroke-dasharray":e.config.xaxis.crosshairs.stroke.dashArray}),h&&(y=i.dropShadow(y,{left:d,top:f,blur:p,color:m,opacity:g})),e.globals.dom.elGraphical.add(y)}}},{key:"drawYCrosshairs",value:function(){var e=this.w,t=new w(this.ctx),i=e.config.yaxis[0].crosshairs,a=e.globals.barPadForNumericAxis;if(e.config.yaxis[0].crosshairs.show){var n=t.drawLine(-a,0,e.globals.gridWidth+a,0,i.stroke.color,i.stroke.dashArray,i.stroke.width);n.attr({class:"apexcharts-ycrosshairs"}),e.globals.dom.elGraphical.add(n)}var r=t.drawLine(-a,0,e.globals.gridWidth+a,0,i.stroke.color,0,0);r.attr({class:"apexcharts-ycrosshairs-hidden"}),e.globals.dom.elGraphical.add(r)}}]),e}(),ie=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"checkResponsiveConfig",value:function(e){var t=this,i=this.w,a=i.config;if(0!==a.responsive.length){var n=a.responsive.slice();n.sort((function(e,t){return e.breakpoint>t.breakpoint?1:t.breakpoint>e.breakpoint?-1:0})).reverse();var r=new L({}),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n[0].breakpoint,o=window.innerWidth>0?window.innerWidth:screen.width;if(o>a){var s=k.extendArrayProps(r,i.globals.initialConfig,i);e=x.extend(s,e),e=x.extend(i.config,e),t.overrideResponsiveOptions(e)}else for(var l=0;l<n.length;l++)o<n[l].breakpoint&&(e=k.extendArrayProps(r,n[l].options,i),e=x.extend(i.config,e),t.overrideResponsiveOptions(e))};if(e){var s=k.extendArrayProps(r,e,i);s=x.extend(i.config,s),o(s=x.extend(s,e))}else o({})}}},{key:"overrideResponsiveOptions",value:function(e){var t=new L(e).init({responsiveOverride:!0});this.w.config=t}}]),e}(),ae=function(){function e(t){s(this,e),this.ctx=t,this.colors=[],this.w=t.w;var i=this.w;this.isColorFn=!1,this.isHeatmapDistributed="treemap"===i.config.chart.type&&i.config.plotOptions.treemap.distributed||"heatmap"===i.config.chart.type&&i.config.plotOptions.heatmap.distributed,this.isBarDistributed=i.config.plotOptions.bar.distributed&&("bar"===i.config.chart.type||"rangeBar"===i.config.chart.type)}return c(e,[{key:"init",value:function(){this.setDefaultColors()}},{key:"setDefaultColors",value:function(){var e=this,t=this.w,i=new x;if(t.globals.dom.elWrap.classList.add("apexcharts-theme-".concat(t.config.theme.mode)),void 0===t.config.colors?t.globals.colors=this.predefined():(t.globals.colors=t.config.colors,Array.isArray(t.config.colors)&&t.config.colors.length>0&&"function"==typeof t.config.colors[0]&&(t.globals.colors=t.config.series.map((function(i,a){var n=t.config.colors[a];return n||(n=t.config.colors[0]),"function"==typeof n?(e.isColorFn=!0,n({value:t.globals.axisCharts?t.globals.series[a][0]?t.globals.series[a][0]:0:t.globals.series[a],seriesIndex:a,dataPointIndex:a,w:t})):n})))),t.globals.seriesColors.map((function(e,i){e&&(t.globals.colors[i]=e)})),t.config.theme.monochrome.enabled){var a=[],n=t.globals.series.length;(this.isBarDistributed||this.isHeatmapDistributed)&&(n=t.globals.series[0].length*t.globals.series.length);for(var r=t.config.theme.monochrome.color,o=1/(n/t.config.theme.monochrome.shadeIntensity),s=t.config.theme.monochrome.shadeTo,l=0,c=0;c<n;c++){var u=void 0;"dark"===s?(u=i.shadeColor(-1*l,r),l+=o):(u=i.shadeColor(l,r),l+=o),a.push(u)}t.globals.colors=a.slice()}var h=t.globals.colors.slice();this.pushExtraColors(t.globals.colors),["fill","stroke"].forEach((function(i){void 0===t.config[i].colors?t.globals[i].colors=e.isColorFn?t.config.colors:h:t.globals[i].colors=t.config[i].colors.slice(),e.pushExtraColors(t.globals[i].colors)})),void 0===t.config.dataLabels.style.colors?t.globals.dataLabels.style.colors=h:t.globals.dataLabels.style.colors=t.config.dataLabels.style.colors.slice(),this.pushExtraColors(t.globals.dataLabels.style.colors,50),void 0===t.config.plotOptions.radar.polygons.fill.colors?t.globals.radarPolygons.fill.colors=["dark"===t.config.theme.mode?"#424242":"none"]:t.globals.radarPolygons.fill.colors=t.config.plotOptions.radar.polygons.fill.colors.slice(),this.pushExtraColors(t.globals.radarPolygons.fill.colors,20),void 0===t.config.markers.colors?t.globals.markers.colors=h:t.globals.markers.colors=t.config.markers.colors.slice(),this.pushExtraColors(t.globals.markers.colors)}},{key:"pushExtraColors",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=this.w,n=t||a.globals.series.length;if(null===i&&(i=this.isBarDistributed||this.isHeatmapDistributed||"heatmap"===a.config.chart.type&&a.config.plotOptions.heatmap.colorScale.inverse),i&&a.globals.series.length&&(n=a.globals.series[a.globals.maxValsInArrayIndex].length*a.globals.series.length),e.length<n)for(var r=n-e.length,o=0;o<r;o++)e.push(e[o])}},{key:"updateThemeOptions",value:function(e){e.chart=e.chart||{},e.tooltip=e.tooltip||{};var t=e.theme.mode||"light",i=e.theme.palette?e.theme.palette:"dark"===t?"palette4":"palette1",a=e.chart.foreColor?e.chart.foreColor:"dark"===t?"#f6f7f8":"#373d3f";return e.tooltip.theme=t,e.chart.foreColor=a,e.theme.palette=i,e}},{key:"predefined",value:function(){switch(this.w.config.theme.palette){case"palette1":default:this.colors=["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"];break;case"palette2":this.colors=["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#FF9800"];break;case"palette3":this.colors=["#33b2df","#546E7A","#d4526e","#13d8aa","#A5978B"];break;case"palette4":this.colors=["#4ecdc4","#c7f464","#81D4FA","#fd6a6a","#546E7A"];break;case"palette5":this.colors=["#2b908f","#f9a3a4","#90ee7e","#fa4443","#69d2e7"];break;case"palette6":this.colors=["#449DD1","#F86624","#EA3546","#662E9B","#C5D86D"];break;case"palette7":this.colors=["#D7263D","#1B998B","#2E294E","#F46036","#E2C044"];break;case"palette8":this.colors=["#662E9B","#F86624","#F9C80E","#EA3546","#43BCCD"];break;case"palette9":this.colors=["#5C4742","#A5978B","#8D5B4C","#5A2A27","#C4BBAF"];break;case"palette10":this.colors=["#A300D6","#7D02EB","#5653FE","#2983FF","#00B1F2"]}return this.colors}}]),e}(),ne=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"draw",value:function(){this.drawTitleSubtitle("title"),this.drawTitleSubtitle("subtitle")}},{key:"drawTitleSubtitle",value:function(e){var t=this.w,i="title"===e?t.config.title:t.config.subtitle,a=t.globals.svgWidth/2,n=i.offsetY,r="middle";if("left"===i.align?(a=10,r="start"):"right"===i.align&&(a=t.globals.svgWidth-10,r="end"),a+=i.offsetX,n=n+parseInt(i.style.fontSize,10)+i.margin/2,void 0!==i.text){var o=new w(this.ctx).drawText({x:a,y:n,text:i.text,textAnchor:r,fontSize:i.style.fontSize,fontFamily:i.style.fontFamily,fontWeight:i.style.fontWeight,foreColor:i.style.color,opacity:1});o.node.setAttribute("class","apexcharts-".concat(e,"-text")),t.globals.dom.Paper.add(o)}}}]),e}(),re=function(){function e(t){s(this,e),this.w=t.w,this.dCtx=t}return c(e,[{key:"getTitleSubtitleCoords",value:function(e){var t=this.w,i=0,a=0,n="title"===e?t.config.title.floating:t.config.subtitle.floating,r=t.globals.dom.baseEl.querySelector(".apexcharts-".concat(e,"-text"));if(null!==r&&!n){var o=r.getBoundingClientRect();i=o.width,a=t.globals.axisCharts?o.height+5:o.height}return{width:i,height:a}}},{key:"getLegendsRect",value:function(){var e=this.w,t=e.globals.dom.baseEl.querySelector(".apexcharts-legend");e.config.legend.height||"top"!==e.config.legend.position&&"bottom"!==e.config.legend.position||(t.style.maxHeight=e.globals.svgHeight/2+"px");var i=Object.assign({},x.getBoundingClientRect(t));return null!==t&&!e.config.legend.floating&&e.config.legend.show?this.dCtx.lgRect={x:i.x,y:i.y,height:i.height,width:0===i.height?0:i.width}:this.dCtx.lgRect={x:0,y:0,height:0,width:0},"left"!==e.config.legend.position&&"right"!==e.config.legend.position||1.5*this.dCtx.lgRect.width>e.globals.svgWidth&&(this.dCtx.lgRect.width=e.globals.svgWidth/1.5),this.dCtx.lgRect}},{key:"getLargestStringFromMultiArr",value:function(e,t){var i=e;if(this.w.globals.isMultiLineX){var a=t.map((function(e,t){return Array.isArray(e)?e.length:1})),n=Math.max.apply(Math,g(a));i=t[a.indexOf(n)]}return i}}]),e}(),oe=function(){function e(t){s(this,e),this.w=t.w,this.dCtx=t}return c(e,[{key:"getxAxisLabelsCoords",value:function(){var e,t=this.w,i=t.globals.labels.slice();if(t.config.xaxis.convertedCatToNumeric&&0===i.length&&(i=t.globals.categoryLabels),t.globals.timescaleLabels.length>0){var a=this.getxAxisTimeScaleLabelsCoords();e={width:a.width,height:a.height},t.globals.rotateXLabels=!1}else{this.dCtx.lgWidthForSideLegends="left"!==t.config.legend.position&&"right"!==t.config.legend.position||t.config.legend.floating?0:this.dCtx.lgRect.width;var n=t.globals.xLabelFormatter,r=x.getLargestStringFromArr(i),o=this.dCtx.dimHelpers.getLargestStringFromMultiArr(r,i);t.globals.isBarHorizontal&&(o=r=t.globals.yAxisScale[0].result.reduce((function(e,t){return e.length>t.length?e:t}),0));var s=new H(this.dCtx.ctx),l=r;r=s.xLabelFormat(n,r,l,{i:void 0,dateFormatter:new I(this.dCtx.ctx).formatDate,w:t}),o=s.xLabelFormat(n,o,l,{i:void 0,dateFormatter:new I(this.dCtx.ctx).formatDate,w:t}),(t.config.xaxis.convertedCatToNumeric&&void 0===r||""===String(r).trim())&&(o=r="1");var c=new w(this.dCtx.ctx),u=c.getTextRects(r,t.config.xaxis.labels.style.fontSize),h=u;if(r!==o&&(h=c.getTextRects(o,t.config.xaxis.labels.style.fontSize)),(e={width:u.width>=h.width?u.width:h.width,height:u.height>=h.height?u.height:h.height}).width*i.length>t.globals.svgWidth-this.dCtx.lgWidthForSideLegends-this.dCtx.yAxisWidth-this.dCtx.gridPad.left-this.dCtx.gridPad.right&&0!==t.config.xaxis.labels.rotate||t.config.xaxis.labels.rotateAlways){if(!t.globals.isBarHorizontal){t.globals.rotateXLabels=!0;var d=function(e){return c.getTextRects(e,t.config.xaxis.labels.style.fontSize,t.config.xaxis.labels.style.fontFamily,"rotate(".concat(t.config.xaxis.labels.rotate," 0 0)"),!1)};u=d(r),r!==o&&(h=d(o)),e.height=(u.height>h.height?u.height:h.height)/1.5,e.width=u.width>h.width?u.width:h.width}}else t.globals.rotateXLabels=!1}return t.config.xaxis.labels.show||(e={width:0,height:0}),{width:e.width,height:e.height}}},{key:"getxAxisGroupLabelsCoords",value:function(){var e,t=this.w;if(!t.globals.hasGroups)return{width:0,height:0};var i,a=(null===(e=t.config.xaxis.group.style)||void 0===e?void 0:e.fontSize)||t.config.xaxis.labels.style.fontSize,n=t.globals.groups.map((function(e){return e.title})),r=x.getLargestStringFromArr(n),o=this.dCtx.dimHelpers.getLargestStringFromMultiArr(r,n),s=new w(this.dCtx.ctx),l=s.getTextRects(r,a),c=l;return r!==o&&(c=s.getTextRects(o,a)),i={width:l.width>=c.width?l.width:c.width,height:l.height>=c.height?l.height:c.height},t.config.xaxis.labels.show||(i={width:0,height:0}),{width:i.width,height:i.height}}},{key:"getxAxisTitleCoords",value:function(){var e=this.w,t=0,i=0;if(void 0!==e.config.xaxis.title.text){var a=new w(this.dCtx.ctx).getTextRects(e.config.xaxis.title.text,e.config.xaxis.title.style.fontSize);t=a.width,i=a.height}return{width:t,height:i}}},{key:"getxAxisTimeScaleLabelsCoords",value:function(){var e,t=this.w;this.dCtx.timescaleLabels=t.globals.timescaleLabels.slice();var i=this.dCtx.timescaleLabels.map((function(e){return e.value})),a=i.reduce((function(e,t){return void 0===e?(console.error("You have possibly supplied invalid Date format. Please supply a valid JavaScript Date"),0):e.length>t.length?e:t}),0);return 1.05*(e=new w(this.dCtx.ctx).getTextRects(a,t.config.xaxis.labels.style.fontSize)).width*i.length>t.globals.gridWidth&&0!==t.config.xaxis.labels.rotate&&(t.globals.overlappingXLabels=!0),e}},{key:"additionalPaddingXLabels",value:function(e){var t=this,i=this.w,a=i.globals,n=i.config,r=n.xaxis.type,o=e.width;a.skipLastTimelinelabel=!1,a.skipFirstTimelinelabel=!1;var s=i.config.yaxis[0].opposite&&i.globals.isBarHorizontal,l=function(e,s){(function(e){return-1!==a.collapsedSeriesIndices.indexOf(e)})(s)||function(e){if(t.dCtx.timescaleLabels&&t.dCtx.timescaleLabels.length){var s=t.dCtx.timescaleLabels[0],l=t.dCtx.timescaleLabels[t.dCtx.timescaleLabels.length-1].position+o/1.75-t.dCtx.yAxisWidthRight,c=s.position-o/1.75+t.dCtx.yAxisWidthLeft,u="right"===i.config.legend.position&&t.dCtx.lgRect.width>0?t.dCtx.lgRect.width:0;l>a.svgWidth-a.translateX-u&&(a.skipLastTimelinelabel=!0),c<-(e.show&&!e.floating||"bar"!==n.chart.type&&"candlestick"!==n.chart.type&&"rangeBar"!==n.chart.type&&"boxPlot"!==n.chart.type?10:o/1.75)&&(a.skipFirstTimelinelabel=!0)}else"datetime"===r?t.dCtx.gridPad.right<o&&!a.rotateXLabels&&(a.skipLastTimelinelabel=!0):"datetime"!==r&&t.dCtx.gridPad.right<o/2-t.dCtx.yAxisWidthRight&&!a.rotateXLabels&&!i.config.xaxis.labels.trim&&("between"!==i.config.xaxis.tickPlacement||i.globals.isBarHorizontal)&&(t.dCtx.xPadRight=o/2+1)}(e)};n.yaxis.forEach((function(e,i){s?(t.dCtx.gridPad.left<o&&(t.dCtx.xPadLeft=o/2+1),t.dCtx.xPadRight=o/2+1):l(e,i)}))}}]),e}(),se=function(){function e(t){s(this,e),this.w=t.w,this.dCtx=t}return c(e,[{key:"getyAxisLabelsCoords",value:function(){var e=this,t=this.w,i=[],a=10,n=new U(this.dCtx.ctx);return t.config.yaxis.map((function(r,o){var s=t.globals.yAxisScale[o],l=0;if(!n.isYAxisHidden(o)&&r.labels.show&&void 0!==r.labels.minWidth&&(l=r.labels.minWidth),!n.isYAxisHidden(o)&&r.labels.show&&s.result.length){var c=t.globals.yLabelFormatters[o],u=s.niceMin===Number.MIN_VALUE?0:s.niceMin,h=String(u).length>String(s.niceMax).length?u:s.niceMax,d=c(h,{seriesIndex:o,dataPointIndex:-1,w:t}),f=d;if(void 0!==d&&0!==d.length||(d=h),t.globals.isBarHorizontal){a=0;var p=t.globals.labels.slice();d=c(d=x.getLargestStringFromArr(p),{seriesIndex:o,dataPointIndex:-1,w:t}),f=e.dCtx.dimHelpers.getLargestStringFromMultiArr(d,p)}var m=new w(e.dCtx.ctx),g="rotate(".concat(r.labels.rotate," 0 0)"),v=m.getTextRects(d,r.labels.style.fontSize,r.labels.style.fontFamily,g,!1),y=v;d!==f&&(y=m.getTextRects(f,r.labels.style.fontSize,r.labels.style.fontFamily,g,!1)),i.push({width:(l>y.width||l>v.width?l:y.width>v.width?y.width:v.width)+a,height:y.height>v.height?y.height:v.height})}else i.push({width:0,height:0})})),i}},{key:"getyAxisTitleCoords",value:function(){var e=this,t=this.w,i=[];return t.config.yaxis.map((function(t,a){if(t.show&&void 0!==t.title.text){var n=new w(e.dCtx.ctx),r="rotate(".concat(t.title.rotate," 0 0)"),o=n.getTextRects(t.title.text,t.title.style.fontSize,t.title.style.fontFamily,r,!1);i.push({width:o.width,height:o.height})}else i.push({width:0,height:0})})),i}},{key:"getTotalYAxisWidth",value:function(){var e=this.w,t=0,i=0,a=0,n=e.globals.yAxisScale.length>1?10:0,r=new U(this.dCtx.ctx),o=function(o,s){var l=e.config.yaxis[s].floating,c=0;o.width>0&&!l?(c=o.width+n,function(t){return e.globals.ignoreYAxisIndexes.indexOf(t)>-1}(s)&&(c=c-o.width-n)):c=l||r.isYAxisHidden(s)?0:5,e.config.yaxis[s].opposite?a+=c:i+=c,t+=c};return e.globals.yLabelsCoords.map((function(e,t){o(e,t)})),e.globals.yTitleCoords.map((function(e,t){o(e,t)})),e.globals.isBarHorizontal&&!e.config.yaxis[0].floating&&(t=e.globals.yLabelsCoords[0].width+e.globals.yTitleCoords[0].width+15),this.dCtx.yAxisWidthLeft=i,this.dCtx.yAxisWidthRight=a,t}}]),e}(),le=function(){function e(t){s(this,e),this.w=t.w,this.dCtx=t}return c(e,[{key:"gridPadForColumnsInNumericAxis",value:function(e){var t=this.w;if(t.globals.noData||t.globals.allSeriesCollapsed)return 0;var i=function(e){return"bar"===e||"rangeBar"===e||"candlestick"===e||"boxPlot"===e},a=t.config.chart.type,n=0,r=i(a)?t.config.series.length:1;if(t.globals.comboBarCount>0&&(r=t.globals.comboBarCount),t.globals.collapsedSeries.forEach((function(e){i(e.type)&&(r-=1)})),t.config.chart.stacked&&(r=1),(i(a)||t.globals.comboBarCount>0)&&t.globals.isXNumeric&&!t.globals.isBarHorizontal&&r>0){var o,s,l=Math.abs(t.globals.initialMaxX-t.globals.initialMinX);l<=3&&(l=t.globals.dataPoints),o=l/e,t.globals.minXDiff&&t.globals.minXDiff/o>0&&(s=t.globals.minXDiff/o),s>e/2&&(s/=2),(n=s/r*parseInt(t.config.plotOptions.bar.columnWidth,10)/100)<1&&(n=1),n=n/(r>1?1:1.5)+5,t.globals.barPadForNumericAxis=n}return n}},{key:"gridPadFortitleSubtitle",value:function(){var e=this,t=this.w,i=t.globals,a=this.dCtx.isSparkline||!t.globals.axisCharts?0:10;["title","subtitle"].forEach((function(i){void 0!==t.config[i].text?a+=t.config[i].margin:a+=e.dCtx.isSparkline||!t.globals.axisCharts?0:5})),!t.config.legend.show||"bottom"!==t.config.legend.position||t.config.legend.floating||t.globals.axisCharts||(a+=10);var n=this.dCtx.dimHelpers.getTitleSubtitleCoords("title"),r=this.dCtx.dimHelpers.getTitleSubtitleCoords("subtitle");i.gridHeight=i.gridHeight-n.height-r.height-a,i.translateY=i.translateY+n.height+r.height+a}},{key:"setGridXPosForDualYAxis",value:function(e,t){var i=this.w,a=new U(this.dCtx.ctx);i.config.yaxis.map((function(n,r){-1!==i.globals.ignoreYAxisIndexes.indexOf(r)||n.floating||a.isYAxisHidden(r)||(n.opposite&&(i.globals.translateX=i.globals.translateX-(t[r].width+e[r].width)-parseInt(i.config.yaxis[r].labels.style.fontSize,10)/1.2-12),i.globals.translateX<2&&(i.globals.translateX=2))}))}}]),e}(),ce=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.lgRect={},this.yAxisWidth=0,this.yAxisWidthLeft=0,this.yAxisWidthRight=0,this.xAxisHeight=0,this.isSparkline=this.w.config.chart.sparkline.enabled,this.dimHelpers=new re(this),this.dimYAxis=new se(this),this.dimXAxis=new oe(this),this.dimGrid=new le(this),this.lgWidthForSideLegends=0,this.gridPad=this.w.config.grid.padding,this.xPadRight=0,this.xPadLeft=0}return c(e,[{key:"plotCoords",value:function(){var e=this,t=this.w,i=t.globals;this.lgRect=this.dimHelpers.getLegendsRect(),this.isSparkline&&(t.config.markers.discrete.length>0||t.config.markers.size>0)&&Object.entries(this.gridPad).forEach((function(t){var i=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a,n,r=[],o=!0,s=!1;try{for(i=i.call(e);!(o=(a=i.next()).done)&&(r.push(a.value),!t||r.length!==t);o=!0);}catch(e){s=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(s)throw n}}return r}}(e,t)||v(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t,2),a=i[0],n=i[1];e.gridPad[a]=Math.max(n,e.w.globals.markers.largestSize/1.5)})),i.axisCharts?this.setDimensionsForAxisCharts():this.setDimensionsForNonAxisCharts(),this.dimGrid.gridPadFortitleSubtitle(),i.gridHeight=i.gridHeight-this.gridPad.top-this.gridPad.bottom,i.gridWidth=i.gridWidth-this.gridPad.left-this.gridPad.right-this.xPadRight-this.xPadLeft;var a=this.dimGrid.gridPadForColumnsInNumericAxis(i.gridWidth);i.gridWidth=i.gridWidth-2*a,i.translateX=i.translateX+this.gridPad.left+this.xPadLeft+(a>0?a+4:0),i.translateY=i.translateY+this.gridPad.top}},{key:"setDimensionsForAxisCharts",value:function(){var e=this,t=this.w,i=t.globals,a=this.dimYAxis.getyAxisLabelsCoords(),n=this.dimYAxis.getyAxisTitleCoords();t.globals.yLabelsCoords=[],t.globals.yTitleCoords=[],t.config.yaxis.map((function(e,i){t.globals.yLabelsCoords.push({width:a[i].width,index:i}),t.globals.yTitleCoords.push({width:n[i].width,index:i})})),this.yAxisWidth=this.dimYAxis.getTotalYAxisWidth();var r=this.dimXAxis.getxAxisLabelsCoords(),o=this.dimXAxis.getxAxisGroupLabelsCoords(),s=this.dimXAxis.getxAxisTitleCoords();this.conditionalChecksForAxisCoords(r,s,o),i.translateXAxisY=t.globals.rotateXLabels?this.xAxisHeight/8:-4,i.translateXAxisX=t.globals.rotateXLabels&&t.globals.isXNumeric&&t.config.xaxis.labels.rotate<=-45?-this.xAxisWidth/4:0,t.globals.isBarHorizontal&&(i.rotateXLabels=!1,i.translateXAxisY=parseInt(t.config.xaxis.labels.style.fontSize,10)/1.5*-1),i.translateXAxisY=i.translateXAxisY+t.config.xaxis.labels.offsetY,i.translateXAxisX=i.translateXAxisX+t.config.xaxis.labels.offsetX;var l=this.yAxisWidth,c=this.xAxisHeight;i.xAxisLabelsHeight=this.xAxisHeight-s.height,i.xAxisGroupLabelsHeight=i.xAxisLabelsHeight-r.height,i.xAxisLabelsWidth=this.xAxisWidth,i.xAxisHeight=this.xAxisHeight;var u=10;("radar"===t.config.chart.type||this.isSparkline)&&(l=0,c=i.goldenPadding),this.isSparkline&&(this.lgRect={height:0,width:0}),(this.isSparkline||"treemap"===t.config.chart.type)&&(l=0,c=0,u=0),this.isSparkline||this.dimXAxis.additionalPaddingXLabels(r);var h=function(){i.translateX=l,i.gridHeight=i.svgHeight-e.lgRect.height-c-(e.isSparkline||"treemap"===t.config.chart.type?0:t.globals.rotateXLabels?10:15),i.gridWidth=i.svgWidth-l};switch("top"===t.config.xaxis.position&&(u=i.xAxisHeight-t.config.xaxis.axisTicks.height-5),t.config.legend.position){case"bottom":i.translateY=u,h();break;case"top":i.translateY=this.lgRect.height+u,h();break;case"left":i.translateY=u,i.translateX=this.lgRect.width+l,i.gridHeight=i.svgHeight-c-12,i.gridWidth=i.svgWidth-this.lgRect.width-l;break;case"right":i.translateY=u,i.translateX=l,i.gridHeight=i.svgHeight-c-12,i.gridWidth=i.svgWidth-this.lgRect.width-l-5;break;default:throw new Error("Legend position not supported")}this.dimGrid.setGridXPosForDualYAxis(n,a),new J(this.ctx).setYAxisXPosition(a,n)}},{key:"setDimensionsForNonAxisCharts",value:function(){var e=this.w,t=e.globals,i=e.config,a=0;e.config.legend.show&&!e.config.legend.floating&&(a=20);var n="pie"===i.chart.type||"polarArea"===i.chart.type||"donut"===i.chart.type?"pie":"radialBar",r=i.plotOptions[n].offsetY,o=i.plotOptions[n].offsetX;if(!i.legend.show||i.legend.floating)return t.gridHeight=t.svgHeight-i.grid.padding.left+i.grid.padding.right,t.gridWidth=t.gridHeight,t.translateY=r,void(t.translateX=o+(t.svgWidth-t.gridWidth)/2);switch(i.legend.position){case"bottom":t.gridHeight=t.svgHeight-this.lgRect.height-t.goldenPadding,t.gridWidth=t.svgWidth,t.translateY=r-10,t.translateX=o+(t.svgWidth-t.gridWidth)/2;break;case"top":t.gridHeight=t.svgHeight-this.lgRect.height-t.goldenPadding,t.gridWidth=t.svgWidth,t.translateY=this.lgRect.height+r+10,t.translateX=o+(t.svgWidth-t.gridWidth)/2;break;case"left":t.gridWidth=t.svgWidth-this.lgRect.width-a,t.gridHeight="auto"!==i.chart.height?t.svgHeight:t.gridWidth,t.translateY=r,t.translateX=o+this.lgRect.width+a;break;case"right":t.gridWidth=t.svgWidth-this.lgRect.width-a-5,t.gridHeight="auto"!==i.chart.height?t.svgHeight:t.gridWidth,t.translateY=r,t.translateX=o+10;break;default:throw new Error("Legend position not supported")}}},{key:"conditionalChecksForAxisCoords",value:function(e,t,i){var a=this.w,n=a.globals.hasGroups?2:1,r=i.height+e.height+t.height,o=a.globals.isMultiLineX?1.2:a.globals.LINE_HEIGHT_RATIO,s=a.globals.rotateXLabels?22:10,l=a.globals.rotateXLabels&&"bottom"===a.config.legend.position?10:0;this.xAxisHeight=r*o+n*s+l,this.xAxisWidth=e.width,this.xAxisHeight-t.height>a.config.xaxis.labels.maxHeight&&(this.xAxisHeight=a.config.xaxis.labels.maxHeight),a.config.xaxis.labels.minHeight&&this.xAxisHeight<a.config.xaxis.labels.minHeight&&(this.xAxisHeight=a.config.xaxis.labels.minHeight),a.config.xaxis.floating&&(this.xAxisHeight=0);var c=0,u=0;a.config.yaxis.forEach((function(e){c+=e.labels.minWidth,u+=e.labels.maxWidth})),this.yAxisWidth<c&&(this.yAxisWidth=c),this.yAxisWidth>u&&(this.yAxisWidth=u)}}]),e}(),ue=function(){function e(t){s(this,e),this.w=t.w,this.lgCtx=t}return c(e,[{key:"getLegendStyles",value:function(){var e=document.createElement("style");e.setAttribute("type","text/css");var t=document.createTextNode("\t\n    \t\n      .apexcharts-legend {\t\n        display: flex;\t\n        overflow: auto;\t\n        padding: 0 10px;\t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom, .apexcharts-legend.apx-legend-position-top {\t\n        flex-wrap: wrap\t\n      }\t\n      .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {\t\n        flex-direction: column;\t\n        bottom: 0;\t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-left, .apexcharts-legend.apx-legend-position-top.apexcharts-align-left, .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {\t\n        justify-content: flex-start;\t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-center, .apexcharts-legend.apx-legend-position-top.apexcharts-align-center {\t\n        justify-content: center;  \t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-right, .apexcharts-legend.apx-legend-position-top.apexcharts-align-right {\t\n        justify-content: flex-end;\t\n      }\t\n      .apexcharts-legend-series {\t\n        cursor: pointer;\t\n        line-height: normal;\t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom .apexcharts-legend-series, .apexcharts-legend.apx-legend-position-top .apexcharts-legend-series{\t\n        display: flex;\t\n        align-items: center;\t\n      }\t\n      .apexcharts-legend-text {\t\n        position: relative;\t\n        font-size: 14px;\t\n      }\t\n      .apexcharts-legend-text *, .apexcharts-legend-marker * {\t\n        pointer-events: none;\t\n      }\t\n      .apexcharts-legend-marker {\t\n        position: relative;\t\n        display: inline-block;\t\n        cursor: pointer;\t\n        margin-right: 3px;\t\n        border-style: solid;\n      }\t\n      \t\n      .apexcharts-legend.apexcharts-align-right .apexcharts-legend-series, .apexcharts-legend.apexcharts-align-left .apexcharts-legend-series{\t\n        display: inline-block;\t\n      }\t\n      .apexcharts-legend-series.apexcharts-no-click {\t\n        cursor: auto;\t\n      }\t\n      .apexcharts-legend .apexcharts-hidden-zero-series, .apexcharts-legend .apexcharts-hidden-null-series {\t\n        display: none !important;\t\n      }\t\n      .apexcharts-inactive-legend {\t\n        opacity: 0.45;\t\n      }");return e.appendChild(t),e}},{key:"getLegendBBox",value:function(){var e=this.w.globals.dom.baseEl.querySelector(".apexcharts-legend").getBoundingClientRect(),t=e.width;return{clwh:e.height,clww:t}}},{key:"appendToForeignObject",value:function(){var e=this.w.globals;e.dom.elLegendForeign=document.createElementNS(e.SVGNS,"foreignObject");var t=e.dom.elLegendForeign;t.setAttribute("x",0),t.setAttribute("y",0),t.setAttribute("width",e.svgWidth),t.setAttribute("height",e.svgHeight),e.dom.elLegendWrap.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),t.appendChild(e.dom.elLegendWrap),t.appendChild(this.getLegendStyles()),e.dom.Paper.node.insertBefore(t,e.dom.elGraphical.node)}},{key:"toggleDataSeries",value:function(e,t){var i=this,a=this.w;if(a.globals.axisCharts||"radialBar"===a.config.chart.type){a.globals.resized=!0;var n=null,r=null;a.globals.risingSeries=[],a.globals.axisCharts?(n=a.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(e,"']")),r=parseInt(n.getAttribute("data:realIndex"),10)):(n=a.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(e+1,"']")),r=parseInt(n.getAttribute("rel"),10)-1),t?[{cs:a.globals.collapsedSeries,csi:a.globals.collapsedSeriesIndices},{cs:a.globals.ancillaryCollapsedSeries,csi:a.globals.ancillaryCollapsedSeriesIndices}].forEach((function(e){i.riseCollapsedSeries(e.cs,e.csi,r)})):this.hideSeries({seriesEl:n,realIndex:r})}else{var o=a.globals.dom.Paper.select(" .apexcharts-series[rel='".concat(e+1,"'] path")),s=a.config.chart.type;if("pie"===s||"polarArea"===s||"donut"===s){var l=a.config.plotOptions.pie.donut.labels;new w(this.lgCtx.ctx).pathMouseDown(o.members[0],null),this.lgCtx.ctx.pie.printDataLabelsInner(o.members[0].node,l)}o.fire("click")}}},{key:"hideSeries",value:function(e){var t=e.seriesEl,i=e.realIndex,a=this.w,n=x.clone(a.config.series);if(a.globals.axisCharts){var r=!1;if(a.config.yaxis[i]&&a.config.yaxis[i].show&&a.config.yaxis[i].showAlways&&(r=!0,a.globals.ancillaryCollapsedSeriesIndices.indexOf(i)<0&&(a.globals.ancillaryCollapsedSeries.push({index:i,data:n[i].data.slice(),type:t.parentNode.className.baseVal.split("-")[1]}),a.globals.ancillaryCollapsedSeriesIndices.push(i))),!r){a.globals.collapsedSeries.push({index:i,data:n[i].data.slice(),type:t.parentNode.className.baseVal.split("-")[1]}),a.globals.collapsedSeriesIndices.push(i);var o=a.globals.risingSeries.indexOf(i);a.globals.risingSeries.splice(o,1)}}else a.globals.collapsedSeries.push({index:i,data:n[i]}),a.globals.collapsedSeriesIndices.push(i);for(var s=t.childNodes,l=0;l<s.length;l++)s[l].classList.contains("apexcharts-series-markers-wrap")&&(s[l].classList.contains("apexcharts-hide")?s[l].classList.remove("apexcharts-hide"):s[l].classList.add("apexcharts-hide"));a.globals.allSeriesCollapsed=a.globals.collapsedSeries.length===a.config.series.length,n=this._getSeriesBasedOnCollapsedState(n),this.lgCtx.ctx.updateHelpers._updateSeries(n,a.config.chart.animations.dynamicAnimation.enabled)}},{key:"riseCollapsedSeries",value:function(e,t,i){var a=this.w,n=x.clone(a.config.series);if(e.length>0){for(var r=0;r<e.length;r++)e[r].index===i&&(a.globals.axisCharts?(n[i].data=e[r].data.slice(),e.splice(r,1),t.splice(r,1),a.globals.risingSeries.push(i)):(n[i]=e[r].data,e.splice(r,1),t.splice(r,1),a.globals.risingSeries.push(i)));n=this._getSeriesBasedOnCollapsedState(n),this.lgCtx.ctx.updateHelpers._updateSeries(n,a.config.chart.animations.dynamicAnimation.enabled)}}},{key:"_getSeriesBasedOnCollapsedState",value:function(e){var t=this.w;return t.globals.axisCharts?e.forEach((function(i,a){t.globals.collapsedSeriesIndices.indexOf(a)>-1&&(e[a].data=[])})):e.forEach((function(i,a){t.globals.collapsedSeriesIndices.indexOf(a)>-1&&(e[a]=0)})),e}}]),e}(),he=function(){function e(t,i){s(this,e),this.ctx=t,this.w=t.w,this.onLegendClick=this.onLegendClick.bind(this),this.onLegendHovered=this.onLegendHovered.bind(this),this.isBarsDistributed="bar"===this.w.config.chart.type&&this.w.config.plotOptions.bar.distributed&&1===this.w.config.series.length,this.legendHelpers=new ue(this)}return c(e,[{key:"init",value:function(){var e=this.w,t=e.globals,i=e.config;if((i.legend.showForSingleSeries&&1===t.series.length||this.isBarsDistributed||t.series.length>1||!t.axisCharts)&&i.legend.show){for(;t.dom.elLegendWrap.firstChild;)t.dom.elLegendWrap.removeChild(t.dom.elLegendWrap.firstChild);this.drawLegends(),x.isIE11()?document.getElementsByTagName("head")[0].appendChild(this.legendHelpers.getLegendStyles()):this.legendHelpers.appendToForeignObject(),"bottom"===i.legend.position||"top"===i.legend.position?this.legendAlignHorizontal():"right"!==i.legend.position&&"left"!==i.legend.position||this.legendAlignVertical()}}},{key:"drawLegends",value:function(){var e=this,t=this.w,i=t.config.legend.fontFamily,a=t.globals.seriesNames,n=t.globals.colors.slice();if("heatmap"===t.config.chart.type){var r=t.config.plotOptions.heatmap.colorScale.ranges;a=r.map((function(e){return e.name?e.name:e.from+" - "+e.to})),n=r.map((function(e){return e.color}))}else this.isBarsDistributed&&(a=t.globals.labels.slice());t.config.legend.customLegendItems.length&&(a=t.config.legend.customLegendItems);for(var o=t.globals.legendFormatter,s=t.config.legend.inverseOrder,l=s?a.length-1:0;s?l>=0:l<=a.length-1;s?l--:l++){var c=o(a[l],{seriesIndex:l,w:t}),u=!1,h=!1;if(t.globals.collapsedSeries.length>0)for(var d=0;d<t.globals.collapsedSeries.length;d++)t.globals.collapsedSeries[d].index===l&&(u=!0);if(t.globals.ancillaryCollapsedSeriesIndices.length>0)for(var f=0;f<t.globals.ancillaryCollapsedSeriesIndices.length;f++)t.globals.ancillaryCollapsedSeriesIndices[f]===l&&(h=!0);var p=document.createElement("span");p.classList.add("apexcharts-legend-marker");var m=t.config.legend.markers.offsetX,g=t.config.legend.markers.offsetY,v=t.config.legend.markers.height,y=t.config.legend.markers.width,b=t.config.legend.markers.strokeWidth,_=t.config.legend.markers.strokeColor,S=t.config.legend.markers.radius,C=p.style;C.background=n[l],C.color=n[l],C.setProperty("background",n[l],"important"),t.config.legend.markers.fillColors&&t.config.legend.markers.fillColors[l]&&(C.background=t.config.legend.markers.fillColors[l]),void 0!==t.globals.seriesColors[l]&&(C.background=t.globals.seriesColors[l],C.color=t.globals.seriesColors[l]),C.height=Array.isArray(v)?parseFloat(v[l])+"px":parseFloat(v)+"px",C.width=Array.isArray(y)?parseFloat(y[l])+"px":parseFloat(y)+"px",C.left=(Array.isArray(m)?parseFloat(m[l]):parseFloat(m))+"px",C.top=(Array.isArray(g)?parseFloat(g[l]):parseFloat(g))+"px",C.borderWidth=Array.isArray(b)?b[l]:b,C.borderColor=Array.isArray(_)?_[l]:_,C.borderRadius=Array.isArray(S)?parseFloat(S[l])+"px":parseFloat(S)+"px",t.config.legend.markers.customHTML&&(Array.isArray(t.config.legend.markers.customHTML)?t.config.legend.markers.customHTML[l]&&(p.innerHTML=t.config.legend.markers.customHTML[l]()):p.innerHTML=t.config.legend.markers.customHTML()),w.setAttrs(p,{rel:l+1,"data:collapsed":u||h}),(u||h)&&p.classList.add("apexcharts-inactive-legend");var A=document.createElement("div"),O=document.createElement("span");O.classList.add("apexcharts-legend-text"),O.innerHTML=Array.isArray(c)?c.join(" "):c;var T=t.config.legend.labels.useSeriesColors?t.globals.colors[l]:t.config.legend.labels.colors;T||(T=t.config.chart.foreColor),O.style.color=T,O.style.fontSize=parseFloat(t.config.legend.fontSize)+"px",O.style.fontWeight=t.config.legend.fontWeight,O.style.fontFamily=i||t.config.chart.fontFamily,w.setAttrs(O,{rel:l+1,i:l,"data:default-text":encodeURIComponent(c),"data:collapsed":u||h}),A.appendChild(p),A.appendChild(O);var M=new k(this.ctx);t.config.legend.showForZeroSeries||0===M.getSeriesTotalByIndex(l)&&M.seriesHaveSameValues(l)&&!M.isSeriesNull(l)&&-1===t.globals.collapsedSeriesIndices.indexOf(l)&&-1===t.globals.ancillaryCollapsedSeriesIndices.indexOf(l)&&A.classList.add("apexcharts-hidden-zero-series"),t.config.legend.showForNullSeries||M.isSeriesNull(l)&&-1===t.globals.collapsedSeriesIndices.indexOf(l)&&-1===t.globals.ancillaryCollapsedSeriesIndices.indexOf(l)&&A.classList.add("apexcharts-hidden-null-series"),t.globals.dom.elLegendWrap.appendChild(A),t.globals.dom.elLegendWrap.classList.add("apexcharts-align-".concat(t.config.legend.horizontalAlign)),t.globals.dom.elLegendWrap.classList.add("apx-legend-position-"+t.config.legend.position),A.classList.add("apexcharts-legend-series"),A.style.margin="".concat(t.config.legend.itemMargin.vertical,"px ").concat(t.config.legend.itemMargin.horizontal,"px"),t.globals.dom.elLegendWrap.style.width=t.config.legend.width?t.config.legend.width+"px":"",t.globals.dom.elLegendWrap.style.height=t.config.legend.height?t.config.legend.height+"px":"",w.setAttrs(A,{rel:l+1,seriesName:x.escapeString(a[l]),"data:collapsed":u||h}),(u||h)&&A.classList.add("apexcharts-inactive-legend"),t.config.legend.onItemClick.toggleDataSeries||A.classList.add("apexcharts-no-click")}t.globals.dom.elWrap.addEventListener("click",e.onLegendClick,!0),t.config.legend.onItemHover.highlightDataSeries&&0===t.config.legend.customLegendItems.length&&(t.globals.dom.elWrap.addEventListener("mousemove",e.onLegendHovered,!0),t.globals.dom.elWrap.addEventListener("mouseout",e.onLegendHovered,!0))}},{key:"setLegendWrapXY",value:function(e,t){var i=this.w,a=i.globals.dom.baseEl.querySelector(".apexcharts-legend"),n=a.getBoundingClientRect(),r=0,o=0;if("bottom"===i.config.legend.position)o+=i.globals.svgHeight-n.height/2;else if("top"===i.config.legend.position){var s=new ce(this.ctx),l=s.dimHelpers.getTitleSubtitleCoords("title").height,c=s.dimHelpers.getTitleSubtitleCoords("subtitle").height;o=o+(l>0?l-10:0)+(c>0?c-10:0)}a.style.position="absolute",r=r+e+i.config.legend.offsetX,o=o+t+i.config.legend.offsetY,a.style.left=r+"px",a.style.top=o+"px","bottom"===i.config.legend.position?(a.style.top="auto",a.style.bottom=5-i.config.legend.offsetY+"px"):"right"===i.config.legend.position&&(a.style.left="auto",a.style.right=25+i.config.legend.offsetX+"px"),["width","height"].forEach((function(e){a.style[e]&&(a.style[e]=parseInt(i.config.legend[e],10)+"px")}))}},{key:"legendAlignHorizontal",value:function(){var e=this.w;e.globals.dom.baseEl.querySelector(".apexcharts-legend").style.right=0;var t=this.legendHelpers.getLegendBBox(),i=new ce(this.ctx),a=i.dimHelpers.getTitleSubtitleCoords("title"),n=i.dimHelpers.getTitleSubtitleCoords("subtitle"),r=0;"bottom"===e.config.legend.position?r=-t.clwh/1.8:"top"===e.config.legend.position&&(r=a.height+n.height+e.config.title.margin+e.config.subtitle.margin-10),this.setLegendWrapXY(20,r)}},{key:"legendAlignVertical",value:function(){var e=this.w,t=this.legendHelpers.getLegendBBox(),i=0;"left"===e.config.legend.position&&(i=20),"right"===e.config.legend.position&&(i=e.globals.svgWidth-t.clww-10),this.setLegendWrapXY(i,20)}},{key:"onLegendHovered",value:function(e){var t=this.w,i=e.target.classList.contains("apexcharts-legend-text")||e.target.classList.contains("apexcharts-legend-marker");if("heatmap"===t.config.chart.type||this.isBarsDistributed){if(i){var a=parseInt(e.target.getAttribute("rel"),10)-1;this.ctx.events.fireEvent("legendHover",[this.ctx,a,this.w]),new Y(this.ctx).highlightRangeInSeries(e,e.target)}}else!e.target.classList.contains("apexcharts-inactive-legend")&&i&&new Y(this.ctx).toggleSeriesOnHover(e,e.target)}},{key:"onLegendClick",value:function(e){var t=this.w;if(!t.config.legend.customLegendItems.length&&(e.target.classList.contains("apexcharts-legend-text")||e.target.classList.contains("apexcharts-legend-marker"))){var i=parseInt(e.target.getAttribute("rel"),10)-1,a="true"===e.target.getAttribute("data:collapsed"),n=this.w.config.chart.events.legendClick;"function"==typeof n&&n(this.ctx,i,this.w),this.ctx.events.fireEvent("legendClick",[this.ctx,i,this.w]);var r=this.w.config.legend.markers.onClick;"function"==typeof r&&e.target.classList.contains("apexcharts-legend-marker")&&(r(this.ctx,i,this.w),this.ctx.events.fireEvent("legendMarkerClick",[this.ctx,i,this.w])),"treemap"!==t.config.chart.type&&"heatmap"!==t.config.chart.type&&!this.isBarsDistributed&&t.config.legend.onItemClick.toggleDataSeries&&this.legendHelpers.toggleDataSeries(i,a)}}}]),e}(),de=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w;var i=this.w;this.ev=this.w.config.chart.events,this.selectedClass="apexcharts-selected",this.localeValues=this.w.globals.locale.toolbar,this.minX=i.globals.minX,this.maxX=i.globals.maxX}return c(e,[{key:"createToolbar",value:function(){var e=this,t=this.w,i=function(){return document.createElement("div")},a=i();if(a.setAttribute("class","apexcharts-toolbar"),a.style.top=t.config.chart.toolbar.offsetY+"px",a.style.right=3-t.config.chart.toolbar.offsetX+"px",t.globals.dom.elWrap.appendChild(a),this.elZoom=i(),this.elZoomIn=i(),this.elZoomOut=i(),this.elPan=i(),this.elSelection=i(),this.elZoomReset=i(),this.elMenuIcon=i(),this.elMenu=i(),this.elCustomIcons=[],this.t=t.config.chart.toolbar.tools,Array.isArray(this.t.customIcons))for(var n=0;n<this.t.customIcons.length;n++)this.elCustomIcons.push(i());var r=[],o=function(i,a,n){var o=i.toLowerCase();e.t[o]&&t.config.chart.zoom.enabled&&r.push({el:a,icon:"string"==typeof e.t[o]?e.t[o]:n,title:e.localeValues[i],class:"apexcharts-".concat(o,"-icon")})};o("zoomIn",this.elZoomIn,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n'),o("zoomOut",this.elZoomOut,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n');var s=function(i){e.t[i]&&t.config.chart[i].enabled&&r.push({el:"zoom"===i?e.elZoom:e.elSelection,icon:"string"==typeof e.t[i]?e.t[i]:"zoom"===i?'<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>\n    <path d="M0 0h24v24H0V0z" fill="none"/>\n    <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>\n</svg>':'<svg fill="#6E8192" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2z"/>\n</svg>',title:e.localeValues["zoom"===i?"selectionZoom":"selection"],class:t.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-".concat(i,"-icon")})};s("zoom"),s("selection"),this.t.pan&&t.config.chart.zoom.enabled&&r.push({el:this.elPan,icon:"string"==typeof this.t.pan?this.t.pan:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <defs>\n        <path d="M0 0h24v24H0z" id="a"/>\n    </defs>\n    <clipPath id="b">\n        <use overflow="visible" xlink:href="#a"/>\n    </clipPath>\n    <path clip-path="url(#b)" d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z"/>\n</svg>',title:this.localeValues.pan,class:t.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-pan-icon"}),o("reset",this.elZoomReset,'<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>'),this.t.download&&r.push({el:this.elMenuIcon,icon:"string"==typeof this.t.download?this.t.download:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>',title:this.localeValues.menu,class:"apexcharts-menu-icon"});for(var l=0;l<this.elCustomIcons.length;l++)r.push({el:this.elCustomIcons[l],icon:this.t.customIcons[l].icon,title:this.t.customIcons[l].title,index:this.t.customIcons[l].index,class:"apexcharts-toolbar-custom-icon "+this.t.customIcons[l].class});r.forEach((function(e,t){e.index&&x.moveIndexInArray(r,t,e.index)}));for(var c=0;c<r.length;c++)w.setAttrs(r[c].el,{class:r[c].class,title:r[c].title}),r[c].el.innerHTML=r[c].icon,a.appendChild(r[c].el);this._createHamburgerMenu(a),t.globals.zoomEnabled?this.elZoom.classList.add(this.selectedClass):t.globals.panEnabled?this.elPan.classList.add(this.selectedClass):t.globals.selectionEnabled&&this.elSelection.classList.add(this.selectedClass),this.addToolbarEventListeners()}},{key:"_createHamburgerMenu",value:function(e){this.elMenuItems=[],e.appendChild(this.elMenu),w.setAttrs(this.elMenu,{class:"apexcharts-menu"});var t=[{name:"exportSVG",title:this.localeValues.exportToSVG},{name:"exportPNG",title:this.localeValues.exportToPNG},{name:"exportCSV",title:this.localeValues.exportToCSV}];this.w.globals.allSeriesHasEqualX||t.splice(2,1);for(var i=0;i<t.length;i++)this.elMenuItems.push(document.createElement("div")),this.elMenuItems[i].innerHTML=t[i].title,w.setAttrs(this.elMenuItems[i],{class:"apexcharts-menu-item ".concat(t[i].name),title:t[i].title}),this.elMenu.appendChild(this.elMenuItems[i])}},{key:"addToolbarEventListeners",value:function(){var e=this;this.elZoomReset.addEventListener("click",this.handleZoomReset.bind(this)),this.elSelection.addEventListener("click",this.toggleZoomSelection.bind(this,"selection")),this.elZoom.addEventListener("click",this.toggleZoomSelection.bind(this,"zoom")),this.elZoomIn.addEventListener("click",this.handleZoomIn.bind(this)),this.elZoomOut.addEventListener("click",this.handleZoomOut.bind(this)),this.elPan.addEventListener("click",this.togglePanning.bind(this)),this.elMenuIcon.addEventListener("click",this.toggleMenu.bind(this)),this.elMenuItems.forEach((function(t){t.classList.contains("exportSVG")?t.addEventListener("click",e.handleDownload.bind(e,"svg")):t.classList.contains("exportPNG")?t.addEventListener("click",e.handleDownload.bind(e,"png")):t.classList.contains("exportCSV")&&t.addEventListener("click",e.handleDownload.bind(e,"csv"))}));for(var t=0;t<this.t.customIcons.length;t++)this.elCustomIcons[t].addEventListener("click",this.t.customIcons[t].click.bind(this,this.ctx,this.ctx.w))}},{key:"toggleZoomSelection",value:function(e){this.ctx.getSyncedCharts().forEach((function(t){t.ctx.toolbar.toggleOtherControls();var i="selection"===e?t.ctx.toolbar.elSelection:t.ctx.toolbar.elZoom,a="selection"===e?"selectionEnabled":"zoomEnabled";t.w.globals[a]=!t.w.globals[a],i.classList.contains(t.ctx.toolbar.selectedClass)?i.classList.remove(t.ctx.toolbar.selectedClass):i.classList.add(t.ctx.toolbar.selectedClass)}))}},{key:"getToolbarIconsReference",value:function(){var e=this.w;this.elZoom||(this.elZoom=e.globals.dom.baseEl.querySelector(".apexcharts-zoom-icon")),this.elPan||(this.elPan=e.globals.dom.baseEl.querySelector(".apexcharts-pan-icon")),this.elSelection||(this.elSelection=e.globals.dom.baseEl.querySelector(".apexcharts-selection-icon"))}},{key:"enableZoomPanFromToolbar",value:function(e){this.toggleOtherControls(),"pan"===e?this.w.globals.panEnabled=!0:this.w.globals.zoomEnabled=!0;var t="pan"===e?this.elPan:this.elZoom,i="pan"===e?this.elZoom:this.elPan;t&&t.classList.add(this.selectedClass),i&&i.classList.remove(this.selectedClass)}},{key:"togglePanning",value:function(){this.ctx.getSyncedCharts().forEach((function(e){e.ctx.toolbar.toggleOtherControls(),e.w.globals.panEnabled=!e.w.globals.panEnabled,e.ctx.toolbar.elPan.classList.contains(e.ctx.toolbar.selectedClass)?e.ctx.toolbar.elPan.classList.remove(e.ctx.toolbar.selectedClass):e.ctx.toolbar.elPan.classList.add(e.ctx.toolbar.selectedClass)}))}},{key:"toggleOtherControls",value:function(){var e=this,t=this.w;t.globals.panEnabled=!1,t.globals.zoomEnabled=!1,t.globals.selectionEnabled=!1,this.getToolbarIconsReference(),[this.elPan,this.elSelection,this.elZoom].forEach((function(t){t&&t.classList.remove(e.selectedClass)}))}},{key:"handleZoomIn",value:function(){var e=this.w;e.globals.isRangeBar&&(this.minX=e.globals.minY,this.maxX=e.globals.maxY);var t=(this.minX+this.maxX)/2,i=(this.minX+t)/2,a=(this.maxX+t)/2,n=this._getNewMinXMaxX(i,a);e.globals.disableZoomIn||this.zoomUpdateOptions(n.minX,n.maxX)}},{key:"handleZoomOut",value:function(){var e=this.w;if(e.globals.isRangeBar&&(this.minX=e.globals.minY,this.maxX=e.globals.maxY),!("datetime"===e.config.xaxis.type&&new Date(this.minX).getUTCFullYear()<1e3)){var t=(this.minX+this.maxX)/2,i=this.minX-(t-this.minX),a=this.maxX-(t-this.maxX),n=this._getNewMinXMaxX(i,a);e.globals.disableZoomOut||this.zoomUpdateOptions(n.minX,n.maxX)}}},{key:"_getNewMinXMaxX",value:function(e,t){var i=this.w.config.xaxis.convertedCatToNumeric;return{minX:i?Math.floor(e):e,maxX:i?Math.floor(t):t}}},{key:"zoomUpdateOptions",value:function(e,t){var i=this.w;if(void 0!==e||void 0!==t){if(!(i.config.xaxis.convertedCatToNumeric&&(e<1&&(e=1,t=i.globals.dataPoints),t-e<2))){var a={min:e,max:t},n=this.getBeforeZoomRange(a);n&&(a=n.xaxis);var r={xaxis:a},o=x.clone(i.globals.initialConfig.yaxis);i.config.chart.zoom.autoScaleYaxis&&(o=new Z(this.ctx).autoScaleY(this.ctx,o,{xaxis:a})),i.config.chart.group||(r.yaxis=o),this.w.globals.zoomed=!0,this.ctx.updateHelpers._updateOptions(r,!1,this.w.config.chart.animations.dynamicAnimation.enabled),this.zoomCallback(a,o)}}else this.handleZoomReset()}},{key:"zoomCallback",value:function(e,t){"function"==typeof this.ev.zoomed&&this.ev.zoomed(this.ctx,{xaxis:e,yaxis:t})}},{key:"getBeforeZoomRange",value:function(e,t){var i=null;return"function"==typeof this.ev.beforeZoom&&(i=this.ev.beforeZoom(this,{xaxis:e,yaxis:t})),i}},{key:"toggleMenu",value:function(){var e=this;window.setTimeout((function(){e.elMenu.classList.contains("apexcharts-menu-open")?e.elMenu.classList.remove("apexcharts-menu-open"):e.elMenu.classList.add("apexcharts-menu-open")}),0)}},{key:"handleDownload",value:function(e){var t=this.w,i=new X(this.ctx);switch(e){case"svg":i.exportToSVG(this.ctx);break;case"png":i.exportToPng(this.ctx);break;case"csv":i.exportToCSV({series:t.config.series,columnDelimiter:t.config.chart.toolbar.export.csv.columnDelimiter})}}},{key:"handleZoomReset",value:function(e){this.ctx.getSyncedCharts().forEach((function(e){var t=e.w;if(t.globals.lastXAxis.min=void 0,t.globals.lastXAxis.max=void 0,e.updateHelpers.revertDefaultAxisMinMax(),"function"==typeof t.config.chart.events.beforeResetZoom){var i=t.config.chart.events.beforeResetZoom(e,t);i&&e.updateHelpers.revertDefaultAxisMinMax(i)}"function"==typeof t.config.chart.events.zoomed&&e.ctx.toolbar.zoomCallback({min:t.config.xaxis.min,max:t.config.xaxis.max}),t.globals.zoomed=!1;var a=e.ctx.series.emptyCollapsedSeries(x.clone(t.globals.initialSeries));e.updateHelpers._updateSeries(a,t.config.chart.animations.dynamicAnimation.enabled)}))}},{key:"destroy",value:function(){this.elZoom=null,this.elZoomIn=null,this.elZoomOut=null,this.elPan=null,this.elSelection=null,this.elZoomReset=null,this.elMenuIcon=null}}]),e}(),fe=function(e){h(i,de);var t=m(i);function i(e){var a;return s(this,i),(a=t.call(this,e)).ctx=e,a.w=e.w,a.dragged=!1,a.graphics=new w(a.ctx),a.eventList=["mousedown","mouseleave","mousemove","touchstart","touchmove","mouseup","touchend"],a.clientX=0,a.clientY=0,a.startX=0,a.endX=0,a.dragX=0,a.startY=0,a.endY=0,a.dragY=0,a.moveDirection="none",a}return c(i,[{key:"init",value:function(e){var t=this,i=e.xyRatios,a=this.w,n=this;this.xyRatios=i,this.zoomRect=this.graphics.drawRect(0,0,0,0),this.selectionRect=this.graphics.drawRect(0,0,0,0),this.gridRect=a.globals.dom.baseEl.querySelector(".apexcharts-grid"),this.zoomRect.node.classList.add("apexcharts-zoom-rect"),this.selectionRect.node.classList.add("apexcharts-selection-rect"),a.globals.dom.elGraphical.add(this.zoomRect),a.globals.dom.elGraphical.add(this.selectionRect),"x"===a.config.chart.selection.type?this.slDraggableRect=this.selectionRect.draggable({minX:0,minY:0,maxX:a.globals.gridWidth,maxY:a.globals.gridHeight}).on("dragmove",this.selectionDragging.bind(this,"dragging")):"y"===a.config.chart.selection.type?this.slDraggableRect=this.selectionRect.draggable({minX:0,maxX:a.globals.gridWidth}).on("dragmove",this.selectionDragging.bind(this,"dragging")):this.slDraggableRect=this.selectionRect.draggable().on("dragmove",this.selectionDragging.bind(this,"dragging")),this.preselectedSelection(),this.hoverArea=a.globals.dom.baseEl.querySelector("".concat(a.globals.chartClass," .apexcharts-svg")),this.hoverArea.classList.add("apexcharts-zoomable"),this.eventList.forEach((function(e){t.hoverArea.addEventListener(e,n.svgMouseEvents.bind(n,i),{capture:!1,passive:!0})}))}},{key:"destroy",value:function(){this.slDraggableRect&&(this.slDraggableRect.draggable(!1),this.slDraggableRect.off(),this.selectionRect.off()),this.selectionRect=null,this.zoomRect=null,this.gridRect=null}},{key:"svgMouseEvents",value:function(e,t){var i=this.w,a=this,n=this.ctx.toolbar,r=i.globals.zoomEnabled?i.config.chart.zoom.type:i.config.chart.selection.type,o=i.config.chart.toolbar.autoSelected;if(t.shiftKey?(this.shiftWasPressed=!0,n.enableZoomPanFromToolbar("pan"===o?"zoom":"pan")):this.shiftWasPressed&&(n.enableZoomPanFromToolbar(o),this.shiftWasPressed=!1),t.target){var s,l=t.target.classList;if(t.target.parentNode&&null!==t.target.parentNode&&(s=t.target.parentNode.classList),!(l.contains("apexcharts-selection-rect")||l.contains("apexcharts-legend-marker")||l.contains("apexcharts-legend-text")||s&&s.contains("apexcharts-toolbar"))){if(a.clientX="touchmove"===t.type||"touchstart"===t.type?t.touches[0].clientX:"touchend"===t.type?t.changedTouches[0].clientX:t.clientX,a.clientY="touchmove"===t.type||"touchstart"===t.type?t.touches[0].clientY:"touchend"===t.type?t.changedTouches[0].clientY:t.clientY,"mousedown"===t.type&&1===t.which){var c=a.gridRect.getBoundingClientRect();a.startX=a.clientX-c.left,a.startY=a.clientY-c.top,a.dragged=!1,a.w.globals.mousedown=!0}if(("mousemove"===t.type&&1===t.which||"touchmove"===t.type)&&(a.dragged=!0,i.globals.panEnabled?(i.globals.selection=null,a.w.globals.mousedown&&a.panDragging({context:a,zoomtype:r,xyRatios:e})):(a.w.globals.mousedown&&i.globals.zoomEnabled||a.w.globals.mousedown&&i.globals.selectionEnabled)&&(a.selection=a.selectionDrawing({context:a,zoomtype:r}))),"mouseup"===t.type||"touchend"===t.type||"mouseleave"===t.type){var u=a.gridRect.getBoundingClientRect();a.w.globals.mousedown&&(a.endX=a.clientX-u.left,a.endY=a.clientY-u.top,a.dragX=Math.abs(a.endX-a.startX),a.dragY=Math.abs(a.endY-a.startY),(i.globals.zoomEnabled||i.globals.selectionEnabled)&&a.selectionDrawn({context:a,zoomtype:r}),i.globals.panEnabled&&i.config.xaxis.convertedCatToNumeric&&a.delayedPanScrolled()),i.globals.zoomEnabled&&a.hideSelectionRect(this.selectionRect),a.dragged=!1,a.w.globals.mousedown=!1}this.makeSelectionRectDraggable()}}}},{key:"makeSelectionRectDraggable",value:function(){var e=this.w;if(this.selectionRect){var t=this.selectionRect.node.getBoundingClientRect();t.width>0&&t.height>0&&this.slDraggableRect.selectize({points:"l, r",pointSize:8,pointType:"rect"}).resize({constraint:{minX:0,minY:0,maxX:e.globals.gridWidth,maxY:e.globals.gridHeight}}).on("resizing",this.selectionDragging.bind(this,"resizing"))}}},{key:"preselectedSelection",value:function(){var e=this.w,t=this.xyRatios;if(!e.globals.zoomEnabled)if(void 0!==e.globals.selection&&null!==e.globals.selection)this.drawSelectionRect(e.globals.selection);else if(void 0!==e.config.chart.selection.xaxis.min&&void 0!==e.config.chart.selection.xaxis.max){var i=(e.config.chart.selection.xaxis.min-e.globals.minX)/t.xRatio,a={x:i,y:0,width:e.globals.gridWidth-(e.globals.maxX-e.config.chart.selection.xaxis.max)/t.xRatio-i,height:e.globals.gridHeight,translateX:0,translateY:0,selectionEnabled:!0};this.drawSelectionRect(a),this.makeSelectionRectDraggable(),"function"==typeof e.config.chart.events.selection&&e.config.chart.events.selection(this.ctx,{xaxis:{min:e.config.chart.selection.xaxis.min,max:e.config.chart.selection.xaxis.max},yaxis:{}})}}},{key:"drawSelectionRect",value:function(e){var t=e.x,i=e.y,a=e.width,n=e.height,r=e.translateX,o=void 0===r?0:r,s=e.translateY,l=void 0===s?0:s,c=this.w,u=this.zoomRect,h=this.selectionRect;if(this.dragged||null!==c.globals.selection){var d={transform:"translate("+o+", "+l+")"};c.globals.zoomEnabled&&this.dragged&&(a<0&&(a=1),u.attr({x:t,y:i,width:a,height:n,fill:c.config.chart.zoom.zoomedArea.fill.color,"fill-opacity":c.config.chart.zoom.zoomedArea.fill.opacity,stroke:c.config.chart.zoom.zoomedArea.stroke.color,"stroke-width":c.config.chart.zoom.zoomedArea.stroke.width,"stroke-opacity":c.config.chart.zoom.zoomedArea.stroke.opacity}),w.setAttrs(u.node,d)),c.globals.selectionEnabled&&(h.attr({x:t,y:i,width:a>0?a:0,height:n>0?n:0,fill:c.config.chart.selection.fill.color,"fill-opacity":c.config.chart.selection.fill.opacity,stroke:c.config.chart.selection.stroke.color,"stroke-width":c.config.chart.selection.stroke.width,"stroke-dasharray":c.config.chart.selection.stroke.dashArray,"stroke-opacity":c.config.chart.selection.stroke.opacity}),w.setAttrs(h.node,d))}}},{key:"hideSelectionRect",value:function(e){e&&e.attr({x:0,y:0,width:0,height:0})}},{key:"selectionDrawing",value:function(e){var t,i=e.context,a=e.zoomtype,n=this.w,r=i,o=this.gridRect.getBoundingClientRect(),s=r.startX-1,l=r.startY,c=!1,u=!1,h=r.clientX-o.left-s,d=r.clientY-o.top-l;return Math.abs(h+s)>n.globals.gridWidth?h=n.globals.gridWidth-s:r.clientX-o.left<0&&(h=s),s>r.clientX-o.left&&(c=!0,h=Math.abs(h)),l>r.clientY-o.top&&(u=!0,d=Math.abs(d)),t="x"===a?{x:c?s-h:s,y:0,width:h,height:n.globals.gridHeight}:"y"===a?{x:0,y:u?l-d:l,width:n.globals.gridWidth,height:d}:{x:c?s-h:s,y:u?l-d:l,width:h,height:d},r.drawSelectionRect(t),r.selectionDragging("resizing"),t}},{key:"selectionDragging",value:function(e,t){var i=this,a=this.w,n=this.xyRatios,r=this.selectionRect,o=0;"resizing"===e&&(o=30);var s=function(e){return parseFloat(r.node.getAttribute(e))},l={x:s("x"),y:s("y"),width:s("width"),height:s("height")};a.globals.selection=l,"function"==typeof a.config.chart.events.selection&&a.globals.selectionEnabled&&(clearTimeout(this.w.globals.selectionResizeTimer),this.w.globals.selectionResizeTimer=window.setTimeout((function(){var e=i.gridRect.getBoundingClientRect(),t=r.node.getBoundingClientRect(),o={xaxis:{min:a.globals.xAxisScale.niceMin+(t.left-e.left)*n.xRatio,max:a.globals.xAxisScale.niceMin+(t.right-e.left)*n.xRatio},yaxis:{min:a.globals.yAxisScale[0].niceMin+(e.bottom-t.bottom)*n.yRatio[0],max:a.globals.yAxisScale[0].niceMax-(t.top-e.top)*n.yRatio[0]}};a.config.chart.events.selection(i.ctx,o),a.config.chart.brush.enabled&&void 0!==a.config.chart.events.brushScrolled&&a.config.chart.events.brushScrolled(i.ctx,o)}),o))}},{key:"selectionDrawn",value:function(e){var t=e.context,i=e.zoomtype,a=this.w,n=t,r=this.xyRatios,o=this.ctx.toolbar;if(n.startX>n.endX){var s=n.startX;n.startX=n.endX,n.endX=s}if(n.startY>n.endY){var l=n.startY;n.startY=n.endY,n.endY=l}var c=void 0,u=void 0;a.globals.isRangeBar?(c=a.globals.yAxisScale[0].niceMin+n.startX*r.invertedYRatio,u=a.globals.yAxisScale[0].niceMin+n.endX*r.invertedYRatio):(c=a.globals.xAxisScale.niceMin+n.startX*r.xRatio,u=a.globals.xAxisScale.niceMin+n.endX*r.xRatio);var h=[],d=[];if(a.config.yaxis.forEach((function(e,t){h.push(a.globals.yAxisScale[t].niceMax-r.yRatio[t]*n.startY),d.push(a.globals.yAxisScale[t].niceMax-r.yRatio[t]*n.endY)})),n.dragged&&(n.dragX>10||n.dragY>10)&&c!==u)if(a.globals.zoomEnabled){var f=x.clone(a.globals.initialConfig.yaxis),p=x.clone(a.globals.initialConfig.xaxis);if(a.globals.zoomed=!0,a.config.xaxis.convertedCatToNumeric&&(c=Math.floor(c),u=Math.floor(u),c<1&&(c=1,u=a.globals.dataPoints),u-c<2&&(u=c+1)),"xy"!==i&&"x"!==i||(p={min:c,max:u}),"xy"!==i&&"y"!==i||f.forEach((function(e,t){f[t].min=d[t],f[t].max=h[t]})),a.config.chart.zoom.autoScaleYaxis){var m=new Z(n.ctx);f=m.autoScaleY(n.ctx,f,{xaxis:p})}if(o){var g=o.getBeforeZoomRange(p,f);g&&(p=g.xaxis?g.xaxis:p,f=g.yaxis?g.yaxis:f)}var v={xaxis:p};a.config.chart.group||(v.yaxis=f),n.ctx.updateHelpers._updateOptions(v,!1,n.w.config.chart.animations.dynamicAnimation.enabled),"function"==typeof a.config.chart.events.zoomed&&o.zoomCallback(p,f)}else if(a.globals.selectionEnabled){var y,b=null;y={min:c,max:u},"xy"!==i&&"y"!==i||(b=x.clone(a.config.yaxis)).forEach((function(e,t){b[t].min=d[t],b[t].max=h[t]})),a.globals.selection=n.selection,"function"==typeof a.config.chart.events.selection&&a.config.chart.events.selection(n.ctx,{xaxis:y,yaxis:b})}}},{key:"panDragging",value:function(e){var t=e.context,i=this.w,a=t;if(void 0!==i.globals.lastClientPosition.x){var n=i.globals.lastClientPosition.x-a.clientX,r=i.globals.lastClientPosition.y-a.clientY;Math.abs(n)>Math.abs(r)&&n>0?this.moveDirection="left":Math.abs(n)>Math.abs(r)&&n<0?this.moveDirection="right":Math.abs(r)>Math.abs(n)&&r>0?this.moveDirection="up":Math.abs(r)>Math.abs(n)&&r<0&&(this.moveDirection="down")}i.globals.lastClientPosition={x:a.clientX,y:a.clientY};var o=i.globals.isRangeBar?i.globals.minY:i.globals.minX,s=i.globals.isRangeBar?i.globals.maxY:i.globals.maxX;i.config.xaxis.convertedCatToNumeric||a.panScrolled(o,s)}},{key:"delayedPanScrolled",value:function(){var e=this.w,t=e.globals.minX,i=e.globals.maxX,a=(e.globals.maxX-e.globals.minX)/2;"left"===this.moveDirection?(t=e.globals.minX+a,i=e.globals.maxX+a):"right"===this.moveDirection&&(t=e.globals.minX-a,i=e.globals.maxX-a),t=Math.floor(t),i=Math.floor(i),this.updateScrolledChart({xaxis:{min:t,max:i}},t,i)}},{key:"panScrolled",value:function(e,t){var i=this.w,a=this.xyRatios,n=x.clone(i.globals.initialConfig.yaxis),r=a.xRatio,o=i.globals.minX,s=i.globals.maxX;i.globals.isRangeBar&&(r=a.invertedYRatio,o=i.globals.minY,s=i.globals.maxY),"left"===this.moveDirection?(e=o+i.globals.gridWidth/15*r,t=s+i.globals.gridWidth/15*r):"right"===this.moveDirection&&(e=o-i.globals.gridWidth/15*r,t=s-i.globals.gridWidth/15*r),i.globals.isRangeBar||(e<i.globals.initialMinX||t>i.globals.initialMaxX)&&(e=o,t=s);var l={min:e,max:t};i.config.chart.zoom.autoScaleYaxis&&(n=new Z(this.ctx).autoScaleY(this.ctx,n,{xaxis:l}));var c={xaxis:{min:e,max:t}};i.config.chart.group||(c.yaxis=n),this.updateScrolledChart(c,e,t)}},{key:"updateScrolledChart",value:function(e,t,i){var a=this.w;this.ctx.updateHelpers._updateOptions(e,!1,!1),"function"==typeof a.config.chart.events.scrolled&&a.config.chart.events.scrolled(this.ctx,{xaxis:{min:t,max:i}})}}]),i}(),pe=function(){function e(t){s(this,e),this.w=t.w,this.ttCtx=t,this.ctx=t.ctx}return c(e,[{key:"getNearestValues",value:function(e){var t=e.hoverArea,i=e.elGrid,a=e.clientX,n=e.clientY,r=this.w,o=i.getBoundingClientRect(),s=o.width,l=o.height,c=s/(r.globals.dataPoints-1),u=l/r.globals.dataPoints,h=this.hasBars();!r.globals.comboCharts&&!h||r.config.xaxis.convertedCatToNumeric||(c=s/r.globals.dataPoints);var d=a-o.left-r.globals.barPadForNumericAxis,f=n-o.top;d<0||f<0||d>s||f>l?(t.classList.remove("hovering-zoom"),t.classList.remove("hovering-pan")):r.globals.zoomEnabled?(t.classList.remove("hovering-pan"),t.classList.add("hovering-zoom")):r.globals.panEnabled&&(t.classList.remove("hovering-zoom"),t.classList.add("hovering-pan"));var p=Math.round(d/c),m=Math.floor(f/u);h&&!r.config.xaxis.convertedCatToNumeric&&(p=Math.ceil(d/c),p-=1);var g=null,v=null,y=[],b=[];if(r.globals.seriesXvalues.forEach((function(e){y.push([e[0]+1e-6].concat(e))})),r.globals.seriesYvalues.forEach((function(e){b.push([e[0]+1e-6].concat(e))})),y=y.map((function(e){return e.filter((function(e){return x.isNumber(e)}))})),b=b.map((function(e){return e.filter((function(e){return x.isNumber(e)}))})),r.globals.isXNumeric){var _=this.ttCtx.getElGrid().getBoundingClientRect(),w=d*(_.width/s),k=f*(_.height/l);g=(v=this.closestInMultiArray(w,k,y,b)).index,p=v.j,null!==g&&(y=r.globals.seriesXvalues[g],p=(v=this.closestInArray(w,y)).index)}return r.globals.capturedSeriesIndex=null===g?-1:g,(!p||p<1)&&(p=0),r.globals.isBarHorizontal?r.globals.capturedDataPointIndex=m:r.globals.capturedDataPointIndex=p,{capturedSeries:g,j:r.globals.isBarHorizontal?m:p,hoverX:d,hoverY:f}}},{key:"closestInMultiArray",value:function(e,t,i,a){var n=this.w,r=0,o=null,s=-1;n.globals.series.length>1?r=this.getFirstActiveXArray(i):o=0;var l=i[r][0],c=Math.abs(e-l);if(i.forEach((function(t){t.forEach((function(t,i){var a=Math.abs(e-t);a<c&&(c=a,s=i)}))})),-1!==s){var u=a[r][s],h=Math.abs(t-u);o=r,a.forEach((function(e,i){var a=Math.abs(t-e[s]);a<h&&(h=a,o=i)}))}return{index:o,j:s}}},{key:"getFirstActiveXArray",value:function(e){for(var t=this.w,i=0,a=e.map((function(e,t){return e.length>0?t:-1})),n=0;n<a.length;n++)if(-1!==a[n]&&-1===t.globals.collapsedSeriesIndices.indexOf(n)&&-1===t.globals.ancillaryCollapsedSeriesIndices.indexOf(n)){i=a[n];break}return i}},{key:"closestInArray",value:function(e,t){for(var i=t[0],a=null,n=Math.abs(e-i),r=0;r<t.length;r++){var o=Math.abs(e-t[r]);o<n&&(n=o,a=r)}return{index:a}}},{key:"isXoverlap",value:function(e){var t=[],i=this.w.globals.seriesX.filter((function(e){return void 0!==e[0]}));if(i.length>0)for(var a=0;a<i.length-1;a++)void 0!==i[a][e]&&void 0!==i[a+1][e]&&i[a][e]!==i[a+1][e]&&t.push("unEqual");return 0===t.length}},{key:"isInitialSeriesSameLen",value:function(){for(var e=!0,t=this.w.globals.initialSeries,i=0;i<t.length-1;i++)if(t[i].data.length!==t[i+1].data.length){e=!1;break}return e}},{key:"getBarsHeight",value:function(e){return g(e).reduce((function(e,t){return e+t.getBBox().height}),0)}},{key:"getElMarkers",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(" .apexcharts-series-markers")}},{key:"getAllMarkers",value:function(){var e=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap");(e=g(e)).sort((function(e,t){var i=Number(e.getAttribute("data:realIndex")),a=Number(t.getAttribute("data:realIndex"));return a<i?1:a>i?-1:0}));var t=[];return e.forEach((function(e){t.push(e.querySelector(".apexcharts-marker"))})),t}},{key:"hasMarkers",value:function(){return this.getElMarkers().length>0}},{key:"getElBars",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-bar-series,  .apexcharts-candlestick-series, .apexcharts-boxPlot-series, .apexcharts-rangebar-series")}},{key:"hasBars",value:function(){return this.getElBars().length>0}},{key:"getHoverMarkerSize",value:function(e){var t=this.w,i=t.config.markers.hover.size;return void 0===i&&(i=t.globals.markers.size[e]+t.config.markers.hover.sizeOffset),i}},{key:"toggleAllTooltipSeriesGroups",value:function(e){var t=this.w,i=this.ttCtx;0===i.allTooltipSeriesGroups.length&&(i.allTooltipSeriesGroups=t.globals.dom.baseEl.querySelectorAll(".apexcharts-tooltip-series-group"));for(var a=i.allTooltipSeriesGroups,n=0;n<a.length;n++)"enable"===e?(a[n].classList.add("apexcharts-active"),a[n].style.display=t.config.tooltip.items.display):(a[n].classList.remove("apexcharts-active"),a[n].style.display="none")}}]),e}(),me=function(){function e(t){s(this,e),this.w=t.w,this.ctx=t.ctx,this.ttCtx=t,this.tooltipUtil=new pe(t)}return c(e,[{key:"drawSeriesTexts",value:function(e){var t=e.shared,i=void 0===t||t,a=e.ttItems,n=e.i,r=void 0===n?0:n,o=e.j,s=void 0===o?null:o,l=e.y1,c=e.y2,u=e.e,h=this.w;void 0!==h.config.tooltip.custom?this.handleCustomTooltip({i:r,j:s,y1:l,y2:c,w:h}):this.toggleActiveInactiveSeries(i);var d=this.getValuesToPrint({i:r,j:s});this.printLabels({i:r,j:s,values:d,ttItems:a,shared:i,e:u});var f=this.ttCtx.getElTooltip();this.ttCtx.tooltipRect.ttWidth=f.getBoundingClientRect().width,this.ttCtx.tooltipRect.ttHeight=f.getBoundingClientRect().height}},{key:"printLabels",value:function(e){var t,i=this,a=e.i,n=e.j,o=e.values,s=e.ttItems,l=e.shared,c=e.e,u=this.w,h=[],d=function(e){return u.globals.seriesGoals[e]&&u.globals.seriesGoals[e][n]&&Array.isArray(u.globals.seriesGoals[e][n])},f=o.xVal,p=o.zVal,m=o.xAxisTTVal,g="",v=u.globals.colors[a];null!==n&&u.config.plotOptions.bar.distributed&&(v=u.globals.colors[n]);for(var y=function(e,o){var y=i.getFormatters(a);g=i.getSeriesName({fn:y.yLbTitleFormatter,index:a,seriesIndex:a,j:n}),"treemap"===u.config.chart.type&&(g=y.yLbTitleFormatter(String(u.config.series[a].data[n].x),{series:u.globals.series,seriesIndex:a,dataPointIndex:n,w:u}));var x=u.config.tooltip.inverseOrder?o:e;if(u.globals.axisCharts){var b=function(e){return y.yLbFormatter(u.globals.series[e][n],{series:u.globals.series,seriesIndex:e,dataPointIndex:n,w:u})};if(l)y=i.getFormatters(x),g=i.getSeriesName({fn:y.yLbTitleFormatter,index:x,seriesIndex:a,j:n}),v=u.globals.colors[x],t=b(x),d(x)&&(h=u.globals.seriesGoals[x][n].map((function(e){return{attrs:e,val:y.yLbFormatter(e.value,{seriesIndex:x,dataPointIndex:n,w:u})}})));else{var _,w=null==c||null===(_=c.target)||void 0===_?void 0:_.getAttribute("fill");w&&(v=-1!==w.indexOf("url")?document.querySelector(w.substr(4).slice(0,-1)).childNodes[0].getAttribute("stroke"):w),t=b(a),d(a)&&Array.isArray(u.globals.seriesGoals[a][n])&&(h=u.globals.seriesGoals[a][n].map((function(e){return{attrs:e,val:y.yLbFormatter(e.value,{seriesIndex:a,dataPointIndex:n,w:u})}})))}}null===n&&(t=y.yLbFormatter(u.globals.series[a],r(r({},u),{},{seriesIndex:a,dataPointIndex:a}))),i.DOMHandling({i:a,t:x,j:n,ttItems:s,values:{val:t,goalVals:h,xVal:f,xAxisTTVal:m,zVal:p},seriesName:g,shared:l,pColor:v})},x=0,b=u.globals.series.length-1;x<u.globals.series.length;x++,b--)y(x,b)}},{key:"getFormatters",value:function(e){var t,i=this.w,a=i.globals.yLabelFormatters[e];return void 0!==i.globals.ttVal?Array.isArray(i.globals.ttVal)?(a=i.globals.ttVal[e]&&i.globals.ttVal[e].formatter,t=i.globals.ttVal[e]&&i.globals.ttVal[e].title&&i.globals.ttVal[e].title.formatter):(a=i.globals.ttVal.formatter,"function"==typeof i.globals.ttVal.title.formatter&&(t=i.globals.ttVal.title.formatter)):t=i.config.tooltip.y.title.formatter,"function"!=typeof a&&(a=i.globals.yLabelFormatters[0]?i.globals.yLabelFormatters[0]:function(e){return e}),"function"!=typeof t&&(t=function(e){return e}),{yLbFormatter:a,yLbTitleFormatter:t}}},{key:"getSeriesName",value:function(e){var t=e.fn,i=e.index,a=e.seriesIndex,n=e.j,r=this.w;return t(String(r.globals.seriesNames[i]),{series:r.globals.series,seriesIndex:a,dataPointIndex:n,w:r})}},{key:"DOMHandling",value:function(e){e.i;var t=e.t,i=e.j,a=e.ttItems,n=e.values,r=e.seriesName,o=e.shared,s=e.pColor,l=this.w,c=this.ttCtx,u=n.val,h=n.goalVals,d=n.xVal,f=n.xAxisTTVal,p=n.zVal,m=null;m=a[t].children,l.config.tooltip.fillSeriesColor&&(a[t].style.backgroundColor=s,m[0].style.display="none"),c.showTooltipTitle&&(null===c.tooltipTitle&&(c.tooltipTitle=l.globals.dom.baseEl.querySelector(".apexcharts-tooltip-title")),c.tooltipTitle.innerHTML=d),c.isXAxisTooltipEnabled&&(c.xaxisTooltipText.innerHTML=""!==f?f:d);var g=a[t].querySelector(".apexcharts-tooltip-text-y-label");g&&(g.innerHTML=r||"");var v=a[t].querySelector(".apexcharts-tooltip-text-y-value");v&&(v.innerHTML=void 0!==u?u:""),m[0]&&m[0].classList.contains("apexcharts-tooltip-marker")&&(l.config.tooltip.marker.fillColors&&Array.isArray(l.config.tooltip.marker.fillColors)&&(s=l.config.tooltip.marker.fillColors[t]),m[0].style.backgroundColor=s),l.config.tooltip.marker.show||(m[0].style.display="none");var y=a[t].querySelector(".apexcharts-tooltip-text-goals-label"),x=a[t].querySelector(".apexcharts-tooltip-text-goals-value");if(h.length&&l.globals.seriesGoals[t]){var b=function(){var e="<div >",t="<div>";h.forEach((function(i,a){e+=' <div style="display: flex"><span class="apexcharts-tooltip-marker" style="background-color: '.concat(i.attrs.strokeColor,'; height: 3px; border-radius: 0; top: 5px;"></span> ').concat(i.attrs.name,"</div>"),t+="<div>".concat(i.val,"</div>")})),y.innerHTML=e+"</div>",x.innerHTML=t+"</div>"};o?l.globals.seriesGoals[t][i]&&Array.isArray(l.globals.seriesGoals[t][i])?b():(y.innerHTML="",x.innerHTML=""):b()}else y.innerHTML="",x.innerHTML="";null!==p&&(a[t].querySelector(".apexcharts-tooltip-text-z-label").innerHTML=l.config.tooltip.z.title,a[t].querySelector(".apexcharts-tooltip-text-z-value").innerHTML=void 0!==p?p:""),o&&m[0]&&(null==u||l.globals.ancillaryCollapsedSeriesIndices.indexOf(t)>-1||l.globals.collapsedSeriesIndices.indexOf(t)>-1?m[0].parentNode.style.display="none":m[0].parentNode.style.display=l.config.tooltip.items.display)}},{key:"toggleActiveInactiveSeries",value:function(e){var t=this.w;if(e)this.tooltipUtil.toggleAllTooltipSeriesGroups("enable");else{this.tooltipUtil.toggleAllTooltipSeriesGroups("disable");var i=t.globals.dom.baseEl.querySelector(".apexcharts-tooltip-series-group");i&&(i.classList.add("apexcharts-active"),i.style.display=t.config.tooltip.items.display)}}},{key:"getValuesToPrint",value:function(e){var t=e.i,i=e.j,a=this.w,n=this.ctx.series.filteredSeriesX(),r="",o="",s=null,l=null,c={series:a.globals.series,seriesIndex:t,dataPointIndex:i,w:a},u=a.globals.ttZFormatter;null===i?l=a.globals.series[t]:a.globals.isXNumeric&&"treemap"!==a.config.chart.type?(r=n[t][i],0===n[t].length&&(r=n[this.tooltipUtil.getFirstActiveXArray(n)][i])):r=void 0!==a.globals.labels[i]?a.globals.labels[i]:"";var h=r;return r=a.globals.isXNumeric&&"datetime"===a.config.xaxis.type?new H(this.ctx).xLabelFormat(a.globals.ttKeyFormatter,h,h,{i:void 0,dateFormatter:new I(this.ctx).formatDate,w:this.w}):a.globals.isBarHorizontal?a.globals.yLabelFormatters[0](h,c):a.globals.xLabelFormatter(h,c),void 0!==a.config.tooltip.x.formatter&&(r=a.globals.ttKeyFormatter(h,c)),a.globals.seriesZ.length>0&&a.globals.seriesZ[t].length>0&&(s=u(a.globals.seriesZ[t][i],a)),o="function"==typeof a.config.xaxis.tooltip.formatter?a.globals.xaxisTooltipFormatter(h,c):r,{val:Array.isArray(l)?l.join(" "):l,xVal:Array.isArray(r)?r.join(" "):r,xAxisTTVal:Array.isArray(o)?o.join(" "):o,zVal:s}}},{key:"handleCustomTooltip",value:function(e){var t=e.i,i=e.j,a=e.y1,n=e.y2,r=e.w,o=this.ttCtx.getElTooltip(),s=r.config.tooltip.custom;Array.isArray(s)&&s[t]&&(s=s[t]),o.innerHTML=s({ctx:this.ctx,series:r.globals.series,seriesIndex:t,dataPointIndex:i,y1:a,y2:n,w:r})}}]),e}(),ge=function(){function e(t){s(this,e),this.ttCtx=t,this.ctx=t.ctx,this.w=t.w}return c(e,[{key:"moveXCrosshairs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this.ttCtx,a=this.w,n=i.getElXCrosshairs(),r=e-i.xcrosshairsWidth/2,o=a.globals.labels.slice().length;if(null!==t&&(r=a.globals.gridWidth/o*t),null===n||a.globals.isBarHorizontal||(n.setAttribute("x",r),n.setAttribute("x1",r),n.setAttribute("x2",r),n.setAttribute("y2",a.globals.gridHeight),n.classList.add("apexcharts-active")),r<0&&(r=0),r>a.globals.gridWidth&&(r=a.globals.gridWidth),i.isXAxisTooltipEnabled){var s=r;"tickWidth"!==a.config.xaxis.crosshairs.width&&"barWidth"!==a.config.xaxis.crosshairs.width||(s=r+i.xcrosshairsWidth/2),this.moveXAxisTooltip(s)}}},{key:"moveYCrosshairs",value:function(e){var t=this.ttCtx;null!==t.ycrosshairs&&w.setAttrs(t.ycrosshairs,{y1:e,y2:e}),null!==t.ycrosshairsHidden&&w.setAttrs(t.ycrosshairsHidden,{y1:e,y2:e})}},{key:"moveXAxisTooltip",value:function(e){var t=this.w,i=this.ttCtx;if(null!==i.xaxisTooltip&&0!==i.xcrosshairsWidth){i.xaxisTooltip.classList.add("apexcharts-active");var a,n=i.xaxisOffY+t.config.xaxis.tooltip.offsetY+t.globals.translateY+1+t.config.xaxis.offsetY;if(e-=i.xaxisTooltip.getBoundingClientRect().width/2,!isNaN(e))e+=t.globals.translateX,a=new w(this.ctx).getTextRects(i.xaxisTooltipText.innerHTML),i.xaxisTooltipText.style.minWidth=a.width+"px",i.xaxisTooltip.style.left=e+"px",i.xaxisTooltip.style.top=n+"px"}}},{key:"moveYAxisTooltip",value:function(e){var t=this.w,i=this.ttCtx;null===i.yaxisTTEls&&(i.yaxisTTEls=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));var a=parseInt(i.ycrosshairsHidden.getAttribute("y1"),10),n=t.globals.translateY+a,r=i.yaxisTTEls[e].getBoundingClientRect().height,o=t.globals.translateYAxisX[e]-2;t.config.yaxis[e].opposite&&(o-=26),n-=r/2,-1===t.globals.ignoreYAxisIndexes.indexOf(e)?(i.yaxisTTEls[e].classList.add("apexcharts-active"),i.yaxisTTEls[e].style.top=n+"px",i.yaxisTTEls[e].style.left=o+t.config.yaxis[e].tooltip.offsetX+"px"):i.yaxisTTEls[e].classList.remove("apexcharts-active")}},{key:"moveTooltip",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=this.w,n=this.ttCtx,r=n.getElTooltip(),o=n.tooltipRect,s=null!==i?parseFloat(i):1,l=parseFloat(e)+s+5,c=parseFloat(t)+s/2;if(l>a.globals.gridWidth/2&&(l=l-o.ttWidth-s-10),l>a.globals.gridWidth-o.ttWidth-10&&(l=a.globals.gridWidth-o.ttWidth),l<-20&&(l=-20),a.config.tooltip.followCursor){var u=n.getElGrid(),h=u.getBoundingClientRect();c=n.e.clientY+a.globals.translateY-h.top-o.ttHeight/2}else a.globals.isBarHorizontal||(o.ttHeight/2+c>a.globals.gridHeight&&(c=a.globals.gridHeight-o.ttHeight+a.globals.translateY),c<0&&(c=0));isNaN(l)||(l+=a.globals.translateX,r.style.left=l+"px",r.style.top=c+"px")}},{key:"moveMarkers",value:function(e,t){var i=this.w,a=this.ttCtx;if(i.globals.markers.size[e]>0)for(var n=i.globals.dom.baseEl.querySelectorAll(" .apexcharts-series[data\\:realIndex='".concat(e,"'] .apexcharts-marker")),r=0;r<n.length;r++)parseInt(n[r].getAttribute("rel"),10)===t&&(a.marker.resetPointsSize(),a.marker.enlargeCurrentPoint(t,n[r]));else a.marker.resetPointsSize(),this.moveDynamicPointOnHover(t,e)}},{key:"moveDynamicPointOnHover",value:function(e,t){var i,a,n=this.w,r=this.ttCtx,o=n.globals.pointsArray,s=r.tooltipUtil.getHoverMarkerSize(t),l=n.config.series[t].type;if(!l||"column"!==l&&"candlestick"!==l&&"boxPlot"!==l){i=o[t][e][0],a=o[t][e][1]?o[t][e][1]:0;var c=n.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(t,"'] .apexcharts-series-markers circle"));c&&a<n.globals.gridHeight&&a>0&&(c.setAttribute("r",s),c.setAttribute("cx",i),c.setAttribute("cy",a)),this.moveXCrosshairs(i),r.fixedTooltip||this.moveTooltip(i,a,s)}}},{key:"moveDynamicPointsOnHover",value:function(e){var t,i=this.ttCtx,a=i.w,n=0,r=0,o=a.globals.pointsArray;t=new Y(this.ctx).getActiveConfigSeriesIndex("asc",["line","area","scatter","bubble"]);var s=i.tooltipUtil.getHoverMarkerSize(t);o[t]&&(n=o[t][e][0],r=o[t][e][1]);var l=i.tooltipUtil.getAllMarkers();if(null!==l)for(var c=0;c<a.globals.series.length;c++){var u=o[c];if(a.globals.comboCharts&&void 0===u&&l.splice(c,0,null),u&&u.length){var h=o[c][e][1],d=void 0;if(l[c].setAttribute("cx",n),"rangeArea"===a.config.chart.type&&!a.globals.comboCharts){var f=e+a.globals.series[c].length;d=o[c][f][1],h-=Math.abs(h-d)/2}null!==h&&!isNaN(h)&&h<a.globals.gridHeight+s&&h+s>0?(l[c]&&l[c].setAttribute("r",s),l[c]&&l[c].setAttribute("cy",h)):l[c]&&l[c].setAttribute("r",0)}}if(this.moveXCrosshairs(n),!i.fixedTooltip){var p=r||a.globals.gridHeight;this.moveTooltip(n,p,s)}}},{key:"moveStickyTooltipOverBars",value:function(e){var t=this.w,i=this.ttCtx,a=t.globals.columnSeries?t.globals.columnSeries.length:t.globals.series.length,n=a>=2&&a%2==0?Math.floor(a/2):Math.floor(a/2)+1;t.globals.isBarHorizontal&&(n=new Y(this.ctx).getActiveConfigSeriesIndex("desc")+1);var r=t.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[rel='".concat(n,"'] path[j='").concat(e,"'], .apexcharts-candlestick-series .apexcharts-series[rel='").concat(n,"'] path[j='").concat(e,"'], .apexcharts-boxPlot-series .apexcharts-series[rel='").concat(n,"'] path[j='").concat(e,"'], .apexcharts-rangebar-series .apexcharts-series[rel='").concat(n,"'] path[j='").concat(e,"']")),o=r?parseFloat(r.getAttribute("cx")):0,s=r?parseFloat(r.getAttribute("cy")):0,l=r?parseFloat(r.getAttribute("barWidth")):0,c=r?parseFloat(r.getAttribute("barHeight")):0,u=i.getElGrid().getBoundingClientRect(),h=r.classList.contains("apexcharts-candlestick-area")||r.classList.contains("apexcharts-boxPlot-area");if(t.globals.isXNumeric?(r&&!h&&(o-=a%2!=0?l/2:0),r&&h&&t.globals.comboCharts&&(o-=l/2)):t.globals.isBarHorizontal||(o=i.xAxisTicksPositions[e-1]+i.dataPointsDividedWidth/2,isNaN(o)&&(o=i.xAxisTicksPositions[e]-i.dataPointsDividedWidth/2)),t.globals.isBarHorizontal?(s>t.globals.gridHeight/2&&(s-=i.tooltipRect.ttHeight),(s=s+t.config.grid.padding.top+c/3)+c>t.globals.gridHeight&&(s=t.globals.gridHeight-c)):t.config.tooltip.followCursor?s=i.e.clientY-u.top-i.tooltipRect.ttHeight/2:s+i.tooltipRect.ttHeight+15>t.globals.gridHeight&&(s=t.globals.gridHeight),s<-10&&(s=-10),t.globals.isBarHorizontal||this.moveXCrosshairs(o),!i.fixedTooltip){var d=s||t.globals.gridHeight;this.moveTooltip(o,d)}}}]),e}(),ve=function(){function e(t){s(this,e),this.w=t.w,this.ttCtx=t,this.ctx=t.ctx,this.tooltipPosition=new ge(t)}return c(e,[{key:"drawDynamicPoints",value:function(){var e=this.w,t=new w(this.ctx),i=new B(this.ctx),a=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series");a=g(a),e.config.chart.stacked&&a.sort((function(e,t){return parseFloat(e.getAttribute("data:realIndex"))-parseFloat(t.getAttribute("data:realIndex"))}));for(var n=0;n<a.length;n++){var r=a[n].querySelector(".apexcharts-series-markers-wrap");if(null!==r){var o=void 0,s="apexcharts-marker w".concat((Math.random()+1).toString(36).substring(4));"line"!==e.config.chart.type&&"area"!==e.config.chart.type||e.globals.comboCharts||e.config.tooltip.intersect||(s+=" no-pointer-events");var l=i.getMarkerConfig({cssClass:s,seriesIndex:Number(r.getAttribute("data:realIndex"))});(o=t.drawMarker(0,0,l)).node.setAttribute("default-marker-size",0);var c=document.createElementNS(e.globals.SVGNS,"g");c.classList.add("apexcharts-series-markers"),c.appendChild(o.node),r.appendChild(c)}}}},{key:"enlargeCurrentPoint",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=this.w;"bubble"!==n.config.chart.type&&this.newPointSize(e,t);var r=t.getAttribute("cx"),o=t.getAttribute("cy");if(null!==i&&null!==a&&(r=i,o=a),this.tooltipPosition.moveXCrosshairs(r),!this.fixedTooltip){if("radar"===n.config.chart.type){var s=this.ttCtx.getElGrid(),l=s.getBoundingClientRect();r=this.ttCtx.e.clientX-l.left}this.tooltipPosition.moveTooltip(r,o,n.config.markers.hover.size)}}},{key:"enlargePoints",value:function(e){for(var t=this.w,i=this,a=this.ttCtx,n=e,r=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),o=t.config.markers.hover.size,s=0;s<r.length;s++){var l=r[s].getAttribute("rel"),c=r[s].getAttribute("index");if(void 0===o&&(o=t.globals.markers.size[c]+t.config.markers.hover.sizeOffset),n===parseInt(l,10)){i.newPointSize(n,r[s]);var u=r[s].getAttribute("cx"),h=r[s].getAttribute("cy");i.tooltipPosition.moveXCrosshairs(u),a.fixedTooltip||i.tooltipPosition.moveTooltip(u,h,o)}else i.oldPointSize(r[s])}}},{key:"newPointSize",value:function(e,t){var i=this.w,a=i.config.markers.hover.size,n=0===e?t.parentNode.firstChild:t.parentNode.lastChild;if("0"!==n.getAttribute("default-marker-size")){var r=parseInt(n.getAttribute("index"),10);void 0===a&&(a=i.globals.markers.size[r]+i.config.markers.hover.sizeOffset),a<0&&(a=0),n.setAttribute("r",a)}}},{key:"oldPointSize",value:function(e){var t=parseFloat(e.getAttribute("default-marker-size"));e.setAttribute("r",t)}},{key:"resetPointsSize",value:function(){for(var e=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),t=0;t<e.length;t++){var i=parseFloat(e[t].getAttribute("default-marker-size"));x.isNumber(i)&&i>=0?e[t].setAttribute("r",i):e[t].setAttribute("r",0)}}}]),e}(),ye=function(){function e(t){s(this,e),this.w=t.w,this.ttCtx=t}return c(e,[{key:"getAttr",value:function(e,t){return parseFloat(e.target.getAttribute(t))}},{key:"handleHeatTreeTooltip",value:function(e){var t=e.e,i=e.opt,a=e.x,n=e.y,r=e.type,o=this.ttCtx,s=this.w;if(t.target.classList.contains("apexcharts-".concat(r,"-rect"))){var l=this.getAttr(t,"i"),c=this.getAttr(t,"j"),u=this.getAttr(t,"cx"),h=this.getAttr(t,"cy"),d=this.getAttr(t,"width"),f=this.getAttr(t,"height");if(o.tooltipLabels.drawSeriesTexts({ttItems:i.ttItems,i:l,j:c,shared:!1,e:t}),s.globals.capturedSeriesIndex=l,s.globals.capturedDataPointIndex=c,a=u+o.tooltipRect.ttWidth/2+d,n=h+o.tooltipRect.ttHeight/2-f/2,o.tooltipPosition.moveXCrosshairs(u+d/2),a>s.globals.gridWidth/2&&(a=u-o.tooltipRect.ttWidth/2+d),o.w.config.tooltip.followCursor){var p=s.globals.dom.elWrap.getBoundingClientRect();a=s.globals.clientX-p.left-(a>s.globals.gridWidth/2?o.tooltipRect.ttWidth:0),n=s.globals.clientY-p.top-(n>s.globals.gridHeight/2?o.tooltipRect.ttHeight:0)}}return{x:a,y:n}}},{key:"handleMarkerTooltip",value:function(e){var t,i,a=e.e,n=e.opt,r=e.x,o=e.y,s=this.w,l=this.ttCtx;if(a.target.classList.contains("apexcharts-marker")){var c=parseInt(n.paths.getAttribute("cx"),10),u=parseInt(n.paths.getAttribute("cy"),10),h=parseFloat(n.paths.getAttribute("val"));if(i=parseInt(n.paths.getAttribute("rel"),10),t=parseInt(n.paths.parentNode.parentNode.parentNode.getAttribute("rel"),10)-1,l.intersect){var d=x.findAncestor(n.paths,"apexcharts-series");d&&(t=parseInt(d.getAttribute("data:realIndex"),10))}if(l.tooltipLabels.drawSeriesTexts({ttItems:n.ttItems,i:t,j:i,shared:!l.showOnIntersect&&s.config.tooltip.shared,e:a}),"mouseup"===a.type&&l.markerClick(a,t,i),s.globals.capturedSeriesIndex=t,s.globals.capturedDataPointIndex=i,r=c,o=u+s.globals.translateY-1.4*l.tooltipRect.ttHeight,l.w.config.tooltip.followCursor){var f=l.getElGrid().getBoundingClientRect();o=l.e.clientY+s.globals.translateY-f.top}h<0&&(o=u),l.marker.enlargeCurrentPoint(i,n.paths,r,o)}return{x:r,y:o}}},{key:"handleBarTooltip",value:function(e){var t,i,a=e.e,n=e.opt,r=this.w,o=this.ttCtx,s=o.getElTooltip(),l=0,c=0,u=0,h=this.getBarTooltipXY({e:a,opt:n});t=h.i;var d=h.barHeight,f=h.j;r.globals.capturedSeriesIndex=t,r.globals.capturedDataPointIndex=f,r.globals.isBarHorizontal&&o.tooltipUtil.hasBars()||!r.config.tooltip.shared?(c=h.x,u=h.y,i=Array.isArray(r.config.stroke.width)?r.config.stroke.width[t]:r.config.stroke.width,l=c):r.globals.comboCharts||r.config.tooltip.shared||(l/=2),isNaN(u)?u=r.globals.svgHeight-o.tooltipRect.ttHeight:u<0&&(u=0);var p=parseInt(n.paths.parentNode.getAttribute("data:realIndex"),10),m=r.globals.isMultipleYAxis?r.config.yaxis[p]&&r.config.yaxis[p].reversed:r.config.yaxis[0].reversed;if(c+o.tooltipRect.ttWidth>r.globals.gridWidth&&!m?c-=o.tooltipRect.ttWidth:c<0&&(c=0),o.w.config.tooltip.followCursor){var g=o.getElGrid().getBoundingClientRect();u=o.e.clientY-g.top}null===o.tooltip&&(o.tooltip=r.globals.dom.baseEl.querySelector(".apexcharts-tooltip")),r.config.tooltip.shared||(r.globals.comboBarCount>0?o.tooltipPosition.moveXCrosshairs(l+i/2):o.tooltipPosition.moveXCrosshairs(l)),!o.fixedTooltip&&(!r.config.tooltip.shared||r.globals.isBarHorizontal&&o.tooltipUtil.hasBars())&&(m&&(c-=o.tooltipRect.ttWidth)<0&&(c=0),!m||r.globals.isBarHorizontal&&o.tooltipUtil.hasBars()||(u=u+d-2*(r.globals.series[t][f]<0?d:0)),o.tooltipRect.ttHeight+u>r.globals.gridHeight?u=r.globals.gridHeight-o.tooltipRect.ttHeight+r.globals.translateY:(u=u+r.globals.translateY-o.tooltipRect.ttHeight/2)<0&&(u=0),s.style.left=c+r.globals.translateX+"px",s.style.top=u+"px")}},{key:"getBarTooltipXY",value:function(e){var t=e.e,i=e.opt,a=this.w,n=null,r=this.ttCtx,o=0,s=0,l=0,c=0,u=0,h=t.target.classList;if(h.contains("apexcharts-bar-area")||h.contains("apexcharts-candlestick-area")||h.contains("apexcharts-boxPlot-area")||h.contains("apexcharts-rangebar-area")){var d=t.target,f=d.getBoundingClientRect(),p=i.elGrid.getBoundingClientRect(),m=f.height;u=f.height;var g=f.width,v=parseInt(d.getAttribute("cx"),10),y=parseInt(d.getAttribute("cy"),10);c=parseFloat(d.getAttribute("barWidth"));var x="touchmove"===t.type?t.touches[0].clientX:t.clientX;n=parseInt(d.getAttribute("j"),10),o=parseInt(d.parentNode.getAttribute("rel"),10)-1;var b=d.getAttribute("data-range-y1"),_=d.getAttribute("data-range-y2");a.globals.comboCharts&&(o=parseInt(d.parentNode.getAttribute("data:realIndex"),10)),r.tooltipLabels.drawSeriesTexts({ttItems:i.ttItems,i:o,j:n,y1:b?parseInt(b,10):null,y2:_?parseInt(_,10):null,shared:!r.showOnIntersect&&a.config.tooltip.shared,e:t}),a.config.tooltip.followCursor?a.globals.isBarHorizontal?(s=x-p.left+15,l=y-r.dataPointsDividedHeight+m/2-r.tooltipRect.ttHeight/2):(s=a.globals.isXNumeric?v-g/2:v-r.dataPointsDividedWidth+g/2,l=t.clientY-p.top-r.tooltipRect.ttHeight/2-15):a.globals.isBarHorizontal?((s=v)<r.xyRatios.baseLineInvertedY&&(s=v-r.tooltipRect.ttWidth),l=y-r.dataPointsDividedHeight+m/2-r.tooltipRect.ttHeight/2):(s=a.globals.isXNumeric?v-g/2:v-r.dataPointsDividedWidth+g/2,l=y)}return{x:s,y:l,barHeight:u,barWidth:c,i:o,j:n}}}]),e}(),xe=function(){function e(t){s(this,e),this.w=t.w,this.ttCtx=t}return c(e,[{key:"drawXaxisTooltip",value:function(){var e=this.w,t=this.ttCtx,i="bottom"===e.config.xaxis.position;t.xaxisOffY=i?e.globals.gridHeight+1:-e.globals.xAxisHeight-e.config.xaxis.axisTicks.height+3;var a=i?"apexcharts-xaxistooltip apexcharts-xaxistooltip-bottom":"apexcharts-xaxistooltip apexcharts-xaxistooltip-top",n=e.globals.dom.elWrap;t.isXAxisTooltipEnabled&&null===e.globals.dom.baseEl.querySelector(".apexcharts-xaxistooltip")&&(t.xaxisTooltip=document.createElement("div"),t.xaxisTooltip.setAttribute("class",a+" apexcharts-theme-"+e.config.tooltip.theme),n.appendChild(t.xaxisTooltip),t.xaxisTooltipText=document.createElement("div"),t.xaxisTooltipText.classList.add("apexcharts-xaxistooltip-text"),t.xaxisTooltipText.style.fontFamily=e.config.xaxis.tooltip.style.fontFamily||e.config.chart.fontFamily,t.xaxisTooltipText.style.fontSize=e.config.xaxis.tooltip.style.fontSize,t.xaxisTooltip.appendChild(t.xaxisTooltipText))}},{key:"drawYaxisTooltip",value:function(){for(var e=this.w,t=this.ttCtx,i=function(i){var a=e.config.yaxis[i].opposite||e.config.yaxis[i].crosshairs.opposite;t.yaxisOffX=a?e.globals.gridWidth+1:1;var n="apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(i,a?" apexcharts-yaxistooltip-right":" apexcharts-yaxistooltip-left");e.globals.yAxisSameScaleIndices.map((function(t,a){t.map((function(t,a){a===i&&(n+=e.config.yaxis[a].show?" ":" apexcharts-yaxistooltip-hidden")}))}));var r=e.globals.dom.elWrap;null===e.globals.dom.baseEl.querySelector(".apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(i))&&(t.yaxisTooltip=document.createElement("div"),t.yaxisTooltip.setAttribute("class",n+" apexcharts-theme-"+e.config.tooltip.theme),r.appendChild(t.yaxisTooltip),0===i&&(t.yaxisTooltipText=[]),t.yaxisTooltipText[i]=document.createElement("div"),t.yaxisTooltipText[i].classList.add("apexcharts-yaxistooltip-text"),t.yaxisTooltip.appendChild(t.yaxisTooltipText[i]))},a=0;a<e.config.yaxis.length;a++)i(a)}},{key:"setXCrosshairWidth",value:function(){var e=this.w,t=this.ttCtx,i=t.getElXCrosshairs();if(t.xcrosshairsWidth=parseInt(e.config.xaxis.crosshairs.width,10),e.globals.comboCharts){var a=e.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==a&&"barWidth"===e.config.xaxis.crosshairs.width){var n=parseFloat(a.getAttribute("barWidth"));t.xcrosshairsWidth=n}else if("tickWidth"===e.config.xaxis.crosshairs.width){var r=e.globals.labels.length;t.xcrosshairsWidth=e.globals.gridWidth/r}}else if("tickWidth"===e.config.xaxis.crosshairs.width){var o=e.globals.labels.length;t.xcrosshairsWidth=e.globals.gridWidth/o}else if("barWidth"===e.config.xaxis.crosshairs.width){var s=e.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==s){var l=parseFloat(s.getAttribute("barWidth"));t.xcrosshairsWidth=l}else t.xcrosshairsWidth=1}e.globals.isBarHorizontal&&(t.xcrosshairsWidth=0),null!==i&&t.xcrosshairsWidth>0&&i.setAttribute("width",t.xcrosshairsWidth)}},{key:"handleYCrosshair",value:function(){var e=this.w,t=this.ttCtx;t.ycrosshairs=e.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs"),t.ycrosshairsHidden=e.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs-hidden")}},{key:"drawYaxisTooltipText",value:function(e,t,i){var a=this.ttCtx,n=this.w,r=n.globals.yLabelFormatters[e];if(a.yaxisTooltips[e]){var o=a.getElGrid().getBoundingClientRect(),s=(t-o.top)*i.yRatio[e],l=n.globals.maxYArr[e]-n.globals.minYArr[e],c=n.globals.minYArr[e]+(l-s);a.tooltipPosition.moveYCrosshairs(t-o.top),a.yaxisTooltipText[e].innerHTML=r(c),a.tooltipPosition.moveYAxisTooltip(e)}}}]),e}(),be=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w;var i=this.w;this.tConfig=i.config.tooltip,this.tooltipUtil=new pe(this),this.tooltipLabels=new me(this),this.tooltipPosition=new ge(this),this.marker=new ve(this),this.intersect=new ye(this),this.axesTooltip=new xe(this),this.showOnIntersect=this.tConfig.intersect,this.showTooltipTitle=this.tConfig.x.show,this.fixedTooltip=this.tConfig.fixed.enabled,this.xaxisTooltip=null,this.yaxisTTEls=null,this.isBarShared=!i.globals.isBarHorizontal&&this.tConfig.shared,this.lastHoverTime=Date.now()}return c(e,[{key:"getElTooltip",value:function(e){return e||(e=this),e.w.globals.dom.baseEl?e.w.globals.dom.baseEl.querySelector(".apexcharts-tooltip"):null}},{key:"getElXCrosshairs",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-xcrosshairs")}},{key:"getElGrid",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-grid")}},{key:"drawTooltip",value:function(e){var t=this.w;this.xyRatios=e,this.isXAxisTooltipEnabled=t.config.xaxis.tooltip.enabled&&t.globals.axisCharts,this.yaxisTooltips=t.config.yaxis.map((function(e,i){return!!(e.show&&e.tooltip.enabled&&t.globals.axisCharts)})),this.allTooltipSeriesGroups=[],t.globals.axisCharts||(this.showTooltipTitle=!1);var i=document.createElement("div");if(i.classList.add("apexcharts-tooltip"),t.config.tooltip.cssClass&&i.classList.add(t.config.tooltip.cssClass),i.classList.add("apexcharts-theme-".concat(this.tConfig.theme)),t.globals.dom.elWrap.appendChild(i),t.globals.axisCharts){this.axesTooltip.drawXaxisTooltip(),this.axesTooltip.drawYaxisTooltip(),this.axesTooltip.setXCrosshairWidth(),this.axesTooltip.handleYCrosshair();var a=new G(this.ctx);this.xAxisTicksPositions=a.getXAxisTicksPositions()}if(!t.globals.comboCharts&&!this.tConfig.intersect&&"rangeBar"!==t.config.chart.type||this.tConfig.shared||(this.showOnIntersect=!0),0!==t.config.markers.size&&0!==t.globals.markers.largestSize||this.marker.drawDynamicPoints(this),t.globals.collapsedSeries.length!==t.globals.series.length){this.dataPointsDividedHeight=t.globals.gridHeight/t.globals.dataPoints,this.dataPointsDividedWidth=t.globals.gridWidth/t.globals.dataPoints,this.showTooltipTitle&&(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.classList.add("apexcharts-tooltip-title"),this.tooltipTitle.style.fontFamily=this.tConfig.style.fontFamily||t.config.chart.fontFamily,this.tooltipTitle.style.fontSize=this.tConfig.style.fontSize,i.appendChild(this.tooltipTitle));var n=t.globals.series.length;(t.globals.xyCharts||t.globals.comboCharts)&&this.tConfig.shared&&(n=this.showOnIntersect?1:t.globals.series.length),this.legendLabels=t.globals.dom.baseEl.querySelectorAll(".apexcharts-legend-text"),this.ttItems=this.createTTElements(n),this.addSVGEvents()}}},{key:"createTTElements",value:function(e){for(var t=this,i=this.w,a=[],n=this.getElTooltip(),r=function(r){var o=document.createElement("div");o.classList.add("apexcharts-tooltip-series-group"),o.style.order=i.config.tooltip.inverseOrder?e-r:r+1,t.tConfig.shared&&t.tConfig.enabledOnSeries&&Array.isArray(t.tConfig.enabledOnSeries)&&t.tConfig.enabledOnSeries.indexOf(r)<0&&o.classList.add("apexcharts-tooltip-series-group-hidden");var s=document.createElement("span");s.classList.add("apexcharts-tooltip-marker"),s.style.backgroundColor=i.globals.colors[r],o.appendChild(s);var l=document.createElement("div");l.classList.add("apexcharts-tooltip-text"),l.style.fontFamily=t.tConfig.style.fontFamily||i.config.chart.fontFamily,l.style.fontSize=t.tConfig.style.fontSize,["y","goals","z"].forEach((function(e){var t=document.createElement("div");t.classList.add("apexcharts-tooltip-".concat(e,"-group"));var i=document.createElement("span");i.classList.add("apexcharts-tooltip-text-".concat(e,"-label")),t.appendChild(i);var a=document.createElement("span");a.classList.add("apexcharts-tooltip-text-".concat(e,"-value")),t.appendChild(a),l.appendChild(t)})),o.appendChild(l),n.appendChild(o),a.push(o)},o=0;o<e;o++)r(o);return a}},{key:"addSVGEvents",value:function(){var e=this.w,t=e.config.chart.type,i=this.getElTooltip(),a=!("bar"!==t&&"candlestick"!==t&&"boxPlot"!==t&&"rangeBar"!==t),n="area"===t||"line"===t||"scatter"===t||"bubble"===t||"radar"===t,r=e.globals.dom.Paper.node,o=this.getElGrid();o&&(this.seriesBound=o.getBoundingClientRect());var s,l=[],c=[],u={hoverArea:r,elGrid:o,tooltipEl:i,tooltipY:l,tooltipX:c,ttItems:this.ttItems};if(e.globals.axisCharts&&(n?s=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:longestSeries='true'] .apexcharts-marker"):a?s=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-bar-area, .apexcharts-series .apexcharts-candlestick-area, .apexcharts-series .apexcharts-boxPlot-area, .apexcharts-series .apexcharts-rangebar-area"):"heatmap"!==t&&"treemap"!==t||(s=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-heatmap, .apexcharts-series .apexcharts-treemap")),s&&s.length))for(var h=0;h<s.length;h++)l.push(s[h].getAttribute("cy")),c.push(s[h].getAttribute("cx"));if(e.globals.xyCharts&&!this.showOnIntersect||e.globals.comboCharts&&!this.showOnIntersect||a&&this.tooltipUtil.hasBars()&&this.tConfig.shared)this.addPathsEventListeners([r],u);else if(a&&!e.globals.comboCharts||n&&this.showOnIntersect)this.addDatapointEventsListeners(u);else if(!e.globals.axisCharts||"heatmap"===t||"treemap"===t){var d=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series");this.addPathsEventListeners(d,u)}if(this.showOnIntersect){var f=e.globals.dom.baseEl.querySelectorAll(".apexcharts-line-series .apexcharts-marker, .apexcharts-area-series .apexcharts-marker");f.length>0&&this.addPathsEventListeners(f,u),this.tooltipUtil.hasBars()&&!this.tConfig.shared&&this.addDatapointEventsListeners(u)}}},{key:"drawFixedTooltipRect",value:function(){var e=this.w,t=this.getElTooltip(),i=t.getBoundingClientRect(),a=i.width+10,n=i.height+10,r=this.tConfig.fixed.offsetX,o=this.tConfig.fixed.offsetY,s=this.tConfig.fixed.position.toLowerCase();return s.indexOf("right")>-1&&(r=r+e.globals.svgWidth-a+10),s.indexOf("bottom")>-1&&(o=o+e.globals.svgHeight-n-10),t.style.left=r+"px",t.style.top=o+"px",{x:r,y:o,ttWidth:a,ttHeight:n}}},{key:"addDatapointEventsListeners",value:function(e){var t=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers .apexcharts-marker, .apexcharts-bar-area, .apexcharts-candlestick-area, .apexcharts-boxPlot-area, .apexcharts-rangebar-area");this.addPathsEventListeners(t,e)}},{key:"addPathsEventListeners",value:function(e,t){for(var i=this,a=function(a){var n={paths:e[a],tooltipEl:t.tooltipEl,tooltipY:t.tooltipY,tooltipX:t.tooltipX,elGrid:t.elGrid,hoverArea:t.hoverArea,ttItems:t.ttItems};["mousemove","mouseup","touchmove","mouseout","touchend"].map((function(t){return e[a].addEventListener(t,i.onSeriesHover.bind(i,n),{capture:!1,passive:!0})}))},n=0;n<e.length;n++)a(n)}},{key:"onSeriesHover",value:function(e,t){var i=this,a=Date.now()-this.lastHoverTime;a>=100?this.seriesHover(e,t):(clearTimeout(this.seriesHoverTimeout),this.seriesHoverTimeout=setTimeout((function(){i.seriesHover(e,t)}),100-a))}},{key:"seriesHover",value:function(e,t){var i=this;this.lastHoverTime=Date.now();var a=[],n=this.w;n.config.chart.group&&(a=this.ctx.getGroupedCharts()),n.globals.axisCharts&&(n.globals.minX===-1/0&&n.globals.maxX===1/0||0===n.globals.dataPoints)||(a.length?a.forEach((function(a){var n=i.getElTooltip(a),r={paths:e.paths,tooltipEl:n,tooltipY:e.tooltipY,tooltipX:e.tooltipX,elGrid:e.elGrid,hoverArea:e.hoverArea,ttItems:a.w.globals.tooltip.ttItems};a.w.globals.minX===i.w.globals.minX&&a.w.globals.maxX===i.w.globals.maxX&&a.w.globals.tooltip.seriesHoverByContext({chartCtx:a,ttCtx:a.w.globals.tooltip,opt:r,e:t})})):this.seriesHoverByContext({chartCtx:this.ctx,ttCtx:this.w.globals.tooltip,opt:e,e:t}))}},{key:"seriesHoverByContext",value:function(e){var t=e.chartCtx,i=e.ttCtx,a=e.opt,n=e.e,r=t.w,o=this.getElTooltip();o&&(i.tooltipRect={x:0,y:0,ttWidth:o.getBoundingClientRect().width,ttHeight:o.getBoundingClientRect().height},i.e=n,!i.tooltipUtil.hasBars()||r.globals.comboCharts||i.isBarShared||this.tConfig.onDatasetHover.highlightDataSeries&&new Y(t).toggleSeriesOnHover(n,n.target.parentNode),i.fixedTooltip&&i.drawFixedTooltipRect(),r.globals.axisCharts?i.axisChartsTooltips({e:n,opt:a,tooltipRect:i.tooltipRect}):i.nonAxisChartsTooltips({e:n,opt:a,tooltipRect:i.tooltipRect}))}},{key:"axisChartsTooltips",value:function(e){var t,i,a=e.e,n=e.opt,r=this.w,o=n.elGrid.getBoundingClientRect(),s="touchmove"===a.type?a.touches[0].clientX:a.clientX,l="touchmove"===a.type?a.touches[0].clientY:a.clientY;if(this.clientY=l,this.clientX=s,r.globals.capturedSeriesIndex=-1,r.globals.capturedDataPointIndex=-1,l<o.top||l>o.top+o.height)this.handleMouseOut(n);else{if(Array.isArray(this.tConfig.enabledOnSeries)&&!r.config.tooltip.shared){var c=parseInt(n.paths.getAttribute("index"),10);if(this.tConfig.enabledOnSeries.indexOf(c)<0)return void this.handleMouseOut(n)}var u=this.getElTooltip(),h=this.getElXCrosshairs(),d=r.globals.xyCharts||"bar"===r.config.chart.type&&!r.globals.isBarHorizontal&&this.tooltipUtil.hasBars()&&this.tConfig.shared||r.globals.comboCharts&&this.tooltipUtil.hasBars();if("mousemove"===a.type||"touchmove"===a.type||"mouseup"===a.type){if(r.globals.collapsedSeries.length+r.globals.ancillaryCollapsedSeries.length===r.globals.series.length)return;null!==h&&h.classList.add("apexcharts-active");var f=this.yaxisTooltips.filter((function(e){return!0===e}));if(null!==this.ycrosshairs&&f.length&&this.ycrosshairs.classList.add("apexcharts-active"),d&&!this.showOnIntersect)this.handleStickyTooltip(a,s,l,n);else if("heatmap"===r.config.chart.type||"treemap"===r.config.chart.type){var p=this.intersect.handleHeatTreeTooltip({e:a,opt:n,x:t,y:i,type:r.config.chart.type});t=p.x,i=p.y,u.style.left=t+"px",u.style.top=i+"px"}else this.tooltipUtil.hasBars()&&this.intersect.handleBarTooltip({e:a,opt:n}),this.tooltipUtil.hasMarkers()&&this.intersect.handleMarkerTooltip({e:a,opt:n,x:t,y:i});if(this.yaxisTooltips.length)for(var m=0;m<r.config.yaxis.length;m++)this.axesTooltip.drawYaxisTooltipText(m,l,this.xyRatios);n.tooltipEl.classList.add("apexcharts-active")}else"mouseout"!==a.type&&"touchend"!==a.type||this.handleMouseOut(n)}}},{key:"nonAxisChartsTooltips",value:function(e){var t=e.e,i=e.opt,a=e.tooltipRect,n=this.w,r=i.paths.getAttribute("rel"),o=this.getElTooltip(),s=n.globals.dom.elWrap.getBoundingClientRect();if("mousemove"===t.type||"touchmove"===t.type){o.classList.add("apexcharts-active"),this.tooltipLabels.drawSeriesTexts({ttItems:i.ttItems,i:parseInt(r,10)-1,shared:!1});var l=n.globals.clientX-s.left-a.ttWidth/2,c=n.globals.clientY-s.top-a.ttHeight-10;if(o.style.left=l+"px",o.style.top=c+"px",n.config.legend.tooltipHoverFormatter){var u=r-1,h=(0,n.config.legend.tooltipHoverFormatter)(this.legendLabels[u].getAttribute("data:default-text"),{seriesIndex:u,dataPointIndex:u,w:n});this.legendLabels[u].innerHTML=h}}else"mouseout"!==t.type&&"touchend"!==t.type||(o.classList.remove("apexcharts-active"),n.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach((function(e){var t=e.getAttribute("data:default-text");e.innerHTML=decodeURIComponent(t)})))}},{key:"handleStickyTooltip",value:function(e,t,i,a){var n=this.w,r=this.tooltipUtil.getNearestValues({context:this,hoverArea:a.hoverArea,elGrid:a.elGrid,clientX:t,clientY:i}),o=r.j,s=r.capturedSeries,l=a.elGrid.getBoundingClientRect();r.hoverX<0||r.hoverX>l.width?this.handleMouseOut(a):null!==s?this.handleStickyCapturedSeries(e,s,a,o):(this.tooltipUtil.isXoverlap(o)||n.globals.isBarHorizontal)&&this.create(e,this,0,o,a.ttItems)}},{key:"handleStickyCapturedSeries",value:function(e,t,i,a){var n=this.w;this.tConfig.shared||null!==n.globals.series[t][a]?void 0!==n.globals.series[t][a]?this.tConfig.shared&&this.tooltipUtil.isXoverlap(a)&&this.tooltipUtil.isInitialSeriesSameLen()?this.create(e,this,t,a,i.ttItems):this.create(e,this,t,a,i.ttItems,!1):this.tooltipUtil.isXoverlap(a)&&this.create(e,this,0,a,i.ttItems):this.handleMouseOut(i)}},{key:"deactivateHoverFilter",value:function(){for(var e=this.w,t=new w(this.ctx),i=e.globals.dom.Paper.select(".apexcharts-bar-area"),a=0;a<i.length;a++)t.pathMouseLeave(i[a])}},{key:"handleMouseOut",value:function(e){var t=this.w,i=this.getElXCrosshairs();if(e.tooltipEl.classList.remove("apexcharts-active"),this.deactivateHoverFilter(),"bubble"!==t.config.chart.type&&this.marker.resetPointsSize(),null!==i&&i.classList.remove("apexcharts-active"),null!==this.ycrosshairs&&this.ycrosshairs.classList.remove("apexcharts-active"),this.isXAxisTooltipEnabled&&this.xaxisTooltip.classList.remove("apexcharts-active"),this.yaxisTooltips.length){null===this.yaxisTTEls&&(this.yaxisTTEls=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));for(var a=0;a<this.yaxisTTEls.length;a++)this.yaxisTTEls[a].classList.remove("apexcharts-active")}t.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach((function(e){var t=e.getAttribute("data:default-text");e.innerHTML=decodeURIComponent(t)}))}},{key:"markerClick",value:function(e,t,i){var a=this.w;"function"==typeof a.config.chart.events.markerClick&&a.config.chart.events.markerClick(e,this.ctx,{seriesIndex:t,dataPointIndex:i,w:a}),this.ctx.events.fireEvent("markerClick",[e,this.ctx,{seriesIndex:t,dataPointIndex:i,w:a}])}},{key:"create",value:function(e,t,i,a,n){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=this.w,s=t;"mouseup"===e.type&&this.markerClick(e,i,a),null===r&&(r=this.tConfig.shared);var l=this.tooltipUtil.hasMarkers(),c=this.tooltipUtil.getElBars();if(o.config.legend.tooltipHoverFormatter){var u=o.config.legend.tooltipHoverFormatter,h=Array.from(this.legendLabels);h.forEach((function(e){var t=e.getAttribute("data:default-text");e.innerHTML=decodeURIComponent(t)}));for(var d=0;d<h.length;d++){var f=h[d],p=parseInt(f.getAttribute("i"),10),m=decodeURIComponent(f.getAttribute("data:default-text")),g=u(m,{seriesIndex:r?p:i,dataPointIndex:a,w:o});if(r)f.innerHTML=o.globals.collapsedSeriesIndices.indexOf(p)<0?g:m;else if(f.innerHTML=p===i?g:m,i===p)break}}if(r){if(s.tooltipLabels.drawSeriesTexts({ttItems:n,i:i,j:a,shared:!this.showOnIntersect&&this.tConfig.shared}),l&&(o.globals.markers.largestSize>0?s.marker.enlargePoints(a):s.tooltipPosition.moveDynamicPointsOnHover(a)),this.tooltipUtil.hasBars()&&(this.barSeriesHeight=this.tooltipUtil.getBarsHeight(c),this.barSeriesHeight>0)){var v=new w(this.ctx),y=o.globals.dom.Paper.select(".apexcharts-bar-area[j='".concat(a,"']"));this.deactivateHoverFilter(),this.tooltipPosition.moveStickyTooltipOverBars(a);for(var x=0;x<y.length;x++)v.pathMouseEnter(y[x])}}else s.tooltipLabels.drawSeriesTexts({shared:!1,ttItems:n,i:i,j:a}),this.tooltipUtil.hasBars()&&s.tooltipPosition.moveStickyTooltipOverBars(a),l&&s.tooltipPosition.moveMarkers(i,a)}}]),e}(),_e=function(){function e(t){s(this,e),this.w=t.w,this.barCtx=t,this.totalFormatter=this.w.config.plotOptions.bar.dataLabels.total.formatter,this.totalFormatter||(this.totalFormatter=this.w.config.dataLabels.formatter)}return c(e,[{key:"handleBarDataLabels",value:function(e){var t=e.x,i=e.y,a=e.y1,n=e.y2,r=e.i,o=e.j,s=e.realIndex,l=e.series,c=e.barHeight,u=e.barWidth,h=e.barYPosition,d=e.visibleSeries,f=e.renderedPath,p=this.w,m=new w(this.barCtx.ctx),g=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[s]:this.barCtx.strokeWidth,v=t+parseFloat(u*d),y=i+parseFloat(c*d);p.globals.isXNumeric&&!p.globals.isBarHorizontal&&(v=t+parseFloat(u*(d+1)),y=i+parseFloat(c*(d+1))-g);var x,b,_=null,k=t,S=i,C=p.config.dataLabels,A=this.barCtx.barOptions.dataLabels,O=this.barCtx.barOptions.dataLabels.total;void 0!==h&&this.barCtx.isRangeBar&&(y=h,S=h);var T=C.offsetX,M=C.offsetY,E={width:0,height:0};if(p.config.dataLabels.enabled){var I=this.barCtx.series[r][o];E=m.getTextRects(p.globals.yLabelFormatters[0](I),parseFloat(C.style.fontSize))}var P={x:t,y:i,i:r,j:o,realIndex:s,renderedPath:f,bcx:v,bcy:y,barHeight:c,barWidth:u,textRects:E,strokeWidth:g,dataLabelsX:k,dataLabelsY:S,dataLabelsConfig:C,barDataLabelsConfig:A,barTotalDataLabelsConfig:O,offX:T,offY:M};return b=this.barCtx.isHorizontal?this.calculateBarsDataLabelsPosition(P):this.calculateColumnsDataLabelsPosition(P),f.attr({cy:b.bcy,cx:b.bcx,j:o,val:l[r][o],barHeight:c,barWidth:u}),x=this.drawCalculatedDataLabels({x:b.dataLabelsX,y:b.dataLabelsY,val:this.barCtx.isRangeBar?[a,n]:l[r][o],i:s,j:o,barWidth:u,barHeight:c,textRects:E,dataLabelsConfig:C}),p.config.chart.stacked&&O.enabled&&(_=this.drawTotalDataLabels({x:b.totalDataLabelsX,y:b.totalDataLabelsY,realIndex:s,textAnchor:b.totalDataLabelsAnchor,val:this.getStackedTotalDataLabel({realIndex:s,j:o}),dataLabelsConfig:C,barTotalDataLabelsConfig:O})),{dataLabels:x,totalDataLabels:_}}},{key:"getStackedTotalDataLabel",value:function(e){var t=e.realIndex,i=e.j,a=this.w,n=this.barCtx.stackedSeriesTotals[i];return this.totalFormatter&&(n=this.totalFormatter(n,r(r({},a),{},{seriesIndex:t,dataPointIndex:i,w:a}))),n}},{key:"calculateColumnsDataLabelsPosition",value:function(e){var t,i,a,n=this.w,r=e.i,o=e.j,s=e.realIndex,l=e.y,c=e.bcx,u=e.barWidth,h=e.barHeight,d=e.textRects,f=e.dataLabelsY,p=e.dataLabelsConfig,m=e.barDataLabelsConfig,g=e.barTotalDataLabelsConfig,v=e.strokeWidth,y=e.offX,x=e.offY;h=Math.abs(h);var b="vertical"===n.config.plotOptions.bar.dataLabels.orientation;c-=v/2;var _=n.globals.gridWidth/n.globals.dataPoints;t=n.globals.isXNumeric?c-u/2+y:c-_+u/2+y,b&&(t=t+d.height/2-v/2-2);var k=this.barCtx.series[r][o]<0,S=l;switch(this.barCtx.isReversed&&(S=l-h+(k?2*h:0),l-=h),m.position){case"center":f=b?k?S+h/2+x:S+h/2-x:k?S-h/2+d.height/2+x:S+h/2+d.height/2-x;break;case"bottom":f=b?k?S+h+x:S+h-x:k?S-h+d.height+v+x:S+h-d.height/2+v-x;break;case"top":f=b?k?S+x:S-x:k?S-d.height/2-x:S+d.height+x}if(this.barCtx.lastActiveBarSerieIndex===s&&g.enabled){var C=new w(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:s,j:o}),p.fontSize);i=k?S-C.height/2-x-g.offsetY+18:S+C.height+x+g.offsetY-18,a=t+g.offsetX}return n.config.chart.stacked||(f<0?f=0+v:f+d.height/3>n.globals.gridHeight&&(f=n.globals.gridHeight-v)),{bcx:c,bcy:l,dataLabelsX:t,dataLabelsY:f,totalDataLabelsX:a,totalDataLabelsY:i,totalDataLabelsAnchor:"middle"}}},{key:"calculateBarsDataLabelsPosition",value:function(e){var t=this.w,i=e.x,a=e.i,n=e.j,r=e.realIndex,o=e.bcy,s=e.barHeight,l=e.barWidth,c=e.textRects,u=e.dataLabelsX,h=e.strokeWidth,d=e.dataLabelsConfig,f=e.barDataLabelsConfig,p=e.barTotalDataLabelsConfig,m=e.offX,g=e.offY,v=t.globals.gridHeight/t.globals.dataPoints;l=Math.abs(l);var y,x,b=o-(this.barCtx.isRangeBar?0:v)+s/2+c.height/2+g-3,_="start",k=this.barCtx.series[a][n]<0,S=i;switch(this.barCtx.isReversed&&(S=i+l-(k?2*l:0),i=t.globals.gridWidth-l),f.position){case"center":u=k?S+l/2-m:Math.max(c.width/2,S-l/2)+m;break;case"bottom":u=k?S+l-h-Math.round(c.width/2)-m:S-l+h+Math.round(c.width/2)+m;break;case"top":u=k?S-h+Math.round(c.width/2)-m:S-h-Math.round(c.width/2)+m}if(this.barCtx.lastActiveBarSerieIndex===r&&p.enabled){var C=new w(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:r,j:n}),d.fontSize);k?(y=S-h+Math.round(C.width/2)-m-p.offsetX-15,_="end"):y=S-h-Math.round(C.width/2)+m+p.offsetX+15,x=b+p.offsetY}return t.config.chart.stacked||(u<0?u=u+c.width+h:u+c.width/2>t.globals.gridWidth&&(u=t.globals.gridWidth-c.width-h)),{bcx:i,bcy:o,dataLabelsX:u,dataLabelsY:b,totalDataLabelsX:y,totalDataLabelsY:x,totalDataLabelsAnchor:_}}},{key:"drawCalculatedDataLabels",value:function(e){var t=e.x,i=e.y,a=e.val,n=e.i,o=e.j,s=e.textRects,l=e.barHeight,c=e.barWidth,u=e.dataLabelsConfig,h=this.w,d="rotate(0)";"vertical"===h.config.plotOptions.bar.dataLabels.orientation&&(d="rotate(-90, ".concat(t,", ").concat(i,")"));var f=new V(this.barCtx.ctx),p=new w(this.barCtx.ctx),m=u.formatter,g=null,v=h.globals.collapsedSeriesIndices.indexOf(n)>-1;if(u.enabled&&!v){g=p.group({class:"apexcharts-data-labels",transform:d});var y="";void 0!==a&&(y=m(a,r(r({},h),{},{seriesIndex:n,dataPointIndex:o,w:h})));var x=h.globals.series[n][o]<0,b=h.config.plotOptions.bar.dataLabels.position;"vertical"===h.config.plotOptions.bar.dataLabels.orientation&&("top"===b&&(u.textAnchor=x?"end":"start"),"center"===b&&(u.textAnchor="middle"),"bottom"===b&&(u.textAnchor=x?"end":"start")),this.barCtx.isRangeBar&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&c<p.getTextRects(y,parseFloat(u.style.fontSize)).width&&(y=""),h.config.chart.stacked&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&(this.barCtx.isHorizontal?s.width/1.6>Math.abs(c)&&(y=""):s.height/1.6>Math.abs(l)&&(y=""));var _=r({},u);this.barCtx.isHorizontal&&a<0&&("start"===u.textAnchor?_.textAnchor="end":"end"===u.textAnchor&&(_.textAnchor="start")),f.plotDataLabelsText({x:t,y:i,text:y,i:n,j:o,parent:g,dataLabelsConfig:_,alwaysDrawDataLabel:!0,offsetCorrection:!0})}return g}},{key:"drawTotalDataLabels",value:function(e){var t,i=e.x,a=e.y,n=e.val,r=e.realIndex,o=e.textAnchor,s=e.barTotalDataLabelsConfig,l=new w(this.barCtx.ctx);return s.enabled&&void 0!==i&&void 0!==a&&this.barCtx.lastActiveBarSerieIndex===r&&(t=l.drawText({x:i,y:a,foreColor:s.style.color,text:n,textAnchor:o,fontFamily:s.style.fontFamily,fontSize:s.style.fontSize,fontWeight:s.style.fontWeight})),t}}]),e}(),we=function(){function e(t){s(this,e),this.w=t.w,this.barCtx=t}return c(e,[{key:"initVariables",value:function(e){var t=this.w;this.barCtx.series=e,this.barCtx.totalItems=0,this.barCtx.seriesLen=0,this.barCtx.visibleI=-1,this.barCtx.visibleItems=1;for(var i=0;i<e.length;i++)if(e[i].length>0&&(this.barCtx.seriesLen=this.barCtx.seriesLen+1,this.barCtx.totalItems+=e[i].length),t.globals.isXNumeric)for(var a=0;a<e[i].length;a++)t.globals.seriesX[i][a]>t.globals.minX&&t.globals.seriesX[i][a]<t.globals.maxX&&this.barCtx.visibleItems++;else this.barCtx.visibleItems=t.globals.dataPoints;0===this.barCtx.seriesLen&&(this.barCtx.seriesLen=1),this.barCtx.zeroSerieses=[],this.barCtx.radiusOnSeriesNumber=e.length-1,t.globals.comboCharts||this.checkZeroSeries({series:e})}},{key:"initialPositions",value:function(){var e,t,i,a,n,r,o,s,l=this.w,c=l.globals.dataPoints;this.barCtx.isRangeBar&&(c=l.globals.labels.length);var u=this.barCtx.seriesLen;if(l.config.plotOptions.bar.rangeBarGroupRows&&(u=1),this.barCtx.isHorizontal)n=(i=l.globals.gridHeight/c)/u,l.globals.isXNumeric&&(n=(i=l.globals.gridHeight/this.barCtx.totalItems)/this.barCtx.seriesLen),n=n*parseInt(this.barCtx.barOptions.barHeight,10)/100,s=this.barCtx.baseLineInvertedY+l.globals.padHorizontal+(this.barCtx.isReversed?l.globals.gridWidth:0)-(this.barCtx.isReversed?2*this.barCtx.baseLineInvertedY:0),t=(i-n*this.barCtx.seriesLen)/2;else{if(a=l.globals.gridWidth/this.barCtx.visibleItems,l.config.xaxis.convertedCatToNumeric&&(a=l.globals.gridWidth/l.globals.dataPoints),r=a/this.barCtx.seriesLen*parseInt(this.barCtx.barOptions.columnWidth,10)/100,l.globals.isXNumeric){var h=this.barCtx.xRatio;l.config.xaxis.convertedCatToNumeric&&(h=this.barCtx.initialXRatio),l.globals.minXDiff&&.5!==l.globals.minXDiff&&l.globals.minXDiff/h>0&&(a=l.globals.minXDiff/h),(r=a/this.barCtx.seriesLen*parseInt(this.barCtx.barOptions.columnWidth,10)/100)<1&&(r=1)}o=l.globals.gridHeight-this.barCtx.baseLineY[this.barCtx.yaxisIndex]-(this.barCtx.isReversed?l.globals.gridHeight:0)+(this.barCtx.isReversed?2*this.barCtx.baseLineY[this.barCtx.yaxisIndex]:0),e=l.globals.padHorizontal+(a-r*this.barCtx.seriesLen)/2}return{x:e,y:t,yDivision:i,xDivision:a,barHeight:n,barWidth:r,zeroH:o,zeroW:s}}},{key:"getPathFillColor",value:function(e,t,i,a){var n,r,o,s,l=this.w,c=new F(this.barCtx.ctx),u=null,h=this.barCtx.barOptions.distributed?i:t;return this.barCtx.barOptions.colors.ranges.length>0&&this.barCtx.barOptions.colors.ranges.map((function(a){e[t][i]>=a.from&&e[t][i]<=a.to&&(u=a.color)})),l.config.series[t].data[i]&&l.config.series[t].data[i].fillColor&&(u=l.config.series[t].data[i].fillColor),c.fillPath({seriesNumber:this.barCtx.barOptions.distributed?h:a,dataPointIndex:i,color:u,value:e[t][i],fillConfig:null===(n=l.config.series[t].data[i])||void 0===n?void 0:n.fill,fillType:null!==(r=l.config.series[t].data[i])&&void 0!==r&&null!==(o=r.fill)&&void 0!==o&&o.type?null===(s=l.config.series[t].data[i])||void 0===s?void 0:s.fill.type:l.config.fill.type})}},{key:"getStrokeWidth",value:function(e,t,i){var a=0,n=this.w;return void 0===this.barCtx.series[e][t]||null===this.barCtx.series[e][t]?this.barCtx.isNullValue=!0:this.barCtx.isNullValue=!1,n.config.stroke.show&&(this.barCtx.isNullValue||(a=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[i]:this.barCtx.strokeWidth)),a}},{key:"shouldApplyRadius",value:function(e){var t=this.w,i=!1;return t.config.plotOptions.bar.borderRadius>0&&(t.config.chart.stacked&&"last"===t.config.plotOptions.bar.borderRadiusWhenStacked?this.barCtx.lastActiveBarSerieIndex===e&&(i=!0):i=!0),i}},{key:"barBackground",value:function(e){var t=e.j,i=e.i,a=e.x1,n=e.x2,r=e.y1,o=e.y2,s=e.elSeries,l=this.w,c=new w(this.barCtx.ctx),u=new Y(this.barCtx.ctx).getActiveConfigSeriesIndex();if(this.barCtx.barOptions.colors.backgroundBarColors.length>0&&u===i){t>=this.barCtx.barOptions.colors.backgroundBarColors.length&&(t%=this.barCtx.barOptions.colors.backgroundBarColors.length);var h=this.barCtx.barOptions.colors.backgroundBarColors[t],d=c.drawRect(void 0!==a?a:0,void 0!==r?r:0,void 0!==n?n:l.globals.gridWidth,void 0!==o?o:l.globals.gridHeight,this.barCtx.barOptions.colors.backgroundBarRadius,h,this.barCtx.barOptions.colors.backgroundBarOpacity);s.add(d),d.node.classList.add("apexcharts-backgroundBar")}}},{key:"getColumnPaths",value:function(e){var t,i=e.barWidth,a=e.barXPosition,n=e.y1,r=e.y2,o=e.strokeWidth,s=e.realIndex,l=e.i,c=e.j,u=e.w,h=new w(this.barCtx.ctx);(o=Array.isArray(o)?o[s]:o)||(o=0);var d=i,f=a;null!==(t=u.config.series[s].data[c])&&void 0!==t&&t.columnWidthOffset&&(f=a-u.config.series[s].data[c].columnWidthOffset/2,d=i+u.config.series[s].data[c].columnWidthOffset);var p=f,m=f+d;n+=.001,r+=.001;var g=h.move(p,n),v=h.move(p,n),y=h.line(m-o,n);return u.globals.previousPaths.length>0&&(v=this.barCtx.getPreviousPath(s,c,!1)),g=g+h.line(p,r)+h.line(m-o,r)+h.line(m-o,n)+("around"===u.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),v=v+h.line(p,n)+y+y+y+y+y+h.line(p,n)+("around"===u.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),this.shouldApplyRadius(s)&&(g=h.roundPathCorners(g,u.config.plotOptions.bar.borderRadius)),u.config.chart.stacked&&(this.barCtx.yArrj.push(r),this.barCtx.yArrjF.push(Math.abs(n-r)),this.barCtx.yArrjVal.push(this.barCtx.series[l][c])),{pathTo:g,pathFrom:v}}},{key:"getBarpaths",value:function(e){var t,i=e.barYPosition,a=e.barHeight,n=e.x1,r=e.x2,o=e.strokeWidth,s=e.realIndex,l=e.i,c=e.j,u=e.w,h=new w(this.barCtx.ctx);(o=Array.isArray(o)?o[s]:o)||(o=0);var d=i,f=a;null!==(t=u.config.series[s].data[c])&&void 0!==t&&t.barHeightOffset&&(d=i-u.config.series[s].data[c].barHeightOffset/2,f=a+u.config.series[s].data[c].barHeightOffset);var p=d,m=d+f;n+=.001,r+=.001;var g=h.move(n,p),v=h.move(n,p);u.globals.previousPaths.length>0&&(v=this.barCtx.getPreviousPath(s,c,!1));var y=h.line(n,m-o);return g=g+h.line(r,p)+h.line(r,m-o)+y+("around"===u.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),v=v+h.line(n,p)+y+y+y+y+y+h.line(n,p)+("around"===u.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),this.shouldApplyRadius(s)&&(g=h.roundPathCorners(g,u.config.plotOptions.bar.borderRadius)),u.config.chart.stacked&&(this.barCtx.xArrj.push(r),this.barCtx.xArrjF.push(Math.abs(n-r)),this.barCtx.xArrjVal.push(this.barCtx.series[l][c])),{pathTo:g,pathFrom:v}}},{key:"checkZeroSeries",value:function(e){for(var t=e.series,i=this.w,a=0;a<t.length;a++){for(var n=0,r=0;r<t[i.globals.maxValsInArrayIndex].length;r++)n+=t[a][r];0===n&&this.barCtx.zeroSerieses.push(a)}for(var o=t.length-1;o>=0;o--)this.barCtx.zeroSerieses.indexOf(o)>-1&&o===this.radiusOnSeriesNumber&&(this.barCtx.radiusOnSeriesNumber-=1);for(var s=t.length-1;s>=0;s--)i.globals.collapsedSeriesIndices.indexOf(this.barCtx.radiusOnSeriesNumber)>-1&&(this.barCtx.radiusOnSeriesNumber-=1)}},{key:"getXForValue",value:function(e,t){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=i?t:null;return null!=e&&(a=t+e/this.barCtx.invertedYRatio-2*(this.barCtx.isReversed?e/this.barCtx.invertedYRatio:0)),a}},{key:"getYForValue",value:function(e,t){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=i?t:null;return null!=e&&(a=t-e/this.barCtx.yRatio[this.barCtx.yaxisIndex]+2*(this.barCtx.isReversed?e/this.barCtx.yRatio[this.barCtx.yaxisIndex]:0)),a}},{key:"getGoalValues",value:function(e,t,i,a,n){var r=this,o=this.w,s=[];return o.globals.seriesGoals[a]&&o.globals.seriesGoals[a][n]&&Array.isArray(o.globals.seriesGoals[a][n])&&o.globals.seriesGoals[a][n].forEach((function(a){var n;s.push((u(n={},e,"x"===e?r.getXForValue(a.value,t,!1):r.getYForValue(a.value,i,!1)),u(n,"attrs",a),n))})),s}},{key:"drawGoalLine",value:function(e){var t=e.barXPosition,i=e.barYPosition,a=e.goalX,n=e.goalY,r=e.barWidth,o=e.barHeight,s=new w(this.barCtx.ctx),l=s.group({className:"apexcharts-bar-goals-groups"}),c=null;return this.barCtx.isHorizontal?Array.isArray(a)&&a.forEach((function(e){var t=void 0!==e.attrs.strokeHeight?e.attrs.strokeHeight:o/2,a=i+t+o/2;c=s.drawLine(e.x,a-2*t,e.x,a,e.attrs.strokeColor?e.attrs.strokeColor:void 0,e.attrs.strokeDashArray,e.attrs.strokeWidth?e.attrs.strokeWidth:2,e.attrs.strokeLineCap),l.add(c)})):Array.isArray(n)&&n.forEach((function(e){var i=void 0!==e.attrs.strokeWidth?e.attrs.strokeWidth:r/2,a=t+i+r/2;c=s.drawLine(a-2*i,e.y,a,e.y,e.attrs.strokeColor?e.attrs.strokeColor:void 0,e.attrs.strokeDashArray,e.attrs.strokeHeight?e.attrs.strokeHeight:2,e.attrs.strokeLineCap),l.add(c)})),l}}]),e}(),ke=function(){function e(t,i){s(this,e),this.ctx=t,this.w=t.w;var a=this.w;this.barOptions=a.config.plotOptions.bar,this.isHorizontal=this.barOptions.horizontal,this.strokeWidth=a.config.stroke.width,this.isNullValue=!1,this.isRangeBar=a.globals.seriesRange.length&&this.isHorizontal,this.xyRatios=i,null!==this.xyRatios&&(this.xRatio=i.xRatio,this.initialXRatio=i.initialXRatio,this.yRatio=i.yRatio,this.invertedXRatio=i.invertedXRatio,this.invertedYRatio=i.invertedYRatio,this.baseLineY=i.baseLineY,this.baseLineInvertedY=i.baseLineInvertedY),this.yaxisIndex=0,this.seriesLen=0;var n=new Y(this.ctx);this.lastActiveBarSerieIndex=n.getActiveConfigSeriesIndex("desc",["bar","column"]);var r=n.getBarSeriesIndices(),o=new k(this.ctx);this.stackedSeriesTotals=o.getStackedSeriesTotals(this.w.config.series.map((function(e,t){return-1===r.indexOf(t)?t:-1})).filter((function(e){return-1!==e}))),this.barHelpers=new we(this)}return c(e,[{key:"draw",value:function(e,t){var i=this.w,a=new w(this.ctx),n=new k(this.ctx,i);e=n.getLogSeries(e),this.series=e,this.yRatio=n.getLogYRatios(this.yRatio),this.barHelpers.initVariables(e);var o=a.group({class:"apexcharts-bar-series apexcharts-plot-series"});i.config.dataLabels.enabled&&this.totalItems>this.barOptions.dataLabels.maxItems&&console.warn("WARNING: DataLabels are enabled but there are too many to display. This may cause performance issue when rendering.");for(var s=0,l=0;s<e.length;s++,l++){var c,u,h,d,f=void 0,p=void 0,m=[],g=[],v=i.globals.comboCharts?t[s]:s,y=a.group({class:"apexcharts-series",rel:s+1,seriesName:x.escapeString(i.globals.seriesNames[v]),"data:realIndex":v});this.ctx.series.addCollapsedClassToSeries(y,v),e[s].length>0&&(this.visibleI=this.visibleI+1);var b=0,_=0;this.yRatio.length>1&&(this.yaxisIndex=v),this.isReversed=i.config.yaxis[this.yaxisIndex]&&i.config.yaxis[this.yaxisIndex].reversed;var S=this.barHelpers.initialPositions();p=S.y,b=S.barHeight,u=S.yDivision,d=S.zeroW,f=S.x,_=S.barWidth,c=S.xDivision,h=S.zeroH,this.horizontal||g.push(f+_/2);for(var C=a.group({class:"apexcharts-datalabels","data:realIndex":v}),A=a.group({class:"apexcharts-bar-goals-markers",style:"pointer-events: none"}),O=0;O<i.globals.dataPoints;O++){var T=this.barHelpers.getStrokeWidth(s,O,v),M=null,E={indexes:{i:s,j:O,realIndex:v,bc:l},x:f,y:p,strokeWidth:T,elSeries:y};this.isHorizontal?(M=this.drawBarPaths(r(r({},E),{},{barHeight:b,zeroW:d,yDivision:u})),_=this.series[s][O]/this.invertedYRatio):(M=this.drawColumnPaths(r(r({},E),{},{xDivision:c,barWidth:_,zeroH:h})),b=this.series[s][O]/this.yRatio[this.yaxisIndex]);var I=this.barHelpers.drawGoalLine({barXPosition:M.barXPosition,barYPosition:M.barYPosition,goalX:M.goalX,goalY:M.goalY,barHeight:b,barWidth:_});I&&A.add(I),p=M.y,f=M.x,O>0&&g.push(f+_/2),m.push(p);var P=this.barHelpers.getPathFillColor(e,s,O,v);this.renderSeries({realIndex:v,pathFill:P,j:O,i:s,pathFrom:M.pathFrom,pathTo:M.pathTo,strokeWidth:T,elSeries:y,x:f,y:p,series:e,barHeight:b,barWidth:_,elDataLabelsWrap:C,elGoalsMarkers:A,visibleSeries:this.visibleI,type:"bar"})}i.globals.seriesXvalues[v]=g,i.globals.seriesYvalues[v]=m,o.add(y)}return o}},{key:"renderSeries",value:function(e){var t=e.realIndex,i=e.pathFill,a=e.lineFill,n=e.j,r=e.i,o=e.pathFrom,s=e.pathTo,l=e.strokeWidth,c=e.elSeries,u=e.x,h=e.y,d=e.y1,f=e.y2,p=e.series,m=e.barHeight,g=e.barWidth,v=e.barYPosition,y=e.elDataLabelsWrap,x=e.elGoalsMarkers,b=e.visibleSeries,k=e.type,S=this.w,C=new w(this.ctx);a||(a=this.barOptions.distributed?S.globals.stroke.colors[n]:S.globals.stroke.colors[t]),S.config.series[r].data[n]&&S.config.series[r].data[n].strokeColor&&(a=S.config.series[r].data[n].strokeColor),this.isNullValue&&(i="none");var A=n/S.config.chart.animations.animateGradually.delay*(S.config.chart.animations.speed/S.globals.dataPoints)/2.4,O=C.renderPaths({i:r,j:n,realIndex:t,pathFrom:o,pathTo:s,stroke:a,strokeWidth:l,strokeLineCap:S.config.stroke.lineCap,fill:i,animationDelay:A,initialSpeed:S.config.chart.animations.speed,dataChangeSpeed:S.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(k,"-area")});O.attr("clip-path","url(#gridRectMask".concat(S.globals.cuid,")"));var T=S.config.forecastDataPoints;T.count>0&&n>=S.globals.dataPoints-T.count&&(O.node.setAttribute("stroke-dasharray",T.dashArray),O.node.setAttribute("stroke-width",T.strokeWidth),O.node.setAttribute("fill-opacity",T.fillOpacity)),void 0!==d&&void 0!==f&&(O.attr("data-range-y1",d),O.attr("data-range-y2",f)),new _(this.ctx).setSelectionFilter(O,t,n),c.add(O);var M=new _e(this).handleBarDataLabels({x:u,y:h,y1:d,y2:f,i:r,j:n,series:p,realIndex:t,barHeight:m,barWidth:g,barYPosition:v,renderedPath:O,visibleSeries:b});return null!==M.dataLabels&&y.add(M.dataLabels),M.totalDataLabels&&y.add(M.totalDataLabels),c.add(y),x&&c.add(x),c}},{key:"drawBarPaths",value:function(e){var t=e.indexes,i=e.barHeight,a=e.strokeWidth,n=e.zeroW,r=e.x,o=e.y,s=e.yDivision,l=e.elSeries,c=this.w,u=t.i,h=t.j;c.globals.isXNumeric&&(o=(c.globals.seriesX[u][h]-c.globals.minX)/this.invertedXRatio-i);var d=o+i*this.visibleI;r=this.barHelpers.getXForValue(this.series[u][h],n);var f=this.barHelpers.getBarpaths({barYPosition:d,barHeight:i,x1:n,x2:r,strokeWidth:a,series:this.series,realIndex:t.realIndex,i:u,j:h,w:c});return c.globals.isXNumeric||(o+=s),this.barHelpers.barBackground({j:h,i:u,y1:d-i*this.visibleI,y2:i*this.seriesLen,elSeries:l}),{pathTo:f.pathTo,pathFrom:f.pathFrom,x:r,y:o,goalX:this.barHelpers.getGoalValues("x",n,null,u,h),barYPosition:d}}},{key:"drawColumnPaths",value:function(e){var t=e.indexes,i=e.x,a=e.y,n=e.xDivision,r=e.barWidth,o=e.zeroH,s=e.strokeWidth,l=e.elSeries,c=this.w,u=t.realIndex,h=t.i,d=t.j,f=t.bc;if(c.globals.isXNumeric){var p=u;c.globals.seriesX[u].length||(p=c.globals.maxValsInArrayIndex),i=(c.globals.seriesX[p][d]-c.globals.minX)/this.xRatio-r*this.seriesLen/2}var m=i+r*this.visibleI;a=this.barHelpers.getYForValue(this.series[h][d],o);var g=this.barHelpers.getColumnPaths({barXPosition:m,barWidth:r,y1:o,y2:a,strokeWidth:s,series:this.series,realIndex:t.realIndex,i:h,j:d,w:c});return c.globals.isXNumeric||(i+=n),this.barHelpers.barBackground({bc:f,j:d,i:h,x1:m-s/2-r*this.visibleI,x2:r*this.seriesLen+s/2,elSeries:l}),{pathTo:g.pathTo,pathFrom:g.pathFrom,x:i,y:a,goalY:this.barHelpers.getGoalValues("y",null,o,h,d),barXPosition:m}}},{key:"getPreviousPath",value:function(e,t){for(var i,a=this.w,n=0;n<a.globals.previousPaths.length;n++){var r=a.globals.previousPaths[n];r.paths&&r.paths.length>0&&parseInt(r.realIndex,10)===parseInt(e,10)&&void 0!==a.globals.previousPaths[n].paths[t]&&(i=a.globals.previousPaths[n].paths[t].d)}return i}}]),e}(),Se=function(e){h(i,ke);var t=m(i);function i(){return s(this,i),t.apply(this,arguments)}return c(i,[{key:"draw",value:function(e,t){var i=this,a=this.w;this.graphics=new w(this.ctx),this.bar=new ke(this.ctx,this.xyRatios);var n=new k(this.ctx,a);e=n.getLogSeries(e),this.yRatio=n.getLogYRatios(this.yRatio),this.barHelpers.initVariables(e),"100%"===a.config.chart.stackType&&(e=a.globals.seriesPercent.slice()),this.series=e,this.totalItems=0,this.prevY=[],this.prevX=[],this.prevYF=[],this.prevXF=[],this.prevYVal=[],this.prevXVal=[],this.xArrj=[],this.xArrjF=[],this.xArrjVal=[],this.yArrj=[],this.yArrjF=[],this.yArrjVal=[];for(var o=0;o<e.length;o++)e[o].length>0&&(this.totalItems+=e[o].length);for(var s=this.graphics.group({class:"apexcharts-bar-series apexcharts-plot-series"}),l=0,c=0,u=function(n,o){var u=void 0,h=void 0,d=void 0,f=void 0,p=[],m=[],g=a.globals.comboCharts?t[n]:n;i.yRatio.length>1&&(i.yaxisIndex=g),i.isReversed=a.config.yaxis[i.yaxisIndex]&&a.config.yaxis[i.yaxisIndex].reversed;var v=i.graphics.group({class:"apexcharts-series",seriesName:x.escapeString(a.globals.seriesNames[g]),rel:n+1,"data:realIndex":g});i.ctx.series.addCollapsedClassToSeries(v,g);var y=i.graphics.group({class:"apexcharts-datalabels","data:realIndex":g}),b=i.graphics.group({class:"apexcharts-bar-goals-markers",style:"pointer-events: none"}),_=0,w=0,k=i.initialPositions(l,c,u,h,d,f);c=k.y,_=k.barHeight,h=k.yDivision,f=k.zeroW,l=k.x,w=k.barWidth,u=k.xDivision,d=k.zeroH,i.yArrj=[],i.yArrjF=[],i.yArrjVal=[],i.xArrj=[],i.xArrjF=[],i.xArrjVal=[],1===i.prevY.length&&i.prevY[0].every((function(e){return isNaN(e)}))&&(i.prevY[0]=i.prevY[0].map((function(e){return d})),i.prevYF[0]=i.prevYF[0].map((function(e){return 0})));for(var S=0;S<a.globals.dataPoints;S++){var C=i.barHelpers.getStrokeWidth(n,S,g),A={indexes:{i:n,j:S,realIndex:g,bc:o},strokeWidth:C,x:l,y:c,elSeries:v},O=null;i.isHorizontal?(O=i.drawStackedBarPaths(r(r({},A),{},{zeroW:f,barHeight:_,yDivision:h})),w=i.series[n][S]/i.invertedYRatio):(O=i.drawStackedColumnPaths(r(r({},A),{},{xDivision:u,barWidth:w,zeroH:d})),_=i.series[n][S]/i.yRatio[i.yaxisIndex]);var T=i.barHelpers.drawGoalLine({barXPosition:O.barXPosition,barYPosition:O.barYPosition,goalX:O.goalX,goalY:O.goalY,barHeight:_,barWidth:w});T&&b.add(T),c=O.y,l=O.x,p.push(l),m.push(c);var M=i.barHelpers.getPathFillColor(e,n,S,g);v=i.renderSeries({realIndex:g,pathFill:M,j:S,i:n,pathFrom:O.pathFrom,pathTo:O.pathTo,strokeWidth:C,elSeries:v,x:l,y:c,series:e,barHeight:_,barWidth:w,elDataLabelsWrap:y,elGoalsMarkers:b,type:"bar",visibleSeries:0})}a.globals.seriesXvalues[g]=p,a.globals.seriesYvalues[g]=m,i.prevY.push(i.yArrj),i.prevYF.push(i.yArrjF),i.prevYVal.push(i.yArrjVal),i.prevX.push(i.xArrj),i.prevXF.push(i.xArrjF),i.prevXVal.push(i.xArrjVal),s.add(v)},h=0,d=0;h<e.length;h++,d++)u(h,d);return s}},{key:"initialPositions",value:function(e,t,i,a,n,r){var o,s,l=this.w;return this.isHorizontal?(o=(o=a=l.globals.gridHeight/l.globals.dataPoints)*parseInt(l.config.plotOptions.bar.barHeight,10)/100,r=this.baseLineInvertedY+l.globals.padHorizontal+(this.isReversed?l.globals.gridWidth:0)-(this.isReversed?2*this.baseLineInvertedY:0),t=(a-o)/2):(s=i=l.globals.gridWidth/l.globals.dataPoints,s=l.globals.isXNumeric&&l.globals.dataPoints>1?(i=l.globals.minXDiff/this.xRatio)*parseInt(this.barOptions.columnWidth,10)/100:s*parseInt(l.config.plotOptions.bar.columnWidth,10)/100,n=l.globals.gridHeight-this.baseLineY[this.yaxisIndex]-(this.isReversed?l.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),e=l.globals.padHorizontal+(i-s)/2),{x:e,y:t,yDivision:a,xDivision:i,barHeight:o,barWidth:s,zeroH:n,zeroW:r}}},{key:"drawStackedBarPaths",value:function(e){for(var t,i=e.indexes,a=e.barHeight,n=e.strokeWidth,r=e.zeroW,o=e.x,s=e.y,l=e.yDivision,c=e.elSeries,u=this.w,h=s,d=i.i,f=i.j,p=0,m=0;m<this.prevXF.length;m++)p+=this.prevXF[m][f];if(d>0){var g=r;this.prevXVal[d-1][f]<0?g=this.series[d][f]>=0?this.prevX[d-1][f]+p-2*(this.isReversed?p:0):this.prevX[d-1][f]:this.prevXVal[d-1][f]>=0&&(g=this.series[d][f]>=0?this.prevX[d-1][f]:this.prevX[d-1][f]-p+2*(this.isReversed?p:0)),t=g}else t=r;o=null===this.series[d][f]?t:t+this.series[d][f]/this.invertedYRatio-2*(this.isReversed?this.series[d][f]/this.invertedYRatio:0);var v=this.barHelpers.getBarpaths({barYPosition:h,barHeight:a,x1:t,x2:o,strokeWidth:n,series:this.series,realIndex:i.realIndex,i:d,j:f,w:u});return this.barHelpers.barBackground({j:f,i:d,y1:h,y2:a,elSeries:c}),s+=l,{pathTo:v.pathTo,pathFrom:v.pathFrom,goalX:this.barHelpers.getGoalValues("x",r,null,d,f),barYPosition:h,x:o,y:s}}},{key:"drawStackedColumnPaths",value:function(e){var t=e.indexes,i=e.x,a=e.y,n=e.xDivision,r=e.barWidth,o=e.zeroH;e.strokeWidth;var s=e.elSeries,l=this.w,c=t.i,u=t.j,h=t.bc;if(l.globals.isXNumeric){var d=l.globals.seriesX[c][u];d||(d=0),i=(d-l.globals.minX)/this.xRatio-r/2}for(var f,p=i,m=0,g=0;g<this.prevYF.length;g++)m+=isNaN(this.prevYF[g][u])?0:this.prevYF[g][u];if(c>0&&!l.globals.isXNumeric||c>0&&l.globals.isXNumeric&&l.globals.seriesX[c-1][u]===l.globals.seriesX[c][u]){var v,y,x=Math.min(this.yRatio.length+1,c+1);if(void 0!==this.prevY[c-1])for(var b=1;b<x;b++)if(!isNaN(this.prevY[c-b][u])){y=this.prevY[c-b][u];break}for(var _=1;_<x;_++){if(this.prevYVal[c-_][u]<0){v=this.series[c][u]>=0?y-m+2*(this.isReversed?m:0):y;break}if(this.prevYVal[c-_][u]>=0){v=this.series[c][u]>=0?y:y+m-2*(this.isReversed?m:0);break}}void 0===v&&(v=l.globals.gridHeight),f=this.prevYF[0].every((function(e){return 0===e}))&&this.prevYF.slice(1,c).every((function(e){return e.every((function(e){return isNaN(e)}))}))?o:v}else f=o;a=f-this.series[c][u]/this.yRatio[this.yaxisIndex]+2*(this.isReversed?this.series[c][u]/this.yRatio[this.yaxisIndex]:0);var w=this.barHelpers.getColumnPaths({barXPosition:p,barWidth:r,y1:f,y2:a,yRatio:this.yRatio[this.yaxisIndex],strokeWidth:this.strokeWidth,series:this.series,realIndex:t.realIndex,i:c,j:u,w:l});return this.barHelpers.barBackground({bc:h,j:u,i:c,x1:p,x2:r,elSeries:s}),i+=n,{pathTo:w.pathTo,pathFrom:w.pathFrom,goalY:this.barHelpers.getGoalValues("y",null,o,c,u),barXPosition:p,x:l.globals.isXNumeric?i-n:i,y:a}}}]),i}(),Ce=function(e){h(i,ke);var t=m(i);function i(){return s(this,i),t.apply(this,arguments)}return c(i,[{key:"draw",value:function(e,t){var i=this,a=this.w,n=new w(this.ctx),o=new F(this.ctx);this.candlestickOptions=this.w.config.plotOptions.candlestick,this.boxOptions=this.w.config.plotOptions.boxPlot,this.isHorizontal=a.config.plotOptions.bar.horizontal;var s=new k(this.ctx,a);e=s.getLogSeries(e),this.series=e,this.yRatio=s.getLogYRatios(this.yRatio),this.barHelpers.initVariables(e);for(var l=n.group({class:"apexcharts-".concat(a.config.chart.type,"-series apexcharts-plot-series")}),c=function(s){i.isBoxPlot="boxPlot"===a.config.chart.type||"boxPlot"===a.config.series[s].type;var c,u,h,d,f,p,m=void 0,g=void 0,v=[],y=[],b=a.globals.comboCharts?t[s]:s,_=n.group({class:"apexcharts-series",seriesName:x.escapeString(a.globals.seriesNames[b]),rel:s+1,"data:realIndex":b});i.ctx.series.addCollapsedClassToSeries(_,b),e[s].length>0&&(i.visibleI=i.visibleI+1),i.yRatio.length>1&&(i.yaxisIndex=b);var w=i.barHelpers.initialPositions();g=w.y,f=w.barHeight,u=w.yDivision,d=w.zeroW,m=w.x,p=w.barWidth,c=w.xDivision,h=w.zeroH,y.push(m+p/2);for(var k=n.group({class:"apexcharts-datalabels","data:realIndex":b}),S=function(t){var n=i.barHelpers.getStrokeWidth(s,t,b),l=null,x={indexes:{i:s,j:t,realIndex:b},x:m,y:g,strokeWidth:n,elSeries:_};l=i.isHorizontal?i.drawHorizontalBoxPaths(r(r({},x),{},{yDivision:u,barHeight:f,zeroW:d})):i.drawVerticalBoxPaths(r(r({},x),{},{xDivision:c,barWidth:p,zeroH:h})),g=l.y,m=l.x,t>0&&y.push(m+p/2),v.push(g),l.pathTo.forEach((function(r,c){var u=!i.isBoxPlot&&i.candlestickOptions.wick.useFillColor?l.color[c]:a.globals.stroke.colors[s],h=o.fillPath({seriesNumber:b,dataPointIndex:t,color:l.color[c],value:e[s][t]});i.renderSeries({realIndex:b,pathFill:h,lineFill:u,j:t,i:s,pathFrom:l.pathFrom,pathTo:r,strokeWidth:n,elSeries:_,x:m,y:g,series:e,barHeight:f,barWidth:p,elDataLabelsWrap:k,visibleSeries:i.visibleI,type:a.config.chart.type})}))},C=0;C<a.globals.dataPoints;C++)S(C);a.globals.seriesXvalues[b]=y,a.globals.seriesYvalues[b]=v,l.add(_)},u=0;u<e.length;u++)c(u);return l}},{key:"drawVerticalBoxPaths",value:function(e){var t=e.indexes,i=e.x;e.y;var a=e.xDivision,n=e.barWidth,r=e.zeroH,o=e.strokeWidth,s=this.w,l=new w(this.ctx),c=t.i,u=t.j,h=!0,d=s.config.plotOptions.candlestick.colors.upward,f=s.config.plotOptions.candlestick.colors.downward,p="";this.isBoxPlot&&(p=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var m=this.yRatio[this.yaxisIndex],g=t.realIndex,v=this.getOHLCValue(g,u),y=r,x=r;v.o>v.c&&(h=!1);var b=Math.min(v.o,v.c),_=Math.max(v.o,v.c),k=v.m;s.globals.isXNumeric&&(i=(s.globals.seriesX[g][u]-s.globals.minX)/this.xRatio-n/2);var S=i+n*this.visibleI;void 0===this.series[c][u]||null===this.series[c][u]?(b=r,_=r):(b=r-b/m,_=r-_/m,y=r-v.h/m,x=r-v.l/m,k=r-v.m/m);var C=l.move(S,r),A=l.move(S+n/2,b);return s.globals.previousPaths.length>0&&(A=this.getPreviousPath(g,u,!0)),C=this.isBoxPlot?[l.move(S,b)+l.line(S+n/2,b)+l.line(S+n/2,y)+l.line(S+n/4,y)+l.line(S+n-n/4,y)+l.line(S+n/2,y)+l.line(S+n/2,b)+l.line(S+n,b)+l.line(S+n,k)+l.line(S,k)+l.line(S,b+o/2),l.move(S,k)+l.line(S+n,k)+l.line(S+n,_)+l.line(S+n/2,_)+l.line(S+n/2,x)+l.line(S+n-n/4,x)+l.line(S+n/4,x)+l.line(S+n/2,x)+l.line(S+n/2,_)+l.line(S,_)+l.line(S,k)+"z"]:[l.move(S,_)+l.line(S+n/2,_)+l.line(S+n/2,y)+l.line(S+n/2,_)+l.line(S+n,_)+l.line(S+n,b)+l.line(S+n/2,b)+l.line(S+n/2,x)+l.line(S+n/2,b)+l.line(S,b)+l.line(S,_-o/2)],A+=l.move(S,b),s.globals.isXNumeric||(i+=a),{pathTo:C,pathFrom:A,x:i,y:_,barXPosition:S,color:this.isBoxPlot?p:h?[d]:[f]}}},{key:"drawHorizontalBoxPaths",value:function(e){var t=e.indexes;e.x;var i=e.y,a=e.yDivision,n=e.barHeight,r=e.zeroW,o=e.strokeWidth,s=this.w,l=new w(this.ctx),c=t.i,u=t.j,h=this.boxOptions.colors.lower;this.isBoxPlot&&(h=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var d=this.invertedYRatio,f=t.realIndex,p=this.getOHLCValue(f,u),m=r,g=r,v=Math.min(p.o,p.c),y=Math.max(p.o,p.c),x=p.m;s.globals.isXNumeric&&(i=(s.globals.seriesX[f][u]-s.globals.minX)/this.invertedXRatio-n/2);var b=i+n*this.visibleI;void 0===this.series[c][u]||null===this.series[c][u]?(v=r,y=r):(v=r+v/d,y=r+y/d,m=r+p.h/d,g=r+p.l/d,x=r+p.m/d);var _=l.move(r,b),k=l.move(v,b+n/2);return s.globals.previousPaths.length>0&&(k=this.getPreviousPath(f,u,!0)),_=[l.move(v,b)+l.line(v,b+n/2)+l.line(m,b+n/2)+l.line(m,b+n/2-n/4)+l.line(m,b+n/2+n/4)+l.line(m,b+n/2)+l.line(v,b+n/2)+l.line(v,b+n)+l.line(x,b+n)+l.line(x,b)+l.line(v+o/2,b),l.move(x,b)+l.line(x,b+n)+l.line(y,b+n)+l.line(y,b+n/2)+l.line(g,b+n/2)+l.line(g,b+n-n/4)+l.line(g,b+n/4)+l.line(g,b+n/2)+l.line(y,b+n/2)+l.line(y,b)+l.line(x,b)+"z"],k+=l.move(v,b),s.globals.isXNumeric||(i+=a),{pathTo:_,pathFrom:k,x:y,y:i,barYPosition:b,color:h}}},{key:"getOHLCValue",value:function(e,t){var i=this.w;return{o:this.isBoxPlot?i.globals.seriesCandleH[e][t]:i.globals.seriesCandleO[e][t],h:this.isBoxPlot?i.globals.seriesCandleO[e][t]:i.globals.seriesCandleH[e][t],m:i.globals.seriesCandleM[e][t],l:this.isBoxPlot?i.globals.seriesCandleC[e][t]:i.globals.seriesCandleL[e][t],c:this.isBoxPlot?i.globals.seriesCandleL[e][t]:i.globals.seriesCandleC[e][t]}}}]),i}(),Ae=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"checkColorRange",value:function(){var e=this.w,t=!1,i=e.config.plotOptions[e.config.chart.type];return i.colorScale.ranges.length>0&&i.colorScale.ranges.map((function(e,i){e.from<=0&&(t=!0)})),t}},{key:"getShadeColor",value:function(e,t,i,a){var n=this.w,r=1,o=n.config.plotOptions[e].shadeIntensity,s=this.determineColor(e,t,i);n.globals.hasNegs||a?r=n.config.plotOptions[e].reverseNegativeShade?s.percent<0?s.percent/100*(1.25*o):(1-s.percent/100)*(1.25*o):s.percent<=0?1-(1+s.percent/100)*o:(1-s.percent/100)*o:(r=1-s.percent/100,"treemap"===e&&(r=(1-s.percent/100)*(1.25*o)));var l=s.color,c=new x;return n.config.plotOptions[e].enableShades&&(l="dark"===this.w.config.theme.mode?x.hexToRgba(c.shadeColor(-1*r,s.color),n.config.fill.opacity):x.hexToRgba(c.shadeColor(r,s.color),n.config.fill.opacity)),{color:l,colorProps:s}}},{key:"determineColor",value:function(e,t,i){var a=this.w,n=a.globals.series[t][i],r=a.config.plotOptions[e],o=r.colorScale.inverse?i:t;r.distributed&&"treemap"===a.config.chart.type&&(o=i);var s=a.globals.colors[o],l=null,c=Math.min.apply(Math,g(a.globals.series[t])),u=Math.max.apply(Math,g(a.globals.series[t]));r.distributed||"heatmap"!==e||(c=a.globals.minY,u=a.globals.maxY),void 0!==r.colorScale.min&&(c=r.colorScale.min<a.globals.minY?r.colorScale.min:a.globals.minY,u=r.colorScale.max>a.globals.maxY?r.colorScale.max:a.globals.maxY);var h=Math.abs(u)+Math.abs(c),d=100*n/(0===h?h-1e-6:h);return r.colorScale.ranges.length>0&&r.colorScale.ranges.map((function(e,t){if(n>=e.from&&n<=e.to){s=e.color,l=e.foreColor?e.foreColor:null,c=e.from,u=e.to;var i=Math.abs(u)+Math.abs(c);d=100*n/(0===i?i-1e-6:i)}})),{color:s,foreColor:l,percent:d}}},{key:"calculateDataLabels",value:function(e){var t=e.text,i=e.x,a=e.y,n=e.i,r=e.j,o=e.colorProps,s=e.fontSize,l=this.w.config.dataLabels,c=new w(this.ctx),u=new V(this.ctx),h=null;if(l.enabled){h=c.group({class:"apexcharts-data-labels"});var d=l.offsetX,f=l.offsetY,p=i+d,m=a+parseFloat(l.style.fontSize)/3+f;u.plotDataLabelsText({x:p,y:m,text:t,i:n,j:r,color:o.foreColor,parent:h,fontSize:s,dataLabelsConfig:l})}return h}},{key:"addListeners",value:function(e){var t=new w(this.ctx);e.node.addEventListener("mouseenter",t.pathMouseEnter.bind(this,e)),e.node.addEventListener("mouseleave",t.pathMouseLeave.bind(this,e)),e.node.addEventListener("mousedown",t.pathMouseDown.bind(this,e))}}]),e}(),Oe=function(){function e(t,i){s(this,e),this.ctx=t,this.w=t.w,this.xRatio=i.xRatio,this.yRatio=i.yRatio,this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.helpers=new Ae(t),this.rectRadius=this.w.config.plotOptions.heatmap.radius,this.strokeWidth=this.w.config.stroke.show?this.w.config.stroke.width:0}return c(e,[{key:"draw",value:function(e){var t=this.w,i=new w(this.ctx),a=i.group({class:"apexcharts-heatmap"});a.attr("clip-path","url(#gridRectMask".concat(t.globals.cuid,")"));var n=t.globals.gridWidth/t.globals.dataPoints,r=t.globals.gridHeight/t.globals.series.length,o=0,s=!1;this.negRange=this.helpers.checkColorRange();var l=e.slice();t.config.yaxis[0].reversed&&(s=!0,l.reverse());for(var c=s?0:l.length-1;s?c<l.length:c>=0;s?c++:c--){var u=i.group({class:"apexcharts-series apexcharts-heatmap-series",seriesName:x.escapeString(t.globals.seriesNames[c]),rel:c+1,"data:realIndex":c});if(this.ctx.series.addCollapsedClassToSeries(u,c),t.config.chart.dropShadow.enabled){var h=t.config.chart.dropShadow;new _(this.ctx).dropShadow(u,h,c)}for(var d=0,f=t.config.plotOptions.heatmap.shadeIntensity,p=0;p<l[c].length;p++){var m=this.helpers.getShadeColor(t.config.chart.type,c,p,this.negRange),g=m.color,v=m.colorProps;"image"===t.config.fill.type&&(g=new F(this.ctx).fillPath({seriesNumber:c,dataPointIndex:p,opacity:t.globals.hasNegs?v.percent<0?1-(1+v.percent/100):f+v.percent/100:v.percent/100,patternID:x.randomId(),width:t.config.fill.image.width?t.config.fill.image.width:n,height:t.config.fill.image.height?t.config.fill.image.height:r}));var y=this.rectRadius,b=i.drawRect(d,o,n,r,y);if(b.attr({cx:d,cy:o}),b.node.classList.add("apexcharts-heatmap-rect"),u.add(b),b.attr({fill:g,i:c,index:c,j:p,val:l[c][p],"stroke-width":this.strokeWidth,stroke:t.config.plotOptions.heatmap.useFillColorAsStroke?g:t.globals.stroke.colors[0],color:g}),this.helpers.addListeners(b),t.config.chart.animations.enabled&&!t.globals.dataChanged){var k=1;t.globals.resized||(k=t.config.chart.animations.speed),this.animateHeatMap(b,d,o,n,r,k)}if(t.globals.dataChanged){var S=1;if(this.dynamicAnim.enabled&&t.globals.shouldAnimate){S=this.dynamicAnim.speed;var C=t.globals.previousPaths[c]&&t.globals.previousPaths[c][p]&&t.globals.previousPaths[c][p].color;C||(C="rgba(255, 255, 255, 0)"),this.animateHeatColor(b,x.isColorHex(C)?C:x.rgb2hex(C),x.isColorHex(g)?g:x.rgb2hex(g),S)}}var A=(0,t.config.dataLabels.formatter)(t.globals.series[c][p],{value:t.globals.series[c][p],seriesIndex:c,dataPointIndex:p,w:t}),O=this.helpers.calculateDataLabels({text:A,x:d+n/2,y:o+r/2,i:c,j:p,colorProps:v,series:l});null!==O&&u.add(O),d+=n}o+=r,a.add(u)}var T=t.globals.yAxisScale[0].result.slice();t.config.yaxis[0].reversed?T.unshift(""):T.push(""),t.globals.yAxisScale[0].result=T;var M=t.globals.gridHeight/t.globals.series.length;return t.config.yaxis[0].labels.offsetY=-M/2,a}},{key:"animateHeatMap",value:function(e,t,i,a,n,r){var o=new b(this.ctx);o.animateRect(e,{x:t+a/2,y:i+n/2,width:0,height:0},{x:t,y:i,width:a,height:n},r,(function(){o.animationCompleted(e)}))}},{key:"animateHeatColor",value:function(e,t,i,a){e.attr({fill:t}).animate(a).attr({fill:i})}}]),e}(),Te=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"drawYAxisTexts",value:function(e,t,i,a){var n=this.w,r=n.config.yaxis[0],o=n.globals.yLabelFormatters[0];return new w(this.ctx).drawText({x:e+r.labels.offsetX,y:t+r.labels.offsetY,text:o(a,i),textAnchor:"middle",fontSize:r.labels.style.fontSize,fontFamily:r.labels.style.fontFamily,foreColor:Array.isArray(r.labels.style.colors)?r.labels.style.colors[i]:r.labels.style.colors})}}]),e}(),Me=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w;var i=this.w;this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animBeginArr=[0],this.animDur=0,this.donutDataLabels=this.w.config.plotOptions.pie.donut.labels,this.lineColorArr=void 0!==i.globals.stroke.colors?i.globals.stroke.colors:i.globals.colors,this.defaultSize=Math.min(i.globals.gridWidth,i.globals.gridHeight),this.centerY=this.defaultSize/2,this.centerX=i.globals.gridWidth/2,"radialBar"===i.config.chart.type?this.fullAngle=360:this.fullAngle=Math.abs(i.config.plotOptions.pie.endAngle-i.config.plotOptions.pie.startAngle),this.initialAngle=i.config.plotOptions.pie.startAngle%this.fullAngle,i.globals.radialSize=this.defaultSize/2.05-i.config.stroke.width-(i.config.chart.sparkline.enabled?0:i.config.chart.dropShadow.blur),this.donutSize=i.globals.radialSize*parseInt(i.config.plotOptions.pie.donut.size,10)/100,this.maxY=0,this.sliceLabels=[],this.sliceSizes=[],this.prevSectorAngleArr=[]}return c(e,[{key:"draw",value:function(e){var t=this,i=this.w,a=new w(this.ctx);if(this.ret=a.group({class:"apexcharts-pie"}),i.globals.noData)return this.ret;for(var n=0,r=0;r<e.length;r++)n+=x.negToZero(e[r]);var o=[],s=a.group();0===n&&(n=1e-5),e.forEach((function(e){t.maxY=Math.max(t.maxY,e)})),i.config.yaxis[0].max&&(this.maxY=i.config.yaxis[0].max),"back"===i.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret);for(var l=0;l<e.length;l++){var c=this.fullAngle*x.negToZero(e[l])/n;o.push(c),"polarArea"===this.chartType?(o[l]=this.fullAngle/e.length,this.sliceSizes.push(i.globals.radialSize*e[l]/this.maxY)):this.sliceSizes.push(i.globals.radialSize)}if(i.globals.dataChanged){for(var u,h=0,d=0;d<i.globals.previousPaths.length;d++)h+=x.negToZero(i.globals.previousPaths[d]);for(var f=0;f<i.globals.previousPaths.length;f++)u=this.fullAngle*x.negToZero(i.globals.previousPaths[f])/h,this.prevSectorAngleArr.push(u)}this.donutSize<0&&(this.donutSize=0);var p=i.config.plotOptions.pie.customScale,m=i.globals.gridWidth/2,g=i.globals.gridHeight/2,v=m-i.globals.gridWidth/2*p,y=g-i.globals.gridHeight/2*p;if("donut"===this.chartType){var b=a.drawCircle(this.donutSize);b.attr({cx:this.centerX,cy:this.centerY,fill:i.config.plotOptions.pie.donut.background?i.config.plotOptions.pie.donut.background:"transparent"}),s.add(b)}var _=this.drawArcs(o,e);if(this.sliceLabels.forEach((function(e){_.add(e)})),s.attr({transform:"translate(".concat(v,", ").concat(y,") scale(").concat(p,")")}),s.add(_),this.ret.add(s),this.donutDataLabels.show){var k=this.renderInnerDataLabels(this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show,translateX:v,translateY:y});this.ret.add(k)}return"front"===i.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret),this.ret}},{key:"drawArcs",value:function(e,t){var i=this.w,a=new _(this.ctx),n=new w(this.ctx),r=new F(this.ctx),o=n.group({class:"apexcharts-slices"}),s=this.initialAngle,l=this.initialAngle,c=this.initialAngle,u=this.initialAngle;this.strokeWidth=i.config.stroke.show?i.config.stroke.width:0;for(var h=0;h<e.length;h++){var d=n.group({class:"apexcharts-series apexcharts-pie-series",seriesName:x.escapeString(i.globals.seriesNames[h]),rel:h+1,"data:realIndex":h});o.add(d),l=u,c=(s=c)+e[h],u=l+this.prevSectorAngleArr[h];var f=c<s?this.fullAngle+c-s:c-s,p=r.fillPath({seriesNumber:h,size:this.sliceSizes[h],value:t[h]}),m=this.getChangedPath(l,u),g=n.drawPath({d:m,stroke:Array.isArray(this.lineColorArr)?this.lineColorArr[h]:this.lineColorArr,strokeWidth:0,fill:p,fillOpacity:i.config.fill.opacity,classes:"apexcharts-pie-area apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(h)});if(g.attr({index:0,j:h}),a.setSelectionFilter(g,0,h),i.config.chart.dropShadow.enabled){var v=i.config.chart.dropShadow;a.dropShadow(g,v,h)}this.addListeners(g,this.donutDataLabels),w.setAttrs(g.node,{"data:angle":f,"data:startAngle":s,"data:strokeWidth":this.strokeWidth,"data:value":t[h]});var y={x:0,y:0};"pie"===this.chartType||"polarArea"===this.chartType?y=x.polarToCartesian(this.centerX,this.centerY,i.globals.radialSize/1.25+i.config.plotOptions.pie.dataLabels.offset,(s+f/2)%this.fullAngle):"donut"===this.chartType&&(y=x.polarToCartesian(this.centerX,this.centerY,(i.globals.radialSize+this.donutSize)/2+i.config.plotOptions.pie.dataLabels.offset,(s+f/2)%this.fullAngle)),d.add(g);var b=0;if(!this.initialAnim||i.globals.resized||i.globals.dataChanged?this.animBeginArr.push(0):(0===(b=f/this.fullAngle*i.config.chart.animations.speed)&&(b=1),this.animDur=b+this.animDur,this.animBeginArr.push(this.animDur)),this.dynamicAnim&&i.globals.dataChanged?this.animatePaths(g,{size:this.sliceSizes[h],endAngle:c,startAngle:s,prevStartAngle:l,prevEndAngle:u,animateStartingPos:!0,i:h,animBeginArr:this.animBeginArr,shouldSetPrevPaths:!0,dur:i.config.chart.animations.dynamicAnimation.speed}):this.animatePaths(g,{size:this.sliceSizes[h],endAngle:c,startAngle:s,i:h,totalItems:e.length-1,animBeginArr:this.animBeginArr,dur:b}),i.config.plotOptions.pie.expandOnClick&&"polarArea"!==this.chartType&&g.click(this.pieClicked.bind(this,h)),void 0!==i.globals.selectedDataPoints[0]&&i.globals.selectedDataPoints[0].indexOf(h)>-1&&this.pieClicked(h),i.config.dataLabels.enabled){var k=y.x,S=y.y,C=100*f/this.fullAngle+"%";if(0!==f&&i.config.plotOptions.pie.dataLabels.minAngleToShowLabel<e[h]){var A=i.config.dataLabels.formatter;void 0!==A&&(C=A(i.globals.seriesPercent[h][0],{seriesIndex:h,w:i}));var O=i.globals.dataLabels.style.colors[h],T=n.group({class:"apexcharts-datalabels"}),M=n.drawText({x:k,y:S,text:C,textAnchor:"middle",fontSize:i.config.dataLabels.style.fontSize,fontFamily:i.config.dataLabels.style.fontFamily,fontWeight:i.config.dataLabels.style.fontWeight,foreColor:O});if(T.add(M),i.config.dataLabels.dropShadow.enabled){var E=i.config.dataLabels.dropShadow;a.dropShadow(M,E)}M.node.classList.add("apexcharts-pie-label"),i.config.chart.animations.animate&&!1===i.globals.resized&&(M.node.classList.add("apexcharts-pie-label-delay"),M.node.style.animationDelay=i.config.chart.animations.speed/940+"s"),this.sliceLabels.push(T)}}}return o}},{key:"addListeners",value:function(e,t){var i=new w(this.ctx);e.node.addEventListener("mouseenter",i.pathMouseEnter.bind(this,e)),e.node.addEventListener("mouseleave",i.pathMouseLeave.bind(this,e)),e.node.addEventListener("mouseleave",this.revertDataLabelsInner.bind(this,e.node,t)),e.node.addEventListener("mousedown",i.pathMouseDown.bind(this,e)),this.donutDataLabels.total.showAlways||(e.node.addEventListener("mouseenter",this.printDataLabelsInner.bind(this,e.node,t)),e.node.addEventListener("mousedown",this.printDataLabelsInner.bind(this,e.node,t)))}},{key:"animatePaths",value:function(e,t){var i=this.w,a=t.endAngle<t.startAngle?this.fullAngle+t.endAngle-t.startAngle:t.endAngle-t.startAngle,n=a,r=t.startAngle,o=t.startAngle;void 0!==t.prevStartAngle&&void 0!==t.prevEndAngle&&(r=t.prevEndAngle,n=t.prevEndAngle<t.prevStartAngle?this.fullAngle+t.prevEndAngle-t.prevStartAngle:t.prevEndAngle-t.prevStartAngle),t.i===i.config.series.length-1&&(a+o>this.fullAngle?t.endAngle=t.endAngle-(a+o):a+o<this.fullAngle&&(t.endAngle=t.endAngle+(this.fullAngle-(a+o)))),a===this.fullAngle&&(a=this.fullAngle-.01),this.animateArc(e,r,o,a,n,t)}},{key:"animateArc",value:function(e,t,i,a,n,r){var o,s=this,l=this.w,c=new b(this.ctx),u=r.size;(isNaN(t)||isNaN(n))&&(t=i,n=a,r.dur=0);var h=a,d=i,f=t<i?this.fullAngle+t-i:t-i;l.globals.dataChanged&&r.shouldSetPrevPaths&&r.prevEndAngle&&(o=s.getPiePath({me:s,startAngle:r.prevStartAngle,angle:r.prevEndAngle<r.prevStartAngle?this.fullAngle+r.prevEndAngle-r.prevStartAngle:r.prevEndAngle-r.prevStartAngle,size:u}),e.attr({d:o})),0!==r.dur?e.animate(r.dur,l.globals.easing,r.animBeginArr[r.i]).afterAll((function(){"pie"!==s.chartType&&"donut"!==s.chartType&&"polarArea"!==s.chartType||this.animate(l.config.chart.animations.dynamicAnimation.speed).attr({"stroke-width":s.strokeWidth}),r.i===l.config.series.length-1&&c.animationCompleted(e)})).during((function(l){h=f+(a-f)*l,r.animateStartingPos&&(h=n+(a-n)*l,d=t-n+(i-(t-n))*l),o=s.getPiePath({me:s,startAngle:d,angle:h,size:u}),e.node.setAttribute("data:pathOrig",o),e.attr({d:o})})):(o=s.getPiePath({me:s,startAngle:d,angle:a,size:u}),r.isTrack||(l.globals.animationEnded=!0),e.node.setAttribute("data:pathOrig",o),e.attr({d:o,"stroke-width":s.strokeWidth}))}},{key:"pieClicked",value:function(e){var t,i=this.w,a=this,n=a.sliceSizes[e]+(i.config.plotOptions.pie.expandOnClick?4:0),r=i.globals.dom.Paper.select(".apexcharts-".concat(a.chartType.toLowerCase(),"-slice-").concat(e)).members[0];if("true"!==r.attr("data:pieClicked")){var o=i.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area");Array.prototype.forEach.call(o,(function(e){e.setAttribute("data:pieClicked","false");var t=e.getAttribute("data:pathOrig");e.setAttribute("d",t)})),r.attr("data:pieClicked","true");var s=parseInt(r.attr("data:startAngle"),10),l=parseInt(r.attr("data:angle"),10);t=a.getPiePath({me:a,startAngle:s,angle:l,size:n}),360!==l&&r.plot(t)}else{r.attr({"data:pieClicked":"false"}),this.revertDataLabelsInner(r.node,this.donutDataLabels);var c=r.attr("data:pathOrig");r.attr({d:c})}}},{key:"getChangedPath",value:function(e,t){var i="";return this.dynamicAnim&&this.w.globals.dataChanged&&(i=this.getPiePath({me:this,startAngle:e,angle:t-e,size:this.size})),i}},{key:"getPiePath",value:function(e){var t=e.me,i=e.startAngle,a=e.angle,n=e.size,r=i,o=Math.PI*(r-90)/180,s=a+i;Math.ceil(s)>=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle&&(s=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle-.01),Math.ceil(s)>this.fullAngle&&(s-=this.fullAngle);var l=Math.PI*(s-90)/180,c=t.centerX+n*Math.cos(o),u=t.centerY+n*Math.sin(o),h=t.centerX+n*Math.cos(l),d=t.centerY+n*Math.sin(l),f=x.polarToCartesian(t.centerX,t.centerY,t.donutSize,s),p=x.polarToCartesian(t.centerX,t.centerY,t.donutSize,r),m=a>180?1:0,g=["M",c,u,"A",n,n,0,m,1,h,d];return"donut"===t.chartType?[].concat(g,["L",f.x,f.y,"A",t.donutSize,t.donutSize,0,m,0,p.x,p.y,"L",c,u,"z"]).join(" "):"pie"===t.chartType||"polarArea"===t.chartType?[].concat(g,["L",t.centerX,t.centerY,"L",c,u]).join(" "):[].concat(g).join(" ")}},{key:"drawPolarElements",value:function(e){var t=this.w,i=new Z(this.ctx),a=new w(this.ctx),n=new Te(this.ctx),r=a.group(),o=a.group(),s=i.niceScale(0,Math.ceil(this.maxY),t.config.yaxis[0].tickAmount,0,!0),l=s.result.reverse(),c=s.result.length;this.maxY=s.niceMax;for(var u=t.globals.radialSize,h=u/(c-1),d=0;d<c-1;d++){var f=a.drawCircle(u);if(f.attr({cx:this.centerX,cy:this.centerY,fill:"none","stroke-width":t.config.plotOptions.polarArea.rings.strokeWidth,stroke:t.config.plotOptions.polarArea.rings.strokeColor}),t.config.yaxis[0].show){var p=n.drawYAxisTexts(this.centerX,this.centerY-u+parseInt(t.config.yaxis[0].labels.style.fontSize,10)/2,d,l[d]);o.add(p)}r.add(f),u-=h}this.drawSpokes(e),e.add(r),e.add(o)}},{key:"renderInnerDataLabels",value:function(e,t){var i=this.w,a=new w(this.ctx),n=a.group({class:"apexcharts-datalabels-group",transform:"translate(".concat(t.translateX?t.translateX:0,", ").concat(t.translateY?t.translateY:0,") scale(").concat(i.config.plotOptions.pie.customScale,")")}),r=e.total.show;n.node.style.opacity=t.opacity;var o,s,l=t.centerX,c=t.centerY;o=void 0===e.name.color?i.globals.colors[0]:e.name.color;var u=e.name.fontSize,h=e.name.fontFamily,d=e.name.fontWeight;s=void 0===e.value.color?i.config.chart.foreColor:e.value.color;var f=e.value.formatter,p="",m="";if(r?(o=e.total.color,u=e.total.fontSize,h=e.total.fontFamily,d=e.total.fontWeight,m=e.total.label,p=e.total.formatter(i)):1===i.globals.series.length&&(p=f(i.globals.series[0],i),m=i.globals.seriesNames[0]),m&&(m=e.name.formatter(m,e.total.show,i)),e.name.show){var g=a.drawText({x:l,y:c+parseFloat(e.name.offsetY),text:m,textAnchor:"middle",foreColor:o,fontSize:u,fontWeight:d,fontFamily:h});g.node.classList.add("apexcharts-datalabel-label"),n.add(g)}if(e.value.show){var v=e.name.show?parseFloat(e.value.offsetY)+16:e.value.offsetY,y=a.drawText({x:l,y:c+v,text:p,textAnchor:"middle",foreColor:s,fontWeight:e.value.fontWeight,fontSize:e.value.fontSize,fontFamily:e.value.fontFamily});y.node.classList.add("apexcharts-datalabel-value"),n.add(y)}return n}},{key:"printInnerLabels",value:function(e,t,i,a){var n,r=this.w;a?n=void 0===e.name.color?r.globals.colors[parseInt(a.parentNode.getAttribute("rel"),10)-1]:e.name.color:r.globals.series.length>1&&e.total.show&&(n=e.total.color);var o=r.globals.dom.baseEl.querySelector(".apexcharts-datalabel-label"),s=r.globals.dom.baseEl.querySelector(".apexcharts-datalabel-value");i=(0,e.value.formatter)(i,r),a||"function"!=typeof e.total.formatter||(i=e.total.formatter(r));var l=t===e.total.label;t=e.name.formatter(t,l,r),null!==o&&(o.textContent=t),null!==s&&(s.textContent=i),null!==o&&(o.style.fill=n)}},{key:"printDataLabelsInner",value:function(e,t){var i=this.w,a=e.getAttribute("data:value"),n=i.globals.seriesNames[parseInt(e.parentNode.getAttribute("rel"),10)-1];i.globals.series.length>1&&this.printInnerLabels(t,n,a,e);var r=i.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group");null!==r&&(r.style.opacity=1)}},{key:"drawSpokes",value:function(e){var t=this,i=this.w,a=new w(this.ctx),n=i.config.plotOptions.polarArea.spokes;if(0!==n.strokeWidth){for(var r=[],o=360/i.globals.series.length,s=0;s<i.globals.series.length;s++)r.push(x.polarToCartesian(this.centerX,this.centerY,i.globals.radialSize,i.config.plotOptions.pie.startAngle+o*s));r.forEach((function(i,r){var o=a.drawLine(i.x,i.y,t.centerX,t.centerY,Array.isArray(n.connectorColors)?n.connectorColors[r]:n.connectorColors);e.add(o)}))}}},{key:"revertDataLabelsInner",value:function(e,t,i){var a=this,n=this.w,r=n.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group"),o=!1,s=n.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area"),l=function(e){var i=e.makeSliceOut,n=e.printLabel;Array.prototype.forEach.call(s,(function(e){"true"===e.getAttribute("data:pieClicked")&&(i&&(o=!0),n&&a.printDataLabelsInner(e,t))}))};if(l({makeSliceOut:!0,printLabel:!1}),t.total.show&&n.globals.series.length>1)o&&!t.total.showAlways?l({makeSliceOut:!1,printLabel:!0}):this.printInnerLabels(t,t.total.label,t.total.formatter(n));else if(l({makeSliceOut:!1,printLabel:!0}),!o)if(n.globals.selectedDataPoints.length&&n.globals.series.length>1)if(n.globals.selectedDataPoints[0].length>0){var c=n.globals.selectedDataPoints[0],u=n.globals.dom.baseEl.querySelector(".apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(c));this.printDataLabelsInner(u,t)}else r&&n.globals.selectedDataPoints.length&&0===n.globals.selectedDataPoints[0].length&&(r.style.opacity=0);else r&&n.globals.series.length>1&&(r.style.opacity=0)}}]),e}(),Ee=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animDur=0;var i=this.w;this.graphics=new w(this.ctx),this.lineColorArr=void 0!==i.globals.stroke.colors?i.globals.stroke.colors:i.globals.colors,this.defaultSize=i.globals.svgHeight<i.globals.svgWidth?i.globals.gridHeight+1.5*i.globals.goldenPadding:i.globals.gridWidth,this.isLog=i.config.yaxis[0].logarithmic,this.coreUtils=new k(this.ctx),this.maxValue=this.isLog?this.coreUtils.getLogVal(i.globals.maxY,0):i.globals.maxY,this.minValue=this.isLog?this.coreUtils.getLogVal(this.w.globals.minY,0):i.globals.minY,this.polygons=i.config.plotOptions.radar.polygons,this.strokeWidth=i.config.stroke.show?i.config.stroke.width:0,this.size=this.defaultSize/2.1-this.strokeWidth-i.config.chart.dropShadow.blur,i.config.xaxis.labels.show&&(this.size=this.size-i.globals.xAxisLabelsWidth/1.75),void 0!==i.config.plotOptions.radar.size&&(this.size=i.config.plotOptions.radar.size),this.dataRadiusOfPercent=[],this.dataRadius=[],this.angleArr=[],this.yaxisLabelsTextsPos=[]}return c(e,[{key:"draw",value:function(e){var t=this,i=this.w,a=new F(this.ctx),n=[],o=new V(this.ctx);e.length&&(this.dataPointsLen=e[i.globals.maxValsInArrayIndex].length),this.disAngle=2*Math.PI/this.dataPointsLen;var s=i.globals.gridWidth/2,l=i.globals.gridHeight/2,c=s+i.config.plotOptions.radar.offsetX,u=l+i.config.plotOptions.radar.offsetY,h=this.graphics.group({class:"apexcharts-radar-series apexcharts-plot-series",transform:"translate(".concat(c||0,", ").concat(u||0,")")}),d=[],f=null,p=null;if(this.yaxisLabels=this.graphics.group({class:"apexcharts-yaxis"}),e.forEach((function(e,s){var l=e.length===i.globals.dataPoints,c=t.graphics.group().attr({class:"apexcharts-series","data:longestSeries":l,seriesName:x.escapeString(i.globals.seriesNames[s]),rel:s+1,"data:realIndex":s});t.dataRadiusOfPercent[s]=[],t.dataRadius[s]=[],t.angleArr[s]=[],e.forEach((function(e,i){var a=Math.abs(t.maxValue-t.minValue);e+=Math.abs(t.minValue),t.isLog&&(e=t.coreUtils.getLogVal(e,0)),t.dataRadiusOfPercent[s][i]=e/a,t.dataRadius[s][i]=t.dataRadiusOfPercent[s][i]*t.size,t.angleArr[s][i]=i*t.disAngle})),d=t.getDataPointsPos(t.dataRadius[s],t.angleArr[s]);var u=t.createPaths(d,{x:0,y:0});f=t.graphics.group({class:"apexcharts-series-markers-wrap apexcharts-element-hidden"}),p=t.graphics.group({class:"apexcharts-datalabels","data:realIndex":s}),i.globals.delayedElements.push({el:f.node,index:s});var h={i:s,realIndex:s,animationDelay:s,initialSpeed:i.config.chart.animations.speed,dataChangeSpeed:i.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-radar",shouldClipToGrid:!1,bindEventsOnPaths:!1,stroke:i.globals.stroke.colors[s],strokeLineCap:i.config.stroke.lineCap},m=null;i.globals.previousPaths.length>0&&(m=t.getPreviousPath(s));for(var g=0;g<u.linePathsTo.length;g++){var v=t.graphics.renderPaths(r(r({},h),{},{pathFrom:null===m?u.linePathsFrom[g]:m,pathTo:u.linePathsTo[g],strokeWidth:Array.isArray(t.strokeWidth)?t.strokeWidth[s]:t.strokeWidth,fill:"none",drawShadow:!1}));c.add(v);var y=a.fillPath({seriesNumber:s}),b=t.graphics.renderPaths(r(r({},h),{},{pathFrom:null===m?u.areaPathsFrom[g]:m,pathTo:u.areaPathsTo[g],strokeWidth:0,fill:y,drawShadow:!1}));if(i.config.chart.dropShadow.enabled){var w=new _(t.ctx),k=i.config.chart.dropShadow;w.dropShadow(b,Object.assign({},k,{noUserSpaceOnUse:!0}),s)}c.add(b)}e.forEach((function(e,a){var n=new B(t.ctx).getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:s,dataPointIndex:a}),l=t.graphics.drawMarker(d[a].x,d[a].y,n);l.attr("rel",a),l.attr("j",a),l.attr("index",s),l.node.setAttribute("default-marker-size",n.pSize);var u=t.graphics.group({class:"apexcharts-series-markers"});u&&u.add(l),f.add(u),c.add(f);var h=i.config.dataLabels;if(h.enabled){var m=h.formatter(i.globals.series[s][a],{seriesIndex:s,dataPointIndex:a,w:i});o.plotDataLabelsText({x:d[a].x,y:d[a].y,text:m,textAnchor:"middle",i:s,j:s,parent:p,offsetCorrection:!1,dataLabelsConfig:r({},h)})}c.add(p)})),n.push(c)})),this.drawPolygons({parent:h}),i.config.xaxis.labels.show){var m=this.drawXAxisTexts();h.add(m)}return n.forEach((function(e){h.add(e)})),h.add(this.yaxisLabels),h}},{key:"drawPolygons",value:function(e){for(var t=this,i=this.w,a=e.parent,n=new Te(this.ctx),r=i.globals.yAxisScale[0].result.reverse(),o=r.length,s=[],l=this.size/(o-1),c=0;c<o;c++)s[c]=l*c;s.reverse();var u=[],h=[];s.forEach((function(e,i){var a=x.getPolygonPos(e,t.dataPointsLen),n="";a.forEach((function(e,a){if(0===i){var r=t.graphics.drawLine(e.x,e.y,0,0,Array.isArray(t.polygons.connectorColors)?t.polygons.connectorColors[a]:t.polygons.connectorColors);h.push(r)}0===a&&t.yaxisLabelsTextsPos.push({x:e.x,y:e.y}),n+=e.x+","+e.y+" "})),u.push(n)})),u.forEach((function(e,n){var r=t.polygons.strokeColors,o=t.polygons.strokeWidth,s=t.graphics.drawPolygon(e,Array.isArray(r)?r[n]:r,Array.isArray(o)?o[n]:o,i.globals.radarPolygons.fill.colors[n]);a.add(s)})),h.forEach((function(e){a.add(e)})),i.config.yaxis[0].show&&this.yaxisLabelsTextsPos.forEach((function(e,i){var a=n.drawYAxisTexts(e.x,e.y,i,r[i]);t.yaxisLabels.add(a)}))}},{key:"drawXAxisTexts",value:function(){var e=this,t=this.w,i=t.config.xaxis.labels,a=this.graphics.group({class:"apexcharts-xaxis"}),n=x.getPolygonPos(this.size,this.dataPointsLen);return t.globals.labels.forEach((function(o,s){var l=t.config.xaxis.labels.formatter,c=new V(e.ctx);if(n[s]){var u=e.getTextPos(n[s],e.size),h=l(o,{seriesIndex:-1,dataPointIndex:s,w:t});c.plotDataLabelsText({x:u.newX,y:u.newY,text:h,textAnchor:u.textAnchor,i:s,j:s,parent:a,color:Array.isArray(i.style.colors)&&i.style.colors[s]?i.style.colors[s]:"#a8a8a8",dataLabelsConfig:r({textAnchor:u.textAnchor,dropShadow:{enabled:!1}},i),offsetCorrection:!1})}})),a}},{key:"createPaths",value:function(e,t){var i=this,a=[],n=[],r=[],o=[];if(e.length){n=[this.graphics.move(t.x,t.y)],o=[this.graphics.move(t.x,t.y)];var s=this.graphics.move(e[0].x,e[0].y),l=this.graphics.move(e[0].x,e[0].y);e.forEach((function(t,a){s+=i.graphics.line(t.x,t.y),l+=i.graphics.line(t.x,t.y),a===e.length-1&&(s+="Z",l+="Z")})),a.push(s),r.push(l)}return{linePathsFrom:n,linePathsTo:a,areaPathsFrom:o,areaPathsTo:r}}},{key:"getTextPos",value:function(e,t){var i="middle",a=e.x,n=e.y;return Math.abs(e.x)>=10?e.x>0?(i="start",a+=10):e.x<0&&(i="end",a-=10):i="middle",Math.abs(e.y)>=t-10&&(e.y<0?n-=10:e.y>0&&(n+=10)),{textAnchor:i,newX:a,newY:n}}},{key:"getPreviousPath",value:function(e){for(var t=this.w,i=null,a=0;a<t.globals.previousPaths.length;a++){var n=t.globals.previousPaths[a];n.paths.length>0&&parseInt(n.realIndex,10)===parseInt(e,10)&&void 0!==t.globals.previousPaths[a].paths[0]&&(i=t.globals.previousPaths[a].paths[0].d)}return i}},{key:"getDataPointsPos",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.dataPointsLen;e=e||[],t=t||[];for(var a=[],n=0;n<i;n++){var r={};r.x=e[n]*Math.sin(t[n]),r.y=-e[n]*Math.cos(t[n]),a.push(r)}return a}}]),e}(),Ie=function(e){h(i,Me);var t=m(i);function i(e){var a;s(this,i),(a=t.call(this,e)).ctx=e,a.w=e.w,a.animBeginArr=[0],a.animDur=0;var n=a.w;return a.startAngle=n.config.plotOptions.radialBar.startAngle,a.endAngle=n.config.plotOptions.radialBar.endAngle,a.totalAngle=Math.abs(n.config.plotOptions.radialBar.endAngle-n.config.plotOptions.radialBar.startAngle),a.trackStartAngle=n.config.plotOptions.radialBar.track.startAngle,a.trackEndAngle=n.config.plotOptions.radialBar.track.endAngle,a.donutDataLabels=a.w.config.plotOptions.radialBar.dataLabels,a.radialDataLabels=a.donutDataLabels,a.trackStartAngle||(a.trackStartAngle=a.startAngle),a.trackEndAngle||(a.trackEndAngle=a.endAngle),360===a.endAngle&&(a.endAngle=359.99),a.margin=parseInt(n.config.plotOptions.radialBar.track.margin,10),a}return c(i,[{key:"draw",value:function(e){var t=this.w,i=new w(this.ctx),a=i.group({class:"apexcharts-radialbar"});if(t.globals.noData)return a;var n=i.group(),r=this.defaultSize/2,o=t.globals.gridWidth/2,s=this.defaultSize/2.05;t.config.chart.sparkline.enabled||(s=s-t.config.stroke.width-t.config.chart.dropShadow.blur);var l=t.globals.fill.colors;if(t.config.plotOptions.radialBar.track.show){var c=this.drawTracks({size:s,centerX:o,centerY:r,colorArr:l,series:e});n.add(c)}var u=this.drawArcs({size:s,centerX:o,centerY:r,colorArr:l,series:e}),h=360;t.config.plotOptions.radialBar.startAngle<0&&(h=this.totalAngle);var d=(360-h)/360;if(t.globals.radialSize=s-s*d,this.radialDataLabels.value.show){var f=Math.max(this.radialDataLabels.value.offsetY,this.radialDataLabels.name.offsetY);t.globals.radialSize+=f*d}return n.add(u.g),"front"===t.config.plotOptions.radialBar.hollow.position&&(u.g.add(u.elHollow),u.dataLabels&&u.g.add(u.dataLabels)),a.add(n),a}},{key:"drawTracks",value:function(e){var t=this.w,i=new w(this.ctx),a=i.group({class:"apexcharts-tracks"}),n=new _(this.ctx),r=new F(this.ctx),o=this.getStrokeWidth(e);e.size=e.size-o/2;for(var s=0;s<e.series.length;s++){var l=i.group({class:"apexcharts-radialbar-track apexcharts-track"});a.add(l),l.attr({rel:s+1}),e.size=e.size-o-this.margin;var c=t.config.plotOptions.radialBar.track,u=r.fillPath({seriesNumber:0,size:e.size,fillColors:Array.isArray(c.background)?c.background[s]:c.background,solid:!0}),h=this.trackStartAngle,d=this.trackEndAngle;Math.abs(d)+Math.abs(h)>=360&&(d=360-Math.abs(this.startAngle)-.1);var f=i.drawPath({d:"",stroke:u,strokeWidth:o*parseInt(c.strokeWidth,10)/100,fill:"none",strokeOpacity:c.opacity,classes:"apexcharts-radialbar-area"});if(c.dropShadow.enabled){var p=c.dropShadow;n.dropShadow(f,p)}l.add(f),f.attr("id","apexcharts-radialbarTrack-"+s),this.animatePaths(f,{centerX:e.centerX,centerY:e.centerY,endAngle:d,startAngle:h,size:e.size,i:s,totalItems:2,animBeginArr:0,dur:0,isTrack:!0,easing:t.globals.easing})}return a}},{key:"drawArcs",value:function(e){var t=this.w,i=new w(this.ctx),a=new F(this.ctx),n=new _(this.ctx),r=i.group(),o=this.getStrokeWidth(e);e.size=e.size-o/2;var s=t.config.plotOptions.radialBar.hollow.background,l=e.size-o*e.series.length-this.margin*e.series.length-o*parseInt(t.config.plotOptions.radialBar.track.strokeWidth,10)/100/2,c=l-t.config.plotOptions.radialBar.hollow.margin;void 0!==t.config.plotOptions.radialBar.hollow.image&&(s=this.drawHollowImage(e,r,l,s));var u=this.drawHollow({size:c,centerX:e.centerX,centerY:e.centerY,fill:s||"transparent"});if(t.config.plotOptions.radialBar.hollow.dropShadow.enabled){var h=t.config.plotOptions.radialBar.hollow.dropShadow;n.dropShadow(u,h)}var d=1;!this.radialDataLabels.total.show&&t.globals.series.length>1&&(d=0);var f=null;this.radialDataLabels.show&&(f=this.renderInnerDataLabels(this.radialDataLabels,{hollowSize:l,centerX:e.centerX,centerY:e.centerY,opacity:d})),"back"===t.config.plotOptions.radialBar.hollow.position&&(r.add(u),f&&r.add(f));var p=!1;t.config.plotOptions.radialBar.inverseOrder&&(p=!0);for(var m=p?e.series.length-1:0;p?m>=0:m<e.series.length;p?m--:m++){var g=i.group({class:"apexcharts-series apexcharts-radial-series",seriesName:x.escapeString(t.globals.seriesNames[m])});r.add(g),g.attr({rel:m+1,"data:realIndex":m}),this.ctx.series.addCollapsedClassToSeries(g,m),e.size=e.size-o-this.margin;var v=a.fillPath({seriesNumber:m,size:e.size,value:e.series[m]}),y=this.startAngle,b=void 0,k=x.negToZero(e.series[m]>100?100:e.series[m])/100,S=Math.round(this.totalAngle*k)+this.startAngle,C=void 0;t.globals.dataChanged&&(b=this.startAngle,C=Math.round(this.totalAngle*x.negToZero(t.globals.previousPaths[m])/100)+b),Math.abs(S)+Math.abs(y)>=360&&(S-=.01),Math.abs(C)+Math.abs(b)>=360&&(C-=.01);var A=S-y,O=Array.isArray(t.config.stroke.dashArray)?t.config.stroke.dashArray[m]:t.config.stroke.dashArray,T=i.drawPath({d:"",stroke:v,strokeWidth:o,fill:"none",fillOpacity:t.config.fill.opacity,classes:"apexcharts-radialbar-area apexcharts-radialbar-slice-"+m,strokeDashArray:O});if(w.setAttrs(T.node,{"data:angle":A,"data:value":e.series[m]}),t.config.chart.dropShadow.enabled){var M=t.config.chart.dropShadow;n.dropShadow(T,M,m)}n.setSelectionFilter(T,0,m),this.addListeners(T,this.radialDataLabels),g.add(T),T.attr({index:0,j:m});var E=0;!this.initialAnim||t.globals.resized||t.globals.dataChanged||(E=t.config.chart.animations.speed),t.globals.dataChanged&&(E=t.config.chart.animations.dynamicAnimation.speed),this.animDur=E/(1.2*e.series.length)+this.animDur,this.animBeginArr.push(this.animDur),this.animatePaths(T,{centerX:e.centerX,centerY:e.centerY,endAngle:S,startAngle:y,prevEndAngle:C,prevStartAngle:b,size:e.size,i:m,totalItems:2,animBeginArr:this.animBeginArr,dur:E,shouldSetPrevPaths:!0,easing:t.globals.easing})}return{g:r,elHollow:u,dataLabels:f}}},{key:"drawHollow",value:function(e){var t=new w(this.ctx).drawCircle(2*e.size);return t.attr({class:"apexcharts-radialbar-hollow",cx:e.centerX,cy:e.centerY,r:e.size,fill:e.fill}),t}},{key:"drawHollowImage",value:function(e,t,i,a){var n=this.w,r=new F(this.ctx),o=x.randomId(),s=n.config.plotOptions.radialBar.hollow.image;if(n.config.plotOptions.radialBar.hollow.imageClipped)r.clippedImgArea({width:i,height:i,image:s,patternID:"pattern".concat(n.globals.cuid).concat(o)}),a="url(#pattern".concat(n.globals.cuid).concat(o,")");else{var l=n.config.plotOptions.radialBar.hollow.imageWidth,c=n.config.plotOptions.radialBar.hollow.imageHeight;if(void 0===l&&void 0===c){var u=n.globals.dom.Paper.image(s).loaded((function(t){this.move(e.centerX-t.width/2+n.config.plotOptions.radialBar.hollow.imageOffsetX,e.centerY-t.height/2+n.config.plotOptions.radialBar.hollow.imageOffsetY)}));t.add(u)}else{var h=n.globals.dom.Paper.image(s).loaded((function(t){this.move(e.centerX-l/2+n.config.plotOptions.radialBar.hollow.imageOffsetX,e.centerY-c/2+n.config.plotOptions.radialBar.hollow.imageOffsetY),this.size(l,c)}));t.add(h)}}return a}},{key:"getStrokeWidth",value:function(e){var t=this.w;return e.size*(100-parseInt(t.config.plotOptions.radialBar.hollow.size,10))/100/(e.series.length+1)-this.margin}}]),i}(),Pe=function(e){h(i,ke);var t=m(i);function i(){return s(this,i),t.apply(this,arguments)}return c(i,[{key:"draw",value:function(e,t){var i=this.w,a=new w(this.ctx);this.rangeBarOptions=this.w.config.plotOptions.rangeBar,this.series=e,this.seriesRangeStart=i.globals.seriesRangeStart,this.seriesRangeEnd=i.globals.seriesRangeEnd,this.barHelpers.initVariables(e);for(var n=a.group({class:"apexcharts-rangebar-series apexcharts-plot-series"}),o=0;o<e.length;o++){var s,l,c,u=void 0,h=void 0,d=void 0,f=i.globals.comboCharts?t[o]:o,p=a.group({class:"apexcharts-series",seriesName:x.escapeString(i.globals.seriesNames[f]),rel:o+1,"data:realIndex":f});this.ctx.series.addCollapsedClassToSeries(p,f),e[o].length>0&&(this.visibleI=this.visibleI+1);var m=0,g=0;this.yRatio.length>1&&(this.yaxisIndex=f);var v=this.barHelpers.initialPositions();h=v.y,c=v.zeroW,u=v.x,g=v.barWidth,s=v.xDivision,l=v.zeroH;for(var y=a.group({class:"apexcharts-datalabels","data:realIndex":f}),b=a.group({class:"apexcharts-rangebar-goals-markers",style:"pointer-events: none"}),_=0;_<i.globals.dataPoints;_++){var k=this.barHelpers.getStrokeWidth(o,_,f),S=this.seriesRangeStart[o][_],C=this.seriesRangeEnd[o][_],A=null,O=null,T={x:u,y:h,strokeWidth:k,elSeries:p};if(d=v.yDivision,m=v.barHeight,this.isHorizontal){O=h+m*this.visibleI;var M=this.seriesLen;i.config.plotOptions.bar.rangeBarGroupRows&&(M=1);var E=(d-m*M)/2;if(void 0===i.config.series[o].data[_])break;if(i.config.series[o].data[_].x){var I=this.detectOverlappingBars({i:o,j:_,barYPosition:O,srty:E,barHeight:m,yDivision:d,initPositions:v});m=I.barHeight,O=I.barYPosition}g=(A=this.drawRangeBarPaths(r({indexes:{i:o,j:_,realIndex:f},barHeight:m,barYPosition:O,zeroW:c,yDivision:d,y1:S,y2:C},T))).barWidth}else m=(A=this.drawRangeColumnPaths(r({indexes:{i:o,j:_,realIndex:f},zeroH:l,barWidth:g,xDivision:s},T))).barHeight;var P=this.barHelpers.drawGoalLine({barXPosition:A.barXPosition,barYPosition:O,goalX:A.goalX,goalY:A.goalY,barHeight:m,barWidth:g});P&&b.add(P),h=A.y,u=A.x;var D=this.barHelpers.getPathFillColor(e,o,_,f),z=i.globals.stroke.colors[f];this.renderSeries({realIndex:f,pathFill:D,lineFill:z,j:_,i:o,x:u,y:h,y1:S,y2:C,pathFrom:A.pathFrom,pathTo:A.pathTo,strokeWidth:k,elSeries:p,series:e,barHeight:m,barYPosition:O,barWidth:g,elDataLabelsWrap:y,elGoalsMarkers:b,visibleSeries:this.visibleI,type:"rangebar"})}n.add(p)}return n}},{key:"detectOverlappingBars",value:function(e){var t=e.i,i=e.j,a=e.barYPosition,n=e.srty,r=e.barHeight,o=e.yDivision,s=e.initPositions,l=this.w,c=[],u=l.config.series[t].data[i].rangeName,h=l.config.series[t].data[i].x,d=l.globals.labels.indexOf(h),f=l.globals.seriesRange[t].findIndex((function(e){return e.x===h&&e.overlaps.length>0}));return a=l.config.plotOptions.bar.rangeBarGroupRows?n+o*d:n+r*this.visibleI+o*d,f>-1&&!l.config.plotOptions.bar.rangeBarOverlap&&(c=l.globals.seriesRange[t][f].overlaps).indexOf(u)>-1&&(a=(r=s.barHeight/c.length)*this.visibleI+o*(100-parseInt(this.barOptions.barHeight,10))/100/2+r*(this.visibleI+c.indexOf(u))+o*d),{barYPosition:a,barHeight:r}}},{key:"drawRangeColumnPaths",value:function(e){var t=e.indexes,i=e.x;e.strokeWidth;var a=e.xDivision,n=e.barWidth,r=e.zeroH,o=this.w,s=t.i,l=t.j,c=this.yRatio[this.yaxisIndex],u=t.realIndex,h=this.getRangeValue(u,l),d=Math.min(h.start,h.end),f=Math.max(h.start,h.end);o.globals.isXNumeric&&(i=(o.globals.seriesX[s][l]-o.globals.minX)/this.xRatio-n/2);var p=i+n*this.visibleI;void 0===this.series[s][l]||null===this.series[s][l]?d=r:(d=r-d/c,f=r-f/c);var m=Math.abs(f-d),g=this.barHelpers.getColumnPaths({barXPosition:p,barWidth:n,y1:d,y2:f,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,realIndex:t.realIndex,i:u,j:l,w:o});return o.globals.isXNumeric||(i+=a),{pathTo:g.pathTo,pathFrom:g.pathFrom,barHeight:m,x:i,y:f,goalY:this.barHelpers.getGoalValues("y",null,r,s,l),barXPosition:p}}},{key:"drawRangeBarPaths",value:function(e){var t=e.indexes,i=e.y,a=e.y1,n=e.y2,r=e.yDivision,o=e.barHeight,s=e.barYPosition,l=e.zeroW,c=this.w,u=l+a/this.invertedYRatio,h=l+n/this.invertedYRatio,d=Math.abs(h-u),f=this.barHelpers.getBarpaths({barYPosition:s,barHeight:o,x1:u,x2:h,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,i:t.realIndex,realIndex:t.realIndex,j:t.j,w:c});return c.globals.isXNumeric||(i+=r),{pathTo:f.pathTo,pathFrom:f.pathFrom,barWidth:d,x:h,goalX:this.barHelpers.getGoalValues("x",l,null,t.realIndex,t.j),y:i}}},{key:"getRangeValue",value:function(e,t){var i=this.w;return{start:i.globals.seriesRangeStart[e][t],end:i.globals.seriesRangeEnd[e][t]}}}]),i}(),De=function(){function e(t){s(this,e),this.w=t.w,this.lineCtx=t}return c(e,[{key:"sameValueSeriesFix",value:function(e,t){var i=this.w;if(("gradient"===i.config.fill.type||"gradient"===i.config.fill.type[e])&&new k(this.lineCtx.ctx,i).seriesHaveSameValues(e)){var a=t[e].slice();a[a.length-1]=a[a.length-1]+1e-6,t[e]=a}return t}},{key:"calculatePoints",value:function(e){var t=e.series,i=e.realIndex,a=e.x,n=e.y,r=e.i,o=e.j,s=e.prevY,l=this.w,c=[],u=[];if(0===o){var h=this.lineCtx.categoryAxisCorrection+l.config.markers.offsetX;l.globals.isXNumeric&&(h=(l.globals.seriesX[i][0]-l.globals.minX)/this.lineCtx.xRatio+l.config.markers.offsetX),c.push(h),u.push(x.isNumber(t[r][0])?s+l.config.markers.offsetY:null),c.push(a+l.config.markers.offsetX),u.push(x.isNumber(t[r][o+1])?n+l.config.markers.offsetY:null)}else c.push(a+l.config.markers.offsetX),u.push(x.isNumber(t[r][o+1])?n+l.config.markers.offsetY:null);return{x:c,y:u}}},{key:"checkPreviousPaths",value:function(e){for(var t=e.pathFromLine,i=e.pathFromArea,a=e.realIndex,n=this.w,r=0;r<n.globals.previousPaths.length;r++){var o=n.globals.previousPaths[r];("line"===o.type||"area"===o.type)&&o.paths.length>0&&parseInt(o.realIndex,10)===parseInt(a,10)&&("line"===o.type?(this.lineCtx.appendPathFrom=!1,t=n.globals.previousPaths[r].paths[0].d):"area"===o.type&&(this.lineCtx.appendPathFrom=!1,i=n.globals.previousPaths[r].paths[0].d,n.config.stroke.show&&n.globals.previousPaths[r].paths[1]&&(t=n.globals.previousPaths[r].paths[1].d)))}return{pathFromLine:t,pathFromArea:i}}},{key:"determineFirstPrevY",value:function(e){var t,i=e.i,a=e.series,n=e.prevY,r=e.lineYPosition,o=this.w;if(void 0!==(null===(t=a[i])||void 0===t?void 0:t[0]))n=(r=o.config.chart.stacked&&i>0?this.lineCtx.prevSeriesY[i-1][0]:this.lineCtx.zeroY)-a[i][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]+2*(this.lineCtx.isReversed?a[i][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]:0);else if(o.config.chart.stacked&&i>0&&void 0===a[i][0])for(var s=i-1;s>=0;s--)if(null!==a[s][0]&&void 0!==a[s][0]){n=r=this.lineCtx.prevSeriesY[s][0];break}return{prevY:n,lineYPosition:r}}}]),e}(),ze=function(){function e(t,i,a){s(this,e),this.ctx=t,this.w=t.w,this.xyRatios=i,this.pointsChart=!("bubble"!==this.w.config.chart.type&&"scatter"!==this.w.config.chart.type)||a,this.scatter=new N(this.ctx),this.noNegatives=this.w.globals.minX===Number.MAX_VALUE,this.lineHelpers=new De(this),this.markers=new B(this.ctx),this.prevSeriesY=[],this.categoryAxisCorrection=0,this.yaxisIndex=0}return c(e,[{key:"draw",value:function(e,t,i,a){var n=this.w,o=new w(this.ctx),s=n.globals.comboCharts?t:n.config.chart.type,l=o.group({class:"apexcharts-".concat(s,"-series apexcharts-plot-series")}),c=new k(this.ctx,n);this.yRatio=this.xyRatios.yRatio,this.zRatio=this.xyRatios.zRatio,this.xRatio=this.xyRatios.xRatio,this.baseLineY=this.xyRatios.baseLineY,e=c.getLogSeries(e),this.yRatio=c.getLogYRatios(this.yRatio);for(var u=[],h=0;h<e.length;h++){e=this.lineHelpers.sameValueSeriesFix(h,e);var d=n.globals.comboCharts?i[h]:h;this._initSerieVariables(e,h,d);var f=[],p=[],m=n.globals.padHorizontal+this.categoryAxisCorrection;this.ctx.series.addCollapsedClassToSeries(this.elSeries,d),n.globals.isXNumeric&&n.globals.seriesX.length>0&&(m=(n.globals.seriesX[d][0]-n.globals.minX)/this.xRatio),p.push(m);var g,v=m,y=void 0,x=v,b=this.zeroY,_=this.zeroY;b=this.lineHelpers.determineFirstPrevY({i:h,series:e,prevY:b,lineYPosition:0}).prevY,f.push(b),g=b,"rangeArea"===s&&(y=_=this.lineHelpers.determineFirstPrevY({i:h,series:a,prevY:_,lineYPosition:0}).prevY);var S={type:s,series:e,realIndex:d,i:h,x:m,y:1,pX:v,pY:g,pathsFrom:this._calculatePathsFrom({type:s,series:e,i:h,realIndex:d,prevX:x,prevY:b,prevY2:_}),linePaths:[],areaPaths:[],seriesIndex:i,lineYPosition:0,xArrj:p,yArrj:f,seriesRangeEnd:a},C=this._iterateOverDataPoints(r(r({},S),{},{iterations:"rangeArea"===s?e[h].length-1:void 0,isRangeStart:!0}));if("rangeArea"===s){var A=this._calculatePathsFrom({series:a,i:h,realIndex:d,prevX:x,prevY:_}),O=this._iterateOverDataPoints(r(r({},S),{},{series:a,pY:y,pathsFrom:A,iterations:a[h].length-1,isRangeStart:!1}));C.linePaths[0]=O.linePath+C.linePath,C.pathFromLine=O.pathFromLine+C.pathFromLine}this._handlePaths({type:s,realIndex:d,i:h,paths:C}),this.elSeries.add(this.elPointsMain),this.elSeries.add(this.elDataLabelsWrap),u.push(this.elSeries)}if(n.config.chart.stacked)for(var T=u.length;T>0;T--)l.add(u[T-1]);else for(var M=0;M<u.length;M++)l.add(u[M]);return l}},{key:"_initSerieVariables",value:function(e,t,i){var a=this.w,n=new w(this.ctx);this.xDivision=a.globals.gridWidth/(a.globals.dataPoints-("on"===a.config.xaxis.tickPlacement?1:0)),this.strokeWidth=Array.isArray(a.config.stroke.width)?a.config.stroke.width[i]:a.config.stroke.width,this.yRatio.length>1&&(this.yaxisIndex=i),this.isReversed=a.config.yaxis[this.yaxisIndex]&&a.config.yaxis[this.yaxisIndex].reversed,this.zeroY=a.globals.gridHeight-this.baseLineY[this.yaxisIndex]-(this.isReversed?a.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),this.areaBottomY=this.zeroY,(this.zeroY>a.globals.gridHeight||"end"===a.config.plotOptions.area.fillTo)&&(this.areaBottomY=a.globals.gridHeight),this.categoryAxisCorrection=this.xDivision/2,this.elSeries=n.group({class:"apexcharts-series",seriesName:x.escapeString(a.globals.seriesNames[i])}),this.elPointsMain=n.group({class:"apexcharts-series-markers-wrap","data:realIndex":i}),this.elDataLabelsWrap=n.group({class:"apexcharts-datalabels","data:realIndex":i});var r=e[t].length===a.globals.dataPoints;this.elSeries.attr({"data:longestSeries":r,rel:t+1,"data:realIndex":i}),this.appendPathFrom=!0}},{key:"_calculatePathsFrom",value:function(e){var t,i,a,n,r=e.type,o=e.series,s=e.i,l=e.realIndex,c=e.prevX,u=e.prevY,h=e.prevY2,d=this.w,f=new w(this.ctx);if(null===o[s][0]){for(var p=0;p<o[s].length;p++)if(null!==o[s][p]){c=this.xDivision*p,u=this.zeroY-o[s][p]/this.yRatio[this.yaxisIndex],t=f.move(c,u),i=f.move(c,this.areaBottomY);break}}else t=f.move(c,u),"rangeArea"===r&&(t=f.move(c,h)+f.line(c,u)),i=f.move(c,this.areaBottomY)+f.line(c,u);if(a=f.move(-1,this.zeroY)+f.line(-1,this.zeroY),n=f.move(-1,this.zeroY)+f.line(-1,this.zeroY),d.globals.previousPaths.length>0){var m=this.lineHelpers.checkPreviousPaths({pathFromLine:a,pathFromArea:n,realIndex:l});a=m.pathFromLine,n=m.pathFromArea}return{prevX:c,prevY:u,linePath:t,areaPath:i,pathFromLine:a,pathFromArea:n}}},{key:"_handlePaths",value:function(e){var t=e.type,i=e.realIndex,a=e.i,n=e.paths,o=this.w,s=new w(this.ctx),l=new F(this.ctx);this.prevSeriesY.push(n.yArrj),o.globals.seriesXvalues[i]=n.xArrj,o.globals.seriesYvalues[i]=n.yArrj;var c=o.config.forecastDataPoints;if(c.count>0&&"rangeArea"!==t){var u=o.globals.seriesXvalues[i][o.globals.seriesXvalues[i].length-c.count-1],h=s.drawRect(u,0,o.globals.gridWidth,o.globals.gridHeight,0);o.globals.dom.elForecastMask.appendChild(h.node);var d=s.drawRect(0,0,u,o.globals.gridHeight,0);o.globals.dom.elNonForecastMask.appendChild(d.node)}this.pointsChart||o.globals.delayedElements.push({el:this.elPointsMain.node,index:i});var f={i:a,realIndex:i,animationDelay:a,initialSpeed:o.config.chart.animations.speed,dataChangeSpeed:o.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(t)};if("area"===t)for(var p=l.fillPath({seriesNumber:i}),m=0;m<n.areaPaths.length;m++){var g=s.renderPaths(r(r({},f),{},{pathFrom:n.pathFromArea,pathTo:n.areaPaths[m],stroke:"none",strokeWidth:0,strokeLineCap:null,fill:p}));this.elSeries.add(g)}if(o.config.stroke.show&&!this.pointsChart){var v=null;if("line"===t)v=l.fillPath({seriesNumber:i,i:a});else if("solid"===o.config.stroke.fill.type)v=o.globals.stroke.colors[i];else{var y=o.config.fill;o.config.fill=o.config.stroke.fill,v=l.fillPath({seriesNumber:i,i:a}),o.config.fill=y}for(var x=0;x<n.linePaths.length;x++){var b=v;"rangeArea"===t&&(b=l.fillPath({seriesNumber:i}));var _=r(r({},f),{},{pathFrom:n.pathFromLine,pathTo:n.linePaths[x],stroke:v,strokeWidth:this.strokeWidth,strokeLineCap:o.config.stroke.lineCap,fill:"rangeArea"===t?b:"none"}),k=s.renderPaths(_);if(this.elSeries.add(k),k.attr("fill-rule","evenodd"),c.count>0&&"rangeArea"!==t){var S=s.renderPaths(_);S.node.setAttribute("stroke-dasharray",c.dashArray),c.strokeWidth&&S.node.setAttribute("stroke-width",c.strokeWidth),this.elSeries.add(S),S.attr("clip-path","url(#forecastMask".concat(o.globals.cuid,")")),k.attr("clip-path","url(#nonForecastMask".concat(o.globals.cuid,")"))}}}}},{key:"_iterateOverDataPoints",value:function(e){var t=e.type,i=e.series,a=e.iterations,n=e.realIndex,r=e.i,o=e.x,s=e.y,l=e.pX,c=e.pY,u=e.pathsFrom,h=e.linePaths,d=e.areaPaths,f=e.seriesIndex,p=e.lineYPosition,m=e.xArrj,g=e.yArrj,v=e.isRangeStart,y=e.seriesRangeEnd,b=this.w,_=new w(this.ctx),k=this.yRatio,S=u.prevY,C=u.linePath,A=u.areaPath,O=u.pathFromLine,T=u.pathFromArea,M=x.isNumber(b.globals.minYArr[n])?b.globals.minYArr[n]:b.globals.minY;a||(a=b.globals.dataPoints>1?b.globals.dataPoints-1:b.globals.dataPoints);for(var E=s,I=0;I<a;I++){var P=void 0===i[r][I+1]||null===i[r][I+1];if(b.globals.isXNumeric){var D=b.globals.seriesX[n][I+1];void 0===b.globals.seriesX[n][I+1]&&(D=b.globals.seriesX[n][a-1]),o=(D-b.globals.minX)/this.xRatio}else o+=this.xDivision;p=b.config.chart.stacked&&r>0&&b.globals.collapsedSeries.length<b.config.series.length-1?this.prevSeriesY[function(e){for(var t=e,i=0;i<b.globals.series.length;i++)if(b.globals.collapsedSeriesIndices.indexOf(e)>-1){t--;break}return t>=0?t:0}(r-1)][I+1]:this.zeroY,P?s=p-M/k[this.yaxisIndex]+2*(this.isReversed?M/k[this.yaxisIndex]:0):(s=p-i[r][I+1]/k[this.yaxisIndex]+2*(this.isReversed?i[r][I+1]/k[this.yaxisIndex]:0),"rangeArea"===t&&(E=p-y[r][I+1]/k[this.yaxisIndex]+2*(this.isReversed?y[r][I+1]/k[this.yaxisIndex]:0))),m.push(o),g.push(s);var z=this.lineHelpers.calculatePoints({series:i,x:o,y:s,realIndex:n,i:r,j:I,prevY:S}),L=this._createPaths({type:t,series:i,i:r,realIndex:n,j:I,x:o,y:s,y2:E,pX:l,pY:c,linePath:C,areaPath:A,linePaths:h,areaPaths:d,seriesIndex:f,isRangeStart:v});d=L.areaPaths,h=L.linePaths,l=L.pX,c=L.pY,A=L.areaPath,C=L.linePath,this.appendPathFrom&&(O+=_.line(o,this.zeroY),T+=_.line(o,this.zeroY)),this.handleNullDataPoints(i,z,r,I,n),this._handleMarkersAndLabels({type:t,pointsPos:z,i:r,j:I,realIndex:n,isRangeStart:v})}return{yArrj:g,xArrj:m,pathFromArea:T,areaPaths:d,pathFromLine:O,linePaths:h,linePath:C,areaPath:A}}},{key:"_handleMarkersAndLabels",value:function(e){var t=e.type,i=e.pointsPos,a=e.isRangeStart,n=e.i,r=e.j,o=e.realIndex,s=this.w,l=new V(this.ctx);if(this.pointsChart)this.scatter.draw(this.elSeries,r,{realIndex:o,pointsPos:i,zRatio:this.zRatio,elParent:this.elPointsMain});else{s.globals.series[n].length>1&&this.elPointsMain.node.classList.add("apexcharts-element-hidden");var c=this.markers.plotChartMarkers(i,o,r+1);null!==c&&this.elPointsMain.add(c)}var u=l.drawDataLabel({type:t,isRangeStart:a,pos:i,i:o,j:r+1});null!==u&&this.elDataLabelsWrap.add(u)}},{key:"_createPaths",value:function(e){var t=e.type,i=e.series,a=e.i,n=e.realIndex,r=e.j,o=e.x,s=e.y,l=e.y2,c=e.pX,u=e.pY,h=e.linePath,d=e.areaPath,f=e.linePaths,p=e.areaPaths,m=e.seriesIndex,g=e.isRangeStart,v=this.w,y=new w(this.ctx),x=v.config.stroke.curve,b=this.areaBottomY;if(Array.isArray(v.config.stroke.curve)&&(x=Array.isArray(m)?v.config.stroke.curve[m[a]]:v.config.stroke.curve[a]),"smooth"===x){var _=.35*(o-c);v.globals.hasNullValues?(null!==i[a][r]&&(null!==i[a][r+1]?(h=y.move(c,u)+y.curve(c+_,u,o-_,s,o+1,s),d=y.move(c+1,u)+y.curve(c+_,u,o-_,s,o+1,s)+y.line(o,b)+y.line(c,b)+"z"):(h=y.move(c,u),d=y.move(c,u)+"z")),f.push(h),p.push(d)):(h+=y.curve(c+_,u,o-_,s,o,s),d+=y.curve(c+_,u,o-_,s,o,s)),c=o,u=s,r===i[a].length-2&&(d=d+y.curve(c,u,o,s,o,b)+y.move(o,s)+"z","rangeArea"===t&&g?h=h+y.curve(c,u,o,s,o,l)+y.move(o,l)+"z":v.globals.hasNullValues||(f.push(h),p.push(d)))}else{if(null===i[a][r+1]){h+=y.move(o,s);var k=v.globals.isXNumeric?(v.globals.seriesX[n][r]-v.globals.minX)/this.xRatio:o-this.xDivision;d=d+y.line(k,b)+y.move(o,s)+"z"}null===i[a][r]&&(h+=y.move(o,s),d+=y.move(o,b)),"stepline"===x?(h=h+y.line(o,null,"H")+y.line(null,s,"V"),d=d+y.line(o,null,"H")+y.line(null,s,"V")):"straight"===x&&(h+=y.line(o,s),d+=y.line(o,s)),r===i[a].length-2&&(d=d+y.line(o,b)+y.move(o,s)+"z","rangeArea"===t&&g?h=h+y.line(o,l)+y.move(o,l)+"z":(f.push(h),p.push(d)))}return{linePaths:f,areaPaths:p,pX:c,pY:u,linePath:h,areaPath:d}}},{key:"handleNullDataPoints",value:function(e,t,i,a,n){var r=this.w;if(null===e[i][a]&&r.config.markers.showNullDataPoints||1===e[i].length){var o=this.markers.plotChartMarkers(t,n,a+1,this.strokeWidth-r.config.markers.strokeWidth/2,!0);null!==o&&this.elPointsMain.add(o)}}}]),e}();window.TreemapSquared={},window.TreemapSquared.generate=function(){function e(t,i,a,n){this.xoffset=t,this.yoffset=i,this.height=n,this.width=a,this.shortestEdge=function(){return Math.min(this.height,this.width)},this.getCoordinates=function(e){var t,i=[],a=this.xoffset,n=this.yoffset,o=r(e)/this.height,s=r(e)/this.width;if(this.width>=this.height)for(t=0;t<e.length;t++)i.push([a,n,a+o,n+e[t]/o]),n+=e[t]/o;else for(t=0;t<e.length;t++)i.push([a,n,a+e[t]/s,n+s]),a+=e[t]/s;return i},this.cutArea=function(t){var i;if(this.width>=this.height){var a=t/this.height,n=this.width-a;i=new e(this.xoffset+a,this.yoffset,n,this.height)}else{var r=t/this.width,o=this.height-r;i=new e(this.xoffset,this.yoffset+r,this.width,o)}return i}}function t(t,a,n,o,s){return o=void 0===o?0:o,s=void 0===s?0:s,function(e){var t,i,a=[];for(t=0;t<e.length;t++)for(i=0;i<e[t].length;i++)a.push(e[t][i]);return a}(i(function(e,t){var i,a=[],n=t/r(e);for(i=0;i<e.length;i++)a[i]=e[i]*n;return a}(t,a*n),[],new e(o,s,a,n),[]))}function i(e,t,n,o){var s,l,c;if(0!==e.length)return s=n.shortestEdge(),function(e,t,i){var n;return 0===e.length||((n=e.slice()).push(t),a(e,i)>=a(n,i))}(t,l=e[0],s)?(t.push(l),i(e.slice(1),t,n,o)):(c=n.cutArea(r(t),o),o.push(n.getCoordinates(t)),i(e,[],c,o)),o;o.push(n.getCoordinates(t))}function a(e,t){var i=Math.min.apply(Math,e),a=Math.max.apply(Math,e),n=r(e);return Math.max(Math.pow(t,2)*a/Math.pow(n,2),Math.pow(n,2)/(Math.pow(t,2)*i))}function n(e){return e&&e.constructor===Array}function r(e){var t,i=0;for(t=0;t<e.length;t++)i+=e[t];return i}function o(e){var t,i=0;if(n(e[0]))for(t=0;t<e.length;t++)i+=o(e[t]);else i=r(e);return i}return function e(i,a,r,s,l){s=void 0===s?0:s,l=void 0===l?0:l;var c,u,h=[],d=[];if(n(i[0])){for(u=0;u<i.length;u++)h[u]=o(i[u]);for(c=t(h,a,r,s,l),u=0;u<i.length;u++)d.push(e(i[u],c[u][2]-c[u][0],c[u][3]-c[u][1],c[u][0],c[u][1]))}else d=t(i,a,r,s,l);return d}}();var Le,je,Re=function(){function e(t,i){s(this,e),this.ctx=t,this.w=t.w,this.strokeWidth=this.w.config.stroke.width,this.helpers=new Ae(t),this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.labels=[]}return c(e,[{key:"draw",value:function(e){var t=this,i=this.w,a=new w(this.ctx),n=new F(this.ctx),r=a.group({class:"apexcharts-treemap"});if(i.globals.noData)return r;var o=[];return e.forEach((function(e){var t=e.map((function(e){return Math.abs(e)}));o.push(t)})),this.negRange=this.helpers.checkColorRange(),i.config.series.forEach((function(e,i){e.data.forEach((function(e){Array.isArray(t.labels[i])||(t.labels[i]=[]),t.labels[i].push(e.x)}))})),window.TreemapSquared.generate(o,i.globals.gridWidth,i.globals.gridHeight).forEach((function(o,s){var l=a.group({class:"apexcharts-series apexcharts-treemap-series",seriesName:x.escapeString(i.globals.seriesNames[s]),rel:s+1,"data:realIndex":s});if(i.config.chart.dropShadow.enabled){var c=i.config.chart.dropShadow;new _(t.ctx).dropShadow(r,c,s)}var u=a.group({class:"apexcharts-data-labels"});o.forEach((function(r,o){var c=r[0],u=r[1],h=r[2],d=r[3],f=a.drawRect(c,u,h-c,d-u,0,"#fff",1,t.strokeWidth,i.config.plotOptions.treemap.useFillColorAsStroke?m:i.globals.stroke.colors[s]);f.attr({cx:c,cy:u,index:s,i:s,j:o,width:h-c,height:d-u});var p=t.helpers.getShadeColor(i.config.chart.type,s,o,t.negRange),m=p.color;void 0!==i.config.series[s].data[o]&&i.config.series[s].data[o].fillColor&&(m=i.config.series[s].data[o].fillColor);var g=n.fillPath({color:m,seriesNumber:s,dataPointIndex:o});f.node.classList.add("apexcharts-treemap-rect"),f.attr({fill:g}),t.helpers.addListeners(f);var v={x:c+(h-c)/2,y:u+(d-u)/2,width:0,height:0},y={x:c,y:u,width:h-c,height:d-u};if(i.config.chart.animations.enabled&&!i.globals.dataChanged){var x=1;i.globals.resized||(x=i.config.chart.animations.speed),t.animateTreemap(f,v,y,x)}if(i.globals.dataChanged){var b=1;t.dynamicAnim.enabled&&i.globals.shouldAnimate&&(b=t.dynamicAnim.speed,i.globals.previousPaths[s]&&i.globals.previousPaths[s][o]&&i.globals.previousPaths[s][o].rect&&(v=i.globals.previousPaths[s][o].rect),t.animateTreemap(f,v,y,b))}var _=t.getFontSize(r),w=i.config.dataLabels.formatter(t.labels[s][o],{value:i.globals.series[s][o],seriesIndex:s,dataPointIndex:o,w:i}),k=t.helpers.calculateDataLabels({text:w,x:(c+h)/2,y:(u+d)/2+t.strokeWidth/2+_/3,i:s,j:o,colorProps:p,fontSize:_,series:e});i.config.dataLabels.enabled&&k&&t.rotateToFitLabel(k,_,w,c,u,h,d),l.add(f),null!==k&&l.add(k)})),l.add(u),r.add(l)})),r}},{key:"getFontSize",value:function(e){var t,i,a=this.w,n=function e(t){var i,a=0;if(Array.isArray(t[0]))for(i=0;i<t.length;i++)a+=e(t[i]);else for(i=0;i<t.length;i++)a+=t[i].length;return a}(this.labels)/function e(t){var i,a=0;if(Array.isArray(t[0]))for(i=0;i<t.length;i++)a+=e(t[i]);else for(i=0;i<t.length;i++)a+=1;return a}(this.labels);return t=(e[2]-e[0])*(e[3]-e[1]),i=Math.pow(t,.5),Math.min(i/n,parseInt(a.config.dataLabels.style.fontSize,10))}},{key:"rotateToFitLabel",value:function(e,t,i,a,n,r,o){var s=new w(this.ctx),l=s.getTextRects(i,t);if(l.width+this.w.config.stroke.width+5>r-a&&l.width<=o-n){var c=s.rotateAroundCenter(e.node);e.node.setAttribute("transform","rotate(-90 ".concat(c.x," ").concat(c.y,")"))}}},{key:"animateTreemap",value:function(e,t,i,a){var n=new b(this.ctx);n.animateRect(e,{x:t.x,y:t.y,width:t.width,height:t.height},{x:i.x,y:i.y,width:i.width,height:i.height},a,(function(){n.animationCompleted(e)}))}}]),e}(),Fe=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.timeScaleArray=[],this.utc=this.w.config.xaxis.labels.datetimeUTC}return c(e,[{key:"calculateTimeScaleTicks",value:function(e,t){var i=this,a=this.w;if(a.globals.allSeriesCollapsed)return a.globals.labels=[],a.globals.timescaleLabels=[],[];var n=new I(this.ctx),o=(t-e)/864e5;this.determineInterval(o),a.globals.disableZoomIn=!1,a.globals.disableZoomOut=!1,o<.00011574074074074075?a.globals.disableZoomIn=!0:o>5e4&&(a.globals.disableZoomOut=!0);var s=n.getTimeUnitsfromTimestamp(e,t,this.utc),l=a.globals.gridWidth/o,c=l/24,u=c/60,h=u/60,d=Math.floor(24*o),f=Math.floor(1440*o),p=Math.floor(86400*o),m=Math.floor(o),g=Math.floor(o/30),v=Math.floor(o/365),y={minMillisecond:s.minMillisecond,minSecond:s.minSecond,minMinute:s.minMinute,minHour:s.minHour,minDate:s.minDate,minMonth:s.minMonth,minYear:s.minYear},x={firstVal:y,currentMillisecond:y.minMillisecond,currentSecond:y.minSecond,currentMinute:y.minMinute,currentHour:y.minHour,currentMonthDate:y.minDate,currentDate:y.minDate,currentMonth:y.minMonth,currentYear:y.minYear,daysWidthOnXAxis:l,hoursWidthOnXAxis:c,minutesWidthOnXAxis:u,secondsWidthOnXAxis:h,numberOfSeconds:p,numberOfMinutes:f,numberOfHours:d,numberOfDays:m,numberOfMonths:g,numberOfYears:v};switch(this.tickInterval){case"years":this.generateYearScale(x);break;case"months":case"half_year":this.generateMonthScale(x);break;case"months_days":case"months_fortnight":case"days":case"week_days":this.generateDayScale(x);break;case"hours":this.generateHourScale(x);break;case"minutes_fives":case"minutes":this.generateMinuteScale(x);break;case"seconds_tens":case"seconds_fives":case"seconds":this.generateSecondScale(x)}var b=this.timeScaleArray.map((function(e){var t={position:e.position,unit:e.unit,year:e.year,day:e.day?e.day:1,hour:e.hour?e.hour:0,month:e.month+1};return"month"===e.unit?r(r({},t),{},{day:1,value:e.value+1}):"day"===e.unit||"hour"===e.unit?r(r({},t),{},{value:e.value}):"minute"===e.unit?r(r({},t),{},{value:e.value,minute:e.value}):"second"===e.unit?r(r({},t),{},{value:e.value,minute:e.minute,second:e.second}):e}));return b.filter((function(e){var t=1,n=Math.ceil(a.globals.gridWidth/120),r=e.value;void 0!==a.config.xaxis.tickAmount&&(n=a.config.xaxis.tickAmount),b.length>n&&(t=Math.floor(b.length/n));var o=!1,s=!1;switch(i.tickInterval){case"years":"year"===e.unit&&(o=!0);break;case"half_year":t=7,"year"===e.unit&&(o=!0);break;case"months":t=1,"year"===e.unit&&(o=!0);break;case"months_fortnight":t=15,"year"!==e.unit&&"month"!==e.unit||(o=!0),30===r&&(s=!0);break;case"months_days":t=10,"month"===e.unit&&(o=!0),30===r&&(s=!0);break;case"week_days":t=8,"month"===e.unit&&(o=!0);break;case"days":t=1,"month"===e.unit&&(o=!0);break;case"hours":"day"===e.unit&&(o=!0);break;case"minutes_fives":case"seconds_fives":r%5!=0&&(s=!0);break;case"seconds_tens":r%10!=0&&(s=!0)}if("hours"===i.tickInterval||"minutes_fives"===i.tickInterval||"seconds_tens"===i.tickInterval||"seconds_fives"===i.tickInterval){if(!s)return!0}else if((r%t==0||o)&&!s)return!0}))}},{key:"recalcDimensionsBasedOnFormat",value:function(e,t){var i=this.w,a=this.formatDates(e),n=this.removeOverlappingTS(a);i.globals.timescaleLabels=n.slice(),new ce(this.ctx).plotCoords()}},{key:"determineInterval",value:function(e){var t=24*e,i=60*t;switch(!0){case e/365>5:this.tickInterval="years";break;case e>800:this.tickInterval="half_year";break;case e>180:this.tickInterval="months";break;case e>90:this.tickInterval="months_fortnight";break;case e>60:this.tickInterval="months_days";break;case e>30:this.tickInterval="week_days";break;case e>2:this.tickInterval="days";break;case t>2.4:this.tickInterval="hours";break;case i>15:this.tickInterval="minutes_fives";break;case i>5:this.tickInterval="minutes";break;case i>1:this.tickInterval="seconds_tens";break;case 60*i>20:this.tickInterval="seconds_fives";break;default:this.tickInterval="seconds"}}},{key:"generateYearScale",value:function(e){var t=e.firstVal,i=e.currentMonth,a=e.currentYear,n=e.daysWidthOnXAxis,r=e.numberOfYears,o=t.minYear,s=0,l=new I(this.ctx),c="year";if(t.minDate>1||t.minMonth>0){var u=l.determineRemainingDaysOfYear(t.minYear,t.minMonth,t.minDate);s=(l.determineDaysOfYear(t.minYear)-u+1)*n,o=t.minYear+1,this.timeScaleArray.push({position:s,value:o,unit:c,year:o,month:x.monthMod(i+1)})}else 1===t.minDate&&0===t.minMonth&&this.timeScaleArray.push({position:s,value:o,unit:c,year:a,month:x.monthMod(i+1)});for(var h=o,d=s,f=0;f<r;f++)h++,d=l.determineDaysOfYear(h-1)*n+d,this.timeScaleArray.push({position:d,value:h,unit:c,year:h,month:1})}},{key:"generateMonthScale",value:function(e){var t=e.firstVal,i=e.currentMonthDate,a=e.currentMonth,n=e.currentYear,r=e.daysWidthOnXAxis,o=e.numberOfMonths,s=a,l=0,c=new I(this.ctx),u="month",h=0;if(t.minDate>1){l=(c.determineDaysOfMonths(a+1,t.minYear)-i+1)*r,s=x.monthMod(a+1);var d=n+h,f=x.monthMod(s),p=s;0===s&&(u="year",p=d,f=1,d+=h+=1),this.timeScaleArray.push({position:l,value:p,unit:u,year:d,month:f})}else this.timeScaleArray.push({position:l,value:s,unit:u,year:n,month:x.monthMod(a)});for(var m=s+1,g=l,v=0,y=1;v<o;v++,y++){0===(m=x.monthMod(m))?(u="year",h+=1):u="month";var b=this._getYear(n,m,h);g=c.determineDaysOfMonths(m,b)*r+g;var _=0===m?b:m;this.timeScaleArray.push({position:g,value:_,unit:u,year:b,month:0===m?1:m}),m++}}},{key:"generateDayScale",value:function(e){var t=e.firstVal,i=e.currentMonth,a=e.currentYear,n=e.hoursWidthOnXAxis,r=e.numberOfDays,o=new I(this.ctx),s="day",l=t.minDate+1,c=l,u=function(e,t,i){return e>o.determineDaysOfMonths(t+1,i)?(c=1,s="month",d=t+=1,t):t},h=(24-t.minHour)*n,d=l,f=u(c,i,a);0===t.minHour&&1===t.minDate?(h=0,d=x.monthMod(t.minMonth),s="month",c=t.minDate,r++):1!==t.minDate&&0===t.minHour&&0===t.minMinute&&(h=0,l=t.minDate,d=l,f=u(c=l,i,a)),this.timeScaleArray.push({position:h,value:d,unit:s,year:this._getYear(a,f,0),month:x.monthMod(f),day:c});for(var p=h,m=0;m<r;m++){s="day",f=u(c+=1,f,this._getYear(a,f,0));var g=this._getYear(a,f,0);p=24*n+p;var v=1===c?x.monthMod(f):c;this.timeScaleArray.push({position:p,value:v,unit:s,year:g,month:x.monthMod(f),day:v})}}},{key:"generateHourScale",value:function(e){var t=e.firstVal,i=e.currentDate,a=e.currentMonth,n=e.currentYear,r=e.minutesWidthOnXAxis,o=e.numberOfHours,s=new I(this.ctx),l="hour",c=function(e,t){return e>s.determineDaysOfMonths(t+1,n)&&(m=1,t+=1),{month:t,date:m}},u=function(e,t){return e>s.determineDaysOfMonths(t+1,n)?t+=1:t},h=60-(t.minMinute+t.minSecond/60),d=h*r,f=t.minHour+1,p=f+1;60===h&&(d=0,p=(f=t.minHour)+1);var m=i,g=u(m,a);this.timeScaleArray.push({position:d,value:f,unit:l,day:m,hour:p,year:n,month:x.monthMod(g)});for(var v=d,y=0;y<o;y++){l="hour",p>=24&&(p=0,l="day",g=c(m+=1,g).month,g=u(m,g));var b=this._getYear(n,g,0);v=0===p&&0===y?h*r:60*r+v;var _=0===p?m:p;this.timeScaleArray.push({position:v,value:_,unit:l,hour:p,day:m,year:b,month:x.monthMod(g)}),p++}}},{key:"generateMinuteScale",value:function(e){for(var t=e.currentMillisecond,i=e.currentSecond,a=e.currentMinute,n=e.currentHour,r=e.currentDate,o=e.currentMonth,s=e.currentYear,l=e.minutesWidthOnXAxis,c=e.secondsWidthOnXAxis,u=e.numberOfMinutes,h=a+1,d=r,f=o,p=s,m=n,g=(60-i-t/1e3)*c,v=0;v<u;v++)h>=60&&(h=0,24===(m+=1)&&(m=0)),this.timeScaleArray.push({position:g,value:h,unit:"minute",hour:m,minute:h,day:d,year:this._getYear(p,f,0),month:x.monthMod(f)}),g+=l,h++}},{key:"generateSecondScale",value:function(e){for(var t=e.currentMillisecond,i=e.currentSecond,a=e.currentMinute,n=e.currentHour,r=e.currentDate,o=e.currentMonth,s=e.currentYear,l=e.secondsWidthOnXAxis,c=e.numberOfSeconds,u=i+1,h=a,d=r,f=o,p=s,m=n,g=(1e3-t)/1e3*l,v=0;v<c;v++)u>=60&&(u=0,++h>=60&&(h=0,24===++m&&(m=0))),this.timeScaleArray.push({position:g,value:u,unit:"second",hour:m,minute:h,second:u,day:d,year:this._getYear(p,f,0),month:x.monthMod(f)}),g+=l,u++}},{key:"createRawDateString",value:function(e,t){var i=e.year;return 0===e.month&&(e.month=1),i+="-"+("0"+e.month.toString()).slice(-2),"day"===e.unit?i+="day"===e.unit?"-"+("0"+t).slice(-2):"-01":i+="-"+("0"+(e.day?e.day:"1")).slice(-2),"hour"===e.unit?i+="hour"===e.unit?"T"+("0"+t).slice(-2):"T00":i+="T"+("0"+(e.hour?e.hour:"0")).slice(-2),"minute"===e.unit?i+=":"+("0"+t).slice(-2):i+=":"+(e.minute?("0"+e.minute).slice(-2):"00"),"second"===e.unit?i+=":"+("0"+t).slice(-2):i+=":00",this.utc&&(i+=".000Z"),i}},{key:"formatDates",value:function(e){var t=this,i=this.w;return e.map((function(e){var a=e.value.toString(),n=new I(t.ctx),r=t.createRawDateString(e,a),o=n.getDate(n.parseDate(r));if(t.utc||(o=n.getDate(n.parseDateWithTimezone(r))),void 0===i.config.xaxis.labels.format){var s="dd MMM",l=i.config.xaxis.labels.datetimeFormatter;"year"===e.unit&&(s=l.year),"month"===e.unit&&(s=l.month),"day"===e.unit&&(s=l.day),"hour"===e.unit&&(s=l.hour),"minute"===e.unit&&(s=l.minute),"second"===e.unit&&(s=l.second),a=n.formatDate(o,s)}else a=n.formatDate(o,i.config.xaxis.labels.format);return{dateString:r,position:e.position,value:a,unit:e.unit,year:e.year,month:e.month}}))}},{key:"removeOverlappingTS",value:function(e){var t,i=this,a=new w(this.ctx),n=!1;e.length>0&&e[0].value&&e.every((function(t){return t.value.length===e[0].value.length}))&&(n=!0,t=a.getTextRects(e[0].value).width);var r=0,o=e.map((function(o,s){if(s>0&&i.w.config.xaxis.labels.hideOverlappingLabels){var l=n?t:a.getTextRects(e[r].value).width,c=e[r].position;return o.position>c+l+10?(r=s,o):null}return o}));return o.filter((function(e){return null!==e}))}},{key:"_getYear",value:function(e,t,i){return e+Math.floor(t/12)+i}}]),e}(),Be=function(){function e(t,i){s(this,e),this.ctx=i,this.w=i.w,this.el=t}return c(e,[{key:"setupElements",value:function(){var e=this.w.globals,t=this.w.config,i=t.chart.type;e.axisCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble","radar","heatmap","treemap"].indexOf(i)>-1,e.xyCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble"].indexOf(i)>-1,e.isBarHorizontal=("bar"===t.chart.type||"rangeBar"===t.chart.type||"boxPlot"===t.chart.type)&&t.plotOptions.bar.horizontal,e.chartClass=".apexcharts"+e.chartID,e.dom.baseEl=this.el,e.dom.elWrap=document.createElement("div"),w.setAttrs(e.dom.elWrap,{id:e.chartClass.substring(1),class:"apexcharts-canvas "+e.chartClass.substring(1)}),this.el.appendChild(e.dom.elWrap),e.dom.Paper=new window.SVG.Doc(e.dom.elWrap),e.dom.Paper.attr({class:"apexcharts-svg","xmlns:data":"ApexChartsNS",transform:"translate(".concat(t.chart.offsetX,", ").concat(t.chart.offsetY,")")}),e.dom.Paper.node.style.background=t.chart.background,this.setSVGDimensions(),e.dom.elGraphical=e.dom.Paper.group().attr({class:"apexcharts-inner apexcharts-graphical"}),e.dom.elAnnotations=e.dom.Paper.group().attr({class:"apexcharts-annotations"}),e.dom.elDefs=e.dom.Paper.defs(),e.dom.elLegendWrap=document.createElement("div"),e.dom.elLegendWrap.classList.add("apexcharts-legend"),e.dom.elWrap.appendChild(e.dom.elLegendWrap),e.dom.Paper.add(e.dom.elGraphical),e.dom.elGraphical.add(e.dom.elDefs)}},{key:"plotChartType",value:function(e,t){var i=this.w,a=i.config,n=i.globals,r={series:[],i:[]},o={series:[],i:[]},s={series:[],i:[]},l={series:[],i:[]},c={series:[],i:[]},u={series:[],i:[]},h={series:[],i:[]},d={series:[],i:[]},f={series:[],seriesRangeEnd:[],i:[]};n.series.map((function(t,p){var m=0;void 0!==e[p].type?("column"===e[p].type||"bar"===e[p].type?(n.series.length>1&&a.plotOptions.bar.horizontal&&console.warn("Horizontal bars are not supported in a mixed/combo chart. Please turn off `plotOptions.bar.horizontal`"),c.series.push(t),c.i.push(p),m++,i.globals.columnSeries=c.series):"area"===e[p].type?(o.series.push(t),o.i.push(p),m++):"line"===e[p].type?(r.series.push(t),r.i.push(p),m++):"scatter"===e[p].type?(s.series.push(t),s.i.push(p)):"bubble"===e[p].type?(l.series.push(t),l.i.push(p),m++):"candlestick"===e[p].type?(u.series.push(t),u.i.push(p),m++):"boxPlot"===e[p].type?(h.series.push(t),h.i.push(p),m++):"rangeBar"===e[p].type?(d.series.push(t),d.i.push(p),m++):"rangeArea"===e[p].type?(f.series.push(n.seriesRangeStart[p]),f.seriesRangeEnd.push(n.seriesRangeEnd[p]),f.i.push(p),m++):console.warn("You have specified an unrecognized chart type. Available types for this property are line/area/column/bar/scatter/bubble"),m>1&&(n.comboCharts=!0)):(r.series.push(t),r.i.push(p))}));var p=new ze(this.ctx,t),m=new Ce(this.ctx,t);this.ctx.pie=new Me(this.ctx);var g=new Ie(this.ctx);this.ctx.rangeBar=new Pe(this.ctx,t);var v=new Ee(this.ctx),y=[];if(n.comboCharts){if(o.series.length>0&&y.push(p.draw(o.series,"area",o.i)),c.series.length>0)if(i.config.chart.stacked){var x=new Se(this.ctx,t);y.push(x.draw(c.series,c.i))}else this.ctx.bar=new ke(this.ctx,t),y.push(this.ctx.bar.draw(c.series,c.i));if(f.series.length>0&&y.push(p.draw(f.series,"rangeArea",f.i,f.seriesRangeEnd)),r.series.length>0&&y.push(p.draw(r.series,"line",r.i)),u.series.length>0&&y.push(m.draw(u.series,u.i)),h.series.length>0&&y.push(m.draw(h.series,h.i)),d.series.length>0&&y.push(this.ctx.rangeBar.draw(d.series,d.i)),s.series.length>0){var b=new ze(this.ctx,t,!0);y.push(b.draw(s.series,"scatter",s.i))}if(l.series.length>0){var _=new ze(this.ctx,t,!0);y.push(_.draw(l.series,"bubble",l.i))}}else switch(a.chart.type){case"line":y=p.draw(n.series,"line");break;case"area":y=p.draw(n.series,"area");break;case"bar":a.chart.stacked?y=new Se(this.ctx,t).draw(n.series):(this.ctx.bar=new ke(this.ctx,t),y=this.ctx.bar.draw(n.series));break;case"candlestick":case"boxPlot":y=new Ce(this.ctx,t).draw(n.series);break;case"rangeBar":y=this.ctx.rangeBar.draw(n.series);break;case"rangeArea":y=p.draw(n.seriesRangeStart,"rangeArea",void 0,n.seriesRangeEnd);break;case"heatmap":y=new Oe(this.ctx,t).draw(n.series);break;case"treemap":y=new Re(this.ctx,t).draw(n.series);break;case"pie":case"donut":case"polarArea":y=this.ctx.pie.draw(n.series);break;case"radialBar":y=g.draw(n.series);break;case"radar":y=v.draw(n.series);break;default:y=p.draw(n.series)}return y}},{key:"setSVGDimensions",value:function(){var e=this.w.globals,t=this.w.config;e.svgWidth=t.chart.width,e.svgHeight=t.chart.height;var i=x.getDimensions(this.el),a=t.chart.width.toString().split(/[0-9]+/g).pop();"%"===a?x.isNumber(i[0])&&(0===i[0].width&&(i=x.getDimensions(this.el.parentNode)),e.svgWidth=i[0]*parseInt(t.chart.width,10)/100):"px"!==a&&""!==a||(e.svgWidth=parseInt(t.chart.width,10));var n=t.chart.height.toString().split(/[0-9]+/g).pop();if("auto"!==e.svgHeight&&""!==e.svgHeight)if("%"===n){var r=x.getDimensions(this.el.parentNode);e.svgHeight=r[1]*parseInt(t.chart.height,10)/100}else e.svgHeight=parseInt(t.chart.height,10);else e.axisCharts?e.svgHeight=e.svgWidth/1.61:e.svgHeight=e.svgWidth/1.2;if(e.svgWidth<0&&(e.svgWidth=0),e.svgHeight<0&&(e.svgHeight=0),w.setAttrs(e.dom.Paper.node,{width:e.svgWidth,height:e.svgHeight}),"%"!==n){var o=t.chart.sparkline.enabled?0:e.axisCharts?t.chart.parentHeightOffset:0;e.dom.Paper.node.parentNode.parentNode.style.minHeight=e.svgHeight+o+"px"}e.dom.elWrap.style.width=e.svgWidth+"px",e.dom.elWrap.style.height=e.svgHeight+"px"}},{key:"shiftGraphPosition",value:function(){var e=this.w.globals,t=e.translateY,i={transform:"translate("+e.translateX+", "+t+")"};w.setAttrs(e.dom.elGraphical.node,i)}},{key:"resizeNonAxisCharts",value:function(){var e=this.w,t=e.globals,i=0,a=e.config.chart.sparkline.enabled?1:15;a+=e.config.grid.padding.bottom,"top"!==e.config.legend.position&&"bottom"!==e.config.legend.position||!e.config.legend.show||e.config.legend.floating||(i=new he(this.ctx).legendHelpers.getLegendBBox().clwh+10);var n=e.globals.dom.baseEl.querySelector(".apexcharts-radialbar, .apexcharts-pie"),r=2.05*e.globals.radialSize;if(n&&!e.config.chart.sparkline.enabled&&0!==e.config.plotOptions.radialBar.startAngle){var o=x.getBoundingClientRect(n);r=o.bottom;var s=o.bottom-o.top;r=Math.max(2.05*e.globals.radialSize,s)}var l=r+t.translateY+i+a;t.dom.elLegendForeign&&t.dom.elLegendForeign.setAttribute("height",l),e.config.chart.height&&String(e.config.chart.height).indexOf("%")>0||(t.dom.elWrap.style.height=l+"px",w.setAttrs(t.dom.Paper.node,{height:l}),t.dom.Paper.node.parentNode.parentNode.style.minHeight=l+"px")}},{key:"coreCalculations",value:function(){new K(this.ctx).init()}},{key:"resetGlobals",value:function(){var e=this,t=function(){return e.w.config.series.map((function(e){return[]}))},i=new j,a=this.w.globals;i.initGlobalVars(a),a.seriesXvalues=t(),a.seriesYvalues=t()}},{key:"isMultipleY",value:function(){if(this.w.config.yaxis.constructor===Array&&this.w.config.yaxis.length>1)return this.w.globals.isMultipleYAxis=!0,!0}},{key:"xySettings",value:function(){var e=null,t=this.w;if(t.globals.axisCharts){if("back"===t.config.xaxis.crosshairs.position&&new te(this.ctx).drawXCrosshairs(),"back"===t.config.yaxis[0].crosshairs.position&&new te(this.ctx).drawYCrosshairs(),"datetime"===t.config.xaxis.type&&void 0===t.config.xaxis.labels.formatter){this.ctx.timeScale=new Fe(this.ctx);var i=[];isFinite(t.globals.minX)&&isFinite(t.globals.maxX)&&!t.globals.isBarHorizontal?i=this.ctx.timeScale.calculateTimeScaleTicks(t.globals.minX,t.globals.maxX):t.globals.isBarHorizontal&&(i=this.ctx.timeScale.calculateTimeScaleTicks(t.globals.minY,t.globals.maxY)),this.ctx.timeScale.recalcDimensionsBasedOnFormat(i)}e=new k(this.ctx).getCalculatedRatios()}return e}},{key:"updateSourceChart",value:function(e){this.ctx.w.globals.selection=void 0,this.ctx.updateHelpers._updateOptions({chart:{selection:{xaxis:{min:e.w.globals.minX,max:e.w.globals.maxX}}}},!1,!1)}},{key:"setupBrushHandler",value:function(){var e=this,t=this.w;if(t.config.chart.brush.enabled&&"function"!=typeof t.config.chart.events.selection){var i=t.config.chart.brush.targets||[t.config.chart.brush.target];i.forEach((function(t){var i=ApexCharts.getChartByID(t);i.w.globals.brushSource=e.ctx,"function"!=typeof i.w.config.chart.events.zoomed&&(i.w.config.chart.events.zoomed=function(){e.updateSourceChart(i)}),"function"!=typeof i.w.config.chart.events.scrolled&&(i.w.config.chart.events.scrolled=function(){e.updateSourceChart(i)})})),t.config.chart.events.selection=function(e,a){i.forEach((function(e){var i=ApexCharts.getChartByID(e),n=x.clone(t.config.yaxis);if(t.config.chart.brush.autoScaleYaxis&&1===i.w.globals.series.length){var o=new Z(i);n=o.autoScaleY(i,n,a)}var s=i.w.config.yaxis.reduce((function(e,t,a){return[].concat(g(e),[r(r({},i.w.config.yaxis[a]),{},{min:n[0].min,max:n[0].max})])}),[]);i.ctx.updateHelpers._updateOptions({xaxis:{min:a.xaxis.min,max:a.xaxis.max},yaxis:s},!1,!1,!1,!1)}))}}}}]),e}(),Ne=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"_updateOptions",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new Promise((function(s){var l=[t.ctx];n&&(l=t.ctx.getSyncedCharts()),t.ctx.w.globals.isExecCalled&&(l=[t.ctx],t.ctx.w.globals.isExecCalled=!1),l.forEach((function(n,c){var u=n.w;if(u.globals.shouldAnimate=a,i||(u.globals.resized=!0,u.globals.dataChanged=!0,a&&n.series.getPreviousPaths()),e&&"object"===o(e)&&(n.config=new L(e),e=k.extendArrayProps(n.config,e,u),n.w.globals.chartID!==t.ctx.w.globals.chartID&&delete e.series,u.config=x.extend(u.config,e),r&&(u.globals.lastXAxis=e.xaxis?x.clone(e.xaxis):[],u.globals.lastYAxis=e.yaxis?x.clone(e.yaxis):[],u.globals.initialConfig=x.extend({},u.config),u.globals.initialSeries=x.clone(u.config.series),e.series))){for(var h=0;h<u.globals.collapsedSeriesIndices.length;h++){var d=u.config.series[u.globals.collapsedSeriesIndices[h]];u.globals.collapsedSeries[h].data=u.globals.axisCharts?d.data.slice():d}for(var f=0;f<u.globals.ancillaryCollapsedSeriesIndices.length;f++){var p=u.config.series[u.globals.ancillaryCollapsedSeriesIndices[f]];u.globals.ancillaryCollapsedSeries[f].data=u.globals.axisCharts?p.data.slice():p}n.series.emptyCollapsedSeries(u.config.series)}return n.update(e).then((function(){c===l.length-1&&s(n)}))}))}))}},{key:"_updateSeries",value:function(e,t){var i=this,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise((function(n){var r,o=i.w;return o.globals.shouldAnimate=t,o.globals.dataChanged=!0,t&&i.ctx.series.getPreviousPaths(),o.globals.axisCharts?(0===(r=e.map((function(e,t){return i._extendSeries(e,t)}))).length&&(r=[{data:[]}]),o.config.series=r):o.config.series=e.slice(),a&&(o.globals.initialConfig.series=x.clone(o.config.series),o.globals.initialSeries=x.clone(o.config.series)),i.ctx.update().then((function(){n(i.ctx)}))}))}},{key:"_extendSeries",value:function(e,t){var i=this.w,a=i.config.series[t];return r(r({},i.config.series[t]),{},{name:e.name?e.name:a&&a.name,color:e.color?e.color:a&&a.color,type:e.type?e.type:a&&a.type,data:e.data?e.data:a&&a.data})}},{key:"toggleDataPointSelection",value:function(e,t){var i=this.w,a=null,n=".apexcharts-series[data\\:realIndex='".concat(e,"']");return i.globals.axisCharts?a=i.globals.dom.Paper.select("".concat(n," path[j='").concat(t,"'], ").concat(n," circle[j='").concat(t,"'], ").concat(n," rect[j='").concat(t,"']")).members[0]:void 0===t&&(a=i.globals.dom.Paper.select("".concat(n," path[j='").concat(e,"']")).members[0],"pie"!==i.config.chart.type&&"polarArea"!==i.config.chart.type&&"donut"!==i.config.chart.type||this.ctx.pie.pieClicked(e)),a?(new w(this.ctx).pathMouseDown(a,null),a.node?a.node:null):(console.warn("toggleDataPointSelection: Element not found"),null)}},{key:"forceXAxisUpdate",value:function(e){var t=this.w;if(["min","max"].forEach((function(i){void 0!==e.xaxis[i]&&(t.config.xaxis[i]=e.xaxis[i],t.globals.lastXAxis[i]=e.xaxis[i])})),e.xaxis.categories&&e.xaxis.categories.length&&(t.config.xaxis.categories=e.xaxis.categories),t.config.xaxis.convertedCatToNumeric){var i=new z(e);e=i.convertCatToNumericXaxis(e,this.ctx)}return e}},{key:"forceYAxisUpdate",value:function(e){return e.chart&&e.chart.stacked&&"100%"===e.chart.stackType&&(Array.isArray(e.yaxis)?e.yaxis.forEach((function(t,i){e.yaxis[i].min=0,e.yaxis[i].max=100})):(e.yaxis.min=0,e.yaxis.max=100)),e}},{key:"revertDefaultAxisMinMax",value:function(e){var t=this,i=this.w,a=i.globals.lastXAxis,n=i.globals.lastYAxis;e&&e.xaxis&&(a=e.xaxis),e&&e.yaxis&&(n=e.yaxis),i.config.xaxis.min=a.min,i.config.xaxis.max=a.max;i.config.yaxis.map((function(e,a){i.globals.zoomed||void 0!==n[a]?function(e){void 0!==n[e]&&(i.config.yaxis[e].min=n[e].min,i.config.yaxis[e].max=n[e].max)}(a):void 0!==t.ctx.opts.yaxis[a]&&(e.min=t.ctx.opts.yaxis[a].min,e.max=t.ctx.opts.yaxis[a].max)}))}}]),e}();Le="undefined"!=typeof window?window:void 0,je=function(e,t){var i=(void 0!==this?this:e).SVG=function(e){if(i.supported)return e=new i.Doc(e),i.parser.draw||i.prepare(),e};if(i.ns="http://www.w3.org/2000/svg",i.xmlns="http://www.w3.org/2000/xmlns/",i.xlink="http://www.w3.org/1999/xlink",i.svgjs="http://svgjs.dev",i.supported=!0,!i.supported)return!1;i.did=1e3,i.eid=function(e){return"Svgjs"+h(e)+i.did++},i.create=function(e){var i=t.createElementNS(this.ns,e);return i.setAttribute("id",this.eid(e)),i},i.extend=function(){var e,t;t=(e=[].slice.call(arguments)).pop();for(var a=e.length-1;a>=0;a--)if(e[a])for(var n in t)e[a].prototype[n]=t[n];i.Set&&i.Set.inherit&&i.Set.inherit()},i.invent=function(e){var t="function"==typeof e.create?e.create:function(){this.constructor.call(this,i.create(e.create))};return e.inherit&&(t.prototype=new e.inherit),e.extend&&i.extend(t,e.extend),e.construct&&i.extend(e.parent||i.Container,e.construct),t},i.adopt=function(t){return t?t.instance?t.instance:((a="svg"==t.nodeName?t.parentNode instanceof e.SVGElement?new i.Nested:new i.Doc:"linearGradient"==t.nodeName?new i.Gradient("linear"):"radialGradient"==t.nodeName?new i.Gradient("radial"):i[h(t.nodeName)]?new(i[h(t.nodeName)]):new i.Element(t)).type=t.nodeName,a.node=t,t.instance=a,a instanceof i.Doc&&a.namespace().defs(),a.setData(JSON.parse(t.getAttribute("svgjs:data"))||{}),a):null;var a},i.prepare=function(){var e=t.getElementsByTagName("body")[0],a=(e?new i.Doc(e):i.adopt(t.documentElement).nested()).size(2,0);i.parser={body:e||t.documentElement,draw:a.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").node,poly:a.polyline().node,path:a.path().node,native:i.create("svg")}},i.parser={native:i.create("svg")},t.addEventListener("DOMContentLoaded",(function(){i.parser.draw||i.prepare()}),!1),i.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},i.utils={map:function(e,t){for(var i=e.length,a=[],n=0;n<i;n++)a.push(t(e[n]));return a},filter:function(e,t){for(var i=e.length,a=[],n=0;n<i;n++)t(e[n])&&a.push(e[n]);return a},filterSVGElements:function(t){return this.filter(t,(function(t){return t instanceof e.SVGElement}))}},i.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},i.Color=function(e){var t,a;this.r=0,this.g=0,this.b=0,e&&("string"==typeof e?i.regex.isRgb.test(e)?(t=i.regex.rgb.exec(e.replace(i.regex.whitespace,"")),this.r=parseInt(t[1]),this.g=parseInt(t[2]),this.b=parseInt(t[3])):i.regex.isHex.test(e)&&(t=i.regex.hex.exec(4==(a=e).length?["#",a.substring(1,2),a.substring(1,2),a.substring(2,3),a.substring(2,3),a.substring(3,4),a.substring(3,4)].join(""):a),this.r=parseInt(t[1],16),this.g=parseInt(t[2],16),this.b=parseInt(t[3],16)):"object"===o(e)&&(this.r=e.r,this.g=e.g,this.b=e.b))},i.extend(i.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+d(this.r)+d(this.g)+d(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(e){return this.destination=new i.Color(e),this},at:function(e){return this.destination?(e=e<0?0:e>1?1:e,new i.Color({r:~~(this.r+(this.destination.r-this.r)*e),g:~~(this.g+(this.destination.g-this.g)*e),b:~~(this.b+(this.destination.b-this.b)*e)})):this}}),i.Color.test=function(e){return e+="",i.regex.isHex.test(e)||i.regex.isRgb.test(e)},i.Color.isRgb=function(e){return e&&"number"==typeof e.r&&"number"==typeof e.g&&"number"==typeof e.b},i.Color.isColor=function(e){return i.Color.isRgb(e)||i.Color.test(e)},i.Array=function(e,t){0==(e=(e||[]).valueOf()).length&&t&&(e=t.valueOf()),this.value=this.parse(e)},i.extend(i.Array,{toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(e){return e=e.valueOf(),Array.isArray(e)?e:this.split(e)}}),i.PointArray=function(e,t){i.Array.call(this,e,t||[[0,0]])},i.PointArray.prototype=new i.Array,i.PointArray.prototype.constructor=i.PointArray;for(var a={M:function(e,t,i){return t.x=i.x=e[0],t.y=i.y=e[1],["M",t.x,t.y]},L:function(e,t){return t.x=e[0],t.y=e[1],["L",e[0],e[1]]},H:function(e,t){return t.x=e[0],["H",e[0]]},V:function(e,t){return t.y=e[0],["V",e[0]]},C:function(e,t){return t.x=e[4],t.y=e[5],["C",e[0],e[1],e[2],e[3],e[4],e[5]]},Q:function(e,t){return t.x=e[2],t.y=e[3],["Q",e[0],e[1],e[2],e[3]]},Z:function(e,t,i){return t.x=i.x,t.y=i.y,["Z"]}},n="mlhvqtcsaz".split(""),r=0,s=n.length;r<s;++r)a[n[r]]=function(e){return function(t,i,n){if("H"==e)t[0]=t[0]+i.x;else if("V"==e)t[0]=t[0]+i.y;else if("A"==e)t[5]=t[5]+i.x,t[6]=t[6]+i.y;else for(var r=0,o=t.length;r<o;++r)t[r]=t[r]+(r%2?i.y:i.x);if(a&&"function"==typeof a[e])return a[e](t,i,n)}}(n[r].toUpperCase());i.PathArray=function(e,t){i.Array.call(this,e,t||[["M",0,0]])},i.PathArray.prototype=new i.Array,i.PathArray.prototype.constructor=i.PathArray,i.extend(i.PathArray,{toString:function(){return function(e){for(var t=0,i=e.length,a="";t<i;t++)a+=e[t][0],null!=e[t][1]&&(a+=e[t][1],null!=e[t][2]&&(a+=" ",a+=e[t][2],null!=e[t][3]&&(a+=" ",a+=e[t][3],a+=" ",a+=e[t][4],null!=e[t][5]&&(a+=" ",a+=e[t][5],a+=" ",a+=e[t][6],null!=e[t][7]&&(a+=" ",a+=e[t][7])))));return a+" "}(this.value)},move:function(e,t){var i=this.bbox();return i.x,i.y,this},at:function(e){if(!this.destination)return this;for(var t=this.value,a=this.destination.value,n=[],r=new i.PathArray,o=0,s=t.length;o<s;o++){n[o]=[t[o][0]];for(var l=1,c=t[o].length;l<c;l++)n[o][l]=t[o][l]+(a[o][l]-t[o][l])*e;"A"===n[o][0]&&(n[o][4]=+(0!=n[o][4]),n[o][5]=+(0!=n[o][5]))}return r.value=n,r},parse:function(e){if(e instanceof i.PathArray)return e.valueOf();var t,n={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};e="string"==typeof e?e.replace(i.regex.numbersWithDots,c).replace(i.regex.pathLetters," $& ").replace(i.regex.hyphen,"$1 -").trim().split(i.regex.delimiter):e.reduce((function(e,t){return[].concat.call(e,t)}),[]);var r=[],o=new i.Point,s=new i.Point,l=0,u=e.length;do{i.regex.isPathLetter.test(e[l])?(t=e[l],++l):"M"==t?t="L":"m"==t&&(t="l"),r.push(a[t].call(null,e.slice(l,l+=n[t.toUpperCase()]).map(parseFloat),o,s))}while(u>l);return r},bbox:function(){return i.parser.draw||i.prepare(),i.parser.path.setAttribute("d",this.toString()),i.parser.path.getBBox()}}),i.Number=i.invent({create:function(e,t){this.value=0,this.unit=t||"","number"==typeof e?this.value=isNaN(e)?0:isFinite(e)?e:e<0?-34e37:34e37:"string"==typeof e?(t=e.match(i.regex.numberAndUnit))&&(this.value=parseFloat(t[1]),"%"==t[5]?this.value/=100:"s"==t[5]&&(this.value*=1e3),this.unit=t[5]):e instanceof i.Number&&(this.value=e.valueOf(),this.unit=e.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(e){return e=new i.Number(e),new i.Number(this+e,this.unit||e.unit)},minus:function(e){return e=new i.Number(e),new i.Number(this-e,this.unit||e.unit)},times:function(e){return e=new i.Number(e),new i.Number(this*e,this.unit||e.unit)},divide:function(e){return e=new i.Number(e),new i.Number(this/e,this.unit||e.unit)},to:function(e){var t=new i.Number(this);return"string"==typeof e&&(t.unit=e),t},morph:function(e){return this.destination=new i.Number(e),e.relative&&(this.destination.value+=this.value),this},at:function(e){return this.destination?new i.Number(this.destination).minus(this).times(e).plus(this):this}}}),i.Element=i.invent({create:function(e){this._stroke=i.defaults.attrs.stroke,this._event=null,this.dom={},(this.node=e)&&(this.type=e.nodeName,this.node.instance=this,this._stroke=e.getAttribute("stroke")||this._stroke)},extend:{x:function(e){return this.attr("x",e)},y:function(e){return this.attr("y",e)},cx:function(e){return null==e?this.x()+this.width()/2:this.x(e-this.width()/2)},cy:function(e){return null==e?this.y()+this.height()/2:this.y(e-this.height()/2)},move:function(e,t){return this.x(e).y(t)},center:function(e,t){return this.cx(e).cy(t)},width:function(e){return this.attr("width",e)},height:function(e){return this.attr("height",e)},size:function(e,t){var a=f(this,e,t);return this.width(new i.Number(a.width)).height(new i.Number(a.height))},clone:function(e){this.writeDataToDom();var t=g(this.node.cloneNode(!0));return e?e.add(t):this.after(t),t},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(e){return this.after(e).remove(),e},addTo:function(e){return e.put(this)},putIn:function(e){return e.add(this)},id:function(e){return this.attr("id",e)},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var e=this.attr("class");return null==e?[]:e.trim().split(i.regex.delimiter)},hasClass:function(e){return-1!=this.classes().indexOf(e)},addClass:function(e){if(!this.hasClass(e)){var t=this.classes();t.push(e),this.attr("class",t.join(" "))}return this},removeClass:function(e){return this.hasClass(e)&&this.attr("class",this.classes().filter((function(t){return t!=e})).join(" ")),this},toggleClass:function(e){return this.hasClass(e)?this.removeClass(e):this.addClass(e)},reference:function(e){return i.get(this.attr(e))},parent:function(t){var a=this;if(!a.node.parentNode)return null;if(a=i.adopt(a.node.parentNode),!t)return a;for(;a&&a.node instanceof e.SVGElement;){if("string"==typeof t?a.matches(t):a instanceof t)return a;if(!a.node.parentNode||"#document"==a.node.parentNode.nodeName)return null;a=i.adopt(a.node.parentNode)}},doc:function(){return this instanceof i.Doc?this:this.parent(i.Doc)},parents:function(e){var t=[],i=this;do{if(!(i=i.parent(e))||!i.node)break;t.push(i)}while(i.parent);return t},matches:function(e){return function(e,t){return(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector).call(e,t)}(this.node,e)},native:function(){return this.node},svg:function(e){var a=t.createElement("svg");if(!(e&&this instanceof i.Parent))return a.appendChild(e=t.createElement("svg")),this.writeDataToDom(),e.appendChild(this.node.cloneNode(!0)),a.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");a.innerHTML="<svg>"+e.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var n=0,r=a.firstChild.childNodes.length;n<r;n++)this.node.appendChild(a.firstChild.firstChild);return this},writeDataToDom:function(){return(this.each||this.lines)&&(this.each?this:this.lines()).each((function(){this.writeDataToDom()})),this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(e){return this.dom=e,this},is:function(e){return function(e,t){return e instanceof t}(this,e)}}}),i.easing={"-":function(e){return e},"<>":function(e){return-Math.cos(e*Math.PI)/2+.5},">":function(e){return Math.sin(e*Math.PI/2)},"<":function(e){return 1-Math.cos(e*Math.PI/2)}},i.morph=function(e){return function(t,a){return new i.MorphObj(t,a).at(e)}},i.Situation=i.invent({create:function(e){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new i.Number(e.duration).valueOf(),this.delay=new i.Number(e.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=e.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),i.FX=i.invent({create:function(e){this._target=e,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(e,t,a){"object"===o(e)&&(t=e.ease,a=e.delay,e=e.duration);var n=new i.Situation({duration:e||1e3,delay:a||0,ease:i.easing[t||"-"]||t});return this.queue(n),this},target:function(e){return e&&e instanceof i.Element?(this._target=e,this):this._target},timeToAbsPos:function(e){return(e-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(e){return this.situation.duration/this._speed*e+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=e.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){e.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(e){return("function"==typeof e||e instanceof i.Situation)&&this.situations.push(e),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof i.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var e,t=this.situation;if(t.init)return this;for(var a in t.animations){e=this.target()[a](),Array.isArray(e)||(e=[e]),Array.isArray(t.animations[a])||(t.animations[a]=[t.animations[a]]);for(var n=e.length;n--;)t.animations[a][n]instanceof i.Number&&(e[n]=new i.Number(e[n])),t.animations[a][n]=e[n].morph(t.animations[a][n])}for(var a in t.attrs)t.attrs[a]=new i.MorphObj(this.target().attr(a),t.attrs[a]);for(var a in t.styles)t.styles[a]=new i.MorphObj(this.target().style(a),t.styles[a]);return t.initialTransformation=this.target().matrixify(),t.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(e,t){var i=this.active;return this.active=!1,t&&this.clearQueue(),e&&this.situation&&(!i&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},after:function(e){var t=this.last();return this.target().on("finished.fx",(function i(a){a.detail.situation==t&&(e.call(this,t),this.off("finished.fx",i))})),this._callStart()},during:function(e){var t=this.last(),a=function(a){a.detail.situation==t&&e.call(this,a.detail.pos,i.morph(a.detail.pos),a.detail.eased,t)};return this.target().off("during.fx",a).on("during.fx",a),this.after((function(){this.off("during.fx",a)})),this._callStart()},afterAll:function(e){var t=function t(i){e.call(this),this.off("allfinished.fx",t)};return this.target().off("allfinished.fx",t).on("allfinished.fx",t),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(e,t,i){return this.last()[i||"animations"][e]=t,this._callStart()},step:function(e){var t,i,a;e||(this.absPos=this.timeToAbsPos(+new Date)),!1!==this.situation.loops?(t=Math.max(this.absPos,0),i=Math.floor(t),!0===this.situation.loops||i<this.situation.loops?(this.pos=t-i,a=this.situation.loop,this.situation.loop=i):(this.absPos=this.situation.loops,this.pos=1,a=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=Boolean((this.situation.loop-a)%2))):(this.absPos=Math.min(this.absPos,1),this.pos=this.absPos),this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var n=this.situation.ease(this.pos);for(var r in this.situation.once)r>this.lastPos&&r<=n&&(this.situation.once[r].call(this.target(),this.pos,n),delete this.situation.once[r]);return this.active&&this.target().fire("during",{pos:this.pos,eased:n,fx:this,situation:this.situation}),this.situation?(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=n,this):this},eachAt:function(){var e,t=this,a=this.target(),n=this.situation;for(var r in n.animations)e=[].concat(n.animations[r]).map((function(e){return"string"!=typeof e&&e.at?e.at(n.ease(t.pos),t.pos):e})),a[r].apply(a,e);for(var r in n.attrs)e=[r].concat(n.attrs[r]).map((function(e){return"string"!=typeof e&&e.at?e.at(n.ease(t.pos),t.pos):e})),a.attr.apply(a,e);for(var r in n.styles)e=[r].concat(n.styles[r]).map((function(e){return"string"!=typeof e&&e.at?e.at(n.ease(t.pos),t.pos):e})),a.style.apply(a,e);if(n.transforms.length){e=n.initialTransformation,r=0;for(var o=n.transforms.length;r<o;r++){var s=n.transforms[r];s instanceof i.Matrix?e=s.relative?e.multiply((new i.Matrix).morph(s).at(n.ease(this.pos))):e.morph(s).at(n.ease(this.pos)):(s.relative||s.undo(e.extract()),e=e.multiply(s.at(n.ease(this.pos))))}a.matrix(e)}return this},once:function(e,t,i){var a=this.last();return i||(e=a.ease(e)),a.once[e]=t,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:i.Element,construct:{animate:function(e,t,a){return(this.fx||(this.fx=new i.FX(this))).animate(e,t,a)},delay:function(e){return(this.fx||(this.fx=new i.FX(this))).delay(e)},stop:function(e,t){return this.fx&&this.fx.stop(e,t),this},finish:function(){return this.fx&&this.fx.finish(),this}}}),i.MorphObj=i.invent({create:function(e,t){return i.Color.isColor(t)?new i.Color(e).morph(t):i.regex.delimiter.test(e)?i.regex.pathLetters.test(e)?new i.PathArray(e).morph(t):new i.Array(e).morph(t):i.regex.numberAndUnit.test(t)?new i.Number(e).morph(t):(this.value=e,void(this.destination=t))},extend:{at:function(e,t){return t<1?this.value:this.destination},valueOf:function(){return this.value}}}),i.extend(i.FX,{attr:function(e,t,i){if("object"===o(e))for(var a in e)this.attr(a,e[a]);else this.add(e,t,"attrs");return this},plot:function(e,t,i,a){return 4==arguments.length?this.plot([e,t,i,a]):this.add("plot",new(this.target().morphArray)(e))}}),i.Box=i.invent({create:function(e,t,a,n){if(!("object"!==o(e)||e instanceof i.Element))return i.Box.call(this,null!=e.left?e.left:e.x,null!=e.top?e.top:e.y,e.width,e.height);4==arguments.length&&(this.x=e,this.y=t,this.width=a,this.height=n),v(this)}}),i.BBox=i.invent({create:function(e){if(i.Box.apply(this,[].slice.call(arguments)),e instanceof i.Element){var a;try{if(!t.documentElement.contains){for(var n=e.node;n.parentNode;)n=n.parentNode;if(n!=t)throw new Error("Element not in the dom")}a=e.node.getBBox()}catch(t){if(e instanceof i.Shape){i.parser.draw||i.prepare();var r=e.clone(i.parser.draw.instance).show();r&&r.node&&"function"==typeof r.node.getBBox&&(a=r.node.getBBox()),r&&"function"==typeof r.remove&&r.remove()}else a={x:e.node.clientLeft,y:e.node.clientTop,width:e.node.clientWidth,height:e.node.clientHeight}}i.Box.call(this,a)}},inherit:i.Box,parent:i.Element,construct:{bbox:function(){return new i.BBox(this)}}}),i.BBox.prototype.constructor=i.BBox,i.Matrix=i.invent({create:function(e){var t=m([1,0,0,1,0,0]);e=null===e?t:e instanceof i.Element?e.matrixify():"string"==typeof e?m(e.split(i.regex.delimiter).map(parseFloat)):6==arguments.length?m([].slice.call(arguments)):Array.isArray(e)?m(e):e&&"object"===o(e)?e:t;for(var a=x.length-1;a>=0;--a)this[x[a]]=null!=e[x[a]]?e[x[a]]:t[x[a]]},extend:{extract:function(){var e=p(this,0,1);p(this,1,0);var t=180/Math.PI*Math.atan2(e.y,e.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(t*Math.PI/180)+this.f*Math.sin(t*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(t*Math.PI/180)+this.e*Math.sin(-t*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),rotation:t,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new i.Matrix(this)}},clone:function(){return new i.Matrix(this)},morph:function(e){return this.destination=new i.Matrix(e),this},multiply:function(e){return new i.Matrix(this.native().multiply(function(e){return e instanceof i.Matrix||(e=new i.Matrix(e)),e}(e).native()))},inverse:function(){return new i.Matrix(this.native().inverse())},translate:function(e,t){return new i.Matrix(this.native().translate(e||0,t||0))},native:function(){for(var e=i.parser.native.createSVGMatrix(),t=x.length-1;t>=0;t--)e[x[t]]=this[x[t]];return e},toString:function(){return"matrix("+y(this.a)+","+y(this.b)+","+y(this.c)+","+y(this.d)+","+y(this.e)+","+y(this.f)+")"}},parent:i.Element,construct:{ctm:function(){return new i.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof i.Nested){var e=this.rect(1,1),t=e.node.getScreenCTM();return e.remove(),new i.Matrix(t)}return new i.Matrix(this.node.getScreenCTM())}}}),i.Point=i.invent({create:function(e,t){var i;i=Array.isArray(e)?{x:e[0],y:e[1]}:"object"===o(e)?{x:e.x,y:e.y}:null!=e?{x:e,y:null!=t?t:e}:{x:0,y:0},this.x=i.x,this.y=i.y},extend:{clone:function(){return new i.Point(this)},morph:function(e,t){return this.destination=new i.Point(e,t),this}}}),i.extend(i.Element,{point:function(e,t){return new i.Point(e,t).transform(this.screenCTM().inverse())}}),i.extend(i.Element,{attr:function(e,t,a){if(null==e){for(e={},a=(t=this.node.attributes).length-1;a>=0;a--)e[t[a].nodeName]=i.regex.isNumber.test(t[a].nodeValue)?parseFloat(t[a].nodeValue):t[a].nodeValue;return e}if("object"===o(e))for(var n in e)this.attr(n,e[n]);else if(null===t)this.node.removeAttribute(e);else{if(null==t)return null==(t=this.node.getAttribute(e))?i.defaults.attrs[e]:i.regex.isNumber.test(t)?parseFloat(t):t;"stroke-width"==e?this.attr("stroke",parseFloat(t)>0?this._stroke:null):"stroke"==e&&(this._stroke=t),"fill"!=e&&"stroke"!=e||(i.regex.isImage.test(t)&&(t=this.doc().defs().image(t,0,0)),t instanceof i.Image&&(t=this.doc().defs().pattern(0,0,(function(){this.add(t)})))),"number"==typeof t?t=new i.Number(t):i.Color.isColor(t)?t=new i.Color(t):Array.isArray(t)&&(t=new i.Array(t)),"leading"==e?this.leading&&this.leading(t):"string"==typeof a?this.node.setAttributeNS(a,e,t.toString()):this.node.setAttribute(e,t.toString()),!this.rebuild||"font-size"!=e&&"x"!=e||this.rebuild(e,t)}return this}}),i.extend(i.Element,{transform:function(e,t){var a;return"object"!==o(e)?(a=new i.Matrix(this).extract(),"string"==typeof e?a[e]:a):(a=new i.Matrix(this),t=!!t||!!e.relative,null!=e.a&&(a=t?a.multiply(new i.Matrix(e)):new i.Matrix(e)),this.attr("transform",a))}}),i.extend(i.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(i.regex.transforms).slice(0,-1).map((function(e){var t=e.trim().split("(");return[t[0],t[1].split(i.regex.delimiter).map((function(e){return parseFloat(e)}))]})).reduce((function(e,t){return"matrix"==t[0]?e.multiply(m(t[1])):e[t[0]].apply(e,t[1])}),new i.Matrix)},toParent:function(e){if(this==e)return this;var t=this.screenCTM(),i=e.screenCTM().inverse();return this.addTo(e).untransform().transform(i.multiply(t)),this},toDoc:function(){return this.toParent(this.doc())}}),i.Transformation=i.invent({create:function(e,t){if(arguments.length>1&&"boolean"!=typeof t)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(e))for(var i=0,a=this.arguments.length;i<a;++i)this[this.arguments[i]]=e[i];else if(e&&"object"===o(e))for(i=0,a=this.arguments.length;i<a;++i)this[this.arguments[i]]=e[this.arguments[i]];this.inversed=!1,!0===t&&(this.inversed=!0)}}),i.Translate=i.invent({parent:i.Matrix,inherit:i.Transformation,create:function(e,t){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),i.extend(i.Element,{style:function(e,t){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"===o(e))for(var a in e)this.style(a,e[a]);else{if(!i.regex.isCss.test(e))return this.node.style[u(e)];for(e=e.split(/\s*;\s*/).filter((function(e){return!!e})).map((function(e){return e.split(/\s*:\s*/)}));t=e.pop();)this.style(t[0],t[1])}else this.node.style[u(e)]=null===t||i.regex.isBlank.test(t)?"":t;return this}}),i.Parent=i.invent({create:function(e){this.constructor.call(this,e)},inherit:i.Element,extend:{children:function(){return i.utils.map(i.utils.filterSVGElements(this.node.childNodes),(function(e){return i.adopt(e)}))},add:function(e,t){return null==t?this.node.appendChild(e.node):e.node!=this.node.childNodes[t]&&this.node.insertBefore(e.node,this.node.childNodes[t]),this},put:function(e,t){return this.add(e,t),e},has:function(e){return this.index(e)>=0},index:function(e){return[].slice.call(this.node.childNodes).indexOf(e.node)},get:function(e){return i.adopt(this.node.childNodes[e])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(e,t){for(var a=this.children(),n=0,r=a.length;n<r;n++)a[n]instanceof i.Element&&e.apply(a[n],[n,a]),t&&a[n]instanceof i.Container&&a[n].each(e,t);return this},removeElement:function(e){return this.node.removeChild(e.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),i.extend(i.Parent,{ungroup:function(e,t){return 0===t||this instanceof i.Defs||this.node==i.parser.draw||(e=e||(this instanceof i.Doc?this:this.parent(i.Parent)),t=t||1/0,this.each((function(){return this instanceof i.Defs?this:this instanceof i.Parent?this.ungroup(e,t-1):this.toParent(e)})),this.node.firstChild||this.remove()),this},flatten:function(e,t){return this.ungroup(e,t)}}),i.Container=i.invent({create:function(e){this.constructor.call(this,e)},inherit:i.Parent}),i.ViewBox=i.invent({parent:i.Container,construct:{}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach((function(e){i.Element.prototype[e]=function(t){return i.on(this.node,e,t),this}})),i.listeners=[],i.handlerMap=[],i.listenerId=0,i.on=function(e,t,a,n,r){var o=a.bind(n||e.instance||e),s=(i.handlerMap.indexOf(e)+1||i.handlerMap.push(e))-1,l=t.split(".")[0],c=t.split(".")[1]||"*";i.listeners[s]=i.listeners[s]||{},i.listeners[s][l]=i.listeners[s][l]||{},i.listeners[s][l][c]=i.listeners[s][l][c]||{},a._svgjsListenerId||(a._svgjsListenerId=++i.listenerId),i.listeners[s][l][c][a._svgjsListenerId]=o,e.addEventListener(l,o,r||{passive:!0})},i.off=function(e,t,a){var n=i.handlerMap.indexOf(e),r=t&&t.split(".")[0],o=t&&t.split(".")[1],s="";if(-1!=n)if(a){if("function"==typeof a&&(a=a._svgjsListenerId),!a)return;i.listeners[n][r]&&i.listeners[n][r][o||"*"]&&(e.removeEventListener(r,i.listeners[n][r][o||"*"][a],!1),delete i.listeners[n][r][o||"*"][a])}else if(o&&r){if(i.listeners[n][r]&&i.listeners[n][r][o]){for(var l in i.listeners[n][r][o])i.off(e,[r,o].join("."),l);delete i.listeners[n][r][o]}}else if(o)for(var c in i.listeners[n])for(var s in i.listeners[n][c])o===s&&i.off(e,[c,o].join("."));else if(r){if(i.listeners[n][r]){for(var s in i.listeners[n][r])i.off(e,[r,s].join("."));delete i.listeners[n][r]}}else{for(var c in i.listeners[n])i.off(e,c);delete i.listeners[n],delete i.handlerMap[n]}},i.extend(i.Element,{on:function(e,t,a,n){return i.on(this.node,e,t,a,n),this},off:function(e,t){return i.off(this.node,e,t),this},fire:function(t,a){return t instanceof e.Event?this.node.dispatchEvent(t):this.node.dispatchEvent(t=new i.CustomEvent(t,{detail:a,cancelable:!0})),this._event=t,this},event:function(){return this._event}}),i.Defs=i.invent({create:"defs",inherit:i.Container}),i.G=i.invent({create:"g",inherit:i.Container,extend:{x:function(e){return null==e?this.transform("x"):this.transform({x:e-this.x()},!0)}},construct:{group:function(){return this.put(new i.G)}}}),i.Doc=i.invent({create:function(e){e&&("svg"==(e="string"==typeof e?t.getElementById(e):e).nodeName?this.constructor.call(this,e):(this.constructor.call(this,i.create("svg")),e.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:i.Container,extend:{namespace:function(){return this.attr({xmlns:i.ns,version:"1.1"}).attr("xmlns:xlink",i.xlink,i.xmlns).attr("xmlns:svgjs",i.svgjs,i.xmlns)},defs:function(){var e;return this._defs||((e=this.node.getElementsByTagName("defs")[0])?this._defs=i.adopt(e):this._defs=new i.Defs,this.node.appendChild(this._defs.node)),this._defs},parent:function(){return this.node.parentNode&&"#document"!=this.node.parentNode.nodeName?this.node.parentNode:null},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,i.parser.draw&&!i.parser.draw.parentNode&&this.node.appendChild(i.parser.draw),this},clone:function(e){this.writeDataToDom();var t=this.node,i=g(t.cloneNode(!0));return e?(e.node||e).appendChild(i.node):t.parentNode.insertBefore(i.node,t.nextSibling),i}}}),i.extend(i.Element,{}),i.Gradient=i.invent({create:function(e){this.constructor.call(this,i.create(e+"Gradient")),this.type=e},inherit:i.Container,extend:{at:function(e,t,a){return this.put(new i.Stop).update(e,t,a)},update:function(e){return this.clear(),"function"==typeof e&&e.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(e,t,a){return"transform"==e&&(e="gradientTransform"),i.Container.prototype.attr.call(this,e,t,a)}},construct:{gradient:function(e,t){return this.defs().gradient(e,t)}}}),i.extend(i.Gradient,i.FX,{from:function(e,t){return"radial"==(this._target||this).type?this.attr({fx:new i.Number(e),fy:new i.Number(t)}):this.attr({x1:new i.Number(e),y1:new i.Number(t)})},to:function(e,t){return"radial"==(this._target||this).type?this.attr({cx:new i.Number(e),cy:new i.Number(t)}):this.attr({x2:new i.Number(e),y2:new i.Number(t)})}}),i.extend(i.Defs,{gradient:function(e,t){return this.put(new i.Gradient(e)).update(t)}}),i.Stop=i.invent({create:"stop",inherit:i.Element,extend:{update:function(e){return("number"==typeof e||e instanceof i.Number)&&(e={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=e.opacity&&this.attr("stop-opacity",e.opacity),null!=e.color&&this.attr("stop-color",e.color),null!=e.offset&&this.attr("offset",new i.Number(e.offset)),this}}}),i.Pattern=i.invent({create:"pattern",inherit:i.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(e){return this.clear(),"function"==typeof e&&e.call(this,this),this},toString:function(){return this.fill()},attr:function(e,t,a){return"transform"==e&&(e="patternTransform"),i.Container.prototype.attr.call(this,e,t,a)}},construct:{pattern:function(e,t,i){return this.defs().pattern(e,t,i)}}}),i.extend(i.Defs,{pattern:function(e,t,a){return this.put(new i.Pattern).update(a).attr({x:0,y:0,width:e,height:t,patternUnits:"userSpaceOnUse"})}}),i.Shape=i.invent({create:function(e){this.constructor.call(this,e)},inherit:i.Element}),i.Symbol=i.invent({create:"symbol",inherit:i.Container,construct:{symbol:function(){return this.put(new i.Symbol)}}}),i.Use=i.invent({create:"use",inherit:i.Shape,extend:{element:function(e,t){return this.attr("href",(t||"")+"#"+e,i.xlink)}},construct:{use:function(e,t){return this.put(new i.Use).element(e,t)}}}),i.Rect=i.invent({create:"rect",inherit:i.Shape,construct:{rect:function(e,t){return this.put(new i.Rect).size(e,t)}}}),i.Circle=i.invent({create:"circle",inherit:i.Shape,construct:{circle:function(e){return this.put(new i.Circle).rx(new i.Number(e).divide(2)).move(0,0)}}}),i.extend(i.Circle,i.FX,{rx:function(e){return this.attr("r",e)},ry:function(e){return this.rx(e)}}),i.Ellipse=i.invent({create:"ellipse",inherit:i.Shape,construct:{ellipse:function(e,t){return this.put(new i.Ellipse).size(e,t).move(0,0)}}}),i.extend(i.Ellipse,i.Rect,i.FX,{rx:function(e){return this.attr("rx",e)},ry:function(e){return this.attr("ry",e)}}),i.extend(i.Circle,i.Ellipse,{x:function(e){return null==e?this.cx()-this.rx():this.cx(e+this.rx())},y:function(e){return null==e?this.cy()-this.ry():this.cy(e+this.ry())},cx:function(e){return null==e?this.attr("cx"):this.attr("cx",e)},cy:function(e){return null==e?this.attr("cy"):this.attr("cy",e)},width:function(e){return null==e?2*this.rx():this.rx(new i.Number(e).divide(2))},height:function(e){return null==e?2*this.ry():this.ry(new i.Number(e).divide(2))},size:function(e,t){var a=f(this,e,t);return this.rx(new i.Number(a.width).divide(2)).ry(new i.Number(a.height).divide(2))}}),i.Line=i.invent({create:"line",inherit:i.Shape,extend:{array:function(){return new i.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(e,t,a,n){return null==e?this.array():(e=void 0!==t?{x1:e,y1:t,x2:a,y2:n}:new i.PointArray(e).toLine(),this.attr(e))},move:function(e,t){return this.attr(this.array().move(e,t).toLine())},size:function(e,t){var i=f(this,e,t);return this.attr(this.array().size(i.width,i.height).toLine())}},construct:{line:function(e,t,a,n){return i.Line.prototype.plot.apply(this.put(new i.Line),null!=e?[e,t,a,n]:[0,0,0,0])}}}),i.Polyline=i.invent({create:"polyline",inherit:i.Shape,construct:{polyline:function(e){return this.put(new i.Polyline).plot(e||new i.PointArray)}}}),i.Polygon=i.invent({create:"polygon",inherit:i.Shape,construct:{polygon:function(e){return this.put(new i.Polygon).plot(e||new i.PointArray)}}}),i.extend(i.Polyline,i.Polygon,{array:function(){return this._array||(this._array=new i.PointArray(this.attr("points")))},plot:function(e){return null==e?this.array():this.clear().attr("points","string"==typeof e?e:this._array=new i.PointArray(e))},clear:function(){return delete this._array,this},move:function(e,t){return this.attr("points",this.array().move(e,t))},size:function(e,t){var i=f(this,e,t);return this.attr("points",this.array().size(i.width,i.height))}}),i.extend(i.Line,i.Polyline,i.Polygon,{morphArray:i.PointArray,x:function(e){return null==e?this.bbox().x:this.move(e,this.bbox().y)},y:function(e){return null==e?this.bbox().y:this.move(this.bbox().x,e)},width:function(e){var t=this.bbox();return null==e?t.width:this.size(e,t.height)},height:function(e){var t=this.bbox();return null==e?t.height:this.size(t.width,e)}}),i.Path=i.invent({create:"path",inherit:i.Shape,extend:{morphArray:i.PathArray,array:function(){return this._array||(this._array=new i.PathArray(this.attr("d")))},plot:function(e){return null==e?this.array():this.clear().attr("d","string"==typeof e?e:this._array=new i.PathArray(e))},clear:function(){return delete this._array,this}},construct:{path:function(e){return this.put(new i.Path).plot(e||new i.PathArray)}}}),i.Image=i.invent({create:"image",inherit:i.Shape,extend:{load:function(t){if(!t)return this;var a=this,n=new e.Image;return i.on(n,"load",(function(){i.off(n);var e=a.parent(i.Pattern);null!==e&&(0==a.width()&&0==a.height()&&a.size(n.width,n.height),e&&0==e.width()&&0==e.height()&&e.size(a.width(),a.height()),"function"==typeof a._loaded&&a._loaded.call(a,{width:n.width,height:n.height,ratio:n.width/n.height,url:t}))})),i.on(n,"error",(function(e){i.off(n),"function"==typeof a._error&&a._error.call(a,e)})),this.attr("href",n.src=this.src=t,i.xlink)},loaded:function(e){return this._loaded=e,this},error:function(e){return this._error=e,this}},construct:{image:function(e,t,a){return this.put(new i.Image).load(e).size(t||0,a||t||0)}}}),i.Text=i.invent({create:function(){this.constructor.call(this,i.create("text")),this.dom.leading=new i.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",i.defaults.attrs["font-family"])},inherit:i.Shape,extend:{x:function(e){return null==e?this.attr("x"):this.attr("x",e)},text:function(e){if(void 0===e){e="";for(var t=this.node.childNodes,a=0,n=t.length;a<n;++a)0!=a&&3!=t[a].nodeType&&1==i.adopt(t[a]).dom.newLined&&(e+="\n"),e+=t[a].textContent;return e}if(this.clear().build(!0),"function"==typeof e)e.call(this,this);else{a=0;for(var r=(e=e.split("\n")).length;a<r;a++)this.tspan(e[a]).newLine()}return this.build(!1).rebuild()},size:function(e){return this.attr("font-size",e).rebuild()},leading:function(e){return null==e?this.dom.leading:(this.dom.leading=new i.Number(e),this.rebuild())},lines:function(){var e=(this.textPath&&this.textPath()||this).node,t=i.utils.map(i.utils.filterSVGElements(e.childNodes),(function(e){return i.adopt(e)}));return new i.Set(t)},rebuild:function(e){if("boolean"==typeof e&&(this._rebuild=e),this._rebuild){var t=this,a=0,n=this.dom.leading*new i.Number(this.attr("font-size"));this.lines().each((function(){this.dom.newLined&&(t.textPath()||this.attr("x",t.attr("x")),"\n"==this.text()?a+=n:(this.attr("dy",n+a),a=0))})),this.fire("rebuild")}return this},build:function(e){return this._build=!!e,this},setData:function(e){return this.dom=e,this.dom.leading=new i.Number(e.leading||1.3),this}},construct:{text:function(e){return this.put(new i.Text).text(e)},plain:function(e){return this.put(new i.Text).plain(e)}}}),i.Tspan=i.invent({create:"tspan",inherit:i.Shape,extend:{text:function(e){return null==e?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof e?e.call(this,this):this.plain(e),this)},dx:function(e){return this.attr("dx",e)},dy:function(e){return this.attr("dy",e)},newLine:function(){var e=this.parent(i.Text);return this.dom.newLined=!0,this.dy(e.dom.leading*e.attr("font-size")).attr("x",e.x())}}}),i.extend(i.Text,i.Tspan,{plain:function(e){return!1===this._build&&this.clear(),this.node.appendChild(t.createTextNode(e)),this},tspan:function(e){var t=(this.textPath&&this.textPath()||this).node,a=new i.Tspan;return!1===this._build&&this.clear(),t.appendChild(a.node),a.text(e)},clear:function(){for(var e=(this.textPath&&this.textPath()||this).node;e.hasChildNodes();)e.removeChild(e.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),i.TextPath=i.invent({create:"textPath",inherit:i.Parent,parent:i.Text,construct:{morphArray:i.PathArray,array:function(){var e=this.track();return e?e.array():null},plot:function(e){var t=this.track(),i=null;return t&&(i=t.plot(e)),null==e?i:this},track:function(){var e=this.textPath();if(e)return e.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return i.adopt(this.node.firstChild)}}}),i.Nested=i.invent({create:function(){this.constructor.call(this,i.create("svg")),this.style("overflow","visible")},inherit:i.Container,construct:{nested:function(){return this.put(new i.Nested)}}});var l={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(e,t){return"color"==t?e:e+"-"+t}};function c(e,t,a,n){return a+n.replace(i.regex.dots," .")}function u(e){return e.toLowerCase().replace(/-(.)/g,(function(e,t){return t.toUpperCase()}))}function h(e){return e.charAt(0).toUpperCase()+e.slice(1)}function d(e){var t=e.toString(16);return 1==t.length?"0"+t:t}function f(e,t,i){if(null==t||null==i){var a=e.bbox();null==t?t=a.width/a.height*i:null==i&&(i=a.height/a.width*t)}return{width:t,height:i}}function p(e,t,i){return{x:t*e.a+i*e.c+0,y:t*e.b+i*e.d+0}}function m(e){return{a:e[0],b:e[1],c:e[2],d:e[3],e:e[4],f:e[5]}}function g(t){for(var a=t.childNodes.length-1;a>=0;a--)t.childNodes[a]instanceof e.SVGElement&&g(t.childNodes[a]);return i.adopt(t).id(i.eid(t.nodeName))}function v(e){return null==e.x&&(e.x=0,e.y=0,e.width=0,e.height=0),e.w=e.width,e.h=e.height,e.x2=e.x+e.width,e.y2=e.y+e.height,e.cx=e.x+e.width/2,e.cy=e.y+e.height/2,e}function y(e){return Math.abs(e)>1e-37?e:0}["fill","stroke"].forEach((function(e){var t={};t[e]=function(t){if(void 0===t)return this;if("string"==typeof t||i.Color.isRgb(t)||t&&"function"==typeof t.fill)this.attr(e,t);else for(var a=l[e].length-1;a>=0;a--)null!=t[l[e][a]]&&this.attr(l.prefix(e,l[e][a]),t[l[e][a]]);return this},i.extend(i.Element,i.FX,t)})),i.extend(i.Element,i.FX,{translate:function(e,t){return this.transform({x:e,y:t})},matrix:function(e){return this.attr("transform",new i.Matrix(6==arguments.length?[].slice.call(arguments):e))},opacity:function(e){return this.attr("opacity",e)},dx:function(e){return this.x(new i.Number(e).plus(this instanceof i.FX?0:this.x()),!0)},dy:function(e){return this.y(new i.Number(e).plus(this instanceof i.FX?0:this.y()),!0)}}),i.extend(i.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(e){return this.node.getPointAtLength(e)}}),i.Set=i.invent({create:function(e){Array.isArray(e)?this.members=e:this.clear()},extend:{add:function(){for(var e=[].slice.call(arguments),t=0,i=e.length;t<i;t++)this.members.push(e[t]);return this},remove:function(e){var t=this.index(e);return t>-1&&this.members.splice(t,1),this},each:function(e){for(var t=0,i=this.members.length;t<i;t++)e.apply(this.members[t],[t,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(e){return this.index(e)>=0},index:function(e){return this.members.indexOf(e)},get:function(e){return this.members[e]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members}},construct:{set:function(e){return new i.Set(e)}}}),i.FX.Set=i.invent({create:function(e){this.set=e}}),i.Set.inherit=function(){var e=[];for(var t in i.Shape.prototype)"function"==typeof i.Shape.prototype[t]&&"function"!=typeof i.Set.prototype[t]&&e.push(t);for(var t in e.forEach((function(e){i.Set.prototype[e]=function(){for(var t=0,a=this.members.length;t<a;t++)this.members[t]&&"function"==typeof this.members[t][e]&&this.members[t][e].apply(this.members[t],arguments);return"animate"==e?this.fx||(this.fx=new i.FX.Set(this)):this}})),e=[],i.FX.prototype)"function"==typeof i.FX.prototype[t]&&"function"!=typeof i.FX.Set.prototype[t]&&e.push(t);e.forEach((function(e){i.FX.Set.prototype[e]=function(){for(var t=0,i=this.set.members.length;t<i;t++)this.set.members[t].fx[e].apply(this.set.members[t].fx,arguments);return this}}))},i.extend(i.Element,{}),i.extend(i.Element,{remember:function(e,t){if("object"===o(arguments[0]))for(var i in e)this.remember(i,e[i]);else{if(1==arguments.length)return this.memory()[e];this.memory()[e]=t}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var e=arguments.length-1;e>=0;e--)delete this.memory()[arguments[e]];return this},memory:function(){return this._memory||(this._memory={})}}),i.get=function(e){var a=t.getElementById(function(e){var t=(e||"").toString().match(i.regex.reference);if(t)return t[1]}(e)||e);return i.adopt(a)},i.select=function(e,a){return new i.Set(i.utils.map((a||t).querySelectorAll(e),(function(e){return i.adopt(e)})))},i.extend(i.Parent,{select:function(e){return i.select(e,this.node)}});var x="abcdef".split("");if("function"!=typeof e.CustomEvent){var b=function(e,i){i=i||{bubbles:!1,cancelable:!1,detail:void 0};var a=t.createEvent("CustomEvent");return a.initCustomEvent(e,i.bubbles,i.cancelable,i.detail),a};b.prototype=e.Event.prototype,i.CustomEvent=b}else i.CustomEvent=e.CustomEvent;return i},void 0!==(a=function(){return je(Le,Le.document)}.call(t,i,t,e))&&(e.exports=a),function(){SVG.Filter=SVG.invent({create:"filter",inherit:SVG.Parent,extend:{source:"SourceGraphic",sourceAlpha:"SourceAlpha",background:"BackgroundImage",backgroundAlpha:"BackgroundAlpha",fill:"FillPaint",stroke:"StrokePaint",autoSetIn:!0,put:function(e,t){return this.add(e,t),!e.attr("in")&&this.autoSetIn&&e.attr("in",this.source),e.attr("result")||e.attr("result",e),e},blend:function(e,t,i){return this.put(new SVG.BlendEffect(e,t,i))},colorMatrix:function(e,t){return this.put(new SVG.ColorMatrixEffect(e,t))},convolveMatrix:function(e){return this.put(new SVG.ConvolveMatrixEffect(e))},componentTransfer:function(e){return this.put(new SVG.ComponentTransferEffect(e))},composite:function(e,t,i){return this.put(new SVG.CompositeEffect(e,t,i))},flood:function(e,t){return this.put(new SVG.FloodEffect(e,t))},offset:function(e,t){return this.put(new SVG.OffsetEffect(e,t))},image:function(e){return this.put(new SVG.ImageEffect(e))},merge:function(){var e=[void 0];for(var t in arguments)e.push(arguments[t]);return this.put(new(SVG.MergeEffect.bind.apply(SVG.MergeEffect,e)))},gaussianBlur:function(e,t){return this.put(new SVG.GaussianBlurEffect(e,t))},morphology:function(e,t){return this.put(new SVG.MorphologyEffect(e,t))},diffuseLighting:function(e,t,i){return this.put(new SVG.DiffuseLightingEffect(e,t,i))},displacementMap:function(e,t,i,a,n){return this.put(new SVG.DisplacementMapEffect(e,t,i,a,n))},specularLighting:function(e,t,i,a){return this.put(new SVG.SpecularLightingEffect(e,t,i,a))},tile:function(){return this.put(new SVG.TileEffect)},turbulence:function(e,t,i,a,n){return this.put(new SVG.TurbulenceEffect(e,t,i,a,n))},toString:function(){return"url(#"+this.attr("id")+")"}}}),SVG.extend(SVG.Defs,{filter:function(e){var t=this.put(new SVG.Filter);return"function"==typeof e&&e.call(t,t),t}}),SVG.extend(SVG.Container,{filter:function(e){return this.defs().filter(e)}}),SVG.extend(SVG.Element,SVG.G,SVG.Nested,{filter:function(e){return this.filterer=e instanceof SVG.Element?e:this.doc().filter(e),this.doc()&&this.filterer.doc()!==this.doc()&&this.doc().defs().add(this.filterer),this.attr("filter",this.filterer),this.filterer},unfilter:function(e){return this.filterer&&!0===e&&this.filterer.remove(),delete this.filterer,this.attr("filter",null)}}),SVG.Effect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(e){return null==e?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",e)},result:function(e){return null==e?this.attr("result"):this.attr("result",e)},toString:function(){return this.result()}}}),SVG.ParentEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Parent,extend:{in:function(e){return null==e?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",e)},result:function(e){return null==e?this.attr("result"):this.attr("result",e)},toString:function(){return this.result()}}});var e={blend:function(e,t){return this.parent()&&this.parent().blend(this,e,t)},colorMatrix:function(e,t){return this.parent()&&this.parent().colorMatrix(e,t).in(this)},convolveMatrix:function(e){return this.parent()&&this.parent().convolveMatrix(e).in(this)},componentTransfer:function(e){return this.parent()&&this.parent().componentTransfer(e).in(this)},composite:function(e,t){return this.parent()&&this.parent().composite(this,e,t)},flood:function(e,t){return this.parent()&&this.parent().flood(e,t)},offset:function(e,t){return this.parent()&&this.parent().offset(e,t).in(this)},image:function(e){return this.parent()&&this.parent().image(e)},merge:function(){return this.parent()&&this.parent().merge.apply(this.parent(),[this].concat(arguments))},gaussianBlur:function(e,t){return this.parent()&&this.parent().gaussianBlur(e,t).in(this)},morphology:function(e,t){return this.parent()&&this.parent().morphology(e,t).in(this)},diffuseLighting:function(e,t,i){return this.parent()&&this.parent().diffuseLighting(e,t,i).in(this)},displacementMap:function(e,t,i,a){return this.parent()&&this.parent().displacementMap(this,e,t,i,a)},specularLighting:function(e,t,i,a){return this.parent()&&this.parent().specularLighting(e,t,i,a).in(this)},tile:function(){return this.parent()&&this.parent().tile().in(this)},turbulence:function(e,t,i,a,n){return this.parent()&&this.parent().turbulence(e,t,i,a,n).in(this)}};SVG.extend(SVG.Effect,e),SVG.extend(SVG.ParentEffect,e),SVG.ChildEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(e){this.attr("in",e)}}});var t={blend:function(e,t,i){this.attr({in:e,in2:t,mode:i||"normal"})},colorMatrix:function(e,t){"matrix"==e&&(t=n(t)),this.attr({type:e,values:void 0===t?null:t})},convolveMatrix:function(e){e=n(e),this.attr({order:Math.sqrt(e.split(" ").length),kernelMatrix:e})},composite:function(e,t,i){this.attr({in:e,in2:t,operator:i})},flood:function(e,t){this.attr("flood-color",e),null!=t&&this.attr("flood-opacity",t)},offset:function(e,t){this.attr({dx:e,dy:t})},image:function(e){this.attr("href",e,SVG.xlink)},displacementMap:function(e,t,i,a,n){this.attr({in:e,in2:t,scale:i,xChannelSelector:a,yChannelSelector:n})},gaussianBlur:function(e,t){null!=e||null!=t?this.attr("stdDeviation",r(Array.prototype.slice.call(arguments))):this.attr("stdDeviation","0 0")},morphology:function(e,t){this.attr({operator:e,radius:t})},tile:function(){},turbulence:function(e,t,i,a,n){this.attr({numOctaves:t,seed:i,stitchTiles:a,baseFrequency:e,type:n})}},i={merge:function(){var e;if(arguments[0]instanceof SVG.Set){var t=this;arguments[0].each((function(e){this instanceof SVG.MergeNode?t.put(this):(this instanceof SVG.Effect||this instanceof SVG.ParentEffect)&&t.put(new SVG.MergeNode(this))}))}else{e=Array.isArray(arguments[0])?arguments[0]:arguments;for(var i=0;i<e.length;i++)e[i]instanceof SVG.MergeNode?this.put(e[i]):this.put(new SVG.MergeNode(e[i]))}},componentTransfer:function(e){if(this.rgb=new SVG.Set,["r","g","b","a"].forEach(function(e){this[e]=new(SVG["Func"+e.toUpperCase()])("identity"),this.rgb.add(this[e]),this.node.appendChild(this[e].node)}.bind(this)),e)for(var t in e.rgb&&(["r","g","b"].forEach(function(t){this[t].attr(e.rgb)}.bind(this)),delete e.rgb),e)this[t].attr(e[t])},diffuseLighting:function(e,t,i){this.attr({surfaceScale:e,diffuseConstant:t,kernelUnitLength:i})},specularLighting:function(e,t,i,a){this.attr({surfaceScale:e,diffuseConstant:t,specularExponent:i,kernelUnitLength:a})}},a={distantLight:function(e,t){this.attr({azimuth:e,elevation:t})},pointLight:function(e,t,i){this.attr({x:e,y:t,z:i})},spotLight:function(e,t,i,a,n,r){this.attr({x:e,y:t,z:i,pointsAtX:a,pointsAtY:n,pointsAtZ:r})},mergeNode:function(e){this.attr("in",e)}};function n(e){return Array.isArray(e)&&(e=new SVG.Array(e)),e.toString().replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}function r(e){if(!Array.isArray(e))return e;for(var t=0,i=e.length,a=[];t<i;t++)a.push(e[t]);return a.join(" ")}function o(){var e=function(){};for(var t in"function"==typeof arguments[arguments.length-1]&&(e=arguments[arguments.length-1],Array.prototype.splice.call(arguments,arguments.length-1,1)),arguments)for(var i in arguments[t])e(arguments[t][i],i,arguments[t])}["r","g","b","a"].forEach((function(e){a["Func"+e.toUpperCase()]=function(e){switch(this.attr("type",e),e){case"table":this.attr("tableValues",arguments[1]);break;case"linear":this.attr("slope",arguments[1]),this.attr("intercept",arguments[2]);break;case"gamma":this.attr("amplitude",arguments[1]),this.attr("exponent",arguments[2]),this.attr("offset",arguments[2])}}})),o(t,(function(e,t){var i=t.charAt(0).toUpperCase()+t.slice(1);SVG[i+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+i)),e.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.Effect,extend:{}})})),o(i,(function(e,t){var i=t.charAt(0).toUpperCase()+t.slice(1);SVG[i+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+i)),e.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.ParentEffect,extend:{}})})),o(a,(function(e,t){var i=t.charAt(0).toUpperCase()+t.slice(1);SVG[i]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+i)),e.apply(this,arguments)},inherit:SVG.ChildEffect,extend:{}})})),SVG.extend(SVG.MergeEffect,{in:function(e){return e instanceof SVG.MergeNode?this.add(e,0):this.add(new SVG.MergeNode(e),0),this}}),SVG.extend(SVG.CompositeEffect,SVG.BlendEffect,SVG.DisplacementMapEffect,{in2:function(e){return null==e?this.parent()&&this.parent().select('[result="'+this.attr("in2")+'"]').get(0)||this.attr("in2"):this.attr("in2",e)}}),SVG.filter={sepiatone:[.343,.669,.119,0,0,.249,.626,.13,0,0,.172,.334,.111,0,0,0,0,0,1,0]}}.call(void 0),function(){function e(e,n,r,o,s,l,c){for(var u=e.slice(n,r||c),h=o.slice(s,l||c),d=0,f={pos:[0,0],start:[0,0]},p={pos:[0,0],start:[0,0]};u[d]=t.call(f,u[d]),h[d]=t.call(p,h[d]),u[d][0]!=h[d][0]||"M"==u[d][0]||"A"==u[d][0]&&(u[d][4]!=h[d][4]||u[d][5]!=h[d][5])?(Array.prototype.splice.apply(u,[d,1].concat(a.call(f,u[d]))),Array.prototype.splice.apply(h,[d,1].concat(a.call(p,h[d])))):(u[d]=i.call(f,u[d]),h[d]=i.call(p,h[d])),++d!=u.length||d!=h.length;)d==u.length&&u.push(["C",f.pos[0],f.pos[1],f.pos[0],f.pos[1],f.pos[0],f.pos[1]]),d==h.length&&h.push(["C",p.pos[0],p.pos[1],p.pos[0],p.pos[1],p.pos[0],p.pos[1]]);return{start:u,dest:h}}function t(e){switch(e[0]){case"z":case"Z":e[0]="L",e[1]=this.start[0],e[2]=this.start[1];break;case"H":e[0]="L",e[2]=this.pos[1];break;case"V":e[0]="L",e[2]=e[1],e[1]=this.pos[0];break;case"T":e[0]="Q",e[3]=e[1],e[4]=e[2],e[1]=this.reflection[1],e[2]=this.reflection[0];break;case"S":e[0]="C",e[6]=e[4],e[5]=e[3],e[4]=e[2],e[3]=e[1],e[2]=this.reflection[1],e[1]=this.reflection[0]}return e}function i(e){var t=e.length;return this.pos=[e[t-2],e[t-1]],-1!="SCQT".indexOf(e[0])&&(this.reflection=[2*this.pos[0]-e[t-4],2*this.pos[1]-e[t-3]]),e}function a(e){var t=[e];switch(e[0]){case"M":return this.pos=this.start=[e[1],e[2]],t;case"L":e[5]=e[3]=e[1],e[6]=e[4]=e[2],e[1]=this.pos[0],e[2]=this.pos[1];break;case"Q":e[6]=e[4],e[5]=e[3],e[4]=1*e[4]/3+2*e[2]/3,e[3]=1*e[3]/3+2*e[1]/3,e[2]=1*this.pos[1]/3+2*e[2]/3,e[1]=1*this.pos[0]/3+2*e[1]/3;break;case"A":e=(t=function(e,t){var i,a,n,r,o,s,l,c,u,h,d,f,p,m,g,v,y,x,b,_,w,k,S,C,A,O,T=Math.abs(t[1]),M=Math.abs(t[2]),E=t[3]%360,I=t[4],P=t[5],D=t[6],z=t[7],L=new SVG.Point(e),j=new SVG.Point(D,z),R=[];if(0===T||0===M||L.x===j.x&&L.y===j.y)return[["C",L.x,L.y,j.x,j.y,j.x,j.y]];for((a=(i=new SVG.Point((L.x-j.x)/2,(L.y-j.y)/2).transform((new SVG.Matrix).rotate(E))).x*i.x/(T*T)+i.y*i.y/(M*M))>1&&(T*=a=Math.sqrt(a),M*=a),n=(new SVG.Matrix).rotate(E).scale(1/T,1/M).rotate(-E),L=L.transform(n),s=(r=[(j=j.transform(n)).x-L.x,j.y-L.y])[0]*r[0]+r[1]*r[1],o=Math.sqrt(s),r[0]/=o,r[1]/=o,l=s<4?Math.sqrt(1-s/4):0,I===P&&(l*=-1),c=new SVG.Point((j.x+L.x)/2+l*-r[1],(j.y+L.y)/2+l*r[0]),u=new SVG.Point(L.x-c.x,L.y-c.y),h=new SVG.Point(j.x-c.x,j.y-c.y),d=Math.acos(u.x/Math.sqrt(u.x*u.x+u.y*u.y)),u.y<0&&(d*=-1),f=Math.acos(h.x/Math.sqrt(h.x*h.x+h.y*h.y)),h.y<0&&(f*=-1),P&&d>f&&(f+=2*Math.PI),!P&&d<f&&(f-=2*Math.PI),v=[],y=d,p=(f-d)/(m=Math.ceil(2*Math.abs(d-f)/Math.PI)),g=4*Math.tan(p/4)/3,w=0;w<=m;w++)b=Math.cos(y),x=Math.sin(y),_=new SVG.Point(c.x+b,c.y+x),v[w]=[new SVG.Point(_.x+g*x,_.y-g*b),_,new SVG.Point(_.x-g*x,_.y+g*b)],y+=p;for(v[0][0]=v[0][1].clone(),v[v.length-1][2]=v[v.length-1][1].clone(),n=(new SVG.Matrix).rotate(E).scale(T,M).rotate(-E),w=0,k=v.length;w<k;w++)v[w][0]=v[w][0].transform(n),v[w][1]=v[w][1].transform(n),v[w][2]=v[w][2].transform(n);for(w=1,k=v.length;w<k;w++)S=(_=v[w-1][2]).x,C=_.y,A=(_=v[w][0]).x,O=_.y,D=(_=v[w][1]).x,z=_.y,R.push(["C",S,C,A,O,D,z]);return R}(this.pos,e))[0]}return e[0]="C",this.pos=[e[5],e[6]],this.reflection=[2*e[5]-e[3],2*e[6]-e[4]],t}function n(e,t){if(!1===t)return!1;for(var i=t,a=e.length;i<a;++i)if("M"==e[i][0])return i;return!1}SVG.extend(SVG.PathArray,{morph:function(t){for(var i=this.value,a=this.parse(t),r=0,o=0,s=!1,l=!1;!1!==r||!1!==o;){var c;s=n(i,!1!==r&&r+1),l=n(a,!1!==o&&o+1),!1===r&&(r=0==(c=new SVG.PathArray(u.start).bbox()).height||0==c.width?i.push(i[0])-1:i.push(["M",c.x+c.width/2,c.y+c.height/2])-1),!1===o&&(o=0==(c=new SVG.PathArray(u.dest).bbox()).height||0==c.width?a.push(a[0])-1:a.push(["M",c.x+c.width/2,c.y+c.height/2])-1);var u=e(i,r,s,a,o,l);i=i.slice(0,r).concat(u.start,!1===s?[]:i.slice(s)),a=a.slice(0,o).concat(u.dest,!1===l?[]:a.slice(l)),r=!1!==s&&r+u.start.length,o=!1!==l&&o+u.dest.length}return this.value=i,this.destination=new SVG.PathArray,this.destination.value=a,this}})}(),function(){function e(e){e.remember("_draggable",this),this.el=e}e.prototype.init=function(e,t){var i=this;this.constraint=e,this.value=t,this.el.on("mousedown.drag",(function(e){i.start(e)})),this.el.on("touchstart.drag",(function(e){i.start(e)}))},e.prototype.transformPoint=function(e,t){var i=(e=e||window.event).changedTouches&&e.changedTouches[0]||e;return this.p.x=i.clientX-(t||0),this.p.y=i.clientY,this.p.matrixTransform(this.m)},e.prototype.getBBox=function(){var e=this.el.bbox();return this.el instanceof SVG.Nested&&(e=this.el.rbox()),(this.el instanceof SVG.G||this.el instanceof SVG.Use||this.el instanceof SVG.Nested)&&(e.x=this.el.x(),e.y=this.el.y()),e},e.prototype.start=function(e){if("click"!=e.type&&"mousedown"!=e.type&&"mousemove"!=e.type||1==(e.which||e.buttons)){var t=this;if(this.el.fire("beforedrag",{event:e,handler:this}),!this.el.event().defaultPrevented){e.preventDefault(),e.stopPropagation(),this.parent=this.parent||this.el.parent(SVG.Nested)||this.el.parent(SVG.Doc),this.p=this.parent.node.createSVGPoint(),this.m=this.el.node.getScreenCTM().inverse();var i,a=this.getBBox();if(this.el instanceof SVG.Text)switch(i=this.el.node.getComputedTextLength(),this.el.attr("text-anchor")){case"middle":i/=2;break;case"start":i=0}this.startPoints={point:this.transformPoint(e,i),box:a,transform:this.el.transform()},SVG.on(window,"mousemove.drag",(function(e){t.drag(e)})),SVG.on(window,"touchmove.drag",(function(e){t.drag(e)})),SVG.on(window,"mouseup.drag",(function(e){t.end(e)})),SVG.on(window,"touchend.drag",(function(e){t.end(e)})),this.el.fire("dragstart",{event:e,p:this.startPoints.point,m:this.m,handler:this})}}},e.prototype.drag=function(e){var t=this.getBBox(),i=this.transformPoint(e),a=this.startPoints.box.x+i.x-this.startPoints.point.x,n=this.startPoints.box.y+i.y-this.startPoints.point.y,r=this.constraint,o=i.x-this.startPoints.point.x,s=i.y-this.startPoints.point.y;if(this.el.fire("dragmove",{event:e,p:i,m:this.m,handler:this}),this.el.event().defaultPrevented)return i;if("function"==typeof r){var l=r.call(this.el,a,n,this.m);"boolean"==typeof l&&(l={x:l,y:l}),!0===l.x?this.el.x(a):!1!==l.x&&this.el.x(l.x),!0===l.y?this.el.y(n):!1!==l.y&&this.el.y(l.y)}else"object"==typeof r&&(null!=r.minX&&a<r.minX?o=(a=r.minX)-this.startPoints.box.x:null!=r.maxX&&a>r.maxX-t.width&&(o=(a=r.maxX-t.width)-this.startPoints.box.x),null!=r.minY&&n<r.minY?s=(n=r.minY)-this.startPoints.box.y:null!=r.maxY&&n>r.maxY-t.height&&(s=(n=r.maxY-t.height)-this.startPoints.box.y),null!=r.snapToGrid&&(a-=a%r.snapToGrid,n-=n%r.snapToGrid,o-=o%r.snapToGrid,s-=s%r.snapToGrid),this.el instanceof SVG.G?this.el.matrix(this.startPoints.transform).transform({x:o,y:s},!0):this.el.move(a,n));return i},e.prototype.end=function(e){var t=this.drag(e);this.el.fire("dragend",{event:e,p:t,m:this.m,handler:this}),SVG.off(window,"mousemove.drag"),SVG.off(window,"touchmove.drag"),SVG.off(window,"mouseup.drag"),SVG.off(window,"touchend.drag")},SVG.extend(SVG.Element,{draggable:function(t,i){"function"!=typeof t&&"object"!=typeof t||(i=t,t=!0);var a=this.remember("_draggable")||new e(this);return(t=void 0===t||t)?a.init(i||{},t):(this.off("mousedown.drag"),this.off("touchstart.drag")),this}})}.call(void 0),function(){function e(e){this.el=e,e.remember("_selectHandler",this),this.pointSelection={isSelected:!1},this.rectSelection={isSelected:!1},this.pointsList={lt:[0,0],rt:["width",0],rb:["width","height"],lb:[0,"height"],t:["width",0],r:["width","height"],b:["width","height"],l:[0,"height"]},this.pointCoord=function(e,t,i){var a="string"!=typeof e?e:t[e];return i?a/2:a},this.pointCoords=function(e,t){var i=this.pointsList[e];return{x:this.pointCoord(i[0],t,"t"===e||"b"===e),y:this.pointCoord(i[1],t,"r"===e||"l"===e)}}}e.prototype.init=function(e,t){var i=this.el.bbox();this.options={};var a=this.el.selectize.defaults.points;for(var n in this.el.selectize.defaults)this.options[n]=this.el.selectize.defaults[n],void 0!==t[n]&&(this.options[n]=t[n]);var r=["points","pointsExclude"];for(var n in r){var o=this.options[r[n]];"string"==typeof o?o=o.length>0?o.split(/\s*,\s*/i):[]:"boolean"==typeof o&&"points"===r[n]&&(o=o?a:[]),this.options[r[n]]=o}this.options.points=[a,this.options.points].reduce((function(e,t){return e.filter((function(e){return t.indexOf(e)>-1}))})),this.options.points=[this.options.points,this.options.pointsExclude].reduce((function(e,t){return e.filter((function(e){return t.indexOf(e)<0}))})),this.parent=this.el.parent(),this.nested=this.nested||this.parent.group(),this.nested.matrix(new SVG.Matrix(this.el).translate(i.x,i.y)),this.options.deepSelect&&-1!==["line","polyline","polygon"].indexOf(this.el.type)?this.selectPoints(e):this.selectRect(e),this.observe(),this.cleanup()},e.prototype.selectPoints=function(e){return this.pointSelection.isSelected=e,this.pointSelection.set||(this.pointSelection.set=this.parent.set(),this.drawPoints()),this},e.prototype.getPointArray=function(){var e=this.el.bbox();return this.el.array().valueOf().map((function(t){return[t[0]-e.x,t[1]-e.y]}))},e.prototype.drawPoints=function(){for(var e=this,t=this.getPointArray(),i=0,a=t.length;i<a;++i){var n=function(t){return function(i){(i=i||window.event).preventDefault?i.preventDefault():i.returnValue=!1,i.stopPropagation();var a=i.pageX||i.touches[0].pageX,n=i.pageY||i.touches[0].pageY;e.el.fire("point",{x:a,y:n,i:t,event:i})}}(i),r=this.drawPoint(t[i][0],t[i][1]).addClass(this.options.classPoints).addClass(this.options.classPoints+"_point").on("touchstart",n).on("mousedown",n);this.pointSelection.set.add(r)}},e.prototype.drawPoint=function(e,t){var i=this.options.pointType;switch(i){case"circle":return this.drawCircle(e,t);case"rect":return this.drawRect(e,t);default:if("function"==typeof i)return i.call(this,e,t);throw new Error("Unknown "+i+" point type!")}},e.prototype.drawCircle=function(e,t){return this.nested.circle(this.options.pointSize).center(e,t)},e.prototype.drawRect=function(e,t){return this.nested.rect(this.options.pointSize,this.options.pointSize).center(e,t)},e.prototype.updatePointSelection=function(){var e=this.getPointArray();this.pointSelection.set.each((function(t){this.cx()===e[t][0]&&this.cy()===e[t][1]||this.center(e[t][0],e[t][1])}))},e.prototype.updateRectSelection=function(){var e=this,t=this.el.bbox();if(this.rectSelection.set.get(0).attr({width:t.width,height:t.height}),this.options.points.length&&this.options.points.map((function(i,a){var n=e.pointCoords(i,t);e.rectSelection.set.get(a+1).center(n.x,n.y)})),this.options.rotationPoint){var i=this.rectSelection.set.length();this.rectSelection.set.get(i-1).center(t.width/2,20)}},e.prototype.selectRect=function(e){var t=this,i=this.el.bbox();function a(e){return function(i){(i=i||window.event).preventDefault?i.preventDefault():i.returnValue=!1,i.stopPropagation();var a=i.pageX||i.touches[0].pageX,n=i.pageY||i.touches[0].pageY;t.el.fire(e,{x:a,y:n,event:i})}}if(this.rectSelection.isSelected=e,this.rectSelection.set=this.rectSelection.set||this.parent.set(),this.rectSelection.set.get(0)||this.rectSelection.set.add(this.nested.rect(i.width,i.height).addClass(this.options.classRect)),this.options.points.length&&this.rectSelection.set.length()<2&&(this.options.points.map((function(e,n){var r=t.pointCoords(e,i),o=t.drawPoint(r.x,r.y).attr("class",t.options.classPoints+"_"+e).on("mousedown",a(e)).on("touchstart",a(e));t.rectSelection.set.add(o)})),this.rectSelection.set.each((function(){this.addClass(t.options.classPoints)}))),this.options.rotationPoint&&(this.options.points&&!this.rectSelection.set.get(9)||!this.options.points&&!this.rectSelection.set.get(1))){var n=function(e){(e=e||window.event).preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation();var i=e.pageX||e.touches[0].pageX,a=e.pageY||e.touches[0].pageY;t.el.fire("rot",{x:i,y:a,event:e})},r=this.drawPoint(i.width/2,20).attr("class",this.options.classPoints+"_rot").on("touchstart",n).on("mousedown",n);this.rectSelection.set.add(r)}},e.prototype.handler=function(){var e=this.el.bbox();this.nested.matrix(new SVG.Matrix(this.el).translate(e.x,e.y)),this.rectSelection.isSelected&&this.updateRectSelection(),this.pointSelection.isSelected&&this.updatePointSelection()},e.prototype.observe=function(){var e=this;if(MutationObserver)if(this.rectSelection.isSelected||this.pointSelection.isSelected)this.observerInst=this.observerInst||new MutationObserver((function(){e.handler()})),this.observerInst.observe(this.el.node,{attributes:!0});else try{this.observerInst.disconnect(),delete this.observerInst}catch(e){}else this.el.off("DOMAttrModified.select"),(this.rectSelection.isSelected||this.pointSelection.isSelected)&&this.el.on("DOMAttrModified.select",(function(){e.handler()}))},e.prototype.cleanup=function(){!this.rectSelection.isSelected&&this.rectSelection.set&&(this.rectSelection.set.each((function(){this.remove()})),this.rectSelection.set.clear(),delete this.rectSelection.set),!this.pointSelection.isSelected&&this.pointSelection.set&&(this.pointSelection.set.each((function(){this.remove()})),this.pointSelection.set.clear(),delete this.pointSelection.set),this.pointSelection.isSelected||this.rectSelection.isSelected||(this.nested.remove(),delete this.nested)},SVG.extend(SVG.Element,{selectize:function(t,i){return"object"==typeof t&&(i=t,t=!0),(this.remember("_selectHandler")||new e(this)).init(void 0===t||t,i||{}),this}}),SVG.Element.prototype.selectize.defaults={points:["lt","rt","rb","lb","t","r","b","l"],pointsExclude:[],classRect:"svg_select_boundingRect",classPoints:"svg_select_points",pointSize:7,rotationPoint:!0,deepSelect:!1,pointType:"circle"}}(),function(){(function(){function e(e){e.remember("_resizeHandler",this),this.el=e,this.parameters={},this.lastUpdateCall=null,this.p=e.doc().node.createSVGPoint()}e.prototype.transformPoint=function(e,t,i){return this.p.x=e-(this.offset.x-window.pageXOffset),this.p.y=t-(this.offset.y-window.pageYOffset),this.p.matrixTransform(i||this.m)},e.prototype._extractPosition=function(e){return{x:null!=e.clientX?e.clientX:e.touches[0].clientX,y:null!=e.clientY?e.clientY:e.touches[0].clientY}},e.prototype.init=function(e){var t=this;if(this.stop(),"stop"!==e){for(var i in this.options={},this.el.resize.defaults)this.options[i]=this.el.resize.defaults[i],void 0!==e[i]&&(this.options[i]=e[i]);this.el.on("lt.resize",(function(e){t.resize(e||window.event)})),this.el.on("rt.resize",(function(e){t.resize(e||window.event)})),this.el.on("rb.resize",(function(e){t.resize(e||window.event)})),this.el.on("lb.resize",(function(e){t.resize(e||window.event)})),this.el.on("t.resize",(function(e){t.resize(e||window.event)})),this.el.on("r.resize",(function(e){t.resize(e||window.event)})),this.el.on("b.resize",(function(e){t.resize(e||window.event)})),this.el.on("l.resize",(function(e){t.resize(e||window.event)})),this.el.on("rot.resize",(function(e){t.resize(e||window.event)})),this.el.on("point.resize",(function(e){t.resize(e||window.event)})),this.update()}},e.prototype.stop=function(){return this.el.off("lt.resize"),this.el.off("rt.resize"),this.el.off("rb.resize"),this.el.off("lb.resize"),this.el.off("t.resize"),this.el.off("r.resize"),this.el.off("b.resize"),this.el.off("l.resize"),this.el.off("rot.resize"),this.el.off("point.resize"),this},e.prototype.resize=function(e){var t=this;this.m=this.el.node.getScreenCTM().inverse(),this.offset={x:window.pageXOffset,y:window.pageYOffset};var i=this._extractPosition(e.detail.event);if(this.parameters={type:this.el.type,p:this.transformPoint(i.x,i.y),x:e.detail.x,y:e.detail.y,box:this.el.bbox(),rotation:this.el.transform().rotation},"text"===this.el.type&&(this.parameters.fontSize=this.el.attr()["font-size"]),void 0!==e.detail.i){var a=this.el.array().valueOf();this.parameters.i=e.detail.i,this.parameters.pointCoords=[a[e.detail.i][0],a[e.detail.i][1]]}switch(e.type){case"lt":this.calc=function(e,t){var i=this.snapToGrid(e,t);if(this.parameters.box.width-i[0]>0&&this.parameters.box.height-i[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+i[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-i[0]);i=this.checkAspectRatio(i),this.el.move(this.parameters.box.x+i[0],this.parameters.box.y+i[1]).size(this.parameters.box.width-i[0],this.parameters.box.height-i[1])}};break;case"rt":this.calc=function(e,t){var i=this.snapToGrid(e,t,2);if(this.parameters.box.width+i[0]>0&&this.parameters.box.height-i[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-i[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+i[0]);i=this.checkAspectRatio(i,!0),this.el.move(this.parameters.box.x,this.parameters.box.y+i[1]).size(this.parameters.box.width+i[0],this.parameters.box.height-i[1])}};break;case"rb":this.calc=function(e,t){var i=this.snapToGrid(e,t,0);if(this.parameters.box.width+i[0]>0&&this.parameters.box.height+i[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-i[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+i[0]);i=this.checkAspectRatio(i),this.el.move(this.parameters.box.x,this.parameters.box.y).size(this.parameters.box.width+i[0],this.parameters.box.height+i[1])}};break;case"lb":this.calc=function(e,t){var i=this.snapToGrid(e,t,1);if(this.parameters.box.width-i[0]>0&&this.parameters.box.height+i[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+i[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-i[0]);i=this.checkAspectRatio(i,!0),this.el.move(this.parameters.box.x+i[0],this.parameters.box.y).size(this.parameters.box.width-i[0],this.parameters.box.height+i[1])}};break;case"t":this.calc=function(e,t){var i=this.snapToGrid(e,t,2);if(this.parameters.box.height-i[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y+i[1]).height(this.parameters.box.height-i[1])}};break;case"r":this.calc=function(e,t){var i=this.snapToGrid(e,t,0);if(this.parameters.box.width+i[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).width(this.parameters.box.width+i[0])}};break;case"b":this.calc=function(e,t){var i=this.snapToGrid(e,t,0);if(this.parameters.box.height+i[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).height(this.parameters.box.height+i[1])}};break;case"l":this.calc=function(e,t){var i=this.snapToGrid(e,t,1);if(this.parameters.box.width-i[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x+i[0],this.parameters.box.y).width(this.parameters.box.width-i[0])}};break;case"rot":this.calc=function(e,t){var i=e+this.parameters.p.x,a=t+this.parameters.p.y,n=Math.atan2(this.parameters.p.y-this.parameters.box.y-this.parameters.box.height/2,this.parameters.p.x-this.parameters.box.x-this.parameters.box.width/2),r=Math.atan2(a-this.parameters.box.y-this.parameters.box.height/2,i-this.parameters.box.x-this.parameters.box.width/2),o=this.parameters.rotation+180*(r-n)/Math.PI+this.options.snapToAngle/2;this.el.center(this.parameters.box.cx,this.parameters.box.cy).rotate(o-o%this.options.snapToAngle,this.parameters.box.cx,this.parameters.box.cy)};break;case"point":this.calc=function(e,t){var i=this.snapToGrid(e,t,this.parameters.pointCoords[0],this.parameters.pointCoords[1]),a=this.el.array().valueOf();a[this.parameters.i][0]=this.parameters.pointCoords[0]+i[0],a[this.parameters.i][1]=this.parameters.pointCoords[1]+i[1],this.el.plot(a)}}this.el.fire("resizestart",{dx:this.parameters.x,dy:this.parameters.y,event:e}),SVG.on(window,"touchmove.resize",(function(e){t.update(e||window.event)})),SVG.on(window,"touchend.resize",(function(){t.done()})),SVG.on(window,"mousemove.resize",(function(e){t.update(e||window.event)})),SVG.on(window,"mouseup.resize",(function(){t.done()}))},e.prototype.update=function(e){if(e){var t=this._extractPosition(e),i=this.transformPoint(t.x,t.y),a=i.x-this.parameters.p.x,n=i.y-this.parameters.p.y;this.lastUpdateCall=[a,n],this.calc(a,n),this.el.fire("resizing",{dx:a,dy:n,event:e})}else this.lastUpdateCall&&this.calc(this.lastUpdateCall[0],this.lastUpdateCall[1])},e.prototype.done=function(){this.lastUpdateCall=null,SVG.off(window,"mousemove.resize"),SVG.off(window,"mouseup.resize"),SVG.off(window,"touchmove.resize"),SVG.off(window,"touchend.resize"),this.el.fire("resizedone")},e.prototype.snapToGrid=function(e,t,i,a){var n;return void 0!==a?n=[(i+e)%this.options.snapToGrid,(a+t)%this.options.snapToGrid]:(i=null==i?3:i,n=[(this.parameters.box.x+e+(1&i?0:this.parameters.box.width))%this.options.snapToGrid,(this.parameters.box.y+t+(2&i?0:this.parameters.box.height))%this.options.snapToGrid]),e<0&&(n[0]-=this.options.snapToGrid),t<0&&(n[1]-=this.options.snapToGrid),e-=Math.abs(n[0])<this.options.snapToGrid/2?n[0]:n[0]-(e<0?-this.options.snapToGrid:this.options.snapToGrid),t-=Math.abs(n[1])<this.options.snapToGrid/2?n[1]:n[1]-(t<0?-this.options.snapToGrid:this.options.snapToGrid),this.constraintToBox(e,t,i,a)},e.prototype.constraintToBox=function(e,t,i,a){var n,r,o=this.options.constraint||{};return void 0!==a?(n=i,r=a):(n=this.parameters.box.x+(1&i?0:this.parameters.box.width),r=this.parameters.box.y+(2&i?0:this.parameters.box.height)),void 0!==o.minX&&n+e<o.minX&&(e=o.minX-n),void 0!==o.maxX&&n+e>o.maxX&&(e=o.maxX-n),void 0!==o.minY&&r+t<o.minY&&(t=o.minY-r),void 0!==o.maxY&&r+t>o.maxY&&(t=o.maxY-r),[e,t]},e.prototype.checkAspectRatio=function(e,t){if(!this.options.saveAspectRatio)return e;var i=e.slice(),a=this.parameters.box.width/this.parameters.box.height,n=this.parameters.box.width+e[0],r=this.parameters.box.height-e[1],o=n/r;return o<a?(i[1]=n/a-this.parameters.box.height,t&&(i[1]=-i[1])):o>a&&(i[0]=this.parameters.box.width-r*a,t&&(i[0]=-i[0])),i},SVG.extend(SVG.Element,{resize:function(t){return(this.remember("_resizeHandler")||new e(this)).init(t||{}),this}}),SVG.Element.prototype.resize.defaults={snapToAngle:.1,snapToGrid:1,constraint:{},saveAspectRatio:!1}}).call(this)}(),void 0===window.Apex&&(window.Apex={});var Ve=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"initModules",value:function(){this.ctx.publicMethods=["updateOptions","updateSeries","appendData","appendSeries","toggleSeries","showSeries","hideSeries","setLocale","resetSeries","zoomX","toggleDataPointSelection","dataURI","exportToCSV","addXaxisAnnotation","addYaxisAnnotation","addPointAnnotation","clearAnnotations","removeAnnotation","paper","destroy"],this.ctx.eventList=["click","mousedown","mousemove","mouseleave","touchstart","touchmove","touchleave","mouseup","touchend"],this.ctx.animations=new b(this.ctx),this.ctx.axes=new ee(this.ctx),this.ctx.core=new Be(this.ctx.el,this.ctx),this.ctx.config=new L({}),this.ctx.data=new W(this.ctx),this.ctx.grid=new q(this.ctx),this.ctx.graphics=new w(this.ctx),this.ctx.coreUtils=new k(this.ctx),this.ctx.crosshairs=new te(this.ctx),this.ctx.events=new Q(this.ctx),this.ctx.exports=new X(this.ctx),this.ctx.localization=new $(this.ctx),this.ctx.options=new M,this.ctx.responsive=new ie(this.ctx),this.ctx.series=new Y(this.ctx),this.ctx.theme=new ae(this.ctx),this.ctx.formatters=new H(this.ctx),this.ctx.titleSubtitle=new ne(this.ctx),this.ctx.legend=new he(this.ctx),this.ctx.toolbar=new de(this.ctx),this.ctx.tooltip=new be(this.ctx),this.ctx.dimensions=new ce(this.ctx),this.ctx.updateHelpers=new Ne(this.ctx),this.ctx.zoomPanSelection=new fe(this.ctx),this.ctx.w.globals.tooltip=new be(this.ctx)}}]),e}(),Ye=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"clear",value:function(e){var t=e.isUpdating;this.ctx.zoomPanSelection&&this.ctx.zoomPanSelection.destroy(),this.ctx.toolbar&&this.ctx.toolbar.destroy(),this.ctx.animations=null,this.ctx.axes=null,this.ctx.annotations=null,this.ctx.core=null,this.ctx.data=null,this.ctx.grid=null,this.ctx.series=null,this.ctx.responsive=null,this.ctx.theme=null,this.ctx.formatters=null,this.ctx.titleSubtitle=null,this.ctx.legend=null,this.ctx.dimensions=null,this.ctx.options=null,this.ctx.crosshairs=null,this.ctx.zoomPanSelection=null,this.ctx.updateHelpers=null,this.ctx.toolbar=null,this.ctx.localization=null,this.ctx.w.globals.tooltip=null,this.clearDomElements({isUpdating:t})}},{key:"killSVG",value:function(e){e.each((function(e,t){this.removeClass("*"),this.off(),this.stop()}),!0),e.ungroup(),e.clear()}},{key:"clearDomElements",value:function(e){var t=this,i=e.isUpdating,a=this.w.globals.dom.Paper.node;a.parentNode&&a.parentNode.parentNode&&!i&&(a.parentNode.parentNode.style.minHeight="unset");var n=this.w.globals.dom.baseEl;n&&this.ctx.eventList.forEach((function(e){n.removeEventListener(e,t.ctx.events.documentEvent)}));var r=this.w.globals.dom;if(null!==this.ctx.el)for(;this.ctx.el.firstChild;)this.ctx.el.removeChild(this.ctx.el.firstChild);this.killSVG(r.Paper),r.Paper.remove(),r.elWrap=null,r.elGraphical=null,r.elAnnotations=null,r.elLegendWrap=null,r.baseEl=null,r.elGridRect=null,r.elGridRectMask=null,r.elGridRectMarkerMask=null,r.elForecastMask=null,r.elNonForecastMask=null,r.elDefs=null}}]),e}(),We=new WeakMap,He=function(){function e(t,i){s(this,e),this.opts=i,this.ctx=this,this.w=new R(i).init(),this.el=t,this.w.globals.cuid=x.randomId(),this.w.globals.chartID=this.w.config.chart.id?x.escapeString(this.w.config.chart.id):this.w.globals.cuid,new Ve(this).initModules(),this.create=x.bind(this.create,this),this.windowResizeHandler=this._windowResizeHandler.bind(this),this.parentResizeHandler=this._parentResizeCallback.bind(this)}return c(e,[{key:"render",value:function(){var e=this;return new Promise((function(t,i){if(null!==e.el){void 0===Apex._chartInstances&&(Apex._chartInstances=[]),e.w.config.chart.id&&Apex._chartInstances.push({id:e.w.globals.chartID,group:e.w.config.chart.group,chart:e}),e.setLocale(e.w.config.chart.defaultLocale);var a=e.w.config.chart.events.beforeMount;if("function"==typeof a&&a(e,e.w),e.events.fireEvent("beforeMount",[e,e.w]),window.addEventListener("resize",e.windowResizeHandler),function(e,t){var i=!1;if(e.nodeType!==Node.DOCUMENT_FRAGMENT_NODE){var a=e.getBoundingClientRect();"none"!==e.style.display&&0!==a.width||(i=!0)}var n=new ResizeObserver((function(a){i&&t.call(e,a),i=!0}));e.nodeType===Node.DOCUMENT_FRAGMENT_NODE?Array.from(e.children).forEach((function(e){return n.observe(e)})):n.observe(e),We.set(t,n)}(e.el.parentNode,e.parentResizeHandler),!e.css){var n=e.el.getRootNode&&e.el.getRootNode(),r=x.is("ShadowRoot",n),o=e.el.ownerDocument,s=o.getElementById("apexcharts-css");!r&&s||(e.css=document.createElement("style"),e.css.id="apexcharts-css",e.css.textContent='@keyframes opaque {\n  0% {\n      opacity: 0\n  }\n\n  to {\n      opacity: 1\n  }\n}\n\n@keyframes resizeanim {\n  0%,to {\n      opacity: 0\n  }\n}\n\n.apexcharts-canvas {\n  position: relative;\n  user-select: none\n}\n\n.apexcharts-canvas ::-webkit-scrollbar {\n  -webkit-appearance: none;\n  width: 6px\n}\n\n.apexcharts-canvas ::-webkit-scrollbar-thumb {\n  border-radius: 4px;\n  background-color: rgba(0,0,0,.5);\n  box-shadow: 0 0 1px rgba(255,255,255,.5);\n  -webkit-box-shadow: 0 0 1px rgba(255,255,255,.5)\n}\n\n.apexcharts-inner {\n  position: relative\n}\n\n.apexcharts-text tspan {\n  font-family: inherit\n}\n\n.legend-mouseover-inactive {\n  transition: .15s ease all;\n  opacity: .2\n}\n\n.apexcharts-legend-text {\n  padding-left: 15px;\n  margin-left: -15px;\n}\n\n.apexcharts-series-collapsed {\n  opacity: 0\n}\n\n.apexcharts-tooltip {\n  border-radius: 5px;\n  box-shadow: 2px 2px 6px -4px #999;\n  cursor: default;\n  font-size: 14px;\n  left: 62px;\n  opacity: 0;\n  pointer-events: none;\n  position: absolute;\n  top: 20px;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  white-space: nowrap;\n  z-index: 12;\n  transition: .15s ease all\n}\n\n.apexcharts-tooltip.apexcharts-active {\n  opacity: 1;\n  transition: .15s ease all\n}\n\n.apexcharts-tooltip.apexcharts-theme-light {\n  border: 1px solid #e3e3e3;\n  background: rgba(255,255,255,.96)\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark {\n  color: #fff;\n  background: rgba(30,30,30,.8)\n}\n\n.apexcharts-tooltip * {\n  font-family: inherit\n}\n\n.apexcharts-tooltip-title {\n  padding: 6px;\n  font-size: 15px;\n  margin-bottom: 4px\n}\n\n.apexcharts-tooltip.apexcharts-theme-light .apexcharts-tooltip-title {\n  background: #eceff1;\n  border-bottom: 1px solid #ddd\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark .apexcharts-tooltip-title {\n  background: rgba(0,0,0,.7);\n  border-bottom: 1px solid #333\n}\n\n.apexcharts-tooltip-text-goals-value,.apexcharts-tooltip-text-y-value,.apexcharts-tooltip-text-z-value {\n  display: inline-block;\n  margin-left: 5px;\n  font-weight: 600\n}\n\n.apexcharts-tooltip-text-goals-label:empty,.apexcharts-tooltip-text-goals-value:empty,.apexcharts-tooltip-text-y-label:empty,.apexcharts-tooltip-text-y-value:empty,.apexcharts-tooltip-text-z-value:empty,.apexcharts-tooltip-title:empty {\n  display: none\n}\n\n.apexcharts-tooltip-text-goals-label,.apexcharts-tooltip-text-goals-value {\n  padding: 6px 0 5px\n}\n\n.apexcharts-tooltip-goals-group,.apexcharts-tooltip-text-goals-label,.apexcharts-tooltip-text-goals-value {\n  display: flex\n}\n\n.apexcharts-tooltip-text-goals-label:not(:empty),.apexcharts-tooltip-text-goals-value:not(:empty) {\n  margin-top: -6px\n}\n\n.apexcharts-tooltip-marker {\n  width: 12px;\n  height: 12px;\n  position: relative;\n  top: 0;\n  margin-right: 10px;\n  border-radius: 50%\n}\n\n.apexcharts-tooltip-series-group {\n  padding: 0 10px;\n  display: none;\n  text-align: left;\n  justify-content: left;\n  align-items: center\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active .apexcharts-tooltip-marker {\n  opacity: 1\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active,.apexcharts-tooltip-series-group:last-child {\n  padding-bottom: 4px\n}\n\n.apexcharts-tooltip-series-group-hidden {\n  opacity: 0;\n  height: 0;\n  line-height: 0;\n  padding: 0!important\n}\n\n.apexcharts-tooltip-y-group {\n  padding: 6px 0 5px\n}\n\n.apexcharts-custom-tooltip,.apexcharts-tooltip-box {\n  padding: 4px 8px\n}\n\n.apexcharts-tooltip-boxPlot {\n  display: flex;\n  flex-direction: column-reverse\n}\n\n.apexcharts-tooltip-box>div {\n  margin: 4px 0\n}\n\n.apexcharts-tooltip-box span.value {\n  font-weight: 700\n}\n\n.apexcharts-tooltip-rangebar {\n  padding: 5px 8px\n}\n\n.apexcharts-tooltip-rangebar .category {\n  font-weight: 600;\n  color: #777\n}\n\n.apexcharts-tooltip-rangebar .series-name {\n  font-weight: 700;\n  display: block;\n  margin-bottom: 5px\n}\n\n.apexcharts-xaxistooltip,.apexcharts-yaxistooltip {\n  opacity: 0;\n  pointer-events: none;\n  color: #373d3f;\n  font-size: 13px;\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 10;\n  background: #eceff1;\n  border: 1px solid #90a4ae\n}\n\n.apexcharts-xaxistooltip {\n  padding: 9px 10px;\n  transition: .15s ease all\n}\n\n.apexcharts-xaxistooltip.apexcharts-theme-dark {\n  background: rgba(0,0,0,.7);\n  border: 1px solid rgba(0,0,0,.5);\n  color: #fff\n}\n\n.apexcharts-xaxistooltip:after,.apexcharts-xaxistooltip:before {\n  left: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none\n}\n\n.apexcharts-xaxistooltip:after {\n  border-color: transparent;\n  border-width: 6px;\n  margin-left: -6px\n}\n\n.apexcharts-xaxistooltip:before {\n  border-color: transparent;\n  border-width: 7px;\n  margin-left: -7px\n}\n\n.apexcharts-xaxistooltip-bottom:after,.apexcharts-xaxistooltip-bottom:before {\n  bottom: 100%\n}\n\n.apexcharts-xaxistooltip-top:after,.apexcharts-xaxistooltip-top:before {\n  top: 100%\n}\n\n.apexcharts-xaxistooltip-bottom:after {\n  border-bottom-color: #eceff1\n}\n\n.apexcharts-xaxistooltip-bottom:before {\n  border-bottom-color: #90a4ae\n}\n\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:after,.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:before {\n  border-bottom-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-xaxistooltip-top:after {\n  border-top-color: #eceff1\n}\n\n.apexcharts-xaxistooltip-top:before {\n  border-top-color: #90a4ae\n}\n\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:after,.apexcharts-xaxistooltip-top.apexcharts-theme-dark:before {\n  border-top-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-xaxistooltip.apexcharts-active {\n  opacity: 1;\n  transition: .15s ease all\n}\n\n.apexcharts-yaxistooltip {\n  padding: 4px 10px\n}\n\n.apexcharts-yaxistooltip.apexcharts-theme-dark {\n  background: rgba(0,0,0,.7);\n  border: 1px solid rgba(0,0,0,.5);\n  color: #fff\n}\n\n.apexcharts-yaxistooltip:after,.apexcharts-yaxistooltip:before {\n  top: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none\n}\n\n.apexcharts-yaxistooltip:after {\n  border-color: transparent;\n  border-width: 6px;\n  margin-top: -6px\n}\n\n.apexcharts-yaxistooltip:before {\n  border-color: transparent;\n  border-width: 7px;\n  margin-top: -7px\n}\n\n.apexcharts-yaxistooltip-left:after,.apexcharts-yaxistooltip-left:before {\n  left: 100%\n}\n\n.apexcharts-yaxistooltip-right:after,.apexcharts-yaxistooltip-right:before {\n  right: 100%\n}\n\n.apexcharts-yaxistooltip-left:after {\n  border-left-color: #eceff1\n}\n\n.apexcharts-yaxistooltip-left:before {\n  border-left-color: #90a4ae\n}\n\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:after,.apexcharts-yaxistooltip-left.apexcharts-theme-dark:before {\n  border-left-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-yaxistooltip-right:after {\n  border-right-color: #eceff1\n}\n\n.apexcharts-yaxistooltip-right:before {\n  border-right-color: #90a4ae\n}\n\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:after,.apexcharts-yaxistooltip-right.apexcharts-theme-dark:before {\n  border-right-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-yaxistooltip.apexcharts-active {\n  opacity: 1\n}\n\n.apexcharts-yaxistooltip-hidden {\n  display: none\n}\n\n.apexcharts-xcrosshairs,.apexcharts-ycrosshairs {\n  pointer-events: none;\n  opacity: 0;\n  transition: .15s ease all\n}\n\n.apexcharts-xcrosshairs.apexcharts-active,.apexcharts-ycrosshairs.apexcharts-active {\n  opacity: 1;\n  transition: .15s ease all\n}\n\n.apexcharts-ycrosshairs-hidden {\n  opacity: 0\n}\n\n.apexcharts-selection-rect {\n  cursor: move\n}\n\n.svg_select_boundingRect,.svg_select_points_rot {\n  pointer-events: none;\n  opacity: 0;\n  visibility: hidden\n}\n\n.apexcharts-selection-rect+g .svg_select_boundingRect,.apexcharts-selection-rect+g .svg_select_points_rot {\n  opacity: 0;\n  visibility: hidden\n}\n\n.apexcharts-selection-rect+g .svg_select_points_l,.apexcharts-selection-rect+g .svg_select_points_r {\n  cursor: ew-resize;\n  opacity: 1;\n  visibility: visible\n}\n\n.svg_select_points {\n  fill: #efefef;\n  stroke: #333;\n  rx: 2\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-zoom {\n  cursor: crosshair\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-pan {\n  cursor: move\n}\n\n.apexcharts-menu-icon,.apexcharts-pan-icon,.apexcharts-reset-icon,.apexcharts-selection-icon,.apexcharts-toolbar-custom-icon,.apexcharts-zoom-icon,.apexcharts-zoomin-icon,.apexcharts-zoomout-icon {\n  cursor: pointer;\n  width: 20px;\n  height: 20px;\n  line-height: 24px;\n  color: #6e8192;\n  text-align: center\n}\n\n.apexcharts-menu-icon svg,.apexcharts-reset-icon svg,.apexcharts-zoom-icon svg,.apexcharts-zoomin-icon svg,.apexcharts-zoomout-icon svg {\n  fill: #6e8192\n}\n\n.apexcharts-selection-icon svg {\n  fill: #444;\n  transform: scale(.76)\n}\n\n.apexcharts-theme-dark .apexcharts-menu-icon svg,.apexcharts-theme-dark .apexcharts-pan-icon svg,.apexcharts-theme-dark .apexcharts-reset-icon svg,.apexcharts-theme-dark .apexcharts-selection-icon svg,.apexcharts-theme-dark .apexcharts-toolbar-custom-icon svg,.apexcharts-theme-dark .apexcharts-zoom-icon svg,.apexcharts-theme-dark .apexcharts-zoomin-icon svg,.apexcharts-theme-dark .apexcharts-zoomout-icon svg {\n  fill: #f3f4f5\n}\n\n.apexcharts-canvas .apexcharts-reset-zoom-icon.apexcharts-selected svg,.apexcharts-canvas .apexcharts-selection-icon.apexcharts-selected svg,.apexcharts-canvas .apexcharts-zoom-icon.apexcharts-selected svg {\n  fill: #008ffb\n}\n\n.apexcharts-theme-light .apexcharts-menu-icon:hover svg,.apexcharts-theme-light .apexcharts-reset-icon:hover svg,.apexcharts-theme-light .apexcharts-selection-icon:not(.apexcharts-selected):hover svg,.apexcharts-theme-light .apexcharts-zoom-icon:not(.apexcharts-selected):hover svg,.apexcharts-theme-light .apexcharts-zoomin-icon:hover svg,.apexcharts-theme-light .apexcharts-zoomout-icon:hover svg {\n  fill: #333\n}\n\n.apexcharts-menu-icon,.apexcharts-selection-icon {\n  position: relative\n}\n\n.apexcharts-reset-icon {\n  margin-left: 5px\n}\n\n.apexcharts-menu-icon,.apexcharts-reset-icon,.apexcharts-zoom-icon {\n  transform: scale(.85)\n}\n\n.apexcharts-zoomin-icon,.apexcharts-zoomout-icon {\n  transform: scale(.7)\n}\n\n.apexcharts-zoomout-icon {\n  margin-right: 3px\n}\n\n.apexcharts-pan-icon {\n  transform: scale(.62);\n  position: relative;\n  left: 1px;\n  top: 0\n}\n\n.apexcharts-pan-icon svg {\n  fill: #fff;\n  stroke: #6e8192;\n  stroke-width: 2\n}\n\n.apexcharts-pan-icon.apexcharts-selected svg {\n  stroke: #008ffb\n}\n\n.apexcharts-pan-icon:not(.apexcharts-selected):hover svg {\n  stroke: #333\n}\n\n.apexcharts-toolbar {\n  position: absolute;\n  z-index: 11;\n  max-width: 176px;\n  text-align: right;\n  border-radius: 3px;\n  padding: 0 6px 2px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center\n}\n\n.apexcharts-menu {\n  background: #fff;\n  position: absolute;\n  top: 100%;\n  border: 1px solid #ddd;\n  border-radius: 3px;\n  padding: 3px;\n  right: 10px;\n  opacity: 0;\n  min-width: 110px;\n  transition: .15s ease all;\n  pointer-events: none\n}\n\n.apexcharts-menu.apexcharts-menu-open {\n  opacity: 1;\n  pointer-events: all;\n  transition: .15s ease all\n}\n\n.apexcharts-menu-item {\n  padding: 6px 7px;\n  font-size: 12px;\n  cursor: pointer\n}\n\n.apexcharts-theme-light .apexcharts-menu-item:hover {\n  background: #eee\n}\n\n.apexcharts-theme-dark .apexcharts-menu {\n  background: rgba(0,0,0,.7);\n  color: #fff\n}\n\n@media screen and (min-width:768px) {\n  .apexcharts-canvas:hover .apexcharts-toolbar {\n      opacity: 1\n  }\n}\n\n.apexcharts-canvas .apexcharts-element-hidden,.apexcharts-datalabel.apexcharts-element-hidden,.apexcharts-hide .apexcharts-series-points {\n  opacity: 0\n}\n\n.apexcharts-datalabel,.apexcharts-datalabel-label,.apexcharts-datalabel-value,.apexcharts-datalabels,.apexcharts-pie-label {\n  cursor: default;\n  pointer-events: none\n}\n\n.apexcharts-pie-label-delay {\n  opacity: 0;\n  animation-name: opaque;\n  animation-duration: .3s;\n  animation-fill-mode: forwards;\n  animation-timing-function: ease\n}\n\n.apexcharts-annotation-rect,.apexcharts-area-series .apexcharts-area,.apexcharts-area-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,.apexcharts-gridline,.apexcharts-line,.apexcharts-line-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,.apexcharts-point-annotation-label,.apexcharts-radar-series path,.apexcharts-radar-series polygon,.apexcharts-toolbar svg,.apexcharts-tooltip .apexcharts-marker,.apexcharts-xaxis-annotation-label,.apexcharts-yaxis-annotation-label,.apexcharts-zoom-rect {\n  pointer-events: none\n}\n\n.apexcharts-marker {\n  transition: .15s ease all\n}\n\n.resize-triggers {\n  animation: 1ms resizeanim;\n  visibility: hidden;\n  opacity: 0;\n  height: 100%;\n  width: 100%;\n  overflow: hidden\n}\n\n.contract-trigger:before,.resize-triggers,.resize-triggers>div {\n  content: " ";\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0\n}\n\n.resize-triggers>div {\n  height: 100%;\n  width: 100%;\n  background: #eee;\n  overflow: auto\n}\n\n.contract-trigger:before {\n  overflow: hidden;\n  width: 200%;\n  height: 200%\n}\n',r?n.prepend(e.css):o.head.appendChild(e.css))}var l=e.create(e.w.config.series,{});if(!l)return t(e);e.mount(l).then((function(){"function"==typeof e.w.config.chart.events.mounted&&e.w.config.chart.events.mounted(e,e.w),e.events.fireEvent("mounted",[e,e.w]),t(l)})).catch((function(e){i(e)}))}else i(new Error("Element not found"))}))}},{key:"create",value:function(e,t){var i=this.w;new Ve(this).initModules();var a=this.w.globals;if(a.noData=!1,a.animationEnded=!1,this.responsive.checkResponsiveConfig(t),i.config.xaxis.convertedCatToNumeric&&new z(i.config).convertCatToNumericXaxis(i.config,this.ctx),null===this.el)return a.animationEnded=!0,null;if(this.core.setupElements(),"treemap"===i.config.chart.type&&(i.config.grid.show=!1,i.config.yaxis[0].show=!1),0===a.svgWidth)return a.animationEnded=!0,null;var n=k.checkComboSeries(e);a.comboCharts=n.comboCharts,a.comboBarCount=n.comboBarCount;var r=e.every((function(e){return e.data&&0===e.data.length}));(0===e.length||r)&&this.series.handleNoData(),this.events.setupEventHandlers(),this.data.parseData(e),this.theme.init(),new B(this).setGlobalMarkerSize(),this.formatters.setLabelFormatters(),this.titleSubtitle.draw(),a.noData&&a.collapsedSeries.length!==a.series.length&&!i.config.legend.showForSingleSeries||this.legend.init(),this.series.hasAllSeriesEqualX(),a.axisCharts&&(this.core.coreCalculations(),"category"!==i.config.xaxis.type&&this.formatters.setLabelFormatters(),this.ctx.toolbar.minX=i.globals.minX,this.ctx.toolbar.maxX=i.globals.maxX),this.formatters.heatmapLabelFormatters(),new k(this).getLargestMarkerSize(),this.dimensions.plotCoords();var o=this.core.xySettings();this.grid.createGridMask();var s=this.core.plotChartType(e,o),l=new V(this);l.bringForward(),i.config.dataLabels.background.enabled&&l.dataLabelsBackground(),this.core.shiftGraphPosition();var c={plot:{left:i.globals.translateX,top:i.globals.translateY,width:i.globals.gridWidth,height:i.globals.gridHeight}};return{elGraph:s,xyRatios:o,elInner:i.globals.dom.elGraphical,dimensions:c}}},{key:"mount",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=this,a=i.w;return new Promise((function(n,r){if(null===i.el)return r(new Error("Not enough data to display or target element not found"));(null===t||a.globals.allSeriesCollapsed)&&i.series.handleNoData(),i.grid=new q(i);var o=i.grid.drawGrid();"treemap"!==a.config.chart.type&&i.axes.drawAxis(a.config.chart.type,o),i.annotations=new E(i),i.annotations.drawImageAnnos(),i.annotations.drawTextAnnos(),"back"===a.config.grid.position&&o&&a.globals.dom.elGraphical.add(o.el);var s=new G(e.ctx,o),l=new J(e.ctx,o);if(null!==o&&(s.xAxisLabelCorrections(o.xAxisTickWidth),l.setYAxisTextAlignments(),a.config.yaxis.map((function(e,t){-1===a.globals.ignoreYAxisIndexes.indexOf(t)&&l.yAxisTitleRotate(t,e.opposite)}))),"back"===a.config.annotations.position&&(a.globals.dom.Paper.add(a.globals.dom.elAnnotations),i.annotations.drawAxesAnnotations()),Array.isArray(t.elGraph))for(var c=0;c<t.elGraph.length;c++)a.globals.dom.elGraphical.add(t.elGraph[c]);else a.globals.dom.elGraphical.add(t.elGraph);if("front"===a.config.grid.position&&o&&a.globals.dom.elGraphical.add(o.el),o&&o.elGridBorders&&o.elGridBorders.node&&a.globals.dom.elGraphical.add(o.elGridBorders),"front"===a.config.xaxis.crosshairs.position&&i.crosshairs.drawXCrosshairs(),"front"===a.config.yaxis[0].crosshairs.position&&i.crosshairs.drawYCrosshairs(),"front"===a.config.annotations.position&&(a.globals.dom.Paper.add(a.globals.dom.elAnnotations),i.annotations.drawAxesAnnotations()),!a.globals.noData){if(a.config.tooltip.enabled&&!a.globals.noData&&i.w.globals.tooltip.drawTooltip(t.xyRatios),a.globals.axisCharts&&(a.globals.isXNumeric||a.config.xaxis.convertedCatToNumeric||a.globals.isRangeBar))(a.config.chart.zoom.enabled||a.config.chart.selection&&a.config.chart.selection.enabled||a.config.chart.pan&&a.config.chart.pan.enabled)&&i.zoomPanSelection.init({xyRatios:t.xyRatios});else{var u=a.config.chart.toolbar.tools;["zoom","zoomin","zoomout","selection","pan","reset"].forEach((function(e){u[e]=!1}))}a.config.chart.toolbar.show&&!a.globals.allSeriesCollapsed&&i.toolbar.createToolbar()}a.globals.memory.methodsToExec.length>0&&a.globals.memory.methodsToExec.forEach((function(e){e.method(e.params,!1,e.context)})),a.globals.axisCharts||a.globals.noData||i.core.resizeNonAxisCharts(),n(i)}))}},{key:"destroy",value:function(){var e,t;window.removeEventListener("resize",this.windowResizeHandler),this.el.parentNode,e=this.parentResizeHandler,(t=We.get(e))&&(t.disconnect(),We.delete(e));var i=this.w.config.chart.id;i&&Apex._chartInstances.forEach((function(e,t){e.id===x.escapeString(i)&&Apex._chartInstances.splice(t,1)})),new Ye(this.ctx).clear({isUpdating:!1})}},{key:"updateOptions",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=this.w;return o.globals.selection=void 0,e.series&&(this.series.resetSeries(!1,!0,!1),e.series.length&&e.series[0].data&&(e.series=e.series.map((function(e,i){return t.updateHelpers._extendSeries(e,i)}))),this.updateHelpers.revertDefaultAxisMinMax()),e.xaxis&&(e=this.updateHelpers.forceXAxisUpdate(e)),e.yaxis&&(e=this.updateHelpers.forceYAxisUpdate(e)),o.globals.collapsedSeriesIndices.length>0&&this.series.clearPreviousPaths(),e.theme&&(e=this.theme.updateThemeOptions(e)),this.updateHelpers._updateOptions(e,i,a,n,r)}},{key:"updateSeries",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(e,t,i)}},{key:"appendSeries",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=this.w.config.series.slice();return a.push(e),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(a,t,i)}},{key:"appendData",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this;i.w.globals.dataChanged=!0,i.series.getPreviousPaths();for(var a=i.w.config.series.slice(),n=0;n<a.length;n++)if(null!==e[n]&&void 0!==e[n])for(var r=0;r<e[n].data.length;r++)a[n].data.push(e[n].data[r]);return i.w.config.series=a,t&&(i.w.globals.initialSeries=x.clone(i.w.config.series)),this.update()}},{key:"update",value:function(e){var t=this;return new Promise((function(i,a){new Ye(t.ctx).clear({isUpdating:!0});var n=t.create(t.w.config.series,e);if(!n)return i(t);t.mount(n).then((function(){"function"==typeof t.w.config.chart.events.updated&&t.w.config.chart.events.updated(t,t.w),t.events.fireEvent("updated",[t,t.w]),t.w.globals.isDirty=!0,i(t)})).catch((function(e){a(e)}))}))}},{key:"getSyncedCharts",value:function(){var e=this.getGroupedCharts(),t=[this];return e.length&&(t=[],e.forEach((function(e){t.push(e)}))),t}},{key:"getGroupedCharts",value:function(){var e=this;return Apex._chartInstances.filter((function(e){if(e.group)return!0})).map((function(t){return e.w.config.chart.group===t.group?t.chart:e}))}},{key:"toggleSeries",value:function(e){return this.series.toggleSeries(e)}},{key:"highlightSeriesOnLegendHover",value:function(e,t){return this.series.toggleSeriesOnHover(e,t)}},{key:"showSeries",value:function(e){this.series.showSeries(e)}},{key:"hideSeries",value:function(e){this.series.hideSeries(e)}},{key:"resetSeries",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.series.resetSeries(e,t)}},{key:"addEventListener",value:function(e,t){this.events.addEventListener(e,t)}},{key:"removeEventListener",value:function(e,t){this.events.removeEventListener(e,t)}},{key:"addXaxisAnnotation",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=this;i&&(a=i),a.annotations.addXaxisAnnotationExternal(e,t,a)}},{key:"addYaxisAnnotation",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=this;i&&(a=i),a.annotations.addYaxisAnnotationExternal(e,t,a)}},{key:"addPointAnnotation",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=this;i&&(a=i),a.annotations.addPointAnnotationExternal(e,t,a)}},{key:"clearAnnotations",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=this;e&&(t=e),t.annotations.clearAnnotations(t)}},{key:"removeAnnotation",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=this;t&&(i=t),i.annotations.removeAnnotation(i,e)}},{key:"getChartArea",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner")}},{key:"getSeriesTotalXRange",value:function(e,t){return this.coreUtils.getSeriesTotalsXRange(e,t)}},{key:"getHighestValueInSeries",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=new K(this.ctx);return t.getMinYMaxY(e).highestY}},{key:"getLowestValueInSeries",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=new K(this.ctx);return t.getMinYMaxY(e).lowestY}},{key:"getSeriesTotal",value:function(){return this.w.globals.seriesTotals}},{key:"toggleDataPointSelection",value:function(e,t){return this.updateHelpers.toggleDataPointSelection(e,t)}},{key:"zoomX",value:function(e,t){this.ctx.toolbar.zoomUpdateOptions(e,t)}},{key:"setLocale",value:function(e){this.localization.setCurrentLocaleValues(e)}},{key:"dataURI",value:function(e){return new X(this.ctx).dataURI(e)}},{key:"exportToCSV",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new X(this.ctx);return t.exportToCSV(e)}},{key:"paper",value:function(){return this.w.globals.dom.Paper}},{key:"_parentResizeCallback",value:function(){this.w.globals.animationEnded&&this.w.config.chart.redrawOnParentResize&&this._windowResize()}},{key:"_windowResize",value:function(){var e=this;clearTimeout(this.w.globals.resizeTimer),this.w.globals.resizeTimer=window.setTimeout((function(){e.w.globals.resized=!0,e.w.globals.dataChanged=!1,e.ctx.update()}),150)}},{key:"_windowResizeHandler",value:function(){var e=this.w.config.chart.redrawOnWindowResize;"function"==typeof e&&(e=e()),e&&this._windowResize()}}],[{key:"getChartByID",value:function(e){var t=x.escapeString(e),i=Apex._chartInstances.filter((function(e){return e.id===t}))[0];return i&&i.chart}},{key:"initOnLoad",value:function(){for(var t=document.querySelectorAll("[data-apexcharts]"),i=0;i<t.length;i++)new e(t[i],JSON.parse(t[i].getAttribute("data-options"))).render()}},{key:"exec",value:function(e,t){var i=this.getChartByID(e);if(i){i.w.globals.isExecCalled=!0;var a=null;if(-1!==i.publicMethods.indexOf(t)){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];a=i[t].apply(i,r)}return a}}},{key:"merge",value:function(e,t){return x.extend(e,t)}}]),e}();e.exports=He},430:function(e,t,i){},431:function(e,t,i){var a=i(352),n=i(282),r=i(283),o=i(354),s=i(233),l=i(285),c=i(355),u=i(360),h=i(361),d=i(362),f=i(363),p=i(364),m=i(365),g=i(366),v=i(367);e.exports=function(){"use strict";var e,t,i;function y(a,n){if(e)if(t){var r="var sharedChunk = {}; ("+e+")(sharedChunk); ("+t+")(sharedChunk);",o={};e(o),i=n(o),"undefined"!==typeof window&&(i.workerUrl=window.URL.createObjectURL(new Blob([r],{type:"text/javascript"})))}else t=n;else e=n}return y(0,(function(e){var t=i;function i(e,t,i,a){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(a-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=i,this.p2y=a}function a(e,i,a,n){var r=new t(e,i,a,n);return function(e){return r.solve(e)}}i.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(void 0===t&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var i=e,a=0;a<8;a++){var n=this.sampleCurveX(i)-e;if(Math.abs(n)<t)return i;var r=this.sampleCurveDerivativeX(i);if(Math.abs(r)<1e-6)break;i-=n/r}var o=0,s=1;for(i=e,a=0;a<20&&(n=this.sampleCurveX(i),!(Math.abs(n-e)<t));a++)e>n?o=i:s=i,i=.5*(s-o)+o;return i},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}};var n=a(.25,.1,.25,1);function y(e,t,i){return Math.min(i,Math.max(t,e))}function x(e,t,i){var a=i-t,n=((e-t)%a+a)%a+t;return n===t?i:n}function b(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];for(var n=0,r=i;n<r.length;n++){var o=r[n];for(var s in o)e[s]=o[s]}return e}var _=1;function w(e,t){e.forEach((function(e){t[e]&&(t[e]=t[e].bind(t))}))}function k(e,t,i){var a={};for(var n in e)a[n]=t.call(i||this,e[n],n,e);return a}function S(e,t,i){var a={};for(var n in e)t.call(i||this,e[n],n,e)&&(a[n]=e[n]);return a}function C(e){return Array.isArray(e)?e.map(C):"object"==typeof e&&e?k(e,C):e}var A={};function O(e){A[e]||("undefined"!=typeof console&&console.warn(e),A[e]=!0)}function T(e,t,i){return(i.y-e.y)*(t.x-e.x)>(t.y-e.y)*(i.x-e.x)}function M(e){for(var t,i,a=0,n=0,r=e.length,o=r-1;n<r;o=n++)t=e[n],a+=((i=e[o]).x-t.x)*(t.y+i.y);return a}function E(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function I(e){var t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(function(e,i,a,n){var r=a||n;return t[i]=!r||r.toLowerCase(),""})),t["max-age"]){var i=parseInt(t["max-age"],10);isNaN(i)?delete t["max-age"]:t["max-age"]=i}return t}var P,D,z=null;function L(e){if(null==z){var t=e.navigator?e.navigator.userAgent:null;z=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return z}function j(e){return"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap}var R={now:"undefined"!=typeof performance&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame:function(e){var t=requestAnimationFrame(e);return{cancel:function(){return cancelAnimationFrame(t)}}},getImageData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=window.document.createElement("canvas"),a=i.getContext("2d");if(!a)throw new Error("failed to create canvas 2d context");return i.width=e.width,i.height=e.height,a.drawImage(e,0,0,e.width,e.height),a.getImageData(-t,-t,e.width+2*t,e.height+2*t)},resolveURL:function(e){return P||(P=document.createElement("a")),P.href=e,P.href},hardwareConcurrency:"undefined"!=typeof navigator&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(null==D&&(D=matchMedia("(prefers-reduced-motion: reduce)")),D.matches)}},F=B;function B(e,t){this.x=e,this.y=t}B.prototype={clone:function(){return new B(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),i=Math.sin(e),a=i*this.x+t*this.y;return this.x=t*this.x-i*this.y,this.y=a,this},_rotateAround:function(e,t){var i=Math.cos(e),a=Math.sin(e),n=t.y+a*(this.x-t.x)+i*(this.y-t.y);return this.x=t.x+i*(this.x-t.x)-a*(this.y-t.y),this.y=n,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},B.convert=function(e){return e instanceof B?e:Array.isArray(e)?new B(e[0],e[1]):e};var N,V={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},Y="mapbox-tiles",W=500,H=50;function U(){"undefined"==typeof caches||N||(N=caches.open(Y))}var X,G,q=1/0,Z={supported:!1,testSupport:function(e){!K&&G&&(J?Q(e):X=e)}},K=!1,J=!1;function Q(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,G),e.isContextLost())return;Z.supported=!0}catch(e){}e.deleteTexture(t),K=!0}"undefined"!=typeof document&&((G=document.createElement("img")).onload=function(){X&&Q(X),X=null,J=!0},G.onerror=function(){K=!0,X=null},G.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var $={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze($);var ee=function(e){m(i,e);var t=g(i);function i(e,a,n,r){var o;return p(this,i),(o=t.call(this,"AJAXError: ".concat(a," (").concat(e,"): ").concat(n))).status=e,o.statusText=a,o.url=n,o.body=r,o}return f(i)}(v(Error)),te=E()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===window.location.protocol?window.parent:window).location.href};function ie(e,t){var i=new AbortController,a=new Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,referrer:te(),signal:i.signal}),n=!1,r=!1;return"json"===e.type&&a.headers.set("Accept","application/json"),r||(Date.now(),fetch(a).then((function(i){return i.ok?function(i,a,o){("arrayBuffer"===e.type?i.arrayBuffer():"json"===e.type?i.json():i.text()).then((function(e){r||(n=!0,t(null,e,i.headers.get("Cache-Control"),i.headers.get("Expires")))})).catch((function(e){r||t(new Error(e.message))}))}(i):i.blob().then((function(a){return t(new ee(i.status,i.statusText,e.url,a))}))})).catch((function(e){20!==e.code&&t(new Error(e.message))}))),{cancel:function(){r=!0,n||i.abort()}}}var ae=function(e,t){if(/:\/\//.test(e.url)&&!/^https?:|^file:/.test(e.url)){if(E()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t);if(!E()){var i=e.url.substring(0,e.url.indexOf("://"));return(V.REGISTERED_PROTOCOLS[i]||ie)(e,t)}}if(!(/^file:/.test(a=e.url)||/^file:/.test(te())&&!/^\w+:/.test(a))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return ie(e,t);if(E()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var a;return function(e,t){var i=new XMLHttpRequest;for(var a in i.open(e.method||"GET",e.url,!0),"arrayBuffer"===e.type&&(i.responseType="arraybuffer"),e.headers)i.setRequestHeader(a,e.headers[a]);return"json"===e.type&&(i.responseType="text",i.setRequestHeader("Accept","application/json")),i.withCredentials="include"===e.credentials,i.onerror=function(){t(new Error(i.statusText))},i.onload=function(){if((i.status>=200&&i.status<300||0===i.status)&&null!==i.response){var a=i.response;if("json"===e.type)try{a=JSON.parse(i.response)}catch(e){return t(e)}t(null,a,i.getResponseHeader("Cache-Control"),i.getResponseHeader("Expires"))}else{var n=new Blob([i.response],{type:i.getResponseHeader("Content-Type")});t(new ee(i.status,i.statusText,e.url,n))}},i.send(e.body),{cancel:function(){return i.abort()}}}(e,t)},ne=function(e,t){return ae(b(e,{type:"arrayBuffer"}),t)};function re(e){var t=window.document.createElement("a");return t.href=e,t.protocol===window.document.location.protocol&&t.host===window.document.location.host}var oe,se,le="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function ce(e,t,i){i[e]&&-1!==i[e].indexOf(t)||(i[e]=i[e]||[],i[e].push(t))}function ue(e,t,i){if(i&&i[e]){var a=i[e].indexOf(t);-1!==a&&i[e].splice(a,1)}}oe=[],se=0;var he=f((function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p(this,e),b(this,i),this.type=t})),de=function(e){m(i,e);var t=g(i);function i(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return p(this,i),t.call(this,"error",b({error:e},a))}return f(i)}(he),fe=function(){function e(){p(this,e)}return f(e,[{key:"on",value:function(e,t){return this._listeners=this._listeners||{},ce(e,t,this._listeners),this}},{key:"off",value:function(e,t){return ue(e,t,this._listeners),ue(e,t,this._oneTimeListeners),this}},{key:"once",value:function(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},ce(e,t,this._oneTimeListeners),this}},{key:"fire",value:function(e,t){"string"==typeof e&&(e=new he(e,t||{}));var i=e.type;if(this.listens(i)){e.target=this;var a,n=this._listeners&&this._listeners[i]?this._listeners[i].slice():[],r=d(n);try{for(r.s();!(a=r.n()).done;)a.value.call(this,e)}catch(h){r.e(h)}finally{r.f()}var o,s=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[],l=d(s);try{for(l.s();!(o=l.n()).done;){var c=o.value;ue(i,c,this._oneTimeListeners),c.call(this,e)}}catch(h){l.e(h)}finally{l.f()}var u=this._eventedParent;u&&(b(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),u.fire(e))}else e instanceof de&&console.error(e.error);return this}},{key:"listens",value:function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)}},{key:"setEventedParent",value:function(e,t){return this._eventedParent=e,this._eventedParentData=t,this}}]),e}(),pe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},me=f((function e(t,i,a,n){p(this,e),this.message=(t?"".concat(t,": "):"")+a,n&&(this.identifier=n),null!=i&&i.__line__&&(this.line=i.__line__)}));function ge(e){var t=e.value;return t?[new me(e.key,t,"constants have been deprecated as of v8")]:[]}function ve(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];for(var n=0,r=i;n<r.length;n++){var o=r[n];for(var s in o)e[s]=o[s]}return e}function ye(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function xe(e){if(Array.isArray(e))return e.map(xe);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var t={};for(var i in e)t[i]=xe(e[i]);return t}return ye(e)}var be=function(e){m(i,e);var t=g(i);function i(e,a){var n;return p(this,i),(n=t.call(this,a)).message=a,n.key=e,n}return f(i)}(v(Error)),_e=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];p(this,e),this.parent=t,this.bindings={};var a,n=d(i);try{for(n.s();!(a=n.n()).done;){var r=h(a.value,2),o=r[0],s=r[1];this.bindings[o]=s}}catch(l){n.e(l)}finally{n.f()}}return f(e,[{key:"concat",value:function(t){return new e(this,t)}},{key:"get",value:function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error("".concat(e," not found in scope."))}},{key:"has",value:function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}]),e}(),we={kind:"null"},ke={kind:"number"},Se={kind:"string"},Ce={kind:"boolean"},Ae={kind:"color"},Oe={kind:"object"},Te={kind:"value"},Me={kind:"collator"},Ee={kind:"formatted"},Ie={kind:"padding"},Pe={kind:"resolvedImage"};function De(e,t){return{kind:"array",itemType:e,N:t}}function ze(e){if("array"===e.kind){var t=ze(e.itemType);return"number"==typeof e.N?"array<".concat(t,", ").concat(e.N,">"):"value"===e.itemType.kind?"array":"array<".concat(t,">")}return e.kind}var Le=[we,ke,Se,Ce,Ae,Ee,Oe,De(Te),Ie,Pe];function je(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!je(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind){var i,a=d(Le);try{for(a.s();!(i=a.n()).done;)if(!je(i.value,t))return null}catch(n){a.e(n)}finally{a.f()}}}return"Expected ".concat(ze(e)," but found ").concat(ze(t)," instead.")}function Re(e,t){return t.some((function(t){return t.kind===e.kind}))}function Fe(e,t){return t.some((function(t){return"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e}))}var Be,Ne={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Ve(e){return(e=Math.round(e))<0?0:e>255?255:e}function Ye(e){return Ve("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function We(e){return(t="%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))<0?0:t>1?1:t;var t}function He(e,t,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?e+(t-e)*i*6:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}try{Be={}.parseCSSColor=function(e){var t,i=e.replace(/ /g,"").toLowerCase();if(i in Ne)return Ne[i].slice();if("#"===i[0])return 4===i.length?(t=parseInt(i.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===i.length&&(t=parseInt(i.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var a=i.indexOf("("),n=i.indexOf(")");if(-1!==a&&n+1===i.length){var r=i.substr(0,a),o=i.substr(a+1,n-(a+1)).split(","),s=1;switch(r){case"rgba":if(4!==o.length)return null;s=We(o.pop());case"rgb":return 3!==o.length?null:[Ye(o[0]),Ye(o[1]),Ye(o[2]),s];case"hsla":if(4!==o.length)return null;s=We(o.pop());case"hsl":if(3!==o.length)return null;var l=(parseFloat(o[0])%360+360)%360/360,c=We(o[1]),u=We(o[2]),h=u<=.5?u*(c+1):u+c-u*c,d=2*u-h;return[Ve(255*He(d,h,l+1/3)),Ve(255*He(d,h,l)),Ve(255*He(d,h,l-1/3)),s];default:return null}}return null}}catch(e){}var Ue=function(){function e(t,i,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;p(this,e),this.r=t,this.g=i,this.b=a,this.a=n}return f(e,[{key:"toString",value:function(){var e=this.toArray(),t=h(e,4),i=t[0],a=t[1],n=t[2],r=t[3];return"rgba(".concat(Math.round(i),",").concat(Math.round(a),",").concat(Math.round(n),",").concat(r,")")}},{key:"toArray",value:function(){var e=this.r,t=this.g,i=this.b,a=this.a;return 0===a?[0,0,0,0]:[255*e/a,255*t/a,255*i/a,a]}}],[{key:"parse",value:function(t){if(t){if(t instanceof e)return t;if("string"==typeof t){var i=Be(t);return i?new e(i[0]/255*i[3],i[1]/255*i[3],i[2]/255*i[3],i[3]):void 0}}}}]),e}();Ue.black=new Ue(0,0,0,1),Ue.white=new Ue(1,1,1,1),Ue.transparent=new Ue(0,0,0,0),Ue.red=new Ue(1,0,0,1);var Xe=function(){function e(t,i,a){p(this,e),this.sensitivity=t?i?"variant":"case":i?"accent":"base",this.locale=a,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}return f(e,[{key:"compare",value:function(e,t){return this.collator.compare(e,t)}},{key:"resolvedLocale",value:function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}]),e}(),Ge=f((function e(t,i,a,n,r){p(this,e),this.text=t,this.image=i,this.scale=a,this.fontStack=n,this.textColor=r})),qe=function(){function e(t){p(this,e),this.sections=t}return f(e,[{key:"isEmpty",value:function(){return 0===this.sections.length||!this.sections.some((function(e){return 0!==e.text.length||e.image&&0!==e.image.name.length}))}},{key:"toString",value:function(){return 0===this.sections.length?"":this.sections.map((function(e){return e.text})).join("")}}],[{key:"fromString",value:function(t){return new e([new Ge(t,null,null,null,null)])}},{key:"factory",value:function(t){return t instanceof e?t:e.fromString(t)}}]),e}(),Ze=function(){function e(t){p(this,e),this.values=t.slice()}return f(e,[{key:"toString",value:function(){return JSON.stringify(this.values)}}],[{key:"parse",value:function(t){if(t instanceof e)return t;if("number"==typeof t)return new e([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){var i,a=d(t);try{for(a.s();!(i=a.n()).done;)if("number"!=typeof i.value)return}catch(n){a.e(n)}finally{a.f()}switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]]}return new e(t)}}}]),e}(),Ke=function(){function e(t){p(this,e),this.name=t.name,this.available=t.available}return f(e,[{key:"toString",value:function(){return this.name}}],[{key:"fromString",value:function(t){return t?new e({name:t,available:!1}):null}}]),e}();function Je(e,t,i,a){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof i&&i>=0&&i<=255?void 0===a||"number"==typeof a&&a>=0&&a<=1?null:"Invalid rgba value [".concat([e,t,i,a].join(", "),"]: 'a' must be between 0 and 1."):"Invalid rgba value [".concat(("number"==typeof a?[e,t,i,a]:[e,t,i]).join(", "),"]: 'r', 'g', and 'b' must be between 0 and 255.")}function Qe(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof Ue)return!0;if(e instanceof Xe)return!0;if(e instanceof qe)return!0;if(e instanceof Ze)return!0;if(e instanceof Ke)return!0;if(Array.isArray(e)){var t,i=d(e);try{for(i.s();!(t=i.n()).done;)if(!Qe(t.value))return!1}catch(n){i.e(n)}finally{i.f()}return!0}if("object"==typeof e){for(var a in e)if(!Qe(e[a]))return!1;return!0}return!1}function $e(e){if(null===e)return we;if("string"==typeof e)return Se;if("boolean"==typeof e)return Ce;if("number"==typeof e)return ke;if(e instanceof Ue)return Ae;if(e instanceof Xe)return Me;if(e instanceof qe)return Ee;if(e instanceof Ze)return Ie;if(e instanceof Ke)return Pe;if(Array.isArray(e)){var t,i,a=e.length,n=d(e);try{for(n.s();!(i=n.n()).done;){var r=$e(i.value);if(t){if(t===r)continue;t=Te;break}t=r}}catch(o){n.e(o)}finally{n.f()}return De(t||Te,a)}return Oe}function et(e){var t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof Ue||e instanceof qe||e instanceof Ze||e instanceof Ke?e.toString():JSON.stringify(e)}var tt=function(){function e(t,i){p(this,e),this.type=t,this.value=i}return f(e,[{key:"evaluate",value:function(){return this.value}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!0}}],[{key:"parse",value:function(t,i){if(2!==t.length)return i.error("'literal' expression requires exactly one argument, but found ".concat(t.length-1," instead."));if(!Qe(t[1]))return i.error("invalid value");var a=t[1],n=$e(a),r=i.expectedType;return"array"!==n.kind||0!==n.N||!r||"array"!==r.kind||"number"==typeof r.N&&0!==r.N||(n=r),new e(n,a)}}]),e}(),it=function(){function e(t){p(this,e),this.name="ExpressionEvaluationError",this.message=t}return f(e,[{key:"toJSON",value:function(){return this.message}}]),e}(),at={string:Se,number:ke,boolean:Ce,object:Oe},nt=function(){function e(t,i){p(this,e),this.type=t,this.args=i}return f(e,[{key:"evaluate",value:function(e){for(var t=0;t<this.args.length;t++){var i=this.args[t].evaluate(e);if(!je(this.type,$e(i)))return i;if(t===this.args.length-1)throw new it("Expected value to be of type ".concat(ze(this.type),", but found ").concat(ze($e(i))," instead."))}throw new Error}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return this.args.every((function(e){return e.outputDefined()}))}}],[{key:"parse",value:function(t,i){if(t.length<2)return i.error("Expected at least one argument.");var a,n=1,r=t[0];if("array"===r){var o,s;if(t.length>2){var l=t[1];if("string"!=typeof l||!(l in at)||"object"===l)return i.error('The item type argument of "array" must be one of string, number, boolean',1);o=at[l],n++}else o=Te;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return i.error('The length argument to "array" must be a positive integer literal',2);s=t[2],n++}a=De(o,s)}else{if(!at[r])throw new Error("Types doesn't contain name = ".concat(r));a=at[r]}for(var c=[];n<t.length;n++){var u=i.parse(t[n],n,Te);if(!u)return null;c.push(u)}return new e(a,c)}}]),e}(),rt={"to-boolean":Ce,"to-color":Ae,"to-number":ke,"to-string":Se},ot=function(){function e(t,i){p(this,e),this.type=t,this.args=i}return f(e,[{key:"evaluate",value:function(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){var t,i,a,n=d(this.args);try{for(n.s();!(a=n.n()).done;){if(t=a.value.evaluate(e),i=null,t instanceof Ue)return t;if("string"==typeof t){var r=e.parseColor(t);if(r)return r}else if(Array.isArray(t)&&!(i=t.length<3||t.length>4?"Invalid rbga value ".concat(JSON.stringify(t),": expected an array containing either three or four numeric values."):Je(t[0],t[1],t[2],t[3])))return new Ue(t[0]/255,t[1]/255,t[2]/255,t[3])}}catch(m){n.e(m)}finally{n.f()}throw new it(i||"Could not parse color from value '".concat("string"==typeof t?t:JSON.stringify(t),"'"))}if("padding"===this.type.kind){var o,s,l=d(this.args);try{for(l.s();!(s=l.n()).done;){o=s.value.evaluate(e);var c=Ze.parse(o);if(c)return c}}catch(m){l.e(m)}finally{l.f()}throw new it("Could not parse padding from value '".concat("string"==typeof o?o:JSON.stringify(o),"'"))}if("number"===this.type.kind){var u,h=null,f=d(this.args);try{for(f.s();!(u=f.n()).done;){if(null===(h=u.value.evaluate(e)))return 0;var p=Number(h);if(!isNaN(p))return p}}catch(m){f.e(m)}finally{f.f()}throw new it("Could not convert ".concat(JSON.stringify(h)," to number."))}return"formatted"===this.type.kind?qe.fromString(et(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?Ke.fromString(et(this.args[0].evaluate(e))):et(this.args[0].evaluate(e))}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return this.args.every((function(e){return e.outputDefined()}))}}],[{key:"parse",value:function(t,i){if(t.length<2)return i.error("Expected at least one argument.");var a=t[0];if(!rt[a])throw new Error("Can't parse ".concat(a," as it is not part of the known types"));if(("to-boolean"===a||"to-string"===a)&&2!==t.length)return i.error("Expected one argument.");for(var n=rt[a],r=[],o=1;o<t.length;o++){var s=i.parse(t[o],o,Te);if(!s)return null;r.push(s)}return new e(n,r)}}]),e}(),st=["Unknown","Point","LineString","Polygon"],lt=function(){function e(){p(this,e),this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}return f(e,[{key:"id",value:function(){return this.feature&&"id"in this.feature?this.feature.id:null}},{key:"geometryType",value:function(){return this.feature?"number"==typeof this.feature.type?st[this.feature.type]:this.feature.type:null}},{key:"geometry",value:function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}},{key:"canonicalID",value:function(){return this.canonical}},{key:"properties",value:function(){return this.feature&&this.feature.properties||{}}},{key:"parseColor",value:function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=Ue.parse(e)),t}}]),e}(),ct=function(){function e(t,i,a,n){p(this,e),this.name=t,this.type=i,this._evaluate=a,this.args=n}return f(e,[{key:"evaluate",value:function(e){return this._evaluate(e,this.args)}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return!1}}],[{key:"parse",value:function(t,i){var a,n=t[0],r=e.definitions[n];if(!r)return i.error('Unknown expression "'.concat(n,'". If you wanted a literal array, use ["literal", [...]].'),0);var o,s=Array.isArray(r)?r[0]:r.type,l=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,c=l.filter((function(e){var i=h(e,1)[0];return!Array.isArray(i)||i.length===t.length-1})),f=null,p=d(c);try{for(p.s();!(o=p.n()).done;){var m=h(o.value,2),g=m[0],v=m[1];f=new Pt(i.registry,i.path,null,i.scope);for(var y=[],x=!1,b=1;b<t.length;b++){var _=t[b],w=Array.isArray(g)?g[b-1]:g.type,k=f.parse(_,1+y.length,w);if(!k){x=!0;break}y.push(k)}if(!x)if(Array.isArray(g)&&g.length!==y.length)f.error("Expected ".concat(g.length," arguments, but found ").concat(y.length," instead."));else{for(var S=0;S<y.length;S++){var C=Array.isArray(g)?g[S]:g.type,A=y[S];f.concat(S+1).checkSubtype(C,A.type)}if(0===f.errors.length)return new e(n,s,v,y)}}}catch(I){p.e(I)}finally{p.f()}if(1===c.length)(a=i.errors).push.apply(a,u(f.errors));else{for(var O=(c.length?c:l).map((function(e){var t;return t=h(e,1)[0],Array.isArray(t)?"(".concat(t.map(ze).join(", "),")"):"(".concat(ze(t.type),"...)")})).join(" | "),T=[],M=1;M<t.length;M++){var E=i.parse(t[M],1+T.length);if(!E)return null;T.push(ze(E.type))}i.error("Expected arguments of type ".concat(O,", but found (").concat(T.join(", "),") instead."))}return null}},{key:"register",value:function(t,i){for(var a in e.definitions=i,i)t[a]=e}}]),e}(),ut=function(){function e(t,i,a){p(this,e),this.type=Me,this.locale=a,this.caseSensitive=t,this.diacriticSensitive=i}return f(e,[{key:"evaluate",value:function(e){return new Xe(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}},{key:"eachChild",value:function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}},{key:"outputDefined",value:function(){return!1}}],[{key:"parse",value:function(t,i){if(2!==t.length)return i.error("Expected one argument.");var a=t[1];if("object"!=typeof a||Array.isArray(a))return i.error("Collator options argument must be an object.");var n=i.parse(void 0!==a["case-sensitive"]&&a["case-sensitive"],1,Ce);if(!n)return null;var r=i.parse(void 0!==a["diacritic-sensitive"]&&a["diacritic-sensitive"],1,Ce);if(!r)return null;var o=null;return a.locale&&!(o=i.parse(a.locale,1,Se))?null:new e(n,r,o)}}]),e}(),ht=8192;function dt(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function ft(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function pt(e,t){var i=(180+e[0])/360,a=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,n=Math.pow(2,t.z);return[Math.round(i*n*ht),Math.round(a*n*ht)]}function mt(e,t,i){var a=e[0]-t[0],n=e[1]-t[1],r=e[0]-i[0],o=e[1]-i[1];return a*o-r*n==0&&a*r<=0&&n*o<=0}function gt(e,t){for(var i,a,n,r=!1,o=0,s=t.length;o<s;o++)for(var l=t[o],c=0,u=l.length;c<u-1;c++){if(mt(e,l[c],l[c+1]))return!1;(a=l[c])[1]>(i=e)[1]!=(n=l[c+1])[1]>i[1]&&i[0]<(n[0]-a[0])*(i[1]-a[1])/(n[1]-a[1])+a[0]&&(r=!r)}return r}function vt(e,t){for(var i=0;i<t.length;i++)if(gt(e,t[i]))return!0;return!1}function yt(e,t,i,a){var n=a[0]-i[0],r=a[1]-i[1],o=(e[0]-i[0])*r-n*(e[1]-i[1]),s=(t[0]-i[0])*r-n*(t[1]-i[1]);return o>0&&s<0||o<0&&s>0}function xt(e,t,i){var a,n,r,o,s,l,c,u=d(i);try{for(u.s();!(a=u.n()).done;)for(var h=a.value,f=0;f<h.length-1;++f)if(0!=(l=[(s=h[f+1])[0]-(o=h[f])[0],s[1]-o[1]])[0]*(c=[(r=t)[0]-(n=e)[0],r[1]-n[1]])[1]-l[1]*c[0]&&yt(n,r,o,s)&&yt(o,s,n,r))return!0}catch(p){u.e(p)}finally{u.f()}return!1}function bt(e,t){for(var i=0;i<e.length;++i)if(!gt(e[i],t))return!1;for(var a=0;a<e.length-1;++a)if(xt(e[a],e[a+1],t))return!1;return!0}function _t(e,t){for(var i=0;i<t.length;i++)if(bt(e,t[i]))return!0;return!1}function wt(e,t,i){for(var a=[],n=0;n<e.length;n++){for(var r=[],o=0;o<e[n].length;o++){var s=pt(e[n][o],i);dt(t,s),r.push(s)}a.push(r)}return a}function kt(e,t,i){for(var a=[],n=0;n<e.length;n++){var r=wt(e[n],t,i);a.push(r)}return a}function St(e,t,i,a){if(e[0]<i[0]||e[0]>i[2]){var n=.5*a,r=e[0]-i[0]>n?-a:i[0]-e[0]>n?a:0;0===r&&(r=e[0]-i[2]>n?-a:i[2]-e[0]>n?a:0),e[0]+=r}dt(t,e)}function Ct(e,t,i,a){var n,r=Math.pow(2,a.z)*ht,o=[a.x*ht,a.y*ht],s=[],l=d(e);try{for(l.s();!(n=l.n()).done;){var c,u=n.value,h=d(u);try{for(h.s();!(c=h.n()).done;){var f=c.value,p=[f.x+o[0],f.y+o[1]];St(p,t,i,r),s.push(p)}}catch(m){h.e(m)}finally{h.f()}}}catch(m){l.e(m)}finally{l.f()}return s}function At(e,t,i,a){var n,r,o=Math.pow(2,a.z)*ht,s=[a.x*ht,a.y*ht],l=[],c=d(e);try{for(c.s();!(n=c.n()).done;){var u,h=n.value,f=[],p=d(h);try{for(p.s();!(u=p.n()).done;){var m=u.value,g=[m.x+s[0],m.y+s[1]];dt(t,g),f.push(g)}}catch(w){p.e(w)}finally{p.f()}l.push(f)}}catch(w){c.e(w)}finally{c.f()}if(t[2]-t[0]<=o/2){(r=t)[0]=r[1]=1/0,r[2]=r[3]=-1/0;var v,y=d(l);try{for(y.s();!(v=y.n()).done;){var x,b=v.value,_=d(b);try{for(_.s();!(x=_.n()).done;)St(x.value,t,i,o)}catch(w){_.e(w)}finally{_.f()}}}catch(w){y.e(w)}finally{y.f()}}return l}var Ot=function(){function e(t,i){p(this,e),this.type=Ce,this.geojson=t,this.geometries=i}return f(e,[{key:"evaluate",value:function(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){var i=[1/0,1/0,-1/0,-1/0],a=[1/0,1/0,-1/0,-1/0],n=e.canonicalID();if("Polygon"===t.type){var r=wt(t.coordinates,a,n),o=Ct(e.geometry(),i,a,n);if(!ft(i,a))return!1;var s,l=d(o);try{for(l.s();!(s=l.n()).done;)if(!gt(s.value,r))return!1}catch(p){l.e(p)}finally{l.f()}}if("MultiPolygon"===t.type){var c=kt(t.coordinates,a,n),u=Ct(e.geometry(),i,a,n);if(!ft(i,a))return!1;var h,f=d(u);try{for(f.s();!(h=f.n()).done;)if(!vt(h.value,c))return!1}catch(p){f.e(p)}finally{f.f()}}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){var i=[1/0,1/0,-1/0,-1/0],a=[1/0,1/0,-1/0,-1/0],n=e.canonicalID();if("Polygon"===t.type){var r=wt(t.coordinates,a,n),o=At(e.geometry(),i,a,n);if(!ft(i,a))return!1;var s,l=d(o);try{for(l.s();!(s=l.n()).done;)if(!bt(s.value,r))return!1}catch(p){l.e(p)}finally{l.f()}}if("MultiPolygon"===t.type){var c=kt(t.coordinates,a,n),u=At(e.geometry(),i,a,n);if(!ft(i,a))return!1;var h,f=d(u);try{for(f.s();!(h=f.n()).done;)if(!_t(h.value,c))return!1}catch(p){f.e(p)}finally{f.f()}}return!0}(e,this.geometries)}return!1}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!0}}],[{key:"parse",value:function(t,i){if(2!==t.length)return i.error("'within' expression requires exactly one argument, but found ".concat(t.length-1," instead."));if(Qe(t[1])){var a=t[1];if("FeatureCollection"===a.type)for(var n=0;n<a.features.length;++n){var r=a.features[n].geometry.type;if("Polygon"===r||"MultiPolygon"===r)return new e(a,a.features[n].geometry)}else if("Feature"===a.type){var o=a.geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new e(a,a.geometry)}else if("Polygon"===a.type||"MultiPolygon"===a.type)return new e(a,a)}return i.error("'within' expression requires valid geojson object that contains polygon geometry type.")}}]),e}();function Tt(e){if(e instanceof ct){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof Ot)return!1;var t=!0;return e.eachChild((function(e){t&&!Tt(e)&&(t=!1)})),t}function Mt(e){if(e instanceof ct&&"feature-state"===e.name)return!1;var t=!0;return e.eachChild((function(e){t&&!Mt(e)&&(t=!1)})),t}function Et(e,t){if(e instanceof ct&&t.indexOf(e.name)>=0)return!1;var i=!0;return e.eachChild((function(e){i&&!Et(e,t)&&(i=!1)})),i}var It=function(){function e(t,i){p(this,e),this.type=i.type,this.name=t,this.boundExpression=i}return f(e,[{key:"evaluate",value:function(e){return this.boundExpression.evaluate(e)}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!1}}],[{key:"parse",value:function(t,i){if(2!==t.length||"string"!=typeof t[1])return i.error("'var' expression requires exactly one string literal argument.");var a=t[1];return i.scope.has(a)?new e(a,i.scope.get(a)):i.error('Unknown variable "'.concat(a,'". Make sure "').concat(a,'" has been bound in an enclosing "let" expression before using it.'),1)}}]),e}(),Pt=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new _e,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];p(this,e),this.registry=t,this.path=i,this.key=i.map((function(e){return"[".concat(e,"]")})).join(""),this.scope=n,this.errors=r,this.expectedType=a}return f(e,[{key:"parse",value:function(e,t,i,a){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return t?this.concat(t,i,a)._parse(e,n):this._parse(e,n)}},{key:"_parse",value:function(e,t){function i(e,t,i){return"assert"===i?new nt(t,[e]):"coerce"===i?new ot(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var a=e[0];if("string"!=typeof a)return this.error("Expression name must be a string, but found ".concat(typeof a,' instead. If you wanted a literal array, use ["literal", [...]].'),0),null;var n=this.registry[a];if(n){var r=n.parse(e,this);if(!r)return null;if(this.expectedType){var o=this.expectedType,s=r.type;if("string"!==o.kind&&"number"!==o.kind&&"boolean"!==o.kind&&"object"!==o.kind&&"array"!==o.kind||"value"!==s.kind)if("color"!==o.kind&&"formatted"!==o.kind&&"resolvedImage"!==o.kind||"value"!==s.kind&&"string"!==s.kind)if("padding"!==o.kind||"value"!==s.kind&&"number"!==s.kind&&"array"!==s.kind){if(this.checkSubtype(o,s))return null}else r=i(r,o,t.typeAnnotation||"coerce");else r=i(r,o,t.typeAnnotation||"coerce");else r=i(r,o,t.typeAnnotation||"assert")}if(!(r instanceof tt)&&"resolvedImage"!==r.type.kind&&function e(t){if(t instanceof It)return e(t.boundExpression);if(t instanceof ct&&"error"===t.name)return!1;if(t instanceof ut)return!1;if(t instanceof Ot)return!1;var i=t instanceof ot||t instanceof nt,a=!0;return t.eachChild((function(t){a=i?a&&e(t):a&&t instanceof tt})),!!a&&Tt(t)&&Et(t,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(r)){var l=new lt;try{r=new tt(r.type,r.evaluate(l))}catch(e){return this.error(e.message),null}}return r}return this.error('Unknown expression "'.concat(a,'". If you wanted a literal array, use ["literal", [...]].'),0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found ".concat(typeof e," instead."))}},{key:"concat",value:function(t,i,a){var n="number"==typeof t?this.path.concat(t):this.path,r=a?this.scope.concat(a):this.scope;return new e(this.registry,n,i||null,r,this.errors)}},{key:"error",value:function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];var n="".concat(this.key).concat(i.map((function(e){return"[".concat(e,"]")})).join(""));this.errors.push(new be(n,e))}},{key:"checkSubtype",value:function(e,t){var i=je(e,t);return i&&this.error(i),i}}]),e}();function Dt(e,t){for(var i,a,n=e.length-1,r=0,o=n,s=0;r<=o;)if(i=e[s=Math.floor((r+o)/2)],a=e[s+1],i<=t){if(s===n||t<a)return s;r=s+1}else{if(!(i>t))throw new it("Input is not a number.");o=s-1}return 0}var zt=function(){function e(t,i,a){p(this,e),this.type=t,this.input=i,this.labels=[],this.outputs=[];var n,r=d(a);try{for(r.s();!(n=r.n()).done;){var o=h(n.value,2),s=o[0],l=o[1];this.labels.push(s),this.outputs.push(l)}}catch(c){r.e(c)}finally{r.f()}}return f(e,[{key:"evaluate",value:function(e){var t=this.labels,i=this.outputs;if(1===t.length)return i[0].evaluate(e);var a=this.input.evaluate(e);if(a<=t[0])return i[0].evaluate(e);var n=t.length;return a>=t[n-1]?i[n-1].evaluate(e):i[Dt(t,a)].evaluate(e)}},{key:"eachChild",value:function(e){e(this.input);var t,i=d(this.outputs);try{for(i.s();!(t=i.n()).done;)e(t.value)}catch(a){i.e(a)}finally{i.f()}}},{key:"outputDefined",value:function(){return this.outputs.every((function(e){return e.outputDefined()}))}}],[{key:"parse",value:function(t,i){if(t.length-1<4)return i.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if((t.length-1)%2!=0)return i.error("Expected an even number of arguments.");var a=i.parse(t[1],1,ke);if(!a)return null;var n=[],r=null;i.expectedType&&"value"!==i.expectedType.kind&&(r=i.expectedType);for(var o=1;o<t.length;o+=2){var s=1===o?-1/0:t[o],l=t[o+1],c=o,u=o+1;if("number"!=typeof s)return i.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',c);if(n.length&&n[n.length-1][0]>=s)return i.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',c);var h=i.parse(l,u,r);if(!h)return null;r=r||h.type,n.push([s,h])}return new e(r,a,n)}}]),e}();function Lt(e,t,i){return e*(1-i)+t*i}var jt=Object.freeze({__proto__:null,number:Lt,color:function(e,t,i){return new Ue(Lt(e.r,t.r,i),Lt(e.g,t.g,i),Lt(e.b,t.b,i),Lt(e.a,t.a,i))},array:function(e,t,i){return e.map((function(e,a){return Lt(e,t[a],i)}))},padding:function(e,t,i){var a=e.values,n=t.values;return new Ze([Lt(a[0],n[0],i),Lt(a[1],n[1],i),Lt(a[2],n[2],i),Lt(a[3],n[3],i)])}}),Rt=6/29*3*(6/29),Ft=Math.PI/180,Bt=180/Math.PI;function Nt(e){return e>.008856451679035631?Math.pow(e,1/3):e/Rt+4/29}function Vt(e){return e>6/29?e*e*e:Rt*(e-4/29)}function Yt(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Wt(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Ht(e){var t=Wt(e.r),i=Wt(e.g),a=Wt(e.b),n=Nt((.4124564*t+.3575761*i+.1804375*a)/.95047),r=Nt((.2126729*t+.7151522*i+.072175*a)/1);return{l:116*r-16,a:500*(n-r),b:200*(r-Nt((.0193339*t+.119192*i+.9503041*a)/1.08883)),alpha:e.a}}function Ut(e){var t=(e.l+16)/116,i=isNaN(e.a)?t:t+e.a/500,a=isNaN(e.b)?t:t-e.b/200;return t=1*Vt(t),i=.95047*Vt(i),a=1.08883*Vt(a),new Ue(Yt(3.2404542*i-1.5371385*t-.4985314*a),Yt(-.969266*i+1.8760108*t+.041556*a),Yt(.0556434*i-.2040259*t+1.0572252*a),e.alpha)}function Xt(e,t,i){var a=t-e;return e+i*(a>180||a<-180?a-360*Math.round(a/360):a)}var Gt={forward:Ht,reverse:Ut,interpolate:function(e,t,i){return{l:Lt(e.l,t.l,i),a:Lt(e.a,t.a,i),b:Lt(e.b,t.b,i),alpha:Lt(e.alpha,t.alpha,i)}}},qt={forward:function(e){var t=Ht(e),i=t.l,a=t.a,n=t.b,r=Math.atan2(n,a)*Bt;return{h:r<0?r+360:r,c:Math.sqrt(a*a+n*n),l:i,alpha:e.a}},reverse:function(e){var t=e.h*Ft,i=e.c;return Ut({l:e.l,a:Math.cos(t)*i,b:Math.sin(t)*i,alpha:e.alpha})},interpolate:function(e,t,i){return{h:Xt(e.h,t.h,i),c:Lt(e.c,t.c,i),l:Lt(e.l,t.l,i),alpha:Lt(e.alpha,t.alpha,i)}}},Zt=Object.freeze({__proto__:null,lab:Gt,hcl:qt}),Kt=function(){function e(t,i,a,n,r){p(this,e),this.type=t,this.operator=i,this.interpolation=a,this.input=n,this.labels=[],this.outputs=[];var o,s=d(r);try{for(s.s();!(o=s.n()).done;){var l=h(o.value,2),c=l[0],u=l[1];this.labels.push(c),this.outputs.push(u)}}catch(f){s.e(f)}finally{s.f()}}return f(e,[{key:"evaluate",value:function(t){var i=this.labels,a=this.outputs;if(1===i.length)return a[0].evaluate(t);var n=this.input.evaluate(t);if(n<=i[0])return a[0].evaluate(t);var r=i.length;if(n>=i[r-1])return a[r-1].evaluate(t);var o=Dt(i,n),s=e.interpolationFactor(this.interpolation,n,i[o],i[o+1]),l=a[o].evaluate(t),c=a[o+1].evaluate(t);return"interpolate"===this.operator?jt[this.type.kind.toLowerCase()](l,c,s):"interpolate-hcl"===this.operator?qt.reverse(qt.interpolate(qt.forward(l),qt.forward(c),s)):Gt.reverse(Gt.interpolate(Gt.forward(l),Gt.forward(c),s))}},{key:"eachChild",value:function(e){e(this.input);var t,i=d(this.outputs);try{for(i.s();!(t=i.n()).done;)e(t.value)}catch(a){i.e(a)}finally{i.f()}}},{key:"outputDefined",value:function(){return this.outputs.every((function(e){return e.outputDefined()}))}}],[{key:"interpolationFactor",value:function(e,i,a,n){var r=0;if("exponential"===e.name)r=Jt(i,e.base,a,n);else if("linear"===e.name)r=Jt(i,1,a,n);else if("cubic-bezier"===e.name){var o=e.controlPoints;r=new t(o[0],o[1],o[2],o[3]).solve(Jt(i,1,a,n))}return r}},{key:"parse",value:function(t,i){var a=c(t),n=a[0],r=a[1],o=a[2],s=a.slice(3);if(!Array.isArray(r)||0===r.length)return i.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){var l=r[1];if("number"!=typeof l)return i.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:l}}else{if("cubic-bezier"!==r[0])return i.error("Unknown interpolation type ".concat(String(r[0])),1,0);var u=r.slice(1);if(4!==u.length||u.some((function(e){return"number"!=typeof e||e<0||e>1})))return i.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:u}}if(t.length-1<4)return i.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if((t.length-1)%2!=0)return i.error("Expected an even number of arguments.");if(!(o=i.parse(o,2,ke)))return null;var h=[],d=null;"interpolate-hcl"===n||"interpolate-lab"===n?d=Ae:i.expectedType&&"value"!==i.expectedType.kind&&(d=i.expectedType);for(var f=0;f<s.length;f+=2){var p=s[f],m=s[f+1],g=f+3,v=f+4;if("number"!=typeof p)return i.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',g);if(h.length&&h[h.length-1][0]>=p)return i.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',g);var y=i.parse(m,v,d);if(!y)return null;d=d||y.type,h.push([p,y])}return"number"===d.kind||"color"===d.kind||"padding"===d.kind||"array"===d.kind&&"number"===d.itemType.kind&&"number"==typeof d.N?new e(d,n,r,o,h):i.error("Type ".concat(ze(d)," is not interpolatable."))}}]),e}();function Jt(e,t,i,a){var n=a-i,r=e-i;return 0===n?0:1===t?r/n:(Math.pow(t,r)-1)/(Math.pow(t,n)-1)}var Qt=function(){function e(t,i){p(this,e),this.type=t,this.args=i}return f(e,[{key:"evaluate",value:function(e){var t,i,a=null,n=0,r=d(this.args);try{for(r.s();!(i=r.n()).done;){var o=i.value;if(n++,(a=o.evaluate(e))&&a instanceof Ke&&!a.available&&(t||(t=a.name),a=null,n===this.args.length&&(a=t)),null!==a)break}}catch(s){r.e(s)}finally{r.f()}return a}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return this.args.every((function(e){return e.outputDefined()}))}}],[{key:"parse",value:function(t,i){if(t.length<2)return i.error("Expectected at least one argument.");var a=null,n=i.expectedType;n&&"value"!==n.kind&&(a=n);var r,o=[],s=d(t.slice(1));try{for(s.s();!(r=s.n()).done;){var l=r.value,c=i.parse(l,1+o.length,a,void 0,{typeAnnotation:"omit"});if(!c)return null;a=a||c.type,o.push(c)}}catch(u){s.e(u)}finally{s.f()}if(!a)throw new Error("No output type");return new e(n&&o.some((function(e){return je(n,e.type)}))?Te:a,o)}}]),e}(),$t=function(){function e(t,i){p(this,e),this.type=i.type,this.bindings=[].concat(t),this.result=i}return f(e,[{key:"evaluate",value:function(e){return this.result.evaluate(e)}},{key:"eachChild",value:function(e){var t,i=d(this.bindings);try{for(i.s();!(t=i.n()).done;)e(t.value[1])}catch(a){i.e(a)}finally{i.f()}e(this.result)}},{key:"outputDefined",value:function(){return this.result.outputDefined()}}],[{key:"parse",value:function(t,i){if(t.length<4)return i.error("Expected at least 3 arguments, but found ".concat(t.length-1," instead."));for(var a=[],n=1;n<t.length-1;n+=2){var r=t[n];if("string"!=typeof r)return i.error("Expected string, but found ".concat(typeof r," instead."),n);if(/[^a-zA-Z0-9_]/.test(r))return i.error("Variable names must contain only alphanumeric characters or '_'.",n);var o=i.parse(t[n+1],n+1);if(!o)return null;a.push([r,o])}var s=i.parse(t[t.length-1],t.length-1,i.expectedType,a);return s?new e(a,s):null}}]),e}(),ei=function(){function e(t,i,a){p(this,e),this.type=t,this.index=i,this.input=a}return f(e,[{key:"evaluate",value:function(e){var t=this.index.evaluate(e),i=this.input.evaluate(e);if(t<0)throw new it("Array index out of bounds: ".concat(t," < 0."));if(t>=i.length)throw new it("Array index out of bounds: ".concat(t," > ").concat(i.length-1,"."));if(t!==Math.floor(t))throw new it("Array index must be an integer, but found ".concat(t," instead."));return i[t]}},{key:"eachChild",value:function(e){e(this.index),e(this.input)}},{key:"outputDefined",value:function(){return!1}}],[{key:"parse",value:function(t,i){if(3!==t.length)return i.error("Expected 2 arguments, but found ".concat(t.length-1," instead."));var a=i.parse(t[1],1,ke),n=i.parse(t[2],2,De(i.expectedType||Te));return a&&n?new e(n.type.itemType,a,n):null}}]),e}(),ti=function(){function e(t,i){p(this,e),this.type=Ce,this.needle=t,this.haystack=i}return f(e,[{key:"evaluate",value:function(e){var t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!i)return!1;if(!Fe(t,["boolean","string","number","null"]))throw new it("Expected first argument to be of type boolean, string, number or null, but found ".concat(ze($e(t))," instead."));if(!Fe(i,["string","array"]))throw new it("Expected second argument to be of type array or string, but found ".concat(ze($e(i))," instead."));return i.indexOf(t)>=0}},{key:"eachChild",value:function(e){e(this.needle),e(this.haystack)}},{key:"outputDefined",value:function(){return!0}}],[{key:"parse",value:function(t,i){if(3!==t.length)return i.error("Expected 2 arguments, but found ".concat(t.length-1," instead."));var a=i.parse(t[1],1,Te),n=i.parse(t[2],2,Te);return a&&n?Re(a.type,[Ce,Se,ke,we,Te])?new e(a,n):i.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(ze(a.type)," instead")):null}}]),e}(),ii=function(){function e(t,i,a){p(this,e),this.type=ke,this.needle=t,this.haystack=i,this.fromIndex=a}return f(e,[{key:"evaluate",value:function(e){var t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!Fe(t,["boolean","string","number","null"]))throw new it("Expected first argument to be of type boolean, string, number or null, but found ".concat(ze($e(t))," instead."));if(!Fe(i,["string","array"]))throw new it("Expected second argument to be of type array or string, but found ".concat(ze($e(i))," instead."));if(this.fromIndex){var a=this.fromIndex.evaluate(e);return i.indexOf(t,a)}return i.indexOf(t)}},{key:"eachChild",value:function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}},{key:"outputDefined",value:function(){return!1}}],[{key:"parse",value:function(t,i){if(t.length<=2||t.length>=5)return i.error("Expected 3 or 4 arguments, but found ".concat(t.length-1," instead."));var a=i.parse(t[1],1,Te),n=i.parse(t[2],2,Te);if(!a||!n)return null;if(!Re(a.type,[Ce,Se,ke,we,Te]))return i.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(ze(a.type)," instead"));if(4===t.length){var r=i.parse(t[3],3,ke);return r?new e(a,n,r):null}return new e(a,n)}}]),e}(),ai=function(){function e(t,i,a,n,r,o){p(this,e),this.inputType=t,this.type=i,this.input=a,this.cases=n,this.outputs=r,this.otherwise=o}return f(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e);return($e(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}},{key:"eachChild",value:function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}},{key:"outputDefined",value:function(){return this.outputs.every((function(e){return e.outputDefined()}))&&this.otherwise.outputDefined()}}],[{key:"parse",value:function(t,i){if(t.length<5)return i.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if(t.length%2!=1)return i.error("Expected an even number of arguments.");var a,n;i.expectedType&&"value"!==i.expectedType.kind&&(n=i.expectedType);for(var r={},o=[],s=2;s<t.length-1;s+=2){var l=t[s],c=t[s+1];Array.isArray(l)||(l=[l]);var u=i.concat(s);if(0===l.length)return u.error("Expected at least one branch label.");var h,f=d(l);try{for(f.s();!(h=f.n()).done;){var p=h.value;if("number"!=typeof p&&"string"!=typeof p)return u.error("Branch labels must be numbers or strings.");if("number"==typeof p&&Math.abs(p)>Number.MAX_SAFE_INTEGER)return u.error("Branch labels must be integers no larger than ".concat(Number.MAX_SAFE_INTEGER,"."));if("number"==typeof p&&Math.floor(p)!==p)return u.error("Numeric branch labels must be integer values.");if(a){if(u.checkSubtype(a,$e(p)))return null}else a=$e(p);if(void 0!==r[String(p)])return u.error("Branch labels must be unique.");r[String(p)]=o.length}}catch(y){f.e(y)}finally{f.f()}var m=i.parse(c,s,n);if(!m)return null;n=n||m.type,o.push(m)}var g=i.parse(t[1],1,Te);if(!g)return null;var v=i.parse(t[t.length-1],t.length-1,n);return v?"value"!==g.type.kind&&i.concat(1).checkSubtype(a,g.type)?null:new e(a,n,g,r,o,v):null}}]),e}(),ni=function(){function e(t,i,a){p(this,e),this.type=t,this.branches=i,this.otherwise=a}return f(e,[{key:"evaluate",value:function(e){var t,i=d(this.branches);try{for(i.s();!(t=i.n()).done;){var a=h(t.value,2),n=a[0],r=a[1];if(n.evaluate(e))return r.evaluate(e)}}catch(o){i.e(o)}finally{i.f()}return this.otherwise.evaluate(e)}},{key:"eachChild",value:function(e){var t,i=d(this.branches);try{for(i.s();!(t=i.n()).done;){var a=h(t.value,2),n=a[0],r=a[1];e(n),e(r)}}catch(o){i.e(o)}finally{i.f()}e(this.otherwise)}},{key:"outputDefined",value:function(){return this.branches.every((function(e){var t=h(e,2);return t[0],t[1].outputDefined()}))&&this.otherwise.outputDefined()}}],[{key:"parse",value:function(t,i){if(t.length<4)return i.error("Expected at least 3 arguments, but found only ".concat(t.length-1,"."));if(t.length%2!=0)return i.error("Expected an odd number of arguments.");var a;i.expectedType&&"value"!==i.expectedType.kind&&(a=i.expectedType);for(var n=[],r=1;r<t.length-1;r+=2){var o=i.parse(t[r],r,Ce);if(!o)return null;var s=i.parse(t[r+1],r+1,a);if(!s)return null;n.push([o,s]),a=a||s.type}var l=i.parse(t[t.length-1],t.length-1,a);if(!l)return null;if(!a)throw new Error("Can't infer output type");return new e(a,n,l)}}]),e}(),ri=function(){function e(t,i,a,n){p(this,e),this.type=t,this.input=i,this.beginIndex=a,this.endIndex=n}return f(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e),i=this.beginIndex.evaluate(e);if(!Fe(t,["string","array"]))throw new it("Expected first argument to be of type array or string, but found ".concat(ze($e(t))," instead."));if(this.endIndex){var a=this.endIndex.evaluate(e);return t.slice(i,a)}return t.slice(i)}},{key:"eachChild",value:function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}},{key:"outputDefined",value:function(){return!1}}],[{key:"parse",value:function(t,i){if(t.length<=2||t.length>=5)return i.error("Expected 3 or 4 arguments, but found ".concat(t.length-1," instead."));var a=i.parse(t[1],1,Te),n=i.parse(t[2],2,ke);if(!a||!n)return null;if(!Re(a.type,[De(Te),Se,Te]))return i.error("Expected first argument to be of type array or string, but found ".concat(ze(a.type)," instead"));if(4===t.length){var r=i.parse(t[3],3,ke);return r?new e(a.type,a,n,r):null}return new e(a.type,a,n)}}]),e}();function oi(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function si(e,t,i,a){return 0===a.compare(t,i)}function li(e,t,i){var a="=="!==e&&"!="!==e;return function(){function n(e,t,i){p(this,n),this.type=Ce,this.lhs=e,this.rhs=t,this.collator=i,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}return f(n,[{key:"evaluate",value:function(n){var r=this.lhs.evaluate(n),o=this.rhs.evaluate(n);if(a&&this.hasUntypedArgument){var s=$e(r),l=$e(o);if(s.kind!==l.kind||"string"!==s.kind&&"number"!==s.kind)throw new it('Expected arguments for "'.concat(e,'" to be (string, string) or (number, number), but found (').concat(s.kind,", ").concat(l.kind,") instead."))}if(this.collator&&!a&&this.hasUntypedArgument){var c=$e(r),u=$e(o);if("string"!==c.kind||"string"!==u.kind)return t(n,r,o)}return this.collator?i(n,r,o,this.collator.evaluate(n)):t(n,r,o)}},{key:"eachChild",value:function(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}},{key:"outputDefined",value:function(){return!0}}],[{key:"parse",value:function(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");var i=e[0],r=t.parse(e[1],1,Te);if(!r)return null;if(!oi(i,r.type))return t.concat(1).error('"'.concat(i,"\" comparisons are not supported for type '").concat(ze(r.type),"'."));var o=t.parse(e[2],2,Te);if(!o)return null;if(!oi(i,o.type))return t.concat(2).error('"'.concat(i,"\" comparisons are not supported for type '").concat(ze(o.type),"'."));if(r.type.kind!==o.type.kind&&"value"!==r.type.kind&&"value"!==o.type.kind)return t.error("Cannot compare types '".concat(ze(r.type),"' and '").concat(ze(o.type),"'."));a&&("value"===r.type.kind&&"value"!==o.type.kind?r=new nt(o.type,[r]):"value"!==r.type.kind&&"value"===o.type.kind&&(o=new nt(r.type,[o])));var s=null;if(4===e.length){if("string"!==r.type.kind&&"string"!==o.type.kind&&"value"!==r.type.kind&&"value"!==o.type.kind)return t.error("Cannot use collator to compare non-string types.");if(!(s=t.parse(e[3],3,Me)))return null}return new n(r,o,s)}}]),n}()}var ci=li("==",(function(e,t,i){return t===i}),si),ui=li("!=",(function(e,t,i){return t!==i}),(function(e,t,i,a){return!si(0,t,i,a)})),hi=li("<",(function(e,t,i){return t<i}),(function(e,t,i,a){return a.compare(t,i)<0})),di=li(">",(function(e,t,i){return t>i}),(function(e,t,i,a){return a.compare(t,i)>0})),fi=li("<=",(function(e,t,i){return t<=i}),(function(e,t,i,a){return a.compare(t,i)<=0})),pi=li(">=",(function(e,t,i){return t>=i}),(function(e,t,i,a){return a.compare(t,i)>=0})),mi=function(){function e(t,i,a,n,r){p(this,e),this.type=Se,this.number=t,this.locale=i,this.currency=a,this.minFractionDigits=n,this.maxFractionDigits=r}return f(e,[{key:"evaluate",value:function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}},{key:"eachChild",value:function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}},{key:"outputDefined",value:function(){return!1}}],[{key:"parse",value:function(t,i){if(3!==t.length)return i.error("Expected two arguments.");var a=i.parse(t[1],1,ke);if(!a)return null;var n=t[2];if("object"!=typeof n||Array.isArray(n))return i.error("NumberFormat options argument must be an object.");var r=null;if(n.locale&&!(r=i.parse(n.locale,1,Se)))return null;var o=null;if(n.currency&&!(o=i.parse(n.currency,1,Se)))return null;var s=null;if(n["min-fraction-digits"]&&!(s=i.parse(n["min-fraction-digits"],1,ke)))return null;var l=null;return n["max-fraction-digits"]&&!(l=i.parse(n["max-fraction-digits"],1,ke))?null:new e(a,r,o,s,l)}}]),e}(),gi=function(){function e(t){p(this,e),this.type=Ee,this.sections=t}return f(e,[{key:"evaluate",value:function(e){return new qe(this.sections.map((function(t){var i=t.content.evaluate(e);return $e(i)===Pe?new Ge("",i,null,null,null):new Ge(et(i),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)})))}},{key:"eachChild",value:function(e){var t,i=d(this.sections);try{for(i.s();!(t=i.n()).done;){var a=t.value;e(a.content),a.scale&&e(a.scale),a.font&&e(a.font),a.textColor&&e(a.textColor)}}catch(n){i.e(n)}finally{i.f()}}},{key:"outputDefined",value:function(){return!1}}],[{key:"parse",value:function(t,i){if(t.length<2)return i.error("Expected at least one argument.");var a=t[1];if(!Array.isArray(a)&&"object"==typeof a)return i.error("First argument must be an image or text section.");for(var n=[],r=!1,o=1;o<=t.length-1;++o){var s=t[o];if(r&&"object"==typeof s&&!Array.isArray(s)){r=!1;var l=null;if(s["font-scale"]&&!(l=i.parse(s["font-scale"],1,ke)))return null;var c=null;if(s["text-font"]&&!(c=i.parse(s["text-font"],1,De(Se))))return null;var u=null;if(s["text-color"]&&!(u=i.parse(s["text-color"],1,Ae)))return null;var h=n[n.length-1];h.scale=l,h.font=c,h.textColor=u}else{var d=i.parse(t[o],1,Te);if(!d)return null;var f=d.type.kind;if("string"!==f&&"value"!==f&&"null"!==f&&"resolvedImage"!==f)return i.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");r=!0,n.push({content:d,scale:null,font:null,textColor:null})}}return new e(n)}}]),e}(),vi={"==":ci,"!=":ui,">":di,"<":hi,">=":pi,"<=":fi,array:nt,at:ei,boolean:nt,case:ni,coalesce:Qt,collator:ut,format:gi,image:function(){function e(t){p(this,e),this.type=Pe,this.input=t}return f(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e),i=Ke.fromString(t);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(t)>-1),i}},{key:"eachChild",value:function(e){e(this.input)}},{key:"outputDefined",value:function(){return!1}}],[{key:"parse",value:function(t,i){if(2!==t.length)return i.error("Expected two arguments.");var a=i.parse(t[1],1,Se);return a?new e(a):i.error("No image name provided.")}}]),e}(),in:ti,"index-of":ii,interpolate:Kt,"interpolate-hcl":Kt,"interpolate-lab":Kt,length:function(){function e(t){p(this,e),this.type=ke,this.input=t}return f(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new it("Expected value to be of type string or array, but found ".concat(ze($e(t))," instead."))}},{key:"eachChild",value:function(e){e(this.input)}},{key:"outputDefined",value:function(){return!1}}],[{key:"parse",value:function(t,i){if(2!==t.length)return i.error("Expected 1 argument, but found ".concat(t.length-1," instead."));var a=i.parse(t[1],1);return a?"array"!==a.type.kind&&"string"!==a.type.kind&&"value"!==a.type.kind?i.error("Expected argument of type string or array, but found ".concat(ze(a.type)," instead.")):new e(a):null}}]),e}(),let:$t,literal:tt,match:ai,number:nt,"number-format":mi,object:nt,slice:ri,step:zt,string:nt,"to-boolean":ot,"to-color":ot,"to-number":ot,"to-string":ot,var:It,within:Ot};function yi(e,t){var i=h(t,4),a=i[0],n=i[1],r=i[2],o=i[3];a=a.evaluate(e),n=n.evaluate(e),r=r.evaluate(e);var s=o?o.evaluate(e):1,l=Je(a,n,r,s);if(l)throw new it(l);return new Ue(a/255*s,n/255*s,r/255*s,s)}function xi(e,t){return e in t}function bi(e,t){var i=t[e];return void 0===i?null:i}function _i(e){return{type:e}}function wi(e){return{result:"success",value:e}}function ki(e){return{result:"error",value:e}}function Si(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function Ci(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function Ai(e){return!!e.expression&&e.expression.interpolated}function Oi(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function Ti(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function Mi(e){return e}function Ei(e,t,i){return void 0!==e?e:void 0!==t?t:void 0!==i?i:void 0}function Ii(e,t,i,a,n){return Ei(typeof i===n?a[i]:void 0,e.default,t.default)}function Pi(e,t,i){if("number"!==Oi(i))return Ei(e.default,t.default);var a=e.stops.length;if(1===a)return e.stops[0][1];if(i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[a-1][0])return e.stops[a-1][1];var n=Dt(e.stops.map((function(e){return e[0]})),i);return e.stops[n][1]}function Di(e,t,i){var a=void 0!==e.base?e.base:1;if("number"!==Oi(i))return Ei(e.default,t.default);var n=e.stops.length;if(1===n)return e.stops[0][1];if(i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[n-1][0])return e.stops[n-1][1];var r=Dt(e.stops.map((function(e){return e[0]})),i),o=function(e,t,i,a){var n=a-i,r=e-i;return 0===n?0:1===t?r/n:(Math.pow(t,r)-1)/(Math.pow(t,n)-1)}(i,a,e.stops[r][0],e.stops[r+1][0]),s=e.stops[r][1],l=e.stops[r+1][1],c=jt[t.type]||Mi;if(e.colorSpace&&"rgb"!==e.colorSpace){var u=Zt[e.colorSpace];c=function(e,t){return u.reverse(u.interpolate(u.forward(e),u.forward(t),o))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var a=s.evaluate.apply(void 0,t),n=l.evaluate.apply(void 0,t);if(void 0!==a&&void 0!==n)return c(a,n,o)}}:c(s,l,o)}function zi(e,t,i){switch(t.type){case"color":i=Ue.parse(i);break;case"formatted":i=qe.fromString(i.toString());break;case"resolvedImage":i=Ke.fromString(i.toString());break;case"padding":i=Ze.parse(i);break;default:Oi(i)===t.type||"enum"===t.type&&t.values[i]||(i=void 0)}return Ei(i,e.default,t.default)}ct.register(vi,{error:[{kind:"error"},[Se],function(e,t){var i=h(t,1)[0];throw new it(i.evaluate(e))}],typeof:[Se,[Te],function(e,t){return ze($e(h(t,1)[0].evaluate(e)))}],"to-rgba":[De(ke,4),[Ae],function(e,t){return h(t,1)[0].evaluate(e).toArray()}],rgb:[Ae,[ke,ke,ke],yi],rgba:[Ae,[ke,ke,ke,ke],yi],has:{type:Ce,overloads:[[[Se],function(e,t){return xi(h(t,1)[0].evaluate(e),e.properties())}],[[Se,Oe],function(e,t){var i=h(t,2),a=i[0],n=i[1];return xi(a.evaluate(e),n.evaluate(e))}]]},get:{type:Te,overloads:[[[Se],function(e,t){return bi(h(t,1)[0].evaluate(e),e.properties())}],[[Se,Oe],function(e,t){var i=h(t,2),a=i[0],n=i[1];return bi(a.evaluate(e),n.evaluate(e))}]]},"feature-state":[Te,[Se],function(e,t){return bi(h(t,1)[0].evaluate(e),e.featureState||{})}],properties:[Oe,[],function(e){return e.properties()}],"geometry-type":[Se,[],function(e){return e.geometryType()}],id:[Te,[],function(e){return e.id()}],zoom:[ke,[],function(e){return e.globals.zoom}],"heatmap-density":[ke,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[ke,[],function(e){return e.globals.lineProgress||0}],accumulated:[Te,[],function(e){return void 0===e.globals.accumulated?null:e.globals.accumulated}],"+":[ke,_i(ke),function(e,t){var i,a=0,n=d(t);try{for(n.s();!(i=n.n()).done;)a+=i.value.evaluate(e)}catch(r){n.e(r)}finally{n.f()}return a}],"*":[ke,_i(ke),function(e,t){var i,a=1,n=d(t);try{for(n.s();!(i=n.n()).done;)a*=i.value.evaluate(e)}catch(r){n.e(r)}finally{n.f()}return a}],"-":{type:ke,overloads:[[[ke,ke],function(e,t){var i=h(t,2),a=i[0],n=i[1];return a.evaluate(e)-n.evaluate(e)}],[[ke],function(e,t){return-h(t,1)[0].evaluate(e)}]]},"/":[ke,[ke,ke],function(e,t){var i=h(t,2),a=i[0],n=i[1];return a.evaluate(e)/n.evaluate(e)}],"%":[ke,[ke,ke],function(e,t){var i=h(t,2),a=i[0],n=i[1];return a.evaluate(e)%n.evaluate(e)}],ln2:[ke,[],function(){return Math.LN2}],pi:[ke,[],function(){return Math.PI}],e:[ke,[],function(){return Math.E}],"^":[ke,[ke,ke],function(e,t){var i=h(t,2),a=i[0],n=i[1];return Math.pow(a.evaluate(e),n.evaluate(e))}],sqrt:[ke,[ke],function(e,t){var i=h(t,1)[0];return Math.sqrt(i.evaluate(e))}],log10:[ke,[ke],function(e,t){var i=h(t,1)[0];return Math.log(i.evaluate(e))/Math.LN10}],ln:[ke,[ke],function(e,t){var i=h(t,1)[0];return Math.log(i.evaluate(e))}],log2:[ke,[ke],function(e,t){var i=h(t,1)[0];return Math.log(i.evaluate(e))/Math.LN2}],sin:[ke,[ke],function(e,t){var i=h(t,1)[0];return Math.sin(i.evaluate(e))}],cos:[ke,[ke],function(e,t){var i=h(t,1)[0];return Math.cos(i.evaluate(e))}],tan:[ke,[ke],function(e,t){var i=h(t,1)[0];return Math.tan(i.evaluate(e))}],asin:[ke,[ke],function(e,t){var i=h(t,1)[0];return Math.asin(i.evaluate(e))}],acos:[ke,[ke],function(e,t){var i=h(t,1)[0];return Math.acos(i.evaluate(e))}],atan:[ke,[ke],function(e,t){var i=h(t,1)[0];return Math.atan(i.evaluate(e))}],min:[ke,_i(ke),function(e,t){return Math.min.apply(Math,u(t.map((function(t){return t.evaluate(e)}))))}],max:[ke,_i(ke),function(e,t){return Math.max.apply(Math,u(t.map((function(t){return t.evaluate(e)}))))}],abs:[ke,[ke],function(e,t){var i=h(t,1)[0];return Math.abs(i.evaluate(e))}],round:[ke,[ke],function(e,t){var i=h(t,1)[0].evaluate(e);return i<0?-Math.round(-i):Math.round(i)}],floor:[ke,[ke],function(e,t){var i=h(t,1)[0];return Math.floor(i.evaluate(e))}],ceil:[ke,[ke],function(e,t){var i=h(t,1)[0];return Math.ceil(i.evaluate(e))}],"filter-==":[Ce,[Se,Te],function(e,t){var i=h(t,2),a=i[0],n=i[1];return e.properties()[a.value]===n.value}],"filter-id-==":[Ce,[Te],function(e,t){var i=h(t,1)[0];return e.id()===i.value}],"filter-type-==":[Ce,[Se],function(e,t){var i=h(t,1)[0];return e.geometryType()===i.value}],"filter-<":[Ce,[Se,Te],function(e,t){var i=h(t,2),a=i[0],n=i[1],r=e.properties()[a.value],o=n.value;return typeof r==typeof o&&r<o}],"filter-id-<":[Ce,[Te],function(e,t){var i=h(t,1)[0],a=e.id(),n=i.value;return typeof a==typeof n&&a<n}],"filter->":[Ce,[Se,Te],function(e,t){var i=h(t,2),a=i[0],n=i[1],r=e.properties()[a.value],o=n.value;return typeof r==typeof o&&r>o}],"filter-id->":[Ce,[Te],function(e,t){var i=h(t,1)[0],a=e.id(),n=i.value;return typeof a==typeof n&&a>n}],"filter-<=":[Ce,[Se,Te],function(e,t){var i=h(t,2),a=i[0],n=i[1],r=e.properties()[a.value],o=n.value;return typeof r==typeof o&&r<=o}],"filter-id-<=":[Ce,[Te],function(e,t){var i=h(t,1)[0],a=e.id(),n=i.value;return typeof a==typeof n&&a<=n}],"filter->=":[Ce,[Se,Te],function(e,t){var i=h(t,2),a=i[0],n=i[1],r=e.properties()[a.value],o=n.value;return typeof r==typeof o&&r>=o}],"filter-id->=":[Ce,[Te],function(e,t){var i=h(t,1)[0],a=e.id(),n=i.value;return typeof a==typeof n&&a>=n}],"filter-has":[Ce,[Te],function(e,t){return h(t,1)[0].value in e.properties()}],"filter-has-id":[Ce,[],function(e){return null!==e.id()&&void 0!==e.id()}],"filter-type-in":[Ce,[De(Se)],function(e,t){return h(t,1)[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[Ce,[De(Te)],function(e,t){return h(t,1)[0].value.indexOf(e.id())>=0}],"filter-in-small":[Ce,[Se,De(Te)],function(e,t){var i=h(t,2),a=i[0];return i[1].value.indexOf(e.properties()[a.value])>=0}],"filter-in-large":[Ce,[Se,De(Te)],function(e,t){var i=h(t,2),a=i[0],n=i[1];return function(e,t,i,a){for(;i<=a;){var n=i+a>>1;if(t[n]===e)return!0;t[n]>e?a=n-1:i=n+1}return!1}(e.properties()[a.value],n.value,0,n.value.length-1)}],all:{type:Ce,overloads:[[[Ce,Ce],function(e,t){var i=h(t,2),a=i[0],n=i[1];return a.evaluate(e)&&n.evaluate(e)}],[_i(Ce),function(e,t){var i,a=d(t);try{for(a.s();!(i=a.n()).done;)if(!i.value.evaluate(e))return!1}catch(n){a.e(n)}finally{a.f()}return!0}]]},any:{type:Ce,overloads:[[[Ce,Ce],function(e,t){var i=h(t,2),a=i[0],n=i[1];return a.evaluate(e)||n.evaluate(e)}],[_i(Ce),function(e,t){var i,a=d(t);try{for(a.s();!(i=a.n()).done;)if(i.value.evaluate(e))return!0}catch(n){a.e(n)}finally{a.f()}return!1}]]},"!":[Ce,[Ce],function(e,t){return!h(t,1)[0].evaluate(e)}],"is-supported-script":[Ce,[Se],function(e,t){var i=h(t,1)[0],a=e.globals&&e.globals.isSupportedScript;return!a||a(i.evaluate(e))}],upcase:[Se,[Se],function(e,t){return h(t,1)[0].evaluate(e).toUpperCase()}],downcase:[Se,[Se],function(e,t){return h(t,1)[0].evaluate(e).toLowerCase()}],concat:[Se,_i(Te),function(e,t){return t.map((function(t){return et(t.evaluate(e))})).join("")}],"resolved-locale":[Se,[Me],function(e,t){return h(t,1)[0].evaluate(e).resolvedLocale()}]});var Li=function(){function e(t,i){p(this,e),this.expression=t,this._warningHistory={},this._evaluator=new lt,this._defaultValue=i?function(e){return"color"===e.type&&Ti(e.default)?new Ue(0,0,0,0):"color"===e.type?Ue.parse(e.default)||null:"padding"===e.type?Ze.parse(e.default)||null:void 0===e.default?null:e.default}(i):null,this._enumValues=i&&"enum"===i.type?i.values:null}return f(e,[{key:"evaluateWithoutErrorHandling",value:function(e,t,i,a,n,r){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=i,this._evaluator.canonical=a,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=r,this.expression.evaluate(this._evaluator)}},{key:"evaluate",value:function(e,t,i,a,n,r){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=i||null,this._evaluator.canonical=a,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=r||null;try{var o=this.expression.evaluate(this._evaluator);if(null==o||"number"==typeof o&&o!=o)return this._defaultValue;if(this._enumValues&&!(o in this._enumValues))throw new it("Expected value to be one of ".concat(Object.keys(this._enumValues).map((function(e){return JSON.stringify(e)})).join(", "),", but found ").concat(JSON.stringify(o)," instead."));return o}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}}}]),e}();function ji(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in vi}function Ri(e,t){var i=new Pt(vi,[],t?function(e){var t={color:Ae,string:Se,number:ke,enum:Se,boolean:Ce,formatted:Ee,padding:Ie,resolvedImage:Pe};return"array"===e.type?De(t[e.value]||Te,e.length):t[e.type]}(t):void 0),a=i.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return a?wi(new Li(a,t)):ki(i.errors)}var Fi=function(){function e(t,i){p(this,e),this.kind=t,this._styleExpression=i,this.isStateDependent="constant"!==t&&!Mt(i.expression)}return f(e,[{key:"evaluateWithoutErrorHandling",value:function(e,t,i,a,n,r){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,a,n,r)}},{key:"evaluate",value:function(e,t,i,a,n,r){return this._styleExpression.evaluate(e,t,i,a,n,r)}}]),e}(),Bi=function(){function e(t,i,a,n){p(this,e),this.kind=t,this.zoomStops=a,this._styleExpression=i,this.isStateDependent="camera"!==t&&!Mt(i.expression),this.interpolationType=n}return f(e,[{key:"evaluateWithoutErrorHandling",value:function(e,t,i,a,n,r){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,a,n,r)}},{key:"evaluate",value:function(e,t,i,a,n,r){return this._styleExpression.evaluate(e,t,i,a,n,r)}},{key:"interpolationFactor",value:function(e,t,i){return this.interpolationType?Kt.interpolationFactor(this.interpolationType,e,t,i):0}}]),e}();function Ni(e,t){var i=Ri(e,t);if("error"===i.result)return i;var a=i.value.expression,n=Tt(a);if(!n&&!Si(t))return ki([new be("","data expressions not supported")]);var r=Et(a,["zoom"]);if(!r&&!Ci(t))return ki([new be("","zoom expressions not supported")]);var o=function e(t){var i=null;if(t instanceof $t)i=e(t.result);else if(t instanceof Qt){var a,n=d(t.args);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(i=e(r))break}}catch(o){n.e(o)}finally{n.f()}}else(t instanceof zt||t instanceof Kt)&&t.input instanceof ct&&"zoom"===t.input.name&&(i=t);return i instanceof be||t.eachChild((function(t){var a=e(t);a instanceof be?i=a:!i&&a?i=new be("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&a&&i!==a&&(i=new be("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),i}(a);return o||r?o instanceof be?ki([o]):o instanceof Kt&&!Ai(t)?ki([new be("",'"interpolate" expressions cannot be used with this property')]):wi(o?new Bi(n?"camera":"composite",i.value,o.labels,o instanceof Kt?o.interpolation:void 0):new Fi(n?"constant":"source",i.value)):ki([new be("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}var Vi=function(){function e(t,i){p(this,e),this._parameters=t,this._specification=i,ve(this,function e(t,i){var a,n,r,o="color"===i.type,s=t.stops&&"object"==typeof t.stops[0][0],l=s||!(s||void 0!==t.property),c=t.type||(Ai(i)?"exponential":"interval");if(o||"padding"===i.type){var u=o?Ue.parse:Ze.parse;(t=ve({},t)).stops&&(t.stops=t.stops.map((function(e){return[e[0],u(e[1])]}))),t.default=u(t.default?t.default:i.default)}if(t.colorSpace&&"rgb"!==t.colorSpace&&!Zt[t.colorSpace])throw new Error("Unknown color space: ".concat(t.colorSpace));if("exponential"===c)a=Di;else if("interval"===c)a=Pi;else if("categorical"===c){a=Ii,n=Object.create(null);var h,f=d(t.stops);try{for(f.s();!(h=f.n()).done;){var p=h.value;n[p[0]]=p[1]}}catch(A){f.e(A)}finally{f.f()}r=typeof t.stops[0][0]}else{if("identity"!==c)throw new Error('Unknown function type "'.concat(c,'"'));a=zi}if(s){for(var m={},g=[],v=0;v<t.stops.length;v++){var y=t.stops[v],x=y[0].zoom;void 0===m[x]&&(m[x]={zoom:x,type:t.type,property:t.property,default:t.default,stops:[]},g.push(x)),m[x].stops.push([y[0].value,y[1]])}for(var b=[],_=0,w=g;_<w.length;_++){var k=w[_];b.push([m[k].zoom,e(m[k],i)])}var S={name:"linear"};return{kind:"composite",interpolationType:S,interpolationFactor:Kt.interpolationFactor.bind(void 0,S),zoomStops:b.map((function(e){return e[0]})),evaluate:function(e,a){var n=e.zoom;return Di({stops:b,base:t.base},i,n).evaluate(n,a)}}}if(l){var C="exponential"===c?{name:"exponential",base:void 0!==t.base?t.base:1}:null;return{kind:"camera",interpolationType:C,interpolationFactor:Kt.interpolationFactor.bind(void 0,C),zoomStops:t.stops.map((function(e){return e[0]})),evaluate:function(e){var o=e.zoom;return a(t,i,o,n,r)}}}return{kind:"source",evaluate:function(e,o){var s=o&&o.properties?o.properties[t.property]:void 0;return void 0===s?Ei(t.default,i.default):a(t,i,s,n,r)}}}(this._parameters,this._specification))}return f(e,null,[{key:"deserialize",value:function(t){return new e(t._parameters,t._specification)}},{key:"serialize",value:function(e){return{_parameters:e._parameters,_specification:e._specification}}}]),e}();function Yi(e){var t=e.key,i=e.value,a=e.valueSpec||{},n=e.objectElementValidators||{},r=e.style,o=e.styleSpec,s=[],l=Oi(i);if("object"!==l)return[new me(t,i,"object expected, ".concat(l," found"))];for(var c in i){var u=c.split(".")[0],h=a[u]||a["*"],d=void 0;if(n[u])d=n[u];else if(a[u])d=ma;else if(n["*"])d=n["*"];else{if(!a["*"]){s.push(new me(t,i[c],'unknown property "'.concat(c,'"')));continue}d=ma}s=s.concat(d({key:(t?"".concat(t,"."):t)+c,value:i[c],valueSpec:h,style:r,styleSpec:o,object:i,objectKey:c},i))}for(var f in a)n[f]||a[f].required&&void 0===a[f].default&&void 0===i[f]&&s.push(new me(t,i,'missing required property "'.concat(f,'"')));return s}function Wi(e){var t=e.value,i=e.valueSpec,a=e.style,n=e.styleSpec,r=e.key,o=e.arrayElementValidator||ma;if("array"!==Oi(t))return[new me(r,t,"array expected, ".concat(Oi(t)," found"))];if(i.length&&t.length!==i.length)return[new me(r,t,"array length ".concat(i.length," expected, length ").concat(t.length," found"))];if(i["min-length"]&&t.length<i["min-length"])return[new me(r,t,"array length at least ".concat(i["min-length"]," expected, length ").concat(t.length," found"))];var s={type:i.value,values:i.values};n.$version<7&&(s.function=i.function),"object"===Oi(i.value)&&(s=i.value);for(var l=[],c=0;c<t.length;c++)l=l.concat(o({array:t,arrayIndex:c,value:t[c],valueSpec:s,style:a,styleSpec:n,key:"".concat(r,"[").concat(c,"]")}));return l}function Hi(e){var t=e.key,i=e.value,a=e.valueSpec,n=Oi(i);return"number"===n&&i!=i&&(n="NaN"),"number"!==n?[new me(t,i,"number expected, ".concat(n," found"))]:"minimum"in a&&i<a.minimum?[new me(t,i,"".concat(i," is less than the minimum value ").concat(a.minimum))]:"maximum"in a&&i>a.maximum?[new me(t,i,"".concat(i," is greater than the maximum value ").concat(a.maximum))]:[]}function Ui(e){var t,i,a,n=e.valueSpec,r=ye(e.value.type),o={},s="categorical"!==r&&void 0===e.value.property,l=!s,c="array"===Oi(e.value.stops)&&"array"===Oi(e.value.stops[0])&&"object"===Oi(e.value.stops[0][0]),u=Yi({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===r)return[new me(e.key,e.value,'identity function may not have a "stops" property')];var t=[],i=e.value;return t=t.concat(Wi({key:e.key,value:i,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:h})),"array"===Oi(i)&&0===i.length&&t.push(new me(e.key,i,"array must have at least one stop")),t},default:function(e){return ma({key:e.key,value:e.value,valueSpec:n,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===r&&s&&u.push(new me(e.key,e.value,'missing required property "property"')),"identity"===r||e.value.stops||u.push(new me(e.key,e.value,'missing required property "stops"')),"exponential"===r&&e.valueSpec.expression&&!Ai(e.valueSpec)&&u.push(new me(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(l&&!Si(e.valueSpec)?u.push(new me(e.key,e.value,"property functions not supported")):s&&!Ci(e.valueSpec)&&u.push(new me(e.key,e.value,"zoom functions not supported"))),"categorical"!==r&&!c||void 0!==e.value.property||u.push(new me(e.key,e.value,'"property" property is required')),u;function h(e){var t=[],r=e.value,s=e.key;if("array"!==Oi(r))return[new me(s,r,"array expected, ".concat(Oi(r)," found"))];if(2!==r.length)return[new me(s,r,"array length 2 expected, length ".concat(r.length," found"))];if(c){if("object"!==Oi(r[0]))return[new me(s,r,"object expected, ".concat(Oi(r[0])," found"))];if(void 0===r[0].zoom)return[new me(s,r,"object stop key must have zoom")];if(void 0===r[0].value)return[new me(s,r,"object stop key must have value")];if(a&&a>ye(r[0].zoom))return[new me(s,r[0].zoom,"stop zoom values must appear in ascending order")];ye(r[0].zoom)!==a&&(a=ye(r[0].zoom),i=void 0,o={}),t=t.concat(Yi({key:"".concat(s,"[0]"),value:r[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:Hi,value:d}}))}else t=t.concat(d({key:"".concat(s,"[0]"),value:r[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},r));return ji(xe(r[1]))?t.concat([new me("".concat(s,"[1]"),r[1],"expressions are not allowed in function stops.")]):t.concat(ma({key:"".concat(s,"[1]"),value:r[1],valueSpec:n,style:e.style,styleSpec:e.styleSpec}))}function d(e,a){var s=Oi(e.value),l=ye(e.value),c=null!==e.value?e.value:a;if(t){if(s!==t)return[new me(e.key,c,"".concat(s," stop domain type must match previous stop domain type ").concat(t))]}else t=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new me(e.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==r){var u="number expected, ".concat(s," found");return Si(n)&&void 0===r&&(u+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new me(e.key,c,u)]}return"categorical"!==r||"number"!==s||isFinite(l)&&Math.floor(l)===l?"categorical"!==r&&"number"===s&&void 0!==i&&l<i?[new me(e.key,c,"stop domain values must appear in ascending order")]:(i=l,"categorical"===r&&l in o?[new me(e.key,c,"stop domain values must be unique")]:(o[l]=!0,[])):[new me(e.key,c,"integer expected, found ".concat(l))]}}function Xi(e){var t=("property"===e.expressionContext?Ni:Ri)(xe(e.value),e.valueSpec);if("error"===t.result)return t.value.map((function(t){return new me("".concat(e.key).concat(t.key),e.value,t.message)}));var i=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!i.outputDefined())return[new me(e.key,e.value,'Invalid data expression for "'.concat(e.propertyKey,'". Output values must be contained as literals within the expression.'))];if("property"===e.expressionContext&&"layout"===e.propertyType&&!Mt(i))return[new me(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext&&!Mt(i))return[new me(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!Et(i,["zoom","feature-state"]))return[new me(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!Tt(i))return[new me(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Gi(e){var t=e.key,i=e.value,a=e.valueSpec,n=[];return Array.isArray(a.values)?-1===a.values.indexOf(ye(i))&&n.push(new me(t,i,"expected one of [".concat(a.values.join(", "),"], ").concat(JSON.stringify(i)," found"))):-1===Object.keys(a.values).indexOf(ye(i))&&n.push(new me(t,i,"expected one of [".concat(Object.keys(a.values).join(", "),"], ").concat(JSON.stringify(i)," found"))),n}function qi(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":var t,i=d(e.slice(1));try{for(i.s();!(t=i.n()).done;){var a=t.value;if(!qi(a)&&"boolean"!=typeof a)return!1}}catch(n){i.e(n)}finally{i.f()}return!0;default:return!0}}var Zi={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ki(e){if(null==e)return{filter:function(){return!0},needGeometry:!1};qi(e)||(e=$i(e));var t=Ri(e,Zi);if("error"===t.result)throw new Error(t.value.map((function(e){return"".concat(e.key,": ").concat(e.message)})).join(", "));return{filter:function(e,i,a){return t.value.evaluate(e,i,{},a)},needGeometry:Qi(e)}}function Ji(e,t){return e<t?-1:e>t?1:0}function Qi(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(var t=1;t<e.length;t++)if(Qi(e[t]))return!0;return!1}function $i(e){if(!e)return!0;var t,i=e[0];return e.length<=1?"any"!==i:"=="===i?ea(e[1],e[2],"=="):"!="===i?aa(ea(e[1],e[2],"==")):"<"===i||">"===i||"<="===i||">="===i?ea(e[1],e[2],i):"any"===i?(t=e.slice(1),["any"].concat(t.map($i))):"all"===i?["all"].concat(e.slice(1).map($i)):"none"===i?["all"].concat(e.slice(1).map($i).map(aa)):"in"===i?ta(e[1],e.slice(2)):"!in"===i?aa(ta(e[1],e.slice(2))):"has"===i?ia(e[1]):"!has"===i?aa(ia(e[1])):"within"!==i||e}function ea(e,t,i){switch(e){case"$type":return["filter-type-".concat(i),t];case"$id":return["filter-id-".concat(i),t];default:return["filter-".concat(i),e,t]}}function ta(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((function(e){return typeof e!=typeof t[0]}))?["filter-in-large",e,["literal",t.sort(Ji)]]:["filter-in-small",e,["literal",t]]}}function ia(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function aa(e){return["!",e]}function na(e){return qi(xe(e.value))?Xi(ve({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function e(t){var i=t.value,a=t.key;if("array"!==Oi(i))return[new me(a,i,"array expected, ".concat(Oi(i)," found"))];var n,r=t.styleSpec,o=[];if(i.length<1)return[new me(a,i,"filter array must have at least 1 element")];switch(o=o.concat(Gi({key:"".concat(a,"[0]"),value:i[0],valueSpec:r.filter_operator,style:t.style,styleSpec:t.styleSpec})),ye(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&"$type"===ye(i[1])&&o.push(new me(a,i,'"$type" cannot be use with operator "'.concat(i[0],'"')));case"==":case"!=":3!==i.length&&o.push(new me(a,i,'filter array for operator "'.concat(i[0],'" must have 3 elements')));case"in":case"!in":i.length>=2&&"string"!==(n=Oi(i[1]))&&o.push(new me("".concat(a,"[1]"),i[1],"string expected, ".concat(n," found")));for(var s=2;s<i.length;s++)n=Oi(i[s]),"$type"===ye(i[1])?o=o.concat(Gi({key:"".concat(a,"[").concat(s,"]"),value:i[s],valueSpec:r.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==n&&"number"!==n&&"boolean"!==n&&o.push(new me("".concat(a,"[").concat(s,"]"),i[s],"string, number, or boolean expected, ".concat(n," found")));break;case"any":case"all":case"none":for(var l=1;l<i.length;l++)o=o.concat(e({key:"".concat(a,"[").concat(l,"]"),value:i[l],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":n=Oi(i[1]),2!==i.length?o.push(new me(a,i,'filter array for "'.concat(i[0],'" operator must have 2 elements'))):"string"!==n&&o.push(new me("".concat(a,"[1]"),i[1],"string expected, ".concat(n," found")));break;case"within":n=Oi(i[1]),2!==i.length?o.push(new me(a,i,'filter array for "'.concat(i[0],'" operator must have 2 elements'))):"object"!==n&&o.push(new me("".concat(a,"[1]"),i[1],"object expected, ".concat(n," found")))}return o}(e)}function ra(e,t){var i=e.key,a=e.style,n=e.styleSpec,r=e.value,o=e.objectKey,s=n["".concat(t,"_").concat(e.layerType)];if(!s)return[];var l=o.match(/^(.*)-transition$/);if("paint"===t&&l&&s[l[1]]&&s[l[1]].transition)return ma({key:i,value:r,valueSpec:n.transition,style:a,styleSpec:n});var c,u=e.valueSpec||s[o];if(!u)return[new me(i,r,'unknown property "'.concat(o,'"'))];if("string"===Oi(r)&&Si(u)&&!u.tokens&&(c=/^{([^}]+)}$/.exec(r)))return[new me(i,r,'"'.concat(o,'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": ').concat(JSON.stringify(c[1])," }`."))];var h=[];return"symbol"===e.layerType&&("text-field"===o&&a&&!a.glyphs&&h.push(new me(i,r,'use of "text-field" requires a style "glyphs" property')),"text-font"===o&&Ti(xe(r))&&"identity"===ye(r.type)&&h.push(new me(i,r,'"text-font" does not support identity functions'))),h.concat(ma({key:e.key,value:r,valueSpec:u,style:a,styleSpec:n,expressionContext:"property",propertyType:t,propertyKey:o}))}function oa(e){return ra(e,"paint")}function sa(e){return ra(e,"layout")}function la(e){var t=[],i=e.value,a=e.key,n=e.style,r=e.styleSpec;i.type||i.ref||t.push(new me(a,i,'either "type" or "ref" is required'));var o,s=ye(i.type),l=ye(i.ref);if(i.id)for(var c=ye(i.id),u=0;u<e.arrayIndex;u++){var h=n.layers[u];ye(h.id)===c&&t.push(new me(a,i.id,'duplicate layer id "'.concat(i.id,'", previously used at line ').concat(h.id.__line__)))}if("ref"in i)["type","source","source-layer","filter","layout"].forEach((function(e){e in i&&t.push(new me(a,i[e],'"'.concat(e,'" is prohibited for ref layers')))})),n.layers.forEach((function(e){ye(e.id)===l&&(o=e)})),o?o.ref?t.push(new me(a,i.ref,"ref cannot reference another ref layer")):s=ye(o.type):t.push(new me(a,i.ref,'ref layer "'.concat(l,'" not found')));else if("background"!==s)if(i.source){var d=n.sources&&n.sources[i.source],f=d&&ye(d.type);d?"vector"===f&&"raster"===s?t.push(new me(a,i.source,'layer "'.concat(i.id,'" requires a raster source'))):"raster"===f&&"raster"!==s?t.push(new me(a,i.source,'layer "'.concat(i.id,'" requires a vector source'))):"vector"!==f||i["source-layer"]?"raster-dem"===f&&"hillshade"!==s?t.push(new me(a,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!i.paint||!i.paint["line-gradient"]||"geojson"===f&&d.lineMetrics||t.push(new me(a,i,'layer "'.concat(i.id,'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.'))):t.push(new me(a,i,'layer "'.concat(i.id,'" must specify a "source-layer"'))):t.push(new me(a,i.source,'source "'.concat(i.source,'" not found')))}else t.push(new me(a,i,'missing required property "source"'));return t=t.concat(Yi({key:a,value:i,valueSpec:r.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return ma({key:"".concat(a,".type"),value:i.type,valueSpec:r.layer.type,style:e.style,styleSpec:e.styleSpec,object:i,objectKey:"type"})},filter:na,layout:function(e){return Yi({layer:i,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return sa(ve({layerType:s},e))}}})},paint:function(e){return Yi({layer:i,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return oa(ve({layerType:s},e))}}})}}}))}function ca(e){var t=e.value,i=e.key,a=Oi(t);return"string"!==a?[new me(i,t,"string expected, ".concat(a," found"))]:[]}var ua={promoteId:function(e){var t=e.key,i=e.value;if("string"===Oi(i))return ca({key:t,value:i});var a=[];for(var n in i)a.push.apply(a,u(ca({key:"".concat(t,".").concat(n),value:i[n]})));return a}};function ha(e){var t=e.value,i=e.key,a=e.styleSpec,n=e.style;if(!t.type)return[new me(i,t,'"type" is required')];var r,o=ye(t.type);switch(o){case"vector":case"raster":case"raster-dem":return r=Yi({key:i,value:t,valueSpec:a["source_".concat(o.replace("-","_"))],style:e.style,styleSpec:a,objectElementValidators:ua});case"geojson":if(r=Yi({key:i,value:t,valueSpec:a.source_geojson,style:n,styleSpec:a,objectElementValidators:ua}),t.cluster)for(var s in t.clusterProperties){var l,c,d=h(t.clusterProperties[s],2),f=d[0],p=d[1],m="string"==typeof f?[f,["accumulated"],["get",s]]:f;(l=r).push.apply(l,u(Xi({key:"".concat(i,".").concat(s,".map"),value:p,expressionContext:"cluster-map"}))),(c=r).push.apply(c,u(Xi({key:"".concat(i,".").concat(s,".reduce"),value:m,expressionContext:"cluster-reduce"})))}return r;case"video":return Yi({key:i,value:t,valueSpec:a.source_video,style:n,styleSpec:a});case"image":return Yi({key:i,value:t,valueSpec:a.source_image,style:n,styleSpec:a});case"canvas":return[new me(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Gi({key:"".concat(i,".type"),value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:n,styleSpec:a})}}function da(e){var t=e.value,i=e.styleSpec,a=i.light,n=e.style,r=[],o=Oi(t);if(void 0===t)return r;if("object"!==o)return r=r.concat([new me("light",t,"object expected, ".concat(o," found"))]);for(var s in t){var l=s.match(/^(.*)-transition$/);r=r.concat(l&&a[l[1]]&&a[l[1]].transition?ma({key:s,value:t[s],valueSpec:i.transition,style:n,styleSpec:i}):a[s]?ma({key:s,value:t[s],valueSpec:a[s],style:n,styleSpec:i}):[new me(s,t[s],'unknown property "'.concat(s,'"'))])}return r}function fa(e){var t=e.value,i=e.styleSpec,a=i.terrain,n=e.style,r=[],o=Oi(t);if(void 0===t)return r;if("object"!==o)return r=r.concat([new me("terrain",t,"object expected, ".concat(o," found"))]);for(var s in t)r=r.concat(a[s]?ma({key:s,value:t[s],valueSpec:a[s],style:n,styleSpec:i}):[new me(s,t[s],'unknown property "'.concat(s,'"'))]);return r}var pa={"*":function(){return[]},array:Wi,boolean:function(e){var t=e.value,i=e.key,a=Oi(t);return"boolean"!==a?[new me(i,t,"boolean expected, ".concat(a," found"))]:[]},number:Hi,color:function(e){var t=e.key,i=e.value,a=Oi(i);return"string"!==a?[new me(t,i,"color expected, ".concat(a," found"))]:null===Be(i)?[new me(t,i,'color expected, "'.concat(i,'" found'))]:[]},constants:ge,enum:Gi,filter:na,function:Ui,layer:la,object:Yi,source:ha,light:da,terrain:fa,string:ca,formatted:function(e){return 0===ca(e).length?[]:Xi(e)},resolvedImage:function(e){return 0===ca(e).length?[]:Xi(e)},padding:function(e){var t=e.key,i=e.value;if("array"===Oi(i)){if(i.length<1||i.length>4)return[new me(t,i,"padding requires 1 to 4 values; ".concat(i.length," values found"))];for(var a={type:"number"},n=[],r=0;r<i.length;r++)n=n.concat(ma({key:"".concat(t,"[").concat(r,"]"),value:i[r],valueSpec:a}));return n}return Hi({key:t,value:i,valueSpec:{}})}};function ma(e){var t=e.value,i=e.valueSpec,a=e.styleSpec;return i.expression&&Ti(ye(t))?Ui(e):i.expression&&ji(xe(t))?Xi(e):i.type&&pa[i.type]?pa[i.type](e):Yi(ve({},e,{valueSpec:i.type?a[i.type]:i}))}function ga(e){var t=e.value,i=e.key,a=ca(e);return a.length||(-1===t.indexOf("{fontstack}")&&a.push(new me(i,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&a.push(new me(i,t,'"glyphs" url must include a "{range}" token'))),a}function va(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pe,i=[];return i=i.concat(ma({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:ga,"*":function(){return[]}}})),e.constants&&(i=i.concat(ge({key:"constants",value:e.constants,style:e,styleSpec:t}))),ya(i)}function ya(e){return[].concat(e).sort((function(e,t){return e.line-t.line}))}function xa(e){return function(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return ya(e.apply(this,i))}}va.source=xa(ha),va.light=xa(da),va.terrain=xa(fa),va.layer=xa(la),va.filter=xa(na),va.paintProperty=xa(oa),va.layoutProperty=xa(sa);var ba=va,_a=ba.light,wa=ba.paintProperty,ka=ba.layoutProperty;function Sa(e,t){var i=!1;if(t&&t.length){var a,n=d(t);try{for(n.s();!(a=n.n()).done;){var r=a.value;e.fire(new de(new Error(r.message))),i=!0}}catch(o){n.e(o)}finally{n.f()}}return i}var Ca=function(){function e(t,i,a){p(this,e);var n=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var r=new Int32Array(this.arrayBuffer);t=r[0],this.d=(i=r[1])+2*(a=r[2]);for(var o=0;o<this.d*this.d;o++){var s=r[3+o],l=r[3+o+1];n.push(s===l?null:r.subarray(s,l))}var c=r[3+n.length+1];this.keys=r.subarray(r[3+n.length],c),this.bboxes=r.subarray(c),this.insert=this._insertReadonly}else{this.d=i+2*a;for(var u=0;u<this.d*this.d;u++)n.push([]);this.keys=[],this.bboxes=[]}this.n=i,this.extent=t,this.padding=a,this.scale=i/t,this.uid=0;var h=a/i*t;this.min=-h,this.max=t+h}return f(e,[{key:"insert",value:function(e,t,i,a,n){this._forEachCell(t,i,a,n,this._insertCell,this.uid++,void 0,void 0),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(i),this.bboxes.push(a),this.bboxes.push(n)}},{key:"_insertReadonly",value:function(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}},{key:"_insertCell",value:function(e,t,i,a,n,r){this.cells[n].push(r)}},{key:"query",value:function(e,t,i,a,n){var r=this.min,o=this.max;if(e<=r&&t<=r&&o<=i&&o<=a&&!n)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(e,t,i,a,this._queryCell,s,{},n),s}},{key:"_queryCell",value:function(e,t,i,a,n,r,o,s){var l=this.cells[n];if(null!==l)for(var c=this.keys,u=this.bboxes,h=0;h<l.length;h++){var d=l[h];if(void 0===o[d]){var f=4*d;(s?s(u[f+0],u[f+1],u[f+2],u[f+3]):e<=u[f+2]&&t<=u[f+3]&&i>=u[f+0]&&a>=u[f+1])?(o[d]=!0,r.push(c[d])):o[d]=!1}}}},{key:"_forEachCell",value:function(e,t,i,a,n,r,o,s){for(var l=this._convertToCellCoord(e),c=this._convertToCellCoord(t),u=this._convertToCellCoord(i),h=this._convertToCellCoord(a),d=l;d<=u;d++)for(var f=c;f<=h;f++){var p=this.d*f+d;if((!s||s(this._convertFromCellCoord(d),this._convertFromCellCoord(f),this._convertFromCellCoord(d+1),this._convertFromCellCoord(f+1)))&&n.call(this,e,t,i,a,p,r,o,s))return}}},{key:"_convertFromCellCoord",value:function(e){return(e-this.padding)/this.scale}},{key:"_convertToCellCoord",value:function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))}},{key:"toArrayBuffer",value:function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=3+this.cells.length+1+1,i=0,a=0;a<this.cells.length;a++)i+=this.cells[a].length;var n=new Int32Array(t+i+this.keys.length+this.bboxes.length);n[0]=this.extent,n[1]=this.n,n[2]=this.padding;for(var r=t,o=0;o<e.length;o++){var s=e[o];n[3+o]=r,n.set(s,r),r+=s.length}return n[3+e.length]=r,n.set(this.keys,r),r+=this.keys.length,n[3+e.length+1]=r,n.set(this.bboxes,r),r+=this.bboxes.length,n.buffer}}],[{key:"serialize",value:function(e,t){var i=e.toArrayBuffer();return t&&t.push(i),{buffer:i}}},{key:"deserialize",value:function(t){return new e(t.buffer)}}]),e}(),Aa={};function Oa(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Aa[e])throw new Error("".concat(e," is already registered."));Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),Aa[e]={klass:t,omit:i.omit||[],shallow:i.shallow||[]}}for(var Ta in Oa("Object",Object),Oa("TransferableGridIndex",Ca),Oa("Color",Ue),Oa("Error",Error),Oa("AJAXError",ee),Oa("ResolvedImage",Ke),Oa("StylePropertyFunction",Vi),Oa("StyleExpression",Li,{omit:["_evaluator"]}),Oa("ZoomDependentExpression",Bi),Oa("ZoomConstantExpression",Fi),Oa("CompoundExpression",ct,{omit:["_evaluate"]}),vi)vi[Ta]._classRegistryKey||Oa("Expression_".concat(Ta),vi[Ta]);function Ma(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function Ea(e,t){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||e instanceof Blob)return e;if(Ma(e))return t&&t.push(e),e;if(j(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){var i=e;return t&&t.push(i.buffer),i}if(e instanceof ImageData)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){var a,n=[],r=d(e);try{for(r.s();!(a=r.n()).done;){var o=a.value;n.push(Ea(o,t))}}catch(f){r.e(f)}finally{r.f()}return n}if("object"==typeof e){var s=e.constructor,l=s._classRegistryKey;if(!l)throw new Error("can't serialize object of unregistered class");if(!Aa[l])throw new Error("".concat(l," is not registered."));var c=s.serialize?s.serialize(e,t):{};if(s.serialize){if(t&&c===t[t.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(var u in e)if(e.hasOwnProperty(u)&&!(Aa[l].omit.indexOf(u)>=0)){var h=e[u];c[u]=Aa[l].shallow.indexOf(u)>=0?h:Ea(h,t)}e instanceof Error&&(c.message=e.message)}if(c.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==l&&(c.$name=l),c}throw new Error("can't serialize object of type "+typeof e)}function Ia(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||e instanceof Blob||Ma(e)||j(e)||ArrayBuffer.isView(e)||e instanceof ImageData)return e;if(Array.isArray(e))return e.map(Ia);if("object"==typeof e){var t=e.$name||"Object";if(!Aa[t])throw new Error("can't deserialize unregistered class ".concat(t));var i=Aa[t].klass;if(!i)throw new Error("can't deserialize unregistered class ".concat(t));if(i.deserialize)return i.deserialize(e);for(var a=Object.create(i.prototype),n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];if("$name"!==o){var s=e[o];a[o]=Aa[t].shallow.indexOf(o)>=0?s:Ia(s)}}return a}throw new Error("can't deserialize object of type "+typeof e)}var Pa=function(){function e(){p(this,e),this.first=!0}return f(e,[{key:"update",value:function(e,t){var i=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=i,!0))}}]),e}(),Da={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},Khmer:function(e){return e>=6016&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};function za(e){var t,i=d(e);try{for(i.s();!(t=i.n()).done;)if(ja(t.value.charCodeAt(0)))return!0}catch(a){i.e(a)}finally{i.f()}return!1}function La(e){return!(Da.Arabic(e)||Da["Arabic Supplement"](e)||Da["Arabic Extended-A"](e)||Da["Arabic Presentation Forms-A"](e)||Da["Arabic Presentation Forms-B"](e))}function ja(e){return!(746!==e&&747!==e&&(e<4352||!(Da["Bopomofo Extended"](e)||Da.Bopomofo(e)||Da["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||Da["CJK Compatibility Ideographs"](e)||Da["CJK Compatibility"](e)||Da["CJK Radicals Supplement"](e)||Da["CJK Strokes"](e)||!(!Da["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||Da["CJK Unified Ideographs Extension A"](e)||Da["CJK Unified Ideographs"](e)||Da["Enclosed CJK Letters and Months"](e)||Da["Hangul Compatibility Jamo"](e)||Da["Hangul Jamo Extended-A"](e)||Da["Hangul Jamo Extended-B"](e)||Da["Hangul Jamo"](e)||Da["Hangul Syllables"](e)||Da.Hiragana(e)||Da["Ideographic Description Characters"](e)||Da.Kanbun(e)||Da["Kangxi Radicals"](e)||Da["Katakana Phonetic Extensions"](e)||Da.Katakana(e)&&12540!==e||!(!Da["Halfwidth and Fullwidth Forms"](e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!Da["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||Da["Unified Canadian Aboriginal Syllabics"](e)||Da["Unified Canadian Aboriginal Syllabics Extended"](e)||Da["Vertical Forms"](e)||Da["Yijing Hexagram Symbols"](e)||Da["Yi Syllables"](e)||Da["Yi Radicals"](e))))}function Ra(e){return!(ja(e)||function(e){return!!(Da["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||Da["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||Da["Letterlike Symbols"](e)||Da["Number Forms"](e)||Da["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||Da["Control Pictures"](e)&&9251!==e||Da["Optical Character Recognition"](e)||Da["Enclosed Alphanumerics"](e)||Da["Geometric Shapes"](e)||Da["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||Da["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||Da["CJK Symbols and Punctuation"](e)||Da.Katakana(e)||Da["Private Use Area"](e)||Da["CJK Compatibility Forms"](e)||Da["Small Form Variants"](e)||Da["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}(e))}function Fa(e){return e>=1424&&e<=2303||Da["Arabic Presentation Forms-A"](e)||Da["Arabic Presentation Forms-B"](e)}function Ba(e,t){return!(!t&&Fa(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||Da.Khmer(e))}function Na(e){var t,i=d(e);try{for(i.s();!(t=i.n()).done;)if(Fa(t.value.charCodeAt(0)))return!0}catch(a){i.e(a)}finally{i.f()}return!1}var Va="deferred",Ya="loading",Wa="loaded",Ha=null,Ua="unavailable",Xa=null,Ga=function(e){e&&"string"==typeof e&&e.indexOf("NetworkError")>-1&&(Ua="error"),Ha&&Ha(e)};function qa(){Za.fire(new he("pluginStateChange",{pluginStatus:Ua,pluginURL:Xa}))}var Za=new fe,Ka=function(){return Ua},Ja=function(){if(Ua!==Va||!Xa)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ua=Ya,qa(),Xa&&ne({url:Xa},(function(e){e?Ga(e):(Ua=Wa,qa())}))},Qa={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Ua===Wa||null!=Qa.applyArabicShaping},isLoading:function(){return Ua===Ya},setState:function(e){if(!E())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Ua=e.pluginStatus,Xa=e.pluginURL},isParsed:function(){if(!E())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return null!=Qa.applyArabicShaping&&null!=Qa.processBidirectionalText&&null!=Qa.processStyledBidirectionalText},getPluginURL:function(){if(!E())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Xa}},$a=function(){function e(t,i){p(this,e),this.zoom=t,i?(this.now=i.now,this.fadeDuration=i.fadeDuration,this.zoomHistory=i.zoomHistory,this.transition=i.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Pa,this.transition={})}return f(e,[{key:"isSupportedScript",value:function(e){return function(e,t){var i,a=d(e);try{for(a.s();!(i=a.n()).done;)if(!Ba(i.value.charCodeAt(0),t))return!1}catch(n){a.e(n)}finally{a.f()}return!0}(e,Qa.isLoaded())}},{key:"crossFadingFactor",value:function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}},{key:"getCrossfadeParameters",value:function(){var e=this.zoom,t=e-Math.floor(e),i=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*t}}}]),e}(),en=function(){function e(t,i){p(this,e),this.property=t,this.value=i,this.expression=function(e,t){if(Ti(e))return new Vi(e,t);if(ji(e)){var i=Ni(e,t);if("error"===i.result)throw new Error(i.value.map((function(e){return"".concat(e.key,": ").concat(e.message)})).join(", "));return i.value}var a=e;return"color"===t.type&&"string"==typeof e?a=Ue.parse(e):"padding"!==t.type||"number"!=typeof e&&!Array.isArray(e)||(a=Ze.parse(e)),{kind:"constant",evaluate:function(){return a}}}(void 0===i?t.specification.default:i,t.specification)}return f(e,[{key:"isDataDriven",value:function(){return"source"===this.expression.kind||"composite"===this.expression.kind}},{key:"possiblyEvaluate",value:function(e,t,i){return this.property.possiblyEvaluate(this,e,t,i)}}]),e}(),tn=function(){function e(t){p(this,e),this.property=t,this.value=new en(t,void 0)}return f(e,[{key:"transitioned",value:function(e,t){return new nn(this.property,this.value,t,b({},e.transition,this.transition),e.now)}},{key:"untransitioned",value:function(){return new nn(this.property,this.value,null,{},0)}}]),e}(),an=function(){function e(t){p(this,e),this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}return f(e,[{key:"getValue",value:function(e){return C(this._values[e].value.value)}},{key:"setValue",value:function(e,t){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new tn(this._values[e].property)),this._values[e].value=new en(this._values[e].property,null===t?void 0:C(t))}},{key:"getTransition",value:function(e){return C(this._values[e].transition)}},{key:"setTransition",value:function(e,t){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new tn(this._values[e].property)),this._values[e].transition=C(t)||void 0}},{key:"serialize",value:function(){for(var e={},t=0,i=Object.keys(this._values);t<i.length;t++){var a=i[t],n=this.getValue(a);void 0!==n&&(e[a]=n);var r=this.getTransition(a);void 0!==r&&(e["".concat(a,"-transition")]=r)}return e}},{key:"transitioned",value:function(e,t){for(var i=new rn(this._properties),a=0,n=Object.keys(this._values);a<n.length;a++){var r=n[a];i._values[r]=this._values[r].transitioned(e,t._values[r])}return i}},{key:"untransitioned",value:function(){for(var e=new rn(this._properties),t=0,i=Object.keys(this._values);t<i.length;t++){var a=i[t];e._values[a]=this._values[a].untransitioned()}return e}}]),e}(),nn=function(){function e(t,i,a,n,r){p(this,e),this.property=t,this.value=i,this.begin=r+n.delay||0,this.end=this.begin+n.duration||0,t.specification.transition&&(n.delay||n.duration)&&(this.prior=a)}return f(e,[{key:"possiblyEvaluate",value:function(e,t,i){var a=e.now||0,n=this.value.possiblyEvaluate(e,t,i),r=this.prior;if(r){if(a>this.end)return this.prior=null,n;if(this.value.isDataDriven())return this.prior=null,n;if(a<this.begin)return r.possiblyEvaluate(e,t,i);var o=(a-this.begin)/(this.end-this.begin);return this.property.interpolate(r.possiblyEvaluate(e,t,i),n,function(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,i=t*e;return 4*(e<.5?i:3*(e-t)+i-.75)}(o))}return n}}]),e}(),rn=function(){function e(t){p(this,e),this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}return f(e,[{key:"possiblyEvaluate",value:function(e,t,i){for(var a=new ln(this._properties),n=0,r=Object.keys(this._values);n<r.length;n++){var o=r[n];a._values[o]=this._values[o].possiblyEvaluate(e,t,i)}return a}},{key:"hasTransition",value:function(){for(var e=0,t=Object.keys(this._values);e<t.length;e++){var i=t[e];if(this._values[i].prior)return!0}return!1}}]),e}(),on=function(){function e(t){p(this,e),this._properties=t,this._values=Object.create(t.defaultPropertyValues)}return f(e,[{key:"getValue",value:function(e){return C(this._values[e].value)}},{key:"setValue",value:function(e,t){this._values[e]=new en(this._values[e].property,null===t?void 0:C(t))}},{key:"serialize",value:function(){for(var e={},t=0,i=Object.keys(this._values);t<i.length;t++){var a=i[t],n=this.getValue(a);void 0!==n&&(e[a]=n)}return e}},{key:"possiblyEvaluate",value:function(e,t,i){for(var a=new ln(this._properties),n=0,r=Object.keys(this._values);n<r.length;n++){var o=r[n];a._values[o]=this._values[o].possiblyEvaluate(e,t,i)}return a}}]),e}(),sn=function(){function e(t,i,a){p(this,e),this.property=t,this.value=i,this.parameters=a}return f(e,[{key:"isConstant",value:function(){return"constant"===this.value.kind}},{key:"constantOr",value:function(e){return"constant"===this.value.kind?this.value.value:e}},{key:"evaluate",value:function(e,t,i,a){return this.property.evaluate(this.value,this.parameters,e,t,i,a)}}]),e}(),ln=function(){function e(t){p(this,e),this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}return f(e,[{key:"get",value:function(e){return this._values[e]}}]),e}(),cn=function(){function e(t){p(this,e),this.specification=t}return f(e,[{key:"possiblyEvaluate",value:function(e,t){if(e.isDataDriven())throw new Error("Value should not be data driven");return e.expression.evaluate(t)}},{key:"interpolate",value:function(e,t,i){var a=jt[this.specification.type];return a?a(e,t,i):e}}]),e}(),un=function(){function e(t,i){p(this,e),this.specification=t,this.overrides=i}return f(e,[{key:"possiblyEvaluate",value:function(e,t,i,a){return new sn(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(t,null,{},i,a)}:e.expression,t)}},{key:"interpolate",value:function(e,t,i){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new sn(this,{kind:"constant",value:void 0},e.parameters);var a=jt[this.specification.type];return a?new sn(this,{kind:"constant",value:a(e.value.value,t.value.value,i)},e.parameters):e}},{key:"evaluate",value:function(e,t,i,a,n,r){return"constant"===e.kind?e.value:e.evaluate(t,i,a,n,r)}}]),e}(),hn=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"possiblyEvaluate",value:function(e,t,i,a){if(void 0===e.value)return new sn(this,{kind:"constant",value:void 0},t);if("constant"===e.expression.kind){var n=e.expression.evaluate(t,null,{},i,a),r="resolvedImage"===e.property.specification.type&&"string"!=typeof n?n.name:n,o=this._calculate(r,r,r,t);return new sn(this,{kind:"constant",value:o},t)}if("camera"===e.expression.kind){var s=this._calculate(e.expression.evaluate({zoom:t.zoom-1}),e.expression.evaluate({zoom:t.zoom}),e.expression.evaluate({zoom:t.zoom+1}),t);return new sn(this,{kind:"constant",value:s},t)}return new sn(this,e.expression,t)}},{key:"evaluate",value:function(e,t,i,a,n,r){if("source"===e.kind){var o=e.evaluate(t,i,a,n,r);return this._calculate(o,o,o,t)}return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(t.zoom)-1},i,a),e.evaluate({zoom:Math.floor(t.zoom)},i,a),e.evaluate({zoom:Math.floor(t.zoom)+1},i,a),t):e.value}},{key:"_calculate",value:function(e,t,i,a){return a.zoom>a.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:i,to:t}}},{key:"interpolate",value:function(e){return e}}]),i}(un),dn=function(){function e(t){p(this,e),this.specification=t}return f(e,[{key:"possiblyEvaluate",value:function(e,t,i,a){if(void 0!==e.value){if("constant"===e.expression.kind){var n=e.expression.evaluate(t,null,{},i,a);return this._calculate(n,n,n,t)}return this._calculate(e.expression.evaluate(new $a(Math.floor(t.zoom-1),t)),e.expression.evaluate(new $a(Math.floor(t.zoom),t)),e.expression.evaluate(new $a(Math.floor(t.zoom+1),t)),t)}}},{key:"_calculate",value:function(e,t,i,a){return a.zoom>a.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:i,to:t}}},{key:"interpolate",value:function(e){return e}}]),e}(),fn=function(){function e(t){p(this,e),this.specification=t}return f(e,[{key:"possiblyEvaluate",value:function(e,t,i,a){return!!e.expression.evaluate(t,null,{},i,a)}},{key:"interpolate",value:function(){return!1}}]),e}(),pn=f((function e(t){for(var i in p(this,e),this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],t){var a=t[i];a.specification.overridable&&this.overridableProperties.push(i);var n=this.defaultPropertyValues[i]=new en(a,void 0),r=this.defaultTransitionablePropertyValues[i]=new tn(a);this.defaultTransitioningPropertyValues[i]=r.untransitioned(),this.defaultPossiblyEvaluatedValues[i]=n.possiblyEvaluate({})}}));Oa("DataDrivenProperty",un),Oa("DataConstantProperty",cn),Oa("CrossFadedDataDrivenProperty",hn),Oa("CrossFadedProperty",dn),Oa("ColorRampProperty",fn);var mn="-transition",gn=function(e){m(i,e);var t=g(i);function i(e,a){var n;if(p(this,i),(n=t.call(this)).id=e.id,n.type=e.type,n._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==e.type&&(n.metadata=e.metadata,n.minzoom=e.minzoom,n.maxzoom=e.maxzoom,"background"!==e.type&&(n.source=e.source,n.sourceLayer=e["source-layer"],n.filter=e.filter),a.layout&&(n._unevaluatedLayout=new on(a.layout)),a.paint)){for(var r in n._transitionablePaint=new an(a.paint),e.paint)n.setPaintProperty(r,e.paint[r],{validate:!1});for(var o in e.layout)n.setLayoutProperty(o,e.layout[o],{validate:!1});n._transitioningPaint=n._transitionablePaint.untransitioned(),n.paint=new ln(a.paint)}return l(n)}return f(i,[{key:"getCrossfadeParameters",value:function(){return this._crossfadeParameters}},{key:"getLayoutProperty",value:function(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}},{key:"setLayoutProperty",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};null!=t&&this._validate(ka,"layers.".concat(this.id,".layout.").concat(e),e,t,i)||("visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility=t)}},{key:"getPaintProperty",value:function(e){return e.endsWith(mn)?this._transitionablePaint.getTransition(e.slice(0,-mn.length)):this._transitionablePaint.getValue(e)}},{key:"setPaintProperty",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=t&&this._validate(wa,"layers.".concat(this.id,".paint.").concat(e),e,t,i))return!1;if(e.endsWith(mn))return this._transitionablePaint.setTransition(e.slice(0,-mn.length),t||void 0),!1;var a=this._transitionablePaint._values[e],n="cross-faded-data-driven"===a.property.specification["property-type"],r=a.value.isDataDriven(),o=a.value;this._transitionablePaint.setValue(e,t),this._handleSpecialPaintPropertyUpdate(e);var s=this._transitionablePaint._values[e].value;return s.isDataDriven()||r||n||this._handleOverridablePaintPropertyUpdate(e,o,s)}},{key:"_handleSpecialPaintPropertyUpdate",value:function(e){}},{key:"_handleOverridablePaintPropertyUpdate",value:function(e,t,i){return!1}},{key:"isHidden",value:function(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}},{key:"updateTransitions",value:function(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}},{key:"hasTransition",value:function(){return this._transitioningPaint.hasTransition()}},{key:"recalculate",value:function(e,t){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)}},{key:"serialize",value:function(){var e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),S(e,(function(e,t){return!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)}))}},{key:"_validate",value:function(e,t,i,a){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!n||!1!==n.validate)&&Sa(this,e.call(ba,{key:t,layerType:this.type,objectKey:i,value:a,styleSpec:pe,style:{glyphs:!0,sprite:!0}}))}},{key:"is3D",value:function(){return!1}},{key:"isTileClipped",value:function(){return!1}},{key:"hasOffscreenPass",value:function(){return!1}},{key:"resize",value:function(){}},{key:"isStateDependent",value:function(){for(var e in this.paint._values){var t=this.paint.get(e);if(t instanceof sn&&Si(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1}}]),i}(fe),vn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},yn=f((function e(t,i){p(this,e),this._structArray=t,this._pos1=i*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8})),xn=function(){function e(){p(this,e),this.isTransferred=!1,this.capacity=-1,this.resize(0)}return f(e,[{key:"_trim",value:function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}},{key:"clear",value:function(){this.length=0}},{key:"resize",value:function(e){this.reserve(e),this.length=e}},{key:"reserve",value:function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}}},{key:"_refreshViews",value:function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}],[{key:"serialize",value:function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}},{key:"deserialize",value:function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t}}]),e}();function bn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=0,a=0;return{members:e.map((function(e){var n=vn[e.type].BYTES_PER_ELEMENT,r=i=_n(i,Math.max(t,n)),o=e.components||1;return a=Math.max(a,n),i+=n*o,{name:e.name,type:e.type,components:o,offset:r}})),size:_n(i,Math.max(a,t)),alignment:t}}function _n(e,t){return Math.ceil(e/t)*t}var wn=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t){var i=this.length;return this.resize(i+1),this.emplace(i,e,t)}},{key:"emplace",value:function(e,t,i){var a=2*e;return this.int16[a+0]=t,this.int16[a+1]=i,e}}]),i}(xn);wn.prototype.bytesPerElement=4,Oa("StructArrayLayout2i4",wn);var kn=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,i,a){var n=this.length;return this.resize(n+1),this.emplace(n,e,t,i,a)}},{key:"emplace",value:function(e,t,i,a,n){var r=4*e;return this.int16[r+0]=t,this.int16[r+1]=i,this.int16[r+2]=a,this.int16[r+3]=n,e}}]),i}(xn);kn.prototype.bytesPerElement=8,Oa("StructArrayLayout4i8",kn);var Sn=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,i,a,n,r){var o=this.length;return this.resize(o+1),this.emplace(o,e,t,i,a,n,r)}},{key:"emplace",value:function(e,t,i,a,n,r,o){var s=6*e;return this.int16[s+0]=t,this.int16[s+1]=i,this.int16[s+2]=a,this.int16[s+3]=n,this.int16[s+4]=r,this.int16[s+5]=o,e}}]),i}(xn);Sn.prototype.bytesPerElement=12,Oa("StructArrayLayout2i4i12",Sn);var Cn=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,i,a,n,r){var o=this.length;return this.resize(o+1),this.emplace(o,e,t,i,a,n,r)}},{key:"emplace",value:function(e,t,i,a,n,r,o){var s=4*e,l=8*e;return this.int16[s+0]=t,this.int16[s+1]=i,this.uint8[l+4]=a,this.uint8[l+5]=n,this.uint8[l+6]=r,this.uint8[l+7]=o,e}}]),i}(xn);Cn.prototype.bytesPerElement=8,Oa("StructArrayLayout2i4ub8",Cn);var An=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t){var i=this.length;return this.resize(i+1),this.emplace(i,e,t)}},{key:"emplace",value:function(e,t,i){var a=2*e;return this.float32[a+0]=t,this.float32[a+1]=i,e}}]),i}(xn);An.prototype.bytesPerElement=8,Oa("StructArrayLayout2f8",An);var On=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,i,a,n,r,o,s,l,c){var u=this.length;return this.resize(u+1),this.emplace(u,e,t,i,a,n,r,o,s,l,c)}},{key:"emplace",value:function(e,t,i,a,n,r,o,s,l,c,u){var h=10*e;return this.uint16[h+0]=t,this.uint16[h+1]=i,this.uint16[h+2]=a,this.uint16[h+3]=n,this.uint16[h+4]=r,this.uint16[h+5]=o,this.uint16[h+6]=s,this.uint16[h+7]=l,this.uint16[h+8]=c,this.uint16[h+9]=u,e}}]),i}(xn);On.prototype.bytesPerElement=20,Oa("StructArrayLayout10ui20",On);var Tn=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,i,a,n,r,o,s,l,c,u,h){var d=this.length;return this.resize(d+1),this.emplace(d,e,t,i,a,n,r,o,s,l,c,u,h)}},{key:"emplace",value:function(e,t,i,a,n,r,o,s,l,c,u,h,d){var f=12*e;return this.int16[f+0]=t,this.int16[f+1]=i,this.int16[f+2]=a,this.int16[f+3]=n,this.uint16[f+4]=r,this.uint16[f+5]=o,this.uint16[f+6]=s,this.uint16[f+7]=l,this.int16[f+8]=c,this.int16[f+9]=u,this.int16[f+10]=h,this.int16[f+11]=d,e}}]),i}(xn);Tn.prototype.bytesPerElement=24,Oa("StructArrayLayout4i4ui4i24",Tn);var Mn=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,i){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,i)}},{key:"emplace",value:function(e,t,i,a){var n=3*e;return this.float32[n+0]=t,this.float32[n+1]=i,this.float32[n+2]=a,e}}]),i}(xn);Mn.prototype.bytesPerElement=12,Oa("StructArrayLayout3f12",Mn);var En=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)}},{key:"emplace",value:function(e,t){return this.uint32[1*e+0]=t,e}}]),i}(xn);En.prototype.bytesPerElement=4,Oa("StructArrayLayout1ul4",En);var In=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,i,a,n,r,o,s,l){var c=this.length;return this.resize(c+1),this.emplace(c,e,t,i,a,n,r,o,s,l)}},{key:"emplace",value:function(e,t,i,a,n,r,o,s,l,c){var u=10*e,h=5*e;return this.int16[u+0]=t,this.int16[u+1]=i,this.int16[u+2]=a,this.int16[u+3]=n,this.int16[u+4]=r,this.int16[u+5]=o,this.uint32[h+3]=s,this.uint16[u+8]=l,this.uint16[u+9]=c,e}}]),i}(xn);In.prototype.bytesPerElement=20,Oa("StructArrayLayout6i1ul2ui20",In);var Pn=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,i,a,n,r){var o=this.length;return this.resize(o+1),this.emplace(o,e,t,i,a,n,r)}},{key:"emplace",value:function(e,t,i,a,n,r,o){var s=6*e;return this.int16[s+0]=t,this.int16[s+1]=i,this.int16[s+2]=a,this.int16[s+3]=n,this.int16[s+4]=r,this.int16[s+5]=o,e}}]),i}(xn);Pn.prototype.bytesPerElement=12,Oa("StructArrayLayout2i2i2i12",Pn);var Dn=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,i,a,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,i,a,n)}},{key:"emplace",value:function(e,t,i,a,n,r){var o=4*e,s=8*e;return this.float32[o+0]=t,this.float32[o+1]=i,this.float32[o+2]=a,this.int16[s+6]=n,this.int16[s+7]=r,e}}]),i}(xn);Dn.prototype.bytesPerElement=16,Oa("StructArrayLayout2f1f2i16",Dn);var zn=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,i,a){var n=this.length;return this.resize(n+1),this.emplace(n,e,t,i,a)}},{key:"emplace",value:function(e,t,i,a,n){var r=12*e,o=3*e;return this.uint8[r+0]=t,this.uint8[r+1]=i,this.float32[o+1]=a,this.float32[o+2]=n,e}}]),i}(xn);zn.prototype.bytesPerElement=12,Oa("StructArrayLayout2ub2f12",zn);var Ln=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,i){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,i)}},{key:"emplace",value:function(e,t,i,a){var n=3*e;return this.uint16[n+0]=t,this.uint16[n+1]=i,this.uint16[n+2]=a,e}}]),i}(xn);Ln.prototype.bytesPerElement=6,Oa("StructArrayLayout3ui6",Ln);var jn=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,i,a,n,r,o,s,l,c,u,h,d,f,p,m,g){var v=this.length;return this.resize(v+1),this.emplace(v,e,t,i,a,n,r,o,s,l,c,u,h,d,f,p,m,g)}},{key:"emplace",value:function(e,t,i,a,n,r,o,s,l,c,u,h,d,f,p,m,g,v){var y=24*e,x=12*e,b=48*e;return this.int16[y+0]=t,this.int16[y+1]=i,this.uint16[y+2]=a,this.uint16[y+3]=n,this.uint32[x+2]=r,this.uint32[x+3]=o,this.uint32[x+4]=s,this.uint16[y+10]=l,this.uint16[y+11]=c,this.uint16[y+12]=u,this.float32[x+7]=h,this.float32[x+8]=d,this.uint8[b+36]=f,this.uint8[b+37]=p,this.uint8[b+38]=m,this.uint32[x+10]=g,this.int16[y+22]=v,e}}]),i}(xn);jn.prototype.bytesPerElement=48,Oa("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",jn);var Rn=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,i,a,n,r,o,s,l,c,u,h,d,f,p,m,g,v,y,x,b,_,w,k,S,C,A,O){var T=this.length;return this.resize(T+1),this.emplace(T,e,t,i,a,n,r,o,s,l,c,u,h,d,f,p,m,g,v,y,x,b,_,w,k,S,C,A,O)}},{key:"emplace",value:function(e,t,i,a,n,r,o,s,l,c,u,h,d,f,p,m,g,v,y,x,b,_,w,k,S,C,A,O,T){var M=34*e,E=17*e;return this.int16[M+0]=t,this.int16[M+1]=i,this.int16[M+2]=a,this.int16[M+3]=n,this.int16[M+4]=r,this.int16[M+5]=o,this.int16[M+6]=s,this.int16[M+7]=l,this.uint16[M+8]=c,this.uint16[M+9]=u,this.uint16[M+10]=h,this.uint16[M+11]=d,this.uint16[M+12]=f,this.uint16[M+13]=p,this.uint16[M+14]=m,this.uint16[M+15]=g,this.uint16[M+16]=v,this.uint16[M+17]=y,this.uint16[M+18]=x,this.uint16[M+19]=b,this.uint16[M+20]=_,this.uint16[M+21]=w,this.uint16[M+22]=k,this.uint32[E+12]=S,this.float32[E+13]=C,this.float32[E+14]=A,this.float32[E+15]=O,this.float32[E+16]=T,e}}]),i}(xn);Rn.prototype.bytesPerElement=68,Oa("StructArrayLayout8i15ui1ul4f68",Rn);var Fn=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)}},{key:"emplace",value:function(e,t){return this.float32[1*e+0]=t,e}}]),i}(xn);Fn.prototype.bytesPerElement=4,Oa("StructArrayLayout1f4",Fn);var Bn=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,i){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,i)}},{key:"emplace",value:function(e,t,i,a){var n=3*e;return this.int16[n+0]=t,this.int16[n+1]=i,this.int16[n+2]=a,e}}]),i}(xn);Bn.prototype.bytesPerElement=6,Oa("StructArrayLayout3i6",Bn);var Nn=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,i){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,i)}},{key:"emplace",value:function(e,t,i,a){var n=4*e;return this.uint32[2*e+0]=t,this.uint16[n+2]=i,this.uint16[n+3]=a,e}}]),i}(xn);Nn.prototype.bytesPerElement=8,Oa("StructArrayLayout1ul2ui8",Nn);var Vn=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t){var i=this.length;return this.resize(i+1),this.emplace(i,e,t)}},{key:"emplace",value:function(e,t,i){var a=2*e;return this.uint16[a+0]=t,this.uint16[a+1]=i,e}}]),i}(xn);Vn.prototype.bytesPerElement=4,Oa("StructArrayLayout2ui4",Vn);var Yn=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)}},{key:"emplace",value:function(e,t){return this.uint16[1*e+0]=t,e}}]),i}(xn);Yn.prototype.bytesPerElement=2,Oa("StructArrayLayout1ui2",Yn);var Wn=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,i,a){var n=this.length;return this.resize(n+1),this.emplace(n,e,t,i,a)}},{key:"emplace",value:function(e,t,i,a,n){var r=4*e;return this.float32[r+0]=t,this.float32[r+1]=i,this.float32[r+2]=a,this.float32[r+3]=n,e}}]),i}(xn);Wn.prototype.bytesPerElement=16,Oa("StructArrayLayout4f16",Wn);var Hn=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"anchorPointX",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"anchorPointY",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"x1",get:function(){return this._structArray.int16[this._pos2+2]}},{key:"y1",get:function(){return this._structArray.int16[this._pos2+3]}},{key:"x2",get:function(){return this._structArray.int16[this._pos2+4]}},{key:"y2",get:function(){return this._structArray.int16[this._pos2+5]}},{key:"featureIndex",get:function(){return this._structArray.uint32[this._pos4+3]}},{key:"sourceLayerIndex",get:function(){return this._structArray.uint16[this._pos2+8]}},{key:"bucketIndex",get:function(){return this._structArray.uint16[this._pos2+9]}},{key:"anchorPoint",get:function(){return new F(this.anchorPointX,this.anchorPointY)}}]),i}(yn);Hn.prototype.size=20;var Un=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"get",value:function(e){return new Hn(this,e)}}]),i}(In);Oa("CollisionBoxArray",Un);var Xn=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"anchorX",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"anchorY",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"glyphStartIndex",get:function(){return this._structArray.uint16[this._pos2+2]}},{key:"numGlyphs",get:function(){return this._structArray.uint16[this._pos2+3]}},{key:"vertexStartIndex",get:function(){return this._structArray.uint32[this._pos4+2]}},{key:"lineStartIndex",get:function(){return this._structArray.uint32[this._pos4+3]}},{key:"lineLength",get:function(){return this._structArray.uint32[this._pos4+4]}},{key:"segment",get:function(){return this._structArray.uint16[this._pos2+10]}},{key:"lowerSize",get:function(){return this._structArray.uint16[this._pos2+11]}},{key:"upperSize",get:function(){return this._structArray.uint16[this._pos2+12]}},{key:"lineOffsetX",get:function(){return this._structArray.float32[this._pos4+7]}},{key:"lineOffsetY",get:function(){return this._structArray.float32[this._pos4+8]}},{key:"writingMode",get:function(){return this._structArray.uint8[this._pos1+36]}},{key:"placedOrientation",get:function(){return this._structArray.uint8[this._pos1+37]},set:function(e){this._structArray.uint8[this._pos1+37]=e}},{key:"hidden",get:function(){return this._structArray.uint8[this._pos1+38]},set:function(e){this._structArray.uint8[this._pos1+38]=e}},{key:"crossTileID",get:function(){return this._structArray.uint32[this._pos4+10]},set:function(e){this._structArray.uint32[this._pos4+10]=e}},{key:"associatedIconIndex",get:function(){return this._structArray.int16[this._pos2+22]}}]),i}(yn);Xn.prototype.size=48;var Gn=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"get",value:function(e){return new Xn(this,e)}}]),i}(jn);Oa("PlacedSymbolArray",Gn);var qn=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"anchorX",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"anchorY",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"rightJustifiedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+2]}},{key:"centerJustifiedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+3]}},{key:"leftJustifiedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+4]}},{key:"verticalPlacedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+5]}},{key:"placedIconSymbolIndex",get:function(){return this._structArray.int16[this._pos2+6]}},{key:"verticalPlacedIconSymbolIndex",get:function(){return this._structArray.int16[this._pos2+7]}},{key:"key",get:function(){return this._structArray.uint16[this._pos2+8]}},{key:"textBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+9]}},{key:"textBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+10]}},{key:"verticalTextBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+11]}},{key:"verticalTextBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+12]}},{key:"iconBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+13]}},{key:"iconBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+14]}},{key:"verticalIconBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+15]}},{key:"verticalIconBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+16]}},{key:"featureIndex",get:function(){return this._structArray.uint16[this._pos2+17]}},{key:"numHorizontalGlyphVertices",get:function(){return this._structArray.uint16[this._pos2+18]}},{key:"numVerticalGlyphVertices",get:function(){return this._structArray.uint16[this._pos2+19]}},{key:"numIconVertices",get:function(){return this._structArray.uint16[this._pos2+20]}},{key:"numVerticalIconVertices",get:function(){return this._structArray.uint16[this._pos2+21]}},{key:"useRuntimeCollisionCircles",get:function(){return this._structArray.uint16[this._pos2+22]}},{key:"crossTileID",get:function(){return this._structArray.uint32[this._pos4+12]},set:function(e){this._structArray.uint32[this._pos4+12]=e}},{key:"textBoxScale",get:function(){return this._structArray.float32[this._pos4+13]}},{key:"textOffset0",get:function(){return this._structArray.float32[this._pos4+14]}},{key:"textOffset1",get:function(){return this._structArray.float32[this._pos4+15]}},{key:"collisionCircleDiameter",get:function(){return this._structArray.float32[this._pos4+16]}}]),i}(yn);qn.prototype.size=68;var Zn=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"get",value:function(e){return new qn(this,e)}}]),i}(Rn);Oa("SymbolInstanceArray",Zn);var Kn=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"getoffsetX",value:function(e){return this.float32[1*e+0]}}]),i}(Fn);Oa("GlyphOffsetArray",Kn);var Jn=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"getx",value:function(e){return this.int16[3*e+0]}},{key:"gety",value:function(e){return this.int16[3*e+1]}},{key:"gettileUnitDistanceFromAnchor",value:function(e){return this.int16[3*e+2]}}]),i}(Bn);Oa("SymbolLineVertexArray",Jn);var Qn=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"featureIndex",get:function(){return this._structArray.uint32[this._pos4+0]}},{key:"sourceLayerIndex",get:function(){return this._structArray.uint16[this._pos2+2]}},{key:"bucketIndex",get:function(){return this._structArray.uint16[this._pos2+3]}}]),i}(yn);Qn.prototype.size=8;var $n=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"get",value:function(e){return new Qn(this,e)}}]),i}(Nn);Oa("FeatureIndexArray",$n);var er=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i)}(wn),tr=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i)}(wn),ir=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i)}(wn),ar=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i)}(Sn),nr=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i)}(Cn),rr=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i)}(An),or=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i)}(On),sr=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i)}(Tn),lr=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i)}(Mn),cr=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i)}(En),ur=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i)}(Pn),hr=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i)}(zn),dr=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i)}(Ln),fr=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i)}(Vn),pr=bn([{name:"a_pos",components:2,type:"Int16"}],4).members,mr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];p(this,e),this.segments=t}return f(e,[{key:"prepareSegment",value:function(t,i,a,n){var r=this.segments[this.segments.length-1];return t>e.MAX_VERTEX_ARRAY_LENGTH&&O("Max vertices per segment is ".concat(e.MAX_VERTEX_ARRAY_LENGTH,": bucket requested ").concat(t)),(!r||r.vertexLength+t>e.MAX_VERTEX_ARRAY_LENGTH||r.sortKey!==n)&&(r={vertexOffset:i.length,primitiveOffset:a.length,vertexLength:0,primitiveLength:0},void 0!==n&&(r.sortKey=n),this.segments.push(r)),r}},{key:"get",value:function(){return this.segments}},{key:"destroy",value:function(){var e,t=d(this.segments);try{for(t.s();!(e=t.n()).done;){var i=e.value;for(var a in i.vaos)i.vaos[a].destroy()}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"simpleSegment",value:function(t,i,a,n){return new e([{vertexOffset:t,primitiveOffset:i,vertexLength:a,primitiveLength:n,vaos:{},sortKey:0}])}}]),e}();function gr(e,t){return 256*(e=y(Math.floor(e),0,255))+y(Math.floor(t),0,255)}mr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Oa("SegmentVector",mr);var vr=bn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),yr={exports:{}},xr={exports:{}};xr.exports=function(e,t){var i,a,n,r,o,s,l,c;for(a=e.length-(i=3&e.length),n=t,o=3432918353,s=461845907,c=0;c<a;)l=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,n=27492+(65535&(r=5*(65535&(n=(n^=l=(65535&(l=(l=(65535&l)*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|n>>>19))+((5*(n>>>16)&65535)<<16)&4294967295))+((58964+(r>>>16)&65535)<<16);switch(l=0,i){case 3:l^=(255&e.charCodeAt(c+2))<<16;case 2:l^=(255&e.charCodeAt(c+1))<<8;case 1:n^=l=(65535&(l=(l=(65535&(l^=255&e.charCodeAt(c)))*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return n^=e.length,n=2246822507*(65535&(n^=n>>>16))+((2246822507*(n>>>16)&65535)<<16)&4294967295,n=3266489909*(65535&(n^=n>>>13))+((3266489909*(n>>>16)&65535)<<16)&4294967295,(n^=n>>>16)>>>0};var br={exports:{}};br.exports=function(e,t){for(var i,a=e.length,n=t^a,r=0;a>=4;)i=1540483477*(65535&(i=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+((1540483477*(i>>>16)&65535)<<16),n=1540483477*(65535&n)+((1540483477*(n>>>16)&65535)<<16)^(i=1540483477*(65535&(i^=i>>>24))+((1540483477*(i>>>16)&65535)<<16)),a-=4,++r;switch(a){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+((1540483477*(n>>>16)&65535)<<16)}return n=1540483477*(65535&(n^=n>>>13))+((1540483477*(n>>>16)&65535)<<16),(n^=n>>>15)>>>0};var _r=xr.exports,wr=br.exports;yr.exports=_r,yr.exports.murmur3=_r,yr.exports.murmur2=wr;var kr=function(){function e(){p(this,e),this.ids=[],this.positions=[],this.indexed=!1}return f(e,[{key:"add",value:function(e,t,i,a){this.ids.push(Sr(e)),this.positions.push(t,i,a)}},{key:"getPositions",value:function(e){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");for(var t=Sr(e),i=0,a=this.ids.length-1;i<a;){var n=i+a>>1;this.ids[n]>=t?a=n:i=n+1}for(var r=[];this.ids[i]===t;)r.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return r}}],[{key:"serialize",value:function(e,t){var i=new Float64Array(e.ids),a=new Uint32Array(e.positions);return function e(t,i,a,n){for(;a<n;){for(var r=t[a+n>>1],o=a-1,s=n+1;;){do{o++}while(t[o]<r);do{s--}while(t[s]>r);if(o>=s)break;Cr(t,o,s),Cr(i,3*o,3*s),Cr(i,3*o+1,3*s+1),Cr(i,3*o+2,3*s+2)}s-a<n-s?(e(t,i,a,s),a=s+1):(e(t,i,s+1,n),n=s)}}(i,a,0,i.length-1),t&&t.push(i.buffer,a.buffer),{ids:i,positions:a}}},{key:"deserialize",value:function(t){var i=new e;return i.ids=t.ids,i.positions=t.positions,i.indexed=!0,i}}]),e}();function Sr(e){var t=+e;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:yr.exports(String(e))}function Cr(e,t,i){var a=e[t];e[t]=e[i],e[i]=a}Oa("FeaturePositionMap",kr);var Ar=f((function e(t,i){p(this,e),this.gl=t.gl,this.location=i})),Or=function(e){m(i,e);var t=g(i);function i(e,a){var n;return p(this,i),(n=t.call(this,e,a)).current=0,n}return f(i,[{key:"set",value:function(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}]),i}(Ar),Tr=function(e){m(i,e);var t=g(i);function i(e,a){var n;return p(this,i),(n=t.call(this,e,a)).current=[0,0,0,0],n}return f(i,[{key:"set",value:function(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}]),i}(Ar),Mr=function(e){m(i,e);var t=g(i);function i(e,a){var n;return p(this,i),(n=t.call(this,e,a)).current=Ue.transparent,n}return f(i,[{key:"set",value:function(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}]),i}(Ar),Er=new Float32Array(16);function Ir(e){return[gr(255*e.r,255*e.g),gr(255*e.b,255*e.a)]}var Pr=function(){function e(t,i,a){p(this,e),this.value=t,this.uniformNames=i.map((function(e){return"u_".concat(e)})),this.type=a}return f(e,[{key:"setUniform",value:function(e,t,i){e.set(i.constantOr(this.value))}},{key:"getBinding",value:function(e,t,i){return"color"===this.type?new Mr(e,t):new Or(e,t)}}]),e}(),Dr=function(){function e(t,i){p(this,e),this.uniformNames=i.map((function(e){return"u_".concat(e)})),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}return f(e,[{key:"setConstantPatternPositions",value:function(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tlbr,this.patternTo=e.tlbr}},{key:"setUniform",value:function(e,t,i,a){var n="u_pattern_to"===a?this.patternTo:"u_pattern_from"===a?this.patternFrom:"u_pixel_ratio_to"===a?this.pixelRatioTo:"u_pixel_ratio_from"===a?this.pixelRatioFrom:null;n&&e.set(n)}},{key:"getBinding",value:function(e,t,i){return"u_pattern"===i.substr(0,9)?new Tr(e,t):new Or(e,t)}}]),e}(),zr=function(){function e(t,i,a,n){p(this,e),this.expression=t,this.type=a,this.maxValue=0,this.paintVertexAttributes=i.map((function(e){return{name:"a_".concat(e),type:"Float32",components:"color"===a?2:1,offset:0}})),this.paintVertexArray=new n}return f(e,[{key:"populatePaintArray",value:function(e,t,i,a,n){var r=this.paintVertexArray.length,o=this.expression.evaluate(new $a(0),t,{},a,[],n);this.paintVertexArray.resize(e),this._setPaintValue(r,e,o)}},{key:"updatePaintArray",value:function(e,t,i,a){var n=this.expression.evaluate({zoom:0},i,a);this._setPaintValue(e,t,n)}},{key:"_setPaintValue",value:function(e,t,i){if("color"===this.type)for(var a=Ir(i),n=e;n<t;n++)this.paintVertexArray.emplace(n,a[0],a[1]);else{for(var r=e;r<t;r++)this.paintVertexArray.emplace(r,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}}},{key:"upload",value:function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}},{key:"destroy",value:function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}]),e}(),Lr=function(){function e(t,i,a,n,r,o){p(this,e),this.expression=t,this.uniformNames=i.map((function(e){return"u_".concat(e,"_t")})),this.type=a,this.useIntegerZoom=n,this.zoom=r,this.maxValue=0,this.paintVertexAttributes=i.map((function(e){return{name:"a_".concat(e),type:"Float32",components:"color"===a?4:2,offset:0}})),this.paintVertexArray=new o}return f(e,[{key:"populatePaintArray",value:function(e,t,i,a,n){var r=this.expression.evaluate(new $a(this.zoom),t,{},a,[],n),o=this.expression.evaluate(new $a(this.zoom+1),t,{},a,[],n),s=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(s,e,r,o)}},{key:"updatePaintArray",value:function(e,t,i,a){var n=this.expression.evaluate({zoom:this.zoom},i,a),r=this.expression.evaluate({zoom:this.zoom+1},i,a);this._setPaintValue(e,t,n,r)}},{key:"_setPaintValue",value:function(e,t,i,a){if("color"===this.type)for(var n=Ir(i),r=Ir(a),o=e;o<t;o++)this.paintVertexArray.emplace(o,n[0],n[1],r[0],r[1]);else{for(var s=e;s<t;s++)this.paintVertexArray.emplace(s,i,a);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(a))}}},{key:"upload",value:function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}},{key:"destroy",value:function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}},{key:"setUniform",value:function(e,t){var i=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,a=y(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);e.set(a)}},{key:"getBinding",value:function(e,t,i){return new Or(e,t)}}]),e}(),jr=function(){function e(t,i,a,n,r,o){p(this,e),this.expression=t,this.type=i,this.useIntegerZoom=a,this.zoom=n,this.layerId=o,this.zoomInPaintVertexArray=new r,this.zoomOutPaintVertexArray=new r}return f(e,[{key:"populatePaintArray",value:function(e,t,i){var a=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(a,e,t.patterns&&t.patterns[this.layerId],i)}},{key:"updatePaintArray",value:function(e,t,i,a,n){this._setPaintValues(e,t,i.patterns&&i.patterns[this.layerId],n)}},{key:"_setPaintValues",value:function(e,t,i,a){if(a&&i){var n=i.min,r=i.mid,o=i.max,s=a[n],l=a[r],c=a[o];if(s&&l&&c)for(var u=e;u<t;u++)this.zoomInPaintVertexArray.emplace(u,l.tl[0],l.tl[1],l.br[0],l.br[1],s.tl[0],s.tl[1],s.br[0],s.br[1],l.pixelRatio,s.pixelRatio),this.zoomOutPaintVertexArray.emplace(u,l.tl[0],l.tl[1],l.br[0],l.br[1],c.tl[0],c.tl[1],c.br[0],c.br[1],l.pixelRatio,c.pixelRatio)}}},{key:"upload",value:function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,vr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,vr.members,this.expression.isStateDependent))}},{key:"destroy",value:function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}]),e}(),Rr=function(){function e(t,i,a){p(this,e),this.binders={},this._buffers=[];var n=[];for(var r in t.paint._values)if(a(r)){var o=t.paint.get(r);if(o instanceof sn&&Si(o.property.specification)){var s=Br(r,t.type),l=o.value,c=o.property.specification.type,u=o.property.useIntegerZoom,h=o.property.specification["property-type"],d="cross-faded"===h||"cross-faded-data-driven"===h;if("constant"===l.kind)this.binders[r]=d?new Dr(l.value,s):new Pr(l.value,s,c),n.push("/u_".concat(r));else if("source"===l.kind||d){var f=Nr(r,c,"source");this.binders[r]=d?new jr(l,c,u,i,f,t.id):new zr(l,s,c,f),n.push("/a_".concat(r))}else{var m=Nr(r,c,"composite");this.binders[r]=new Lr(l,s,c,u,i,m),n.push("/z_".concat(r))}}}this.cacheKey=n.sort().join("")}return f(e,[{key:"getMaxValue",value:function(e){var t=this.binders[e];return t instanceof zr||t instanceof Lr?t.maxValue:0}},{key:"populatePaintArrays",value:function(e,t,i,a,n){for(var r in this.binders){var o=this.binders[r];(o instanceof zr||o instanceof Lr||o instanceof jr)&&o.populatePaintArray(e,t,i,a,n)}}},{key:"setConstantPatternPositions",value:function(e,t){for(var i in this.binders){var a=this.binders[i];a instanceof Dr&&a.setConstantPatternPositions(e,t)}}},{key:"updatePaintArrays",value:function(e,t,i,a,n){var r=!1;for(var o in e){var s,l=t.getPositions(o),c=d(l);try{for(c.s();!(s=c.n()).done;){var u=s.value,h=i.feature(u.index);for(var f in this.binders){var p=this.binders[f];if((p instanceof zr||p instanceof Lr||p instanceof jr)&&!0===p.expression.isStateDependent){var m=a.paint.get(f);p.expression=m.value,p.updatePaintArray(u.start,u.end,h,e[o],n),r=!0}}}}catch(g){c.e(g)}finally{c.f()}}return r}},{key:"defines",value:function(){var e=[];for(var t in this.binders){var i=this.binders[t];(i instanceof Pr||i instanceof Dr)&&e.push.apply(e,u(i.uniformNames.map((function(e){return"#define HAS_UNIFORM_".concat(e)}))))}return e}},{key:"getBinderAttributes",value:function(){var e=[];for(var t in this.binders){var i=this.binders[t];if(i instanceof zr||i instanceof Lr)for(var a=0;a<i.paintVertexAttributes.length;a++)e.push(i.paintVertexAttributes[a].name);else if(i instanceof jr)for(var n=0;n<vr.members.length;n++)e.push(vr.members[n].name)}return e}},{key:"getBinderUniforms",value:function(){var e=[];for(var t in this.binders){var i=this.binders[t];if(i instanceof Pr||i instanceof Dr||i instanceof Lr){var a,n=d(i.uniformNames);try{for(n.s();!(a=n.n()).done;){var r=a.value;e.push(r)}}catch(o){n.e(o)}finally{n.f()}}}return e}},{key:"getPaintVertexBuffers",value:function(){return this._buffers}},{key:"getUniforms",value:function(e,t){var i=[];for(var a in this.binders){var n=this.binders[a];if(n instanceof Pr||n instanceof Dr||n instanceof Lr){var r,o=d(n.uniformNames);try{for(o.s();!(r=o.n()).done;){var s=r.value;if(t[s]){var l=n.getBinding(e,t[s],s);i.push({name:s,property:a,binding:l})}}}catch(c){o.e(c)}finally{o.f()}}}return i}},{key:"setUniforms",value:function(e,t,i,a){var n,r=d(t);try{for(r.s();!(n=r.n()).done;){var o=n.value,s=o.name,l=o.property,c=o.binding;this.binders[l].setUniform(c,a,i.get(l),s)}}catch(u){r.e(u)}finally{r.f()}}},{key:"updatePaintBuffers",value:function(e){for(var t in this._buffers=[],this.binders){var i=this.binders[t];if(e&&i instanceof jr){var a=2===e.fromScale?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;a&&this._buffers.push(a)}else(i instanceof zr||i instanceof Lr)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}}},{key:"upload",value:function(e){for(var t in this.binders){var i=this.binders[t];(i instanceof zr||i instanceof Lr||i instanceof jr)&&i.upload(e)}this.updatePaintBuffers()}},{key:"destroy",value:function(){for(var e in this.binders){var t=this.binders[e];(t instanceof zr||t instanceof Lr||t instanceof jr)&&t.destroy()}}}]),e}(),Fr=function(){function e(t,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0};p(this,e),this.programConfigurations={};var n,r=d(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;this.programConfigurations[o.id]=new Rr(o,i,a)}}catch(s){r.e(s)}finally{r.f()}this.needsUpload=!1,this._featureMap=new kr,this._bufferOffset=0}return f(e,[{key:"populatePaintArrays",value:function(e,t,i,a,n,r){for(var o in this.programConfigurations)this.programConfigurations[o].populatePaintArrays(e,t,a,n,r);void 0!==t.id&&this._featureMap.add(t.id,i,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}},{key:"updatePaintArrays",value:function(e,t,i,a){var n,r=d(i);try{for(r.s();!(n=r.n()).done;){var o=n.value;this.needsUpload=this.programConfigurations[o.id].updatePaintArrays(e,this._featureMap,t,o,a)||this.needsUpload}}catch(s){r.e(s)}finally{r.f()}}},{key:"get",value:function(e){return this.programConfigurations[e]}},{key:"upload",value:function(e){if(this.needsUpload){for(var t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}}},{key:"destroy",value:function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()}}]),e}();function Br(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace("".concat(t,"-"),"").replace(/-/g,"_")]}function Nr(e,t,i){var a={color:{source:An,composite:Wn},number:{source:Fn,composite:An}},n=function(e){return{"line-pattern":{source:or,composite:or},"fill-pattern":{source:or,composite:or},"fill-extrusion-pattern":{source:or,composite:or}}[e]}(e);return n&&n[i]||a[t][i]}Oa("ConstantBinder",Pr),Oa("CrossFadedConstantBinder",Dr),Oa("SourceExpressionBinder",zr),Oa("CrossFadedCompositeBinder",jr),Oa("CompositeExpressionBinder",Lr),Oa("ProgramConfiguration",Rr,{omit:["_buffers"]}),Oa("ProgramConfigurationSet",Fr);var Vr=8192,Yr=Math.pow(2,14)-1,Wr=-Yr-1;function Hr(e){for(var t=Vr/e.extent,i=e.loadGeometry(),a=0;a<i.length;a++)for(var n=i[a],r=0;r<n.length;r++){var o=n[r],s=Math.round(o.x*t),l=Math.round(o.y*t);o.x=y(s,Wr,Yr),o.y=y(l,Wr,Yr),(s<o.x||s>o.x+1||l<o.y||l>o.y+1)&&O("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return i}function Ur(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?Hr(e):[]}}function Xr(e,t,i,a,n){e.emplaceBack(2*t+(a+1)/2,2*i+(n+1)/2)}var Gr=function(){function e(t){p(this,e),this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new tr,this.indexArray=new dr,this.segments=new mr,this.programConfigurations=new Fr(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))}return f(e,[{key:"populate",value:function(e,t,i){var a=this.layers[0],n=[],r=null,o=!1;"circle"===a.type&&(o=!(r=a.layout.get("circle-sort-key")).isConstant());var s,l=d(e);try{for(l.s();!(s=l.n()).done;){var c=s.value,u=c.feature,h=c.id,f=c.index,p=c.sourceLayerIndex,m=this.layers[0]._featureFilter.needGeometry,g=Ur(u,m);if(this.layers[0]._featureFilter.filter(new $a(this.zoom),g,i)){var v=o?r.evaluate(g,{},i):void 0,y={id:h,properties:u.properties,type:u.type,sourceLayerIndex:p,index:f,geometry:m?g.geometry:Hr(u),patterns:{},sortKey:v};n.push(y)}}}catch(A){l.e(A)}finally{l.f()}o&&n.sort((function(e,t){return e.sortKey-t.sortKey}));for(var x=0,b=n;x<b.length;x++){var _=b[x],w=_.geometry,k=_.index,S=_.sourceLayerIndex,C=e[k].feature;this.addFeature(_,w,k,i),t.featureIndex.insert(C,w,k,S,this.index)}}},{key:"update",value:function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,pr),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}},{key:"addFeature",value:function(e,t,i,a){var n,r=d(t);try{for(r.s();!(n=r.n()).done;){var o,s=n.value,l=d(s);try{for(l.s();!(o=l.n()).done;){var c=o.value,u=c.x,h=c.y;if(!(u<0||u>=Vr||h<0||h>=Vr)){var f=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),p=f.vertexLength;Xr(this.layoutVertexArray,u,h,-1,-1),Xr(this.layoutVertexArray,u,h,1,-1),Xr(this.layoutVertexArray,u,h,1,1),Xr(this.layoutVertexArray,u,h,-1,1),this.indexArray.emplaceBack(p,p+1,p+2),this.indexArray.emplaceBack(p,p+3,p+2),f.vertexLength+=4,f.primitiveLength+=2}}}catch(m){l.e(m)}finally{l.f()}}}catch(m){r.e(m)}finally{r.f()}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,{},a)}}]),e}();function qr(e,t){for(var i=0;i<e.length;i++)if(ao(t,e[i]))return!0;for(var a=0;a<t.length;a++)if(ao(e,t[a]))return!0;return!!Qr(e,t)}function Zr(e,t,i){return!!ao(e,t)||!!eo(t,e,i)}function Kr(e,t){if(1===e.length)return io(t,e[0]);for(var i=0;i<t.length;i++)for(var a=t[i],n=0;n<a.length;n++)if(ao(e,a[n]))return!0;for(var r=0;r<e.length;r++)if(io(t,e[r]))return!0;for(var o=0;o<t.length;o++)if(Qr(e,t[o]))return!0;return!1}function Jr(e,t,i){if(e.length>1){if(Qr(e,t))return!0;for(var a=0;a<t.length;a++)if(eo(t[a],e,i))return!0}for(var n=0;n<e.length;n++)if(eo(e[n],t,i))return!0;return!1}function Qr(e,t){if(0===e.length||0===t.length)return!1;for(var i=0;i<e.length-1;i++)for(var a=e[i],n=e[i+1],r=0;r<t.length-1;r++)if($r(a,n,t[r],t[r+1]))return!0;return!1}function $r(e,t,i,a){return T(e,i,a)!==T(t,i,a)&&T(e,t,i)!==T(e,t,a)}function eo(e,t,i){var a=i*i;if(1===t.length)return e.distSqr(t[0])<a;for(var n=1;n<t.length;n++)if(to(e,t[n-1],t[n])<a)return!0;return!1}function to(e,t,i){var a=t.distSqr(i);if(0===a)return e.distSqr(t);var n=((e.x-t.x)*(i.x-t.x)+(e.y-t.y)*(i.y-t.y))/a;return e.distSqr(n<0?t:n>1?i:i.sub(t)._mult(n)._add(t))}function io(e,t){for(var i,a,n,r=!1,o=0;o<e.length;o++)for(var s=0,l=(i=e[o]).length-1;s<i.length;l=s++)a=i[s],n=i[l],a.y>t.y!=n.y>t.y&&t.x<(n.x-a.x)*(t.y-a.y)/(n.y-a.y)+a.x&&(r=!r);return r}function ao(e,t){for(var i=!1,a=0,n=e.length-1;a<e.length;n=a++){var r=e[a],o=e[n];r.y>t.y!=o.y>t.y&&t.x<(o.x-r.x)*(t.y-r.y)/(o.y-r.y)+r.x&&(i=!i)}return i}function no(e,t,i){var a=i[0],n=i[2];if(e.x<a.x&&t.x<a.x||e.x>n.x&&t.x>n.x||e.y<a.y&&t.y<a.y||e.y>n.y&&t.y>n.y)return!1;var r=T(e,t,i[0]);return r!==T(e,t,i[1])||r!==T(e,t,i[2])||r!==T(e,t,i[3])}function ro(e,t,i){var a=t.paint.get(e).value;return"constant"===a.kind?a.value:i.programConfigurations.get(t.id).getMaxValue(e)}function oo(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function so(e,t,i,a,n){if(!t[0]&&!t[1])return e;var r=F.convert(t)._mult(n);"viewport"===i&&r._rotate(-a);for(var o=[],s=0;s<e.length;s++)o.push(e[s].sub(r));return o}Oa("CircleBucket",Gr,{omit:["layers"]});var lo=new pn({"circle-sort-key":new un(pe.layout_circle["circle-sort-key"])}),co={paint:new pn({"circle-radius":new un(pe.paint_circle["circle-radius"]),"circle-color":new un(pe.paint_circle["circle-color"]),"circle-blur":new un(pe.paint_circle["circle-blur"]),"circle-opacity":new un(pe.paint_circle["circle-opacity"]),"circle-translate":new cn(pe.paint_circle["circle-translate"]),"circle-translate-anchor":new cn(pe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new cn(pe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new cn(pe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new un(pe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new un(pe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new un(pe.paint_circle["circle-stroke-opacity"])}),layout:lo},uo=1e-6,ho="undefined"!=typeof Float32Array?Float32Array:Array;function fo(){var e=new ho(9);return ho!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function po(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function mo(e,t,i){var a=t[0],n=t[1],r=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=t[9],f=t[10],p=t[11],m=t[12],g=t[13],v=t[14],y=t[15],x=i[0],b=i[1],_=i[2],w=i[3];return e[0]=x*a+b*s+_*h+w*m,e[1]=x*n+b*l+_*d+w*g,e[2]=x*r+b*c+_*f+w*v,e[3]=x*o+b*u+_*p+w*y,e[4]=(x=i[4])*a+(b=i[5])*s+(_=i[6])*h+(w=i[7])*m,e[5]=x*n+b*l+_*d+w*g,e[6]=x*r+b*c+_*f+w*v,e[7]=x*o+b*u+_*p+w*y,e[8]=(x=i[8])*a+(b=i[9])*s+(_=i[10])*h+(w=i[11])*m,e[9]=x*n+b*l+_*d+w*g,e[10]=x*r+b*c+_*f+w*v,e[11]=x*o+b*u+_*p+w*y,e[12]=(x=i[12])*a+(b=i[13])*s+(_=i[14])*h+(w=i[15])*m,e[13]=x*n+b*l+_*d+w*g,e[14]=x*r+b*c+_*f+w*v,e[15]=x*o+b*u+_*p+w*y,e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var go,vo=mo;function yo(){var e=new ho(3);return ho!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function xo(e,t,i){var a=new ho(3);return a[0]=e,a[1]=t,a[2]=i,a}function bo(e,t,i){var a=t[0],n=t[1],r=t[2],o=t[3];return e[0]=i[0]*a+i[4]*n+i[8]*r+i[12]*o,e[1]=i[1]*a+i[5]*n+i[9]*r+i[13]*o,e[2]=i[2]*a+i[6]*n+i[10]*r+i[14]*o,e[3]=i[3]*a+i[7]*n+i[11]*r+i[15]*o,e}function _o(){var e=new ho(4);return ho!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function wo(e,t){var i=bo([],[e.x,e.y,0,1],t);return new F(i[0]/i[3],i[1]/i[3])}yo(),go=new ho(4),ho!=Float32Array&&(go[0]=0,go[1]=0,go[2]=0,go[3]=0),yo(),xo(1,0,0),xo(0,1,0),_o(),_o(),fo(),function(){var e;e=new ho(2),ho!=Float32Array&&(e[0]=0,e[1]=0)}();var ko=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i)}(Gr);Oa("HeatmapBucket",ko,{omit:["layers"]});var So={paint:new pn({"heatmap-radius":new un(pe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new un(pe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new cn(pe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new fn(pe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new cn(pe.paint_heatmap["heatmap-opacity"])})};function Co(e,t,i,a){var n=t.width,r=t.height;if(a){if(a instanceof Uint8ClampedArray)a=new Uint8Array(a.buffer);else if(a.length!==n*r*i)throw new RangeError("mismatched image size. expected: ".concat(a.length," but got: ").concat(n*r*i))}else a=new Uint8Array(n*r*i);return e.width=n,e.height=r,e.data=a,e}function Ao(e,t,i){var a=t.width,n=t.height;if(a!==e.width||n!==e.height){var r=Co({},{width:a,height:n},i);Oo(e,r,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,a),height:Math.min(e.height,n)},i),e.width=a,e.height=n,e.data=r.data}}function Oo(e,t,i,a,n,r){if(0===n.width||0===n.height)return t;if(n.width>e.width||n.height>e.height||i.x>e.width-n.width||i.y>e.height-n.height)throw new RangeError("out of range source coordinates for image copy");if(n.width>t.width||n.height>t.height||a.x>t.width-n.width||a.y>t.height-n.height)throw new RangeError("out of range destination coordinates for image copy");var o=e.data,s=t.data;if(o===s)throw new Error("srcData equals dstData, so image is already copied");for(var l=0;l<n.height;l++)for(var c=((i.y+l)*e.width+i.x)*r,u=((a.y+l)*t.width+a.x)*r,h=0;h<n.width*r;h++)s[u+h]=o[c+h];return t}var To=function(){function e(t,i){p(this,e),Co(this,t,1,i)}return f(e,[{key:"resize",value:function(e){Ao(this,e,1)}},{key:"clone",value:function(){return new e({width:this.width,height:this.height},new Uint8Array(this.data))}}],[{key:"copy",value:function(e,t,i,a,n){Oo(e,t,i,a,n,1)}}]),e}(),Mo=function(){function e(t,i){p(this,e),Co(this,t,4,i)}return f(e,[{key:"resize",value:function(e){Ao(this,e,4)}},{key:"replace",value:function(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}},{key:"clone",value:function(){return new e({width:this.width,height:this.height},new Uint8Array(this.data))}}],[{key:"copy",value:function(e,t,i,a,n){Oo(e,t,i,a,n,4)}}]),e}();function Eo(e){var t={},i=e.resolution||256,a=e.clips?e.clips.length:1,n=e.image||new Mo({width:i,height:a});if(Math.log(i)/Math.LN2%1!=0)throw new Error("width is not a power of 2 - ".concat(i));var r=function(i,a,r){t[e.evaluationKey]=r;var o=e.expression.evaluate(t);n.data[i+a+0]=Math.floor(255*o.r/o.a),n.data[i+a+1]=Math.floor(255*o.g/o.a),n.data[i+a+2]=Math.floor(255*o.b/o.a),n.data[i+a+3]=Math.floor(255*o.a)};if(e.clips)for(var o=0,s=0;o<a;++o,s+=4*i)for(var l=0,c=0;l<i;l++,c+=4){var u=l/(i-1),h=e.clips[o];r(s,c,h.start*(1-u)+h.end*u)}else for(var d=0,f=0;d<i;d++,f+=4)r(0,f,d/(i-1));return n}Oa("AlphaImage",To),Oa("RGBAImage",Mo);var Io={paint:new pn({"hillshade-illumination-direction":new cn(pe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new cn(pe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new cn(pe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new cn(pe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new cn(pe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new cn(pe.paint_hillshade["hillshade-accent-color"])})},Po=bn([{name:"a_pos",components:2,type:"Int16"}],4).members,Do={exports:{}};function zo(e,t,i){i=i||2;var a,n,r,o,s,l,c,u=t&&t.length,h=u?t[0]*i:e.length,d=Lo(e,0,h,i,!0),f=[];if(!d||d.next===d.prev)return f;if(u&&(d=function(e,t,i,a){var n,r,o,s=[];for(n=0,r=t.length;n<r;n++)(o=Lo(e,t[n]*a,n<r-1?t[n+1]*a:e.length,a,!1))===o.next&&(o.steiner=!0),s.push(Xo(o));for(s.sort(Yo),n=0;n<s.length;n++)i=Wo(s[n],i);return i}(e,t,d,i)),e.length>80*i){a=r=e[0],n=o=e[1];for(var p=i;p<h;p+=i)(s=e[p])<a&&(a=s),(l=e[p+1])<n&&(n=l),s>r&&(r=s),l>o&&(o=l);c=0!==(c=Math.max(r-a,o-n))?32767/c:0}return Ro(d,f,i,a,n,c,0),f}function Lo(e,t,i,a,n){var r,o;if(n===rs(e,t,i,a)>0)for(r=t;r<i;r+=a)o=is(r,e[r],e[r+1],o);else for(r=i-a;r>=t;r-=a)o=is(r,e[r],e[r+1],o);return o&&Ko(o,o.next)&&(as(o),o=o.next),o}function jo(e,t){if(!e)return e;t||(t=e);var i,a=e;do{if(i=!1,a.steiner||!Ko(a,a.next)&&0!==Zo(a.prev,a,a.next))a=a.next;else{if(as(a),(a=t=a.prev)===a.next)break;i=!0}}while(i||a!==t);return t}function Ro(e,t,i,a,n,r,o){if(e){!o&&r&&function(e,t,i,a){var n=e;do{0===n.z&&(n.z=Uo(n.x,n.y,t,i,a)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,function(e){var t,i,a,n,r,o,s,l,c=1;do{for(i=e,e=null,r=null,o=0;i;){for(o++,a=i,s=0,t=0;t<c&&(s++,a=a.nextZ);t++);for(l=c;s>0||l>0&&a;)0!==s&&(0===l||!a||i.z<=a.z)?(n=i,i=i.nextZ,s--):(n=a,a=a.nextZ,l--),r?r.nextZ=n:e=n,n.prevZ=r,r=n;i=a}r.nextZ=null,c*=2}while(o>1)}(n)}(e,a,n,r);for(var s,l,c=e;e.prev!==e.next;)if(s=e.prev,l=e.next,r?Bo(e,a,n,r):Fo(e))t.push(s.i/i|0),t.push(e.i/i|0),t.push(l.i/i|0),as(e),e=l.next,c=l.next;else if((e=l)===c){o?1===o?Ro(e=No(jo(e),t,i),t,i,a,n,r,2):2===o&&Vo(e,t,i,a,n,r):Ro(jo(e),t,i,a,n,r,1);break}}}function Fo(e){var t=e.prev,i=e,a=e.next;if(Zo(t,i,a)>=0)return!1;for(var n=t.x,r=i.x,o=a.x,s=t.y,l=i.y,c=a.y,u=n<r?n<o?n:o:r<o?r:o,h=s<l?s<c?s:c:l<c?l:c,d=n>r?n>o?n:o:r>o?r:o,f=s>l?s>c?s:c:l>c?l:c,p=a.next;p!==t;){if(p.x>=u&&p.x<=d&&p.y>=h&&p.y<=f&&Go(n,s,r,l,o,c,p.x,p.y)&&Zo(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function Bo(e,t,i,a){var n=e.prev,r=e,o=e.next;if(Zo(n,r,o)>=0)return!1;for(var s=n.x,l=r.x,c=o.x,u=n.y,h=r.y,d=o.y,f=s<l?s<c?s:c:l<c?l:c,p=u<h?u<d?u:d:h<d?h:d,m=s>l?s>c?s:c:l>c?l:c,g=u>h?u>d?u:d:h>d?h:d,v=Uo(f,p,t,i,a),y=Uo(m,g,t,i,a),x=e.prevZ,b=e.nextZ;x&&x.z>=v&&b&&b.z<=y;){if(x.x>=f&&x.x<=m&&x.y>=p&&x.y<=g&&x!==n&&x!==o&&Go(s,u,l,h,c,d,x.x,x.y)&&Zo(x.prev,x,x.next)>=0)return!1;if(x=x.prevZ,b.x>=f&&b.x<=m&&b.y>=p&&b.y<=g&&b!==n&&b!==o&&Go(s,u,l,h,c,d,b.x,b.y)&&Zo(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;x&&x.z>=v;){if(x.x>=f&&x.x<=m&&x.y>=p&&x.y<=g&&x!==n&&x!==o&&Go(s,u,l,h,c,d,x.x,x.y)&&Zo(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;b&&b.z<=y;){if(b.x>=f&&b.x<=m&&b.y>=p&&b.y<=g&&b!==n&&b!==o&&Go(s,u,l,h,c,d,b.x,b.y)&&Zo(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function No(e,t,i){var a=e;do{var n=a.prev,r=a.next.next;!Ko(n,r)&&Jo(n,a,a.next,r)&&es(n,r)&&es(r,n)&&(t.push(n.i/i|0),t.push(a.i/i|0),t.push(r.i/i|0),as(a),as(a.next),a=e=r),a=a.next}while(a!==e);return jo(a)}function Vo(e,t,i,a,n,r){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&qo(o,s)){var l=ts(o,s);return o=jo(o,o.next),l=jo(l,l.next),Ro(o,t,i,a,n,r,0),void Ro(l,t,i,a,n,r,0)}s=s.next}o=o.next}while(o!==e)}function Yo(e,t){return e.x-t.x}function Wo(e,t){var i=function(e,t){var i,a=t,n=e.x,r=e.y,o=-1/0;do{if(r<=a.y&&r>=a.next.y&&a.next.y!==a.y){var s=a.x+(r-a.y)*(a.next.x-a.x)/(a.next.y-a.y);if(s<=n&&s>o&&(o=s,i=a.x<a.next.x?a:a.next,s===n))return i}a=a.next}while(a!==t);if(!i)return null;var l,c=i,u=i.x,h=i.y,d=1/0;a=i;do{n>=a.x&&a.x>=u&&n!==a.x&&Go(r<h?n:o,r,u,h,r<h?o:n,r,a.x,a.y)&&(l=Math.abs(r-a.y)/(n-a.x),es(a,e)&&(l<d||l===d&&(a.x>i.x||a.x===i.x&&Ho(i,a)))&&(i=a,d=l)),a=a.next}while(a!==c);return i}(e,t);if(!i)return t;var a=ts(i,e);return jo(a,a.next),jo(i,i.next)}function Ho(e,t){return Zo(e.prev,e,t.prev)<0&&Zo(t.next,e,e.next)<0}function Uo(e,t,i,a,n){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-i)*n|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-a)*n|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Xo(e){var t=e,i=e;do{(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next}while(t!==e);return i}function Go(e,t,i,a,n,r,o,s){return(n-o)*(t-s)>=(e-o)*(r-s)&&(e-o)*(a-s)>=(i-o)*(t-s)&&(i-o)*(r-s)>=(n-o)*(a-s)}function qo(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&Jo(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}(e,t)&&(es(e,t)&&es(t,e)&&function(e,t){var i=e,a=!1,n=(e.x+t.x)/2,r=(e.y+t.y)/2;do{i.y>r!=i.next.y>r&&i.next.y!==i.y&&n<(i.next.x-i.x)*(r-i.y)/(i.next.y-i.y)+i.x&&(a=!a),i=i.next}while(i!==e);return a}(e,t)&&(Zo(e.prev,e,t.prev)||Zo(e,t.prev,t))||Ko(e,t)&&Zo(e.prev,e,e.next)>0&&Zo(t.prev,t,t.next)>0)}function Zo(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function Ko(e,t){return e.x===t.x&&e.y===t.y}function Jo(e,t,i,a){var n=$o(Zo(e,t,i)),r=$o(Zo(e,t,a)),o=$o(Zo(i,a,e)),s=$o(Zo(i,a,t));return n!==r&&o!==s||!(0!==n||!Qo(e,i,t))||!(0!==r||!Qo(e,a,t))||!(0!==o||!Qo(i,e,a))||!(0!==s||!Qo(i,t,a))}function Qo(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function $o(e){return e>0?1:e<0?-1:0}function es(e,t){return Zo(e.prev,e,e.next)<0?Zo(e,t,e.next)>=0&&Zo(e,e.prev,t)>=0:Zo(e,t,e.prev)<0||Zo(e,e.next,t)<0}function ts(e,t){var i=new ns(e.i,e.x,e.y),a=new ns(t.i,t.x,t.y),n=e.next,r=t.prev;return e.next=t,t.prev=e,i.next=n,n.prev=i,a.next=i,i.prev=a,r.next=a,a.prev=r,a}function is(e,t,i,a){var n=new ns(e,t,i);return a?(n.next=a.next,n.prev=a,a.next.prev=n,a.next=n):(n.prev=n,n.next=n),n}function as(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function ns(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function rs(e,t,i,a){for(var n=0,r=t,o=i-a;r<i;r+=a)n+=(e[o]-e[r])*(e[r+1]+e[o+1]),o=r;return n}function os(e,t,i,a,n){!function e(t,i,a,n,r){for(;n>a;){if(n-a>600){var o=n-a+1,s=i-a+1,l=Math.log(o),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(o-c)/o)*(s-o/2<0?-1:1);e(t,i,Math.max(a,Math.floor(i-s*c/o+u)),Math.min(n,Math.floor(i+(o-s)*c/o+u)),r)}var h=t[i],d=a,f=n;for(ss(t,a,i),r(t[n],h)>0&&ss(t,a,n);d<f;){for(ss(t,d,f),d++,f--;r(t[d],h)<0;)d++;for(;r(t[f],h)>0;)f--}0===r(t[a],h)?ss(t,a,f):ss(t,++f,n),f<=i&&(a=f+1),i<=f&&(n=f-1)}}(e,t,i||0,a||e.length-1,n||ls)}function ss(e,t,i){var a=e[t];e[t]=e[i],e[i]=a}function ls(e,t){return e<t?-1:e>t?1:0}function cs(e,t){var i=e.length;if(i<=1)return[e];for(var a,n,r=[],o=0;o<i;o++){var s=M(e[o]);0!==s&&(e[o].area=Math.abs(s),void 0===n&&(n=s<0),n===s<0?(a&&r.push(a),a=[e[o]]):a.push(e[o]))}if(a&&r.push(a),t>1)for(var l=0;l<r.length;l++)r[l].length<=t||(os(r[l],t,1,r[l].length-1,us),r[l]=r[l].slice(0,t));return r}function us(e,t){return t.area-e.area}function hs(e,t,i){var a,n=i.patternDependencies,r=!1,o=d(t);try{for(o.s();!(a=o.n()).done;){var s=a.value.paint.get("".concat(e,"-pattern"));s.isConstant()||(r=!0);var l=s.constantOr(null);l&&(r=!0,n[l.to]=!0,n[l.from]=!0)}}catch(c){o.e(c)}finally{o.f()}return r}function ds(e,t,i,a,n){var r,o=n.patternDependencies,s=d(t);try{for(s.s();!(r=s.n()).done;){var l=r.value,c=l.paint.get("".concat(e,"-pattern")).value;if("constant"!==c.kind){var u=c.evaluate({zoom:a-1},i,{},n.availableImages),h=c.evaluate({zoom:a},i,{},n.availableImages),f=c.evaluate({zoom:a+1},i,{},n.availableImages);u=u&&u.name?u.name:u,h=h&&h.name?h.name:h,f=f&&f.name?f.name:f,o[u]=!0,o[h]=!0,o[f]=!0,i.patterns[l.id]={min:u,mid:h,max:f}}}}catch(p){s.e(p)}finally{s.f()}return i}Do.exports=zo,Do.exports.default=zo,zo.deviation=function(e,t,i,a){var n=t&&t.length,r=Math.abs(rs(e,0,n?t[0]*i:e.length,i));if(n)for(var o=0,s=t.length;o<s;o++)r-=Math.abs(rs(e,t[o]*i,o<s-1?t[o+1]*i:e.length,i));var l=0;for(o=0;o<a.length;o+=3){var c=a[o]*i,u=a[o+1]*i,h=a[o+2]*i;l+=Math.abs((e[c]-e[h])*(e[u+1]-e[c+1])-(e[c]-e[u])*(e[h+1]-e[c+1]))}return 0===r&&0===l?0:Math.abs((l-r)/r)},zo.flatten=function(e){for(var t=e[0][0].length,i={vertices:[],holes:[],dimensions:t},a=0,n=0;n<e.length;n++){for(var r=0;r<e[n].length;r++)for(var o=0;o<t;o++)i.vertices.push(e[n][r][o]);n>0&&i.holes.push(a+=e[n-1].length)}return i};var fs=function(){function e(t){p(this,e),this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ir,this.indexArray=new dr,this.indexArray2=new fr,this.programConfigurations=new Fr(t.layers,t.zoom),this.segments=new mr,this.segments2=new mr,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))}return f(e,[{key:"populate",value:function(e,t,i){this.hasPattern=hs("fill",this.layers,t);var a,n=this.layers[0].layout.get("fill-sort-key"),r=!n.isConstant(),o=[],s=d(e);try{for(s.s();!(a=s.n()).done;){var l=a.value,c=l.feature,u=l.id,h=l.index,f=l.sourceLayerIndex,p=this.layers[0]._featureFilter.needGeometry,m=Ur(c,p);if(this.layers[0]._featureFilter.filter(new $a(this.zoom),m,i)){var g=r?n.evaluate(m,{},i,t.availableImages):void 0,v={id:u,properties:c.properties,type:c.type,sourceLayerIndex:f,index:h,geometry:p?m.geometry:Hr(c),patterns:{},sortKey:g};o.push(v)}}}catch(C){s.e(C)}finally{s.f()}r&&o.sort((function(e,t){return e.sortKey-t.sortKey}));for(var y=0,x=o;y<x.length;y++){var b=x[y],_=b.geometry,w=b.index,k=b.sourceLayerIndex;if(this.hasPattern){var S=ds("fill",this.layers,b,this.zoom,t);this.patternFeatures.push(S)}else this.addFeature(b,_,w,i,{});t.featureIndex.insert(e[w].feature,_,w,k,this.index)}}},{key:"update",value:function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)}},{key:"addFeatures",value:function(e,t,i){var a,n=d(this.patternFeatures);try{for(n.s();!(a=n.n()).done;){var r=a.value;this.addFeature(r,r.geometry,r.index,t,i)}}catch(o){n.e(o)}finally{n.f()}}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Po),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}},{key:"addFeature",value:function(e,t,i,a,n){var r,o=d(cs(t,500));try{for(o.s();!(r=o.n()).done;){var s,l=r.value,c=0,u=d(l);try{for(u.s();!(s=u.n()).done;)c+=s.value.length}catch(S){u.e(S)}finally{u.f()}var h,f=this.segments.prepareSegment(c,this.layoutVertexArray,this.indexArray),p=f.vertexLength,m=[],g=[],v=d(l);try{for(v.s();!(h=v.n()).done;){var y=h.value;if(0!==y.length){y!==l[0]&&g.push(m.length/2);var x=this.segments2.prepareSegment(y.length,this.layoutVertexArray,this.indexArray2),b=x.vertexLength;this.layoutVertexArray.emplaceBack(y[0].x,y[0].y),this.indexArray2.emplaceBack(b+y.length-1,b),m.push(y[0].x),m.push(y[0].y);for(var _=1;_<y.length;_++)this.layoutVertexArray.emplaceBack(y[_].x,y[_].y),this.indexArray2.emplaceBack(b+_-1,b+_),m.push(y[_].x),m.push(y[_].y);x.vertexLength+=y.length,x.primitiveLength+=y.length}}}catch(S){v.e(S)}finally{v.f()}for(var w=Do.exports(m,g),k=0;k<w.length;k+=3)this.indexArray.emplaceBack(p+w[k],p+w[k+1],p+w[k+2]);f.vertexLength+=c,f.primitiveLength+=w.length/3}}catch(S){o.e(S)}finally{o.f()}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,n,a)}}]),e}();Oa("FillBucket",fs,{omit:["layers","patternFeatures"]});var ps=new pn({"fill-sort-key":new un(pe.layout_fill["fill-sort-key"])}),ms={paint:new pn({"fill-antialias":new cn(pe.paint_fill["fill-antialias"]),"fill-opacity":new un(pe.paint_fill["fill-opacity"]),"fill-color":new un(pe.paint_fill["fill-color"]),"fill-outline-color":new un(pe.paint_fill["fill-outline-color"]),"fill-translate":new cn(pe.paint_fill["fill-translate"]),"fill-translate-anchor":new cn(pe.paint_fill["fill-translate-anchor"]),"fill-pattern":new hn(pe.paint_fill["fill-pattern"])}),layout:ps},gs=bn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),vs=bn([{name:"a_centroid",components:2,type:"Int16"}],4),ys=gs.members,xs={},bs=F,_s=ws;function ws(e,t,i,a,n){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=a,this._values=n,e.readFields(ks,this,t)}function ks(e,t,i){1==e?t.id=i.readVarint():2==e?function(e,t){for(var i=e.readVarint()+e.pos;e.pos<i;){var a=t._keys[e.readVarint()],n=t._values[e.readVarint()];t.properties[a]=n}}(i,t):3==e?t.type=i.readVarint():4==e&&(t._geometry=i.pos)}function Ss(e){for(var t,i,a=0,n=0,r=e.length,o=r-1;n<r;o=n++)a+=((i=e[o]).x-(t=e[n]).x)*(t.y+i.y);return a}ws.types=["Unknown","Point","LineString","Polygon"],ws.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,i=e.readVarint()+e.pos,a=1,n=0,r=0,o=0,s=[];e.pos<i;){if(n<=0){var l=e.readVarint();a=7&l,n=l>>3}if(n--,1===a||2===a)r+=e.readSVarint(),o+=e.readSVarint(),1===a&&(t&&s.push(t),t=[]),t.push(new bs(r,o));else{if(7!==a)throw new Error("unknown command "+a);t&&t.push(t[0].clone())}}return t&&s.push(t),s},ws.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,a=0,n=0,r=0,o=1/0,s=-1/0,l=1/0,c=-1/0;e.pos<t;){if(a<=0){var u=e.readVarint();i=7&u,a=u>>3}if(a--,1===i||2===i)(n+=e.readSVarint())<o&&(o=n),n>s&&(s=n),(r+=e.readSVarint())<l&&(l=r),r>c&&(c=r);else if(7!==i)throw new Error("unknown command "+i)}return[o,l,s,c]},ws.prototype.toGeoJSON=function(e,t,i){var a,n,r=this.extent*Math.pow(2,i),o=this.extent*e,s=this.extent*t,l=this.loadGeometry(),c=ws.types[this.type];function u(e){for(var t=0;t<e.length;t++){var i=e[t];e[t]=[360*(i.x+o)/r-180,360/Math.PI*Math.atan(Math.exp((180-360*(i.y+s)/r)*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(a=0;a<l.length;a++)h[a]=l[a][0];u(l=h);break;case 2:for(a=0;a<l.length;a++)u(l[a]);break;case 3:for(l=function(e){var t=e.length;if(t<=1)return[e];for(var i,a,n=[],r=0;r<t;r++){var o=Ss(e[r]);0!==o&&(void 0===a&&(a=o<0),a===o<0?(i&&n.push(i),i=[e[r]]):i.push(e[r]))}return i&&n.push(i),n}(l),a=0;a<l.length;a++)for(n=0;n<l[a].length;n++)u(l[a][n])}1===l.length?l=l[0]:c="Multi"+c;var d={type:"Feature",geometry:{type:c,coordinates:l},properties:this.properties};return"id"in this&&(d.id=this.id),d};var Cs=_s,As=Os;function Os(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Ts,this,t),this.length=this._features.length}function Ts(e,t,i){15===e?t.version=i.readVarint():1===e?t.name=i.readString():5===e?t.extent=i.readVarint():2===e?t._features.push(i.pos):3===e?t._keys.push(i.readString()):4===e&&t._values.push(function(e){for(var t=null,i=e.readVarint()+e.pos;e.pos<i;){var a=e.readVarint()>>3;t=1===a?e.readString():2===a?e.readFloat():3===a?e.readDouble():4===a?e.readVarint64():5===a?e.readVarint():6===a?e.readSVarint():7===a?e.readBoolean():null}return t}(i))}Os.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new Cs(this._pbf,t,this.extent,this._keys,this._values)};var Ms=As;function Es(e,t,i){if(3===e){var a=new Ms(i,i.readVarint()+i.pos);a.length&&(t[a.name]=a)}}xs.VectorTile=function(e,t){this.layers=e.readFields(Es,{},t)},xs.VectorTileFeature=_s,xs.VectorTileLayer=As;var Is=xs.VectorTileFeature.types,Ps=Math.pow(2,13);function Ds(e,t,i,a,n,r,o,s){e.emplaceBack(t,i,2*Math.floor(a*Ps)+o,n*Ps*2,r*Ps*2,Math.round(s))}var zs=function(){function e(t){p(this,e),this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new ar,this.centroidVertexArray=new er,this.indexArray=new dr,this.programConfigurations=new Fr(t.layers,t.zoom),this.segments=new mr,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))}return f(e,[{key:"populate",value:function(e,t,i){this.features=[],this.hasPattern=hs("fill-extrusion",this.layers,t);var a,n=d(e);try{for(n.s();!(a=n.n()).done;){var r=a.value,o=r.feature,s=r.id,l=r.index,c=r.sourceLayerIndex,u=this.layers[0]._featureFilter.needGeometry,h=Ur(o,u);if(this.layers[0]._featureFilter.filter(new $a(this.zoom),h,i)){var f={id:s,sourceLayerIndex:c,index:l,geometry:u?h.geometry:Hr(o),properties:o.properties,type:o.type,patterns:{}};this.hasPattern?this.features.push(ds("fill-extrusion",this.layers,f,this.zoom,t)):this.addFeature(f,f.geometry,l,i,{}),t.featureIndex.insert(o,f.geometry,l,c,this.index,!0)}}}catch(p){n.e(p)}finally{n.f()}}},{key:"addFeatures",value:function(e,t,i){var a,n=d(this.features);try{for(n.s();!(a=n.n()).done;){var r=a.value,o=r.geometry;this.addFeature(r,o,r.index,t,i)}}catch(s){n.e(s)}finally{n.f()}}},{key:"update",value:function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length&&0===this.centroidVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ys),this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,vs.members,!0),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}},{key:"addFeature",value:function(e,t,i,a,n){var r,o={x:0,y:0,vertexCount:0},s=d(cs(t,500));try{for(s.s();!(r=s.n()).done;){var l,c=r.value,u=0,h=d(c);try{for(h.s();!(l=h.n()).done;)u+=l.value.length}catch(L){h.e(L)}finally{h.f()}var f,p=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),m=d(c);try{for(m.s();!(f=m.n()).done;){var g=f.value;if(0!==g.length&&!js(g))for(var v=0,y=0;y<g.length;y++){var x=g[y];if(y>=1){var b=g[y-1];if(!Ls(x,b)){p.vertexLength+4>mr.MAX_VERTEX_ARRAY_LENGTH&&(p=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var _=x.sub(b)._perp()._unit(),w=b.dist(x);v+w>32768&&(v=0),Ds(this.layoutVertexArray,x.x,x.y,_.x,_.y,0,0,v),Ds(this.layoutVertexArray,x.x,x.y,_.x,_.y,0,1,v),o.x+=2*x.x,o.y+=2*x.y,o.vertexCount+=2,v+=w,Ds(this.layoutVertexArray,b.x,b.y,_.x,_.y,0,0,v),Ds(this.layoutVertexArray,b.x,b.y,_.x,_.y,0,1,v),o.x+=2*b.x,o.y+=2*b.y,o.vertexCount+=2;var k=p.vertexLength;this.indexArray.emplaceBack(k,k+2,k+1),this.indexArray.emplaceBack(k+1,k+2,k+3),p.vertexLength+=4,p.primitiveLength+=2}}}}}catch(L){m.e(L)}finally{m.f()}if(p.vertexLength+u>mr.MAX_VERTEX_ARRAY_LENGTH&&(p=this.segments.prepareSegment(u,this.layoutVertexArray,this.indexArray)),"Polygon"===Is[e.type]){var S,C=[],A=[],O=p.vertexLength,T=d(c);try{for(T.s();!(S=T.n()).done;){var M=S.value;if(0!==M.length){M!==c[0]&&A.push(C.length/2);for(var E=0;E<M.length;E++){var I=M[E];Ds(this.layoutVertexArray,I.x,I.y,0,0,1,1,0),o.x+=I.x,o.y+=I.y,o.vertexCount+=1,C.push(I.x),C.push(I.y)}}}}catch(L){T.e(L)}finally{T.f()}for(var P=Do.exports(C,A),D=0;D<P.length;D+=3)this.indexArray.emplaceBack(O+P[D],O+P[D+2],O+P[D+1]);p.primitiveLength+=P.length/3,p.vertexLength+=u}}}catch(L){s.e(L)}finally{s.f()}for(var z=0;z<o.vertexCount;z++)this.centroidVertexArray.emplaceBack(Math.floor(o.x/o.vertexCount),Math.floor(o.y/o.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,n,a)}}]),e}();function Ls(e,t){return e.x===t.x&&(e.x<0||e.x>Vr)||e.y===t.y&&(e.y<0||e.y>Vr)}function js(e){return e.every((function(e){return e.x<0}))||e.every((function(e){return e.x>Vr}))||e.every((function(e){return e.y<0}))||e.every((function(e){return e.y>Vr}))}Oa("FillExtrusionBucket",zs,{omit:["layers","features"]});var Rs={paint:new pn({"fill-extrusion-opacity":new cn(pe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new un(pe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new cn(pe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new cn(pe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new hn(pe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new un(pe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new un(pe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new cn(pe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function Fs(e,t){return e.x*t.x+e.y*t.y}function Bs(e,t){if(1===e.length){for(var i,a=0,n=t[a++];!i||n.equals(i);)if(!(i=t[a++]))return 1/0;for(;a<t.length;a++){var r=t[a],o=e[0],s=i.sub(n),l=r.sub(n),c=o.sub(n),u=Fs(s,s),h=Fs(s,l),f=Fs(l,l),p=Fs(c,s),m=Fs(c,l),g=u*f-h*h,v=(f*p-h*m)/g,y=(u*m-h*p)/g,x=n.z*(1-v-y)+i.z*v+r.z*y;if(isFinite(x))return x}return 1/0}var b,_=1/0,w=d(t);try{for(w.s();!(b=w.n()).done;){var k=b.value;_=Math.min(_,k.z)}}catch(S){w.e(S)}finally{w.f()}return _}var Ns=bn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Vs=bn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Ys=xs.VectorTileFeature.types,Ws=Math.cos(Math.PI/180*37.5),Hs=Math.pow(2,14)/.5,Us=function(){function e(t){var i=this;p(this,e),this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((function(e){i.gradients[e.id]={}})),this.layoutVertexArray=new nr,this.layoutVertexArray2=new rr,this.indexArray=new dr,this.programConfigurations=new Fr(t.layers,t.zoom),this.segments=new mr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))}return f(e,[{key:"populate",value:function(e,t,i){this.hasPattern=hs("line",this.layers,t);var a,n=this.layers[0].layout.get("line-sort-key"),r=!n.isConstant(),o=[],s=d(e);try{for(s.s();!(a=s.n()).done;){var l=a.value,c=l.feature,u=l.id,h=l.index,f=l.sourceLayerIndex,p=this.layers[0]._featureFilter.needGeometry,m=Ur(c,p);if(this.layers[0]._featureFilter.filter(new $a(this.zoom),m,i)){var g=r?n.evaluate(m,{},i):void 0,v={id:u,properties:c.properties,type:c.type,sourceLayerIndex:f,index:h,geometry:p?m.geometry:Hr(c),patterns:{},sortKey:g};o.push(v)}}}catch(C){s.e(C)}finally{s.f()}r&&o.sort((function(e,t){return e.sortKey-t.sortKey}));for(var y=0,x=o;y<x.length;y++){var b=x[y],_=b.geometry,w=b.index,k=b.sourceLayerIndex;if(this.hasPattern){var S=ds("line",this.layers,b,this.zoom,t);this.patternFeatures.push(S)}else this.addFeature(b,_,w,i,{});t.featureIndex.insert(e[w].feature,_,w,k,this.index)}}},{key:"update",value:function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)}},{key:"addFeatures",value:function(e,t,i){var a,n=d(this.patternFeatures);try{for(n.s();!(a=n.n()).done;){var r=a.value;this.addFeature(r,r.geometry,r.index,t,i)}}catch(o){n.e(o)}finally{n.f()}}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,Vs)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Ns),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}},{key:"lineFeatureClips",value:function(e){if(e.properties&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}},{key:"addFeature",value:function(e,t,i,a,n){var r=this.layers[0].layout,o=r.get("line-join").evaluate(e,{}),s=r.get("line-cap"),l=r.get("line-miter-limit"),c=r.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);var u,h=d(t);try{for(h.s();!(u=h.n()).done;){var f=u.value;this.addLine(f,e,o,s,l,c)}}catch(p){h.e(p)}finally{h.f()}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,n,a)}},{key:"addLine",value:function(e,t,i,a,n,r){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var o=0;o<e.length-1;o++)this.totalDistance+=e[o].dist(e[o+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var s="Polygon"===Ys[t.type],l=e.length;l>=2&&e[l-1].equals(e[l-2]);)l--;for(var c=0;c<l-1&&e[c].equals(e[c+1]);)c++;if(!(l<(s?3:2))){"bevel"===i&&(n=1.05);var u,h,d,f,p,m=this.overscaling<=16?122880/(512*this.overscaling):0,g=this.segments.prepareSegment(10*l,this.layoutVertexArray,this.indexArray);this.e1=this.e2=-1,s&&(u=e[l-2],p=e[c].sub(u)._unit()._perp());for(var v=c;v<l;v++)if(!(d=v===l-1?s?e[c+1]:void 0:e[v+1])||!e[v].equals(d)){p&&(f=p),u&&(h=u),u=e[v],p=d?d.sub(u)._unit()._perp():f;var y=(f=f||p).add(p);0===y.x&&0===y.y||y._unit();var x=f.x*p.x+f.y*p.y,b=y.x*p.x+y.y*p.y,_=0!==b?1/b:1/0,w=2*Math.sqrt(2-2*b),k=b<Ws&&h&&d,S=f.x*p.y-f.y*p.x>0;if(k&&v>c){var C=u.dist(h);if(C>2*m){var A=u.sub(u.sub(h)._mult(m/C)._round());this.updateDistance(h,A),this.addCurrentVertex(A,f,0,0,g),h=A}}var O=h&&d,T=O?i:s?"butt":a;if(O&&"round"===T&&(_<r?T="miter":_<=2&&(T="fakeround")),"miter"===T&&_>n&&(T="bevel"),"bevel"===T&&(_>2&&(T="flipbevel"),_<n&&(T="miter")),h&&this.updateDistance(h,u),"miter"===T)y._mult(_),this.addCurrentVertex(u,y,0,0,g);else if("flipbevel"===T){if(_>100)y=p.mult(-1);else{var M=_*f.add(p).mag()/f.sub(p).mag();y._perp()._mult(M*(S?-1:1))}this.addCurrentVertex(u,y,0,0,g),this.addCurrentVertex(u,y.mult(-1),0,0,g)}else if("bevel"===T||"fakeround"===T){var E=-Math.sqrt(_*_-1),I=S?E:0,P=S?0:E;if(h&&this.addCurrentVertex(u,f,I,P,g),"fakeround"===T)for(var D=Math.round(180*w/Math.PI/20),z=1;z<D;z++){var L=z/D;if(.5!==L){var j=L-.5;L+=L*j*(L-1)*((1.0904+x*(x*(3.55645-1.43519*x)-3.2452))*j*j+(.848013+x*(.215638*x-1.06021)))}var R=p.sub(f)._mult(L)._add(f)._unit()._mult(S?-1:1);this.addHalfVertex(u,R.x,R.y,!1,S,0,g)}d&&this.addCurrentVertex(u,p,-I,-P,g)}else if("butt"===T)this.addCurrentVertex(u,y,0,0,g);else if("square"===T){var F=h?1:-1;this.addCurrentVertex(u,y,F,F,g)}else"round"===T&&(h&&(this.addCurrentVertex(u,f,0,0,g),this.addCurrentVertex(u,f,1,1,g,!0)),d&&(this.addCurrentVertex(u,p,-1,-1,g,!0),this.addCurrentVertex(u,p,0,0,g)));if(k&&v<l-1){var B=u.dist(d);if(B>2*m){var N=u.add(d.sub(u)._mult(m/B)._round());this.updateDistance(u,N),this.addCurrentVertex(N,p,0,0,g),u=N}}}}}},{key:"addCurrentVertex",value:function(e,t,i,a,n){var r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=t.y*a-t.x,s=-t.y-t.x*a;this.addHalfVertex(e,t.x+t.y*i,t.y-t.x*i,r,!1,i,n),this.addHalfVertex(e,o,s,r,!0,-a,n),this.distance>Hs/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(e,t,i,a,n,r))}},{key:"addHalfVertex",value:function(e,t,i,a,n,r,o){var s=e.x,l=e.y,c=.5*(this.lineClips?this.scaledDistance*(Hs-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((s<<1)+(a?1:0),(l<<1)+(n?1:0),Math.round(63*t)+128,Math.round(63*i)+128,1+(0===r?0:r<0?-1:1)|(63&c)<<2,c>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var u=o.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,u),o.primitiveLength++),n?this.e2=u:this.e1=u}},{key:"updateScaledDistance",value:function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}},{key:"updateDistance",value:function(e,t){this.distance+=e.dist(t),this.updateScaledDistance()}}]),e}();Oa("LineBucket",Us,{omit:["layers","patternFeatures"]});var Xs=new pn({"line-cap":new cn(pe.layout_line["line-cap"]),"line-join":new un(pe.layout_line["line-join"]),"line-miter-limit":new cn(pe.layout_line["line-miter-limit"]),"line-round-limit":new cn(pe.layout_line["line-round-limit"]),"line-sort-key":new un(pe.layout_line["line-sort-key"])}),Gs={paint:new pn({"line-opacity":new un(pe.paint_line["line-opacity"]),"line-color":new un(pe.paint_line["line-color"]),"line-translate":new cn(pe.paint_line["line-translate"]),"line-translate-anchor":new cn(pe.paint_line["line-translate-anchor"]),"line-width":new un(pe.paint_line["line-width"]),"line-gap-width":new un(pe.paint_line["line-gap-width"]),"line-offset":new un(pe.paint_line["line-offset"]),"line-blur":new un(pe.paint_line["line-blur"]),"line-dasharray":new dn(pe.paint_line["line-dasharray"]),"line-pattern":new hn(pe.paint_line["line-pattern"]),"line-gradient":new fn(pe.paint_line["line-gradient"])}),layout:Xs},qs=new(function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"possiblyEvaluate",value:function(e,t){return t=new $a(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,zoomHistory:t.zoomHistory,transition:t.transition}),o(s(i.prototype),"possiblyEvaluate",this).call(this,e,t)}},{key:"evaluate",value:function(e,t,a,n){return t=b({},t,{zoom:Math.floor(t.zoom)}),o(s(i.prototype),"evaluate",this).call(this,e,t,a,n)}}]),i}(un))(Gs.paint.properties["line-width"].specification);function Zs(e,t){return t>0?t+2*e:e}qs.useIntegerZoom=!0;var Ks=bn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Js=bn([{name:"a_projected_pos",components:3,type:"Float32"}],4);bn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);var Qs=bn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);bn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);var $s=bn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),el=bn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function tl(e,t,i){return e.sections.forEach((function(e){e.text=function(e,t,i){var a=t.layout.get("text-transform").evaluate(i,{});return"uppercase"===a?e=e.toLocaleUpperCase():"lowercase"===a&&(e=e.toLocaleLowerCase()),Qa.applyArabicShaping&&(e=Qa.applyArabicShaping(e)),e}(e.text,t,i)})),e}bn([{name:"triangle",components:3,type:"Uint16"}]),bn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),bn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),bn([{type:"Float32",name:"offsetX"}]),bn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var il={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},al=ol,nl=function(e,t,i,a,n){var r,o,s=8*n-a-1,l=(1<<s)-1,c=l>>1,u=-7,h=i?n-1:0,d=i?-1:1,f=e[t+h];for(h+=d,r=f&(1<<-u)-1,f>>=-u,u+=s;u>0;r=256*r+e[t+h],h+=d,u-=8);for(o=r&(1<<-u)-1,r>>=-u,u+=a;u>0;o=256*o+e[t+h],h+=d,u-=8);if(0===r)r=1-c;else{if(r===l)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,a),r-=c}return(f?-1:1)*o*Math.pow(2,r-a)},rl=function(e,t,i,a,n,r){var o,s,l,c=8*r-n-1,u=(1<<c)-1,h=u>>1,d=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,f=a?0:r-1,p=a?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(o++,l/=2),o+h>=u?(s=0,o=u):o+h>=1?(s=(t*l-1)*Math.pow(2,n),o+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,n),o=0));n>=8;e[i+f]=255&s,f+=p,s/=256,n-=8);for(o=o<<n|s,c+=n;c>0;e[i+f]=255&o,f+=p,o/=256,c-=8);e[i+f-p]|=128*m};function ol(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}ol.Varint=0,ol.Fixed64=1,ol.Bytes=2,ol.Fixed32=5;var sl,ll=4294967296,cl=1/ll,ul="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function hl(e){return e.type===ol.Bytes?e.readVarint()+e.pos:e.pos+1}function dl(e,t,i){return i?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function fl(e,t,i){var a=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));i.realloc(a);for(var n=i.pos-1;n>=e;n--)i.buf[n+a]=i.buf[n]}function pl(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function ml(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function gl(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function vl(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function yl(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function xl(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function bl(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function _l(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function wl(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}function kl(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function Sl(e,t,i){e[i]=t,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24}function Cl(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function Al(e,t,i){1===e&&i.readMessage(Ol,t)}function Ol(e,t,i){if(3===e){var a=i.readMessage(Tl,{}),n=a.id,r=a.bitmap,o=a.width,s=a.height,l=a.left,c=a.top,u=a.advance;t.push({id:n,bitmap:new To({width:o+6,height:s+6},r),metrics:{width:o,height:s,left:l,top:c,advance:u}})}}function Tl(e,t,i){1===e?t.id=i.readVarint():2===e?t.bitmap=i.readBytes():3===e?t.width=i.readVarint():4===e?t.height=i.readVarint():5===e?t.left=i.readSVarint():6===e?t.top=i.readSVarint():7===e&&(t.advance=i.readVarint())}function Ml(e){var t,i=0,a=0,n=d(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;i+=r.w*r.h,a=Math.max(a,r.w)}}catch(g){n.e(g)}finally{n.f()}e.sort((function(e,t){return t.h-e.h}));var o,s=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),a),h:1/0}],l=0,c=0,u=d(e);try{for(u.s();!(o=u.n()).done;)for(var h=o.value,f=s.length-1;f>=0;f--){var p=s[f];if(!(h.w>p.w||h.h>p.h)){if(h.x=p.x,h.y=p.y,c=Math.max(c,h.y+h.h),l=Math.max(l,h.x+h.w),h.w===p.w&&h.h===p.h){var m=s.pop();f<s.length&&(s[f]=m)}else h.h===p.h?(p.x+=h.w,p.w-=h.w):h.w===p.w?(p.y+=h.h,p.h-=h.h):(s.push({x:p.x+h.w,y:p.y,w:p.w-h.w,h:h.h}),p.y+=h.h,p.h-=h.h);break}}}catch(g){u.e(g)}finally{u.f()}return{w:l,h:c,fill:i/(l*c)||0}}ol.prototype={destroy:function(){this.buf=null},readFields:function(e,t,i){for(i=i||this.length;this.pos<i;){var a=this.readVarint(),n=a>>3,r=this.pos;this.type=7&a,e(n,t,this),this.pos===r&&this.skip(a)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=kl(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=Cl(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=kl(this.buf,this.pos)+kl(this.buf,this.pos+4)*ll;return this.pos+=8,e},readSFixed64:function(){var e=kl(this.buf,this.pos)+Cl(this.buf,this.pos+4)*ll;return this.pos+=8,e},readFloat:function(){var e=nl(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=nl(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,i,a=this.buf;return t=127&(i=a[this.pos++]),i<128?t:(t|=(127&(i=a[this.pos++]))<<7,i<128?t:(t|=(127&(i=a[this.pos++]))<<14,i<128?t:(t|=(127&(i=a[this.pos++]))<<21,i<128?t:function(e,t,i){var a,n,r=i.buf;if(a=(112&(n=r[i.pos++]))>>4,n<128)return dl(e,a,t);if(a|=(127&(n=r[i.pos++]))<<3,n<128)return dl(e,a,t);if(a|=(127&(n=r[i.pos++]))<<10,n<128)return dl(e,a,t);if(a|=(127&(n=r[i.pos++]))<<17,n<128)return dl(e,a,t);if(a|=(127&(n=r[i.pos++]))<<24,n<128)return dl(e,a,t);if(a|=(1&(n=r[i.pos++]))<<31,n<128)return dl(e,a,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(i=a[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&ul?function(e,t,i){return ul.decode(e.subarray(t,i))}(this.buf,t,e):function(e,t,i){for(var a="",n=t;n<i;){var r,o,s,l=e[n],c=null,u=l>239?4:l>223?3:l>191?2:1;if(n+u>i)break;1===u?l<128&&(c=l):2===u?128==(192&(r=e[n+1]))&&(c=(31&l)<<6|63&r)<=127&&(c=null):3===u?(o=e[n+2],128==(192&(r=e[n+1]))&&128==(192&o)&&((c=(15&l)<<12|(63&r)<<6|63&o)<=2047||c>=55296&&c<=57343)&&(c=null)):4===u&&(o=e[n+2],s=e[n+3],128==(192&(r=e[n+1]))&&128==(192&o)&&128==(192&s)&&((c=(15&l)<<18|(63&r)<<12|(63&o)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,u=1):c>65535&&(c-=65536,a+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),a+=String.fromCharCode(c),n+=u}return a}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==ol.Bytes)return e.push(this.readVarint(t));var i=hl(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==ol.Bytes)return e.push(this.readSVarint());var t=hl(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==ol.Bytes)return e.push(this.readBoolean());var t=hl(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==ol.Bytes)return e.push(this.readFloat());var t=hl(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==ol.Bytes)return e.push(this.readDouble());var t=hl(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==ol.Bytes)return e.push(this.readFixed32());var t=hl(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==ol.Bytes)return e.push(this.readSFixed32());var t=hl(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==ol.Bytes)return e.push(this.readFixed64());var t=hl(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==ol.Bytes)return e.push(this.readSFixed64());var t=hl(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===ol.Varint)for(;this.buf[this.pos++]>127;);else if(t===ol.Bytes)this.pos=this.readVarint()+this.pos;else if(t===ol.Fixed32)this.pos+=4;else{if(t!==ol.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Sl(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Sl(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Sl(this.buf,-1&e,this.pos),Sl(this.buf,Math.floor(e*cl),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Sl(this.buf,-1&e,this.pos),Sl(this.buf,Math.floor(e*cl),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var i,a;if(e>=0?(i=e%4294967296|0,a=e/4294967296|0):(a=~(-e/4294967296),4294967295^(i=~(-e%4294967296))?i=i+1|0:(i=0,a=a+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,i){i.buf[i.pos++]=127&e|128,e>>>=7,i.buf[i.pos++]=127&e|128,e>>>=7,i.buf[i.pos++]=127&e|128,e>>>=7,i.buf[i.pos++]=127&e|128,i.buf[i.pos]=127&(e>>>=7)}(i,0,t),function(e,t){var i=(7&e)<<4;t.buf[t.pos++]|=i|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(a,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,i){for(var a,n,r=0;r<t.length;r++){if((a=t.charCodeAt(r))>55295&&a<57344){if(!n){a>56319||r+1===t.length?(e[i++]=239,e[i++]=191,e[i++]=189):n=a;continue}if(a<56320){e[i++]=239,e[i++]=191,e[i++]=189,n=a;continue}a=n-55296<<10|a-56320|65536,n=null}else n&&(e[i++]=239,e[i++]=191,e[i++]=189,n=null);a<128?e[i++]=a:(a<2048?e[i++]=a>>6|192:(a<65536?e[i++]=a>>12|224:(e[i++]=a>>18|240,e[i++]=a>>12&63|128),e[i++]=a>>6&63|128),e[i++]=63&a|128)}return i}(this.buf,e,this.pos);var i=this.pos-t;i>=128&&fl(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),rl(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),rl(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var i=this.pos;e(t,this);var a=this.pos-i;a>=128&&fl(i,a,this),this.pos=i-1,this.writeVarint(a),this.pos+=a},writeMessage:function(e,t,i){this.writeTag(e,ol.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,pl,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,ml,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,yl,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,gl,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,vl,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,xl,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,bl,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,_l,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,wl,t)},writeBytesField:function(e,t){this.writeTag(e,ol.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,ol.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,ol.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,ol.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,ol.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,ol.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,ol.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,ol.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,ol.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,ol.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var El=function(){function e(t,i){var a=i.pixelRatio,n=i.version,r=i.stretchX,o=i.stretchY,s=i.content;p(this,e),this.paddedRect=t,this.pixelRatio=a,this.stretchX=r,this.stretchY=o,this.content=s,this.version=n}return f(e,[{key:"tl",get:function(){return[this.paddedRect.x+1,this.paddedRect.y+1]}},{key:"br",get:function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}},{key:"tlbr",get:function(){return this.tl.concat(this.br)}},{key:"displaySize",get:function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}]),e}(),Il=function(){function e(t,i){p(this,e);var a={},n={};this.haveRenderCallbacks=[];var r=[];this.addImages(t,a,r),this.addImages(i,n,r);var o=Ml(r),s=o.w,l=o.h,c=new Mo({width:s||1,height:l||1});for(var u in t){var h=t[u],d=a[u].paddedRect;Mo.copy(h.data,c,{x:0,y:0},{x:d.x+1,y:d.y+1},h.data)}for(var f in i){var m=i[f],g=n[f].paddedRect,v=g.x+1,y=g.y+1,x=m.data.width,b=m.data.height;Mo.copy(m.data,c,{x:0,y:0},{x:v,y:y},m.data),Mo.copy(m.data,c,{x:0,y:b-1},{x:v,y:y-1},{width:x,height:1}),Mo.copy(m.data,c,{x:0,y:0},{x:v,y:y+b},{width:x,height:1}),Mo.copy(m.data,c,{x:x-1,y:0},{x:v-1,y:y},{width:1,height:b}),Mo.copy(m.data,c,{x:0,y:0},{x:v+x,y:y},{width:1,height:b})}this.image=c,this.iconPositions=a,this.patternPositions=n}return f(e,[{key:"addImages",value:function(e,t,i){for(var a in e){var n=e[a],r={x:0,y:0,w:n.data.width+2,h:n.data.height+2};i.push(r),t[a]=new El(r,n),n.hasRenderCallback&&this.haveRenderCallbacks.push(a)}}},{key:"patchUpdatedImages",value:function(e,t){for(var i in e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[i],e.getImage(i),t),this.patchUpdatedImage(this.patternPositions[i],e.getImage(i),t)}},{key:"patchUpdatedImage",value:function(e,t,i){if(e&&t&&e.version!==t.version){e.version=t.version;var a=h(e.tl,2),n=a[0],r=a[1];i.update(t.data,void 0,{x:n,y:r})}}}]),e}();Oa("ImagePosition",El),Oa("ImageAtlas",Il),e.WritingMode=void 0,(sl=e.WritingMode||(e.WritingMode={}))[sl.none=0]="none",sl[sl.horizontal=1]="horizontal",sl[sl.vertical=2]="vertical",sl[sl.horizontalOnly=3]="horizontalOnly";var Pl=function(){function e(){p(this,e),this.scale=1,this.fontStack="",this.imageName=null}return f(e,null,[{key:"forText",value:function(t,i){var a=new e;return a.scale=t||1,a.fontStack=i,a}},{key:"forImage",value:function(t){var i=new e;return i.imageName=t,i}}]),e}(),Dl=function(){function e(){p(this,e),this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}return f(e,[{key:"length",value:function(){return this.text.length}},{key:"getSection",value:function(e){return this.sections[this.sectionIndex[e]]}},{key:"getSectionIndex",value:function(e){return this.sectionIndex[e]}},{key:"getCharCode",value:function(e){return this.text.charCodeAt(e)}},{key:"verticalizePunctuation",value:function(){this.text=function(e){for(var t="",i=0;i<e.length;i++){var a=e.charCodeAt(i+1)||null,n=e.charCodeAt(i-1)||null;t+=a&&Ra(a)&&!il[e[i+1]]||n&&Ra(n)&&!il[e[i-1]]||!il[e[i]]?e[i]:il[e[i]]}return t}(this.text)}},{key:"trim",value:function(){for(var e=0,t=0;t<this.text.length&&Ll[this.text.charCodeAt(t)];t++)e++;for(var i=this.text.length,a=this.text.length-1;a>=0&&a>=e&&Ll[this.text.charCodeAt(a)];a--)i--;this.text=this.text.substring(e,i),this.sectionIndex=this.sectionIndex.slice(e,i)}},{key:"substring",value:function(t,i){var a=new e;return a.text=this.text.substring(t,i),a.sectionIndex=this.sectionIndex.slice(t,i),a.sections=this.sections,a}},{key:"toString",value:function(){return this.text}},{key:"getMaxScale",value:function(){var e=this;return this.sectionIndex.reduce((function(t,i){return Math.max(t,e.sections[i].scale)}),0)}},{key:"addTextSection",value:function(e,t){this.text+=e.text,this.sections.push(Pl.forText(e.scale,e.fontStack||t));for(var i=this.sections.length-1,a=0;a<e.text.length;++a)this.sectionIndex.push(i)}},{key:"addImageSection",value:function(e){var t=e.image?e.image.name:"";if(0!==t.length){var i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(Pl.forImage(t)),this.sectionIndex.push(this.sections.length-1)):O("Reached maximum number of images 6401")}else O("Can't add FormattedSection with an empty image.")}},{key:"getNextImageSectionCharCode",value:function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}],[{key:"fromFeature",value:function(t,i){for(var a=new e,n=0;n<t.sections.length;n++){var r=t.sections[n];r.image?a.addImageSection(r):a.addTextSection(r,i)}return a}}]),e}();function zl(t,i,a,n,r,o,s,l,c,u,h,f,p,m,g,v){var y,x=Dl.fromFeature(t,r);f===e.WritingMode.vertical&&x.verticalizePunctuation();var b=Qa.processBidirectionalText,_=Qa.processStyledBidirectionalText;if(b&&1===x.sections.length){y=[];var w,k=b(x.toString(),Vl(x,u,o,i,n,m,g)),S=d(k);try{for(S.s();!(w=S.n()).done;){var C=w.value,A=new Dl;A.text=C,A.sections=x.sections;for(var O=0;O<C.length;O++)A.sectionIndex.push(0);y.push(A)}}catch(L){S.e(L)}finally{S.f()}}else if(_){y=[];var T,M=_(x.text,x.sectionIndex,Vl(x,u,o,i,n,m,g)),E=d(M);try{for(E.s();!(T=E.n()).done;){var I=T.value,P=new Dl;P.text=I[0],P.sectionIndex=I[1],P.sections=x.sections,y.push(P)}}catch(L){E.e(L)}finally{E.f()}}else y=function(e,t){var i,a=[],n=e.text,r=0,o=d(t);try{for(o.s();!(i=o.n()).done;){var s=i.value;a.push(e.substring(r,s)),r=s}}catch(L){o.e(L)}finally{o.f()}return r<n.length&&a.push(e.substring(r,n.length)),a}(x,Vl(x,u,o,i,n,m,g));var D=[],z={positionedLines:D,text:x.toString(),top:h[1],bottom:h[1],left:h[0],right:h[0],writingMode:f,iconsInText:!1,verticalizable:!1};return function(t,i,a,n,r,o,s,l,c,u,h,f){var p,m,g=0,v=-17,y=0,x=0,b="right"===l?1:"left"===l?0:.5,_=0,w=d(r);try{for(w.s();!(p=w.n()).done;){var k=p.value;k.trim();var S=k.getMaxScale(),C=24*(S-1),A={positionedGlyphs:[],lineOffset:0};t.positionedLines[_]=A;var O=A.positionedGlyphs,T=0;if(k.length()){for(var M=0;M<k.length();M++){var E=k.getSection(M),I=k.getSectionIndex(M),P=k.getCharCode(M),D=0,z=null,j=null,R=null,F=24,B=!(c===e.WritingMode.horizontal||!h&&!ja(P)||h&&(Ll[P]||(m=P,Da.Arabic(m)||Da["Arabic Supplement"](m)||Da["Arabic Extended-A"](m)||Da["Arabic Presentation Forms-A"](m)||Da["Arabic Presentation Forms-B"](m))));if(E.imageName){var N=n[E.imageName];if(!N)continue;R=E.imageName,t.iconsInText=t.iconsInText||!0,j=N.paddedRect;var V=N.displaySize;E.scale=24*E.scale/f,z={width:V[0],height:V[1],left:1,top:-3,advance:B?V[1]:V[0]},D=C+(24-V[1]*E.scale),F=z.advance;var Y=B?V[0]*E.scale-24*S:V[1]*E.scale-24*S;Y>0&&Y>T&&(T=Y)}else{var W=a[E.fontStack],H=W&&W[P];if(H&&H.rect)j=H.rect,z=H.metrics;else{var U=i[E.fontStack],X=U&&U[P];if(!X)continue;z=X.metrics}D=24*(S-E.scale)}B?(t.verticalizable=!0,O.push({glyph:P,imageName:R,x:g,y:v+D,vertical:B,scale:E.scale,fontStack:E.fontStack,sectionIndex:I,metrics:z,rect:j}),g+=F*E.scale+u):(O.push({glyph:P,imageName:R,x:g,y:v+D,vertical:B,scale:E.scale,fontStack:E.fontStack,sectionIndex:I,metrics:z,rect:j}),g+=z.advance*E.scale+u)}0!==O.length&&(y=Math.max(g-u,y),Wl(O,0,O.length-1,b,T)),g=0;var G=o*S+T;A.lineOffset=Math.max(T,C),v+=G,x=Math.max(G,x),++_}else v+=o,++_}}catch(L){w.e(L)}finally{w.f()}var q=v- -17,Z=Yl(s),K=Z.horizontalAlign,J=Z.verticalAlign;(function(e,t,i,a,n,r,o,s,l){var c,u=(t-i)*n;c=r!==o?-s*a- -17:(-a*l+.5)*o;var h,f=d(e);try{for(f.s();!(h=f.n()).done;){var p,m=h.value,g=d(m.positionedGlyphs);try{for(g.s();!(p=g.n()).done;){var v=p.value;v.x+=u,v.y+=c}}catch(L){g.e(L)}finally{g.f()}}}catch(L){f.e(L)}finally{f.f()}})(t.positionedLines,b,K,J,y,x,o,q,r.length),t.top+=-J*q,t.bottom=t.top+q,t.left+=-K*y,t.right=t.left+y}(z,i,a,n,y,s,l,c,f,u,p,v),!function(e){var t,i=d(e);try{for(i.s();!(t=i.n()).done;)if(0!==t.value.positionedGlyphs.length)return!1}catch(L){i.e(L)}finally{i.f()}return!0}(D)&&z}var Ll={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},jl={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Rl(e,t,i,a,n,r){if(t.imageName){var o=a[t.imageName];return o?o.displaySize[0]*t.scale*24/r+n:0}var s=i[t.fontStack],l=s&&s[e];return l?l.metrics.advance*t.scale+n:0}function Fl(e,t,i,a){var n=Math.pow(e-t,2);return a?e<t?n/2:2*n:n+Math.abs(i)*i}function Bl(e,t,i){var a=0;return 10===e&&(a-=1e4),i&&(a+=150),40!==e&&65288!==e||(a+=50),41!==t&&65289!==t||(a+=50),a}function Nl(e,t,i,a,n,r){var o,s=null,l=Fl(t,i,n,r),c=d(a);try{for(c.s();!(o=c.n()).done;){var u=o.value,h=Fl(t-u.x,i,n,r)+u.badness;h<=l&&(s=u,l=h)}}catch(f){c.e(f)}finally{c.f()}return{index:e,x:t,priorBreak:s,badness:l}}function Vl(e,t,i,a,n,r,o){if("point"!==r)return[];if(!e)return[];for(var s,l=[],c=function(e,t,i,a,n,r){for(var o=0,s=0;s<e.length();s++){var l=e.getSection(s);o+=Rl(e.getCharCode(s),l,a,n,t,r)}return o/Math.max(1,Math.ceil(o/i))}(e,t,i,a,n,o),u=e.text.indexOf("\u200b")>=0,h=0,d=0;d<e.length();d++){var f=e.getSection(d),p=e.getCharCode(d);if(Ll[p]||(h+=Rl(p,f,a,n,t,o)),d<e.length()-1){var m=!((s=p)<11904||!(Da["Bopomofo Extended"](s)||Da.Bopomofo(s)||Da["CJK Compatibility Forms"](s)||Da["CJK Compatibility Ideographs"](s)||Da["CJK Compatibility"](s)||Da["CJK Radicals Supplement"](s)||Da["CJK Strokes"](s)||Da["CJK Symbols and Punctuation"](s)||Da["CJK Unified Ideographs Extension A"](s)||Da["CJK Unified Ideographs"](s)||Da["Enclosed CJK Letters and Months"](s)||Da["Halfwidth and Fullwidth Forms"](s)||Da.Hiragana(s)||Da["Ideographic Description Characters"](s)||Da["Kangxi Radicals"](s)||Da["Katakana Phonetic Extensions"](s)||Da.Katakana(s)||Da["Vertical Forms"](s)||Da["Yi Radicals"](s)||Da["Yi Syllables"](s)));(jl[p]||m||f.imageName)&&l.push(Nl(d+1,h,c,l,Bl(p,e.getCharCode(d+1),m&&u),!1))}}return function e(t){return t?e(t.priorBreak).concat(t.index):[]}(Nl(e.length(),h,c,l,0,!0))}function Yl(e){var t=.5,i=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:t,verticalAlign:i}}function Wl(e,t,i,a,n){if(a||n)for(var r=e[i],o=(e[i].x+r.metrics.advance*r.scale)*a,s=t;s<=i;s++)e[s].x-=o,e[s].y+=n}function Hl(e,t,i,a,n,r){var o,s=e.image;if(s.content){var l=s.content,c=s.pixelRatio||1;o=[l[0]/c,l[1]/c,s.displaySize[0]-l[2]/c,s.displaySize[1]-l[3]/c]}var u,h,d,f,p=t.left*r,m=t.right*r;"width"===i||"both"===i?(f=n[0]+p-a[3],h=n[0]+m+a[1]):h=(f=n[0]+(p+m-s.displaySize[0])/2)+s.displaySize[0];var g=t.top*r,v=t.bottom*r;return"height"===i||"both"===i?(u=n[1]+g-a[0],d=n[1]+v+a[2]):d=(u=n[1]+(g+v-s.displaySize[1])/2)+s.displaySize[1],{image:s,top:u,right:h,bottom:d,left:f,collisionPadding:o}}var Ul=128;function Xl(e,t){var i=t.expression;if("constant"===i.kind)return{kind:"constant",layoutSize:i.evaluate(new $a(e+1))};if("source"===i.kind)return{kind:"source"};for(var a=i.zoomStops,n=i.interpolationType,r=0;r<a.length&&a[r]<=e;)r++;for(var o=r=Math.max(0,r-1);o<a.length&&a[o]<e+1;)o++;o=Math.min(a.length-1,o);var s=a[r],l=a[o];return"composite"===i.kind?{kind:"composite",minZoom:s,maxZoom:l,interpolationType:n}:{kind:"camera",minZoom:s,maxZoom:l,minSize:i.evaluate(new $a(s)),maxSize:i.evaluate(new $a(l)),interpolationType:n}}var Gl=function(e){m(i,e);var t=g(i);function i(e,a,n,r){var o;return p(this,i),(o=t.call(this,e,a)).angle=n,void 0!==r&&(o.segment=r),o}return f(i,[{key:"clone",value:function(){return new i(this.x,this.y,this.angle,this.segment)}}]),i}(F);function ql(e,t,i,a,n){if(void 0===t.segment)return!0;for(var r=t,o=t.segment+1,s=0;s>-i/2;){if(--o<0)return!1;s-=e[o].dist(r),r=e[o]}s+=e[o].dist(e[o+1]),o++;for(var l=[],c=0;s<i/2;){var u=e[o],h=e[o+1];if(!h)return!1;var d=e[o-1].angleTo(u)-u.angleTo(h);for(d=Math.abs((d+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:d}),c+=d;s-l[0].distance>a;)c-=l.shift().angleDelta;if(c>n)return!1;o++,s+=u.dist(h)}return!0}function Zl(e){for(var t=0,i=0;i<e.length-1;i++)t+=e[i].dist(e[i+1]);return t}function Kl(e,t,i){return e?.6*t*i:0}function Jl(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function Ql(e,t,i,a,n,r){for(var o=Kl(i,n,r),s=Jl(i,a)*r,l=0,c=Zl(e)/2,u=0;u<e.length-1;u++){var h=e[u],d=e[u+1],f=h.dist(d);if(l+f>c){var p=(c-l)/f,m=Lt(h.x,d.x,p),g=Lt(h.y,d.y,p),v=new Gl(m,g,d.angleTo(h),u);return v._round(),!o||ql(e,v,s,o,t)?v:void 0}l+=f}}function $l(e,t,i,a,n,r,o,s,l){var c=Kl(a,r,o),u=Jl(a,n),h=u*o,d=0===e[0].x||e[0].x===l||0===e[0].y||e[0].y===l;return t-h<t/4&&(t=h+t/4),function e(t,i,a,n,r,o,s,l,c){for(var u=o/2,h=Zl(t),d=0,f=i-a,p=[],m=0;m<t.length-1;m++){for(var g=t[m],v=t[m+1],y=g.dist(v),x=v.angleTo(g);f+a<d+y;){var b=((f+=a)-d)/y,_=Lt(g.x,v.x,b),w=Lt(g.y,v.y,b);if(_>=0&&_<c&&w>=0&&w<c&&f-u>=0&&f+u<=h){var k=new Gl(_,w,x,m);k._round(),n&&!ql(t,k,o,n,r)||p.push(k)}}d+=y}return l||p.length||s||(p=e(t,d/2,a,n,r,o,s,!0,c)),p}(e,d?t/2*s%t:(u/2+2*r)*o*s%t,t,c,i,h,d,!1,l)}function ec(e,t,i,a,n){for(var r=[],o=0;o<e.length;o++)for(var s=e[o],l=void 0,c=0;c<s.length-1;c++){var u=s[c],h=s[c+1];u.x<t&&h.x<t||(u.x<t?u=new F(t,u.y+(t-u.x)/(h.x-u.x)*(h.y-u.y))._round():h.x<t&&(h=new F(t,u.y+(t-u.x)/(h.x-u.x)*(h.y-u.y))._round()),u.y<i&&h.y<i||(u.y<i?u=new F(u.x+(i-u.y)/(h.y-u.y)*(h.x-u.x),i)._round():h.y<i&&(h=new F(u.x+(i-u.y)/(h.y-u.y)*(h.x-u.x),i)._round()),u.x>=a&&h.x>=a||(u.x>=a?u=new F(a,u.y+(a-u.x)/(h.x-u.x)*(h.y-u.y))._round():h.x>=a&&(h=new F(a,u.y+(a-u.x)/(h.x-u.x)*(h.y-u.y))._round()),u.y>=n&&h.y>=n||(u.y>=n?u=new F(u.x+(n-u.y)/(h.y-u.y)*(h.x-u.x),n)._round():h.y>=n&&(h=new F(u.x+(n-u.y)/(h.y-u.y)*(h.x-u.x),n)._round()),l&&u.equals(l[l.length-1])||(l=[u],r.push(l)),l.push(h)))))}return r}function tc(e,t,i,a){var n=[],r=e.image,o=r.pixelRatio,s=r.paddedRect.w-2,l=r.paddedRect.h-2,c=e.right-e.left,u=e.bottom-e.top,h=r.stretchX||[[0,s]],d=r.stretchY||[[0,l]],f=function(e,t){return e+t[1]-t[0]},p=h.reduce(f,0),m=d.reduce(f,0),g=s-p,v=l-m,y=0,x=p,b=0,_=m,w=0,k=g,S=0,C=v;if(r.content&&a){var A=r.content;y=ic(h,0,A[0]),b=ic(d,0,A[1]),x=ic(h,A[0],A[2]),_=ic(d,A[1],A[3]),w=A[0]-y,S=A[1]-b,k=A[2]-A[0]-x,C=A[3]-A[1]-_}var O=function(a,n,s,l){var h=nc(a.stretch-y,x,c,e.left),d=rc(a.fixed-w,k,a.stretch,p),f=nc(n.stretch-b,_,u,e.top),g=rc(n.fixed-S,C,n.stretch,m),v=nc(s.stretch-y,x,c,e.left),A=rc(s.fixed-w,k,s.stretch,p),O=nc(l.stretch-b,_,u,e.top),T=rc(l.fixed-S,C,l.stretch,m),M=new F(h,f),E=new F(v,f),I=new F(v,O),P=new F(h,O),D=new F(d/o,g/o),z=new F(A/o,T/o),L=t*Math.PI/180;if(L){var j=Math.sin(L),R=Math.cos(L),B=[R,-j,j,R];M._matMult(B),E._matMult(B),P._matMult(B),I._matMult(B)}var N=a.stretch+a.fixed,V=n.stretch+n.fixed;return{tl:M,tr:E,bl:P,br:I,tex:{x:r.paddedRect.x+1+N,y:r.paddedRect.y+1+V,w:s.stretch+s.fixed-N,h:l.stretch+l.fixed-V},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:D,pixelOffsetBR:z,minFontScaleX:k/o/c,minFontScaleY:C/o/u,isSDF:i}};if(a&&(r.stretchX||r.stretchY))for(var T=ac(h,g,p),M=ac(d,v,m),E=0;E<T.length-1;E++)for(var I=T[E],P=T[E+1],D=0;D<M.length-1;D++)n.push(O(I,M[D],P,M[D+1]));else n.push(O({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:s+1},{fixed:0,stretch:l+1}));return n}function ic(e,t,i){var a,n=0,r=d(e);try{for(r.s();!(a=r.n()).done;){var o=a.value;n+=Math.max(t,Math.min(i,o[1]))-Math.max(t,Math.min(i,o[0]))}}catch(s){r.e(s)}finally{r.f()}return n}function ac(e,t,i){var a,n=[{fixed:-1,stretch:0}],r=d(e);try{for(r.s();!(a=r.n()).done;){var o=h(a.value,2),s=o[0],l=o[1],c=n[n.length-1];n.push({fixed:s-c.stretch,stretch:c.stretch}),n.push({fixed:s-c.stretch,stretch:c.stretch+(l-s)})}}catch(u){r.e(u)}finally{r.f()}return n.push({fixed:t+1,stretch:i}),n}function nc(e,t,i,a){return e/t*i+a}function rc(e,t,i,a){return e-t*i/a}Oa("Anchor",Gl);var oc=f((function e(t,i,a,n,r,o,s,l,c,u){if(p(this,e),this.boxStartIndex=t.length,c){var h=o.top,d=o.bottom,f=o.collisionPadding;f&&(h-=f[1],d+=f[3]);var m=d-h;m>0&&(m=Math.max(10,m),this.circleDiameter=m)}else{var g=o.top*s-l[0],v=o.bottom*s+l[2],y=o.left*s-l[3],x=o.right*s+l[1],b=o.collisionPadding;if(b&&(y-=b[0]*s,g-=b[1]*s,x+=b[2]*s,v+=b[3]*s),u){var _=new F(y,g),w=new F(x,g),k=new F(y,v),S=new F(x,v),C=u*Math.PI/180;_._rotate(C),w._rotate(C),k._rotate(C),S._rotate(C),y=Math.min(_.x,w.x,k.x,S.x),x=Math.max(_.x,w.x,k.x,S.x),g=Math.min(_.y,w.y,k.y,S.y),v=Math.max(_.y,w.y,k.y,S.y)}t.emplaceBack(i.x,i.y,y,g,x,v,a,n,r)}this.boxEndIndex=t.length})),sc=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lc;if(p(this,e),this.data=t,this.length=this.data.length,this.compare=i,this.length>0)for(var a=(this.length>>1)-1;a>=0;a--)this._down(a)}return f(e,[{key:"push",value:function(e){this.data.push(e),this.length++,this._up(this.length-1)}},{key:"pop",value:function(){if(0!==this.length){var e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}}},{key:"peek",value:function(){return this.data[0]}},{key:"_up",value:function(e){for(var t=this.data,i=this.compare,a=t[e];e>0;){var n=e-1>>1,r=t[n];if(i(a,r)>=0)break;t[e]=r,e=n}t[e]=a}},{key:"_down",value:function(e){for(var t=this.data,i=this.compare,a=this.length>>1,n=t[e];e<a;){var r=1+(e<<1),o=t[r],s=r+1;if(s<this.length&&i(t[s],o)<0&&(r=s,o=t[s]),i(o,n)>=0)break;t[e]=o,e=r}t[e]=n}}]),e}();function lc(e,t){return e<t?-1:e>t?1:0}function cc(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=1/0,n=1/0,r=-1/0,o=-1/0,s=e[0],l=0;l<s.length;l++){var c=s[l];(!l||c.x<a)&&(a=c.x),(!l||c.y<n)&&(n=c.y),(!l||c.x>r)&&(r=c.x),(!l||c.y>o)&&(o=c.y)}var u=Math.min(r-a,o-n),h=u/2,d=new sc([],uc);if(0===u)return new F(a,n);for(var f=a;f<r;f+=u)for(var p=n;p<o;p+=u)d.push(new hc(f+h,p+h,h,e));for(var m=function(e){for(var t=0,i=0,a=0,n=e[0],r=0,o=n.length,s=o-1;r<o;s=r++){var l=n[r],c=n[s],u=l.x*c.y-c.x*l.y;i+=(l.x+c.x)*u,a+=(l.y+c.y)*u,t+=3*u}return new hc(i/t,a/t,0,e)}(e),g=d.length;d.length;){var v=d.pop();(v.d>m.d||!m.d)&&(m=v,i&&console.log("found best %d after %d probes",Math.round(1e4*v.d)/1e4,g)),v.max-m.d<=t||(h=v.h/2,d.push(new hc(v.p.x-h,v.p.y-h,h,e)),d.push(new hc(v.p.x+h,v.p.y-h,h,e)),d.push(new hc(v.p.x-h,v.p.y+h,h,e)),d.push(new hc(v.p.x+h,v.p.y+h,h,e)),g+=4)}return i&&(console.log("num probes: ".concat(g)),console.log("best distance: ".concat(m.d))),m.p}function uc(e,t){return t.max-e.max}function hc(e,t,i,a){this.p=new F(e,t),this.h=i,this.d=function(e,t){for(var i=!1,a=1/0,n=0;n<t.length;n++)for(var r=t[n],o=0,s=r.length,l=s-1;o<s;l=o++){var c=r[o],u=r[l];c.y>e.y!=u.y>e.y&&e.x<(u.x-c.x)*(e.y-c.y)/(u.y-c.y)+c.x&&(i=!i),a=Math.min(a,to(e,c,u))}return(i?1:-1)*Math.sqrt(a)}(this.p,a),this.max=this.d+this.h*Math.SQRT2}var dc=Number.POSITIVE_INFINITY;function fc(e,t){return t[1]!==dc?function(e,t,i){var a=0,n=0;switch(t=Math.abs(t),i=Math.abs(i),e){case"top-right":case"top-left":case"top":n=i-7;break;case"bottom-right":case"bottom-left":case"bottom":n=7-i}switch(e){case"top-right":case"bottom-right":case"right":a=-t;break;case"top-left":case"bottom-left":case"left":a=t}return[a,n]}(e,t[0],t[1]):function(e,t){var i=0,a=0;t<0&&(t=0);var n=t/Math.sqrt(2);switch(e){case"top-right":case"top-left":a=n-7;break;case"bottom-right":case"bottom-left":a=7-n;break;case"bottom":a=7-t;break;case"top":a=t-7}switch(e){case"top-right":case"bottom-right":i=-n;break;case"top-left":case"bottom-left":i=n;break;case"left":i=t;break;case"right":i=-t}return[i,a]}(e,t[0])}function pc(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}var mc=32640;function gc(e,t,i,a,n,o,s,l,c,h,f,p,m,g,v){var y=function(e,t,i,a,n,o,s,l){var c,h=a.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,f=[],p=d(t.positionedLines);try{for(p.s();!(c=p.n()).done;){var m,g=c.value,v=d(g.positionedGlyphs);try{for(v.s();!(m=v.n()).done;){var y=m.value;if(y.rect){var x=y.rect||{},b=4,_=!0,w=1,k=0,S=(n||l)&&y.vertical,C=y.metrics.advance*y.scale/2;if(l&&t.verticalizable){var A=24*(y.scale-1),O=(24-y.metrics.width*y.scale)/2;k=g.lineOffset/2-(y.imageName?-O:A)}if(y.imageName){var T=s[y.imageName];_=T.sdf,b=1/(w=T.pixelRatio)}var M=n?[y.x+C,y.y]:[0,0],E=n?[0,0]:[y.x+C+i[0],y.y+i[1]-k],I=[0,0];S&&(I=E,E=[0,0]);var P=(y.metrics.left-b)*y.scale-C+E[0],D=(-y.metrics.top-b)*y.scale+E[1],z=P+x.w*y.scale/w,L=D+x.h*y.scale/w,j=new F(P,D),R=new F(z,D),B=new F(P,L),N=new F(z,L);if(S){var V=new F(-C,C- -17),Y=-Math.PI/2,W=12-C,H=new F(22-W,-(y.imageName?W:0)),U=r(F,u(I));j._rotateAround(Y,V)._add(H)._add(U),R._rotateAround(Y,V)._add(H)._add(U),B._rotateAround(Y,V)._add(H)._add(U),N._rotateAround(Y,V)._add(H)._add(U)}if(h){var X=Math.sin(h),G=Math.cos(h),q=[G,-X,X,G];j._matMult(q),R._matMult(q),B._matMult(q),N._matMult(q)}var Z=new F(0,0),K=new F(0,0);f.push({tl:j,tr:R,bl:B,br:N,tex:x,writingMode:t.writingMode,glyphOffset:M,sectionIndex:y.sectionIndex,isSDF:_,pixelOffsetTL:Z,pixelOffsetBR:K,minFontScaleX:0,minFontScaleY:0})}}}catch(J){v.e(J)}finally{v.f()}}}catch(J){p.e(J)}finally{p.f()}return f}(0,i,l,n,o,s,a,e.allowVerticalPlacement),x=e.textSizeData,b=null;"source"===x.kind?(b=[Ul*n.layout.get("text-size").evaluate(s,{})])[0]>mc&&O("".concat(e.layerIds[0],': Value for "text-size" is >= 255. Reduce your "text-size".')):"composite"===x.kind&&((b=[Ul*g.compositeTextSizes[0].evaluate(s,{},v),Ul*g.compositeTextSizes[1].evaluate(s,{},v)])[0]>mc||b[1]>mc)&&O("".concat(e.layerIds[0],': Value for "text-size" is >= 255. Reduce your "text-size".')),e.addSymbols(e.text,y,b,l,o,s,h,t,c.lineStartIndex,c.lineLength,m,v);var _,w=d(f);try{for(w.s();!(_=w.n()).done;)p[_.value]=e.text.placedSymbolArray.length-1}catch(k){w.e(k)}finally{w.f()}return 4*y.length}function vc(e){for(var t in e)return e[t];return null}function yc(e,t,i,a){var n=e.compareText;if(t in n){for(var r=n[t],o=r.length-1;o>=0;o--)if(a.dist(r[o])<i)return!0}else n[t]=[];return n[t].push(a),!1}var xc=xs.VectorTileFeature.types,bc=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function _c(e,t,i,a,n,r,o,s,l,c,u,h,d){var f=s?Math.min(mc,Math.round(s[0])):0,p=s?Math.min(mc,Math.round(s[1])):0;e.emplaceBack(t,i,Math.round(32*a),Math.round(32*n),r,o,(f<<1)+(l?1:0),p,16*c,16*u,256*h,256*d)}function wc(e,t,i){e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i)}function kc(e){var t,i=d(e.sections);try{for(i.s();!(t=i.n()).done;)if(Na(t.value.text))return!0}catch(a){i.e(a)}finally{i.f()}return!1}var Sc=function(){function e(t){p(this,e),this.layoutVertexArray=new sr,this.indexArray=new dr,this.programConfigurations=t,this.segments=new mr,this.dynamicLayoutVertexArray=new lr,this.opacityVertexArray=new cr,this.placedSymbolArray=new Gn}return f(e,[{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}},{key:"upload",value:function(e,t,i,a){this.isEmpty()||(i&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Ks.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,Js.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,bc,!0),this.opacityVertexBuffer.itemSize=1),(i||a)&&this.programConfigurations.upload(e))}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}]),e}();Oa("SymbolBuffers",Sc);var Cc=function(){function e(t,i,a){p(this,e),this.layoutVertexArray=new t,this.layoutAttributes=i,this.indexArray=new a,this.segments=new mr,this.collisionVertexArray=new hr}return f(e,[{key:"upload",value:function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Qs.members,!0)}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}]),e}();Oa("CollisionBuffers",Cc);var Ac=function(){function t(i){p(this,t),this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=po([]),this.placementViewportMatrix=po([]);var a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Xl(this.zoom,a["text-size"]),this.iconSizeData=Xl(this.zoom,a["icon-size"]);var n=this.layers[0].layout,r=n.get("symbol-sort-key"),o=n.get("symbol-z-order");this.canOverlap="never"!==Ic(n,"text-overlap","text-allow-overlap")||"never"!==Ic(n,"icon-overlap","icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==o&&!r.isConstant(),this.sortFeaturesByY=("viewport-y"===o||"auto"===o&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===n.get("symbol-placement")&&(this.writingModes=n.get("text-writing-mode").map((function(t){return e.WritingMode[t]}))),this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id})),this.sourceID=i.sourceID}return f(t,[{key:"createArrays",value:function(){this.text=new Sc(new Fr(this.layers,this.zoom,(function(e){return/^text/.test(e)}))),this.icon=new Sc(new Fr(this.layers,this.zoom,(function(e){return/^icon/.test(e)}))),this.glyphOffsetArray=new Kn,this.lineVertexArray=new Jn,this.symbolInstances=new Zn}},{key:"calculateGlyphDependencies",value:function(e,t,i,a,n){for(var r=0;r<e.length;r++)if(t[e.charCodeAt(r)]=!0,(i||a)&&n){var o=il[e.charAt(r)];o&&(t[o.charCodeAt(0)]=!0)}}},{key:"populate",value:function(t,i,a){var n=this.layers[0],r=n.layout,o=r.get("text-font"),s=r.get("text-field"),l=r.get("icon-image"),c=("constant"!==s.value.kind||s.value.value instanceof qe&&!s.value.value.isEmpty()||s.value.value.toString().length>0)&&("constant"!==o.value.kind||o.value.value.length>0),u="constant"!==l.value.kind||!!l.value.value||Object.keys(l.parameters).length>0,h=r.get("symbol-sort-key");if(this.features=[],c||u){var f,p=i.iconDependencies,m=i.glyphDependencies,g=i.availableImages,v=new $a(this.zoom),y=d(t);try{for(y.s();!(f=y.n()).done;){var x=f.value,b=x.feature,_=x.id,w=x.index,k=x.sourceLayerIndex,S=n._featureFilter.needGeometry,C=Ur(b,S);if(n._featureFilter.filter(v,C,a)){var A=void 0,O=void 0;if(S||(C.geometry=Hr(b)),c){var T=n.getValueAndResolveTokens("text-field",C,a,g),M=qe.factory(T);kc(M)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Ka()||this.hasRTLText&&Qa.isParsed())&&(A=tl(M,n,C))}if(u){var E=n.getValueAndResolveTokens("icon-image",C,a,g);O=E instanceof Ke?E:Ke.fromString(E)}if(A||O){var I=this.sortFeaturesByKey?h.evaluate(C,{},a):void 0;if(this.features.push({id:_,text:A,icon:O,index:w,sourceLayerIndex:k,geometry:C.geometry,properties:b.properties,type:xc[b.type],sortKey:I}),O&&(p[O.name]=!0),A){var P=o.evaluate(C,{},a).join(","),D="viewport"!==r.get("text-rotation-alignment")&&"point"!==r.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(e.WritingMode.vertical)>=0;var z,L=d(A.sections);try{for(L.s();!(z=L.n()).done;){var j=z.value;if(j.image)p[j.image.name]=!0;else{var R=za(A.toString()),F=j.fontStack||P,B=m[F]=m[F]||{};this.calculateGlyphDependencies(j.text,B,D,this.allowVerticalPlacement,R)}}}catch(N){L.e(N)}finally{L.f()}}}}}}catch(N){y.e(N)}finally{y.f()}"line"===r.get("symbol-placement")&&(this.features=function(e){var t={},i={},a=[],n=0;function r(t){a.push(e[t]),n++}function o(e,t,n){var r=i[e];return delete i[e],i[t]=r,a[r].geometry[0].pop(),a[r].geometry[0]=a[r].geometry[0].concat(n[0]),r}function s(e,i,n){var r=t[i];return delete t[i],t[e]=r,a[r].geometry[0].shift(),a[r].geometry[0]=n[0].concat(a[r].geometry[0]),r}function l(e,t,i){var a=i?t[0][t[0].length-1]:t[0][0];return"".concat(e,":").concat(a.x,":").concat(a.y)}for(var c=0;c<e.length;c++){var u=e[c],h=u.geometry,d=u.text?u.text.toString():null;if(d){var f=l(d,h),p=l(d,h,!0);if(f in i&&p in t&&i[f]!==t[p]){var m=s(f,p,h),g=o(f,p,a[m].geometry);delete t[f],delete i[p],i[l(d,a[g].geometry,!0)]=g,a[m].geometry=null}else f in i?o(f,p,h):p in t?s(f,p,h):(r(c),t[f]=n-1,i[p]=n-1)}else r(c)}return a.filter((function(e){return e.geometry}))}(this.features)),this.sortFeaturesByKey&&this.features.sort((function(e,t){return e.sortKey-t.sortKey}))}}},{key:"update",value:function(e,t,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,i),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,i))}},{key:"isEmpty",value:function(){return 0===this.symbolInstances.length&&!this.hasRTLText}},{key:"uploadPending",value:function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}},{key:"upload",value:function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}},{key:"destroyDebugData",value:function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}},{key:"destroy",value:function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}},{key:"addToLineVertexArray",value:function(e,t){var i=this.lineVertexArray.length;if(void 0!==e.segment){for(var a=e.dist(t[e.segment+1]),n=e.dist(t[e.segment]),r={},o=e.segment+1;o<t.length;o++)r[o]={x:t[o].x,y:t[o].y,tileUnitDistanceFromAnchor:a},o<t.length-1&&(a+=t[o+1].dist(t[o]));for(var s=e.segment||0;s>=0;s--)r[s]={x:t[s].x,y:t[s].y,tileUnitDistanceFromAnchor:n},s>0&&(n+=t[s-1].dist(t[s]));for(var l=0;l<t.length;l++){var c=r[l];this.lineVertexArray.emplaceBack(c.x,c.y,c.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}}},{key:"addSymbols",value:function(t,i,a,n,r,o,s,l,c,u,h,d){for(var f=t.indexArray,p=t.layoutVertexArray,m=t.segments.prepareSegment(4*i.length,p,f,this.canOverlap?o.sortKey:void 0),g=this.glyphOffsetArray.length,v=m.vertexLength,y=this.allowVerticalPlacement&&s===e.WritingMode.vertical?Math.PI/2:0,x=o.text&&o.text.sections,b=0;b<i.length;b++){var _=i[b],w=_.tl,k=_.tr,S=_.bl,C=_.br,A=_.tex,O=_.pixelOffsetTL,T=_.pixelOffsetBR,M=_.minFontScaleX,E=_.minFontScaleY,I=_.glyphOffset,P=_.isSDF,D=_.sectionIndex,z=m.vertexLength,L=I[1];_c(p,l.x,l.y,w.x,L+w.y,A.x,A.y,a,P,O.x,O.y,M,E),_c(p,l.x,l.y,k.x,L+k.y,A.x+A.w,A.y,a,P,T.x,O.y,M,E),_c(p,l.x,l.y,S.x,L+S.y,A.x,A.y+A.h,a,P,O.x,T.y,M,E),_c(p,l.x,l.y,C.x,L+C.y,A.x+A.w,A.y+A.h,a,P,T.x,T.y,M,E),wc(t.dynamicLayoutVertexArray,l,y),f.emplaceBack(z,z+1,z+2),f.emplaceBack(z+1,z+2,z+3),m.vertexLength+=4,m.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(I[0]),b!==i.length-1&&D===i[b+1].sectionIndex||t.programConfigurations.populatePaintArrays(p.length,o,o.index,{},d,x&&x[D])}t.placedSymbolArray.emplaceBack(l.x,l.y,g,this.glyphOffsetArray.length-g,v,c,u,l.segment,a?a[0]:0,a?a[1]:0,n[0],n[1],s,0,!1,0,h)}},{key:"_addCollisionDebugVertex",value:function(e,t,i,a,n,r){return t.emplaceBack(0,0),e.emplaceBack(i.x,i.y,a,n,Math.round(r.x),Math.round(r.y))}},{key:"addCollisionDebugVertices",value:function(e,t,i,a,n,r,o){var s=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),l=s.vertexLength,c=n.layoutVertexArray,u=n.collisionVertexArray,h=o.anchorX,d=o.anchorY;this._addCollisionDebugVertex(c,u,r,h,d,new F(e,t)),this._addCollisionDebugVertex(c,u,r,h,d,new F(i,t)),this._addCollisionDebugVertex(c,u,r,h,d,new F(i,a)),this._addCollisionDebugVertex(c,u,r,h,d,new F(e,a)),s.vertexLength+=4;var f=n.indexArray;f.emplaceBack(l,l+1),f.emplaceBack(l+1,l+2),f.emplaceBack(l+2,l+3),f.emplaceBack(l+3,l),s.primitiveLength+=4}},{key:"addDebugCollisionBoxes",value:function(e,t,i,a){for(var n=e;n<t;n++){var r=this.collisionBoxArray.get(n);this.addCollisionDebugVertices(r.x1,r.y1,r.x2,r.y2,a?this.textCollisionBox:this.iconCollisionBox,r.anchorPoint,i)}}},{key:"generateCollisionDebugBuffers",value:function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Cc(ur,$s.members,fr),this.iconCollisionBox=new Cc(ur,$s.members,fr);for(var e=0;e<this.symbolInstances.length;e++){var t=this.symbolInstances.get(e);this.addDebugCollisionBoxes(t.textBoxStartIndex,t.textBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.verticalTextBoxStartIndex,t.verticalTextBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.iconBoxStartIndex,t.iconBoxEndIndex,t,!1),this.addDebugCollisionBoxes(t.verticalIconBoxStartIndex,t.verticalIconBoxEndIndex,t,!1)}}},{key:"_deserializeCollisionBoxesForSymbol",value:function(e,t,i,a,n,r,o,s,l){for(var c={},u=t;u<i;u++){var h=e.get(u);c.textBox={x1:h.x1,y1:h.y1,x2:h.x2,y2:h.y2,anchorPointX:h.anchorPointX,anchorPointY:h.anchorPointY},c.textFeatureIndex=h.featureIndex;break}for(var d=a;d<n;d++){var f=e.get(d);c.verticalTextBox={x1:f.x1,y1:f.y1,x2:f.x2,y2:f.y2,anchorPointX:f.anchorPointX,anchorPointY:f.anchorPointY},c.verticalTextFeatureIndex=f.featureIndex;break}for(var p=r;p<o;p++){var m=e.get(p);c.iconBox={x1:m.x1,y1:m.y1,x2:m.x2,y2:m.y2,anchorPointX:m.anchorPointX,anchorPointY:m.anchorPointY},c.iconFeatureIndex=m.featureIndex;break}for(var g=s;g<l;g++){var v=e.get(g);c.verticalIconBox={x1:v.x1,y1:v.y1,x2:v.x2,y2:v.y2,anchorPointX:v.anchorPointX,anchorPointY:v.anchorPointY},c.verticalIconFeatureIndex=v.featureIndex;break}return c}},{key:"deserializeCollisionBoxes",value:function(e){this.collisionArrays=[];for(var t=0;t<this.symbolInstances.length;t++){var i=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}}},{key:"hasTextData",value:function(){return this.text.segments.get().length>0}},{key:"hasIconData",value:function(){return this.icon.segments.get().length>0}},{key:"hasDebugData",value:function(){return this.textCollisionBox&&this.iconCollisionBox}},{key:"hasTextCollisionBoxData",value:function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}},{key:"hasIconCollisionBoxData",value:function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}},{key:"addIndicesForPlacedSymbol",value:function(e,t){for(var i=e.placedSymbolArray.get(t),a=i.vertexStartIndex+4*i.numGlyphs,n=i.vertexStartIndex;n<a;n+=4)e.indexArray.emplaceBack(n,n+1,n+2),e.indexArray.emplaceBack(n+1,n+2,n+3)}},{key:"getSortedSymbolIndexes",value:function(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var t=Math.sin(e),i=Math.cos(e),a=[],n=[],r=[],o=0;o<this.symbolInstances.length;++o){r.push(o);var s=this.symbolInstances.get(o);a.push(0|Math.round(t*s.anchorX+i*s.anchorY)),n.push(s.featureIndex)}return r.sort((function(e,t){return a[e]-a[t]||n[t]-n[e]})),r}},{key:"addToSortKeyRanges",value:function(e,t){var i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===t?i.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})}},{key:"sortFeatures",value:function(e){var t=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];var i,a=d(this.symbolInstanceIndexes);try{for(a.s();!(i=a.n()).done;){var n=i.value,r=this.symbolInstances.get(n);this.featureSortOrder.push(r.featureIndex),[r.rightJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.leftJustifiedTextSymbolIndex].forEach((function(e,i,a){e>=0&&a.indexOf(e)===i&&t.addIndicesForPlacedSymbol(t.text,e)})),r.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,r.verticalPlacedTextSymbolIndex),r.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,r.placedIconSymbolIndex),r.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,r.verticalPlacedIconSymbolIndex)}}catch(o){a.e(o)}finally{a.f()}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}]),t}();Oa("SymbolBucket",Ac,{omit:["layers","collisionBoxArray","features","compareText"]}),Ac.MAX_GLYPHS=65535,Ac.addDynamicAttributes=wc;var Oc=new pn({"symbol-placement":new cn(pe.layout_symbol["symbol-placement"]),"symbol-spacing":new cn(pe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new cn(pe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new un(pe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new cn(pe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new cn(pe.layout_symbol["icon-allow-overlap"]),"icon-overlap":new cn(pe.layout_symbol["icon-overlap"]),"icon-ignore-placement":new cn(pe.layout_symbol["icon-ignore-placement"]),"icon-optional":new cn(pe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new cn(pe.layout_symbol["icon-rotation-alignment"]),"icon-size":new un(pe.layout_symbol["icon-size"]),"icon-text-fit":new cn(pe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new cn(pe.layout_symbol["icon-text-fit-padding"]),"icon-image":new un(pe.layout_symbol["icon-image"]),"icon-rotate":new un(pe.layout_symbol["icon-rotate"]),"icon-padding":new un(pe.layout_symbol["icon-padding"]),"icon-keep-upright":new cn(pe.layout_symbol["icon-keep-upright"]),"icon-offset":new un(pe.layout_symbol["icon-offset"]),"icon-anchor":new un(pe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new cn(pe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new cn(pe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new cn(pe.layout_symbol["text-rotation-alignment"]),"text-field":new un(pe.layout_symbol["text-field"]),"text-font":new un(pe.layout_symbol["text-font"]),"text-size":new un(pe.layout_symbol["text-size"]),"text-max-width":new un(pe.layout_symbol["text-max-width"]),"text-line-height":new cn(pe.layout_symbol["text-line-height"]),"text-letter-spacing":new un(pe.layout_symbol["text-letter-spacing"]),"text-justify":new un(pe.layout_symbol["text-justify"]),"text-radial-offset":new un(pe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new cn(pe.layout_symbol["text-variable-anchor"]),"text-anchor":new un(pe.layout_symbol["text-anchor"]),"text-max-angle":new cn(pe.layout_symbol["text-max-angle"]),"text-writing-mode":new cn(pe.layout_symbol["text-writing-mode"]),"text-rotate":new un(pe.layout_symbol["text-rotate"]),"text-padding":new cn(pe.layout_symbol["text-padding"]),"text-keep-upright":new cn(pe.layout_symbol["text-keep-upright"]),"text-transform":new un(pe.layout_symbol["text-transform"]),"text-offset":new un(pe.layout_symbol["text-offset"]),"text-allow-overlap":new cn(pe.layout_symbol["text-allow-overlap"]),"text-overlap":new cn(pe.layout_symbol["text-overlap"]),"text-ignore-placement":new cn(pe.layout_symbol["text-ignore-placement"]),"text-optional":new cn(pe.layout_symbol["text-optional"])}),Tc={paint:new pn({"icon-opacity":new un(pe.paint_symbol["icon-opacity"]),"icon-color":new un(pe.paint_symbol["icon-color"]),"icon-halo-color":new un(pe.paint_symbol["icon-halo-color"]),"icon-halo-width":new un(pe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new un(pe.paint_symbol["icon-halo-blur"]),"icon-translate":new cn(pe.paint_symbol["icon-translate"]),"icon-translate-anchor":new cn(pe.paint_symbol["icon-translate-anchor"]),"text-opacity":new un(pe.paint_symbol["text-opacity"]),"text-color":new un(pe.paint_symbol["text-color"],{runtimeType:Ae,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new un(pe.paint_symbol["text-halo-color"]),"text-halo-width":new un(pe.paint_symbol["text-halo-width"]),"text-halo-blur":new un(pe.paint_symbol["text-halo-blur"]),"text-translate":new cn(pe.paint_symbol["text-translate"]),"text-translate-anchor":new cn(pe.paint_symbol["text-translate-anchor"])}),layout:Oc},Mc=function(){function e(t){if(p(this,e),void 0===t.property.overrides)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=t.property.overrides?t.property.overrides.runtimeType:we,this.defaultValue=t}return f(e,[{key:"evaluate",value:function(e){if(e.formattedSection){var t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}},{key:"eachChild",value:function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return null}}]),e}();Oa("FormatSectionOverride",Mc,{omit:["defaultValue"]});var Ec=function(e){m(i,e);var t=g(i);function i(e){return p(this,i),t.call(this,e,Tc)}return f(i,[{key:"recalculate",value:function(e,t){if(o(s(i.prototype),"recalculate",this).call(this,e,t),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]="map"===this.layout.get("text-rotation-alignment")?"map":"viewport"),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var a=this.layout.get("text-writing-mode");if(a){var n,r=[],l=d(a);try{for(l.s();!(n=l.n()).done;){var c=n.value;r.indexOf(c)<0&&r.push(c)}}catch(u){l.e(u)}finally{l.f()}this.layout._values["text-writing-mode"]=r}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}},{key:"getValueAndResolveTokens",value:function(e,t,i,a){var n=this.layout.get(e).evaluate(t,{},i,a),r=this._unevaluatedLayout._values[e];return r.isDataDriven()||ji(r.value)||!n?n:function(e,t){return t.replace(/{([^{}]+)}/g,(function(t,i){return i in e?String(e[i]):""}))}(t.properties,n)}},{key:"createBucket",value:function(e){return new Ac(e)}},{key:"queryRadius",value:function(){return 0}},{key:"queryIntersectsFeature",value:function(){throw new Error("Should take a different path in FeatureIndex")}},{key:"_setPaintOverrides",value:function(){var e,t=d(Tc.paint.overridableProperties);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(i.hasPaintOverride(this.layout,a)){var n,r=this.paint.get(a),o=new Mc(r),s=new Li(o,r.property.specification);n="constant"===r.value.kind||"source"===r.value.kind?new Fi("source",s):new Bi("composite",s,r.value.zoomStops),this.paint._values[a]=new sn(r.property,n,r.parameters)}}}catch(l){t.e(l)}finally{t.f()}}},{key:"_handleOverridablePaintPropertyUpdate",value:function(e,t,a){return!(!this.layout||t.isDataDriven()||a.isDataDriven())&&i.hasPaintOverride(this.layout,e)}}],[{key:"hasPaintOverride",value:function(e,t){var i=e.get("text-field"),a=Tc.paint.properties[t],n=!1,r=function(e){var t,i=d(e);try{for(i.s();!(t=i.n()).done;){var r=t.value;if(a.overrides&&a.overrides.hasOverride(r))return void(n=!0)}}catch(o){i.e(o)}finally{i.f()}};if("constant"===i.value.kind&&i.value.value instanceof qe)r(i.value.value.sections);else if("source"===i.value.kind){var o=i.value;o._styleExpression&&function e(t){n||(t instanceof tt&&$e(t.value)===Ee?r(t.value.sections):t instanceof gi?r(t.sections):t.eachChild(e))}(o._styleExpression.expression)}return n}}]),i}(gn);function Ic(e,t,i){var a="never",n=e.get(t);return n?a=n:e.get(i)&&(a="always"),a}var Pc={paint:new pn({"background-color":new cn(pe.paint_background["background-color"]),"background-pattern":new dn(pe.paint_background["background-pattern"]),"background-opacity":new cn(pe.paint_background["background-opacity"])})},Dc={paint:new pn({"raster-opacity":new cn(pe.paint_raster["raster-opacity"]),"raster-hue-rotate":new cn(pe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new cn(pe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new cn(pe.paint_raster["raster-brightness-max"]),"raster-saturation":new cn(pe.paint_raster["raster-saturation"]),"raster-contrast":new cn(pe.paint_raster["raster-contrast"]),"raster-resampling":new cn(pe.paint_raster["raster-resampling"]),"raster-fade-duration":new cn(pe.paint_raster["raster-fade-duration"])})},zc=function(e){m(i,e);var t=g(i);function i(e){var a;return p(this,i),(a=t.call(this,e,{})).onAdd=function(e){a.implementation.onAdd&&a.implementation.onAdd(e,e.painter.context.gl)},a.onRemove=function(e){a.implementation.onRemove&&a.implementation.onRemove(e,e.painter.context.gl)},a.implementation=e,a}return f(i,[{key:"is3D",value:function(){return"3d"===this.implementation.renderingMode}},{key:"hasOffscreenPass",value:function(){return void 0!==this.implementation.prerender}},{key:"recalculate",value:function(){}},{key:"updateTransitions",value:function(){}},{key:"hasTransition",value:function(){return!1}},{key:"serialize",value:function(){throw new Error("Custom layers cannot be serialized")}}]),i}(gn),Lc={circle:function(e){m(i,e);var t=g(i);function i(e){return p(this,i),t.call(this,e,co)}return f(i,[{key:"createBucket",value:function(e){return new Gr(e)}},{key:"queryRadius",value:function(e){var t=e;return ro("circle-radius",this,t)+ro("circle-stroke-width",this,t)+oo(this.paint.get("circle-translate"))}},{key:"queryIntersectsFeature",value:function(e,t,i,a,n,r,o,s){var l,c=so(e,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),r.angle,o),u=this.paint.get("circle-radius").evaluate(t,i)+this.paint.get("circle-stroke-width").evaluate(t,i),h="map"===this.paint.get("circle-pitch-alignment"),f=h?c:function(e,t){return e.map((function(e){return wo(e,t)}))}(c,s),p=h?u*o:u,m=d(a);try{for(m.s();!(l=m.n()).done;){var g,v=l.value,y=d(v);try{for(y.s();!(g=y.n()).done;){var x=g.value,b=h?x:wo(x,s),_=p,w=bo([],[x.x,x.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?_*=w[3]/r.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(_*=r.cameraToCenterDistance/w[3]),Zr(f,b,_))return!0}}catch(k){y.e(k)}finally{y.f()}}}catch(k){m.e(k)}finally{m.f()}return!1}}]),i}(gn),heatmap:function(e){m(i,e);var t=g(i);function i(e){var a;return p(this,i),(a=t.call(this,e,So))._updateColorRamp(),a}return f(i,[{key:"createBucket",value:function(e){return new ko(e)}},{key:"_handleSpecialPaintPropertyUpdate",value:function(e){"heatmap-color"===e&&this._updateColorRamp()}},{key:"_updateColorRamp",value:function(){this.colorRamp=Eo({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}},{key:"resize",value:function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}},{key:"queryRadius",value:function(){return 0}},{key:"queryIntersectsFeature",value:function(){return!1}},{key:"hasOffscreenPass",value:function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}}]),i}(gn),hillshade:function(e){m(i,e);var t=g(i);function i(e){return p(this,i),t.call(this,e,Io)}return f(i,[{key:"hasOffscreenPass",value:function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}}]),i}(gn),fill:function(e){m(i,e);var t=g(i);function i(e){return p(this,i),t.call(this,e,ms)}return f(i,[{key:"recalculate",value:function(e,t){o(s(i.prototype),"recalculate",this).call(this,e,t);var a=this.paint._values["fill-outline-color"];"constant"===a.value.kind&&void 0===a.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}},{key:"createBucket",value:function(e){return new fs(e)}},{key:"queryRadius",value:function(){return oo(this.paint.get("fill-translate"))}},{key:"queryIntersectsFeature",value:function(e,t,i,a,n,r,o){return Kr(so(e,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),r.angle,o),a)}},{key:"isTileClipped",value:function(){return!0}}]),i}(gn),"fill-extrusion":function(e){m(i,e);var t=g(i);function i(e){return p(this,i),t.call(this,e,Rs)}return f(i,[{key:"createBucket",value:function(e){return new zs(e)}},{key:"queryRadius",value:function(){return oo(this.paint.get("fill-extrusion-translate"))}},{key:"is3D",value:function(){return!0}},{key:"queryIntersectsFeature",value:function(e,t,i,a,n,r,o,s){var l=so(e,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),r.angle,o),c=this.paint.get("fill-extrusion-height").evaluate(t,i),u=this.paint.get("fill-extrusion-base").evaluate(t,i),h=function(e,t,i,a){var n,r=[],o=d(e);try{for(o.s();!(n=o.n()).done;){var s=n.value,l=[s.x,s.y,0,1];bo(l,l,t),r.push(new F(l[0]/l[3],l[1]/l[3]))}}catch(c){o.e(c)}finally{o.f()}return r}(l,s),f=function(e,t,i,a){var n,r=[],o=[],s=a[8]*t,l=a[9]*t,c=a[10]*t,u=a[11]*t,h=a[8]*i,f=a[9]*i,p=a[10]*i,m=a[11]*i,g=d(e);try{for(g.s();!(n=g.n()).done;){var v,y=n.value,x=[],b=[],_=d(y);try{for(_.s();!(v=_.n()).done;){var w=v.value,k=w.x,S=w.y,C=a[0]*k+a[4]*S+a[12],A=a[1]*k+a[5]*S+a[13],O=a[2]*k+a[6]*S+a[14],T=a[3]*k+a[7]*S+a[15],M=O+c,E=T+u,I=C+h,P=A+f,D=O+p,z=T+m,L=new F((C+s)/E,(A+l)/E);L.z=M/E,x.push(L);var j=new F(I/z,P/z);j.z=D/z,b.push(j)}}catch(R){_.e(R)}finally{_.f()}r.push(x),o.push(b)}}catch(R){g.e(R)}finally{g.f()}return[r,o]}(a,u,c,s);return function(e,t,i){var a=1/0;Kr(i,t)&&(a=Bs(i,t[0]));for(var n=0;n<t.length;n++)for(var r=t[n],o=e[n],s=0;s<r.length-1;s++){var l=r[s],c=[l,r[s+1],o[s+1],o[s],l];qr(i,c)&&(a=Math.min(a,Bs(i,c)))}return a!==1/0&&a}(f[0],f[1],h)}}]),i}(gn),line:function(e){m(i,e);var t=g(i);function i(e){var a;return p(this,i),(a=t.call(this,e,Gs)).gradientVersion=0,a}return f(i,[{key:"_handleSpecialPaintPropertyUpdate",value:function(e){"line-gradient"===e&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof zt,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}},{key:"gradientExpression",value:function(){return this._transitionablePaint._values["line-gradient"].value.expression}},{key:"recalculate",value:function(e,t){o(s(i.prototype),"recalculate",this).call(this,e,t),this.paint._values["line-floorwidth"]=qs.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}},{key:"createBucket",value:function(e){return new Us(e)}},{key:"queryRadius",value:function(e){var t=e,i=Zs(ro("line-width",this,t),ro("line-gap-width",this,t)),a=ro("line-offset",this,t);return i/2+Math.abs(a)+oo(this.paint.get("line-translate"))}},{key:"queryIntersectsFeature",value:function(e,t,i,a,n,r,o){var s=so(e,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),r.angle,o),l=o/2*Zs(this.paint.get("line-width").evaluate(t,i),this.paint.get("line-gap-width").evaluate(t,i)),c=this.paint.get("line-offset").evaluate(t,i);return c&&(a=function(e,t){for(var i=[],a=0;a<e.length;a++){for(var n=e[a],r=[],o=0;o<n.length;o++){var s=n[o-1],l=n[o],c=n[o+1],u=0===o?new F(0,0):l.sub(s)._unit()._perp(),h=o===n.length-1?new F(0,0):c.sub(l)._unit()._perp(),d=u._add(h)._unit(),f=d.x*h.x+d.y*h.y;0!==f&&d._mult(1/f),r.push(d._mult(t)._add(l))}i.push(r)}return i}(a,c*o)),function(e,t,i){for(var a=0;a<t.length;a++){var n=t[a];if(e.length>=3)for(var r=0;r<n.length;r++)if(ao(e,n[r]))return!0;if(Jr(e,n,i))return!0}return!1}(s,a,l)}},{key:"isTileClipped",value:function(){return!0}}]),i}(gn),symbol:Ec,background:function(e){m(i,e);var t=g(i);function i(e){return p(this,i),t.call(this,e,Pc)}return f(i)}(gn),raster:function(e){m(i,e);var t=g(i);function i(e){return p(this,i),t.call(this,e,Dc)}return f(i)}(gn)},jc=function(){function e(t){var i=this;p(this,e),this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){i._triggered=!1,i._callback()})}return f(e,[{key:"trigger",value:function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((function(){e._triggered=!1,e._callback()}),0))}},{key:"remove",value:function(){delete this._channel,this._callback=function(){}}}]),e}(),Rc=6371008.8,Fc=function(){function e(t,i){if(p(this,e),isNaN(t)||isNaN(i))throw new Error("Invalid LngLat object: (".concat(t,", ").concat(i,")"));if(this.lng=+t,this.lat=+i,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}return f(e,[{key:"wrap",value:function(){return new e(x(this.lng,-180,180),this.lat)}},{key:"toArray",value:function(){return[this.lng,this.lat]}},{key:"toString",value:function(){return"LngLat(".concat(this.lng,", ").concat(this.lat,")")}},{key:"distanceTo",value:function(e){var t=Math.PI/180,i=this.lat*t,a=e.lat*t,n=Math.sin(i)*Math.sin(a)+Math.cos(i)*Math.cos(a)*Math.cos((e.lng-this.lng)*t);return Rc*Math.acos(Math.min(n,1))}},{key:"toBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=360*t/40075017,a=i/Math.cos(Math.PI/180*this.lat);return new Bc(new e(this.lng-a,this.lat-i),new e(this.lng+a,this.lat+i))}}],[{key:"convert",value:function(t){if(t instanceof e)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new e(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new e(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}]),e}(),Bc=function(){function e(t,i){p(this,e),t&&(i?this.setSouthWest(t).setNorthEast(i):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}return f(e,[{key:"setNorthEast",value:function(e){return this._ne=e instanceof Fc?new Fc(e.lng,e.lat):Fc.convert(e),this}},{key:"setSouthWest",value:function(e){return this._sw=e instanceof Fc?new Fc(e.lng,e.lat):Fc.convert(e),this}},{key:"extend",value:function(t){var i,a,n=this._sw,r=this._ne;if(t instanceof Fc)i=t,a=t;else{if(!(t instanceof e))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(e.convert(t)):this.extend(Fc.convert(t)):this;if(i=t._sw,a=t._ne,!i||!a)return this}return n||r?(n.lng=Math.min(i.lng,n.lng),n.lat=Math.min(i.lat,n.lat),r.lng=Math.max(a.lng,r.lng),r.lat=Math.max(a.lat,r.lat)):(this._sw=new Fc(i.lng,i.lat),this._ne=new Fc(a.lng,a.lat)),this}},{key:"getCenter",value:function(){return new Fc((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}},{key:"getSouthWest",value:function(){return this._sw}},{key:"getNorthEast",value:function(){return this._ne}},{key:"getNorthWest",value:function(){return new Fc(this.getWest(),this.getNorth())}},{key:"getSouthEast",value:function(){return new Fc(this.getEast(),this.getSouth())}},{key:"getWest",value:function(){return this._sw.lng}},{key:"getSouth",value:function(){return this._sw.lat}},{key:"getEast",value:function(){return this._ne.lng}},{key:"getNorth",value:function(){return this._ne.lat}},{key:"toArray",value:function(){return[this._sw.toArray(),this._ne.toArray()]}},{key:"toString",value:function(){return"LngLatBounds(".concat(this._sw.toString(),", ").concat(this._ne.toString(),")")}},{key:"isEmpty",value:function(){return!(this._sw&&this._ne)}},{key:"contains",value:function(e){var t=Fc.convert(e),i=t.lng,a=t.lat,n=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(n=this._sw.lng>=i&&i>=this._ne.lng),this._sw.lat<=a&&a<=this._ne.lat&&n}}],[{key:"convert",value:function(t){return t instanceof e?t:t?new e(t):t}}]),e}(),Nc=2*Math.PI*Rc;function Vc(e){return Nc*Math.cos(e*Math.PI/180)}function Yc(e){return(180+e)/360}function Wc(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function Hc(e,t){return e/Vc(t)}function Uc(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}var Xc=function(){function e(t,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;p(this,e),this.x=+t,this.y=+i,this.z=+a}return f(e,[{key:"toLngLat",value:function(){return new Fc(360*this.x-180,Uc(this.y))}},{key:"toAltitude",value:function(){return this.z*Vc(Uc(this.y))}},{key:"meterInMercatorCoordinateUnits",value:function(){return 1/Nc*(e=Uc(this.y),1/Math.cos(e*Math.PI/180));var e}}],[{key:"fromLngLat",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=Fc.convert(t);return new e(Yc(a.lng),Wc(a.lat),Hc(i,a.lat))}}]),e}();function Gc(e,t,i){var a=2*Math.PI*6378137/256/Math.pow(2,i);return[e*a-2*Math.PI*6378137/2,t*a-2*Math.PI*6378137/2]}var qc=function(){function e(t,i,a){if(p(this,e),t<0||t>25||a<0||a>=Math.pow(2,t)||i<0||i>=Math.pow(2,t))throw new Error("x=".concat(i,", y=").concat(a,", z=").concat(t," outside of bounds. 0<=x<").concat(Math.pow(2,t),", 0<=y<").concat(Math.pow(2,t)," 0<=z<=25 "));this.z=t,this.x=i,this.y=a,this.key=Jc(0,t,t,i,a)}return f(e,[{key:"equals",value:function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}},{key:"url",value:function(e,t,i){var a,n,r,o,s,l=(n=this.y,r=this.z,o=Gc(256*(a=this.x),256*(n=Math.pow(2,r)-n-1),r),s=Gc(256*(a+1),256*(n+1),r),o[0]+","+o[1]+","+s[0]+","+s[1]),c=function(e,t,i){for(var a,n="",r=e;r>0;r--)n+=(t&(a=1<<r-1)?1:0)+(i&a?2:0);return n}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===i?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,t>1?"@2x":"").replace(/{quadkey}/g,c).replace(/{bbox-epsg-3857}/g,l)}},{key:"isChildOf",value:function(e){var t=this.z-e.z;return t>0&&e.x===this.x>>t&&e.y===this.y>>t}},{key:"getTilePoint",value:function(e){var t=Math.pow(2,this.z);return new F((e.x*t-this.x)*Vr,(e.y*t-this.y)*Vr)}},{key:"toString",value:function(){return"".concat(this.z,"/").concat(this.x,"/").concat(this.y)}}]),e}(),Zc=f((function e(t,i){p(this,e),this.wrap=t,this.canonical=i,this.key=Jc(t,i.z,i.z,i.x,i.y)})),Kc=function(){function e(t,i,a,n,r){if(p(this,e),t<a)throw new Error("overscaledZ should be >= z; overscaledZ = ".concat(t,"; z = ").concat(a));this.overscaledZ=t,this.wrap=i,this.canonical=new qc(a,+n,+r),this.key=Jc(i,t,a,n,r)}return f(e,[{key:"clone",value:function(){return new e(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}},{key:"equals",value:function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}},{key:"scaledTo",value:function(t){if(t>this.overscaledZ)throw new Error("targetZ > this.overscaledZ; targetZ = ".concat(t,"; overscaledZ = ").concat(this.overscaledZ));var i=this.canonical.z-t;return t>this.canonical.z?new e(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new e(t,this.wrap,t,this.canonical.x>>i,this.canonical.y>>i)}},{key:"calculateScaledKey",value:function(e,t){if(e>this.overscaledZ)throw new Error("targetZ > this.overscaledZ; targetZ = ".concat(e,"; overscaledZ = ").concat(this.overscaledZ));var i=this.canonical.z-e;return e>this.canonical.z?Jc(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y):Jc(this.wrap*+t,e,e,this.canonical.x>>i,this.canonical.y>>i)}},{key:"isChildOf",value:function(e){if(e.wrap!==this.wrap)return!1;var t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t}},{key:"children",value:function(t){if(this.overscaledZ>=t)return[new e(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var i=this.canonical.z+1,a=2*this.canonical.x,n=2*this.canonical.y;return[new e(i,this.wrap,i,a,n),new e(i,this.wrap,i,a+1,n),new e(i,this.wrap,i,a,n+1),new e(i,this.wrap,i,a+1,n+1)]}},{key:"isLessThan",value:function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}},{key:"wrapped",value:function(){return new e(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}},{key:"unwrapTo",value:function(t){return new e(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}},{key:"overscaleFactor",value:function(){return Math.pow(2,this.overscaledZ-this.canonical.z)}},{key:"toUnwrapped",value:function(){return new Zc(this.wrap,this.canonical)}},{key:"toString",value:function(){return"".concat(this.overscaledZ,"/").concat(this.canonical.x,"/").concat(this.canonical.y)}},{key:"getTilePoint",value:function(e){return this.canonical.getTilePoint(new Xc(e.x-this.wrap,e.y))}}]),e}();function Jc(e,t,i,a,n){(e*=2)<0&&(e=-1*e-1);var r=1<<i;return(r*r*e+r*n+a).toString(36)+i.toString(36)+t.toString(36)}Oa("CanonicalTileID",qc),Oa("OverscaledTileID",Kc,{omit:["posMatrix"]});var Qc=function(){function e(t,i,a){if(p(this,e),this.uid=t,i.height!==i.width)throw new RangeError("DEM tiles must be square");if(a&&"mapbox"!==a&&"terrarium"!==a)O('"'.concat(a,'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".'));else{this.stride=i.height;var n=this.dim=i.height-2;this.data=new Uint32Array(i.data.buffer),this.encoding=a||"mapbox";for(var r=0;r<n;r++)this.data[this._idx(-1,r)]=this.data[this._idx(0,r)],this.data[this._idx(n,r)]=this.data[this._idx(n-1,r)],this.data[this._idx(r,-1)]=this.data[this._idx(r,0)],this.data[this._idx(r,n)]=this.data[this._idx(r,n-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(n,-1)]=this.data[this._idx(n-1,0)],this.data[this._idx(-1,n)]=this.data[this._idx(0,n-1)],this.data[this._idx(n,n)]=this.data[this._idx(n-1,n-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(var o=0;o<n;o++)for(var s=0;s<n;s++){var l=this.get(o,s);l>this.max&&(this.max=l),l<this.min&&(this.min=l)}}}return f(e,[{key:"get",value:function(e,t){var i=new Uint8Array(this.data.buffer),a=4*this._idx(e,t);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(i[a],i[a+1],i[a+2])}},{key:"getUnpackVector",value:function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}},{key:"_idx",value:function(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)}},{key:"_unpackMapbox",value:function(e,t,i){return(256*e*256+256*t+i)/10-1e4}},{key:"_unpackTerrarium",value:function(e,t,i){return 256*e+t+i/256-32768}},{key:"getPixels",value:function(){return new Mo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}},{key:"backfillBorder",value:function(e,t,i){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var a=t*this.dim,n=t*this.dim+this.dim,r=i*this.dim,o=i*this.dim+this.dim;switch(t){case-1:a=n-1;break;case 1:n=a+1}switch(i){case-1:r=o-1;break;case 1:o=r+1}for(var s=-t*this.dim,l=-i*this.dim,c=r;c<o;c++)for(var u=a;u<n;u++)this.data[this._idx(u,c)]=e.data[this._idx(u+s,c+l)]}}]),e}();Oa("DEMData",Qc);var $c,eu=function(){function e(t){p(this,e),this._stringToNumber={},this._numberToString=[];for(var i=0;i<t.length;i++){var a=t[i];this._stringToNumber[a]=i,this._numberToString[i]=a}}return f(e,[{key:"encode",value:function(e){return this._stringToNumber[e]}},{key:"decode",value:function(e){if(e>=this._numberToString.length)throw new Error("Out of bounds. Index requested n=".concat(e," can't be >= this._numberToString.length ").concat(this._numberToString.length));return this._numberToString[e]}}]),e}(),tu=function(){function e(t,i,a,n,r){p(this,e),this.type="Feature",this._vectorTileFeature=t,t._z=i,t._x=a,t._y=n,this.properties=t.properties,this.id=r}return f(e,[{key:"geometry",get:function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},set:function(e){this._geometry=e}},{key:"toJSON",value:function(){var e={geometry:this.geometry};for(var t in this)"_geometry"!==t&&"_vectorTileFeature"!==t&&(e[t]=this[t]);return e}}]),e}(),iu=function(){function e(t,i){p(this,e),this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Ca(Vr,16,0),this.grid3D=new Ca(Vr,16,0),this.featureIndexArray=new $n,this.promoteId=i}return f(e,[{key:"insert",value:function(e,t,i,a,n,r){var o=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,a,n);for(var s=r?this.grid3D:this.grid,l=0;l<t.length;l++){for(var c=t[l],u=[1/0,1/0,-1/0,-1/0],h=0;h<c.length;h++){var d=c[h];u[0]=Math.min(u[0],d.x),u[1]=Math.min(u[1],d.y),u[2]=Math.max(u[2],d.x),u[3]=Math.max(u[3],d.y)}u[0]<Vr&&u[1]<Vr&&u[2]>=0&&u[3]>=0&&s.insert(o,u[0],u[1],u[2],u[3])}}},{key:"loadVTLayers",value:function(){return this.vtLayers||(this.vtLayers=new xs.VectorTile(new al(this.rawTileData)).layers,this.sourceLayerCoder=new eu(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}},{key:"query",value:function(e,t,i,a){var n=this;this.loadVTLayers();var r,o=e.params||{},s=Vr/e.tileSize/e.scale,l=Ki(o.filter),c=e.queryGeometry,u=e.queryPadding*s,h=nu(c),f=this.grid.query(h.minX-u,h.minY-u,h.maxX+u,h.maxY+u),p=nu(e.cameraQueryGeometry),m=this.grid3D.query(p.minX-u,p.minY-u,p.maxX+u,p.maxY+u,(function(t,i,a,n){return function(e,t,i,a,n){var r,o=d(e);try{for(o.s();!(r=o.n()).done;){var s=r.value;if(t<=s.x&&i<=s.y&&a>=s.x&&n>=s.y)return!0}}catch(f){o.e(f)}finally{o.f()}var l=[new F(t,i),new F(t,n),new F(a,n),new F(a,i)];if(e.length>2){var c,u=d(l);try{for(u.s();!(c=u.n()).done;)if(ao(e,c.value))return!0}catch(f){u.e(f)}finally{u.f()}}for(var h=0;h<e.length-1;h++)if(no(e[h],e[h+1],l))return!0;return!1}(e.cameraQueryGeometry,t-u,i-u,a+u,n+u)})),g=d(m);try{for(g.s();!(r=g.n()).done;){var v=r.value;f.push(v)}}catch(w){g.e(w)}finally{g.f()}f.sort(ru);for(var y,x={},b=function(r){var u=f[r];if(u===y)return"continue";y=u;var h=n.featureIndexArray.get(u),d=null;n.loadMatchingFeature(x,h.bucketIndex,h.sourceLayerIndex,h.featureIndex,l,o.layers,o.availableImages,t,i,a,(function(t,i,a){return d||(d=Hr(t)),i.queryIntersectsFeature(c,t,a,d,n.z,e.transform,s,e.pixelPosMatrix)}))},_=0;_<f.length;_++)b(_);return x}},{key:"loadMatchingFeature",value:function(e,t,i,a,n,r,o,s,l,c,u){var h=this.bucketLayerIDs[t];if(!r||function(e,t){for(var i=0;i<e.length;i++)if(t.indexOf(e[i])>=0)return!0;return!1}(r,h)){var d=this.sourceLayerCoder.decode(i),f=this.vtLayers[d].feature(a);if(n.needGeometry){var p=Ur(f,!0);if(!n.filter(new $a(this.tileID.overscaledZ),p,this.tileID.canonical))return}else if(!n.filter(new $a(this.tileID.overscaledZ),f))return;for(var m=this.getId(f,d),g=0;g<h.length;g++){var v=h[g];if(!(r&&r.indexOf(v)<0)){var y=s[v];if(y){var x={};m&&c&&(x=c.getState(y.sourceLayer||"_geojsonTileLayer",m));var _=b({},l[v]);_.paint=au(_.paint,y.paint,f,x,o),_.layout=au(_.layout,y.layout,f,x,o);var w=!u||u(f,y,x);if(w){var k=new tu(f,this.z,this.x,this.y,m);k.layer=_;var S=e[v];void 0===S&&(S=e[v]=[]),S.push({featureIndex:a,feature:k,intersectionZ:w})}}}}}}},{key:"lookupSymbolFeatures",value:function(e,t,i,a,n,r,o,s){var l={};this.loadVTLayers();var c,u=Ki(n),h=d(e);try{for(h.s();!(c=h.n()).done;){var f=c.value;this.loadMatchingFeature(l,i,a,f,u,r,o,s,t)}}catch(p){h.e(p)}finally{h.f()}return l}},{key:"hasLayer",value:function(e){var t,i=d(this.bucketLayerIDs);try{for(i.s();!(t=i.n()).done;){var a,n=t.value,r=d(n);try{for(r.s();!(a=r.n()).done;)if(e===a.value)return!0}catch(o){r.e(o)}finally{r.f()}}}catch(o){i.e(o)}finally{i.f()}return!1}},{key:"getId",value:function(e,t){var i=e.id;return this.promoteId&&"boolean"==typeof(i=e.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[t]])&&(i=Number(i)),i}}]),e}();function au(e,t,i,a,n){return k(e,(function(e,r){var o=t instanceof ln?t.get(r):null;return o&&o.evaluate?o.evaluate(i,a,n):o}))}function nu(e){var t,i=1/0,a=1/0,n=-1/0,r=-1/0,o=d(e);try{for(o.s();!(t=o.n()).done;){var s=t.value;i=Math.min(i,s.x),a=Math.min(a,s.y),n=Math.max(n,s.x),r=Math.max(r,s.y)}}catch(l){o.e(l)}finally{o.f()}return{minX:i,minY:a,maxX:n,maxY:r}}function ru(e,t){return t-e}Oa("FeatureIndex",iu,{omit:["rawTileData","sourceLayerCoder"]}),e.PerformanceMarkers=void 0,($c=e.PerformanceMarkers||(e.PerformanceMarkers={})).create="create",$c.load="load",$c.fullLoad="fullLoad";var ou=null,su=[],lu=1e3/30,cu={mark:function(e){performance.mark(e)},frame:function(e){var t=e;null!=ou&&su.push(t-ou),ou=t},clearMetrics:function(){for(var t in ou=null,su=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime"),e.PerformanceMarkers)performance.clearMarks(e.PerformanceMarkers[t])},getPerformanceMetrics:function(){performance.measure("loadTime",e.PerformanceMarkers.create,e.PerformanceMarkers.load),performance.measure("fullLoadTime",e.PerformanceMarkers.create,e.PerformanceMarkers.fullLoad);var t=performance.getEntriesByName("loadTime")[0].duration,i=performance.getEntriesByName("fullLoadTime")[0].duration,a=su.length,n=1/(su.reduce((function(e,t){return e+t}),0)/a/1e3),r=su.filter((function(e){return e>lu})).reduce((function(e,t){return e+(t-lu)/lu}),0);return{loadTime:t,fullLoadTime:i,fps:n,percentDroppedFrames:r/(a+r)*100}}};e.AJAXError=ee,e.ARRAY_TYPE=ho,e.Actor=function(){function e(t,i,a){p(this,e),this.target=t,this.parent=i,this.mapId=a,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},w(["receive","process"],this),this.invoker=new jc(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=E()?t:window}return f(e,[{key:"send",value:function(e,t,i,a){var n=this,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(this.callbacks[o]=i);var s=L(this.globalScope)?void 0:[];return this.target.postMessage({id:o,type:e,hasCallback:!!i,targetMapId:a,mustQueue:r,sourceMapId:this.mapId,data:Ea(t,s)},s),{cancel:function(){i&&delete n.callbacks[o],n.target.postMessage({id:o,type:"<cancel>",targetMapId:a,sourceMapId:n.mapId})}}}},{key:"receive",value:function(e){var t=e.data,i=t.id;if(i&&(!t.targetMapId||this.mapId===t.targetMapId))if("<cancel>"===t.type){delete this.tasks[i];var a=this.cancelCallbacks[i];delete this.cancelCallbacks[i],a&&a()}else E()||t.mustQueue?(this.tasks[i]=t,this.taskQueue.push(i),this.invoker.trigger()):this.processTask(i,t)}},{key:"process",value:function(){if(this.taskQueue.length){var e=this.taskQueue.shift(),t=this.tasks[e];delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),t&&this.processTask(e,t)}}},{key:"processTask",value:function(e,t){var i=this;if("<response>"===t.type){var a=this.callbacks[e];delete this.callbacks[e],a&&(t.error?a(Ia(t.error)):a(null,Ia(t.data)))}else{var n=!1,r=L(this.globalScope)?void 0:[],o=t.hasCallback?function(t,a){n=!0,delete i.cancelCallbacks[e],i.target.postMessage({id:e,type:"<response>",sourceMapId:i.mapId,error:t?Ea(t):null,data:Ea(a,r)},r)}:function(e){n=!0},s=null,l=Ia(t.data);if(this.parent[t.type])s=this.parent[t.type](t.sourceMapId,l,o);else if(this.parent.getWorkerSource){var c=t.type.split(".");s=this.parent.getWorkerSource(t.sourceMapId,c[0],l.source)[c[1]](l,o)}else o(new Error("Could not find function ".concat(t.type)));!n&&s&&s.cancel&&(this.cancelCallbacks[e]=s.cancel)}}},{key:"remove",value:function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}}]),e}(),e.AlphaImage=To,e.CanonicalTileID=qc,e.CollisionBoxArray=Un,e.CollisionCircleLayoutArray=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i)}(Dn),e.Color=Ue,e.DEMData=Qc,e.DataConstantProperty=cn,e.DictionaryCoder=eu,e.EXTENT=Vr,e.ErrorEvent=de,e.EvaluationParameters=$a,e.Event=he,e.Evented=fe,e.FeatureIndex=iu,e.FillBucket=fs,e.FillExtrusionBucket=zs,e.GeoJSONFeature=tu,e.ImageAtlas=Il,e.ImagePosition=El,e.LineBucket=Us,e.LineStripIndexArray=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i)}(Yn),e.LngLat=Fc,e.LngLatBounds=Bc,e.MercatorCoordinate=Xc,e.ONE_EM=24,e.OverscaledTileID=Kc,e.PerformanceUtils=cu,e.PosArray=er,e.Properties=pn,e.QuadTriangleArray=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i)}(Ln),e.RGBAImage=Mo,e.RasterBoundsArray=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i)}(kn),e.RequestPerformance=function(){function e(t){p(this,e),this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},performance.mark(this._marks.start)}return f(e,[{key:"finish",value:function(){performance.mark(this._marks.end);var e=performance.getEntriesByName(this._marks.measure);return 0===e.length&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),e=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),e}}]),e}(),e.ResourceType=$,e.SegmentVector=mr,e.SymbolBucket=Ac,e.Transitionable=an,e.TriangleIndexArray=dr,e.Uniform1f=Or,e.Uniform1i=function(e){m(i,e);var t=g(i);function i(e,a){var n;return p(this,i),(n=t.call(this,e,a)).current=0,n}return f(i,[{key:"set",value:function(e){this.current!==e&&(this.current=e,this.gl.uniform1i(this.location,e))}}]),i}(Ar),e.Uniform2f=function(e){m(i,e);var t=g(i);function i(e,a){var n;return p(this,i),(n=t.call(this,e,a)).current=[0,0],n}return f(i,[{key:"set",value:function(e){e[0]===this.current[0]&&e[1]===this.current[1]||(this.current=e,this.gl.uniform2f(this.location,e[0],e[1]))}}]),i}(Ar),e.Uniform3f=function(e){m(i,e);var t=g(i);function i(e,a){var n;return p(this,i),(n=t.call(this,e,a)).current=[0,0,0],n}return f(i,[{key:"set",value:function(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]||(this.current=e,this.gl.uniform3f(this.location,e[0],e[1],e[2]))}}]),i}(Ar),e.Uniform4f=Tr,e.UniformColor=Mr,e.UniformMatrix4f=function(e){m(i,e);var t=g(i);function i(e,a){var n;return p(this,i),(n=t.call(this,e,a)).current=Er,n}return f(i,[{key:"set",value:function(e){if(e[12]!==this.current[12]||e[0]!==this.current[0])return this.current=e,void this.gl.uniformMatrix4fv(this.location,!1,e);for(var t=1;t<16;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix4fv(this.location,!1,e);break}}}]),i}(Ar),e.UnwrappedTileID=Zc,e.ValidationError=me,e.ZoomHistory=Pa,e.add=function(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e},e.addDynamicAttributes=wc,e.asyncAll=function(e,t,i){if(!e.length)return i(null,[]);var a=e.length,n=new Array(e.length),r=null;e.forEach((function(e,o){t(e,(function(e,t){e&&(r=e),n[o]=t,0==--a&&i(r,n)}))}))},e.bezier=a,e.bindAll=w,e.cacheEntryPossiblyAdded=function(e){++q>H&&(e.getActor().send("enforceCacheSizeLimit",W),q=0)},e.clamp=y,e.clearTileCache=function(e){var t=caches.delete(Y);e&&t.catch(e).then((function(){return e()}))},e.clipLine=ec,e.clone=function(e){var t=new ho(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.clone$1=C,e.clone$2=function(e){var t=new ho(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},e.collisionCircleLayout=el,e.config=V,e.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.create=function(){var e=new ho(16);return ho!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},e.create$1=fo,e.createExpression=Ri,e.createFilter=Ki,e.createLayout=bn,e.createStyleLayer=function(e){return"custom"===e.type?new zc(e):new Lc[e.type](e)},e.cross=function(e,t,i){var a=t[0],n=t[1],r=t[2],o=i[0],s=i[1],l=i[2];return e[0]=n*l-r*s,e[1]=r*o-a*l,e[2]=a*s-n*o,e},e.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},e.dot$1=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},e.ease=n,e.emitValidationErrors=Sa,e.enforceCacheSizeLimit=function(e){U(),N&&N.then((function(t){t.keys().then((function(i){for(var a=0;a<i.length-e;a++)t.delete(i[a])}))}))},e.equals=function(e,t){var i=e[0],a=e[1],n=e[2],r=e[3],o=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],f=e[11],p=e[12],m=e[13],g=e[14],v=e[15],y=t[0],x=t[1],b=t[2],_=t[3],w=t[4],k=t[5],S=t[6],C=t[7],A=t[8],O=t[9],T=t[10],M=t[11],E=t[12],I=t[13],P=t[14],D=t[15];return Math.abs(i-y)<=uo*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(a-x)<=uo*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(n-b)<=uo*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(r-_)<=uo*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(o-w)<=uo*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(s-k)<=uo*Math.max(1,Math.abs(s),Math.abs(k))&&Math.abs(l-S)<=uo*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(c-C)<=uo*Math.max(1,Math.abs(c),Math.abs(C))&&Math.abs(u-A)<=uo*Math.max(1,Math.abs(u),Math.abs(A))&&Math.abs(h-O)<=uo*Math.max(1,Math.abs(h),Math.abs(O))&&Math.abs(d-T)<=uo*Math.max(1,Math.abs(d),Math.abs(T))&&Math.abs(f-M)<=uo*Math.max(1,Math.abs(f),Math.abs(M))&&Math.abs(p-E)<=uo*Math.max(1,Math.abs(p),Math.abs(E))&&Math.abs(m-I)<=uo*Math.max(1,Math.abs(m),Math.abs(I))&&Math.abs(g-P)<=uo*Math.max(1,Math.abs(g),Math.abs(P))&&Math.abs(v-D)<=uo*Math.max(1,Math.abs(v),Math.abs(D))},e.evaluateSizeForFeature=function(e,t,i){var a=t.uSize,n=t.uSizeT,r=i.lowerSize,o=i.upperSize;return"source"===e.kind?r/Ul:"composite"===e.kind?Lt(r/Ul,o/Ul,n):a},e.evaluateSizeForZoom=function(e,t){var i=0,a=0;if("constant"===e.kind)a=e.layoutSize;else if("source"!==e.kind){var n=e.interpolationType,r=e.minZoom,o=e.maxZoom,s=n?y(Kt.interpolationFactor(n,t,r,o),0,1):0;"camera"===e.kind?a=Lt(e.minSize,e.maxSize,s):i=s}return{uSizeT:i,uSize:a}},e.evaluateVariableOffset=fc,e.evented=Za,e.exported=R,e.exported$1=Z,e.extend=b,e.filterObject=S,e.fromRotation=function(e,t){var i=Math.sin(t),a=Math.cos(t);return e[0]=a,e[1]=i,e[2]=0,e[3]=-i,e[4]=a,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},e.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.getAnchorAlignment=Yl,e.getAnchorJustification=pc,e.getArrayBuffer=ne,e.getImage=function e(t,i){if(Z.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),se>=V.MAX_PARALLEL_IMAGE_REQUESTS){var a={requestParameters:t,callback:i,cancelled:!1,cancel:function(){this.cancelled=!0}};return oe.push(a),a}se++;var n=!1,r=function(){if(!n)for(n=!0,se--;oe.length&&se<V.MAX_PARALLEL_IMAGE_REQUESTS;){var t=oe.shift(),i=t.requestParameters,a=t.callback;t.cancelled||(t.cancel=e(i,a).cancel)}},o=ne(t,(function(e,t,a,n){r(),e?i(e):t&&function(e,t){"function"==typeof createImageBitmap?function(e,t){var i=new Blob([new Uint8Array(e)],{type:"image/png"});createImageBitmap(i).then((function(e){t(null,e)})).catch((function(e){t(new Error("Could not load image because of ".concat(e.message,". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")))}))}(e,t):function(e,t){var i=new Image;i.onload=function(){t(null,i),URL.revokeObjectURL(i.src),i.onload=null,window.requestAnimationFrame((function(){i.src=le}))},i.onerror=function(){return t(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var a=new Blob([new Uint8Array(e)],{type:"image/png"});i.src=e.byteLength?URL.createObjectURL(a):le}(e,t)}(t,(function(e,t){null!=e?i(e):null!=t&&i(null,t,{cacheControl:a,expires:n})}))}));return{cancel:function(){o.cancel(),r()}}},e.getJSON=function(e,t){return ae(b(e,{type:"json"}),t)},e.getOverlapMode=Ic,e.getRTLTextPluginStatus=Ka,e.getReferrer=te,e.getVideo=function(e,t){var i=window.document.createElement("video");i.muted=!0,i.onloadstart=function(){t(null,i)};for(var a=0;a<e.length;a++){var n=window.document.createElement("source");re(e[a])||(i.crossOrigin="Anonymous"),n.src=e[a],i.appendChild(n)}return{cancel:function(){}}},e.identity=po,e.invert=function(e,t){var i=t[0],a=t[1],n=t[2],r=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8],h=t[9],d=t[10],f=t[11],p=t[12],m=t[13],g=t[14],v=t[15],y=i*s-a*o,x=i*l-n*o,b=i*c-r*o,_=a*l-n*s,w=a*c-r*s,k=n*c-r*l,S=u*m-h*p,C=u*g-d*p,A=u*v-f*p,O=h*g-d*m,T=h*v-f*m,M=d*v-f*g,E=y*M-x*T+b*O+_*A-w*C+k*S;return E?(e[0]=(s*M-l*T+c*O)*(E=1/E),e[1]=(n*T-a*M-r*O)*E,e[2]=(m*k-g*w+v*_)*E,e[3]=(d*w-h*k-f*_)*E,e[4]=(l*A-o*M-c*C)*E,e[5]=(i*M-n*A+r*C)*E,e[6]=(g*b-p*k-v*x)*E,e[7]=(u*k-d*b+f*x)*E,e[8]=(o*T-s*A+c*S)*E,e[9]=(a*A-i*T-r*S)*E,e[10]=(p*w-m*b+v*y)*E,e[11]=(h*b-u*w-f*y)*E,e[12]=(s*C-o*O-l*S)*E,e[13]=(i*O-a*C+n*S)*E,e[14]=(m*x-p*_-g*y)*E,e[15]=(u*_-h*x+d*y)*E,e):null},e.isImageBitmap=j,e.isSafari=L,e.isWorker=E,e.keysDifference=function(e,t){var i=[];for(var a in e)a in t||i.push(a);return i},e.lazyLoadRTLTextPlugin=function(){Qa.isLoading()||Qa.isLoaded()||"deferred"!==Ka()||Ja()},e.makeRequest=ae,e.mapObject=k,e.mercatorXfromLng=Yc,e.mercatorYfromLat=Wc,e.mercatorZfromAltitude=Hc,e.mul=vo,e.mul$1=function(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e[3]=t[3]*i[3],e},e.multiply=mo,e.nextPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},e.normalize=function(e,t){var i=t[0],a=t[1],n=t[2],r=i*i+a*a+n*n;return r>0&&(r=1/Math.sqrt(r)),e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e},e.number=Lt,e.ortho=function(e,t,i,a,n,r,o){var s=1/(t-i),l=1/(a-n),c=1/(r-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+i)*s,e[13]=(n+a)*l,e[14]=(o+r)*c,e[15]=1,e},e.parseCacheControl=I,e.parseGlyphPbf=function(e){return new al(e).readFields(Al,[])},e.pbf=al,e.performSymbolLayout=function(t){t.bucket.createArrays(),t.bucket.tilePixelRatio=Vr/(512*t.bucket.overscaling),t.bucket.compareText={},t.bucket.iconsNeedLinear=!1;var i=t.bucket.layers[0].layout,a=t.bucket.layers[0]._unevaluatedLayout._values,n={layoutIconSize:a["icon-size"].possiblyEvaluate(new $a(t.bucket.zoom+1),t.canonical),layoutTextSize:a["text-size"].possiblyEvaluate(new $a(t.bucket.zoom+1),t.canonical),textMaxSize:a["text-size"].possiblyEvaluate(new $a(18))};if("composite"===t.bucket.textSizeData.kind){var r=t.bucket.textSizeData,o=r.minZoom,s=r.maxZoom;n.compositeTextSizes=[a["text-size"].possiblyEvaluate(new $a(o),t.canonical),a["text-size"].possiblyEvaluate(new $a(s),t.canonical)]}if("composite"===t.bucket.iconSizeData.kind){var l=t.bucket.iconSizeData,c=l.minZoom,u=l.maxZoom;n.compositeIconSizes=[a["icon-size"].possiblyEvaluate(new $a(c),t.canonical),a["icon-size"].possiblyEvaluate(new $a(u),t.canonical)]}var f,p=24*i.get("text-line-height"),m="viewport"!==i.get("text-rotation-alignment")&&"point"!==i.get("symbol-placement"),g=i.get("text-keep-upright"),v=i.get("text-size"),y=d(t.bucket.features);try{var x=function(){var a=f.value,r=i.get("text-font").evaluate(a,{},t.canonical).join(","),o=v.evaluate(a,{},t.canonical),s=n.layoutTextSize.evaluate(a,{},t.canonical),l=n.layoutIconSize.evaluate(a,{},t.canonical),c={horizontal:{},vertical:void 0},u=a.text,y=void 0,x=[0,0];if(u){var b=u.toString(),_=24*i.get("text-letter-spacing").evaluate(a,{},t.canonical),w=function(e){var t,i=d(e);try{for(i.s();!(t=i.n()).done;)if(!La(t.value.charCodeAt(0)))return!1}catch(a){i.e(a)}finally{i.f()}return!0}(b)?_:0,k=i.get("text-anchor").evaluate(a,{},t.canonical),S=i.get("text-variable-anchor");if(!S){var C=i.get("text-radial-offset").evaluate(a,{},t.canonical);x=C?fc(k,[24*C,dc]):i.get("text-offset").evaluate(a,{},t.canonical).map((function(e){return 24*e}))}var A=m?"center":i.get("text-justify").evaluate(a,{},t.canonical),T=i.get("symbol-placement"),M="point"===T?24*i.get("text-max-width").evaluate(a,{},t.canonical):0,E=function(){t.bucket.allowVerticalPlacement&&za(b)&&(c.vertical=zl(u,t.glyphMap,t.glyphPositions,t.imagePositions,r,M,p,k,"left",w,x,e.WritingMode.vertical,!0,T,s,o))};if(!m&&S){for(var I="auto"===A?S.map((function(e){return pc(e)})):[A],P=!1,D=0;D<I.length;D++){var z=I[D];if(!c.horizontal[z])if(P)c.horizontal[z]=c.horizontal[0];else{var L=zl(u,t.glyphMap,t.glyphPositions,t.imagePositions,r,M,p,"center",z,w,x,e.WritingMode.horizontal,!1,T,s,o);L&&(c.horizontal[z]=L,P=1===L.positionedLines.length)}}E()}else{"auto"===A&&(A=pc(k));var j=zl(u,t.glyphMap,t.glyphPositions,t.imagePositions,r,M,p,k,A,w,x,e.WritingMode.horizontal,!1,T,s,o);j&&(c.horizontal[A]=j),E(),za(b)&&m&&g&&(c.vertical=zl(u,t.glyphMap,t.glyphPositions,t.imagePositions,r,M,p,k,A,w,x,e.WritingMode.vertical,!1,T,s,o))}}var R=!1;if(a.icon&&a.icon.name){var F=t.imageMap[a.icon.name];F&&(y=function(e,t,i){var a=Yl(i),n=a.horizontalAlign,r=a.verticalAlign,o=t[0]-e.displaySize[0]*n,s=t[1]-e.displaySize[1]*r;return{image:e,top:s,bottom:s+e.displaySize[1],left:o,right:o+e.displaySize[0]}}(t.imagePositions[a.icon.name],i.get("icon-offset").evaluate(a,{},t.canonical),i.get("icon-anchor").evaluate(a,{},t.canonical)),R=!!F.sdf,void 0===t.bucket.sdfIcons?t.bucket.sdfIcons=R:t.bucket.sdfIcons!==R&&O("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(F.pixelRatio!==t.bucket.pixelRatio||0!==i.get("icon-rotate").constantOr(1))&&(t.bucket.iconsNeedLinear=!0))}var B=vc(c.horizontal)||c.vertical;t.bucket.iconsInText=!!B&&B.iconsInText,(B||y)&&function(t,i,a,n,r,o,s,l,c,u,f){var p=o.textMaxSize.evaluate(i,{});void 0===p&&(p=s);var m,g=t.layers[0].layout,v=g.get("icon-offset").evaluate(i,{},f),y=vc(a.horizontal),x=s/24,b=t.tilePixelRatio*x,_=t.tilePixelRatio*p/24,w=t.tilePixelRatio*l,k=t.tilePixelRatio*g.get("symbol-spacing"),S=g.get("text-padding")*t.tilePixelRatio,C=function(e,t,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,n=e.get("icon-padding").evaluate(t,{},i),r=n&&n.values;return[r[0]*a,r[1]*a,r[2]*a,r[3]*a]}(g,i,f,t.tilePixelRatio),A=g.get("text-max-angle")/180*Math.PI,T="viewport"!==g.get("text-rotation-alignment")&&"point"!==g.get("symbol-placement"),M="map"===g.get("icon-rotation-alignment")&&"point"!==g.get("symbol-placement"),E=g.get("symbol-placement"),I=k/2,P=g.get("icon-text-fit");n&&"none"!==P&&(t.allowVerticalPlacement&&a.vertical&&(m=Hl(n,a.vertical,P,g.get("icon-text-fit-padding"),v,x)),y&&(n=Hl(n,y,P,g.get("icon-text-fit-padding"),v,x)));var D=function(l,d){d.x<0||d.x>=Vr||d.y<0||d.y>=Vr||function(t,i,a,n,r,o,s,l,c,u,d,f,p,m,g,v,y,x,b,_,w,k,S,C,A){var T,M,E,I,P,D,z=t.addToLineVertexArray(i,a),L=0,j=0,R=0,F=0,B=-1,N=-1,V={},Y=yr.exports(""),W=0,H=0;if(void 0===l._unevaluatedLayout.getValue("text-radial-offset")?(T=l.layout.get("text-offset").evaluate(w,{},C).map((function(e){return 24*e})),W=(M=h(T,2))[0],H=M[1]):(W=24*l.layout.get("text-radial-offset").evaluate(w,{},C),H=dc),t.allowVerticalPlacement&&n.vertical){var U=l.layout.get("text-rotate").evaluate(w,{},C)+90;P=new oc(c,i,u,d,f,n.vertical,p,m,g,U),s&&(D=new oc(c,i,u,d,f,s,y,x,g,U))}if(r){var X=l.layout.get("icon-rotate").evaluate(w,{}),G="none"!==l.layout.get("icon-text-fit"),q=tc(r,X,S,G),Z=s?tc(s,X,S,G):void 0;I=new oc(c,i,u,d,f,r,y,x,!1,X),L=4*q.length;var K=t.iconSizeData,J=null;"source"===K.kind?(J=[Ul*l.layout.get("icon-size").evaluate(w,{})])[0]>mc&&O("".concat(t.layerIds[0],': Value for "icon-size" is >= 255. Reduce your "icon-size".')):"composite"===K.kind&&((J=[Ul*k.compositeIconSizes[0].evaluate(w,{},C),Ul*k.compositeIconSizes[1].evaluate(w,{},C)])[0]>mc||J[1]>mc)&&O("".concat(t.layerIds[0],': Value for "icon-size" is >= 255. Reduce your "icon-size".')),t.addSymbols(t.icon,q,J,_,b,w,e.WritingMode.none,i,z.lineStartIndex,z.lineLength,-1,C),B=t.icon.placedSymbolArray.length-1,Z&&(j=4*Z.length,t.addSymbols(t.icon,Z,J,_,b,w,e.WritingMode.vertical,i,z.lineStartIndex,z.lineLength,-1,C),N=t.icon.placedSymbolArray.length-1)}for(var Q=Object.keys(n.horizontal),$=0,ee=Q;$<ee.length;$++){var te=ee[$],ie=n.horizontal[te];if(!E){Y=yr.exports(ie.text);var ae=l.layout.get("text-rotate").evaluate(w,{},C);E=new oc(c,i,u,d,f,ie,p,m,g,ae)}var ne=1===ie.positionedLines.length;if(R+=gc(t,i,ie,o,l,g,w,v,z,n.vertical?e.WritingMode.horizontal:e.WritingMode.horizontalOnly,ne?Q:[te],V,B,k,C),ne)break}n.vertical&&(F+=gc(t,i,n.vertical,o,l,g,w,v,z,e.WritingMode.vertical,["vertical"],V,N,k,C));var re=E?E.boxStartIndex:t.collisionBoxArray.length,oe=E?E.boxEndIndex:t.collisionBoxArray.length,se=P?P.boxStartIndex:t.collisionBoxArray.length,le=P?P.boxEndIndex:t.collisionBoxArray.length,ce=I?I.boxStartIndex:t.collisionBoxArray.length,ue=I?I.boxEndIndex:t.collisionBoxArray.length,he=D?D.boxStartIndex:t.collisionBoxArray.length,de=D?D.boxEndIndex:t.collisionBoxArray.length,fe=-1,pe=function(e,t){return e&&e.circleDiameter?Math.max(e.circleDiameter,t):t};fe=pe(E,fe),fe=pe(P,fe),fe=pe(I,fe);var me=(fe=pe(D,fe))>-1?1:0;me&&(fe*=A/24),t.glyphOffsetArray.length>=Ac.MAX_GLYPHS&&O("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==w.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,w.sortKey),t.symbolInstances.emplaceBack(i.x,i.y,V.right>=0?V.right:-1,V.center>=0?V.center:-1,V.left>=0?V.left:-1,V.vertical||-1,B,N,Y,re,oe,se,le,ce,ue,he,de,u,R,F,L,j,me,0,p,W,H,fe)}(t,d,l,a,n,r,m,t.layers[0],t.collisionBoxArray,i.index,i.sourceLayerIndex,t.index,b,[S,S,S,S],T,c,w,C,M,v,i,o,u,f,s)};if("line"===E){var z,L=d(ec(i.geometry,0,0,Vr,Vr));try{for(L.s();!(z=L.n()).done;){var j,R=z.value,F=$l(R,k,A,a.vertical||y,n,24,_,t.overscaling,Vr),B=d(F);try{for(B.s();!(j=B.n()).done;){var N=j.value;y&&yc(t,y.text,I,N)||D(R,N)}}catch(ne){B.e(ne)}finally{B.f()}}}catch(ne){L.e(ne)}finally{L.f()}}else if("line-center"===E){var V,Y=d(i.geometry);try{for(Y.s();!(V=Y.n()).done;){var W=V.value;if(W.length>1){var H=Ql(W,A,a.vertical||y,n,24,_);H&&D(W,H)}}}catch(ne){Y.e(ne)}finally{Y.f()}}else if("Polygon"===i.type){var U,X=d(cs(i.geometry,0));try{for(X.s();!(U=X.n()).done;){var G=U.value,q=cc(G,16);D(G[0],new Gl(q.x,q.y,0))}}catch(ne){X.e(ne)}finally{X.f()}}else if("LineString"===i.type){var Z,K=d(i.geometry);try{for(K.s();!(Z=K.n()).done;){var J=Z.value;D(J,new Gl(J[0].x,J[0].y,0))}}catch(ne){K.e(ne)}finally{K.f()}}else if("Point"===i.type){var Q,$=d(i.geometry);try{for($.s();!(Q=$.n()).done;){var ee,te=Q.value,ie=d(te);try{for(ie.s();!(ee=ie.n()).done;){var ae=ee.value;D([ae],new Gl(ae.x,ae.y,0))}}catch(ne){ie.e(ne)}finally{ie.f()}}}catch(ne){$.e(ne)}finally{$.f()}}}(t.bucket,a,c,y,t.imageMap,n,s,l,x,R,t.canonical)};for(y.s();!(f=y.n()).done;)x()}catch(b){y.e(b)}finally{y.f()}t.showCollisionBoxes&&t.bucket.generateCollisionDebugBuffers()},e.perspective=function(e,t,i,a,n){var r,o=1/Math.tan(t/2);return e[0]=o/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=n&&n!==1/0?(e[10]=(n+a)*(r=1/(a-n)),e[14]=2*n*a*r):(e[10]=-1,e[14]=-2*a),e},e.pick=function(e,t){for(var i={},a=0;a<t.length;a++){var n=t[a];n in e&&(i[n]=e[n])}return i},e.plugin=Qa,e.pointGeometry=F,e.polygonIntersectsPolygon=qr,e.potpack=Ml,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.register=Oa,e.registerForPluginStateChange=function(e){return e({pluginStatus:Ua,pluginURL:Xa}),Za.on("pluginStateChange",e),e},e.renderColorRamp=Eo,e.rotateX=function(e,t,i){var a=Math.sin(i),n=Math.cos(i),r=t[4],o=t[5],s=t[6],l=t[7],c=t[8],u=t[9],h=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=r*n+c*a,e[5]=o*n+u*a,e[6]=s*n+h*a,e[7]=l*n+d*a,e[8]=c*n-r*a,e[9]=u*n-o*a,e[10]=h*n-s*a,e[11]=d*n-l*a,e},e.rotateZ=function(e,t,i){var a=Math.sin(i),n=Math.cos(i),r=t[0],o=t[1],s=t[2],l=t[3],c=t[4],u=t[5],h=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=r*n+c*a,e[1]=o*n+u*a,e[2]=s*n+h*a,e[3]=l*n+d*a,e[4]=c*n-r*a,e[5]=u*n-o*a,e[6]=h*n-s*a,e[7]=d*n-l*a,e},e.scale=function(e,t,i){var a=i[0],n=i[1],r=i[2];return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.scale$1=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e},e.setCacheLimits=function(e,t){W=e,H=t},e.setRTLTextPlugin=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Ua===Va||Ua===Ya||Ua===Wa)throw new Error("setRTLTextPlugin cannot be called multiple times.");Xa=R.resolveURL(e),Ua=Va,Ha=t,qa(),i||Ja()},e.spec=pe,e.sphericalToCartesian=function(e){var t=h(e,3),i=t[0],a=t[1],n=t[2];return a+=90,a*=Math.PI/180,n*=Math.PI/180,{x:i*Math.cos(a)*Math.sin(n),y:i*Math.sin(a)*Math.sin(n),z:i*Math.cos(n)}},e.sqrLen=function(e){var t=e[0],i=e[1];return t*t+i*i},e.sub=function(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e},e.toEvaluationFeature=Ur,e.transformMat3=function(e,t,i){var a=t[0],n=t[1],r=t[2];return e[0]=a*i[0]+n*i[3]+r*i[6],e[1]=a*i[1]+n*i[4]+r*i[7],e[2]=a*i[2]+n*i[5]+r*i[8],e},e.transformMat4=bo,e.transformMat4$1=function(e,t,i){var a=t[0],n=t[1];return e[0]=i[0]*a+i[4]*n+i[12],e[1]=i[1]*a+i[5]*n+i[13],e},e.translate=function(e,t,i){var a,n,r,o,s,l,c,u,h,d,f,p,m=i[0],g=i[1],v=i[2];return t===e?(e[12]=t[0]*m+t[4]*g+t[8]*v+t[12],e[13]=t[1]*m+t[5]*g+t[9]*v+t[13],e[14]=t[2]*m+t[6]*g+t[10]*v+t[14],e[15]=t[3]*m+t[7]*g+t[11]*v+t[15]):(n=t[1],r=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=t[9],f=t[10],p=t[11],e[0]=a=t[0],e[1]=n,e[2]=r,e[3]=o,e[4]=s,e[5]=l,e[6]=c,e[7]=u,e[8]=h,e[9]=d,e[10]=f,e[11]=p,e[12]=a*m+s*g+h*v+t[12],e[13]=n*m+l*g+d*v+t[13],e[14]=r*m+c*g+f*v+t[14],e[15]=o*m+u*g+p*v+t[15]),e},e.triggerPluginCompletionEvent=Ga,e.unicodeBlockLookup=Da,e.uniqueId=function(){return _++},e.validateCustomStyleLayer=function(e){var t=[],i=e.id;return void 0===i&&t.push({message:"layers.".concat(i,': missing required property "id"')}),void 0===e.render&&t.push({message:"layers.".concat(i,': missing required method "render"')}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:"layers.".concat(i,': property "renderingMode" must be either "2d" or "3d"')}),t},e.validateLight=_a,e.validateStyle=ba,e.vectorTile=xs,e.warnOnce=O,e.wrap=x})),y(0,(function(e){function t(e){var i=typeof e;if("number"===i||"boolean"===i||"string"===i||null==e)return JSON.stringify(e);if(Array.isArray(e)){var a,n="[",r=d(e);try{for(r.s();!(a=r.n()).done;){var o=a.value;n+="".concat(t(o),",")}}catch(u){r.e(u)}finally{r.f()}return"".concat(n,"]")}for(var s=Object.keys(e).sort(),l="{",c=0;c<s.length;c++)l+="".concat(JSON.stringify(s[c]),":").concat(t(e[s[c]]),",");return"".concat(l,"}")}function i(i){var a,n="",r=d(e.refProperties);try{for(r.s();!(a=r.n()).done;){var o=a.value;n+="/".concat(t(i[o]))}}catch(s){r.e(s)}finally{r.f()}return n}var a=function(){function t(e){p(this,t),this.keyCache={},e&&this.replace(e)}return f(t,[{key:"replace",value:function(e){this._layerConfigs={},this._layers={},this.update(e,[])}},{key:"update",value:function(t,a){var n,r=this,o=d(t);try{for(o.s();!(n=o.n()).done;){var s=n.value;this._layerConfigs[s.id]=s;var l=this._layers[s.id]=e.createStyleLayer(s);l._featureFilter=e.createFilter(l.filter),this.keyCache[s.id]&&delete this.keyCache[s.id]}}catch(w){o.e(w)}finally{o.f()}var c,u=d(a);try{for(u.s();!(c=u.n()).done;){var h=c.value;delete this.keyCache[h],delete this._layerConfigs[h],delete this._layers[h]}}catch(w){u.e(w)}finally{u.f()}this.familiesBySource={};var f,p=function(e,t){for(var a={},n=0;n<e.length;n++){var r=t&&t[e[n].id]||i(e[n]);t&&(t[e[n].id]=r);var o=a[r];o||(o=a[r]=[]),o.push(e[n])}var s=[];for(var l in a)s.push(a[l]);return s}(Object.values(this._layerConfigs),this.keyCache),m=d(p);try{for(m.s();!(f=m.n()).done;){var g=f.value.map((function(e){return r._layers[e.id]})),v=g[0];if("none"!==v.visibility){var y=v.source||"",x=this.familiesBySource[y];x||(x=this.familiesBySource[y]={});var b=v.sourceLayer||"_geojsonTileLayer",_=x[b];_||(_=x[b]=[]),_.push(g)}}}catch(w){m.e(w)}finally{m.f()}}}]),t}(),n=f((function t(i){p(this,t);var a={},n=[];for(var r in i){var o=i[r],s=a[r]={};for(var l in o){var c=o[+l];if(c&&0!==c.bitmap.width&&0!==c.bitmap.height){var u={x:0,y:0,w:c.bitmap.width+2,h:c.bitmap.height+2};n.push(u),s[l]={rect:u,metrics:c.metrics}}}}var h=e.potpack(n),d=h.w,f=h.h,m=new e.AlphaImage({width:d||1,height:f||1});for(var g in i){var v=i[g];for(var y in v){var x=v[+y];if(x&&0!==x.bitmap.width&&0!==x.bitmap.height){var b=a[g][y].rect;e.AlphaImage.copy(x.bitmap,m,{x:0,y:0},{x:b.x+1,y:b.y+1},x.bitmap)}}}this.image=m,this.positions=a}));e.register("GlyphAtlas",n);var r=function(){function t(i){p(this,t),this.tileID=new e.OverscaledTileID(i.tileID.overscaledZ,i.tileID.wrap,i.tileID.canonical.z,i.tileID.canonical.x,i.tileID.canonical.y),this.uid=i.uid,this.zoom=i.zoom,this.pixelRatio=i.pixelRatio,this.tileSize=i.tileSize,this.source=i.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=i.showCollisionBoxes,this.collectResourceTiming=!!i.collectResourceTiming,this.returnDependencies=!!i.returnDependencies,this.promoteId=i.promoteId}return f(t,[{key:"parse",value:function(t,i,a,r,o){var s=this;this.status="parsing",this.data=t,this.collisionBoxArray=new e.CollisionBoxArray;var c=new e.DictionaryCoder(Object.keys(t.layers).sort()),u=new e.FeatureIndex(this.tileID,this.promoteId);u.bucketLayerIDs=[];var h,f,p,m,g={},v={featureIndex:u,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:a},y=i.familiesBySource[this.source];for(var x in y){var b=t.layers[x];if(b){1===b.version&&e.warnOnce('Vector tile source "'.concat(this.source,'" layer "').concat(x,'" does not use vector tile spec v2 and therefore may have some rendering errors.'));for(var _=c.encode(x),w=[],k=0;k<b.length;k++){var S=b.feature(k),C=u.getId(S,x);w.push({feature:S,id:C,index:k,sourceLayerIndex:_})}var A,O=d(y[x]);try{for(O.s();!(A=O.n()).done;){var T=A.value,M=T[0];M.source!==this.source&&e.warnOnce("layer.source = ".concat(M.source," does not equal this.source = ").concat(this.source)),M.minzoom&&this.zoom<Math.floor(M.minzoom)||M.maxzoom&&this.zoom>=M.maxzoom||"none"!==M.visibility&&(l(T,this.zoom,a),(g[M.id]=M.createBucket({index:u.bucketLayerIDs.length,layers:T,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:_,sourceID:this.source})).populate(w,v,this.tileID.canonical),u.bucketLayerIDs.push(T.map((function(e){return e.id}))))}}catch(z){O.e(z)}finally{O.f()}}}var E=e.mapObject(v.glyphDependencies,(function(e){return Object.keys(e).map(Number)}));Object.keys(E).length?r.send("getGlyphs",{uid:this.uid,stacks:E},(function(e,t){h||(h=e,f=t,D.call(s))})):f={};var I=Object.keys(v.iconDependencies);I.length?r.send("getImages",{icons:I,source:this.source,tileID:this.tileID,type:"icons"},(function(e,t){h||(h=e,p=t,D.call(s))})):p={};var P=Object.keys(v.patternDependencies);function D(){if(h)return o(h);if(f&&p&&m){var t=new n(f),i=new e.ImageAtlas(p,m);for(var r in g){var s=g[r];s instanceof e.SymbolBucket?(l(s.layers,this.zoom,a),e.performSymbolLayout({bucket:s,glyphMap:f,glyphPositions:t.positions,imageMap:p,imagePositions:i.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):s.hasPattern&&(s instanceof e.LineBucket||s instanceof e.FillBucket||s instanceof e.FillExtrusionBucket)&&(l(s.layers,this.zoom,a),s.addFeatures(v,this.tileID.canonical,i.patternPositions))}this.status="done",o(null,{buckets:Object.values(g).filter((function(e){return!e.isEmpty()})),featureIndex:u,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:t.image,imageAtlas:i,glyphMap:this.returnDependencies?f:null,iconMap:this.returnDependencies?p:null,glyphPositions:this.returnDependencies?t.positions:null})}}P.length?r.send("getImages",{icons:P,source:this.source,tileID:this.tileID,type:"patterns"},(function(e,t){h||(h=e,m=t,D.call(s))})):m={},D.call(this)}}]),t}();function l(t,i,a){var n,r=new e.EvaluationParameters(i),o=d(t);try{for(o.s();!(n=o.n()).done;)n.value.recalculate(r,a)}catch(s){o.e(s)}finally{o.f()}}function c(t,i){var a=e.getArrayBuffer(t.request,(function(t,a,n,r){t?i(t):a&&i(null,{vectorTile:new e.vectorTile.VectorTile(new e.pbf(a)),rawData:a,cacheControl:n,expires:r})}));return function(){a.cancel(),i()}}var u=function(){function t(e,i,a,n){p(this,t),this.actor=e,this.layerIndex=i,this.availableImages=a,this.loadVectorData=n||c,this.loading={},this.loaded={}}return f(t,[{key:"loadTile",value:function(t,i){var a=this,n=t.uid;this.loading||(this.loading={});var o=!!(t&&t.request&&t.request.collectResourceTiming)&&new e.RequestPerformance(t.request),s=this.loading[n]=new r(t);s.abort=this.loadVectorData(t,(function(t,r){if(delete a.loading[n],t||!r)return s.status="done",a.loaded[n]=s,i(t);var l=r.rawData,c={};r.expires&&(c.expires=r.expires),r.cacheControl&&(c.cacheControl=r.cacheControl);var u={};if(o){var h=o.finish();h&&(u.resourceTiming=JSON.parse(JSON.stringify(h)))}s.vectorTile=r.vectorTile,s.parse(r.vectorTile,a.layerIndex,a.availableImages,a.actor,(function(t,a){if(t||!a)return i(t);i(null,e.extend({rawTileData:l.slice(0)},a,c,u))})),a.loaded=a.loaded||{},a.loaded[n]=s}))}},{key:"reloadTile",value:function(e,t){var i=this,a=this.loaded,n=e.uid,r=this;if(a&&a[n]){var o=a[n];o.showCollisionBoxes=e.showCollisionBoxes;var s=function(e,a){var n=o.reloadCallback;n&&(delete o.reloadCallback,o.parse(o.vectorTile,r.layerIndex,i.availableImages,r.actor,n)),t(e,a)};"parsing"===o.status?o.reloadCallback=s:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,s):s())}}},{key:"abortTile",value:function(e,t){var i=this.loading,a=e.uid;i&&i[a]&&i[a].abort&&(i[a].abort(),delete i[a]),t()}},{key:"removeTile",value:function(e,t){var i=this.loaded,a=e.uid;i&&i[a]&&delete i[a],t()}}]),t}(),v=function(){function t(){p(this,t),this.loaded={}}return f(t,[{key:"loadTile",value:function(t,i){var a=t.uid,n=t.encoding,r=t.rawImageData,o=e.isImageBitmap(r)?this.getImageData(r):r,s=new e.DEMData(a,o,n);this.loaded=this.loaded||{},this.loaded[a]=s,i(null,s)}},{key:"getImageData",value:function(t){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(t.width,t.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=t.width,this.offscreenCanvas.height=t.height,this.offscreenCanvasContext.drawImage(t,0,0,t.width,t.height);var i=this.offscreenCanvasContext.getImageData(-1,-1,t.width+2,t.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new e.RGBAImage({width:i.width,height:i.height},i.data)}},{key:"removeTile",value:function(e){var t=this.loaded,i=e.uid;t&&t[i]&&delete t[i]}}]),t}();function y(e,t){if(0!==e.length){x(e[0],t);for(var i=1;i<e.length;i++)x(e[i],!t)}}function x(e,t){for(var i=0,a=0,n=0,r=e.length,o=r-1;n<r;o=n++){var s=(e[n][0]-e[o][0])*(e[o][1]+e[n][1]),l=i+s;a+=Math.abs(i)>=Math.abs(s)?i-l+s:s-l+i,i=l}i+a>=0!=!!t&&e.reverse()}var b=e.vectorTile.VectorTileFeature.prototype.toGeoJSON,_=function(){function t(i){p(this,t),this._feature=i,this.extent=e.EXTENT,this.type=i.type,this.properties=i.tags,"id"in i&&!isNaN(i.id)&&(this.id=parseInt(i.id,10))}return f(t,[{key:"loadGeometry",value:function(){if(1===this._feature.type){var t,i=[],a=d(this._feature.geometry);try{for(a.s();!(t=a.n()).done;){var n=t.value;i.push([new e.pointGeometry(n[0],n[1])])}}catch(p){a.e(p)}finally{a.f()}return i}var r,o=[],s=d(this._feature.geometry);try{for(s.s();!(r=s.n()).done;){var l,c=r.value,u=[],h=d(c);try{for(h.s();!(l=h.n()).done;){var f=l.value;u.push(new e.pointGeometry(f[0],f[1]))}}catch(p){h.e(p)}finally{h.f()}o.push(u)}}catch(p){s.e(p)}finally{s.f()}return o}},{key:"toGeoJSON",value:function(e,t,i){return b.call(this,e,t,i)}}]),t}(),w=function(){function t(i){p(this,t),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=i.length,this._features=i}return f(t,[{key:"feature",value:function(e){return new _(this._features[e])}}]),t}(),k={exports:{}},S=e.pointGeometry,C=e.vectorTile.VectorTileFeature,A=O;function O(e,t){this.options=t||{},this.features=e,this.length=e.length}function T(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}O.prototype.feature=function(e){return new T(this.features[e],this.options.extent)},T.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var t=0;t<e.length;t++){for(var i=e[t],a=[],n=0;n<i.length;n++)a.push(new S(i[n][0],i[n][1]));this.geometry.push(a)}return this.geometry},T.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,i=-1/0,a=1/0,n=-1/0,r=0;r<e.length;r++)for(var o=e[r],s=0;s<o.length;s++){var l=o[s];t=Math.min(t,l.x),i=Math.max(i,l.x),a=Math.min(a,l.y),n=Math.max(n,l.y)}return[t,a,i,n]},T.prototype.toGeoJSON=C.prototype.toGeoJSON;var M=e.pbf,E=A;function I(e){var t=new M;return function(e,t){for(var i in e.layers)t.writeMessage(3,P,e.layers[i])}(e,t),t.finish()}function P(e,t){var i;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var a={keys:[],values:[],keycache:{},valuecache:{}};for(i=0;i<e.length;i++)a.feature=e.feature(i),t.writeMessage(2,D,a);var n=a.keys;for(i=0;i<n.length;i++)t.writeStringField(3,n[i]);var r=a.values;for(i=0;i<r.length;i++)t.writeMessage(4,F,r[i])}function D(e,t){var i=e.feature;void 0!==i.id&&t.writeVarintField(1,i.id),t.writeMessage(2,z,e),t.writeVarintField(3,i.type),t.writeMessage(4,R,i)}function z(e,t){var i=e.feature,a=e.keys,n=e.values,r=e.keycache,o=e.valuecache;for(var s in i.properties){var l=i.properties[s],c=r[s];if(null!==l){void 0===c&&(a.push(s),r[s]=c=a.length-1),t.writeVarint(c);var u=typeof l;"string"!==u&&"boolean"!==u&&"number"!==u&&(l=JSON.stringify(l));var h=u+":"+l,d=o[h];void 0===d&&(n.push(l),o[h]=d=n.length-1),t.writeVarint(d)}}}function L(e,t){return(t<<3)+(7&e)}function j(e){return e<<1^e>>31}function R(e,t){for(var i=e.loadGeometry(),a=e.type,n=0,r=0,o=i.length,s=0;s<o;s++){var l=i[s],c=1;1===a&&(c=l.length),t.writeVarint(L(1,c));for(var u=3===a?l.length-1:l.length,h=0;h<u;h++){1===h&&1!==a&&t.writeVarint(L(2,u-1));var d=l[h].x-n,f=l[h].y-r;t.writeVarint(j(d)),t.writeVarint(j(f)),n+=d,r+=f}3===a&&t.writeVarint(L(7,1))}}function F(e,t){var i=typeof e;"string"===i?t.writeStringField(1,e):"boolean"===i?t.writeBooleanField(7,e):"number"===i&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}function B(e,t,i,a,n,r){if(!(n-a<=i)){var o=a+n>>1;(function e(t,i,a,n,r,o){for(;r>n;){if(r-n>600){var s=r-n+1,l=a-n+1,c=Math.log(s),u=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*u*(s-u)/s)*(l-s/2<0?-1:1);e(t,i,a,Math.max(n,Math.floor(a-l*u/s+h)),Math.min(r,Math.floor(a+(s-l)*u/s+h)),o)}var d=i[2*a+o],f=n,p=r;for(N(t,i,n,a),i[2*r+o]>d&&N(t,i,n,r);f<p;){for(N(t,i,f,p),f++,p--;i[2*f+o]<d;)f++;for(;i[2*p+o]>d;)p--}i[2*n+o]===d?N(t,i,n,p):(p++,N(t,i,p,r)),p<=a&&(n=p+1),a<=p&&(r=p-1)}})(e,t,o,a,n,r%2),B(e,t,i,a,o-1,r+1),B(e,t,i,o+1,n,r+1)}}function N(e,t,i,a){V(e,i,a),V(t,2*i,2*a),V(t,2*i+1,2*a+1)}function V(e,t,i){var a=e[t];e[t]=e[i],e[i]=a}function Y(e,t,i,a){var n=e-i,r=t-a;return n*n+r*r}k.exports=I,k.exports.fromVectorTileJs=I,k.exports.fromGeojsonVt=function(e,t){t=t||{};var i={};for(var a in e)i[a]=new E(e[a].features,t),i[a].name=a,i[a].version=t.version,i[a].extent=t.extent;return I({layers:i})},k.exports.GeoJSONWrapper=E;var W,H=function(e){return e[0]},U=function(e){return e[1]},X=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:U,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Float64Array;p(this,e),this.nodeSize=n,this.points=t;for(var o=t.length<65536?Uint16Array:Uint32Array,s=this.ids=new o(t.length),l=this.coords=new r(2*t.length),c=0;c<t.length;c++)s[c]=c,l[2*c]=i(t[c]),l[2*c+1]=a(t[c]);B(s,l,n,0,s.length-1,0)}return f(e,[{key:"range",value:function(e,t,i,a){return function(e,t,i,a,n,r,o){for(var s,l,c=[0,e.length-1,0],u=[];c.length;){var h=c.pop(),d=c.pop(),f=c.pop();if(d-f<=o)for(var p=f;p<=d;p++)s=t[2*p],l=t[2*p+1],s>=i&&s<=n&&l>=a&&l<=r&&u.push(e[p]);else{var m=Math.floor((f+d)/2);s=t[2*m],l=t[2*m+1],s>=i&&s<=n&&l>=a&&l<=r&&u.push(e[m]);var g=(h+1)%2;(0===h?i<=s:a<=l)&&(c.push(f),c.push(m-1),c.push(g)),(0===h?n>=s:r>=l)&&(c.push(m+1),c.push(d),c.push(g))}}return u}(this.ids,this.coords,e,t,i,a,this.nodeSize)}},{key:"within",value:function(e,t,i){return function(e,t,i,a,n,r){for(var o=[0,e.length-1,0],s=[],l=n*n;o.length;){var c=o.pop(),u=o.pop(),h=o.pop();if(u-h<=r)for(var d=h;d<=u;d++)Y(t[2*d],t[2*d+1],i,a)<=l&&s.push(e[d]);else{var f=Math.floor((h+u)/2),p=t[2*f],m=t[2*f+1];Y(p,m,i,a)<=l&&s.push(e[f]);var g=(c+1)%2;(0===c?i-n<=p:a-n<=m)&&(o.push(h),o.push(f-1),o.push(g)),(0===c?i+n>=p:a+n>=m)&&(o.push(f+1),o.push(u),o.push(g))}}return s}(this.ids,this.coords,e,t,i,this.nodeSize)}}]),e}(),G={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(e){return e}},q=Math.fround||(W=new Float32Array(1),function(e){return W[0]=+e,W[0]}),Z=function(){function e(t){p(this,e),this.options=ae(Object.create(G),t),this.trees=new Array(this.options.maxZoom+1)}return f(e,[{key:"load",value:function(e){var t=this.options,i=t.log,a=t.minZoom,n=t.maxZoom,r=t.nodeSize;i&&console.time("total time");var o="prepare ".concat(e.length," points");i&&console.time(o),this.points=e;for(var s=[],l=0;l<e.length;l++)e[l].geometry&&s.push(J(e[l],l));this.trees[n+1]=new X(s,ne,re,r,Float32Array),i&&console.timeEnd(o);for(var c=n;c>=a;c--){var u=+Date.now();s=this._cluster(s,c),this.trees[c]=new X(s,ne,re,r,Float32Array),i&&console.log("z%d: %d clusters in %dms",c,s.length,+Date.now()-u)}return i&&console.timeEnd("total time"),this}},{key:"getClusters",value:function(e,t){var i=((e[0]+180)%360+360)%360-180,a=Math.max(-90,Math.min(90,e[1])),n=180===e[2]?180:((e[2]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)i=-180,n=180;else if(i>n){var o=this.getClusters([i,a,180,r],t),s=this.getClusters([-180,a,n,r],t);return o.concat(s)}var l,c=this.trees[this._limitZoom(t)],u=c.range(ee(i),te(r),ee(n),te(a)),h=[],f=d(u);try{for(f.s();!(l=f.n()).done;){var p=l.value,m=c.points[p];h.push(m.numPoints?Q(m):this.points[m.index])}}catch(g){f.e(g)}finally{f.f()}return h}},{key:"getChildren",value:function(e){var t=this._getOriginId(e),i=this._getOriginZoom(e),a="No cluster with the specified id.",n=this.trees[i];if(!n)throw new Error(a);var r=n.points[t];if(!r)throw new Error(a);var o,s=this.options.radius/(this.options.extent*Math.pow(2,i-1)),l=n.within(r.x,r.y,s),c=[],u=d(l);try{for(u.s();!(o=u.n()).done;){var h=o.value,f=n.points[h];f.parentId===e&&c.push(f.numPoints?Q(f):this.points[f.index])}}catch(p){u.e(p)}finally{u.f()}if(0===c.length)throw new Error(a);return c}},{key:"getLeaves",value:function(e,t,i){var a=[];return this._appendLeaves(a,e,t=t||10,i=i||0,0),a}},{key:"getTile",value:function(e,t,i){var a=this.trees[this._limitZoom(e)],n=Math.pow(2,e),r=this.options,o=r.extent,s=r.radius/o,l=(i-s)/n,c=(i+1+s)/n,u={features:[]};return this._addTileFeatures(a.range((t-s)/n,l,(t+1+s)/n,c),a.points,t,i,n,u),0===t&&this._addTileFeatures(a.range(1-s/n,l,1,c),a.points,n,i,n,u),t===n-1&&this._addTileFeatures(a.range(0,l,s/n,c),a.points,-1,i,n,u),u.features.length?u:null}},{key:"getClusterExpansionZoom",value:function(e){for(var t=this._getOriginZoom(e)-1;t<=this.options.maxZoom;){var i=this.getChildren(e);if(t++,1!==i.length)break;e=i[0].properties.cluster_id}return t}},{key:"_appendLeaves",value:function(e,t,i,a,n){var r,o=this.getChildren(t),s=d(o);try{for(s.s();!(r=s.n()).done;){var l=r.value,c=l.properties;if(c&&c.cluster?n+c.point_count<=a?n+=c.point_count:n=this._appendLeaves(e,c.cluster_id,i,a,n):n<a?n++:e.push(l),e.length===i)break}}catch(u){s.e(u)}finally{s.f()}return n}},{key:"_addTileFeatures",value:function(e,t,i,a,n,r){var o,s=d(e);try{for(s.s();!(o=s.n()).done;){var l=t[o.value],c=l.numPoints,u=void 0,h=void 0,f=void 0;if(c)u=$(l),h=l.x,f=l.y;else{var p=this.points[l.index];u=p.properties,h=ee(p.geometry.coordinates[0]),f=te(p.geometry.coordinates[1])}var m={type:1,geometry:[[Math.round(this.options.extent*(h*n-i)),Math.round(this.options.extent*(f*n-a))]],tags:u},g=void 0;c?g=l.id:this.options.generateId?g=l.index:this.points[l.index].id&&(g=this.points[l.index].id),void 0!==g&&(m.id=g),r.features.push(m)}}catch(v){s.e(v)}finally{s.f()}}},{key:"_limitZoom",value:function(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}},{key:"_cluster",value:function(e,t){for(var i=[],a=this.options,n=a.radius,r=a.extent,o=a.reduce,s=a.minPoints,l=n/(r*Math.pow(2,t)),c=0;c<e.length;c++){var u=e[c];if(!(u.zoom<=t)){u.zoom=t;var h,f=this.trees[t+1],p=f.within(u.x,u.y,l),m=u.numPoints||1,g=m,v=d(p);try{for(v.s();!(h=v.n()).done;){var y=h.value,x=f.points[y];x.zoom>t&&(g+=x.numPoints||1)}}catch(D){v.e(D)}finally{v.f()}if(g>m&&g>=s){var b,_=u.x*m,w=u.y*m,k=o&&m>1?this._map(u,!0):null,S=(c<<5)+(t+1)+this.points.length,C=d(p);try{for(C.s();!(b=C.n()).done;){var A=b.value,O=f.points[A];if(!(O.zoom<=t)){O.zoom=t;var T=O.numPoints||1;_+=O.x*T,w+=O.y*T,O.parentId=S,o&&(k||(k=this._map(u,!0)),o(k,this._map(O)))}}}catch(D){C.e(D)}finally{C.f()}u.parentId=S,i.push(K(_/g,w/g,S,g,k))}else if(i.push(u),g>1){var M,E=d(p);try{for(E.s();!(M=E.n()).done;){var I=M.value,P=f.points[I];P.zoom<=t||(P.zoom=t,i.push(P))}}catch(D){E.e(D)}finally{E.f()}}}}return i}},{key:"_getOriginId",value:function(e){return e-this.points.length>>5}},{key:"_getOriginZoom",value:function(e){return(e-this.points.length)%32}},{key:"_map",value:function(e,t){if(e.numPoints)return t?ae({},e.properties):e.properties;var i=this.points[e.index].properties,a=this.options.map(i);return t&&a===i?ae({},a):a}}]),e}();function K(e,t,i,a,n){return{x:q(e),y:q(t),zoom:1/0,id:i,parentId:-1,numPoints:a,properties:n}}function J(e,t){var i=h(e.geometry.coordinates,2),a=i[0],n=i[1];return{x:q(ee(a)),y:q(te(n)),zoom:1/0,index:t,parentId:-1}}function Q(e){return{type:"Feature",id:e.id,properties:$(e),geometry:{type:"Point",coordinates:[(t=e.x,360*(t-.5)),ie(e.y)]}};var t}function $(e){var t=e.numPoints,i=t>=1e4?"".concat(Math.round(t/1e3),"k"):t>=1e3?Math.round(t/100)/10+"k":t;return ae(ae({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:i})}function ee(e){return e/360+.5}function te(e){var t=Math.sin(e*Math.PI/180),i=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return i<0?0:i>1?1:i}function ie(e){var t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function ae(e,t){for(var i in t)e[i]=t[i];return e}function ne(e){return e.x}function re(e){return e.y}function oe(e,t,i,a,n,r){var o=n-i,s=r-a;if(0!==o||0!==s){var l=((e-i)*o+(t-a)*s)/(o*o+s*s);l>1?(i=n,a=r):l>0&&(i+=o*l,a+=s*l)}return(o=e-i)*o+(s=t-a)*s}function se(e,t,i,a){var n={id:void 0===e?null:e,type:t,geometry:i,tags:a,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t=e.geometry,i=e.type;if("Point"===i||"MultiPoint"===i||"LineString"===i)le(e,t);else if("Polygon"===i||"MultiLineString"===i)for(var a=0;a<t.length;a++)le(e,t[a]);else if("MultiPolygon"===i)for(a=0;a<t.length;a++)for(var n=0;n<t[a].length;n++)le(e,t[a][n])}(n),n}function le(e,t){for(var i=0;i<t.length;i+=3)e.minX=Math.min(e.minX,t[i]),e.minY=Math.min(e.minY,t[i+1]),e.maxX=Math.max(e.maxX,t[i]),e.maxY=Math.max(e.maxY,t[i+1])}function ce(e,t,i,a){if(t.geometry){var n=t.geometry.coordinates,r=t.geometry.type,o=Math.pow(i.tolerance/((1<<i.maxZoom)*i.extent),2),s=[],l=t.id;if(i.promoteId?l=t.properties[i.promoteId]:i.generateId&&(l=a||0),"Point"===r)ue(n,s);else if("MultiPoint"===r)for(var c=0;c<n.length;c++)ue(n[c],s);else if("LineString"===r)he(n,s,o,!1);else if("MultiLineString"===r){if(i.lineMetrics){for(c=0;c<n.length;c++)he(n[c],s=[],o,!1),e.push(se(l,"LineString",s,t.properties));return}de(n,s,o,!1)}else if("Polygon"===r)de(n,s,o,!0);else{if("MultiPolygon"!==r){if("GeometryCollection"===r){for(c=0;c<t.geometry.geometries.length;c++)ce(e,{id:l,geometry:t.geometry.geometries[c],properties:t.properties},i,a);return}throw new Error("Input data is not a valid GeoJSON object.")}for(c=0;c<n.length;c++){var u=[];de(n[c],u,o,!0),s.push(u)}}e.push(se(l,r,s,t.properties))}}function ue(e,t){t.push(fe(e[0])),t.push(pe(e[1])),t.push(0)}function he(e,t,i,a){for(var n,r,o=0,s=0;s<e.length;s++){var l=fe(e[s][0]),c=pe(e[s][1]);t.push(l),t.push(c),t.push(0),s>0&&(o+=a?(n*c-l*r)/2:Math.sqrt(Math.pow(l-n,2)+Math.pow(c-r,2))),n=l,r=c}var u=t.length-3;t[2]=1,function e(t,i,a,n){for(var r,o=n,s=a-i>>1,l=a-i,c=t[i],u=t[i+1],h=t[a],d=t[a+1],f=i+3;f<a;f+=3){var p=oe(t[f],t[f+1],c,u,h,d);if(p>o)r=f,o=p;else if(p===o){var m=Math.abs(f-s);m<l&&(r=f,l=m)}}o>n&&(r-i>3&&e(t,i,r,n),t[r+2]=o,a-r>3&&e(t,r,a,n))}(t,0,u,i),t[u+2]=1,t.size=Math.abs(o),t.start=0,t.end=t.size}function de(e,t,i,a){for(var n=0;n<e.length;n++){var r=[];he(e[n],r,i,a),t.push(r)}}function fe(e){return e/360+.5}function pe(e){var t=Math.sin(e*Math.PI/180),i=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return i<0?0:i>1?1:i}function me(e,t,i,a,n,r,o,s){if(a/=t,r>=(i/=t)&&o<a)return e;if(o<i||r>=a)return null;for(var l=[],c=0;c<e.length;c++){var u=e[c],h=u.geometry,d=u.type,f=0===n?u.minX:u.minY,p=0===n?u.maxX:u.maxY;if(f>=i&&p<a)l.push(u);else if(!(p<i||f>=a)){var m=[];if("Point"===d||"MultiPoint"===d)ge(h,m,i,a,n);else if("LineString"===d)ve(h,m,i,a,n,!1,s.lineMetrics);else if("MultiLineString"===d)xe(h,m,i,a,n,!1);else if("Polygon"===d)xe(h,m,i,a,n,!0);else if("MultiPolygon"===d)for(var g=0;g<h.length;g++){var v=[];xe(h[g],v,i,a,n,!0),v.length&&m.push(v)}if(m.length){if(s.lineMetrics&&"LineString"===d){for(g=0;g<m.length;g++)l.push(se(u.id,d,m[g],u.tags));continue}"LineString"!==d&&"MultiLineString"!==d||(1===m.length?(d="LineString",m=m[0]):d="MultiLineString"),"Point"!==d&&"MultiPoint"!==d||(d=3===m.length?"Point":"MultiPoint"),l.push(se(u.id,d,m,u.tags))}}}return l.length?l:null}function ge(e,t,i,a,n){for(var r=0;r<e.length;r+=3){var o=e[r+n];o>=i&&o<=a&&(t.push(e[r]),t.push(e[r+1]),t.push(e[r+2]))}}function ve(e,t,i,a,n,r,o){for(var s,l,c=ye(e),u=0===n?_e:we,h=e.start,d=0;d<e.length-3;d+=3){var f=e[d],p=e[d+1],m=e[d+2],g=e[d+3],v=e[d+4],y=0===n?f:p,x=0===n?g:v,b=!1;o&&(s=Math.sqrt(Math.pow(f-g,2)+Math.pow(p-v,2))),y<i?x>i&&(l=u(c,f,p,g,v,i),o&&(c.start=h+s*l)):y>a?x<a&&(l=u(c,f,p,g,v,a),o&&(c.start=h+s*l)):be(c,f,p,m),x<i&&y>=i&&(l=u(c,f,p,g,v,i),b=!0),x>a&&y<=a&&(l=u(c,f,p,g,v,a),b=!0),!r&&b&&(o&&(c.end=h+s*l),t.push(c),c=ye(e)),o&&(h+=s)}var _=e.length-3;f=e[_],p=e[_+1],m=e[_+2],(y=0===n?f:p)>=i&&y<=a&&be(c,f,p,m),_=c.length-3,r&&_>=3&&(c[_]!==c[0]||c[_+1]!==c[1])&&be(c,c[0],c[1],c[2]),c.length&&t.push(c)}function ye(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function xe(e,t,i,a,n,r){for(var o=0;o<e.length;o++)ve(e[o],t,i,a,n,r,!1)}function be(e,t,i,a){e.push(t),e.push(i),e.push(a)}function _e(e,t,i,a,n,r){var o=(r-t)/(a-t);return e.push(r),e.push(i+(n-i)*o),e.push(1),o}function we(e,t,i,a,n,r){var o=(r-i)/(n-i);return e.push(t+(a-t)*o),e.push(r),e.push(1),o}function ke(e,t){for(var i=[],a=0;a<e.length;a++){var n,r=e[a],o=r.type;if("Point"===o||"MultiPoint"===o||"LineString"===o)n=Se(r.geometry,t);else if("MultiLineString"===o||"Polygon"===o){n=[];for(var s=0;s<r.geometry.length;s++)n.push(Se(r.geometry[s],t))}else if("MultiPolygon"===o)for(n=[],s=0;s<r.geometry.length;s++){for(var l=[],c=0;c<r.geometry[s].length;c++)l.push(Se(r.geometry[s][c],t));n.push(l)}i.push(se(r.id,o,n,r.tags))}return i}function Se(e,t){var i=[];i.size=e.size,void 0!==e.start&&(i.start=e.start,i.end=e.end);for(var a=0;a<e.length;a+=3)i.push(e[a]+t,e[a+1],e[a+2]);return i}function Ce(e,t){if(e.transformed)return e;var i,a,n,r=1<<e.z,o=e.x,s=e.y;for(i=0;i<e.features.length;i++){var l=e.features[i],c=l.geometry,u=l.type;if(l.geometry=[],1===u)for(a=0;a<c.length;a+=2)l.geometry.push(Ae(c[a],c[a+1],t,r,o,s));else for(a=0;a<c.length;a++){var h=[];for(n=0;n<c[a].length;n+=2)h.push(Ae(c[a][n],c[a][n+1],t,r,o,s));l.geometry.push(h)}}return e.transformed=!0,e}function Ae(e,t,i,a,n,r){return[Math.round(i*(e*a-n)),Math.round(i*(t*a-r))]}function Oe(e,t,i,a,n){for(var r=t===n.maxZoom?0:n.tolerance/((1<<t)*n.extent),o={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:i,y:a,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<e.length;s++){o.numFeatures++,Te(o,e[s],r,n);var l=e[s].minX,c=e[s].minY,u=e[s].maxX,h=e[s].maxY;l<o.minX&&(o.minX=l),c<o.minY&&(o.minY=c),u>o.maxX&&(o.maxX=u),h>o.maxY&&(o.maxY=h)}return o}function Te(e,t,i,a){var n=t.geometry,r=t.type,o=[];if("Point"===r||"MultiPoint"===r)for(var s=0;s<n.length;s+=3)o.push(n[s]),o.push(n[s+1]),e.numPoints++,e.numSimplified++;else if("LineString"===r)Me(o,n,e,i,!1,!1);else if("MultiLineString"===r||"Polygon"===r)for(s=0;s<n.length;s++)Me(o,n[s],e,i,"Polygon"===r,0===s);else if("MultiPolygon"===r)for(var l=0;l<n.length;l++){var c=n[l];for(s=0;s<c.length;s++)Me(o,c[s],e,i,!0,0===s)}if(o.length){var u=t.tags||null;if("LineString"===r&&a.lineMetrics){for(var h in u={},t.tags)u[h]=t.tags[h];u.mapbox_clip_start=n.start/n.size,u.mapbox_clip_end=n.end/n.size}var d={geometry:o,type:"Polygon"===r||"MultiPolygon"===r?3:"LineString"===r||"MultiLineString"===r?2:1,tags:u};null!==t.id&&(d.id=t.id),e.features.push(d)}}function Me(e,t,i,a,n,r){var o=a*a;if(a>0&&t.size<(n?o:a))i.numPoints+=t.length/3;else{for(var s=[],l=0;l<t.length;l+=3)(0===a||t[l+2]>o)&&(i.numSimplified++,s.push(t[l]),s.push(t[l+1])),i.numPoints++;n&&function(e,t){for(var i=0,a=0,n=e.length,r=n-2;a<n;r=a,a+=2)i+=(e[a]-e[r])*(e[a+1]+e[r+1]);if(i>0===t)for(a=0,n=e.length;a<n/2;a+=2){var o=e[a],s=e[a+1];e[a]=e[n-2-a],e[a+1]=e[n-1-a],e[n-2-a]=o,e[n-1-a]=s}}(s,r),e.push(s)}}function Ee(e,t){var i=(t=this.options=function(e,t){for(var i in t)e[i]=t[i];return e}(Object.create(this.options),t)).debug;if(i&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var a=function(e,t){var i=[];if("FeatureCollection"===e.type)for(var a=0;a<e.features.length;a++)ce(i,e.features[a],t,a);else ce(i,"Feature"===e.type?e:{geometry:e},t);return i}(e,t);this.tiles={},this.tileCoords=[],i&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(a=function(e,t){var i=t.buffer/t.extent,a=e,n=me(e,1,-1-i,i,0,-1,2,t),r=me(e,1,1-i,2+i,0,-1,2,t);return(n||r)&&(a=me(e,1,-i,1+i,0,-1,2,t)||[],n&&(a=ke(n,1).concat(a)),r&&(a=a.concat(ke(r,-1)))),a}(a,t)).length&&this.splitTile(a,0,0,0),i&&(a.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ie(e,t,i){return 32*((1<<e)*i+t)+e}function Pe(e,t){var i=e.tileID.canonical;if(!this._geoJSONIndex)return t(null,null);var a=this._geoJSONIndex.getTile(i.z,i.x,i.y);if(!a)return t(null,null);var n=new w(a.features),r=k.exports(n);0===r.byteOffset&&r.byteLength===r.buffer.byteLength||(r=new Uint8Array(r)),t(null,{vectorTile:n,rawData:r.buffer})}Ee.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ee.prototype.splitTile=function(e,t,i,a,n,r,o){for(var s=[e,t,i,a],l=this.options,c=l.debug;s.length;){a=s.pop(),i=s.pop(),t=s.pop(),e=s.pop();var u=1<<t,h=Ie(t,i,a),d=this.tiles[h];if(!d&&(c>1&&console.time("creation"),d=this.tiles[h]=Oe(e,t,i,a,l),this.tileCoords.push({z:t,x:i,y:a}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,i,a,d.numFeatures,d.numPoints,d.numSimplified),console.timeEnd("creation"));var f="z"+t;this.stats[f]=(this.stats[f]||0)+1,this.total++}if(d.source=e,n){if(t===l.maxZoom||t===n)continue;var p=1<<n-t;if(i!==Math.floor(r/p)||a!==Math.floor(o/p))continue}else if(t===l.indexMaxZoom||d.numPoints<=l.indexMaxPoints)continue;if(d.source=null,0!==e.length){c>1&&console.time("clipping");var m,g,v,y,x,b,_=.5*l.buffer/l.extent,w=.5-_,k=.5+_,S=1+_;m=g=v=y=null,x=me(e,u,i-_,i+k,0,d.minX,d.maxX,l),b=me(e,u,i+w,i+S,0,d.minX,d.maxX,l),e=null,x&&(m=me(x,u,a-_,a+k,1,d.minY,d.maxY,l),g=me(x,u,a+w,a+S,1,d.minY,d.maxY,l),x=null),b&&(v=me(b,u,a-_,a+k,1,d.minY,d.maxY,l),y=me(b,u,a+w,a+S,1,d.minY,d.maxY,l),b=null),c>1&&console.timeEnd("clipping"),s.push(m||[],t+1,2*i,2*a),s.push(g||[],t+1,2*i,2*a+1),s.push(v||[],t+1,2*i+1,2*a),s.push(y||[],t+1,2*i+1,2*a+1)}}},Ee.prototype.getTile=function(e,t,i){var a=this.options,n=a.extent,r=a.debug;if(e<0||e>24)return null;var o=1<<e,s=Ie(e,t=(t%o+o)%o,i);if(this.tiles[s])return Ce(this.tiles[s],n);r>1&&console.log("drilling down to z%d-%d-%d",e,t,i);for(var l,c=e,u=t,h=i;!l&&c>0;)c--,u=Math.floor(u/2),h=Math.floor(h/2),l=this.tiles[Ie(c,u,h)];return l&&l.source?(r>1&&console.log("found parent tile z%d-%d-%d",c,u,h),r>1&&console.time("drilling down"),this.splitTile(l.source,c,u,h,e,t,i),r>1&&console.timeEnd("drilling down"),this.tiles[s]?Ce(this.tiles[s],n):null):null};var De=function(t){m(a,t);var i=g(a);function a(e,t,n,r){var o;return p(this,a),o=i.call(this,e,t,n,Pe),r&&(o.loadGeoJSON=r),o}return f(a,[{key:"loadData",value:function(t,i){var a,n=this;null===(a=this._pendingRequest)||void 0===a||a.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});var r=!!(t&&t.request&&t.request.collectResourceTiming)&&new e.RequestPerformance(t.request);this._pendingCallback=i,this._pendingRequest=this.loadGeoJSON(t,(function(a,o){if(delete n._pendingCallback,delete n._pendingRequest,a||!o)return i(a);if("object"!=typeof o)return i(new Error("Input data given to '".concat(t.source,"' is not a valid GeoJSON object.")));!function e(t,i){var a,n=t&&t.type;if("FeatureCollection"===n)for(a=0;a<t.features.length;a++)e(t.features[a],i);else if("GeometryCollection"===n)for(a=0;a<t.geometries.length;a++)e(t.geometries[a],i);else if("Feature"===n)e(t.geometry,i);else if("Polygon"===n)y(t.coordinates,i);else if("MultiPolygon"===n)for(a=0;a<t.coordinates.length;a++)y(t.coordinates[a],i);return t}(o,!0);try{if(t.filter){var s=e.createExpression(t.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===s.result)throw new Error(s.value.map((function(e){return"".concat(e.key,": ").concat(e.message)})).join(", "));var l=o.features.filter((function(e){return s.value.evaluate({zoom:0},e)}));o={type:"FeatureCollection",features:l}}n._geoJSONIndex=t.cluster?new Z(function(t){var i=t.superclusterOptions,a=t.clusterProperties;if(!a||!i)return i;for(var n={},r={},o={accumulated:null,zoom:0},s={properties:null},l=Object.keys(a),c=0,u=l;c<u.length;c++){var f=u[c],p=h(a[f],2),m=p[0],g=p[1],v=e.createExpression(g),y=e.createExpression("string"==typeof m?[m,["accumulated"],["get",f]]:m);n[f]=v.value,r[f]=y.value}return i.map=function(e){s.properties=e;var t,i={},a=d(l);try{for(a.s();!(t=a.n()).done;){var r=t.value;i[r]=n[r].evaluate(o,s)}}catch(c){a.e(c)}finally{a.f()}return i},i.reduce=function(e,t){s.properties=t;var i,a=d(l);try{for(a.s();!(i=a.n()).done;){var n=i.value;o.accumulated=e[n],e[n]=r[n].evaluate(o,s)}}catch(c){a.e(c)}finally{a.f()}},i}(t)).load(o.features):function(e,t){return new Ee(e,t)}(o,t.geojsonVtOptions)}catch(a){return i(a)}n.loaded={};var c={};if(r){var u=r.finish();u&&(c.resourceTiming={},c.resourceTiming[t.source]=JSON.parse(JSON.stringify(u)))}i(null,c)}))}},{key:"reloadTile",value:function(e,t){var i=this.loaded;return i&&i[e.uid]?o(s(a.prototype),"reloadTile",this).call(this,e,t):this.loadTile(e,t)}},{key:"loadGeoJSON",value:function(t,i){if(t.request)return e.getJSON(t.request,i);if("string"==typeof t.data)try{i(null,JSON.parse(t.data))}catch(e){i(new Error("Input data given to '".concat(t.source,"' is not a valid GeoJSON object.")))}else i(new Error("Input data given to '".concat(t.source,"' is not a valid GeoJSON object.")));return{cancel:function(){}}}},{key:"removeSource",value:function(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),t()}},{key:"getClusterExpansionZoom",value:function(e,t){try{t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))}catch(e){t(e)}}},{key:"getClusterChildren",value:function(e,t){try{t(null,this._geoJSONIndex.getChildren(e.clusterId))}catch(e){t(e)}}},{key:"getClusterLeaves",value:function(e,t){try{t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))}catch(e){t(e)}}}]),a}(u),ze=function(){function t(i){var a=this;p(this,t),this.self=i,this.actor=new e.Actor(i,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:u,geojson:De},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(e,t){if(a.workerSourceTypes[e])throw new Error('Worker source with name "'.concat(e,'" already registered.'));a.workerSourceTypes[e]=t},this.self.registerRTLTextPlugin=function(t){if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=t.applyArabicShaping,e.plugin.processBidirectionalText=t.processBidirectionalText,e.plugin.processStyledBidirectionalText=t.processStyledBidirectionalText}}return f(t,[{key:"setReferrer",value:function(e,t){this.referrer=t}},{key:"setImages",value:function(e,t,i){for(var a in this.availableImages[e]=t,this.workerSources[e]){var n=this.workerSources[e][a];for(var r in n)n[r].availableImages=t}i()}},{key:"setLayers",value:function(e,t,i){this.getLayerIndex(e).replace(t),i()}},{key:"updateLayers",value:function(e,t,i){this.getLayerIndex(e).update(t.layers,t.removedIds),i()}},{key:"loadTile",value:function(e,t,i){this.getWorkerSource(e,t.type,t.source).loadTile(t,i)}},{key:"loadDEMTile",value:function(e,t,i){this.getDEMWorkerSource(e,t.source).loadTile(t,i)}},{key:"reloadTile",value:function(e,t,i){this.getWorkerSource(e,t.type,t.source).reloadTile(t,i)}},{key:"abortTile",value:function(e,t,i){this.getWorkerSource(e,t.type,t.source).abortTile(t,i)}},{key:"removeTile",value:function(e,t,i){this.getWorkerSource(e,t.type,t.source).removeTile(t,i)}},{key:"removeDEMTile",value:function(e,t){this.getDEMWorkerSource(e,t.source).removeTile(t)}},{key:"removeSource",value:function(e,t,i){if(this.workerSources[e]&&this.workerSources[e][t.type]&&this.workerSources[e][t.type][t.source]){var a=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],void 0!==a.removeSource?a.removeSource(t,i):i()}}},{key:"loadWorkerSource",value:function(e,t,i){try{this.self.importScripts(t.url),i()}catch(e){i(e.toString())}}},{key:"syncRTLPluginState",value:function(t,i,a){try{e.plugin.setState(i);var n=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=n){this.self.importScripts(n);var r=e.plugin.isParsed();a(r?void 0:new Error("RTL Text Plugin failed to import scripts from ".concat(n)),r)}}catch(e){a(e.toString())}}},{key:"getAvailableImages",value:function(e){var t=this.availableImages[e];return t||(t=[]),t}},{key:"getLayerIndex",value:function(e){var t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new a),t}},{key:"getWorkerSource",value:function(e,t,i){var a=this;if(this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),!this.workerSources[e][t][i]){var n={send:function(t,i,n){a.actor.send(t,i,n,e)}};this.workerSources[e][t][i]=new this.workerSourceTypes[t](n,this.getLayerIndex(e),this.getAvailableImages(e))}return this.workerSources[e][t][i]}},{key:"getDEMWorkerSource",value:function(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new v),this.demWorkerSources[e][t]}},{key:"enforceCacheSizeLimit",value:function(t,i){e.enforceCacheSizeLimit(i)}}]),t}();return e.isWorker()&&(self.worker=new ze(self)),ze})),y(0,(function(e){var t=i;function i(e){return!function(e){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var e,t,i=new Blob([""],{type:"text/javascript"}),a=URL.createObjectURL(i);try{t=new Worker(a),e=!0}catch(t){e=!1}return t&&t.terminate(),URL.revokeObjectURL(a),e}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var e=document.createElement("canvas");e.width=e.height=1;var t=e.getContext("2d");if(!t)return!1;var i=t.getImageData(0,0,1,1);return i&&i.width===e.width}()?(void 0===r[t=e&&e.failIfMajorPerformanceCaveat]&&(r[t]=function(e){var t,a=function(e){var t=document.createElement("canvas"),a=Object.create(i.webGLContextAttributes);return a.failIfMajorPerformanceCaveat=e,t.getContext("webgl",a)||t.getContext("experimental-webgl",a)}(e);if(!a)return!1;try{t=a.createShader(a.VERTEX_SHADER)}catch(e){return!1}return!(!t||a.isContextLost())&&(a.shaderSource(t,"void main() {}"),a.compileShader(t),!0===a.getShaderParameter(t,a.COMPILE_STATUS))}(t)),r[t]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var t}(e)}var r={};function c(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(!c(e[i],t[i]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==t){if("object"!=typeof t)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var a in e)if(!c(e[a],t[a]))return!1;return!0}return e===t}i.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};var u=function(){function t(){p(this,t)}return f(t,null,[{key:"testProp",value:function(e){if(!t.docStyle)return e[0];for(var i=0;i<e.length;i++)if(e[i]in t.docStyle)return e[i];return e[0]}},{key:"create",value:function(e,t,i){var a=window.document.createElement(e);return void 0!==t&&(a.className=t),i&&i.appendChild(a),a}},{key:"createNS",value:function(e,t){return window.document.createElementNS(e,t)}},{key:"disableDrag",value:function(){t.docStyle&&t.selectProp&&(t.userSelect=t.docStyle[t.selectProp],t.docStyle[t.selectProp]="none")}},{key:"enableDrag",value:function(){t.docStyle&&t.selectProp&&(t.docStyle[t.selectProp]=t.userSelect)}},{key:"setTransform",value:function(e,i){e.style[t.transformProp]=i}},{key:"addEventListener",value:function(e,t,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.addEventListener(t,i,"passive"in a?a:a.capture)}},{key:"removeEventListener",value:function(e,t,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.removeEventListener(t,i,"passive"in a?a:a.capture)}},{key:"suppressClickInternal",value:function(e){e.preventDefault(),e.stopPropagation(),window.removeEventListener("click",t.suppressClickInternal,!0)}},{key:"suppressClick",value:function(){window.addEventListener("click",t.suppressClickInternal,!0),window.setTimeout((function(){window.removeEventListener("click",t.suppressClickInternal,!0)}),0)}},{key:"mousePos",value:function(t,i){var a=t.getBoundingClientRect();return new e.pointGeometry(i.clientX-a.left-t.clientLeft,i.clientY-a.top-t.clientTop)}},{key:"touchPos",value:function(t,i){for(var a=t.getBoundingClientRect(),n=[],r=0;r<i.length;r++)n.push(new e.pointGeometry(i[r].clientX-a.left-t.clientLeft,i[r].clientY-a.top-t.clientTop));return n}},{key:"mouseButton",value:function(e){return e.button}},{key:"remove",value:function(e){e.parentNode&&e.parentNode.removeChild(e)}}]),t}();u.docStyle="undefined"!=typeof window&&window.document&&window.document.documentElement.style,u.selectProp=u.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),u.transformProp=u.testProp(["transform","WebkitTransform"]);var v=function(){function e(t){p(this,e),this._transformRequestFn=t}return f(e,[{key:"transformRequest",value:function(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}}},{key:"normalizeSpriteURL",value:function(e,t,i){var a=function(e){var t=e.match(y);if(!t)throw new Error('Unable to parse URL "'.concat(e,'"'));return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}(e);return a.path+="".concat(t).concat(i),function(e){var t=e.params.length?"?".concat(e.params.join("&")):"";return"".concat(e.protocol,"://").concat(e.authority).concat(e.path).concat(t)}(a)}},{key:"setTransformRequest",value:function(e){this._transformRequestFn=e}}]),e}(),y=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/,x=function(){function t(e,i,a,n){p(this,t),this.context=e,this.format=a,this.texture=e.gl.createTexture(),this.update(i,n)}return f(t,[{key:"update",value:function(t,i,a){var n=t.width,r=t.height,o=!(this.size&&this.size[0]===n&&this.size[1]===r||a),s=this.context,l=s.gl;if(this.useMipmap=Boolean(i&&i.useMipmap),l.bindTexture(l.TEXTURE_2D,this.texture),s.pixelStoreUnpackFlipY.set(!1),s.pixelStoreUnpack.set(1),s.pixelStoreUnpackPremultiplyAlpha.set(this.format===l.RGBA&&(!i||!1!==i.premultiply)),o)this.size=[n,r],t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||e.isImageBitmap(t)?l.texImage2D(l.TEXTURE_2D,0,this.format,this.format,l.UNSIGNED_BYTE,t):l.texImage2D(l.TEXTURE_2D,0,this.format,n,r,0,this.format,l.UNSIGNED_BYTE,t.data);else{var c=a||{x:0,y:0},u=c.x,h=c.y;t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||e.isImageBitmap(t)?l.texSubImage2D(l.TEXTURE_2D,0,u,h,l.RGBA,l.UNSIGNED_BYTE,t):l.texSubImage2D(l.TEXTURE_2D,0,u,h,n,r,l.RGBA,l.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&l.generateMipmap(l.TEXTURE_2D)}},{key:"bind",value:function(e,t,i){var a=this.context.gl;a.bindTexture(a.TEXTURE_2D,this.texture),i!==a.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=a.LINEAR),e!==this.filter&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,e),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,i||e),this.filter=e),t!==this.wrap&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,t),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,t),this.wrap=t)}},{key:"isSizePowerOfTwo",value:function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}},{key:"destroy",value:function(){this.context.gl.deleteTexture(this.texture),this.texture=null}}]),t}();function b(e){var t=e.userImage;return!!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}var _=function(t){m(a,t);var i=g(a);function a(){var t;return p(this,a),(t=i.call(this)).images={},t.updatedImages={},t.callbackDispatchedThisFrame={},t.loaded=!1,t.requestors=[],t.patterns={},t.atlasImage=new e.RGBAImage({width:1,height:1}),t.dirty=!0,t}return f(a,[{key:"isLoaded",value:function(){return this.loaded}},{key:"setLoaded",value:function(e){if(this.loaded!==e&&(this.loaded=e,e)){var t,i=d(this.requestors);try{for(i.s();!(t=i.n()).done;){var a=t.value,n=a.ids,r=a.callback;this._notify(n,r)}}catch(o){i.e(o)}finally{i.f()}this.requestors=[]}}},{key:"getImage",value:function(e){return this.images[e]}},{key:"addImage",value:function(e,t){if(this.images[e])throw new Error("Image id ".concat(e," already exist, use updateImage instead"));this._validate(e,t)&&(this.images[e]=t)}},{key:"_validate",value:function(t,i){var a=!0;return this._validateStretch(i.stretchX,i.data&&i.data.width)||(this.fire(new e.ErrorEvent(new Error('Image "'.concat(t,'" has invalid "stretchX" value')))),a=!1),this._validateStretch(i.stretchY,i.data&&i.data.height)||(this.fire(new e.ErrorEvent(new Error('Image "'.concat(t,'" has invalid "stretchY" value')))),a=!1),this._validateContent(i.content,i)||(this.fire(new e.ErrorEvent(new Error('Image "'.concat(t,'" has invalid "content" value')))),a=!1),a}},{key:"_validateStretch",value:function(e,t){if(!e)return!0;var i,a=0,n=d(e);try{for(n.s();!(i=n.n()).done;){var r=i.value;if(r[0]<a||r[1]<r[0]||t<r[1])return!1;a=r[1]}}catch(o){n.e(o)}finally{n.f()}return!0}},{key:"_validateContent",value:function(e,t){return!(e&&(4!==e.length||e[0]<0||t.data.width<e[0]||e[1]<0||t.data.height<e[1]||e[2]<0||t.data.width<e[2]||e[3]<0||t.data.height<e[3]||e[2]<e[0]||e[3]<e[1]))}},{key:"updateImage",value:function(e,t){var i=this.images[e];if(i.data.width!==t.data.width||i.data.height!==t.data.height)throw new Error("size mismatch between old image (".concat(i.data.width,"x").concat(i.data.height,") and new image (").concat(t.data.width,"x").concat(t.data.height,")."));t.version=i.version+1,this.images[e]=t,this.updatedImages[e]=!0}},{key:"removeImage",value:function(e){var t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()}},{key:"listImages",value:function(){return Object.keys(this.images)}},{key:"getImages",value:function(e,t){var i=!0;if(!this.isLoaded()){var a,n=d(e);try{for(n.s();!(a=n.n()).done;){var r=a.value;this.images[r]||(i=!1)}}catch(o){n.e(o)}finally{n.f()}}this.isLoaded()||i?this._notify(e,t):this.requestors.push({ids:e,callback:t})}},{key:"_notify",value:function(t,i){var a,n={},r=d(t);try{for(r.s();!(a=r.n()).done;){var o=a.value;this.images[o]||this.fire(new e.Event("styleimagemissing",{id:o}));var s=this.images[o];s?n[o]={data:s.data.clone(),pixelRatio:s.pixelRatio,sdf:s.sdf,version:s.version,stretchX:s.stretchX,stretchY:s.stretchY,content:s.content,hasRenderCallback:Boolean(s.userImage&&s.userImage.render)}:e.warnOnce('Image "'.concat(o,'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.'))}}catch(l){r.e(l)}finally{r.f()}i(null,n)}},{key:"getPixelSize",value:function(){var e=this.atlasImage;return{width:e.width,height:e.height}}},{key:"getPattern",value:function(t){var i=this.patterns[t],a=this.getImage(t);if(!a)return null;if(i&&i.position.version===a.version)return i.position;if(i)i.position.version=a.version;else{var n={w:a.data.width+2,h:a.data.height+2,x:0,y:0},r=new e.ImagePosition(n,a);this.patterns[t]={bin:n,position:r}}return this._updatePatternAtlas(),this.patterns[t].position}},{key:"bind",value:function(e){var t=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new x(e,this.atlasImage,t.RGBA),this.atlasTexture.bind(t.LINEAR,t.CLAMP_TO_EDGE)}},{key:"_updatePatternAtlas",value:function(){var t=[];for(var i in this.patterns)t.push(this.patterns[i].bin);var a=e.potpack(t),n=a.w,r=a.h,o=this.atlasImage;for(var s in o.resize({width:n||1,height:r||1}),this.patterns){var l=this.patterns[s].bin,c=l.x+1,u=l.y+1,h=this.images[s].data,d=h.width,f=h.height;e.RGBAImage.copy(h,o,{x:0,y:0},{x:c,y:u},{width:d,height:f}),e.RGBAImage.copy(h,o,{x:0,y:f-1},{x:c,y:u-1},{width:d,height:1}),e.RGBAImage.copy(h,o,{x:0,y:0},{x:c,y:u+f},{width:d,height:1}),e.RGBAImage.copy(h,o,{x:d-1,y:0},{x:c-1,y:u},{width:1,height:f}),e.RGBAImage.copy(h,o,{x:0,y:0},{x:c+d,y:u},{width:1,height:f})}this.dirty=!0}},{key:"beginFrame",value:function(){this.callbackDispatchedThisFrame={}}},{key:"dispatchRenderCallbacks",value:function(t){var i,a=d(t);try{for(a.s();!(i=a.n()).done;){var n=i.value;if(!this.callbackDispatchedThisFrame[n]){this.callbackDispatchedThisFrame[n]=!0;var r=this.images[n];r||e.warnOnce('Image with ID: "'.concat(n,'" was not found')),b(r)&&this.updateImage(n,r)}}}catch(o){a.e(o)}finally{a.f()}}}]),a}(e.Evented),w=1e20;function k(e,t,i,a,n,r,o,s,l){for(var c=t;c<t+a;c++)S(e,i*r+c,r,n,o,s,l);for(var u=i;u<i+n;u++)S(e,u*r+t,1,a,o,s,l)}function S(e,t,i,a,n,r,o){r[0]=0,o[0]=-w,o[1]=w,n[0]=e[t];for(var s=1,l=0,c=0;s<a;s++){n[s]=e[t+s*i];var u=s*s;do{var h=r[l];c=(n[s]-n[h]+u-h*h)/(s-h)/2}while(c<=o[l]&&--l>-1);r[++l]=s,o[l]=c,o[l+1]=w}for(var d=0,f=0;d<a;d++){for(;o[f+1]<d;)f++;var p=r[f],m=d-p;e[t+d*i]=n[p]+m*m}}var C=function(){function t(e,i){p(this,t),this.requestManager=e,this.localIdeographFontFamily=i,this.entries={}}return f(t,[{key:"setURL",value:function(e){this.url=e}},{key:"getGlyphs",value:function(i,a){var n=this,r=[];for(var o in i){var s,l=d(i[o]);try{for(l.s();!(s=l.n()).done;){var c=s.value;r.push({stack:o,id:c})}}catch(u){l.e(u)}finally{l.f()}}e.asyncAll(r,(function(e,i){var a=e.stack,r=e.id,o=n.entries[a];o||(o=n.entries[a]={glyphs:{},requests:{},ranges:{}});var s=o.glyphs[r];if(void 0===s){if(s=n._tinySDF(o,a,r))return o.glyphs[r]=s,void i(null,{stack:a,id:r,glyph:s});var l=Math.floor(r/256);if(256*l>65535)i(new Error("glyphs > 65535 not supported"));else if(o.ranges[l])i(null,{stack:a,id:r,glyph:s});else{var c=o.requests[l];c||(c=o.requests[l]=[],t.loadGlyphRange(a,l,n.url,n.requestManager,(function(e,t){if(t){for(var i in t)n._doesCharSupportLocalGlyph(+i)||(o.glyphs[+i]=t[+i]);o.ranges[l]=!0}var a,r=d(c);try{for(r.s();!(a=r.n()).done;)(0,a.value)(e,t)}catch(u){r.e(u)}finally{r.f()}delete o.requests[l]}))),c.push((function(e,t){e?i(e):t&&i(null,{stack:a,id:r,glyph:t[r]||null})}))}}else i(null,{stack:a,id:r,glyph:s})}),(function(e,t){if(e)a(e);else if(t){var i,n={},r=d(t);try{for(r.s();!(i=r.n()).done;){var o=i.value,s=o.stack,l=o.id,c=o.glyph;(n[s]||(n[s]={}))[l]=c&&{id:c.id,bitmap:c.bitmap.clone(),metrics:c.metrics}}}catch(u){r.e(u)}finally{r.f()}a(null,n)}}))}},{key:"_doesCharSupportLocalGlyph",value:function(t){return!!this.localIdeographFontFamily&&(e.unicodeBlockLookup["CJK Unified Ideographs"](t)||e.unicodeBlockLookup["Hangul Syllables"](t)||e.unicodeBlockLookup.Hiragana(t)||e.unicodeBlockLookup.Katakana(t))}},{key:"_tinySDF",value:function(i,a,n){var r=this.localIdeographFontFamily;if(r&&this._doesCharSupportLocalGlyph(n)){var o=i.tinySDF;if(!o){var s="400";/bold/i.test(a)?s="900":/medium/i.test(a)?s="500":/light/i.test(a)&&(s="200"),o=i.tinySDF=new t.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:r,fontWeight:s})}var l=o.draw(String.fromCharCode(n));return{id:n,bitmap:new e.AlphaImage({width:l.width||30,height:l.height||30},l.data),metrics:{width:l.glyphWidth||24,height:l.glyphHeight||24,left:l.glyphLeft||0,top:l.glyphTop-27||-8,advance:l.glyphAdvance||24}}}}}]),t}();C.loadGlyphRange=function(t,i,a,n,r){var o=256*i,s=o+255,l=n.transformRequest(a.replace("{fontstack}",t).replace("{range}","".concat(o,"-").concat(s)),e.ResourceType.Glyphs);e.getArrayBuffer(l,(function(t,i){if(t)r(t);else if(i){var a,n={},o=d(e.parseGlyphPbf(i));try{for(o.s();!(a=o.n()).done;){var s=a.value;n[s.id]=s}}catch(l){o.e(l)}finally{o.f()}r(null,n)}}))},C.TinySDF=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.fontSize,a=void 0===i?24:i,n=t.buffer,r=void 0===n?3:n,o=t.radius,s=void 0===o?8:o,l=t.cutoff,c=void 0===l?.25:l,u=t.fontFamily,h=void 0===u?"sans-serif":u,d=t.fontWeight,f=void 0===d?"normal":d,m=t.fontStyle,g=void 0===m?"normal":m;p(this,e),this.buffer=r,this.cutoff=c,this.radius=s;var v=this.size=a+4*r,y=this._createCanvas(v),x=this.ctx=y.getContext("2d",{willReadFrequently:!0});x.font="".concat(g," ").concat(f," ").concat(a,"px ").concat(h),x.textBaseline="alphabetic",x.textAlign="left",x.fillStyle="black",this.gridOuter=new Float64Array(v*v),this.gridInner=new Float64Array(v*v),this.f=new Float64Array(v),this.z=new Float64Array(v+1),this.v=new Uint16Array(v)}return f(e,[{key:"_createCanvas",value:function(e){var t=document.createElement("canvas");return t.width=t.height=e,t}},{key:"draw",value:function(e){var t=this.ctx.measureText(e),i=t.width,a=t.actualBoundingBoxAscent,n=t.actualBoundingBoxDescent,r=t.actualBoundingBoxLeft,o=t.actualBoundingBoxRight,s=Math.ceil(a),l=Math.min(this.size-this.buffer,Math.ceil(o-r)),c=Math.min(this.size-this.buffer,s+Math.ceil(n)),u=l+2*this.buffer,h=c+2*this.buffer,d=Math.max(u*h,0),f=new Uint8ClampedArray(d),p={data:f,width:u,height:h,glyphWidth:l,glyphHeight:c,glyphTop:s,glyphLeft:0,glyphAdvance:i};if(0===l||0===c)return p;var m=this.ctx,g=this.buffer,v=this.gridInner,y=this.gridOuter;m.clearRect(g,g,l,c),m.fillText(e,g,g+s);var x=m.getImageData(g,g,l,c);y.fill(w,0,d),v.fill(0,0,d);for(var b=0;b<c;b++)for(var _=0;_<l;_++){var S=x.data[4*(b*l+_)+3]/255;if(0!==S){var C=(b+g)*u+_+g;if(1===S)y[C]=0,v[C]=w;else{var A=.5-S;y[C]=A>0?A*A:0,v[C]=A<0?A*A:0}}}k(y,0,0,u,h,u,this.f,this.v,this.z),k(v,g,g,l,c,u,this.f,this.v,this.z);for(var O=0;O<d;O++){var T=Math.sqrt(y[O])-Math.sqrt(v[O]);f[O]=Math.round(255-255*(T/this.radius+this.cutoff))}return p}}]),e}();var A=new e.Properties({anchor:new e.DataConstantProperty(e.spec.light.anchor),position:new(function(){function t(){p(this,t),this.specification=e.spec.light.position}return f(t,[{key:"possiblyEvaluate",value:function(t,i){return e.sphericalToCartesian(t.expression.evaluate(i))}},{key:"interpolate",value:function(t,i,a){return{x:e.number(t.x,i.x,a),y:e.number(t.y,i.y,a),z:e.number(t.z,i.z,a)}}}]),t}()),color:new e.DataConstantProperty(e.spec.light.color),intensity:new e.DataConstantProperty(e.spec.light.intensity)}),O="-transition",T=function(t){m(a,t);var i=g(a);function a(t){var n;return p(this,a),(n=i.call(this))._transitionable=new e.Transitionable(A),n.setLight(t),n._transitioning=n._transitionable.untransitioned(),n}return f(a,[{key:"getLight",value:function(){return this._transitionable.serialize()}},{key:"setLight",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(e.validateLight,t,i))for(var a in t){var n=t[a];a.endsWith(O)?this._transitionable.setTransition(a.slice(0,-O.length),n):this._transitionable.setValue(a,n)}}},{key:"updateTransitions",value:function(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}},{key:"hasTransition",value:function(){return this._transitioning.hasTransition()}},{key:"recalculate",value:function(e){this.properties=this._transitioning.possiblyEvaluate(e)}},{key:"_validate",value:function(t,i,a){return(!a||!1!==a.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:i,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}]),a}(e.Evented),M=function(){function t(e,i){p(this,t),this.width=e,this.height=i,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}return f(t,[{key:"getDash",value:function(e,t){var i=e.join(",")+String(t);return this.dashEntry[i]||(this.dashEntry[i]=this.addDash(e,t)),this.dashEntry[i]}},{key:"getDashRanges",value:function(e,t,i){var a=[],n=e.length%2==1?-e[e.length-1]*i:0,r=e[0]*i,o=!0;a.push({left:n,right:r,isDash:o,zeroLength:0===e[0]});for(var s=e[0],l=1;l<e.length;l++){o=!o;var c=e[l];n=s*i,r=(s+=c)*i,a.push({left:n,right:r,isDash:o,zeroLength:0===c})}return a}},{key:"addRoundDash",value:function(e,t,i){for(var a=t/2,n=-i;n<=i;n++)for(var r=this.width*(this.nextRow+i+n),o=0,s=e[o],l=0;l<this.width;l++){l/s.right>1&&(s=e[++o]);var c=Math.abs(l-s.left),u=Math.abs(l-s.right),h=Math.min(c,u),d=void 0,f=n/i*(a+1);if(s.isDash){var p=a-Math.abs(f);d=Math.sqrt(h*h+p*p)}else d=a-Math.sqrt(h*h+f*f);this.data[r+l]=Math.max(0,Math.min(255,d+128))}}},{key:"addRegularDash",value:function(e){for(var t=e.length-1;t>=0;--t){var i=e[t],a=e[t+1];i.zeroLength?e.splice(t,1):a&&a.isDash===i.isDash&&(a.left=i.left,e.splice(t,1))}var n=e[0],r=e[e.length-1];n.isDash===r.isDash&&(n.left=r.left-this.width,r.right=n.right+this.width);for(var o=this.width*this.nextRow,s=0,l=e[s],c=0;c<this.width;c++){c/l.right>1&&(l=e[++s]);var u=Math.abs(c-l.left),h=Math.abs(c-l.right),d=Math.min(u,h);this.data[o+c]=Math.max(0,Math.min(255,(l.isDash?d:-d)+128))}}},{key:"addDash",value:function(t,i){var a=i?7:0,n=2*a+1;if(this.nextRow+n>this.height)return e.warnOnce("LineAtlas out of space"),null;for(var r=0,o=0;o<t.length;o++)r+=t[o];if(0!==r){var s=this.width/r,l=this.getDashRanges(t,this.width,s);i?this.addRoundDash(l,s,a):this.addRegularDash(l)}var c={y:(this.nextRow+a+.5)/this.height,height:2*a/this.height,width:r};return this.nextRow+=n,this.dirty=!0,c}},{key:"bind",value:function(e){var t=e.gl;this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.ALPHA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,this.width,this.height,0,t.ALPHA,t.UNSIGNED_BYTE,this.data))}}]),t}(),E=function(){function t(i,a){p(this,t),this.workerPool=i,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var n=this.workerPool.acquire(this.id),r=0;r<n.length;r++){var o=new t.Actor(n[r],a,this.id);o.name="Worker ".concat(r),this.actors.push(o)}if(!this.actors.length)throw new Error("No actors found")}return f(t,[{key:"broadcast",value:function(t,i,a){e.asyncAll(this.actors,(function(e,a){e.send(t,i,a)}),a=a||function(){})}},{key:"getActor",value:function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}},{key:"remove",value:function(){this.actors.forEach((function(e){e.remove()})),this.actors=[],this.workerPool.release(this.id)}}]),t}();function I(t,i,a){var n=function(i,n){if(i)return a(i);if(n){var r=e.pick(e.extend(n,t),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);n.vector_layers&&(r.vectorLayers=n.vector_layers,r.vectorLayerIds=r.vectorLayers.map((function(e){return e.id}))),a(null,r)}};return t.url?e.getJSON(i.transformRequest(t.url,e.ResourceType.Source),n):e.exported.frame((function(){return n(null,t)}))}E.Actor=e.Actor;var P,D=function(){function t(i,a,n){p(this,t),this.bounds=e.LngLatBounds.convert(this.validateBounds(i)),this.minzoom=a||0,this.maxzoom=n||24}return f(t,[{key:"validateBounds",value:function(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}},{key:"contains",value:function(t){var i=Math.pow(2,t.z),a=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*i),n=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*i),r=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*i),o=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*i);return t.x>=a&&t.x<r&&t.y>=n&&t.y<o}}]),t}(),z=function(t){m(a,t);var i=g(a);function a(t,r,o,s){var c;if(p(this,a),(c=i.call(this)).id=t,c.dispatcher=o,c.type="vector",c.minzoom=0,c.maxzoom=22,c.scheme="xyz",c.tileSize=512,c.reparseOverscaled=!0,c.isTileClipped=!0,c._loaded=!1,e.extend(n(c),e.pick(r,["url","scheme","tileSize","promoteId"])),c._options=e.extend({type:"vector"},r),c._collectResourceTiming=r.collectResourceTiming,512!==c.tileSize)throw new Error("vector tile sources must have a tileSize of 512");return c.setEventedParent(s),l(c)}return f(a,[{key:"load",value:function(){var t=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=I(this._options,this.map._requestManager,(function(i,a){t._tileJSONRequest=null,t._loaded=!0,t.map.style.sourceCaches[t.id].clearTiles(),i?t.fire(new e.ErrorEvent(i)):a&&(e.extend(t,a),a.bounds&&(t.tileBounds=new D(a.bounds,t.minzoom,t.maxzoom)),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))}))}},{key:"loaded",value:function(){return this._loaded}},{key:"hasTile",value:function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}},{key:"onAdd",value:function(e){this.map=e,this.load()}},{key:"setSourceProperty",value:function(e){this._tileJSONRequest&&this._tileJSONRequest.cancel(),e(),this.load()}},{key:"setTiles",value:function(e){var t=this;return this.setSourceProperty((function(){t._options.tiles=e})),this}},{key:"setUrl",value:function(e){var t=this;return this.setSourceProperty((function(){t.url=e,t._options.url=e})),this}},{key:"onRemove",value:function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}},{key:"serialize",value:function(){return e.extend({},this._options)}},{key:"loadTile",value:function(t,i){var a=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),n={request:this.map._requestManager.transformRequest(a,e.ResourceType.Tile),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function r(a,n){return delete t.request,t.aborted?i(null):a&&404!==a.status?i(a):(n&&n.resourceTiming&&(t.resourceTiming=n.resourceTiming),this.map._refreshExpiredTiles&&n&&t.setExpiryData(n),t.loadVectorData(n,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),i(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}n.request.collectResourceTiming=this._collectResourceTiming,t.actor&&"expired"!==t.state?"loading"===t.state?t.reloadCallback=i:t.request=t.actor.send("reloadTile",n,r.bind(this)):(t.actor=this.dispatcher.getActor(),t.request=t.actor.send("loadTile",n,r.bind(this)))}},{key:"abortTile",value:function(e){e.request&&(e.request.cancel(),delete e.request),e.actor&&e.actor.send("abortTile",{uid:e.uid,type:this.type,source:this.id},void 0)}},{key:"unloadTile",value:function(e){e.unloadVectorData(),e.actor&&e.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id},void 0)}},{key:"hasTransition",value:function(){return!1}}]),a}(e.Evented),L=function(t){m(a,t);var i=g(a);function a(t,r,o,s){var l;return p(this,a),(l=i.call(this)).id=t,l.dispatcher=o,l.setEventedParent(s),l.type="raster",l.minzoom=0,l.maxzoom=22,l.roundZoom=!0,l.scheme="xyz",l.tileSize=512,l._loaded=!1,l._options=e.extend({type:"raster"},r),e.extend(n(l),e.pick(r,["url","scheme","tileSize"])),l}return f(a,[{key:"load",value:function(){var t=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=I(this._options,this.map._requestManager,(function(i,a){t._tileJSONRequest=null,t._loaded=!0,i?t.fire(new e.ErrorEvent(i)):a&&(e.extend(t,a),a.bounds&&(t.tileBounds=new D(a.bounds,t.minzoom,t.maxzoom)),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))}))}},{key:"loaded",value:function(){return this._loaded}},{key:"onAdd",value:function(e){this.map=e,this.load()}},{key:"onRemove",value:function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}},{key:"serialize",value:function(){return e.extend({},this._options)}},{key:"hasTile",value:function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}},{key:"loadTile",value:function(t,i){var a=this,n=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);t.request=e.getImage(this.map._requestManager.transformRequest(n,e.ResourceType.Tile),(function(n,r,o){if(delete t.request,t.aborted)t.state="unloaded",i(null);else if(n)t.state="errored",i(n);else if(r){a.map._refreshExpiredTiles&&t.setExpiryData(o);var s=a.map.painter.context,l=s.gl;t.texture=a.map.painter.getTileTexture(r.width),t.texture?t.texture.update(r,{useMipmap:!0}):(t.texture=new x(s,r,l.RGBA,{useMipmap:!0}),t.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST),s.extTextureFilterAnisotropic&&l.texParameterf(l.TEXTURE_2D,s.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,s.extTextureFilterAnisotropicMax)),t.state="loaded",e.cacheEntryPossiblyAdded(a.dispatcher),i(null)}}))}},{key:"abortTile",value:function(e,t){e.request&&(e.request.cancel(),delete e.request),t()}},{key:"unloadTile",value:function(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()}},{key:"hasTransition",value:function(){return!1}}]),a}(e.Evented),j=function(t){m(a,t);var i=g(a);function a(t,n,r,o){var s;return p(this,a),(s=i.call(this,t,n,r,o)).type="raster-dem",s.maxzoom=22,s._options=e.extend({type:"raster-dem"},n),s.encoding=n.encoding||"mapbox",s}return f(a,[{key:"serialize",value:function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}},{key:"loadTile",value:function(t,i){var a=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function n(e,a){e&&(t.state="errored",i(e)),a&&(t.dem=a,t.needsHillshadePrepare=!0,t.needsTerrainPrepare=!0,t.state="loaded",i(null))}t.request=e.getImage(this.map._requestManager.transformRequest(a,e.ResourceType.Tile),function(a,r){if(delete t.request,t.aborted)t.state="unloaded",i(null);else if(a)t.state="errored",i(a);else if(r){this.map._refreshExpiredTiles&&t.setExpiryData(r),delete r.cacheControl,delete r.expires;var o=e.isImageBitmap(r)&&(null==P&&(P="undefined"!=typeof OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap),P)?r:e.exported.getImageData(r,1),s={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:o,encoding:this.encoding};t.actor&&"expired"!==t.state||(t.actor=this.dispatcher.getActor(),t.actor.send("loadDEMTile",s,n.bind(this)))}}.bind(this)),t.neighboringTiles=this._getNeighboringTiles(t.tileID)}},{key:"_getNeighboringTiles",value:function(t){var i=t.canonical,a=Math.pow(2,i.z),n=(i.x-1+a)%a,r=0===i.x?t.wrap-1:t.wrap,o=(i.x+1+a)%a,s=i.x+1===a?t.wrap+1:t.wrap,l={};return l[new e.OverscaledTileID(t.overscaledZ,r,i.z,n,i.y).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,i.z,o,i.y).key]={backfilled:!1},i.y>0&&(l[new e.OverscaledTileID(t.overscaledZ,r,i.z,n,i.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,i.z,o,i.y-1).key]={backfilled:!1}),i.y+1<a&&(l[new e.OverscaledTileID(t.overscaledZ,r,i.z,n,i.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,i.z,o,i.y+1).key]={backfilled:!1}),l}},{key:"unloadTile",value:function(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",e.actor&&e.actor.send("removeDEMTile",{uid:e.uid,source:this.id})}}]),a}(L),R=function(t){m(a,t);var i=g(a);function a(t,n,r,o){var s;p(this,a),(s=i.call(this)).id=t,s.type="geojson",s.minzoom=0,s.maxzoom=18,s.tileSize=512,s.isTileClipped=!0,s.reparseOverscaled=!0,s._removed=!1,s._pendingLoads=0,s.actor=r.getActor(),s.setEventedParent(o),s._data=n.data,s._options=e.extend({},n),s._collectResourceTiming=n.collectResourceTiming,void 0!==n.maxzoom&&(s.maxzoom=n.maxzoom),n.type&&(s.type=n.type),n.attribution&&(s.attribution=n.attribution),s.promoteId=n.promoteId;var l=e.EXTENT/s.tileSize;return s.workerOptions=e.extend({source:s.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*l,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*l,extent:e.EXTENT,maxZoom:s.maxzoom,lineMetrics:n.lineMetrics||!1,generateId:n.generateId||!1},superclusterOptions:{maxZoom:void 0!==n.clusterMaxZoom?n.clusterMaxZoom:s.maxzoom-1,minPoints:Math.max(2,n.clusterMinPoints||2),extent:e.EXTENT,radius:(n.clusterRadius||50)*l,log:!1,generateId:n.generateId||!1},clusterProperties:n.clusterProperties,filter:n.filter},n.workerOptions),s}return f(a,[{key:"load",value:function(){this._updateWorkerData("metadata")}},{key:"onAdd",value:function(e){this.map=e,this.load()}},{key:"setData",value:function(e){return this._data=e,this._updateWorkerData("content"),this}},{key:"getClusterExpansionZoom",value:function(e,t){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id},t),this}},{key:"getClusterChildren",value:function(e,t){return this.actor.send("geojson.getClusterChildren",{clusterId:e,source:this.id},t),this}},{key:"getClusterLeaves",value:function(e,t,i,a){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:e,limit:t,offset:i},a),this}},{key:"_updateWorkerData",value:function(t){var i=this,a=e.extend({},this.workerOptions),n=this._data;"string"==typeof n?(a.request=this.map._requestManager.transformRequest(e.exported.resolveURL(n),e.ResourceType.Source),a.request.collectResourceTiming=this._collectResourceTiming):a.data=JSON.stringify(n),this._pendingLoads++,this.fire(new e.Event("dataloading",{dataType:"source"})),this.actor.send("".concat(this.type,".loadData"),a,(function(a,n){if(i._pendingLoads--,i._removed||n&&n.abandoned)i.fire(new e.Event("dataabort",{dataType:"source",sourceDataType:t}));else{var r=null;if(n&&n.resourceTiming&&n.resourceTiming[i.id]&&(r=n.resourceTiming[i.id].slice(0)),a)i.fire(new e.ErrorEvent(a));else{var o={dataType:"source",sourceDataType:t};i._collectResourceTiming&&r&&r.length>0&&e.extend(o,{resourceTiming:r}),i.fire(new e.Event("data",o))}}}))}},{key:"loaded",value:function(){return 0===this._pendingLoads}},{key:"loadTile",value:function(e,t){var i=this,a=e.actor?"reloadTile":"loadTile";e.actor=this.actor;var n={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};e.request=this.actor.send(a,n,(function(n,r){return delete e.request,e.unloadVectorData(),e.aborted?t(null):n?t(n):(e.loadVectorData(r,i.map.painter,"reloadTile"===a),t(null))}))}},{key:"abortTile",value:function(e){e.request&&(e.request.cancel(),delete e.request),e.aborted=!0}},{key:"unloadTile",value:function(e){e.unloadVectorData(),this.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}},{key:"onRemove",value:function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}},{key:"serialize",value:function(){return e.extend({},this._options,{type:this.type,data:this._data})}},{key:"hasTransition",value:function(){return!1}}]),a}(e.Evented),F=e.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),B=function(t){m(a,t);var i=g(a);function a(e,t,n,r){var o;return p(this,a),(o=i.call(this)).id=e,o.dispatcher=n,o.coordinates=t.coordinates,o.type="image",o.minzoom=0,o.maxzoom=22,o.tileSize=512,o.tiles={},o._loaded=!1,o.setEventedParent(r),o.options=t,o}return f(a,[{key:"load",value:function(t,i){var a=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),(function(n,r){a._loaded=!0,n?a.fire(new e.ErrorEvent(n)):r&&(a.image=r,t&&(a.coordinates=t),i&&i(),a._finishLoading())}))}},{key:"loaded",value:function(){return this._loaded}},{key:"updateImage",value:function(e){var t=this;return this.image&&e.url?(this.options.url=e.url,this.load(e.coordinates,(function(){t.texture=null})),this):this}},{key:"_finishLoading",value:function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))}},{key:"onAdd",value:function(e){this.map=e,this.load()}},{key:"setCoordinates",value:function(t){var i=this;this.coordinates=t;var a=t.map(e.MercatorCoordinate.fromLngLat);this.tileID=function(t){var i,a=1/0,n=1/0,r=-1/0,o=-1/0,s=d(t);try{for(s.s();!(i=s.n()).done;){var l=i.value;a=Math.min(a,l.x),n=Math.min(n,l.y),r=Math.max(r,l.x),o=Math.max(o,l.y)}}catch(f){s.e(f)}finally{s.f()}var c=Math.max(r-a,o-n),u=Math.max(0,Math.floor(-Math.log(c)/Math.LN2)),h=Math.pow(2,u);return new e.CanonicalTileID(u,Math.floor((a+r)/2*h),Math.floor((n+o)/2*h))}(a),this.minzoom=this.maxzoom=this.tileID.z;var n=a.map((function(e){return i.tileID.getTilePoint(e)._round()}));return this._boundsArray=new e.RasterBoundsArray,this._boundsArray.emplaceBack(n[0].x,n[0].y,0,0),this._boundsArray.emplaceBack(n[1].x,n[1].y,e.EXTENT,0),this._boundsArray.emplaceBack(n[3].x,n[3].y,0,e.EXTENT),this._boundsArray.emplaceBack(n[2].x,n[2].y,e.EXTENT,e.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this}},{key:"prepare",value:function(){if(0!==Object.keys(this.tiles).length&&this.image){var t=this.map.painter.context,i=t.gl;for(var a in this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,F.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new x(t,this.image,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE)),this.tiles){var n=this.tiles[a];"loaded"!==n.state&&(n.state="loaded",n.texture=this.texture)}}}},{key:"loadTile",value:function(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state="errored",t(null))}},{key:"serialize",value:function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}},{key:"hasTransition",value:function(){return!1}}]),a}(e.Evented),N=function(t){m(a,t);var i=g(a);function a(e,t,n,r){var o;return p(this,a),(o=i.call(this,e,t,n,r)).roundZoom=!0,o.type="video",o.options=t,o}return f(a,[{key:"load",value:function(){var t=this;this._loaded=!1;var i=this.options;this.urls=[];var a,n=d(i.urls);try{for(n.s();!(a=n.n()).done;){var r=a.value;this.urls.push(this.map._requestManager.transformRequest(r,e.ResourceType.Source).url)}}catch(o){n.e(o)}finally{n.f()}e.getVideo(this.urls,(function(i,a){t._loaded=!0,i?t.fire(new e.ErrorEvent(i)):a&&(t.video=a,t.video.loop=!0,t.video.addEventListener("playing",(function(){t.map.triggerRepaint()})),t.map&&t.video.play(),t._finishLoading())}))}},{key:"pause",value:function(){this.video&&this.video.pause()}},{key:"play",value:function(){this.video&&this.video.play()}},{key:"seek",value:function(t){if(this.video){var i=this.video.seekable;t<i.start(0)||t>i.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(this.id),null,"Playback for this video can be set only between the ".concat(i.start(0)," and ").concat(i.end(0),"-second mark.")))):this.video.currentTime=t}}},{key:"getVideo",value:function(){return this.video}},{key:"onAdd",value:function(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}},{key:"prepare",value:function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var t=this.map.painter.context,i=t.gl;for(var a in this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,F.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new x(t,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE)),this.tiles){var n=this.tiles[a];"loaded"!==n.state&&(n.state="loaded",n.texture=this.texture)}}}},{key:"serialize",value:function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}},{key:"hasTransition",value:function(){return this.video&&!this.video.paused}}]),a}(B),V=function(t){m(a,t);var i=g(a);function a(t,n,r,o){var s;return p(this,a),s=i.call(this,t,n,r,o),n.coordinates?Array.isArray(n.coordinates)&&4===n.coordinates.length&&!n.coordinates.some((function(e){return!Array.isArray(e)||2!==e.length||e.some((function(e){return"number"!=typeof e}))}))||s.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):s.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'missing required property "coordinates"'))),n.animate&&"boolean"!=typeof n.animate&&s.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'optional "animate" property must be a boolean value'))),n.canvas?"string"==typeof n.canvas||n.canvas instanceof HTMLCanvasElement||s.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):s.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'missing required property "canvas"'))),s.options=n,s.animate=void 0===n.animate||n.animate,s}return f(a,[{key:"load",value:function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}},{key:"getCanvas",value:function(){return this.canvas}},{key:"onAdd",value:function(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}},{key:"onRemove",value:function(){this.pause()}},{key:"prepare",value:function(){var t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var i=this.map.painter.context,a=i.gl;for(var n in this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,F.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new x(i,this.canvas,a.RGBA,{premultiply:!0}),this.tiles){var r=this.tiles[n];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}}}},{key:"serialize",value:function(){return{type:"canvas",coordinates:this.coordinates}}},{key:"hasTransition",value:function(){return this._playing}},{key:"_hasInvalidDimensions",value:function(){for(var e=0,t=[this.canvas.width,this.canvas.height];e<t.length;e++){var i=t[e];if(isNaN(i)||i<=0)return!0}return!1}}]),a}(B),Y={vector:z,raster:L,"raster-dem":j,geojson:R,video:N,image:B,canvas:V};function W(t,i){var a=e.create();return e.translate(a,a,[1,1,0]),e.scale(a,a,[.5*t.width,.5*t.height,1]),e.multiply(a,a,t.calculatePosMatrix(i.toUnwrapped()))}function H(e,t,i,a,n,r){var o=function(e,t,i){if(e){var a,n=d(e);try{for(n.s();!(a=n.n()).done;){var r=t[a.value];if(r&&r.source===i&&"fill-extrusion"===r.type)return!0}}catch(l){n.e(l)}finally{n.f()}}else for(var o in t){var s=t[o];if(s.source===i&&"fill-extrusion"===s.type)return!0}return!1}(n&&n.layers,t,e.id),s=r.maxPitchScaleFactor(),l=e.tilesIn(a,s,o);l.sort(U);var c,u=[],h=d(l);try{for(h.s();!(c=h.n()).done;){var f=c.value;u.push({wrappedTileID:f.tileID.wrapped().key,queryResults:f.tile.queryRenderedFeatures(t,i,e._state,f.queryGeometry,f.cameraQueryGeometry,f.scale,n,r,s,W(e.transform,f.tileID))})}}catch(g){h.e(g)}finally{h.f()}var p=function(e){var t,i={},a={},n=d(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,o=r.queryResults,s=r.wrappedTileID,l=a[s]=a[s]||{};for(var c in o){var u,h=o[c],f=l[c]=l[c]||{},p=i[c]=i[c]||[],m=d(h);try{for(m.s();!(u=m.n()).done;){var v=u.value;f[v.featureIndex]||(f[v.featureIndex]=!0,p.push(v))}}catch(g){m.e(g)}finally{m.f()}}}}catch(g){n.e(g)}finally{n.f()}return i}(u);for(var m in p)p[m].forEach((function(t){var i=t.feature,a=e.getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=a}));return p}function U(e,t){var i=e.tileID,a=t.tileID;return i.overscaledZ-a.overscaledZ||i.canonical.y-a.canonical.y||i.wrap-a.wrap||i.canonical.x-a.canonical.x}var X=function(){function t(i,a){p(this,t),this.tileID=i,this.uid=e.uniqueId(),this.uses=0,this.tileSize=a,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}return f(t,[{key:"registerFadeDuration",value:function(t){var i=t+this.timeAdded;i<e.exported.now()||this.fadeEndTime&&i<this.fadeEndTime||(this.fadeEndTime=i)}},{key:"wasRequested",value:function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}},{key:"clearTextures",value:function(e){this.demTexture&&e.saveTileTexture(this.demTexture),this.textures.forEach((function(t){return e.saveTileTexture(t)})),this.demTexture=null,this.textures=[],this.textureCoords={}}},{key:"loadVectorData",value:function(t,i,a){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){for(var n in t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(e,t){var i={};if(!t)return i;var a,n=d(e);try{var r=function(){var e=a.value,n=e.layerIds.map((function(e){return t.getLayer(e)})).filter(Boolean);if(0!==n.length){e.layers=n,e.stateDependentLayerIds&&(e.stateDependentLayers=e.stateDependentLayerIds.map((function(e){return n.filter((function(t){return t.id===e}))[0]})));var r,o=d(n);try{for(o.s();!(r=o.n()).done;){var s=r.value;i[s.id]=e}}catch(l){o.e(l)}finally{o.f()}}};for(n.s();!(a=n.n()).done;)r()}catch(o){n.e(o)}finally{n.f()}return i}(t.buckets,i.style),this.hasSymbolBuckets=!1,this.buckets){var r=this.buckets[n];if(r instanceof e.SymbolBucket){if(this.hasSymbolBuckets=!0,!a)break;r.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var o in this.buckets){var s=this.buckets[o];if(s instanceof e.SymbolBucket&&s.hasRTLText){this.hasRTLText=!0,e.lazyLoadRTLTextPlugin();break}}for(var l in this.queryPadding=0,this.buckets){var c=this.buckets[l];this.queryPadding=Math.max(this.queryPadding,i.style.getLayer(l).queryRadius(c))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new e.CollisionBoxArray}},{key:"unloadVectorData",value:function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}},{key:"getBucket",value:function(e){return this.buckets[e.id]}},{key:"upload",value:function(e){for(var t in this.buckets){var i=this.buckets[t];i.uploadPending()&&i.upload(e)}var a=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new x(e,this.imageAtlas.image,a.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new x(e,this.glyphAtlasImage,a.ALPHA),this.glyphAtlasImage=null)}},{key:"prepare",value:function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}},{key:"queryRenderedFeatures",value:function(e,t,i,a,n,r,o,s,l,c){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:a,cameraQueryGeometry:n,scale:r,tileSize:this.tileSize,pixelPosMatrix:c,transform:s,params:o,queryPadding:this.queryPadding*l},e,t,i):{}}},{key:"querySourceFeatures",value:function(t,i){var a=this.latestFeatureIndex;if(a&&a.rawTileData){var n=a.loadVTLayers(),r=i?i.sourceLayer:"",o=n._geojsonTileLayer||n[r];if(o)for(var s=e.createFilter(i&&i.filter),l=this.tileID.canonical,c=l.z,u=l.x,h=l.y,d={z:c,x:u,y:h},f=0;f<o.length;f++){var p=o.feature(f);if(s.needGeometry){var m=e.toEvaluationFeature(p,!0);if(!s.filter(new e.EvaluationParameters(this.tileID.overscaledZ),m,this.tileID.canonical))continue}else if(!s.filter(new e.EvaluationParameters(this.tileID.overscaledZ),p))continue;var g=a.getId(p,r),v=new e.GeoJSONFeature(p,c,u,h,g);v.tile=d,t.push(v)}}}},{key:"hasData",value:function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}},{key:"patternsLoaded",value:function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}},{key:"setExpiryData",value:function(t){var i=this.expirationTime;if(t.cacheControl){var a=e.parseCacheControl(t.cacheControl);a["max-age"]&&(this.expirationTime=Date.now()+1e3*a["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var n=Date.now(),r=!1;if(this.expirationTime>n)r=!1;else if(i)if(this.expirationTime<i)r=!0;else{var o=this.expirationTime-i;o?this.expirationTime=n+Math.max(o,3e4):r=!0}else r=!0;r?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}},{key:"getExpiryTimeout",value:function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}},{key:"setFeatureState",value:function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(e).length){var i=this.latestFeatureIndex.loadVTLayers();for(var a in this.buckets)if(t.style.hasLayer(a)){var n=this.buckets[a],r=n.layers[0].sourceLayer||"_geojsonTileLayer",o=i[r],s=e[r];if(o&&s&&0!==Object.keys(s).length){n.update(s,o,this.imageAtlas&&this.imageAtlas.patternPositions||{});var l=t&&t.style&&t.style.getLayer(a);l&&(this.queryPadding=Math.max(this.queryPadding,l.queryRadius(n)))}}}}},{key:"holdingForFade",value:function(){return void 0!==this.symbolFadeHoldUntil}},{key:"symbolFadeFinished",value:function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<e.exported.now()}},{key:"clearFadeHold",value:function(){this.symbolFadeHoldUntil=void 0}},{key:"setHoldDuration",value:function(t){this.symbolFadeHoldUntil=e.exported.now()+t}},{key:"setDependencies",value:function(e,t){var i,a={},n=d(t);try{for(n.s();!(i=n.n()).done;)a[i.value]=!0}catch(r){n.e(r)}finally{n.f()}this.dependencies[e]=a}},{key:"hasDependency",value:function(e,t){var i,a=d(e);try{for(a.s();!(i=a.n()).done;){var n=i.value,r=this.dependencies[n];if(r){var o,s=d(t);try{for(s.s();!(o=s.n()).done;)if(r[o.value])return!0}catch(l){s.e(l)}finally{s.f()}}}}catch(l){a.e(l)}finally{a.f()}return!1}}]),t}(),G=function(){function e(t,i){p(this,e),this.max=t,this.onRemove=i,this.reset()}return f(e,[{key:"reset",value:function(){for(var e in this.data){var t,i=d(this.data[e]);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.timeout&&clearTimeout(a.timeout),this.onRemove(a.value)}}catch(n){i.e(n)}finally{i.f()}}return this.data={},this.order=[],this}},{key:"add",value:function(e,t,i){var a=this,n=e.wrapped().key;void 0===this.data[n]&&(this.data[n]=[]);var r={value:t,timeout:void 0};if(void 0!==i&&(r.timeout=setTimeout((function(){a.remove(e,r)}),i)),this.data[n].push(r),this.order.push(n),this.order.length>this.max){var o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this}},{key:"has",value:function(e){return e.wrapped().key in this.data}},{key:"getAndRemove",value:function(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}},{key:"_getAndRemoveByKey",value:function(e){var t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value}},{key:"getByKey",value:function(e){var t=this.data[e];return t?t[0].value:null}},{key:"get",value:function(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}},{key:"remove",value:function(e,t){if(!this.has(e))return this;var i=e.wrapped().key,a=void 0===t?0:this.data[i].indexOf(t),n=this.data[i][a];return this.data[i].splice(a,1),n.timeout&&clearTimeout(n.timeout),0===this.data[i].length&&delete this.data[i],this.onRemove(n.value),this.order.splice(this.order.indexOf(i),1),this}},{key:"setMaxSize",value:function(e){for(this.max=e;this.order.length>this.max;){var t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}},{key:"filter",value:function(e){var t=[];for(var i in this.data){var a,n=d(this.data[i]);try{for(n.s();!(a=n.n()).done;){var r=a.value;e(r.value)||t.push(r)}}catch(c){n.e(c)}finally{n.f()}}for(var o=0,s=t;o<s.length;o++){var l=s[o];this.remove(l.value.tileID,l)}}}]),e}(),q=function(){function t(){p(this,t),this.state={},this.stateChanges={},this.deletedStates={}}return f(t,[{key:"updateState",value:function(t,i,a){var n=String(i);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][n]=this.stateChanges[t][n]||{},e.extend(this.stateChanges[t][n],a),null===this.deletedStates[t])for(var r in this.deletedStates[t]={},this.state[t])r!==n&&(this.deletedStates[t][r]=null);else if(this.deletedStates[t]&&null===this.deletedStates[t][n])for(var o in this.deletedStates[t][n]={},this.state[t][n])a[o]||(this.deletedStates[t][n][o]=null);else for(var s in a)this.deletedStates[t]&&this.deletedStates[t][n]&&null===this.deletedStates[t][n][s]&&delete this.deletedStates[t][n][s]}},{key:"removeFeatureState",value:function(e,t,i){if(null!==this.deletedStates[e]){var a=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},i&&void 0!==t)null!==this.deletedStates[e][a]&&(this.deletedStates[e][a]=this.deletedStates[e][a]||{},this.deletedStates[e][a][i]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][a])for(i in this.deletedStates[e][a]={},this.stateChanges[e][a])this.deletedStates[e][a][i]=null;else this.deletedStates[e][a]=null;else this.deletedStates[e]=null}}},{key:"getState",value:function(t,i){var a=String(i),n=e.extend({},(this.state[t]||{})[a],(this.stateChanges[t]||{})[a]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){var r=this.deletedStates[t][i];if(null===r)return{};for(var o in r)delete n[o]}return n}},{key:"initializeTileState",value:function(e,t){e.setFeatureState(this.state,t)}},{key:"coalesceChanges",value:function(t,i){var a={};for(var n in this.stateChanges){this.state[n]=this.state[n]||{};var r={};for(var o in this.stateChanges[n])this.state[n][o]||(this.state[n][o]={}),e.extend(this.state[n][o],this.stateChanges[n][o]),r[o]=this.state[n][o];a[n]=r}for(var s in this.deletedStates){this.state[s]=this.state[s]||{};var l={};if(null===this.deletedStates[s])for(var c in this.state[s])l[c]={},this.state[s][c]={};else for(var u in this.deletedStates[s]){if(null===this.deletedStates[s][u])this.state[s][u]={};else for(var h=0,d=Object.keys(this.deletedStates[s][u]);h<d.length;h++){var f=d[h];delete this.state[s][u][f]}l[u]=this.state[s][u]}a[s]=a[s]||{},e.extend(a[s],l)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(a).length)for(var p in t)t[p].setFeatureState(a,i)}}]),t}(),Z=function(t){m(a,t);var i=g(a);function a(t,r,o){var s;return p(this,a),(s=i.call(this)).id=t,s.dispatcher=o,s.on("data",(function(e){"source"===e.dataType&&"metadata"===e.sourceDataType&&(s._sourceLoaded=!0),s._sourceLoaded&&!s._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(s.reload(),s.transform&&s.update(s.transform,s.terrain))})),s.on("dataloading",(function(){s._sourceErrored=!1})),s.on("error",(function(){s._sourceErrored=s._source.loaded()})),s._source=function(t,i,a,n){var r=new Y[i.type](t,i,a,n);if(r.id!==t)throw new Error("Expected Source id to be ".concat(t," instead of ").concat(r.id));return e.bindAll(["load","abort","unload","serialize","prepare"],r),r}(t,r,o,n(s)),s._tiles={},s._cache=new G(0,s._unloadTile.bind(n(s))),s._timers={},s._cacheTimers={},s._maxTileCacheSize=null,s._loadedParentTiles={},s._coveredTiles={},s._state=new q,s}return f(a,[{key:"onAdd",value:function(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(e)}},{key:"onRemove",value:function(e){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(e)}},{key:"loaded",value:function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var e in this._tiles){var t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0}},{key:"getSource",value:function(){return this._source}},{key:"pause",value:function(){this._paused=!0}},{key:"resume",value:function(){if(this._paused){var e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}}},{key:"_loadTile",value:function(e,t){return this._source.loadTile(e,t)}},{key:"_unloadTile",value:function(e){if(this._source.unloadTile)return this._source.unloadTile(e,(function(){}))}},{key:"_abortTile",value:function(t){this._source.abortTile&&this._source.abortTile(t,(function(){})),this._source.fire(new e.Event("dataabort",{tile:t,coord:t.tileID,dataType:"source"}))}},{key:"serialize",value:function(){return this._source.serialize()}},{key:"prepare",value:function(e){for(var t in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var i=this._tiles[t];i.upload(e),i.prepare(this.map.style.imageManager)}}},{key:"getIds",value:function(){return Object.values(this._tiles).map((function(e){return e.tileID})).sort(K).map((function(e){return e.key}))}},{key:"getRenderableIds",value:function(t){var i=this,a=[];for(var n in this._tiles)this._isIdRenderable(n,t)&&a.push(this._tiles[n]);return t?a.sort((function(t,a){var n=t.tileID,r=a.tileID,o=new e.pointGeometry(n.canonical.x,n.canonical.y)._rotate(i.transform.angle),s=new e.pointGeometry(r.canonical.x,r.canonical.y)._rotate(i.transform.angle);return n.overscaledZ-r.overscaledZ||s.y-o.y||s.x-o.x})).map((function(e){return e.tileID.key})):a.map((function(e){return e.tileID})).sort(K).map((function(e){return e.key}))}},{key:"hasRenderableParent",value:function(e){var t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)}},{key:"_isIdRenderable",value:function(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())}},{key:"reload",value:function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var e in this._cache.reset(),this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(e,"reloading")}},{key:"_reloadTile",value:function(e,t){var i=this._tiles[e];i&&("loading"!==i.state&&(i.state=t),this._loadTile(i,this._tileLoaded.bind(this,i,e,t)))}},{key:"_tileLoaded",value:function(t,i,a,n){if(n)return t.state="errored",void(404!==n.status?this._source.fire(new e.ErrorEvent(n,{tile:t})):this.update(this.transform,this.terrain));t.timeAdded=e.exported.now(),"expired"===a&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(i,t),"raster-dem"===this.getSource().type&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),t.aborted||this._source.fire(new e.Event("data",{dataType:"source",tile:t,coord:t.tileID}))}},{key:"_backfillDEM",value:function(e){for(var t=this.getRenderableIds(),i=0;i<t.length;i++){var a=t[i];if(e.neighboringTiles&&e.neighboringTiles[a]){var n=this.getTileByID(a);r(e,n),r(n,e)}}function r(e,t){e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0;var i=t.tileID.canonical.x-e.tileID.canonical.x,a=t.tileID.canonical.y-e.tileID.canonical.y,n=Math.pow(2,e.tileID.canonical.z),r=t.tileID.key;0===i&&0===a||Math.abs(a)>1||(Math.abs(i)>1&&(1===Math.abs(i+n)?i+=n:1===Math.abs(i-n)&&(i-=n)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,i,a),e.neighboringTiles&&e.neighboringTiles[r]&&(e.neighboringTiles[r].backfilled=!0)))}}},{key:"getTile",value:function(e){return this.getTileByID(e.key)}},{key:"getTileByID",value:function(e){return this._tiles[e]}},{key:"_retainLoadedChildren",value:function(e,t,i,a){for(var n in this._tiles){var r=this._tiles[n];if(!(a[n]||!r.hasData()||r.tileID.overscaledZ<=t||r.tileID.overscaledZ>i)){for(var o=r.tileID;r&&r.tileID.overscaledZ>t+1;){var s=r.tileID.scaledTo(r.tileID.overscaledZ-1);(r=this._tiles[s.key])&&r.hasData()&&(o=s)}for(var l=o;l.overscaledZ>t;)if(e[(l=l.scaledTo(l.overscaledZ-1)).key]){a[o.key]=o;break}}}}},{key:"findLoadedParent",value:function(e,t){if(e.key in this._loadedParentTiles){var i=this._loadedParentTiles[e.key];return i&&i.tileID.overscaledZ>=t?i:null}for(var a=e.overscaledZ-1;a>=t;a--){var n=e.scaledTo(a),r=this._getLoadedTile(n);if(r)return r}}},{key:"_getLoadedTile",value:function(e){var t=this._tiles[e.key];return t&&t.hasData()?t:this._cache.getByKey(e.wrapped().key)}},{key:"updateCacheSize",value:function(e){var t=Math.ceil(e.width/this._source.tileSize)+1,i=Math.ceil(e.height/this._source.tileSize)+1,a=Math.floor(t*i*5),n="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,a):a;this._cache.setMaxSize(n)}},{key:"handleWrapJump",value:function(e){var t=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,t){var i={};for(var a in this._tiles){var n=this._tiles[a];n.tileID=n.tileID.unwrapTo(n.tileID.wrap+t),i[n.tileID.key]=n}for(var r in this._tiles=i,this._timers)clearTimeout(this._timers[r]),delete this._timers[r];for(var o in this._tiles)this._setTileReloadTimer(o,this._tiles[o])}}},{key:"update",value:function(t,i){var n=this;if(this.transform=t,this.terrain=i,this._sourceLoaded&&!this._paused){var r;this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?r=t.getVisibleUnwrappedCoordinates(this._source.tileID).map((function(t){return new e.OverscaledTileID(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y)})):(r=t.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:i}),this._source.hasTile&&(r=r.filter((function(e){return n._source.hasTile(e)})))):r=[];var o=t.coveringZoomLevel(this._source),s=Math.max(o-a.maxOverzooming,this._source.minzoom),l=Math.max(o+a.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){var c,u={},h=d(r);try{for(h.s();!(c=h.n()).done;){var f=c.value;if(f.canonical.z>this._source.minzoom){var p=f.scaledTo(f.canonical.z-1);u[p.key]=p;var m=f.scaledTo(Math.max(this._source.minzoom,Math.min(f.canonical.z,5)));u[m.key]=m}}}catch(W){h.e(W)}finally{h.f()}r=r.concat(Object.values(u))}var g=this._updateRetainedTiles(r,o);if(J(this._source.type)){for(var v={},y={},x=0,b=Object.keys(g);x<b.length;x++){var _=b[x],w=g[_],k=this._tiles[_];if(k&&!(k.fadeEndTime&&k.fadeEndTime<=e.exported.now())){var S=this.findLoadedParent(w,s);S&&(this._addTile(S.tileID),v[S.tileID.key]=S.tileID),y[_]=w}}for(var C in this._retainLoadedChildren(y,o,l,g),v)g[C]||(this._coveredTiles[C]=!0,g[C]=v[C]);if(i){var A,O={},T={},M=d(r);try{for(M.s();!(A=M.n()).done;){var E=A.value;this._tiles[E.key].hasData()?O[E.key]=E:T[E.key]=E}}catch(W){M.e(W)}finally{M.f()}for(var I in T){var P=T[I].children(this._source.maxzoom);this._tiles[P[0].key]&&this._tiles[P[1].key]&&this._tiles[P[2].key]&&this._tiles[P[3].key]&&(O[P[0].key]=g[P[0].key]=P[0],O[P[1].key]=g[P[1].key]=P[1],O[P[2].key]=g[P[2].key]=P[2],O[P[3].key]=g[P[3].key]=P[3],delete T[I])}for(var D in T){var z=this.findLoadedParent(T[D],this._source.minzoom);if(z)for(var L in O[z.tileID.key]=g[z.tileID.key]=z.tileID,O)O[L].isChildOf(z.tileID)&&delete O[L]}for(var j in this._tiles)O[j]||(this._coveredTiles[j]=!0)}}for(var R in g)this._tiles[R].clearFadeHold();var F,B=e.keysDifference(this._tiles,g),N=d(B);try{for(N.s();!(F=N.n()).done;){var V=F.value,Y=this._tiles[V];Y.hasSymbolBuckets&&!Y.holdingForFade()?Y.setHoldDuration(this.map._fadeDuration):Y.hasSymbolBuckets&&!Y.symbolFadeFinished()||this._removeTile(V)}}catch(W){N.e(W)}finally{N.f()}this._updateLoadedParentTileCache()}}},{key:"releaseSymbolFadeTiles",value:function(){for(var e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(e)}},{key:"_updateRetainedTiles",value:function(e,t){var i,n={},r={},o=Math.max(t-a.maxOverzooming,this._source.minzoom),s=Math.max(t+a.maxUnderzooming,this._source.minzoom),l={},c=d(e);try{for(c.s();!(i=c.n()).done;){var u=i.value,h=this._addTile(u);n[u.key]=u,h.hasData()||t<this._source.maxzoom&&(l[u.key]=u)}}catch(k){c.e(k)}finally{c.f()}this._retainLoadedChildren(l,t,s,n);var f,p=d(e);try{for(p.s();!(f=p.n()).done;){var m=f.value,g=this._tiles[m.key];if(!g.hasData()){if(t+1>this._source.maxzoom){var v=m.children(this._source.maxzoom)[0],y=this.getTile(v);if(y&&y.hasData()){n[v.key]=v;continue}}else{var x=m.children(this._source.maxzoom);if(n[x[0].key]&&n[x[1].key]&&n[x[2].key]&&n[x[3].key])continue}for(var b=g.wasRequested(),_=m.overscaledZ-1;_>=o;--_){var w=m.scaledTo(_);if(r[w.key])break;if(r[w.key]=!0,!(g=this.getTile(w))&&b&&(g=this._addTile(w)),g&&(n[w.key]=w,b=g.wasRequested(),g.hasData()))break}}}}catch(k){p.e(k)}finally{p.f()}return n}},{key:"_updateLoadedParentTileCache",value:function(){for(var e in this._loadedParentTiles={},this._tiles){for(var t=[],i=void 0,a=this._tiles[e].tileID;a.overscaledZ>0;){if(a.key in this._loadedParentTiles){i=this._loadedParentTiles[a.key];break}t.push(a.key);var n=a.scaledTo(a.overscaledZ-1);if(i=this._getLoadedTile(n))break;a=n}for(var r=0,o=t;r<o.length;r++){var s=o[r];this._loadedParentTiles[s]=i}}}},{key:"_addTile",value:function(t){var i=this._tiles[t.key];if(i)return i;(i=this._cache.getAndRemove(t))&&(this._setTileReloadTimer(t.key,i),i.tileID=t,this._state.initializeTileState(i,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,i)));var a=i;return i||(i=new X(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(i,this._tileLoaded.bind(this,i,t.key,i.state))),i.uses++,this._tiles[t.key]=i,a||this._source.fire(new e.Event("dataloading",{tile:i,coord:i.tileID,dataType:"source"})),i}},{key:"_setTileReloadTimer",value:function(e,t){var i=this;e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);var a=t.getExpiryTimeout();a&&(this._timers[e]=setTimeout((function(){i._reloadTile(e,"expired"),delete i._timers[e]}),a))}},{key:"_removeTile",value:function(e){var t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()&&"reloading"!==t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))}},{key:"clearTiles",value:function(){for(var e in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(e);this._cache.reset()}},{key:"tilesIn",value:function(t,i,a){var n=this,r=[],o=this.transform;if(!o)return r;var s,l=a?o.getCameraQueryGeometry(t):t,c=t.map((function(e){return o.pointCoordinate(e,n.terrain)})),u=l.map((function(e){return o.pointCoordinate(e,n.terrain)})),h=this.getIds(),f=1/0,p=1/0,m=-1/0,g=-1/0,v=d(u);try{for(v.s();!(s=v.n()).done;){var y=s.value;f=Math.min(f,y.x),p=Math.min(p,y.y),m=Math.max(m,y.x),g=Math.max(g,y.y)}}catch(_){v.e(_)}finally{v.f()}for(var x=function(t){var a=n._tiles[h[t]];if(a.holdingForFade())return"continue";var s=a.tileID,l=Math.pow(2,o.zoom-a.tileID.overscaledZ),d=i*a.queryPadding*e.EXTENT/a.tileSize/l,v=[s.getTilePoint(new e.MercatorCoordinate(f,p)),s.getTilePoint(new e.MercatorCoordinate(m,g))];if(v[0].x-d<e.EXTENT&&v[0].y-d<e.EXTENT&&v[1].x+d>=0&&v[1].y+d>=0){var y=c.map((function(e){return s.getTilePoint(e)})),x=u.map((function(e){return s.getTilePoint(e)}));r.push({tile:a,tileID:s,queryGeometry:y,cameraQueryGeometry:x,scale:l})}},b=0;b<h.length;b++)x(b);return r}},{key:"getVisibleCoordinates",value:function(e){var t,i=this,a=this.getRenderableIds(e).map((function(e){return i._tiles[e].tileID})),n=d(a);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.posMatrix=this.transform.calculatePosMatrix(r.toUnwrapped())}}catch(o){n.e(o)}finally{n.f()}return a}},{key:"hasTransition",value:function(){if(this._source.hasTransition())return!0;if(J(this._source.type))for(var t in this._tiles){var i=this._tiles[t];if(void 0!==i.fadeEndTime&&i.fadeEndTime>=e.exported.now())return!0}return!1}},{key:"setFeatureState",value:function(e,t,i){this._state.updateState(e=e||"_geojsonTileLayer",t,i)}},{key:"removeFeatureState",value:function(e,t,i){this._state.removeFeatureState(e=e||"_geojsonTileLayer",t,i)}},{key:"getFeatureState",value:function(e,t){return this._state.getState(e=e||"_geojsonTileLayer",t)}},{key:"setDependencies",value:function(e,t,i){var a=this._tiles[e];a&&a.setDependencies(t,i)}},{key:"reloadTilesForDependencies",value:function(e,t){for(var i in this._tiles)this._tiles[i].hasDependency(e,t)&&this._reloadTile(i,"reloading");this._cache.filter((function(i){return!i.hasDependency(e,t)}))}}]),a}(e.Evented);function K(e,t){var i=Math.abs(2*e.wrap)-+(e.wrap<0),a=Math.abs(2*t.wrap)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||a-i||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function J(e){return"raster"===e||"image"===e||"video"===e}Z.maxOverzooming=10,Z.maxUnderzooming=3;var Q,$="mapboxgl_preloaded_worker_pool",ee=function(){function e(){p(this,e),this.active={}}return f(e,[{key:"acquire",value:function(t){if(!this.workers)for(this.workers=[];this.workers.length<e.workerCount;)this.workers.push(new Worker(On.workerUrl));return this.active[t]=!0,this.workers.slice()}},{key:"release",value:function(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach((function(e){e.terminate()})),this.workers=null)}},{key:"isPreloaded",value:function(){return!!this.active[$]}},{key:"numActive",value:function(){return Object.keys(this.active).length}}]),e}(),te=Math.floor(e.exported.hardwareConcurrency/2);function ie(){return Q||(Q=new ee),Q}function ae(t,i){var a={};for(var n in t)"ref"!==n&&(a[n]=t[n]);return e.refProperties.forEach((function(e){e in i&&(a[e]=i[e])})),a}function ne(e){e=e.slice();for(var t=Object.create(null),i=0;i<e.length;i++)t[e[i].id]=e[i];for(var a=0;a<e.length;a++)"ref"in e[a]&&(e[a]=ae(e[a],t[e[a].ref]));return e}ee.workerCount=Math.max(Math.min(te,6),1);var re={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function oe(e,t,i){i.push({command:re.addSource,args:[e,t[e]]})}function se(e,t,i){t.push({command:re.removeSource,args:[e]}),i[e]=!0}function le(e,t,i,a){se(e,i,a),oe(e,t,i)}function ce(e,t,i){var a;for(a in e[i])if(Object.prototype.hasOwnProperty.call(e[i],a)&&"data"!==a&&!c(e[i][a],t[i][a]))return!1;for(a in t[i])if(Object.prototype.hasOwnProperty.call(t[i],a)&&"data"!==a&&!c(e[i][a],t[i][a]))return!1;return!0}function ue(e,t,i,a,n,r){var o;for(o in t=t||{},e=e||{})Object.prototype.hasOwnProperty.call(e,o)&&(c(e[o],t[o])||i.push({command:r,args:[a,o,t[o],n]}));for(o in t)Object.prototype.hasOwnProperty.call(t,o)&&!Object.prototype.hasOwnProperty.call(e,o)&&(c(e[o],t[o])||i.push({command:r,args:[a,o,t[o],n]}))}function he(e){return e.id}function de(e,t){return e[t.id]=t,e}var fe=function(){function t(e,i){p(this,t),this.reset(e,i)}return f(t,[{key:"reset",value:function(e,t){this.points=e||[],this._distances=[0];for(var i=1;i<this.points.length;i++)this._distances[i]=this._distances[i-1]+this.points[i].dist(this.points[i-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding}},{key:"lerp",value:function(t){if(1===this.points.length)return this.points[0];t=e.clamp(t,0,1);for(var i=1,a=this._distances[i],n=t*this.paddedLength+this.padding;a<n&&i<this._distances.length;)a=this._distances[++i];var r=i-1,o=this._distances[r],s=a-o,l=s>0?(n-o)/s:0;return this.points[r].mult(1-l).add(this.points[i].mult(l))}}]),t}();function pe(e,t){var i=!0;return"always"===e||"never"!==e&&"never"!==t||(i=!1),i}var me=function(){function e(t,i,a){p(this,e);var n=this.boxCells=[],r=this.circleCells=[];this.xCellCount=Math.ceil(t/a),this.yCellCount=Math.ceil(i/a);for(var o=0;o<this.xCellCount*this.yCellCount;o++)n.push([]),r.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=i,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/i,this.boxUid=0,this.circleUid=0}return f(e,[{key:"keysLength",value:function(){return this.boxKeys.length+this.circleKeys.length}},{key:"insert",value:function(e,t,i,a,n){this._forEachCell(t,i,a,n,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(i),this.bboxes.push(a),this.bboxes.push(n)}},{key:"insertCircle",value:function(e,t,i,a){this._forEachCell(t-a,i-a,t+a,i+a,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(i),this.circles.push(a)}},{key:"_insertBoxCell",value:function(e,t,i,a,n,r){this.boxCells[n].push(r)}},{key:"_insertCircleCell",value:function(e,t,i,a,n,r){this.circleCells[n].push(r)}},{key:"_query",value:function(e,t,i,a,n,r,o){if(i<0||e>this.width||a<0||t>this.height)return[];var s=[];if(e<=0&&t<=0&&this.width<=i&&this.height<=a){if(n)return[{key:null,x1:e,y1:t,x2:i,y2:a}];for(var l=0;l<this.boxKeys.length;l++)s.push({key:this.boxKeys[l],x1:this.bboxes[4*l],y1:this.bboxes[4*l+1],x2:this.bboxes[4*l+2],y2:this.bboxes[4*l+3]});for(var c=0;c<this.circleKeys.length;c++){var u=this.circles[3*c],h=this.circles[3*c+1],d=this.circles[3*c+2];s.push({key:this.circleKeys[c],x1:u-d,y1:h-d,x2:u+d,y2:h+d})}}else this._forEachCell(e,t,i,a,this._queryCell,s,{hitTest:n,overlapMode:r,seenUids:{box:{},circle:{}}},o);return s}},{key:"query",value:function(e,t,i,a){return this._query(e,t,i,a,!1,null)}},{key:"hitTest",value:function(e,t,i,a,n,r){return this._query(e,t,i,a,!0,n,r).length>0}},{key:"hitTestCircle",value:function(e,t,i,a,n){var r=e-i,o=e+i,s=t-i,l=t+i;if(o<0||r>this.width||l<0||s>this.height)return!1;var c=[];return this._forEachCell(r,s,o,l,this._queryCellCircle,c,{hitTest:!0,overlapMode:a,circle:{x:e,y:t,radius:i},seenUids:{box:{},circle:{}}},n),c.length>0}},{key:"_queryCell",value:function(e,t,i,a,n,r,o,s){var l=o.seenUids,c=o.hitTest,u=o.overlapMode,h=this.boxCells[n];if(null!==h){var f,p=this.bboxes,m=d(h);try{for(m.s();!(f=m.n()).done;){var g=f.value;if(!l.box[g]){l.box[g]=!0;var v=4*g,y=this.boxKeys[g];if(e<=p[v+2]&&t<=p[v+3]&&i>=p[v+0]&&a>=p[v+1]&&(!s||s(y))&&(!c||!pe(u,y.overlapMode))&&(r.push({key:y,x1:p[v],y1:p[v+1],x2:p[v+2],y2:p[v+3]}),c))return!0}}}catch(M){m.e(M)}finally{m.f()}}var x=this.circleCells[n];if(null!==x){var b,_=this.circles,w=d(x);try{for(w.s();!(b=w.n()).done;){var k=b.value;if(!l.circle[k]){l.circle[k]=!0;var S=3*k,C=this.circleKeys[k];if(this._circleAndRectCollide(_[S],_[S+1],_[S+2],e,t,i,a)&&(!s||s(C))&&(!c||!pe(u,C.overlapMode))){var A=_[S],O=_[S+1],T=_[S+2];if(r.push({key:C,x1:A-T,y1:O-T,x2:A+T,y2:O+T}),c)return!0}}}}catch(M){w.e(M)}finally{w.f()}}return!1}},{key:"_queryCellCircle",value:function(e,t,i,a,n,r,o,s){var l=o.circle,c=o.seenUids,u=o.overlapMode,h=this.boxCells[n];if(null!==h){var f,p=this.bboxes,m=d(h);try{for(m.s();!(f=m.n()).done;){var g=f.value;if(!c.box[g]){c.box[g]=!0;var v=4*g,y=this.boxKeys[g];if(this._circleAndRectCollide(l.x,l.y,l.radius,p[v+0],p[v+1],p[v+2],p[v+3])&&(!s||s(y))&&!pe(u,y.overlapMode))return r.push(!0),!0}}}catch(A){m.e(A)}finally{m.f()}}var x=this.circleCells[n];if(null!==x){var b,_=this.circles,w=d(x);try{for(w.s();!(b=w.n()).done;){var k=b.value;if(!c.circle[k]){c.circle[k]=!0;var S=3*k,C=this.circleKeys[k];if(this._circlesCollide(_[S],_[S+1],_[S+2],l.x,l.y,l.radius)&&(!s||s(C))&&!pe(u,C.overlapMode))return r.push(!0),!0}}}catch(A){w.e(A)}finally{w.f()}}}},{key:"_forEachCell",value:function(e,t,i,a,n,r,o,s){for(var l=this._convertToXCellCoord(e),c=this._convertToYCellCoord(t),u=this._convertToXCellCoord(i),h=this._convertToYCellCoord(a),d=l;d<=u;d++)for(var f=c;f<=h;f++)if(n.call(this,e,t,i,a,this.xCellCount*f+d,r,o,s))return}},{key:"_convertToXCellCoord",value:function(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}},{key:"_convertToYCellCoord",value:function(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}},{key:"_circlesCollide",value:function(e,t,i,a,n,r){var o=a-e,s=n-t,l=i+r;return l*l>o*o+s*s}},{key:"_circleAndRectCollide",value:function(e,t,i,a,n,r,o){var s=(r-a)/2,l=Math.abs(e-(a+s));if(l>s+i)return!1;var c=(o-n)/2,u=Math.abs(t-(n+c));if(u>c+i)return!1;if(l<=s||u<=c)return!0;var h=l-s,d=u-c;return h*h+d*d<=i*i}}]),e}();function ge(t,i,a,n,r){var o=e.create();return i?(e.scale(o,o,[1/r,1/r,1]),a||e.rotateZ(o,o,n.angle)):e.multiply(o,n.labelPlaneMatrix,t),o}function ve(t,i,a,n,r){if(i){var o=e.clone(t);return e.scale(o,o,[r,r,1]),a||e.rotateZ(o,o,-n.angle),o}return n.glCoordMatrix}function ye(t,i,a){var n;a?(n=[t.x,t.y,a(t.x,t.y),1],e.transformMat4(n,n,i)):Te(n=[t.x,t.y,0,1],n,i);var r=n[3];return{point:new e.pointGeometry(n[0]/r,n[1]/r),signedDistanceFromCamera:r}}function xe(e,t){return.5+e/t*.5}function be(e,t){var i=e[0]/e[3],a=e[1]/e[3];return i>=-t[0]&&i<=t[0]&&a>=-t[1]&&a<=t[1]}function _e(e,t,i,a,n,r,o,s,l,c,u,h,d){var f=s.glyphStartIndex+s.numGlyphs,p=s.lineStartIndex,m=s.lineStartIndex+s.lineLength,g=t.getoffsetX(s.glyphStartIndex),v=t.getoffsetX(f-1),y=Ce(e*g,i,a,n,r,o,s.segment,p,m,l,c,u,h,d);if(!y)return null;var x=Ce(e*v,i,a,n,r,o,s.segment,p,m,l,c,u,h,d);return x?{first:y,last:x}:null}function we(t,i,a,n){return t===e.WritingMode.horizontal&&Math.abs(a.y-i.y)>Math.abs(a.x-i.x)*n?{useVertical:!0}:(t===e.WritingMode.vertical?i.y<a.y:i.x>a.x)?{needsFlipping:!0}:null}function ke(t,i,a,n,r,o,s,l,c,u,h,f,p,m,g,v){var y,x=i/24,b=t.lineOffsetX*x,_=t.lineOffsetY*x;if(t.numGlyphs>1){var w=t.glyphStartIndex+t.numGlyphs,k=t.lineStartIndex,S=t.lineStartIndex+t.lineLength,C=_e(x,l,b,_,a,h,f,t,c,o,p,g,v);if(!C)return{notEnoughRoom:!0};var A=ye(C.first.point,s,v).point,O=ye(C.last.point,s,v).point;if(n&&!a){var T=we(t.writingMode,A,O,m);if(T)return T}y=[C.first];for(var M=t.glyphStartIndex+1;M<w-1;M++)y.push(Ce(x*l.getoffsetX(M),b,_,a,h,f,t.segment,k,S,c,o,p,g,v));y.push(C.last)}else{if(n&&!a){var E=ye(f,r,v).point,I=t.lineStartIndex+t.segment+1,P=new e.pointGeometry(c.getx(I),c.gety(I)),D=ye(P,r,v),z=D.signedDistanceFromCamera>0?D.point:Se(f,P,E,1,r,v),L=we(t.writingMode,E,z,m);if(L)return L}var j=Ce(x*l.getoffsetX(t.glyphStartIndex),b,_,a,h,f,t.segment,t.lineStartIndex,t.lineStartIndex+t.lineLength,c,o,p,g,v);if(!j)return{notEnoughRoom:!0};y=[j]}var R,F=d(y);try{for(F.s();!(R=F.n()).done;){var B=R.value;e.addDynamicAttributes(u,B.point,B.angle)}}catch(N){F.e(N)}finally{F.f()}return{}}function Se(e,t,i,a,n,r){var o=ye(e.add(e.sub(t)._unit()),n,r).point,s=i.sub(o);return i.add(s._mult(a/s.mag()))}function Ce(t,i,a,n,r,o,s,l,c,u,h,d,f,p){var m=n?t-i:t+i,g=m>0?1:-1,v=0;n&&(g*=-1,v=Math.PI),g<0&&(v+=Math.PI);for(var y=g>0?l+s:l+s+1,x=r,b=r,_=0,w=0,k=Math.abs(m),S=[];_+w<=k;){if((y+=g)<l||y>=c)return null;if(b=x,S.push(x),void 0===(x=d[y])){var C=new e.pointGeometry(u.getx(y),u.gety(y)),A=ye(C,h,p);if(A.signedDistanceFromCamera>0)x=d[y]=A.point;else{var O=y-g;x=Se(0===_?o:new e.pointGeometry(u.getx(O),u.gety(O)),C,b,k-_+1,h,p)}}_+=w,w=b.dist(x)}var T=(k-_)/w,M=x.sub(b),E=M.mult(T)._add(b);E._add(M._unit()._perp()._mult(a*g));var I=v+Math.atan2(x.y-b.y,x.x-b.x);return S.push(E),{point:E,angle:f?I:0,path:S}}var Ae=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Oe(e,t){for(var i=0;i<e;i++){var a=t.length;t.resize(a+4),t.float32.set(Ae,3*a)}}function Te(e,t,i){var a=t[0],n=t[1];return e[0]=i[0]*a+i[4]*n+i[12],e[1]=i[1]*a+i[5]*n+i[13],e[3]=i[3]*a+i[7]*n+i[15],e}var Me=100,Ee=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new me(e.width+200,e.height+200,25),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new me(e.width+200,e.height+200,25);p(this,t),this.transform=e,this.grid=i,this.ignoredGrid=a,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+Me,this.screenBottomBoundary=e.height+Me,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.perspectiveRatioCutoff=.6}return f(t,[{key:"placeCollisionBox",value:function(e,t,i,a,n,r){var o=this.projectAndGetPerspectiveRatio(a,e.anchorPointX,e.anchorPointY,r),s=i*o.perspectiveRatio,l=e.x1*s+o.point.x,c=e.y1*s+o.point.y,u=e.x2*s+o.point.x,h=e.y2*s+o.point.y;return!this.isInsideGrid(l,c,u,h)||"always"!==t&&this.grid.hitTest(l,c,u,h,t,n)||o.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[l,c,u,h],offscreen:this.isOffscreen(l,c,u,h)}}},{key:"placeCollisionCircles",value:function(t,i,a,n,r,o,s,l,c,u,h,f,p,m){var g=[],v=new e.pointGeometry(i.anchorX,i.anchorY),y=ye(v,o,m),x=xe(this.transform.cameraToCenterDistance,y.signedDistanceFromCamera),b=(u?r/x:r*x)/e.ONE_EM,_=ye(v,s,m).point,w=_e(b,n,i.lineOffsetX*b,i.lineOffsetY*b,!1,_,v,i,a,s,{},!1,m),k=!1,S=!1,C=!0;if(w){for(var A=.5*f*x+p,O=new e.pointGeometry(-100,-100),T=new e.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),M=new fe,E=w.first,I=w.last,P=[],D=E.path.length-1;D>=1;D--)P.push(E.path[D]);for(var z=1;z<I.path.length;z++)P.push(I.path[z]);var L=2.5*A;if(l){var j=P.map((function(e){return ye(e,l,m)}));P=j.some((function(e){return e.signedDistanceFromCamera<=0}))?[]:j.map((function(e){return e.point}))}var R=[];if(P.length>0){for(var F=P[0].clone(),B=P[0].clone(),N=1;N<P.length;N++)F.x=Math.min(F.x,P[N].x),F.y=Math.min(F.y,P[N].y),B.x=Math.max(B.x,P[N].x),B.y=Math.max(B.y,P[N].y);R=F.x>=O.x&&B.x<=T.x&&F.y>=O.y&&B.y<=T.y?[P]:B.x<O.x||F.x>T.x||B.y<O.y||F.y>T.y?[]:e.clipLine([P],O.x,O.y,T.x,T.y)}var V,Y=d(R);try{for(Y.s();!(V=Y.n()).done;){var W,H=V.value;M.reset(H,.25*A),W=M.length<=.5*A?1:Math.ceil(M.paddedLength/L)+1;for(var U=0;U<W;U++){var X=U/Math.max(W-1,1),G=M.lerp(X),q=G.x+Me,Z=G.y+Me;g.push(q,Z,A,0);var K=q-A,J=Z-A,Q=q+A,$=Z+A;if(C=C&&this.isOffscreen(K,J,Q,$),S=S||this.isInsideGrid(K,J,Q,$),"always"!==t&&this.grid.hitTestCircle(q,Z,A,t,h)&&(k=!0,!c))return{circles:[],offscreen:!1,collisionDetected:k}}}}catch(ee){Y.e(ee)}finally{Y.f()}}return{circles:!c&&k||!S||x<this.perspectiveRatioCutoff?[]:g,offscreen:C,collisionDetected:k}}},{key:"queryRenderedSymbols",value:function(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};var i,a=[],n=1/0,r=1/0,o=-1/0,s=-1/0,l=d(t);try{for(l.s();!(i=l.n()).done;){var c=i.value,u=new e.pointGeometry(c.x+Me,c.y+Me);n=Math.min(n,u.x),r=Math.min(r,u.y),o=Math.max(o,u.x),s=Math.max(s,u.y),a.push(u)}}catch(b){l.e(b)}finally{l.f()}var h,f=this.grid.query(n,r,o,s).concat(this.ignoredGrid.query(n,r,o,s)),p={},m={},g=d(f);try{for(g.s();!(h=g.n()).done;){var v=h.value,y=v.key;if(void 0===p[y.bucketInstanceId]&&(p[y.bucketInstanceId]={}),!p[y.bucketInstanceId][y.featureIndex]){var x=[new e.pointGeometry(v.x1,v.y1),new e.pointGeometry(v.x2,v.y1),new e.pointGeometry(v.x2,v.y2),new e.pointGeometry(v.x1,v.y2)];e.polygonIntersectsPolygon(a,x)&&(p[y.bucketInstanceId][y.featureIndex]=!0,void 0===m[y.bucketInstanceId]&&(m[y.bucketInstanceId]=[]),m[y.bucketInstanceId].push(y.featureIndex))}}}catch(b){g.e(b)}finally{g.f()}return m}},{key:"insertCollisionBox",value:function(e,t,i,a,n,r){(i?this.ignoredGrid:this.grid).insert({bucketInstanceId:a,featureIndex:n,collisionGroupID:r,overlapMode:t},e[0],e[1],e[2],e[3])}},{key:"insertCollisionCircles",value:function(e,t,i,a,n,r){for(var o=i?this.ignoredGrid:this.grid,s={bucketInstanceId:a,featureIndex:n,collisionGroupID:r,overlapMode:t},l=0;l<e.length;l+=4)o.insertCircle(s,e[l],e[l+1],e[l+2])}},{key:"projectAndGetPerspectiveRatio",value:function(t,i,a,n){var r;return n?(r=[i,a,n(i,a),1],e.transformMat4(r,r,t)):Te(r=[i,a,0,1],r,t),{point:new e.pointGeometry((r[0]/r[3]+1)/2*this.transform.width+Me,(-r[1]/r[3]+1)/2*this.transform.height+Me),perspectiveRatio:.5+this.transform.cameraToCenterDistance/r[3]*.5}}},{key:"isOffscreen",value:function(e,t,i,a){return i<Me||e>=this.screenRightBoundary||a<Me||t>this.screenBottomBoundary}},{key:"isInsideGrid",value:function(e,t,i,a){return i>=0&&e<this.gridRightBoundary&&a>=0&&t<this.gridBottomBoundary}},{key:"getViewportMatrix",value:function(){var t=e.identity([]);return e.translate(t,t,[-100,-100,0]),t}}]),t}();function Ie(t,i,a){return i*(e.EXTENT/(t.tileSize*Math.pow(2,a-t.tileID.overscaledZ)))}var Pe=function(){function e(t,i,a,n){p(this,e),this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?i:-i))):n&&a?1:0,this.placed=a}return f(e,[{key:"isHidden",value:function(){return 0===this.opacity&&!this.placed}}]),e}(),De=function(){function e(t,i,a,n,r){p(this,e),this.text=new Pe(t?t.text:null,i,a,r),this.icon=new Pe(t?t.icon:null,i,n,r)}return f(e,[{key:"isHidden",value:function(){return this.text.isHidden()&&this.icon.isHidden()}}]),e}(),ze=f((function e(t,i,a){p(this,e),this.text=t,this.icon=i,this.skipFade=a})),Le=f((function t(){p(this,t),this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]})),je=f((function e(t,i,a,n,r){p(this,e),this.bucketInstanceId=t,this.featureIndex=i,this.sourceLayerIndex=a,this.bucketIndex=n,this.tileID=r})),Re=function(){function e(t){p(this,e),this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}return f(e,[{key:"get",value:function(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){var t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:function(e){return e.collisionGroupID===t}}}return this.collisionGroups[e]}}]),e}();function Fe(t,i,a,n,r){var o=e.getAnchorAlignment(t),s=-(o.horizontalAlign-.5)*i,l=-(o.verticalAlign-.5)*a,c=e.evaluateVariableOffset(t,n);return new e.pointGeometry(s+c[0]*r,l+c[1]*r)}function Be(t,i,a,n,r,o){var s=t.x1,l=t.x2,c=t.y1,u=t.y2,h=t.anchorPointX,d=t.anchorPointY,f=new e.pointGeometry(i,a);return n&&f._rotate(r?o:-o),{x1:s+f.x,y1:c+f.y,x2:l+f.x,y2:u+f.y,anchorPointX:h,anchorPointY:d}}var Ne=function(){function t(e,i,a,n,r){p(this,t),this.transform=e.clone(),this.terrain=i,this.collisionIndex=new Ee(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=a,this.retainedQueryData={},this.collisionGroups=new Re(n),this.collisionCircleArrays={},this.prevPlacement=r,r&&(r.prevPlacement=void 0),this.placedOrientations={}}return f(t,[{key:"getBucketParts",value:function(t,i,a,n){var r=a.getBucket(i),o=a.latestFeatureIndex;if(r&&o&&i.id===r.layerIds[0]){var s=a.collisionBoxArray,l=r.layers[0].layout,c=Math.pow(2,this.transform.zoom-a.tileID.overscaledZ),u=a.tileSize/e.EXTENT,h=this.transform.calculatePosMatrix(a.tileID.toUnwrapped()),f="map"===l.get("text-pitch-alignment"),p="map"===l.get("text-rotation-alignment"),m=Ie(a,1,this.transform.zoom),g=ge(h,f,p,this.transform,m),v=null;if(f){var y=ve(h,f,p,this.transform,m);v=e.multiply([],this.transform.labelPlaneMatrix,y)}this.retainedQueryData[r.bucketInstanceId]=new je(r.bucketInstanceId,o,r.sourceLayerIndex,r.index,a.tileID);var x={bucket:r,layout:l,posMatrix:h,textLabelPlaneMatrix:g,labelToScreenMatrix:v,scale:c,textPixelRatio:u,holdingForFade:a.holdingForFade(),collisionBoxArray:s,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(r.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(r.sourceID)};if(n){var b,_=d(r.sortKeyRanges);try{for(_.s();!(b=_.n()).done;){var w=b.value,k=w.sortKey,S=w.symbolInstanceStart,C=w.symbolInstanceEnd;t.push({sortKey:k,symbolInstanceStart:S,symbolInstanceEnd:C,parameters:x})}}catch(A){_.e(A)}finally{_.f()}}else t.push({symbolInstanceStart:0,symbolInstanceEnd:r.symbolInstances.length,parameters:x})}}},{key:"attemptAnchorPlacement",value:function(e,t,i,a,n,r,o,s,l,c,u,h,d,f,p,m){var g=[h.textOffset0,h.textOffset1],v=Fe(e,i,a,g,n),y=this.collisionIndex.placeCollisionBox(Be(t,v.x,v.y,r,o,this.transform.angle),u,s,l,c.predicate,m);if((!p||0!==this.collisionIndex.placeCollisionBox(Be(p,v.x,v.y,r,o,this.transform.angle),u,s,l,c.predicate,m).box.length)&&y.box.length>0){var x;if(this.prevPlacement&&this.prevPlacement.variableOffsets[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID].text&&(x=this.prevPlacement.variableOffsets[h.crossTileID].anchor),0===h.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[h.crossTileID]={textOffset:g,width:i,height:a,anchor:e,textBoxScale:n,prevAnchor:x},this.markUsedJustification(d,e,h,f),d.allowVerticalPlacement&&(this.markUsedOrientation(d,f,h),this.placedOrientations[h.crossTileID]=f),{shift:v,placedGlyphBoxes:y}}}},{key:"placeLayerBucketPart",value:function(t,i,a){var n=this,r=t.parameters,o=r.bucket,s=r.layout,l=r.posMatrix,c=r.textLabelPlaneMatrix,u=r.labelToScreenMatrix,h=r.textPixelRatio,f=r.holdingForFade,p=r.collisionBoxArray,m=r.partiallyEvaluatedTextSize,g=r.collisionGroup,v=s.get("text-optional"),y=s.get("icon-optional"),x=e.getOverlapMode(s,"text-overlap","text-allow-overlap"),b="always"===x,_=e.getOverlapMode(s,"icon-overlap","icon-allow-overlap"),w="always"===_,k="map"===s.get("text-rotation-alignment"),S="map"===s.get("text-pitch-alignment"),C="none"!==s.get("icon-text-fit"),A="viewport-y"===s.get("symbol-z-order"),O=b&&(w||!o.hasIconData()||y),T=w&&(b||!o.hasTextData()||v);!o.collisionArrays&&p&&o.deserializeCollisionBoxes(p);var M=function(t,r){if(!i[t.crossTileID])if(f)n.placements[t.crossTileID]=new ze(!1,!1,!1);else{var p,w=!1,A=!1,M=!0,E=null,I={box:null,offscreen:null},P={box:null,offscreen:null},D=null,z=null,L=0,j=0,R=0;r.textFeatureIndex?L=r.textFeatureIndex:t.useRuntimeCollisionCircles&&(L=t.featureIndex),r.verticalTextFeatureIndex&&(j=r.verticalTextFeatureIndex);for(var F=n.retainedQueryData[o.bucketInstanceId].tileID,B=n.terrain?function(e,t){return n.terrain.getElevation(F,e,t)}:null,N=0,V=["textBox","verticalTextBox","iconBox","verticalIconBox"];N<V.length;N++){var Y=r[V[N]];Y&&(Y.elevation=B?B(Y.anchorPointX,Y.anchorPointY):0)}var W=r.textBox;if(W){var H=function(i){var a=e.WritingMode.horizontal;if(o.allowVerticalPlacement&&!i&&n.prevPlacement){var r=n.prevPlacement.placedOrientations[t.crossTileID];r&&(n.placedOrientations[t.crossTileID]=r,a=r,n.markUsedOrientation(o,a,t))}return a},U=function(i,a){if(o.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&r.verticalTextBox){var n,s=d(o.writingModes);try{for(s.s();!(n=s.n()).done&&(n.value===e.WritingMode.vertical?(I=a(),P=I):I=i(),!(I&&I.box&&I.box.length)););}catch(l){s.e(l)}finally{s.f()}}else I=i()};if(s.get("text-variable-anchor")){var X=s.get("text-variable-anchor");if(n.prevPlacement&&n.prevPlacement.variableOffsets[t.crossTileID]){var G=n.prevPlacement.variableOffsets[t.crossTileID];X.indexOf(G.anchor)>0&&(X=X.filter((function(e){return e!==G.anchor}))).unshift(G.anchor)}var q=function(e,i,a){for(var r=e.x2-e.x1,s=e.y2-e.y1,c=t.textBoxScale,u=C&&"never"===_?i:null,d={box:[],offscreen:!1},f="never"!==x?2*X.length:X.length,p=0;p<f;++p){var m=n.attemptAnchorPlacement(X[p%X.length],e,r,s,c,k,S,h,l,g,p>=X.length?x:"never",t,o,a,u,B);if(m&&(d=m.placedGlyphBoxes)&&d.box&&d.box.length){w=!0,E=m.shift;break}}return d};U((function(){return q(W,r.iconBox,e.WritingMode.horizontal)}),(function(){var i=r.verticalTextBox;return o.allowVerticalPlacement&&!(I&&I.box&&I.box.length)&&t.numVerticalGlyphVertices>0&&i?q(i,r.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null}})),I&&(w=I.box,M=I.offscreen);var Z=H(I&&I.box);if(!w&&n.prevPlacement){var K=n.prevPlacement.variableOffsets[t.crossTileID];K&&(n.variableOffsets[t.crossTileID]=K,n.markUsedJustification(o,K.anchor,t,Z))}}else{var J=function(e,i){var a=n.collisionIndex.placeCollisionBox(e,x,h,l,g.predicate,B);return a&&a.box&&a.box.length&&(n.markUsedOrientation(o,i,t),n.placedOrientations[t.crossTileID]=i),a};U((function(){return J(W,e.WritingMode.horizontal)}),(function(){var i=r.verticalTextBox;return o.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&i?J(i,e.WritingMode.vertical):{box:null,offscreen:null}})),H(I&&I.box&&I.box.length)}}if(w=(p=I)&&p.box&&p.box.length>0,M=p&&p.offscreen,t.useRuntimeCollisionCircles){var Q=o.text.placedSymbolArray.get(t.centerJustifiedTextSymbolIndex),$=e.evaluateSizeForFeature(o.textSizeData,m,Q),ee=s.get("text-padding");(D=n.collisionIndex.placeCollisionCircles(x,Q,o.lineVertexArray,o.glyphOffsetArray,$,l,c,u,a,S,g.predicate,t.collisionCircleDiameter,ee,B)).circles.length&&D.collisionDetected&&!a&&e.warnOnce("Collisions detected, but collision boxes are not shown"),w=b||D.circles.length>0&&!D.collisionDetected,M=M&&D.offscreen}if(r.iconFeatureIndex&&(R=r.iconFeatureIndex),r.iconBox){var te=function(e){var t=C&&E?Be(e,E.x,E.y,k,S,n.transform.angle):e;return n.collisionIndex.placeCollisionBox(t,_,h,l,g.predicate,B)};A=P&&P.box&&P.box.length&&r.verticalIconBox?(z=te(r.verticalIconBox)).box.length>0:(z=te(r.iconBox)).box.length>0,M=M&&z.offscreen}var ie=v||0===t.numHorizontalGlyphVertices&&0===t.numVerticalGlyphVertices,ae=y||0===t.numIconVertices;if(ie||ae?ae?ie||(A=A&&w):w=A&&w:A=w=A&&w,w&&p&&p.box&&n.collisionIndex.insertCollisionBox(p.box,x,s.get("text-ignore-placement"),o.bucketInstanceId,P&&P.box&&j?j:L,g.ID),A&&z&&n.collisionIndex.insertCollisionBox(z.box,_,s.get("icon-ignore-placement"),o.bucketInstanceId,R,g.ID),D&&(w&&n.collisionIndex.insertCollisionCircles(D.circles,x,s.get("text-ignore-placement"),o.bucketInstanceId,L,g.ID),a)){var ne=o.bucketInstanceId,re=n.collisionCircleArrays[ne];void 0===re&&(re=n.collisionCircleArrays[ne]=new Le);for(var oe=0;oe<D.circles.length;oe+=4)re.circles.push(D.circles[oe+0]),re.circles.push(D.circles[oe+1]),re.circles.push(D.circles[oe+2]),re.circles.push(D.collisionDetected?1:0)}if(0===t.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");if(0===o.bucketInstanceId)throw new Error("bucket.bucketInstanceId can't be 0");n.placements[t.crossTileID]=new ze(w||O,A||T,M||o.justReloaded),i[t.crossTileID]=!0}};if(A){if(0!==t.symbolInstanceStart)throw new Error("bucket.bucketInstanceId should be 0");for(var E=o.getSortedSymbolIndexes(this.transform.angle),I=E.length-1;I>=0;--I){var P=E[I];M(o.symbolInstances.get(P),o.collisionArrays[P])}}else for(var D=t.symbolInstanceStart;D<t.symbolInstanceEnd;D++)M(o.symbolInstances.get(D),o.collisionArrays[D]);if(a&&o.bucketInstanceId in this.collisionCircleArrays){var z=this.collisionCircleArrays[o.bucketInstanceId];e.invert(z.invProjMatrix,l),z.viewportMatrix=this.collisionIndex.getViewportMatrix()}o.justReloaded=!1}},{key:"markUsedJustification",value:function(t,i,a,n){var r;r=n===e.WritingMode.vertical?a.verticalPlacedTextSymbolIndex:{left:a.leftJustifiedTextSymbolIndex,center:a.centerJustifiedTextSymbolIndex,right:a.rightJustifiedTextSymbolIndex}[e.getAnchorJustification(i)];for(var o=0,s=[a.leftJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.rightJustifiedTextSymbolIndex,a.verticalPlacedTextSymbolIndex];o<s.length;o++){var l=s[o];l>=0&&(t.text.placedSymbolArray.get(l).crossTileID=r>=0&&l!==r?0:a.crossTileID)}}},{key:"markUsedOrientation",value:function(t,i,a){for(var n=i===e.WritingMode.horizontal||i===e.WritingMode.horizontalOnly?i:0,r=i===e.WritingMode.vertical?i:0,o=0,s=[a.leftJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.rightJustifiedTextSymbolIndex];o<s.length;o++){var l=s[o];t.text.placedSymbolArray.get(l).placedOrientation=n}a.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(a.verticalPlacedTextSymbolIndex).placedOrientation=r)}},{key:"commit",value:function(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;var t=this.prevPlacement,i=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;var a=t?t.symbolFadeChange(e):1,n=t?t.opacities:{},r=t?t.variableOffsets:{},o=t?t.placedOrientations:{};for(var s in this.placements){var l=this.placements[s],c=n[s];c?(this.opacities[s]=new De(c,a,l.text,l.icon),i=i||l.text!==c.text.placed||l.icon!==c.icon.placed):(this.opacities[s]=new De(null,a,l.text,l.icon,l.skipFade),i=i||l.text||l.icon)}for(var u in n){var h=n[u];if(!this.opacities[u]){var d=new De(h,a,!1,!1);d.isHidden()||(this.opacities[u]=d,i=i||h.text.placed||h.icon.placed)}}for(var f in r)this.variableOffsets[f]||!this.opacities[f]||this.opacities[f].isHidden()||(this.variableOffsets[f]=r[f]);for(var p in o)this.placedOrientations[p]||!this.opacities[p]||this.opacities[p].isHidden()||(this.placedOrientations[p]=o[p]);if(t&&void 0===t.lastPlacementChangeTime)throw new Error("Last placement time for previous placement is not defined");i?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)}},{key:"updateLayerOpacities",value:function(e,t){var i,a={},n=d(t);try{for(n.s();!(i=n.n()).done;){var r=i.value,o=r.getBucket(e);o&&r.latestFeatureIndex&&e.id===o.layerIds[0]&&this.updateBucketOpacities(o,a,r.collisionBoxArray)}}catch(s){n.e(s)}finally{n.f()}}},{key:"updateBucketOpacities",value:function(t,i,a){var n=this;t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();var r=t.layers[0].layout,o=new De(null,0,!1,!1,!0),s=r.get("text-allow-overlap"),l=r.get("icon-allow-overlap"),c=r.get("text-variable-anchor"),u="map"===r.get("text-rotation-alignment"),h="map"===r.get("text-pitch-alignment"),d="none"!==r.get("icon-text-fit"),f=new De(null,0,s&&(l||!t.hasIconData()||r.get("icon-optional")),l&&(s||!t.hasTextData()||r.get("text-optional")),!0);!t.collisionArrays&&a&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(a);for(var p=function(e,t,i){for(var a=0;a<t/4;a++)e.opacityVertexArray.emplaceBack(i)},m=function(a){var r=t.symbolInstances.get(a),s=r.numHorizontalGlyphVertices,l=r.numVerticalGlyphVertices,m=r.crossTileID,g=n.opacities[m];i[m]?g=o:g||(g=f,n.opacities[m]=g),i[m]=!0;var v=r.numIconVertices>0,y=n.placedOrientations[r.crossTileID],x=y===e.WritingMode.vertical,b=y===e.WritingMode.horizontal||y===e.WritingMode.horizontalOnly;if(s>0||l>0){var _=Ze(g.text);p(t.text,s,x?Ke:_),p(t.text,l,b?Ke:_);var w=g.text.isHidden();[r.rightJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.leftJustifiedTextSymbolIndex].forEach((function(e){e>=0&&(t.text.placedSymbolArray.get(e).hidden=w||x?1:0)})),r.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).hidden=w||b?1:0);var k=n.variableOffsets[r.crossTileID];k&&n.markUsedJustification(t,k.anchor,r,y);var S=n.placedOrientations[r.crossTileID];S&&(n.markUsedJustification(t,"left",r,S),n.markUsedOrientation(t,S,r))}if(v){var C=Ze(g.icon),A=!(d&&r.verticalPlacedIconSymbolIndex&&x);r.placedIconSymbolIndex>=0&&(p(t.icon,r.numIconVertices,A?C:Ke),t.icon.placedSymbolArray.get(r.placedIconSymbolIndex).hidden=g.icon.isHidden()),r.verticalPlacedIconSymbolIndex>=0&&(p(t.icon,r.numVerticalIconVertices,A?Ke:C),t.icon.placedSymbolArray.get(r.verticalPlacedIconSymbolIndex).hidden=g.icon.isHidden())}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){var O=t.collisionArrays[a];if(O){var T=new e.pointGeometry(0,0);if(O.textBox||O.verticalTextBox){var M=!0;if(c){var E=n.variableOffsets[m];E?(T=Fe(E.anchor,E.width,E.height,E.textOffset,E.textBoxScale),u&&T._rotate(h?n.transform.angle:-n.transform.angle)):M=!1}O.textBox&&Ve(t.textCollisionBox.collisionVertexArray,g.text.placed,!M||x,T.x,T.y),O.verticalTextBox&&Ve(t.textCollisionBox.collisionVertexArray,g.text.placed,!M||b,T.x,T.y)}var I=Boolean(!b&&O.verticalIconBox);O.iconBox&&Ve(t.iconCollisionBox.collisionVertexArray,g.icon.placed,I,d?T.x:0,d?T.y:0),O.verticalIconBox&&Ve(t.iconCollisionBox.collisionVertexArray,g.icon.placed,!I,d?T.x:0,d?T.y:0)}}},g=0;g<t.symbolInstances.length;g++)m(g);if(t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.text.opacityVertexArray.length!==t.text.layoutVertexArray.length/4)throw new Error("bucket.text.opacityVertexArray.length (= ".concat(t.text.opacityVertexArray.length,") !== bucket.text.layoutVertexArray.length (= ").concat(t.text.layoutVertexArray.length,") / 4"));if(t.icon.opacityVertexArray.length!==t.icon.layoutVertexArray.length/4)throw new Error("bucket.icon.opacityVertexArray.length (= ".concat(t.icon.opacityVertexArray.length,") !== bucket.icon.layoutVertexArray.length (= ").concat(t.icon.layoutVertexArray.length,") / 4"));if(t.bucketInstanceId in this.collisionCircleArrays){var v=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=v.invProjMatrix,t.placementViewportMatrix=v.viewportMatrix,t.collisionCircleArray=v.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}}},{key:"symbolFadeChange",value:function(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}},{key:"zoomAdjustment",value:function(e){return Math.max(0,(this.transform.zoom-e)/1.5)}},{key:"hasTransitions",value:function(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}},{key:"stillRecent",value:function(e,t){var i=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*i>e}},{key:"setStale",value:function(){this.stale=!0}}]),t}();function Ve(e,t,i,a,n){e.emplaceBack(t?1:0,i?1:0,a||0,n||0),e.emplaceBack(t?1:0,i?1:0,a||0,n||0),e.emplaceBack(t?1:0,i?1:0,a||0,n||0),e.emplaceBack(t?1:0,i?1:0,a||0,n||0)}var Ye=Math.pow(2,25),We=Math.pow(2,24),He=Math.pow(2,17),Ue=Math.pow(2,16),Xe=Math.pow(2,9),Ge=Math.pow(2,8),qe=Math.pow(2,1);function Ze(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;var t=e.placed?1:0,i=Math.floor(127*e.opacity);return i*Ye+t*We+i*He+t*Ue+i*Xe+t*Ge+i*qe+t}var Ke=0,Je=function(){function e(t){p(this,e),this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&!t.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}return f(e,[{key:"continuePlacement",value:function(e,t,i,a,n){for(var r=this._bucketParts;this._currentTileIndex<e.length;)if(t.getBucketParts(r,a,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,n())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,r.sort((function(e,t){return e.sortKey-t.sortKey})));this._currentPartIndex<r.length;)if(t.placeLayerBucketPart(r[this._currentPartIndex],this._seenCrossTileIDs,i),this._currentPartIndex++,n())return!0;return!1}}]),e}(),Qe=function(){function t(e,i,a,n,r,o,s,l){p(this,t),this.placement=new Ne(e,i,o,s,l),this._currentPlacementIndex=a.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=r,this._done=!1}return f(t,[{key:"isDone",value:function(){return this._done}},{key:"continuePlacement",value:function(t,i,a){for(var n=this,r=e.exported.now(),o=function(){var t=e.exported.now()-r;return!n._forceFullPlacement&&t>2};this._currentPlacementIndex>=0;){var s=i[t[this._currentPlacementIndex]],l=this.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=l)&&(!s.maxzoom||s.maxzoom>l)){if(this._inProgressLayer||(this._inProgressLayer=new Je(s)),this._inProgressLayer.continuePlacement(a[s.source],this.placement,this._showCollisionBoxes,s,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}},{key:"commit",value:function(e){return this.placement.commit(e),this.placement}}]),t}(),$e=512/e.EXTENT/2,et=function(){function t(e,i,a){p(this,t),this.tileID=e,this.indexedSymbolInstances={},this.bucketInstanceId=a;for(var n=0;n<i.length;n++){var r=i.get(n),o=r.key;this.indexedSymbolInstances[o]||(this.indexedSymbolInstances[o]=[]),this.indexedSymbolInstances[o].push({crossTileID:r.crossTileID,coord:this.getScaledCoordinates(r,e)})}}return f(t,[{key:"getScaledCoordinates",value:function(t,i){var a=$e/Math.pow(2,i.canonical.z-this.tileID.canonical.z);return{x:Math.floor((i.canonical.x*e.EXTENT+t.anchorX)*a),y:Math.floor((i.canonical.y*e.EXTENT+t.anchorY)*a)}}},{key:"findMatches",value:function(e,t,i){for(var a=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z),n=0;n<e.length;n++){var r=e.get(n);if(!r.crossTileID){var o=this.indexedSymbolInstances[r.key];if(o){var s,l=this.getScaledCoordinates(r,t),c=d(o);try{for(c.s();!(s=c.n()).done;){var u=s.value;if(Math.abs(u.coord.x-l.x)<=a&&Math.abs(u.coord.y-l.y)<=a&&!i[u.crossTileID]){i[u.crossTileID]=!0,r.crossTileID=u.crossTileID;break}}}catch(h){c.e(h)}finally{c.f()}}}}}}]),t}(),tt=function(){function e(){p(this,e),this.maxCrossTileID=0}return f(e,[{key:"generate",value:function(){return++this.maxCrossTileID}}]),e}(),it=function(){function e(){p(this,e),this.indexes={},this.usedCrossTileIDs={},this.lng=0}return f(e,[{key:"handleWrapJump",value:function(e){var t=Math.round((e-this.lng)/360);if(0!==t)for(var i in this.indexes){var a=this.indexes[i],n={};for(var r in a){var o=a[r];o.tileID=o.tileID.unwrapTo(o.tileID.wrap+t),n[o.tileID.key]=o}this.indexes[i]=n}this.lng=e}},{key:"addBucket",value:function(e,t,i){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(var a=0;a<t.symbolInstances.length;a++)t.symbolInstances.get(a).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});var n=this.usedCrossTileIDs[e.overscaledZ];for(var r in this.indexes){var o=this.indexes[r];if(Number(r)>e.overscaledZ)for(var s in o){var l=o[s];l.tileID.isChildOf(e)&&l.findMatches(t.symbolInstances,e,n)}else{var c=o[e.scaledTo(Number(r)).key];c&&c.findMatches(t.symbolInstances,e,n)}}for(var u=0;u<t.symbolInstances.length;u++){var h=t.symbolInstances.get(u);h.crossTileID||(h.crossTileID=i.generate(),n[h.crossTileID]=!0)}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new et(e,t.symbolInstances,t.bucketInstanceId),!0}},{key:"removeBucketCrossTileIDs",value:function(e,t){for(var i in t.indexedSymbolInstances){var a,n=d(t.indexedSymbolInstances[i]);try{for(n.s();!(a=n.n()).done;){var r=a.value;delete this.usedCrossTileIDs[e][r.crossTileID]}}catch(o){n.e(o)}finally{n.f()}}}},{key:"removeStaleBuckets",value:function(e){var t=!1;for(var i in this.indexes){var a=this.indexes[i];for(var n in a)e[a[n].bucketInstanceId]||(this.removeBucketCrossTileIDs(i,a[n]),delete a[n],t=!0)}return t}}]),e}(),at=function(){function e(){p(this,e),this.layerIndexes={},this.crossTileIDs=new tt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}return f(e,[{key:"addLayer",value:function(e,t,i){var a=this.layerIndexes[e.id];void 0===a&&(a=this.layerIndexes[e.id]=new it);var n=!1,r={};a.handleWrapJump(i);var o,s=d(t);try{for(s.s();!(o=s.n()).done;){var l=o.value,c=l.getBucket(e);c&&e.id===c.layerIds[0]&&(c.bucketInstanceId||(c.bucketInstanceId=++this.maxBucketInstanceId),a.addBucket(l.tileID,c,this.crossTileIDs)&&(n=!0),r[c.bucketInstanceId]=!0)}}catch(u){s.e(u)}finally{s.f()}return a.removeStaleBuckets(r)&&(n=!0),n}},{key:"pruneUnusedLayers",value:function(e){var t={};for(var i in e.forEach((function(e){t[e]=!0})),this.layerIndexes)t[i]||delete this.layerIndexes[i]}}]),e}(),nt=e.createLayout([{name:"a_pos",type:"Int16",components:2}]),rt=function(t){m(a,t);var i=g(a);function a(e){var t;return p(this,a),(t=i.call(this)).sourceCache=e,t._tiles={},t._renderableTilesKeys=[],t._sourceTileCache={},t.renderHistory=[],t.minzoom=0,t.maxzoom=22,t.tileSize=512,t.deltaZoom=1,t.renderHistorySize=e._cache.max,e.usedForTerrain=!0,e.tileSize=t.tileSize*Math.pow(2,t.deltaZoom),t}return f(a,[{key:"destruct",value:function(){for(var e in this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null,this._tiles){var t=this._tiles[e];t.textures.forEach((function(e){return e.destroy()})),t.textures=[]}}},{key:"update",value:function(t,i){this.sourceCache.update(t,i),this._renderableTilesKeys=[];var a,n=d(t.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:i}));try{for(n.s();!(a=n.n()).done;){var r=a.value;this._renderableTilesKeys.push(r.key),this._tiles[r.key]||(r.posMatrix=new Float64Array(16),e.ortho(r.posMatrix,0,e.EXTENT,0,e.EXTENT,0,1),this._tiles[r.key]=new X(r,this.tileSize))}}catch(o){n.e(o)}finally{n.f()}}},{key:"removeOutdated",value:function(e){var t=this,i={};this.renderHistory=this.renderHistory.filter((function(e,i){return t.renderHistory.indexOf(e)===i})).slice(0,this.renderHistorySize);var a,n=d(this._renderableTilesKeys);try{for(n.s();!(a=n.n()).done;)i[a.value]=!0}catch(l){n.e(l)}finally{n.f()}var r,o=d(this.renderHistory);try{for(o.s();!(r=o.n()).done;)i[r.value]=!0}catch(l){o.e(l)}finally{o.f()}for(var s in this._tiles)i[s]||(this._tiles[s].clearTextures(e),delete this._tiles[s])}},{key:"getRenderableTiles",value:function(){var e=this;return this._renderableTilesKeys.map((function(t){return e.getTileByID(t)}))}},{key:"getTileByID",value:function(e){return this._tiles[e]}},{key:"getTerrainCoords",value:function(t){var i,a={},n=d(this._renderableTilesKeys);try{for(n.s();!(i=n.n()).done;){var r=i.value,o=this._tiles[r].tileID;if(o.canonical.equals(t.canonical)){var s=t.clone();s.posMatrix=new Float64Array(16),e.ortho(s.posMatrix,0,e.EXTENT,0,e.EXTENT,0,1),a[r]=s}else if(o.canonical.isChildOf(t.canonical)){var l=t.clone();l.posMatrix=new Float64Array(16);var c=o.canonical.z-t.canonical.z,u=o.canonical.x-(o.canonical.x>>c<<c),h=o.canonical.y-(o.canonical.y>>c<<c),f=e.EXTENT>>c;e.ortho(l.posMatrix,0,f,0,f,0,1),e.translate(l.posMatrix,l.posMatrix,[-u*f,-h*f,0]),a[r]=l}else if(t.canonical.isChildOf(o.canonical)){var p=t.clone();p.posMatrix=new Float64Array(16);var m=t.canonical.z-o.canonical.z,g=t.canonical.x-(t.canonical.x>>m<<m),v=t.canonical.y-(t.canonical.y>>m<<m),y=e.EXTENT>>m;e.ortho(p.posMatrix,0,e.EXTENT,0,e.EXTENT,0,1),e.translate(p.posMatrix,p.posMatrix,[g*y,v*y,0]),e.scale(p.posMatrix,p.posMatrix,[1/Math.pow(2,m),1/Math.pow(2,m),0]),a[r]=p}}}catch(x){n.e(x)}finally{n.f()}return a}},{key:"getSourceTile",value:function(e,t){var i=this.sourceCache._source,a=e.overscaledZ-this.deltaZoom;if(a>i.maxzoom&&(a=i.maxzoom),a<i.minzoom)return null;this._sourceTileCache[e.key]||(this._sourceTileCache[e.key]=e.scaledTo(a).key);var n=this.sourceCache.getTileByID(this._sourceTileCache[e.key]);if((!n||!n.dem)&&t)for(;a>=i.minzoom&&(!n||!n.dem);)n=this.sourceCache.getTileByID(e.scaledTo(a--).key);return n}},{key:"tilesAfterTime",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return Object.values(this._tiles).filter((function(t){return t.timeLoaded>=e}))}}]),a}(e.Evented),ot=function(){function t(e,i,a){p(this,t),this.style=e,this.sourceCache=new rt(i),this.options=a,this.exaggeration="number"==typeof a.exaggeration?a.exaggeration:1,this.elevationOffset="number"==typeof a.elevationOffset?a.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}return f(t,[{key:"getDEMElevation",value:function(t,i,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.EXTENT;if(!(i>=0&&i<n&&a>=0&&a<n))return this.elevationOffset;var r=0,o=this.getTerrainData(t);if(o.tile&&o.tile.dem){var s=e.transformMat4$1([],[i/n*e.EXTENT,a/n*e.EXTENT],o.u_terrain_matrix),l=[s[0]*o.tile.dem.dim,s[1]*o.tile.dem.dim],c=[Math.floor(l[0]),Math.floor(l[1])],u=o.tile.dem.get(c[0],c[1]),h=o.tile.dem.get(c[0],c[1]+1),d=o.tile.dem.get(c[0]+1,c[1]),f=o.tile.dem.get(c[0]+1,c[1]+1);r=e.number(e.number(u,h,l[0]-c[0]),e.number(d,f,l[0]-c[0]),l[1]-c[1])}return r}},{key:"rememberForRerender",value:function(e,t){for(var i in this.sourceCache._tiles){var a=this.sourceCache._tiles[i];(a.tileID.equals(t)||a.tileID.isChildOf(t))&&(e===this.sourceCache.sourceCache.id&&(a.timeLoaded=Date.now()),this._rerender[e]=this._rerender[e]||{},this._rerender[e][a.tileID.key]=!0)}}},{key:"needsRerender",value:function(e,t){return this._rerender[e]&&this._rerender[e][t.key]}},{key:"clearRerenderCache",value:function(){this._rerender={}}},{key:"getElevation",value:function(t,i,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.EXTENT;return(this.getDEMElevation(t,i,a,n)+this.elevationOffset)*this.exaggeration}},{key:"getTerrainData",value:function(t){if(!this._emptyDemTexture){var i=this.style.map.painter.context,a=new e.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new x(i,a,i.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new x(i,new e.RGBAImage({width:1,height:1}),i.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=e.identity([])}var n=this.sourceCache.getSourceTile(t,!0);if(n&&n.dem&&(!n.demTexture||n.needsTerrainPrepare)){var r=this.style.map.painter.context;n.demTexture=this.style.map.painter.getTileTexture(n.dem.stride),n.demTexture?n.demTexture.update(n.dem.getPixels(),{premultiply:!1}):n.demTexture=new x(r,n.dem.getPixels(),r.gl.RGBA,{premultiply:!1}),n.demTexture.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),n.needsTerrainPrepare=!1}var o=n&&n+n.tileID.key+t.key;if(o&&!this._demMatrixCache[o]){var s=this.sourceCache.sourceCache._source.maxzoom,l=t.canonical.z-n.tileID.canonical.z;t.overscaledZ>t.canonical.z&&(t.canonical.z>=s?l=t.canonical.z-s:e.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));var c=t.canonical.x-(t.canonical.x>>l<<l),u=t.canonical.y-(t.canonical.y>>l<<l),h=e.fromScaling(new Float64Array(16),[1/(e.EXTENT<<l),1/(e.EXTENT<<l),0]);e.translate(h,h,[c*e.EXTENT,u*e.EXTENT,0]),this._demMatrixCache[t.key]={matrix:h,coord:t}}return{u_depth:2,u_terrain:3,u_terrain_dim:n&&n.dem&&n.dem.dim||1,u_terrain_matrix:o?this._demMatrixCache[t.key].matrix:this._emptyDemMatrix,u_terrain_unpack:n&&n.dem&&n.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(n&&n.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:n}}},{key:"getRTTFramebuffer",value:function(){var e=this.style.map.painter;if(!this._rttFramebuffer){var t=this.sourceCache.tileSize*this.qualityFactor;this._rttFramebuffer=e.context.createFramebuffer(t,t,!0),this._rttFramebuffer.depthAttachment.set(e.context.createRenderbuffer(e.context.gl.DEPTH_COMPONENT16,t,t))}return this._rttFramebuffer}},{key:"getFramebuffer",value:function(e){var t=this.style.map.painter,i=t.width/devicePixelRatio,a=t.height/devicePixelRatio;return!this._fbo||this._fbo.width===i&&this._fbo.height===a||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new x(t.context,{width:i,height:a,data:null},t.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(t.context.gl.NEAREST,t.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new x(t.context,{width:i,height:a,data:null},t.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(t.context.gl.NEAREST,t.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=t.context.createFramebuffer(i,a,!0),this._fbo.depthAttachment.set(t.context.createRenderbuffer(t.context.gl.DEPTH_COMPONENT16,i,a))),this._fbo.colorAttachment.set("coords"===e?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}},{key:"getCoordsTexture",value:function(){var t=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;for(var i=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4),a=0,n=0;a<this._coordsTextureSize;a++)for(var r=0;r<this._coordsTextureSize;r++,n+=4)i[n+0]=255&r,i[n+1]=255&a,i[n+2]=r>>8<<4|a>>8,i[n+3]=0;var o=new e.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(i.buffer)),s=new x(t,o,t.gl.RGBA,{premultiply:!1});return s.bind(t.gl.NEAREST,t.gl.CLAMP_TO_EDGE),this._coordsTexture=s,s}},{key:"pointCoordinate",value:function(t){var i=new Uint8Array(4),a=this.style.map.painter,n=a.context,r=n.gl;n.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),r.readPixels(t.x,a.height/devicePixelRatio-t.y-1,1,1,r.RGBA,r.UNSIGNED_BYTE,i),n.bindFramebuffer.set(null);var o=i[0]+(i[2]>>4<<8),s=i[1]+((15&i[2])<<8),l=this.coordsIndex[255-i[3]],c=l&&this.sourceCache.getTileByID(l);if(!c)return null;var u=this._coordsTextureSize,h=(1<<c.tileID.canonical.z)*u;return new e.MercatorCoordinate((c.tileID.canonical.x*u+o)/h,(c.tileID.canonical.y*u+s)/h,this.getElevation(c.tileID,o,s,u))}},{key:"getTerrainMesh",value:function(){if(this._mesh)return this._mesh;for(var t=this.style.map.painter.context,i=new e.PosArray,a=new e.TriangleIndexArray,n=this.meshSize,r=e.EXTENT/n,o=n*n,s=0;s<=n;s++)for(var l=0;l<=n;l++)i.emplaceBack(l*r,s*r);for(var c=0;c<o;c+=n+1)for(var u=0;u<n;u++)a.emplaceBack(u+c,n+u+c+1,n+u+c+2),a.emplaceBack(u+c,n+u+c+2,u+c+1);return this._mesh={indexBuffer:t.createIndexBuffer(a),vertexBuffer:t.createVertexBuffer(i,nt.members),segments:e.SegmentVector.simpleSegment(0,0,i.length,a.length)},this._mesh}},{key:"getMinMaxElevation",value:function(e){var t=this.getTerrainData(e).tile,i={minElevation:null,maxElevation:null};return t&&t.dem&&(i.minElevation=(t.dem.min+this.elevationOffset)*this.exaggeration,i.maxElevation=(t.dem.max+this.elevationOffset)*this.exaggeration),i}}]),t}(),st=function(t,i){return e.emitValidationErrors(t,i&&i.filter((function(e){return"source.canvas"!==e.identifier})))},lt=e.pick(re,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),ct=e.pick(re,["setCenter","setZoom","setBearing","setPitch"]),ut=function(){var t={},i=e.spec.$version;for(var a in e.spec.$root){var n,r=e.spec.$root[a];if(r.required)null!=(n="version"===a?i:"array"===r.type?[]:{})&&(t[a]=n)}return t}(),ht=function(t){m(a,t);var i=g(a);function a(t){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p(this,a),(r=i.call(this)).map=t,r.dispatcher=new E(ie(),n(r)),r.imageManager=new _,r.imageManager.setEventedParent(n(r)),r.glyphManager=new C(t._requestManager,o.localIdeographFontFamily),r.lineAtlas=new M(256,512),r.crossTileSymbolIndex=new at,r._layers={},r._serializedLayers={},r._order=[],r.sourceCaches={},r.zoomHistory=new e.ZoomHistory,r._loaded=!1,r._availableImages=[],r._resetUpdates(),r.dispatcher.broadcast("setReferrer",e.getReferrer());var s=n(r);return r._rtlTextPluginCallback=a.registerForPluginStateChange((function(t){s.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:t.pluginStatus,pluginURL:t.pluginURL},(function(t,i){if(e.triggerPluginCompletionEvent(t),i&&i.every((function(e){return e})))for(var a in s.sourceCaches)s.sourceCaches[a].reload()}))})),r.on("data",(function(e){if("source"===e.dataType&&"metadata"===e.sourceDataType){var t=r.sourceCaches[e.sourceId];if(t){var i=t.getSource();if(i&&i.vectorLayerIds)for(var a in r._layers){var n=r._layers[a];n.source===i.id&&r._validateLayer(n)}}}})),r}return f(a,[{key:"loadURL",value:function(t){var i=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fire(new e.Event("dataloading",{dataType:"style"}));var n="boolean"!=typeof a.validate||a.validate,r=this.map._requestManager.transformRequest(t,e.ResourceType.Style);this._request=e.getJSON(r,(function(t,a){i._request=null,t?i.fire(new e.ErrorEvent(t)):a&&i._load(a,n)}))}},{key:"loadJSON",value:function(t){var i=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.exported.frame((function(){i._request=null,i._load(t,!1!==a.validate)}))}},{key:"loadEmpty",value:function(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(ut,!1)}},{key:"_load",value:function(t,i){if(!i||!st(this,e.validateStyle(t))){for(var a in this._loaded=!0,this.stylesheet=t,t.sources)this.addSource(a,t.sources[a],{validate:!1});t.sprite?this._loadSprite(t.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(t.glyphs);var n=ne(this.stylesheet.layers);this._order=n.map((function(e){return e.id})),this._layers={},this._serializedLayers={};var r,o=d(n);try{for(o.s();!(r=o.n()).done;){var s=r.value;(s=e.createStyleLayer(s)).setEventedParent(this,{layer:{id:s.id}}),this._layers[s.id]=s,this._serializedLayers[s.id]=s.serialize()}}catch(l){o.e(l)}finally{o.f()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new T(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}}},{key:"_loadSprite",value:function(t){var i=this;this._spriteRequest=function(t,i,a,n){var r,o,s,l=a>1?"@2x":"",c=e.getJSON(i.transformRequest(i.normalizeSpriteURL(t,l,".json"),e.ResourceType.SpriteJSON),(function(e,t){c=null,s||(s=e,r=t,h())})),u=e.getImage(i.transformRequest(i.normalizeSpriteURL(t,l,".png"),e.ResourceType.SpriteImage),(function(e,t){u=null,s||(s=e,o=t,h())}));function h(){if(s)n(s);else if(r&&o){var t=e.exported.getImageData(o),i={};for(var a in r){var l=r[a],c=l.width,u=l.height,h=l.x,d=l.y,f=l.sdf,p=l.pixelRatio,m=l.stretchX,g=l.stretchY,v=l.content,y=new e.RGBAImage({width:c,height:u});e.RGBAImage.copy(t,y,{x:h,y:d},{x:0,y:0},{width:c,height:u}),i[a]={data:y,pixelRatio:p,sdf:f,stretchX:m,stretchY:g,content:v}}n(null,i)}}return{cancel:function(){c&&(c.cancel(),c=null),u&&(u.cancel(),u=null)}}}(t,this.map._requestManager,this.map.getPixelRatio(),(function(t,a){if(i._spriteRequest=null,t)i.fire(new e.ErrorEvent(t));else if(a)for(var n in a)i.imageManager.addImage(n,a[n]);i.imageManager.setLoaded(!0),i._availableImages=i.imageManager.listImages(),i.dispatcher.broadcast("setImages",i._availableImages),i.fire(new e.Event("data",{dataType:"style"}))}))}},{key:"_validateLayer",value:function(t){var i=this.sourceCaches[t.source];if(i){var a=t.sourceLayer;if(a){var n=i.getSource();("geojson"===n.type||n.vectorLayerIds&&-1===n.vectorLayerIds.indexOf(a))&&this.fire(new e.ErrorEvent(new Error('Source layer "'.concat(a,'" does not exist on source "').concat(n.id,'" as specified by style layer "').concat(t.id,'".'))))}}}},{key:"loaded",value:function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var e in this.sourceCaches)if(!this.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}},{key:"_serializeLayers",value:function(e){var t,i=[],a=d(e);try{for(a.s();!(t=a.n()).done;){var n=t.value,r=this._layers[n];"custom"!==r.type&&i.push(r.serialize())}}catch(o){a.e(o)}finally{a.f()}return i}},{key:"hasTransitions",value:function(){if(this.light&&this.light.hasTransition())return!0;for(var e in this.sourceCaches)if(this.sourceCaches[e].hasTransition())return!0;for(var t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}},{key:"_checkLoaded",value:function(){if(!this._loaded)throw new Error("Style is not done loading.")}},{key:"update",value:function(t){if(this._loaded){var i=this._changed;if(this._changed){var a=Object.keys(this._updatedLayers),n=Object.keys(this._removedLayers);for(var r in(a.length||n.length)&&this._updateWorkerLayers(a,n),this._updatedSources){var o=this._updatedSources[r];if("reload"===o)this._reloadSource(r);else{if("clear"!==o)throw new Error("Invalid action ".concat(o));this._clearSource(r)}}for(var s in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[s].updateTransitions(t);this.light.updateTransitions(t),this._resetUpdates()}var l={};for(var c in this.sourceCaches){var u=this.sourceCaches[c];l[c]=u.used,u.used=!1}var h,f=d(this._order);try{for(f.s();!(h=f.n()).done;){var p=h.value,m=this._layers[p];m.recalculate(t,this._availableImages),!m.isHidden(t.zoom)&&m.source&&(this.sourceCaches[m.source].used=!0)}}catch(y){f.e(y)}finally{f.f()}for(var g in l){var v=this.sourceCaches[g];l[g]!==v.used&&v.fire(new e.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:g}))}this.light.recalculate(t),this.z=t.zoom,i&&this.fire(new e.Event("data",{dataType:"style"}))}}},{key:"_updateTilesForChangedImages",value:function(){var e=Object.keys(this._changedImages);if(e.length){for(var t in this.sourceCaches)this.sourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}},{key:"_updateWorkerLayers",value:function(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})}},{key:"_resetUpdates",value:function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}},{key:"setTerrain",value:function(t){var i=this;if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),t){var a=this.sourceCaches[t.source];if(!a)throw new Error("cannot load terrain, because there exists no source with ID: ".concat(t.source));this.terrain=new ot(this,a,t),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=function(e){e.freeze?i.map.transform.freezeElevation=!0:(i.map.transform.freezeElevation=!1,i.map.transform.recalculateZoom(i.terrain))},this._terrainDataCallback=function(e){e.tile&&(e.sourceId===t.source?(i.map.transform.updateElevation(i.terrain),i.terrain.rememberForRerender(e.sourceId,e.tile.tileID)):"geojson"===e.source.type&&i.terrain.rememberForRerender(e.sourceId,e.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new e.Event("terrain",{terrain:t}))}},{key:"setState",value:function(t){var i=this;if(this._checkLoaded(),st(this,e.validateStyle(t)))return!1;(t=e.clone$1(t)).layers=ne(t.layers);var a=function(e,t){if(!e)return[{command:re.setStyle,args:[t]}];var i=[];try{if(!c(e.version,t.version))return[{command:re.setStyle,args:[t]}];c(e.center,t.center)||i.push({command:re.setCenter,args:[t.center]}),c(e.zoom,t.zoom)||i.push({command:re.setZoom,args:[t.zoom]}),c(e.bearing,t.bearing)||i.push({command:re.setBearing,args:[t.bearing]}),c(e.pitch,t.pitch)||i.push({command:re.setPitch,args:[t.pitch]}),c(e.sprite,t.sprite)||i.push({command:re.setSprite,args:[t.sprite]}),c(e.glyphs,t.glyphs)||i.push({command:re.setGlyphs,args:[t.glyphs]}),c(e.transition,t.transition)||i.push({command:re.setTransition,args:[t.transition]}),c(e.light,t.light)||i.push({command:re.setLight,args:[t.light]});var a={},n=[];!function(e,t,i,a){var n;for(n in t=t||{},e=e||{})Object.prototype.hasOwnProperty.call(e,n)&&(Object.prototype.hasOwnProperty.call(t,n)||se(n,i,a));for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(Object.prototype.hasOwnProperty.call(e,n)?c(e[n],t[n])||("geojson"===e[n].type&&"geojson"===t[n].type&&ce(e,t,n)?i.push({command:re.setGeoJSONSourceData,args:[n,t[n].data]}):le(n,t,i,a)):oe(n,t,i))}(e.sources,t.sources,n,a);var r=[];e.layers&&e.layers.forEach((function(e){a[e.source]?i.push({command:re.removeLayer,args:[e.id]}):r.push(e)})),i=i.concat(n),function(e,t,i){t=t||[];var a,n,r,o,s,l,u,h=(e=e||[]).map(he),d=t.map(he),f=e.reduce(de,{}),p=t.reduce(de,{}),m=h.slice(),g=Object.create(null);for(a=0,n=0;a<h.length;a++)r=h[a],Object.prototype.hasOwnProperty.call(p,r)?n++:(i.push({command:re.removeLayer,args:[r]}),m.splice(m.indexOf(r,n),1));for(a=0,n=0;a<d.length;a++)r=d[d.length-1-a],m[m.length-1-a]!==r&&(Object.prototype.hasOwnProperty.call(f,r)?(i.push({command:re.removeLayer,args:[r]}),m.splice(m.lastIndexOf(r,m.length-n),1)):n++,l=m[m.length-a],i.push({command:re.addLayer,args:[p[r],l]}),m.splice(m.length-a,0,r),g[r]=!0);for(a=0;a<d.length;a++)if(o=f[r=d[a]],s=p[r],!g[r]&&!c(o,s))if(c(o.source,s.source)&&c(o["source-layer"],s["source-layer"])&&c(o.type,s.type)){for(u in ue(o.layout,s.layout,i,r,null,re.setLayoutProperty),ue(o.paint,s.paint,i,r,null,re.setPaintProperty),c(o.filter,s.filter)||i.push({command:re.setFilter,args:[r,s.filter]}),c(o.minzoom,s.minzoom)&&c(o.maxzoom,s.maxzoom)||i.push({command:re.setLayerZoomRange,args:[r,s.minzoom,s.maxzoom]}),o)Object.prototype.hasOwnProperty.call(o,u)&&"layout"!==u&&"paint"!==u&&"filter"!==u&&"metadata"!==u&&"minzoom"!==u&&"maxzoom"!==u&&(0===u.indexOf("paint.")?ue(o[u],s[u],i,r,u.slice(6),re.setPaintProperty):c(o[u],s[u])||i.push({command:re.setLayerProperty,args:[r,u,s[u]]}));for(u in s)Object.prototype.hasOwnProperty.call(s,u)&&!Object.prototype.hasOwnProperty.call(o,u)&&"layout"!==u&&"paint"!==u&&"filter"!==u&&"metadata"!==u&&"minzoom"!==u&&"maxzoom"!==u&&(0===u.indexOf("paint.")?ue(o[u],s[u],i,r,u.slice(6),re.setPaintProperty):c(o[u],s[u])||i.push({command:re.setLayerProperty,args:[r,u,s[u]]}))}else i.push({command:re.removeLayer,args:[r]}),l=m[m.lastIndexOf(r)+1],i.push({command:re.addLayer,args:[s,l]})}(r,t.layers,i)}catch(e){console.warn("Unable to compute style diff:",e),i=[{command:re.setStyle,args:[t]}]}return i}(this.serialize(),t).filter((function(e){return!(e.command in ct)}));if(0===a.length)return!1;var n=a.filter((function(e){return!(e.command in lt)}));if(n.length>0)throw new Error("Unimplemented: ".concat(n.map((function(e){return e.command})).join(", "),"."));return a.forEach((function(e){"setTransition"!==e.command&&i[e.command].apply(i,e.args)})),this.stylesheet=t,!0}},{key:"addImage",value:function(t,i){if(this.getImage(t))return this.fire(new e.ErrorEvent(new Error('An image named "'.concat(t,'" already exists.'))));this.imageManager.addImage(t,i),this._afterImageUpdated(t)}},{key:"updateImage",value:function(e,t){this.imageManager.updateImage(e,t)}},{key:"getImage",value:function(e){return this.imageManager.getImage(e)}},{key:"removeImage",value:function(t){if(!this.getImage(t))return this.fire(new e.ErrorEvent(new Error('An image named "'.concat(t,'" does not exist.'))));this.imageManager.removeImage(t),this._afterImageUpdated(t)}},{key:"_afterImageUpdated",value:function(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new e.Event("data",{dataType:"style"}))}},{key:"listImages",value:function(){return this._checkLoaded(),this.imageManager.listImages()}},{key:"addSource",value:function(t,i){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._checkLoaded(),void 0!==this.sourceCaches[t])throw new Error('Source "'.concat(t,'" already exists.'));if(!i.type)throw new Error("The type property must be defined, but only the following properties were given: ".concat(Object.keys(i).join(", "),"."));if(!(["vector","raster","geojson","video","image"].indexOf(i.type)>=0&&this._validate(e.validateStyle.source,"sources.".concat(t),i,null,n))){this.map&&this.map._collectResourceTiming&&(i.collectResourceTiming=!0);var r=this.sourceCaches[t]=new Z(t,i,this.dispatcher);r.style=this,r.setEventedParent(this,(function(){return{isSourceLoaded:a.loaded(),source:r.serialize(),sourceId:t}})),r.onAdd(this.map),this._changed=!0}}},{key:"removeSource",value:function(t){if(this._checkLoaded(),void 0===this.sourceCaches[t])throw new Error("There is no source with this ID");for(var i in this._layers)if(this._layers[i].source===t)return this.fire(new e.ErrorEvent(new Error('Source "'.concat(t,'" cannot be removed while layer "').concat(i,'" is using it.'))));var a=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],a.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),a.setEventedParent(null),a.onRemove(this.map),this._changed=!0}},{key:"setGeoJSONSourceData",value:function(e,t){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID=".concat(e));var i=this.sourceCaches[e].getSource();if("geojson"!==i.type)throw new Error("geojsonSource.type is ".concat(i.type,", which is !== 'geojson"));i.setData(t),this._changed=!0}},{key:"getSource",value:function(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()}},{key:"addLayer",value:function(t,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();var n=t.id;if(this.getLayer(n))this.fire(new e.ErrorEvent(new Error('Layer "'.concat(n,'" already exists on this map.'))));else{var r;if("custom"===t.type){if(st(this,e.validateCustomStyleLayer(t)))return;r=e.createStyleLayer(t)}else{if("object"==typeof t.source&&(this.addSource(n,t.source),t=e.clone$1(t),t=e.extend(t,{source:n})),this._validate(e.validateStyle.layer,"layers.".concat(n),t,{arrayIndex:-1},a))return;r=e.createStyleLayer(t),this._validateLayer(r),r.setEventedParent(this,{layer:{id:n}}),this._serializedLayers[r.id]=r.serialize()}var o=i?this._order.indexOf(i):this._order.length;if(i&&-1===o)this.fire(new e.ErrorEvent(new Error('Cannot add layer "'.concat(n,'" before non-existing layer "').concat(i,'".'))));else{if(this._order.splice(o,0,n),this._layerOrderChanged=!0,this._layers[n]=r,this._removedLayers[n]&&r.source&&"custom"!==r.type){var s=this._removedLayers[n];delete this._removedLayers[n],s.type!==r.type?this._updatedSources[r.source]="clear":(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause())}this._updateLayer(r),r.onAdd&&r.onAdd(this.map)}}}},{key:"moveLayer",value:function(t,i){if(this._checkLoaded(),this._changed=!0,this._layers[t]){if(t!==i){var a=this._order.indexOf(t);this._order.splice(a,1);var n=i?this._order.indexOf(i):this._order.length;i&&-1===n?this.fire(new e.ErrorEvent(new Error('Cannot move layer "'.concat(t,'" before non-existing layer "').concat(i,'".')))):(this._order.splice(n,0,t),this._layerOrderChanged=!0)}}else this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style and cannot be moved."))))}},{key:"removeLayer",value:function(t){this._checkLoaded();var i=this._layers[t];if(i){i.setEventedParent(null);var a=this._order.indexOf(t);this._order.splice(a,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=i,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],i.onRemove&&i.onRemove(this.map)}else this.fire(new e.ErrorEvent(new Error('Cannot remove non-existing layer "'.concat(t,'".'))))}},{key:"getLayer",value:function(e){return this._layers[e]}},{key:"hasLayer",value:function(e){return e in this._layers}},{key:"setLayerZoomRange",value:function(t,i,a){this._checkLoaded();var n=this.getLayer(t);n?n.minzoom===i&&n.maxzoom===a||(null!=i&&(n.minzoom=i),null!=a&&(n.maxzoom=a),this._updateLayer(n)):this.fire(new e.ErrorEvent(new Error('Cannot set the zoom range of non-existing layer "'.concat(t,'".'))))}},{key:"setFilter",value:function(t,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();var n=this.getLayer(t);if(n){if(!c(n.filter,i))return null==i?(n.filter=void 0,void this._updateLayer(n)):void(this._validate(e.validateStyle.filter,"layers.".concat(n.id,".filter"),i,null,a)||(n.filter=e.clone$1(i),this._updateLayer(n)))}else this.fire(new e.ErrorEvent(new Error('Cannot filter non-existing layer "'.concat(t,'".'))))}},{key:"getFilter",value:function(t){return e.clone$1(this.getLayer(t).filter)}},{key:"setLayoutProperty",value:function(t,i,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();var r=this.getLayer(t);r?c(r.getLayoutProperty(i),a)||(r.setLayoutProperty(i,a,n),this._updateLayer(r)):this.fire(new e.ErrorEvent(new Error('Cannot style non-existing layer "'.concat(t,'".'))))}},{key:"getLayoutProperty",value:function(t,i){var a=this.getLayer(t);if(a)return a.getLayoutProperty(i);this.fire(new e.ErrorEvent(new Error('Cannot get style of non-existing layer "'.concat(t,'".'))))}},{key:"setPaintProperty",value:function(t,i,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();var r=this.getLayer(t);r?c(r.getPaintProperty(i),a)||(r.setPaintProperty(i,a,n)&&this._updateLayer(r),this._changed=!0,this._updatedPaintProps[t]=!0):this.fire(new e.ErrorEvent(new Error('Cannot style non-existing layer "'.concat(t,'".'))))}},{key:"getPaintProperty",value:function(e,t){return this.getLayer(e).getPaintProperty(t)}},{key:"setFeatureState",value:function(t,i){this._checkLoaded();var a=t.source,n=t.sourceLayer,r=this.sourceCaches[a];if(void 0!==r){var o=r.getSource().type;"geojson"===o&&n?this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==o||n?(void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),r.setFeatureState(n,t.id,i)):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '".concat(a,"' does not exist in the map's style."))))}},{key:"removeFeatureState",value:function(t,i){this._checkLoaded();var a=t.source,n=this.sourceCaches[a];if(void 0!==n){var r=n.getSource().type,o="vector"===r?t.sourceLayer:void 0;"vector"!==r||o?i&&"string"!=typeof t.id&&"number"!=typeof t.id?this.fire(new e.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):n.removeFeatureState(o,t.id,i):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '".concat(a,"' does not exist in the map's style."))))}},{key:"getFeatureState",value:function(t){this._checkLoaded();var i=t.source,a=t.sourceLayer,n=this.sourceCaches[i];if(void 0!==n)return"vector"!==n.getSource().type||a?(void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),n.getFeatureState(a,t.id)):void this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new e.ErrorEvent(new Error("The source '".concat(i,"' does not exist in the map's style."))))}},{key:"getTransition",value:function(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}},{key:"serialize",value:function(){return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e.mapObject(this.sourceCaches,(function(e){return e.serialize()})),layers:this._serializeLayers(this._order)},(function(e){return void 0!==e}))}},{key:"_updateLayer",value:function(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&"raster"!==this.sourceCaches[e.source].getSource().type&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._changed=!0}},{key:"_flattenAndSortRenderedFeatures",value:function(e){for(var t=this,i=function(e){return"fill-extrusion"===t._layers[e].type},a={},n=[],r=this._order.length-1;r>=0;r--){var o=this._order[r];if(i(o)){a[o]=r;var s,l=d(e);try{for(l.s();!(s=l.n()).done;){var c=s.value[o];if(c){var u,h=d(c);try{for(h.s();!(u=h.n()).done;){var f=u.value;n.push(f)}}catch(C){h.e(C)}finally{h.f()}}}}catch(C){l.e(C)}finally{l.f()}}}n.sort((function(e,t){return t.intersectionZ-e.intersectionZ}));for(var p=[],m=this._order.length-1;m>=0;m--){var g=this._order[m];if(i(g))for(var v=n.length-1;v>=0;v--){var y=n[v].feature;if(a[y.layer.id]<m)break;p.push(y),n.pop()}else{var x,b=d(e);try{for(b.s();!(x=b.n()).done;){var _=x.value[g];if(_){var w,k=d(_);try{for(k.s();!(w=k.n()).done;){var S=w.value;p.push(S.feature)}}catch(C){k.e(C)}finally{k.f()}}}}catch(C){b.e(C)}finally{b.f()}}}return p}},{key:"queryRenderedFeatures",value:function(t,i,a){i&&i.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",i.filter,null,i);var n={};if(i&&i.layers){if(!Array.isArray(i.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];var r,o=d(i.layers);try{for(o.s();!(r=o.n()).done;){var s=r.value,l=this._layers[s];if(!l)return this.fire(new e.ErrorEvent(new Error("The layer '".concat(s,"' does not exist in the map's style and cannot be queried for features.")))),[];n[l.source]=!0}}catch(h){o.e(h)}finally{o.f()}}var c=[];for(var u in i.availableImages=this._availableImages,this.sourceCaches)i.layers&&!n[u]||c.push(H(this.sourceCaches[u],this._layers,this._serializedLayers,t,i,a));return this.placement&&c.push(function(e,t,i,a,n,r,o){var s,l={},c=r.queryRenderedSymbols(a),u=[],f=d(Object.keys(c).map(Number));try{for(f.s();!(s=f.n()).done;){var p=s.value;u.push(o[p])}}catch(h){f.e(h)}finally{f.f()}u.sort(U);for(var m=function(){var i=v[g],a=i.featureIndex.lookupSymbolFeatures(c[i.bucketInstanceId],t,i.bucketIndex,i.sourceLayerIndex,n.filter,n.layers,n.availableImages,e);for(var r in a){var o=l[r]=l[r]||[],s=a[r];s.sort((function(e,t){var a=i.featureSortOrder;if(a){var n=a.indexOf(e.featureIndex);return a.indexOf(t.featureIndex)-n}return t.featureIndex-e.featureIndex}));var u,f=d(s);try{for(f.s();!(u=f.n()).done;){var p=u.value;o.push(p)}}catch(h){f.e(h)}finally{f.f()}}},g=0,v=u;g<v.length;g++)m();var y=function(t){l[t].forEach((function(a){var n=a.feature,r=i[e[t].source].getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=r}))};for(var x in l)y(x);return l}(this._layers,this._serializedLayers,this.sourceCaches,t,i,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(c)}},{key:"querySourceFeatures",value:function(t,i){i&&i.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",i.filter,null,i);var a=this.sourceCaches[t];return a?function(e,t){for(var i=e.getRenderableIds().map((function(t){return e.getTileByID(t)})),a=[],n={},r=0;r<i.length;r++){var o=i[r],s=o.tileID.canonical.key;n[s]||(n[s]=!0,o.querySourceFeatures(a,t))}return a}(a,i):[]}},{key:"addSourceType",value:function(e,t,i){return a.getSourceType(e)?i(new Error('A source type called "'.concat(e,'" already exists.'))):(a.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},i):i(null,null))}},{key:"getLight",value:function(){return this.light.getLight()}},{key:"setLight",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkLoaded();var a=this.light.getLight(),n=!1;for(var r in t)if(!c(t[r],a[r])){n=!0;break}if(n){var o={now:e.exported.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,i),this.light.updateTransitions(o)}}},{key:"_validate",value:function(t,i,a,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!r||!1!==r.validate)&&st(this,t.call(e.validateStyle,e.extend({key:i,style:this.serialize(),value:a,styleSpec:e.spec},n)))}},{key:"_remove",value:function(){for(var t in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[t].setEventedParent(null);for(var i in this.sourceCaches){var a=this.sourceCaches[i];a.setEventedParent(null),a.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}},{key:"_clearSource",value:function(e){this.sourceCaches[e].clearTiles()}},{key:"_reloadSource",value:function(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()}},{key:"_updateSources",value:function(e){for(var t in this.sourceCaches)this.sourceCaches[t].update(e,this.terrain)}},{key:"_generateCollisionBoxes",value:function(){for(var e in this.sourceCaches)this._reloadSource(e)}},{key:"_updatePlacement",value:function(t,i,a,n){var r,o=this,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=!1,c=!1,u={},h=d(this._order);try{for(h.s();!(r=h.n()).done;){var f=r.value,p=this._layers[f];if("symbol"===p.type){u[p.source]||function(){var e=o.sourceCaches[p.source];u[p.source]=e.getRenderableIds(!0).map((function(t){return e.getTileByID(t)})).sort((function(e,t){return t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)}))}();var m=this.crossTileSymbolIndex.addLayer(p,u[p.source],t.center.lng);l=l||m}}}catch(b){h.e(b)}finally{h.f()}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((s=s||this._layerOrderChanged||0===a)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.exported.now(),t.zoom))&&(this.pauseablePlacement=new Qe(t,this.terrain,this._order,s,i,a,n,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,u),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.exported.now()),c=!0),l&&this.pauseablePlacement.placement.setStale()),c||l){var g,v=d(this._order);try{for(v.s();!(g=v.n()).done;){var y=g.value,x=this._layers[y];"symbol"===x.type&&this.placement.updateLayerOpacities(x,u[x.source])}}catch(b){v.e(b)}finally{v.f()}}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.exported.now())}},{key:"_releaseSymbolFadeTiles",value:function(){for(var e in this.sourceCaches)this.sourceCaches[e].releaseSymbolFadeTiles()}},{key:"getImages",value:function(e,t,i){this.imageManager.getImages(t.icons,i),this._updateTilesForChangedImages();var a=this.sourceCaches[t.source];a&&a.setDependencies(t.tileID.key,t.type,t.icons)}},{key:"getGlyphs",value:function(e,t,i){this.glyphManager.getGlyphs(t.stacks,i)}},{key:"getResource",value:function(t,i,a){return e.makeRequest(i,a)}}]),a}(e.Evented);ht.getSourceType=function(e){return Y[e]},ht.setSourceType=function(e,t){Y[e]=t},ht.registerForPluginStateChange=e.registerForPluginStateChange;var dt="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}",ft={prelude:pt("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}\n#ifdef TERRAIN3D\nuniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;\n#endif\nconst highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {\n#ifdef TERRAIN3D\nhighp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));\n#else\nreturn 1.0;\n#endif\n}float calculate_visibility(vec4 pos) {\n#ifdef TERRAIN3D\nvec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;\n#else\nreturn 1.0;\n#endif\n}float ele(vec2 pos) {\n#ifdef TERRAIN3D\nvec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;\n#else\nreturn 0.0;\n#endif\n}float get_elevation(vec2 pos) {\n#ifdef TERRAIN3D\nvec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;\n#else\nreturn 0.0;\n#endif\n}"),background:pt("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:pt("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:pt("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:pt("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:pt("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),heatmapTexture:pt("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:pt("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:pt("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:pt("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:pt("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),fillOutline:pt("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillOutlinePattern:pt("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillPattern:pt("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:pt("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;\n#ifdef TERRAIN3D\nfloat baseDelta=10.0;float ele=get_elevation(a_centroid);\n#else\nfloat baseDelta=0.0;float ele=0.0;\n#endif\nbase=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:pt("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;\n#ifdef TERRAIN3D\nfloat baseDelta=10.0;float ele=get_elevation(a_centroid);\n#else\nfloat baseDelta=0.0;float ele=0.0;\n#endif\nbase=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:pt("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:pt("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:pt("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),lineGradient:pt("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),linePattern:pt("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:pt("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:pt("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:pt("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}"),symbolSDF:pt("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:pt("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrain:pt("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",dt),terrainDepth:pt("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",dt),terrainCoords:pt("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",dt)};function pt(e,t){var i=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,a=t.match(/attribute ([\w]+) ([\w]+)/g),n=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),r=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=r?r.concat(n):n,s={};return{fragmentSource:e=e.replace(i,(function(e,t,i,a,n){return s[n]=!0,"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(n,"\nvarying ").concat(i," ").concat(a," ").concat(n,";\n#else\nuniform ").concat(i," ").concat(a," u_").concat(n,";\n#endif\n"):"\n#ifdef HAS_UNIFORM_u_".concat(n,"\n    ").concat(i," ").concat(a," ").concat(n," = u_").concat(n,";\n#endif\n")})),vertexSource:t=t.replace(i,(function(e,t,i,a,n){var r="float"===a?"vec2":"vec4",o=n.match(/color/)?"color":r;return s[n]?"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(n,"\nuniform lowp float u_").concat(n,"_t;\nattribute ").concat(i," ").concat(r," a_").concat(n,";\nvarying ").concat(i," ").concat(a," ").concat(n,";\n#else\nuniform ").concat(i," ").concat(a," u_").concat(n,";\n#endif\n"):"vec4"===o?"\n#ifndef HAS_UNIFORM_u_".concat(n,"\n    ").concat(n," = a_").concat(n,";\n#else\n    ").concat(i," ").concat(a," ").concat(n," = u_").concat(n,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(n,"\n    ").concat(n," = unpack_mix_").concat(o,"(a_").concat(n,", u_").concat(n,"_t);\n#else\n    ").concat(i," ").concat(a," ").concat(n," = u_").concat(n,";\n#endif\n"):"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(n,"\nuniform lowp float u_").concat(n,"_t;\nattribute ").concat(i," ").concat(r," a_").concat(n,";\n#else\nuniform ").concat(i," ").concat(a," u_").concat(n,";\n#endif\n"):"vec4"===o?"\n#ifndef HAS_UNIFORM_u_".concat(n,"\n    ").concat(i," ").concat(a," ").concat(n," = a_").concat(n,";\n#else\n    ").concat(i," ").concat(a," ").concat(n," = u_").concat(n,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(n,"\n    ").concat(i," ").concat(a," ").concat(n," = unpack_mix_").concat(o,"(a_").concat(n,", u_").concat(n,"_t);\n#else\n    ").concat(i," ").concat(a," ").concat(n," = u_").concat(n,";\n#endif\n")})),staticAttributes:a,staticUniforms:o}}var mt=function(){function e(){p(this,e),this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}return f(e,[{key:"bind",value:function(e,t,i,a,n,r,o,s,l){this.context=e;for(var c=this.boundPaintVertexBuffers.length!==a.length,u=0;!c&&u<a.length;u++)this.boundPaintVertexBuffers[u]!==a[u]&&(c=!0);e.extVertexArrayObject&&this.vao&&this.boundProgram===t&&this.boundLayoutVertexBuffer===i&&!c&&this.boundIndexBuffer===n&&this.boundVertexOffset===r&&this.boundDynamicVertexBuffer===o&&this.boundDynamicVertexBuffer2===s&&this.boundDynamicVertexBuffer3===l?(e.bindVertexArrayOES.set(this.vao),o&&o.bind(),n&&n.dynamicDraw&&n.bind(),s&&s.bind(),l&&l.bind()):this.freshBind(t,i,a,n,r,o,s,l)}},{key:"freshBind",value:function(e,t,i,a,n,r,o,s){var l,c=e.numAttributes,u=this.context,h=u.gl;if(u.extVertexArrayObject)this.vao&&this.destroy(),this.vao=u.extVertexArrayObject.createVertexArrayOES(),u.bindVertexArrayOES.set(this.vao),l=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=i,this.boundIndexBuffer=a,this.boundVertexOffset=n,this.boundDynamicVertexBuffer=r,this.boundDynamicVertexBuffer2=o,this.boundDynamicVertexBuffer3=s;else{l=u.currentNumAttributes||0;for(var f=c;f<l;f++)h.disableVertexAttribArray(f)}t.enableAttributes(h,e);var p,m=d(i);try{for(m.s();!(p=m.n()).done;)p.value.enableAttributes(h,e)}catch(x){m.e(x)}finally{m.f()}r&&r.enableAttributes(h,e),o&&o.enableAttributes(h,e),s&&s.enableAttributes(h,e),t.bind(),t.setVertexAttribPointers(h,e,n);var g,v=d(i);try{for(v.s();!(g=v.n()).done;){var y=g.value;y.bind(),y.setVertexAttribPointers(h,e,n)}}catch(x){v.e(x)}finally{v.f()}r&&(r.bind(),r.setVertexAttribPointers(h,e,n)),a&&a.bind(),o&&(o.bind(),o.setVertexAttribPointers(h,e,n)),s&&(s.bind(),s.setVertexAttribPointers(h,e,n)),u.currentNumAttributes=c}},{key:"destroy",value:function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}]),e}();function gt(e){for(var t=[],i=0;i<e.length;i++)if(null!==e[i]){var a=e[i].split(" ");t.push(a.pop())}return t}var vt=function(){function t(i,a,n,r,o,s,l){p(this,t);var c=i.gl;this.program=c.createProgram();var u,h=gt(n.staticAttributes),f=r?r.getBinderAttributes():[],m=h.concat(f),g=ft.prelude.staticUniforms?gt(ft.prelude.staticUniforms):[],v=n.staticUniforms?gt(n.staticUniforms):[],y=r?r.getBinderUniforms():[],x=g.concat(v).concat(y),b=[],_=d(x);try{for(_.s();!(u=_.n()).done;){var w=u.value;b.indexOf(w)<0&&b.push(w)}}catch(D){_.e(D)}finally{_.f()}var k=r?r.defines():[];s&&k.push("#define OVERDRAW_INSPECTOR;"),l&&k.push("#define TERRAIN3D;");var S=k.concat(ft.prelude.fragmentSource,n.fragmentSource).join("\n"),C=k.concat(ft.prelude.vertexSource,n.vertexSource).join("\n"),A=c.createShader(c.FRAGMENT_SHADER);if(c.isContextLost())this.failedToCreate=!0;else{c.shaderSource(A,S),c.compileShader(A),c.attachShader(this.program,A);var O=c.createShader(c.VERTEX_SHADER);if(c.isContextLost())this.failedToCreate=!0;else{c.shaderSource(O,C),c.compileShader(O),c.attachShader(this.program,O),this.attributes={};var T={};this.numAttributes=m.length;for(var M=0;M<this.numAttributes;M++)m[M]&&(c.bindAttribLocation(this.program,M,m[M]),this.attributes[m[M]]=M);c.linkProgram(this.program),c.deleteShader(O),c.deleteShader(A);for(var E=0;E<b.length;E++){var I=b[E];if(I&&!T[I]){var P=c.getUniformLocation(this.program,I);P&&(T[I]=P)}}this.fixedUniforms=o(i,T),this.terrainUniforms=function(t,i){return{u_depth:new e.Uniform1i(t,i.u_depth),u_terrain:new e.Uniform1i(t,i.u_terrain),u_terrain_dim:new e.Uniform1f(t,i.u_terrain_dim),u_terrain_matrix:new e.UniformMatrix4f(t,i.u_terrain_matrix),u_terrain_unpack:new e.Uniform4f(t,i.u_terrain_unpack),u_terrain_offset:new e.Uniform1f(t,i.u_terrain_offset),u_terrain_exaggeration:new e.Uniform1f(t,i.u_terrain_exaggeration)}}(i,T),this.binderUniforms=r?r.getUniforms(i,T):[]}}}return f(t,[{key:"draw",value:function(e,t,i,a,n,r,o,s,l,c,u,h,f,p,m,g,v,y){var x=e.gl;if(!this.failedToCreate){if(e.program.set(this.program),e.setDepthMode(i),e.setStencilMode(a),e.setColorMode(n),e.setCullFace(r),s)for(var b in e.activeTexture.set(x.TEXTURE2),x.bindTexture(x.TEXTURE_2D,s.depthTexture),e.activeTexture.set(x.TEXTURE3),x.bindTexture(x.TEXTURE_2D,s.texture),this.terrainUniforms)this.terrainUniforms[b].set(s[b]);for(var _ in this.fixedUniforms)this.fixedUniforms[_].set(o[_]);m&&m.setUniforms(e,this.binderUniforms,f,{zoom:p});var w=0;switch(t){case x.LINES:w=2;break;case x.TRIANGLES:w=3;break;case x.LINE_STRIP:w=1}var k,S=d(h.get());try{for(S.s();!(k=S.n()).done;){var C=k.value,A=C.vaos||(C.vaos={});(A[l]||(A[l]=new mt)).bind(e,this,c,m?m.getPaintVertexBuffers():[],u,C.vertexOffset,g,v,y),x.drawElements(t,C.primitiveLength*w,x.UNSIGNED_SHORT,C.primitiveOffset*w*2)}}catch(O){S.e(O)}finally{S.f()}}}}]),t}();function yt(e,t,i){var a=1/Ie(i,1,t.transform.tileZoom),n=Math.pow(2,i.tileID.overscaledZ),r=i.tileSize*Math.pow(2,t.transform.tileZoom)/n,o=r*(i.tileID.canonical.x+i.tileID.wrap*n),s=r*i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture.size,u_scale:[a,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[o>>16,s>>16],u_pixel_coord_lower:[65535&o,65535&s]}}var xt=function(t,i,a,n){var r=i.style.light,o=r.properties.get("position"),s=[o.x,o.y,o.z],l=e.create$1();"viewport"===r.properties.get("anchor")&&e.fromRotation(l,-i.transform.angle),e.transformMat3(s,s,l);var c=r.properties.get("color");return{u_matrix:t,u_lightpos:s,u_lightintensity:r.properties.get("intensity"),u_lightcolor:[c.r,c.g,c.b],u_vertical_gradient:+a,u_opacity:n}},bt=function(t,i,a,n,r,o,s){return e.extend(xt(t,i,a,n),yt(o,i,s),{u_height_factor:-Math.pow(2,r.overscaledZ)/s.tileSize/8})},_t=function(e){return{u_matrix:e}},wt=function(t,i,a,n){return e.extend(_t(t),yt(a,i,n))},kt=function(e,t){return{u_matrix:e,u_world:t}},St=function(t,i,a,n,r){return e.extend(wt(t,i,a,n),{u_world:r})},Ct=function(e,t,i,a){var n,r,o=e.transform;if("map"===a.paint.get("circle-pitch-alignment")){var s=Ie(i,1,o.zoom);n=!0,r=[s,s]}else n=!1,r=o.pixelsToGLUnits;return{u_camera_to_center_distance:o.cameraToCenterDistance,u_scale_with_map:+("map"===a.paint.get("circle-pitch-scale")),u_matrix:e.translatePosMatrix(t.posMatrix,i,a.paint.get("circle-translate"),a.paint.get("circle-translate-anchor")),u_pitch_with_map:+n,u_device_pixel_ratio:e.pixelRatio,u_extrude_scale:r}},At=function(e,t,i){var a=Ie(i,1,t.zoom),n=Math.pow(2,t.zoom-i.tileID.overscaledZ),r=i.tileID.overscaleFactor();return{u_matrix:e,u_camera_to_center_distance:t.cameraToCenterDistance,u_pixels_to_tile_units:a,u_extrude_scale:[t.pixelsToGLUnits[0]/(a*n),t.pixelsToGLUnits[1]/(a*n)],u_overscale_factor:r}},Ot=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return{u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:i}},Tt=function(e){return{u_matrix:e}},Mt=function(e,t,i,a){return{u_matrix:e,u_extrude_scale:Ie(t,1,i),u_intensity:a}};function Et(t,i){var a=Math.pow(2,i.canonical.z),n=i.canonical.y;return[new e.MercatorCoordinate(0,n/a).toLngLat().lat,new e.MercatorCoordinate(0,(n+1)/a).toLngLat().lat]}var It=function(e,t,i,a){var n=e.transform;return{u_matrix:jt(e,t,i,a),u_ratio:1/Ie(t,1,n.zoom),u_device_pixel_ratio:e.pixelRatio,u_units_to_pixels:[1/n.pixelsToGLUnits[0],1/n.pixelsToGLUnits[1]]}},Pt=function(t,i,a,n,r){return e.extend(It(t,i,a,r),{u_image:0,u_image_height:n})},Dt=function(e,t,i,a,n){var r=e.transform,o=Lt(t,r);return{u_matrix:jt(e,t,i,n),u_texsize:t.imageAtlasTexture.size,u_ratio:1/Ie(t,1,r.zoom),u_device_pixel_ratio:e.pixelRatio,u_image:0,u_scale:[o,a.fromScale,a.toScale],u_fade:a.t,u_units_to_pixels:[1/r.pixelsToGLUnits[0],1/r.pixelsToGLUnits[1]]}},zt=function(t,i,a,n,r,o){var s=t.lineAtlas,l=Lt(i,t.transform),c="round"===a.layout.get("line-cap"),u=s.getDash(n.from,c),h=s.getDash(n.to,c),d=u.width*r.fromScale,f=h.width*r.toScale;return e.extend(It(t,i,a,o),{u_patternscale_a:[l/d,-u.height/2],u_patternscale_b:[l/f,-h.height/2],u_sdfgamma:s.width/(256*Math.min(d,f)*t.pixelRatio)/2,u_image:0,u_tex_y_a:u.y,u_tex_y_b:h.y,u_mix:r.t})};function Lt(e,t){return 1/Ie(e,1,t.tileZoom)}function jt(e,t,i,a){return e.translatePosMatrix(a?a.posMatrix:t.tileID.posMatrix,t,i.paint.get("line-translate"),i.paint.get("line-translate-anchor"))}var Rt=function(e,t,i,a,n){return{u_matrix:e,u_tl_parent:t,u_scale_parent:i,u_buffer_scale:1,u_fade_t:a.mix,u_opacity:a.opacity*n.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:n.paint.get("raster-brightness-min"),u_brightness_high:n.paint.get("raster-brightness-max"),u_saturation_factor:(o=n.paint.get("raster-saturation"),o>0?1-1/(1.001-o):-o),u_contrast_factor:(r=n.paint.get("raster-contrast"),r>0?1/(1-r):1+r),u_spin_weights:Ft(n.paint.get("raster-hue-rotate"))};var r,o};function Ft(e){e*=Math.PI/180;var t=Math.sin(e),i=Math.cos(e);return[(2*i+1)/3,(-Math.sqrt(3)*t-i+1)/3,(Math.sqrt(3)*t-i+1)/3]}var Bt=function(e,t,i,a,n,r,o,s,l,c){var u=n.transform;return{u_is_size_zoom_constant:+("constant"===e||"source"===e),u_is_size_feature_constant:+("constant"===e||"camera"===e),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:u.cameraToCenterDistance,u_pitch:u.pitch/360*2*Math.PI,u_rotate_symbol:+i,u_aspect_ratio:u.width/u.height,u_fade_change:n.options.fadeDuration?n.symbolFadeChange:1,u_matrix:r,u_label_plane_matrix:o,u_coord_matrix:s,u_is_text:+l,u_pitch_with_map:+a,u_texsize:c,u_texture:0}},Nt=function(t,i,a,n,r,o,s,l,c,u,h){var d=r.transform;return e.extend(Bt(t,i,a,n,r,o,s,l,c,u),{u_gamma_scale:n?Math.cos(d._pitch)*d.cameraToCenterDistance:1,u_device_pixel_ratio:r.pixelRatio,u_is_halo:+h})},Vt=function(e,t,i){return{u_matrix:e,u_opacity:t,u_color:i}},Yt=function(t,i,a,n,r,o){return e.extend(function(e,t,i,a){var n=i.imageManager.getPattern(e.from.toString()),r=i.imageManager.getPattern(e.to.toString()),o=i.imageManager.getPixelSize(),s=o.width,l=o.height,c=Math.pow(2,a.tileID.overscaledZ),u=a.tileSize*Math.pow(2,i.transform.tileZoom)/c,h=u*(a.tileID.canonical.x+a.tileID.wrap*c),d=u*a.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:n.tl,u_pattern_br_a:n.br,u_pattern_tl_b:r.tl,u_pattern_br_b:r.br,u_texsize:[s,l],u_mix:t.t,u_pattern_size_a:n.displaySize,u_pattern_size_b:r.displaySize,u_scale_a:t.fromScale,u_scale_b:t.toScale,u_tile_units_to_pixels:1/Ie(a,1,i.transform.tileZoom),u_pixel_coord_upper:[h>>16,d>>16],u_pixel_coord_lower:[65535&h,65535&d]}}(n,o,a,r),{u_matrix:t,u_opacity:i})},Wt={fillExtrusion:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_lightpos:new e.Uniform3f(t,i.u_lightpos),u_lightintensity:new e.Uniform1f(t,i.u_lightintensity),u_lightcolor:new e.Uniform3f(t,i.u_lightcolor),u_vertical_gradient:new e.Uniform1f(t,i.u_vertical_gradient),u_opacity:new e.Uniform1f(t,i.u_opacity)}},fillExtrusionPattern:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_lightpos:new e.Uniform3f(t,i.u_lightpos),u_lightintensity:new e.Uniform1f(t,i.u_lightintensity),u_lightcolor:new e.Uniform3f(t,i.u_lightcolor),u_vertical_gradient:new e.Uniform1f(t,i.u_vertical_gradient),u_height_factor:new e.Uniform1f(t,i.u_height_factor),u_image:new e.Uniform1i(t,i.u_image),u_texsize:new e.Uniform2f(t,i.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,i.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,i.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,i.u_scale),u_fade:new e.Uniform1f(t,i.u_fade),u_opacity:new e.Uniform1f(t,i.u_opacity)}},fill:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix)}},fillPattern:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_image:new e.Uniform1i(t,i.u_image),u_texsize:new e.Uniform2f(t,i.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,i.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,i.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,i.u_scale),u_fade:new e.Uniform1f(t,i.u_fade)}},fillOutline:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_world:new e.Uniform2f(t,i.u_world)}},fillOutlinePattern:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_world:new e.Uniform2f(t,i.u_world),u_image:new e.Uniform1i(t,i.u_image),u_texsize:new e.Uniform2f(t,i.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,i.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,i.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,i.u_scale),u_fade:new e.Uniform1f(t,i.u_fade)}},circle:function(t,i){return{u_camera_to_center_distance:new e.Uniform1f(t,i.u_camera_to_center_distance),u_scale_with_map:new e.Uniform1i(t,i.u_scale_with_map),u_pitch_with_map:new e.Uniform1i(t,i.u_pitch_with_map),u_extrude_scale:new e.Uniform2f(t,i.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(t,i.u_matrix)}},collisionBox:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_camera_to_center_distance:new e.Uniform1f(t,i.u_camera_to_center_distance),u_pixels_to_tile_units:new e.Uniform1f(t,i.u_pixels_to_tile_units),u_extrude_scale:new e.Uniform2f(t,i.u_extrude_scale),u_overscale_factor:new e.Uniform1f(t,i.u_overscale_factor)}},collisionCircle:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_inv_matrix:new e.UniformMatrix4f(t,i.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(t,i.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(t,i.u_viewport_size)}},debug:function(t,i){return{u_color:new e.UniformColor(t,i.u_color),u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_overlay:new e.Uniform1i(t,i.u_overlay),u_overlay_scale:new e.Uniform1f(t,i.u_overlay_scale)}},clippingMask:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix)}},heatmap:function(t,i){return{u_extrude_scale:new e.Uniform1f(t,i.u_extrude_scale),u_intensity:new e.Uniform1f(t,i.u_intensity),u_matrix:new e.UniformMatrix4f(t,i.u_matrix)}},heatmapTexture:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_world:new e.Uniform2f(t,i.u_world),u_image:new e.Uniform1i(t,i.u_image),u_color_ramp:new e.Uniform1i(t,i.u_color_ramp),u_opacity:new e.Uniform1f(t,i.u_opacity)}},hillshade:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_image:new e.Uniform1i(t,i.u_image),u_latrange:new e.Uniform2f(t,i.u_latrange),u_light:new e.Uniform2f(t,i.u_light),u_shadow:new e.UniformColor(t,i.u_shadow),u_highlight:new e.UniformColor(t,i.u_highlight),u_accent:new e.UniformColor(t,i.u_accent)}},hillshadePrepare:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_image:new e.Uniform1i(t,i.u_image),u_dimension:new e.Uniform2f(t,i.u_dimension),u_zoom:new e.Uniform1f(t,i.u_zoom),u_unpack:new e.Uniform4f(t,i.u_unpack)}},line:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_ratio:new e.Uniform1f(t,i.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,i.u_units_to_pixels)}},lineGradient:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_ratio:new e.Uniform1f(t,i.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,i.u_units_to_pixels),u_image:new e.Uniform1i(t,i.u_image),u_image_height:new e.Uniform1f(t,i.u_image_height)}},linePattern:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_texsize:new e.Uniform2f(t,i.u_texsize),u_ratio:new e.Uniform1f(t,i.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_image:new e.Uniform1i(t,i.u_image),u_units_to_pixels:new e.Uniform2f(t,i.u_units_to_pixels),u_scale:new e.Uniform3f(t,i.u_scale),u_fade:new e.Uniform1f(t,i.u_fade)}},lineSDF:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_ratio:new e.Uniform1f(t,i.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,i.u_units_to_pixels),u_patternscale_a:new e.Uniform2f(t,i.u_patternscale_a),u_patternscale_b:new e.Uniform2f(t,i.u_patternscale_b),u_sdfgamma:new e.Uniform1f(t,i.u_sdfgamma),u_image:new e.Uniform1i(t,i.u_image),u_tex_y_a:new e.Uniform1f(t,i.u_tex_y_a),u_tex_y_b:new e.Uniform1f(t,i.u_tex_y_b),u_mix:new e.Uniform1f(t,i.u_mix)}},raster:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_tl_parent:new e.Uniform2f(t,i.u_tl_parent),u_scale_parent:new e.Uniform1f(t,i.u_scale_parent),u_buffer_scale:new e.Uniform1f(t,i.u_buffer_scale),u_fade_t:new e.Uniform1f(t,i.u_fade_t),u_opacity:new e.Uniform1f(t,i.u_opacity),u_image0:new e.Uniform1i(t,i.u_image0),u_image1:new e.Uniform1i(t,i.u_image1),u_brightness_low:new e.Uniform1f(t,i.u_brightness_low),u_brightness_high:new e.Uniform1f(t,i.u_brightness_high),u_saturation_factor:new e.Uniform1f(t,i.u_saturation_factor),u_contrast_factor:new e.Uniform1f(t,i.u_contrast_factor),u_spin_weights:new e.Uniform3f(t,i.u_spin_weights)}},symbolIcon:function(t,i){return{u_is_size_zoom_constant:new e.Uniform1i(t,i.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,i.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,i.u_size_t),u_size:new e.Uniform1f(t,i.u_size),u_camera_to_center_distance:new e.Uniform1f(t,i.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,i.u_pitch),u_rotate_symbol:new e.Uniform1i(t,i.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,i.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,i.u_fade_change),u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,i.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,i.u_coord_matrix),u_is_text:new e.Uniform1i(t,i.u_is_text),u_pitch_with_map:new e.Uniform1i(t,i.u_pitch_with_map),u_texsize:new e.Uniform2f(t,i.u_texsize),u_texture:new e.Uniform1i(t,i.u_texture)}},symbolSDF:function(t,i){return{u_is_size_zoom_constant:new e.Uniform1i(t,i.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,i.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,i.u_size_t),u_size:new e.Uniform1f(t,i.u_size),u_camera_to_center_distance:new e.Uniform1f(t,i.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,i.u_pitch),u_rotate_symbol:new e.Uniform1i(t,i.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,i.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,i.u_fade_change),u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,i.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,i.u_coord_matrix),u_is_text:new e.Uniform1i(t,i.u_is_text),u_pitch_with_map:new e.Uniform1i(t,i.u_pitch_with_map),u_texsize:new e.Uniform2f(t,i.u_texsize),u_texture:new e.Uniform1i(t,i.u_texture),u_gamma_scale:new e.Uniform1f(t,i.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(t,i.u_is_halo)}},symbolTextAndIcon:function(t,i){return{u_is_size_zoom_constant:new e.Uniform1i(t,i.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,i.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,i.u_size_t),u_size:new e.Uniform1f(t,i.u_size),u_camera_to_center_distance:new e.Uniform1f(t,i.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,i.u_pitch),u_rotate_symbol:new e.Uniform1i(t,i.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,i.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,i.u_fade_change),u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,i.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,i.u_coord_matrix),u_is_text:new e.Uniform1i(t,i.u_is_text),u_pitch_with_map:new e.Uniform1i(t,i.u_pitch_with_map),u_texsize:new e.Uniform2f(t,i.u_texsize),u_texsize_icon:new e.Uniform2f(t,i.u_texsize_icon),u_texture:new e.Uniform1i(t,i.u_texture),u_texture_icon:new e.Uniform1i(t,i.u_texture_icon),u_gamma_scale:new e.Uniform1f(t,i.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(t,i.u_is_halo)}},background:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_opacity:new e.Uniform1f(t,i.u_opacity),u_color:new e.UniformColor(t,i.u_color)}},backgroundPattern:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_opacity:new e.Uniform1f(t,i.u_opacity),u_image:new e.Uniform1i(t,i.u_image),u_pattern_tl_a:new e.Uniform2f(t,i.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(t,i.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(t,i.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(t,i.u_pattern_br_b),u_texsize:new e.Uniform2f(t,i.u_texsize),u_mix:new e.Uniform1f(t,i.u_mix),u_pattern_size_a:new e.Uniform2f(t,i.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(t,i.u_pattern_size_b),u_scale_a:new e.Uniform1f(t,i.u_scale_a),u_scale_b:new e.Uniform1f(t,i.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(t,i.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,i.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(t,i.u_tile_units_to_pixels)}},terrain:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_texture:new e.Uniform1i(t,i.u_texture)}},terrainDepth:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix)}},terrainCoords:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_texture:new e.Uniform1i(t,i.u_texture),u_terrain_coords_id:new e.Uniform1f(t,i.u_terrain_coords_id)}}},Ht=function(){function e(t,i,a){p(this,e),this.context=t;var n=t.gl;this.buffer=n.createBuffer(),this.dynamicDraw=Boolean(a),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,i.arrayBuffer,this.dynamicDraw?n.DYNAMIC_DRAW:n.STATIC_DRAW),this.dynamicDraw||delete i.arrayBuffer}return f(e,[{key:"bind",value:function(){this.context.bindElementBuffer.set(this.buffer)}},{key:"updateData",value:function(e){var t=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}},{key:"destroy",value:function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}]),e}(),Ut={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Xt=function(){function e(t,i,a,n){p(this,e),this.length=i.length,this.attributes=a,this.itemSize=i.bytesPerElement,this.dynamicDraw=n,this.context=t;var r=t.gl;this.buffer=r.createBuffer(),t.bindVertexBuffer.set(this.buffer),r.bufferData(r.ARRAY_BUFFER,i.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete i.arrayBuffer}return f(e,[{key:"bind",value:function(){this.context.bindVertexBuffer.set(this.buffer)}},{key:"updateData",value:function(e){if(e.length!==this.length)throw new Error("Length of new data is ".concat(e.length,", which doesn't match current length of ").concat(this.length));var t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)}},{key:"enableAttributes",value:function(e,t){for(var i=0;i<this.attributes.length;i++){var a=t.attributes[this.attributes[i].name];void 0!==a&&e.enableVertexAttribArray(a)}}},{key:"setVertexAttribPointers",value:function(e,t,i){for(var a=0;a<this.attributes.length;a++){var n=this.attributes[a],r=t.attributes[n.name];void 0!==r&&e.vertexAttribPointer(r,n.components,e[Ut[n.type]],!1,this.itemSize,n.offset+this.itemSize*(i||0))}}},{key:"destroy",value:function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}]),e}(),Gt=function(){function e(t){p(this,e),this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}return f(e,[{key:"get",value:function(){return this.current}},{key:"set",value:function(e){}},{key:"getDefault",value:function(){return this.default}},{key:"setDefault",value:function(){this.set(this.default)}}]),e}(),qt=function(t){m(a,t);var i=g(a);function a(){return p(this,a),i.apply(this,arguments)}return f(a,[{key:"getDefault",value:function(){return e.Color.transparent}},{key:"set",value:function(e){var t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}]),a}(Gt),Zt=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"getDefault",value:function(){return 1}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}]),i}(Gt),Kt=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"getDefault",value:function(){return 0}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}]),i}(Gt),Jt=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"getDefault",value:function(){return[!0,!0,!0,!0]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}]),i}(Gt),Qt=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"getDefault",value:function(){return!0}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}]),i}(Gt),$t=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"getDefault",value:function(){return 255}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}]),i}(Gt),ei=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"getDefault",value:function(){return{func:this.gl.ALWAYS,ref:0,mask:255}}},{key:"set",value:function(e){var t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}]),i}(Gt),ti=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"getDefault",value:function(){var e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}]),i}(Gt),ii=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}}}]),i}(Gt),ai=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"getDefault",value:function(){return[0,1]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}]),i}(Gt),ni=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}}}]),i}(Gt),ri=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"getDefault",value:function(){return this.gl.LESS}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}]),i}(Gt),oi=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}}}]),i}(Gt),si=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"getDefault",value:function(){var e=this.gl;return[e.ONE,e.ZERO]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}]),i}(Gt),li=function(t){m(a,t);var i=g(a);function a(){return p(this,a),i.apply(this,arguments)}return f(a,[{key:"getDefault",value:function(){return e.Color.transparent}},{key:"set",value:function(e){var t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}]),a}(Gt),ci=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"getDefault",value:function(){return this.gl.FUNC_ADD}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}]),i}(Gt),ui=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}}}]),i}(Gt),hi=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"getDefault",value:function(){return this.gl.BACK}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}]),i}(Gt),di=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"getDefault",value:function(){return this.gl.CCW}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}]),i}(Gt),fi=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}]),i}(Gt),pi=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"getDefault",value:function(){return this.gl.TEXTURE0}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}]),i}(Gt),mi=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"getDefault",value:function(){var e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}]),i}(Gt),gi=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}}]),i}(Gt),vi=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}}]),i}(Gt),yi=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}}}]),i}(Gt),xi=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}}]),i}(Gt),bi=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){var t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}]),i}(Gt),_i=function(e){m(i,e);var t=g(i);function i(e){var a;return p(this,i),(a=t.call(this,e)).vao=e.extVertexArrayObject,a}return f(i,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){this.vao&&(e!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(e),this.current=e,this.dirty=!1)}}]),i}(Gt),wi=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"getDefault",value:function(){return 4}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}}]),i}(Gt),ki=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}}]),i}(Gt),Si=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}}]),i}(Gt),Ci=function(e){m(i,e);var t=g(i);function i(e,a){var n;return p(this,i),(n=t.call(this,e)).context=e,n.parent=a,n}return f(i,[{key:"getDefault",value:function(){return null}}]),i}(Gt),Ai=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"setDirty",value:function(){this.dirty=!0}},{key:"set",value:function(e){if(e!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}}]),i}(Ci),Oi=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"set",value:function(e){if(e!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}}]),i}(Ci),Ti=function(){function e(t,i,a,n){p(this,e),this.context=t,this.width=i,this.height=a;var r=t.gl,o=this.framebuffer=r.createFramebuffer();if(this.colorAttachment=new Ai(t,o),n&&(this.depthAttachment=new Oi(t,o)),r.checkFramebufferStatus(r.FRAMEBUFFER)!==r.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}return f(e,[{key:"destroy",value:function(){var e=this.context.gl,t=this.colorAttachment.get();if(t&&e.deleteTexture(t),this.depthAttachment){var i=this.depthAttachment.get();i&&e.deleteRenderbuffer(i)}e.deleteFramebuffer(this.framebuffer)}}]),e}(),Mi=f((function e(t,i,a){p(this,e),this.blendFunction=t,this.blendColor=i,this.mask=a}));Mi.Replace=[1,0],Mi.disabled=new Mi(Mi.Replace,e.Color.transparent,[!1,!1,!1,!1]),Mi.unblended=new Mi(Mi.Replace,e.Color.transparent,[!0,!0,!0,!0]),Mi.alphaBlended=new Mi([1,771],e.Color.transparent,[!0,!0,!0,!0]);var Ei=function(){function e(t){p(this,e),this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new qt(this),this.clearDepth=new Zt(this),this.clearStencil=new Kt(this),this.colorMask=new Jt(this),this.depthMask=new Qt(this),this.stencilMask=new $t(this),this.stencilFunc=new ei(this),this.stencilOp=new ti(this),this.stencilTest=new ii(this),this.depthRange=new ai(this),this.depthTest=new ni(this),this.depthFunc=new ri(this),this.blend=new oi(this),this.blendFunc=new si(this),this.blendColor=new li(this),this.blendEquation=new ci(this),this.cullFace=new ui(this),this.cullFaceSide=new hi(this),this.frontFace=new di(this),this.program=new fi(this),this.activeTexture=new pi(this),this.viewport=new mi(this),this.bindFramebuffer=new gi(this),this.bindRenderbuffer=new vi(this),this.bindTexture=new yi(this),this.bindVertexBuffer=new xi(this),this.bindElementBuffer=new bi(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new _i(this),this.pixelStoreUnpack=new wi(this),this.pixelStoreUnpackPremultiplyAlpha=new ki(this),this.pixelStoreUnpackFlipY=new Si(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(t.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)}return f(e,[{key:"setDefault",value:function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}},{key:"setDirty",value:function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}},{key:"createIndexBuffer",value:function(e,t){return new Ht(this,e,t)}},{key:"createVertexBuffer",value:function(e,t,i){return new Xt(this,e,t,i)}},{key:"createRenderbuffer",value:function(e,t,i){var a=this.gl,n=a.createRenderbuffer();return this.bindRenderbuffer.set(n),a.renderbufferStorage(a.RENDERBUFFER,e,t,i),this.bindRenderbuffer.set(null),n}},{key:"createFramebuffer",value:function(e,t,i){return new Ti(this,e,t,i)}},{key:"clear",value:function(e){var t=e.color,i=e.depth,a=this.gl,n=0;t&&(n|=a.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==i&&(n|=a.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(i),this.depthMask.set(!0)),a.clear(n)}},{key:"setCullFace",value:function(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}},{key:"setDepthMode",value:function(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}},{key:"setStencilMode",value:function(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}},{key:"setColorMode",value:function(e){c(e.blendFunction,Mi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)}},{key:"unbindVAO",value:function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}]),e}(),Ii=f((function e(t,i,a){p(this,e),this.func=t,this.mask=i,this.range=a}));Ii.ReadOnly=!1,Ii.ReadWrite=!0,Ii.disabled=new Ii(519,Ii.ReadOnly,[0,1]);var Pi=f((function e(t,i,a,n,r,o){p(this,e),this.test=t,this.ref=i,this.mask=a,this.fail=n,this.depthFail=r,this.pass=o}));Pi.disabled=new Pi({func:519,mask:0},0,0,7680,7680,7680);var Di,zi=f((function e(t,i,a){p(this,e),this.enable=t,this.mode=i,this.frontFace=a}));function Li(t,i,a,n,r,o,s){for(var l=t.context,c=l.gl,u=t.useProgram("collisionBox"),h=[],d=0,f=0,p=0;p<n.length;p++){var m=n[p],g=i.getTile(m),v=g.getBucket(a);if(v){var y=m.posMatrix;0===r[0]&&0===r[1]||(y=t.translatePosMatrix(m.posMatrix,g,r,o));var x=s?v.textCollisionBox:v.iconCollisionBox,b=v.collisionCircleArray;if(b.length>0){var _=e.create(),w=y;e.mul(_,v.placementInvProjMatrix,t.transform.glCoordMatrix),e.mul(_,_,v.placementViewportMatrix),h.push({circleArray:b,circleOffset:f,transform:w,invTransform:_,coord:m}),f=d+=b.length/4}x&&u.draw(l,c.LINES,Ii.disabled,Pi.disabled,t.colorModeForRenderPass(),zi.disabled,At(y,t.transform,g),t.style.terrain&&t.style.terrain.getTerrainData(m),a.id,x.layoutVertexBuffer,x.indexBuffer,x.segments,null,t.transform.zoom,null,null,x.collisionVertexBuffer)}}if(s&&h.length){var k=t.useProgram("collisionCircle"),S=new e.CollisionCircleLayoutArray;S.resize(4*d),S._trim();for(var C=0,A=0,O=h;A<O.length;A++)for(var T=O[A],M=0;M<T.circleArray.length/4;M++){var E=4*M,I=T.circleArray[E+0],P=T.circleArray[E+1],D=T.circleArray[E+2],z=T.circleArray[E+3];S.emplace(C++,I,P,D,z,0),S.emplace(C++,I,P,D,z,1),S.emplace(C++,I,P,D,z,2),S.emplace(C++,I,P,D,z,3)}(!Di||Di.length<2*d)&&(Di=function(t){var i=2*t,a=new e.QuadTriangleArray;a.resize(i),a._trim();for(var n=0;n<i;n++){var r=6*n;a.uint16[r+0]=4*n+0,a.uint16[r+1]=4*n+1,a.uint16[r+2]=4*n+2,a.uint16[r+3]=4*n+2,a.uint16[r+4]=4*n+3,a.uint16[r+5]=4*n+0}return a}(d));for(var L,j=l.createIndexBuffer(Di,!0),R=l.createVertexBuffer(S,e.collisionCircleLayout.members,!0),F=0,B=h;F<B.length;F++){var N=B[F],V={u_matrix:N.transform,u_inv_matrix:N.invTransform,u_camera_to_center_distance:(L=t.transform).cameraToCenterDistance,u_viewport_size:[L.width,L.height]};k.draw(l,c.TRIANGLES,Ii.disabled,Pi.disabled,t.colorModeForRenderPass(),zi.disabled,V,t.style.terrain&&t.style.terrain.getTerrainData(N.coord),a.id,R,j,e.SegmentVector.simpleSegment(0,2*N.circleOffset,N.circleArray.length,N.circleArray.length/2),null,t.transform.zoom,null,null,null)}R.destroy(),j.destroy()}}zi.disabled=new zi(!1,1029,2305),zi.backCCW=new zi(!0,1029,2305);var ji=e.identity(new Float32Array(16));function Ri(t,i,a,n,r,o){var s=e.getAnchorAlignment(t),l=-(s.horizontalAlign-.5)*i,c=-(s.verticalAlign-.5)*a,u=e.evaluateVariableOffset(t,n);return new e.pointGeometry((l/r+u[0])*o,(c/r+u[1])*o)}function Fi(t,i,a,n,r,o,s,l,c,u,h,f){var p,m=t.context,g=m.gl,v=t.transform,y="map"===l,x="map"===c,b="viewport"!==l&&"point"!==a.layout.get("symbol-placement"),_=y&&!x&&!b,w=!a.layout.get("symbol-sort-key").isConstant(),k=!1,S=t.depthModeForSublayer(0,Ii.ReadOnly),C=a.layout.get("text-variable-anchor"),A=[],O=d(n);try{var T=function(){var n=p.value,l=i.getTile(n),c=l.getBucket(a);if(!c)return"continue";var h=r?c.text:c.icon;if(!h||!h.segments.get().length)return"continue";var f=h.programConfigurations.get(a.id),m=r||c.sdfIcons,S=r?c.textSizeData:c.iconSizeData,O=x||0!==v.pitch,T=t.useProgram(function(e,t,i){return i.iconsInText&&t?"symbolTextAndIcon":e?"symbolSDF":"symbolIcon"}(m,r,c),f),M=e.evaluateSizeForZoom(S,v.zoom),E=t.style.terrain&&t.style.terrain.getTerrainData(n),I=void 0,P=void 0,D=void 0,z=void 0,L=[0,0],j=null;if(r){if(P=l.glyphAtlasTexture,D=g.LINEAR,I=l.glyphAtlasTexture.size,c.iconsInText){L=l.imageAtlasTexture.size,j=l.imageAtlasTexture;var R="composite"===S.kind||"camera"===S.kind;z=O||t.options.rotating||t.options.zooming||R?g.LINEAR:g.NEAREST}}else{var F=1!==a.layout.get("icon-size").constantOr(0)||c.iconsNeedLinear;P=l.imageAtlasTexture,D=m||t.options.rotating||t.options.zooming||F||O?g.LINEAR:g.NEAREST,I=l.imageAtlasTexture.size}var B=Ie(l,1,t.transform.zoom),N=ge(n.posMatrix,x,y,t.transform,B),V=ve(n.posMatrix,x,y,t.transform,B),Y=C&&c.hasTextData(),W="none"!==a.layout.get("icon-text-fit")&&Y&&c.hasIconData();if(b){var H=t.style.terrain?function(e,i){return t.style.terrain.getElevation(n,e,i)}:null,U="map"===a.layout.get("text-rotation-alignment");!function(t,i,a,n,r,o,s,l,c,u){var h=n?t.textSizeData:t.iconSizeData,d=e.evaluateSizeForZoom(h,a.transform.zoom),f=[256/a.width*2+1,256/a.height*2+1],p=n?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;p.clear();for(var m=t.lineVertexArray,g=n?t.text.placedSymbolArray:t.icon.placedSymbolArray,v=a.transform.width/a.transform.height,y=!1,x=0;x<g.length;x++){var b=g.get(x);if(b.hidden||b.writingMode===e.WritingMode.vertical&&!y)Oe(b.numGlyphs,p);else{var _=void 0;if(y=!1,u?(_=[b.anchorX,b.anchorY,u(b.anchorX,b.anchorY),1],e.transformMat4(_,_,i)):Te(_=[b.anchorX,b.anchorY,0,1],_,i),be(_,f)){var w=xe(a.transform.cameraToCenterDistance,_[3]),k=e.evaluateSizeForFeature(h,d,b),S=s?k/w:k*w,C=new e.pointGeometry(b.anchorX,b.anchorY),A=ye(C,r,u).point,O={},T=ke(b,S,!1,l,i,r,o,t.glyphOffsetArray,m,p,A,C,O,v,c,u);y=T.useVertical,(T.notEnoughRoom||y||T.needsFlipping&&ke(b,S,!0,l,i,r,o,t.glyphOffsetArray,m,p,A,C,O,v,c,u).notEnoughRoom)&&Oe(b.numGlyphs,p)}else Oe(b.numGlyphs,p)}}n?t.text.dynamicLayoutVertexBuffer.updateData(p):t.icon.dynamicLayoutVertexBuffer.updateData(p)}(c,n.posMatrix,t,r,N,V,x,u,U,H)}var X=t.translatePosMatrix(n.posMatrix,l,o,s),G=b||r&&C||W?ji:N,q=t.translatePosMatrix(V,l,o,s,!0),Z=m&&0!==a.paint.get(r?"text-halo-width":"icon-halo-width").constantOr(1),K={program:T,buffers:h,uniformValues:m?c.iconsInText?function(t,i,a,n,r,o,s,l,c,u){return e.extend(Nt(t,i,a,n,r,o,s,l,!0,c,!0),{u_texsize_icon:u,u_texture_icon:1})}(S.kind,M,_,x,t,X,G,q,I,L):Nt(S.kind,M,_,x,t,X,G,q,r,I,!0):Bt(S.kind,M,_,x,t,X,G,q,r,I),atlasTexture:P,atlasTextureIcon:j,atlasInterpolation:D,atlasInterpolationIcon:z,isSDF:m,hasHalo:Z};if(w&&c.canOverlap){k=!0;var J,Q=h.segments.get(),$=d(Q);try{for($.s();!(J=$.n()).done;){var ee=J.value;A.push({segments:new e.SegmentVector([ee]),sortKey:ee.sortKey,state:K,terrainData:E})}}catch(te){$.e(te)}finally{$.f()}}else A.push({segments:h.segments,sortKey:0,state:K,terrainData:E})};for(O.s();!(p=O.n()).done;)T()}catch(z){O.e(z)}finally{O.f()}k&&A.sort((function(e,t){return e.sortKey-t.sortKey}));for(var M=0,E=A;M<E.length;M++){var I=E[M],P=I.state;if(m.activeTexture.set(g.TEXTURE0),P.atlasTexture.bind(P.atlasInterpolation,g.CLAMP_TO_EDGE),P.atlasTextureIcon&&(m.activeTexture.set(g.TEXTURE1),P.atlasTextureIcon&&P.atlasTextureIcon.bind(P.atlasInterpolationIcon,g.CLAMP_TO_EDGE)),P.isSDF){var D=P.uniformValues;P.hasHalo&&(D.u_is_halo=1,Bi(P.buffers,I.segments,a,t,P.program,S,h,f,D,I.terrainData)),D.u_is_halo=0}Bi(P.buffers,I.segments,a,t,P.program,S,h,f,P.uniformValues,I.terrainData)}}function Bi(e,t,i,a,n,r,o,s,l,c){var u=a.context;n.draw(u,u.gl.TRIANGLES,r,o,s,zi.disabled,l,c,i.id,e.layoutVertexBuffer,e.indexBuffer,t,i.paint,a.transform.zoom,e.programConfigurations.get(i.id),e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer)}function Ni(e,t,i,a,n,r,o){var s,l,c,u,h,f=e.context.gl,p=i.paint.get("fill-pattern"),m=p&&p.constantOr(1),g=i.getCrossfadeParameters();o?(l=m&&!i.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=f.LINES):(l=m?"fillPattern":"fill",s=f.TRIANGLES);var v,y=d(a);try{for(y.s();!(v=y.n()).done;){var x=v.value,b=t.getTile(x);if(!m||b.patternsLoaded()){var _=b.getBucket(i);if(_){var w=_.programConfigurations.get(i.id),k=e.useProgram(l,w),S=e.style.terrain&&e.style.terrain.getTerrainData(x);m&&(e.context.activeTexture.set(f.TEXTURE0),b.imageAtlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE),w.updatePaintBuffers(g));var C=p.constantOr(null);if(C&&b.imageAtlas){var A=b.imageAtlas,O=A.patternPositions[C.to.toString()],T=A.patternPositions[C.from.toString()];O&&T&&w.setConstantPatternPositions(O,T)}var M=S?x:null,E=e.translatePosMatrix(M?M.posMatrix:x.posMatrix,b,i.paint.get("fill-translate"),i.paint.get("fill-translate-anchor"));if(o){u=_.indexBuffer2,h=_.segments2;var I=[f.drawingBufferWidth,f.drawingBufferHeight];c="fillOutlinePattern"===l&&m?St(E,e,g,b,I):kt(E,I)}else u=_.indexBuffer,h=_.segments,c=m?wt(E,e,g,b):_t(E);k.draw(e.context,s,n,e.stencilModeForClipping(x),r,zi.disabled,c,S,i.id,_.layoutVertexBuffer,u,h,i.paint,e.transform.zoom,w)}}}}catch(P){y.e(P)}finally{y.f()}}function Vi(e,t,i,a,n,r,o){var s,l=e.context,c=l.gl,u=i.paint.get("fill-extrusion-pattern"),h=u.constantOr(1),f=i.getCrossfadeParameters(),p=i.paint.get("fill-extrusion-opacity"),m=d(a);try{for(m.s();!(s=m.n()).done;){var g=s.value,v=t.getTile(g),y=v.getBucket(i);if(y){var x=e.style.terrain&&e.style.terrain.getTerrainData(g),b=y.programConfigurations.get(i.id),_=e.useProgram(h?"fillExtrusionPattern":"fillExtrusion",b);h&&(e.context.activeTexture.set(c.TEXTURE0),v.imageAtlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE),b.updatePaintBuffers(f));var w=u.constantOr(null);if(w&&v.imageAtlas){var k=v.imageAtlas,S=k.patternPositions[w.to.toString()],C=k.patternPositions[w.from.toString()];S&&C&&b.setConstantPatternPositions(S,C)}var A=e.translatePosMatrix(g.posMatrix,v,i.paint.get("fill-extrusion-translate"),i.paint.get("fill-extrusion-translate-anchor")),O=i.paint.get("fill-extrusion-vertical-gradient"),T=h?bt(A,e,O,p,g,f,v):xt(A,e,O,p);_.draw(l,l.gl.TRIANGLES,n,r,o,zi.backCCW,T,x,i.id,y.layoutVertexBuffer,y.indexBuffer,y.segments,i.paint,e.transform.zoom,b,e.style.terrain&&y.centroidVertexBuffer)}}}catch(M){m.e(M)}finally{m.f()}}function Yi(e,t,i,a,n,r,o){var s=e.context,l=s.gl,c=i.fbo;if(c){var u=e.useProgram("hillshade"),h=e.style.terrain&&e.style.terrain.getTerrainData(t);s.activeTexture.set(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,c.colorAttachment.get()),u.draw(s,l.TRIANGLES,n,r,o,zi.disabled,function(e,t,i,a){var n=i.paint.get("hillshade-shadow-color"),r=i.paint.get("hillshade-highlight-color"),o=i.paint.get("hillshade-accent-color"),s=i.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===i.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle);var l=!e.options.moving;return{u_matrix:a?a.posMatrix:e.transform.calculatePosMatrix(t.tileID.toUnwrapped(),l),u_image:0,u_latrange:Et(0,t.tileID),u_light:[i.paint.get("hillshade-exaggeration"),s],u_shadow:n,u_highlight:r,u_accent:o}}(e,i,a,h?t:null),h,a.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}}function Wi(t,i,a,n,r,o){var s=t.context,l=s.gl,c=i.dem;if(c&&c.data){var u=c.dim,h=c.stride,d=c.getPixels();if(s.activeTexture.set(l.TEXTURE1),s.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||t.getTileTexture(h),i.demTexture){var f=i.demTexture;f.update(d,{premultiply:!1}),f.bind(l.NEAREST,l.CLAMP_TO_EDGE)}else i.demTexture=new x(s,d,l.RGBA,{premultiply:!1}),i.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);s.activeTexture.set(l.TEXTURE0);var p=i.fbo;if(!p){var m=new x(s,{width:u,height:u,data:null},l.RGBA);m.bind(l.LINEAR,l.CLAMP_TO_EDGE),(p=i.fbo=s.createFramebuffer(u,u,!0)).colorAttachment.set(m.texture)}s.bindFramebuffer.set(p.framebuffer),s.viewport.set([0,0,u,u]),t.useProgram("hillshadePrepare").draw(s,l.TRIANGLES,n,r,o,zi.disabled,function(t,i){var a=i.stride,n=e.create();return e.ortho(n,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(n,n,[0,-e.EXTENT,0]),{u_matrix:n,u_image:1,u_dimension:[a,a],u_zoom:t.overscaledZ,u_unpack:i.getUnpackVector()}}(i.tileID,c),null,a.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function Hi(t,i,a,n,r,o){var s=n.paint.get("raster-fade-duration");if(!o&&s>0){var l=e.exported.now(),c=(l-t.timeAdded)/s,u=i?(l-i.timeAdded)/s:-1,h=a.getSource(),d=r.coveringZoomLevel({tileSize:h.tileSize,roundZoom:h.roundZoom}),f=!i||Math.abs(i.tileID.overscaledZ-d)>Math.abs(t.tileID.overscaledZ-d),p=f&&t.refreshedUponExpiration?1:e.clamp(f?c:1-u,0,1);return t.refreshedUponExpiration&&c>=1&&(t.refreshedUponExpiration=!1),i?{opacity:1,mix:1-p}:{opacity:p,mix:0}}return{opacity:1,mix:0}}var Ui=new e.Color(1,0,0,1),Xi=new e.Color(0,1,0,1),Gi=new e.Color(0,0,1,1),qi=new e.Color(1,0,1,1),Zi=new e.Color(0,1,1,1);function Ki(e,t,i,a){Qi(e,0,t+i/2,e.transform.width,i,a)}function Ji(e,t,i,a){Qi(e,t-i/2,0,i,e.transform.height,a)}function Qi(e,t,i,a,n,r){var o=e.context,s=o.gl;s.enable(s.SCISSOR_TEST),s.scissor(t*e.pixelRatio,i*e.pixelRatio,a*e.pixelRatio,n*e.pixelRatio),o.clear({color:r}),s.disable(s.SCISSOR_TEST)}function $i(t,i,a){var n=t.context,r=n.gl,o=a.posMatrix,s=t.useProgram("debug"),l=Ii.disabled,c=Pi.disabled,u=t.colorModeForRenderPass(),h="$debug",d=t.style.terrain&&t.style.terrain.getTerrainData(a);n.activeTexture.set(r.TEXTURE0),t.emptyTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE);var f=i.getTileByID(a.key).latestRawTileData,p=Math.floor((f&&f.byteLength||0)/1024),m=i.getTile(a).tileSize,g=512/Math.min(m,512)*(a.overscaledZ/t.transform.zoom)*.5,v=a.canonical.toString();a.overscaledZ!==a.canonical.z&&(v+=" => ".concat(a.overscaledZ)),function(e,t){e.initDebugOverlayCanvas();var i=e.debugOverlayCanvas,a=e.context.gl,n=e.debugOverlayCanvas.getContext("2d");n.clearRect(0,0,i.width,i.height),n.shadowColor="white",n.shadowBlur=2,n.lineWidth=1.5,n.strokeStyle="white",n.textBaseline="top",n.font="bold 36px Open Sans, sans-serif",n.fillText(t,5,5),n.strokeText(t,5,5),e.debugOverlayTexture.update(i),e.debugOverlayTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE)}(t,"".concat(v," ").concat(p,"kB")),s.draw(n,r.TRIANGLES,l,c,Mi.alphaBlended,zi.disabled,Ot(o,e.Color.transparent,g),null,h,t.debugBuffer,t.quadTriangleIndexBuffer,t.debugSegments),s.draw(n,r.LINE_STRIP,l,c,u,zi.disabled,Ot(o,e.Color.red),d,h,t.debugBuffer,t.tileBorderIndexBuffer,t.debugSegments)}function ea(e,t,i){var a=e.context,n=a.gl,r=e.colorModeForRenderPass(),o=new Ii(n.LEQUAL,Ii.ReadWrite,e.depthRangeFor3D),s=e.useProgram("terrain"),l=t.getTerrainMesh(),c=t.getTerrainData(i.tileID);a.bindFramebuffer.set(null),a.viewport.set([0,0,e.width,e.height]),a.activeTexture.set(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,t.getRTTFramebuffer().colorAttachment.get());var u=e.transform.calculatePosMatrix(i.tileID.toUnwrapped());s.draw(a,n.TRIANGLES,o,Pi.disabled,r,zi.backCCW,{u_matrix:u,u_texture:0},c,"terrain",l.vertexBuffer,l.indexBuffer,l.segments)}function ta(e,t,i,a){var n=e.context,r=i.tileSize*t.qualityFactor;i.textures[a]||(i.textures[a]=e.getTileTexture(r)||new x(n,{width:r,height:r,data:null},n.gl.RGBA),i.textures[a].bind(n.gl.LINEAR,n.gl.CLAMP_TO_EDGE),0===a&&t.sourceCache.renderHistory.unshift(i.tileID.key));var o=t.getRTTFramebuffer();o.colorAttachment.set(i.textures[a].texture),n.bindFramebuffer.set(o.framebuffer),n.viewport.set([0,0,r,r])}var ia=function(){function t(e){p(this,t),this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=e,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=e.style.terrain.sourceCache.getRenderableTiles(),this._init()}return f(t,[{key:"_init",value:function(){var e=this,t=this.painter.style,i=t.terrain;for(var a in t.sourceCaches){this._coordsDescendingInv[a]={};var n,r=t.sourceCaches[a].getVisibleCoordinates(),o=d(r);try{for(o.s();!(n=o.n()).done;){var s=n.value,l=i.sourceCache.getTerrainCoords(s);for(var c in l)this._coordsDescendingInv[a][c]||(this._coordsDescendingInv[a][c]=[]),this._coordsDescendingInv[a][c].push(l[c])}}catch(v){o.e(v)}finally{o.f()}}var u,h=d(t._order);try{for(h.s();!(u=h.n()).done;){var f=u.value,p=t._layers[f],m=p.source;if(this._renderToTexture[p.type]&&!this._coordsDescendingInvStr[m])for(var g in this._coordsDescendingInvStr[m]={},this._coordsDescendingInv[m])this._coordsDescendingInvStr[m][g]=this._coordsDescendingInv[m][g].map((function(e){return e.key})).sort().join()}}catch(v){h.e(v)}finally{h.f()}return this._renderableTiles.forEach((function(t){for(var a in e._coordsDescendingInvStr){var n=e._coordsDescendingInvStr[a][t.tileID.key];n&&n!==t.textureCoords[a]&&t.clearTextures(e.painter),i.needsRerender(a,t.tileID)&&t.clearTextures(e.painter)}e._rerender[t.tileID.key]=!t.textures.length})),i.clearRerenderCache(),i.sourceCache.removeOutdated(this.painter),this}},{key:"renderLayer",value:function(t){var i=t.type,a=this.painter,n=a.style._order,r=a.currentLayer,o=r+1===n.length;if(this._renderToTexture[i]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=i,this._stacks[this._stacks.length-1].push(n[r]),!o))return!0;if(this._renderToTexture[this._prevType]||"hillshade"===i||this._renderToTexture[i]&&o){this._prevType=i;var s,l=this._stacks.length-1,c=this._stacks[l]||[],u=d(this._renderableTiles);try{for(u.s();!(s=u.n()).done;){var h=s.value;if(ta(a,a.style.terrain,h,l),this._rerender[h.tileID.key]){a.context.clear({color:e.Color.transparent});for(var f=0;f<c.length;f++){var p=a.style._layers[c[f]],m=p.source?this._coordsDescendingInv[p.source][h.tileID.key]:[h.tileID];a._renderTileClippingMasks(p,m),a.renderLayer(a,a.style.sourceCaches[p.source],p,m),p.source&&(h.textureCoords[p.source]=this._coordsDescendingInvStr[p.source][h.tileID.key])}}ea(a,a.style.terrain,h)}}catch(b){u.e(b)}finally{u.f()}if("hillshade"===i){this._stacks.push([n[r]]);var g,v=d(this._renderableTiles);try{for(v.s();!(g=v.n()).done;){var y=g.value,x=this._coordsDescendingInv[t.source][y.tileID.key];ta(a,a.style.terrain,y,this._stacks.length-1),a.context.clear({color:e.Color.transparent}),a._renderTileClippingMasks(t,x),a.renderLayer(a,a.style.sourceCaches[t.source],t,x),ea(a,a.style.terrain,y)}}catch(b){v.e(b)}finally{v.f()}return!0}return this._renderToTexture[i]}return!1}}]),t}(),aa={symbol:function(t,i,a,n,r){if("translucent"===t.renderPass){var o=Pi.disabled,s=t.colorModeForRenderPass();a.layout.get("text-variable-anchor")&&function(t,i,a,n,r,o,s){var l,c=i.transform,u="map"===r,h="map"===o,f=d(t);try{var p=function(){var t=l.value,r=n.getTile(t),o=r.getBucket(a);if(!o||!o.text||!o.text.segments.get().length)return"continue";var d=e.evaluateSizeForZoom(o.textSizeData,c.zoom),f=Ie(r,1,i.transform.zoom),p=ge(t.posMatrix,h,u,i.transform,f),m="none"!==a.layout.get("icon-text-fit")&&o.hasIconData();if(d){var g=Math.pow(2,c.zoom-r.tileID.overscaledZ);!function(t,i,a,n,r,o,s,l,c,u,h){var d=t.text.placedSymbolArray,f=t.text.dynamicLayoutVertexArray,p=t.icon.dynamicLayoutVertexArray,m={};f.clear();for(var g=0;g<d.length;g++){var v=d.get(g),y=t.allowVerticalPlacement&&!v.placedOrientation,x=v.hidden||!v.crossTileID||y?null:n[v.crossTileID];if(x){var b=new e.pointGeometry(v.anchorX,v.anchorY),_=ye(b,a?s:o,h),w=xe(r.cameraToCenterDistance,_.signedDistanceFromCamera),k=e.evaluateSizeForFeature(t.textSizeData,c,v)*w/e.ONE_EM;a&&(k*=t.tilePixelRatio/l);for(var S=x.width,C=x.height,A=Ri(x.anchor,S,C,x.textOffset,x.textBoxScale,k),O=a?ye(b.add(A),o,h).point:_.point.add(i?A.rotate(-r.angle):A),T=t.allowVerticalPlacement&&v.placedOrientation===e.WritingMode.vertical?Math.PI/2:0,M=0;M<v.numGlyphs;M++)e.addDynamicAttributes(f,O,T);u&&v.associatedIconIndex>=0&&(m[v.associatedIconIndex]={shiftedAnchor:O,angle:T})}else Oe(v.numGlyphs,f)}if(u){p.clear();for(var E=t.icon.placedSymbolArray,I=0;I<E.length;I++){var P=E.get(I);if(P.hidden)Oe(P.numGlyphs,p);else{var D=m[I];if(D)for(var z=0;z<P.numGlyphs;z++)e.addDynamicAttributes(p,D.shiftedAnchor,D.angle);else Oe(P.numGlyphs,p)}}t.icon.dynamicLayoutVertexBuffer.updateData(p)}t.text.dynamicLayoutVertexBuffer.updateData(f)}(o,u,h,s,c,p,t.posMatrix,g,d,m,i.style.terrain?function(e,a){return i.style.terrain.getElevation(t,e,a)}:null)}};for(f.s();!(l=f.n()).done;)p()}catch(m){f.e(m)}finally{f.f()}}(n,t,a,i,a.layout.get("text-rotation-alignment"),a.layout.get("text-pitch-alignment"),r),0!==a.paint.get("icon-opacity").constantOr(1)&&Fi(t,i,a,n,!1,a.paint.get("icon-translate"),a.paint.get("icon-translate-anchor"),a.layout.get("icon-rotation-alignment"),a.layout.get("icon-pitch-alignment"),a.layout.get("icon-keep-upright"),o,s),0!==a.paint.get("text-opacity").constantOr(1)&&Fi(t,i,a,n,!0,a.paint.get("text-translate"),a.paint.get("text-translate-anchor"),a.layout.get("text-rotation-alignment"),a.layout.get("text-pitch-alignment"),a.layout.get("text-keep-upright"),o,s),i.map.showCollisionBoxes&&(Li(t,i,a,n,a.paint.get("text-translate"),a.paint.get("text-translate-anchor"),!0),Li(t,i,a,n,a.paint.get("icon-translate"),a.paint.get("icon-translate-anchor"),!1))}},circle:function(t,i,a,n){if("translucent"===t.renderPass){var r=a.paint.get("circle-opacity"),o=a.paint.get("circle-stroke-width"),s=a.paint.get("circle-stroke-opacity"),l=!a.layout.get("circle-sort-key").isConstant();if(0!==r.constantOr(1)||0!==o.constantOr(1)&&0!==s.constantOr(1)){for(var c=t.context,u=c.gl,h=t.depthModeForSublayer(0,Ii.ReadOnly),f=Pi.disabled,p=t.colorModeForRenderPass(),m=[],g=0;g<n.length;g++){var v=n[g],y=i.getTile(v),x=y.getBucket(a);if(x){var b=x.programConfigurations.get(a.id),_=t.useProgram("circle",b),w=x.layoutVertexBuffer,k=x.indexBuffer,S=t.style.terrain&&t.style.terrain.getTerrainData(v),C={programConfiguration:b,program:_,layoutVertexBuffer:w,indexBuffer:k,uniformValues:Ct(t,v,y,a),terrainData:S};if(l){var A,O=x.segments.get(),T=d(O);try{for(T.s();!(A=T.n()).done;){var M=A.value;m.push({segments:new e.SegmentVector([M]),sortKey:M.sortKey,state:C})}}catch(N){T.e(N)}finally{T.f()}}else m.push({segments:x.segments,sortKey:0,state:C})}}l&&m.sort((function(e,t){return e.sortKey-t.sortKey}));for(var E=0,I=m;E<I.length;E++){var P=I[E],D=P.state,z=D.programConfiguration,L=D.program,j=D.layoutVertexBuffer,R=D.indexBuffer,F=D.uniformValues,B=D.terrainData;L.draw(c,u.TRIANGLES,h,f,p,zi.disabled,F,B,a.id,j,R,P.segments,a.paint,t.transform.zoom,z)}}}},heatmap:function(t,i,a,n){if(0!==a.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){var r=t.context,o=r.gl,s=Pi.disabled,l=new Mi([o.ONE,o.ONE],e.Color.transparent,[!0,!0,!0,!0]);!function(e,t,i){var a=e.gl;e.activeTexture.set(a.TEXTURE1),e.viewport.set([0,0,t.width/4,t.height/4]);var n=i.heatmapFbo;if(n)a.bindTexture(a.TEXTURE_2D,n.colorAttachment.get()),e.bindFramebuffer.set(n.framebuffer);else{var r=a.createTexture();a.bindTexture(a.TEXTURE_2D,r),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),n=i.heatmapFbo=e.createFramebuffer(t.width/4,t.height/4,!1),function(e,t,i,a){var n=e.gl;n.texImage2D(n.TEXTURE_2D,0,n.RGBA,t.width/4,t.height/4,0,n.RGBA,e.extRenderToTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:n.UNSIGNED_BYTE,null),a.colorAttachment.set(i)}(e,t,r,n)}}(r,t,a),r.clear({color:e.Color.transparent});for(var c=0;c<n.length;c++){var u=n[c];if(!i.hasRenderableParent(u)){var h=i.getTile(u),d=h.getBucket(a);if(d){var f=d.programConfigurations.get(a.id),p=t.useProgram("heatmap",f),m=t.transform.zoom;p.draw(r,o.TRIANGLES,Ii.disabled,s,l,zi.disabled,Mt(u.posMatrix,h,m,a.paint.get("heatmap-intensity")),null,a.id,d.layoutVertexBuffer,d.indexBuffer,d.segments,a.paint,t.transform.zoom,f)}}}r.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,i){var a=t.context,n=a.gl,r=i.heatmapFbo;if(r){a.activeTexture.set(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,r.colorAttachment.get()),a.activeTexture.set(n.TEXTURE1);var o=i.colorRampTexture;o||(o=i.colorRampTexture=new x(a,i.colorRamp,n.RGBA)),o.bind(n.LINEAR,n.CLAMP_TO_EDGE),t.useProgram("heatmapTexture").draw(a,n.TRIANGLES,Ii.disabled,Pi.disabled,t.colorModeForRenderPass(),zi.disabled,function(t,i,a,n){var r=e.create();e.ortho(r,0,t.width,t.height,0,0,1);var o=t.context.gl;return{u_matrix:r,u_world:[o.drawingBufferWidth,o.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:i.paint.get("heatmap-opacity")}}(t,i),null,i.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,i.paint,t.transform.zoom)}}(t,a))},line:function(t,i,a,n){if("translucent"===t.renderPass){var r=a.paint.get("line-opacity"),o=a.paint.get("line-width");if(0!==r.constantOr(1)&&0!==o.constantOr(1)){var s,l=t.depthModeForSublayer(0,Ii.ReadOnly),c=t.colorModeForRenderPass(),u=a.paint.get("line-dasharray"),h=a.paint.get("line-pattern"),f=h.constantOr(1),p=a.paint.get("line-gradient"),m=a.getCrossfadeParameters(),g=f?"linePattern":u?"lineSDF":p?"lineGradient":"line",v=t.context,y=v.gl,b=!0,_=d(n);try{for(_.s();!(s=_.n()).done;){var w=s.value,k=i.getTile(w);if(!f||k.patternsLoaded()){var S=k.getBucket(a);if(S){var C=S.programConfigurations.get(a.id),A=t.context.program.get(),O=t.useProgram(g,C),T=b||O.program!==A,M=t.style.terrain&&t.style.terrain.getTerrainData(w),E=h.constantOr(null);if(E&&k.imageAtlas){var I=k.imageAtlas,P=I.patternPositions[E.to.toString()],D=I.patternPositions[E.from.toString()];P&&D&&C.setConstantPatternPositions(P,D)}var z=M?w:null,L=f?Dt(t,k,a,m,z):u?zt(t,k,a,u,m,z):p?Pt(t,k,a,S.lineClipsArray.length,z):It(t,k,a,z);if(f)v.activeTexture.set(y.TEXTURE0),k.imageAtlasTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE),C.updatePaintBuffers(m);else if(u&&(T||t.lineAtlas.dirty))v.activeTexture.set(y.TEXTURE0),t.lineAtlas.bind(v);else if(p){var j=S.gradients[a.id],R=j.texture;if(a.gradientVersion!==j.version){var F=256;if(a.stepInterpolant){var B=i.getSource().maxzoom,N=w.canonical.z===B?Math.ceil(1<<t.transform.maxZoom-w.canonical.z):1;F=e.clamp(e.nextPowerOfTwo(S.maxLineLength/e.EXTENT*1024*N),256,v.maxTextureSize)}j.gradient=e.renderColorRamp({expression:a.gradientExpression(),evaluationKey:"lineProgress",resolution:F,image:j.gradient||void 0,clips:S.lineClipsArray}),j.texture?j.texture.update(j.gradient):j.texture=new x(v,j.gradient,y.RGBA),j.version=a.gradientVersion,R=j.texture}v.activeTexture.set(y.TEXTURE0),R.bind(a.stepInterpolant?y.NEAREST:y.LINEAR,y.CLAMP_TO_EDGE)}O.draw(v,y.TRIANGLES,l,t.stencilModeForClipping(w),c,zi.disabled,L,M,a.id,S.layoutVertexBuffer,S.indexBuffer,S.segments,a.paint,t.transform.zoom,C,S.layoutVertexBuffer2),b=!1}}}}catch(V){_.e(V)}finally{_.f()}}}},fill:function(t,i,a,n){var r=a.paint.get("fill-color"),o=a.paint.get("fill-opacity");if(0!==o.constantOr(1)){var s=t.colorModeForRenderPass(),l=a.paint.get("fill-pattern"),c=t.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===r.constantOr(e.Color.transparent).a&&1===o.constantOr(0)?"opaque":"translucent";if(t.renderPass===c){var u=t.depthModeForSublayer(1,"opaque"===t.renderPass?Ii.ReadWrite:Ii.ReadOnly);Ni(t,i,a,n,u,s,!1)}if("translucent"===t.renderPass&&a.paint.get("fill-antialias")){var h=t.depthModeForSublayer(a.getPaintProperty("fill-outline-color")?2:0,Ii.ReadOnly);Ni(t,i,a,n,h,s,!0)}}},"fill-extrusion":function(e,t,i,a){var n=i.paint.get("fill-extrusion-opacity");if(0!==n&&"translucent"===e.renderPass){var r=new Ii(e.context.gl.LEQUAL,Ii.ReadWrite,e.depthRangeFor3D);if(1!==n||i.paint.get("fill-extrusion-pattern").constantOr(1))Vi(e,t,i,a,r,Pi.disabled,Mi.disabled),Vi(e,t,i,a,r,e.stencilModeFor3D(),e.colorModeForRenderPass());else{var o=e.colorModeForRenderPass();Vi(e,t,i,a,r,Pi.disabled,o)}}},hillshade:function(e,t,i,a){if("offscreen"===e.renderPass||"translucent"===e.renderPass){var n,r=e.context,o=e.depthModeForSublayer(0,Ii.ReadOnly),s=e.colorModeForRenderPass(),l="translucent"===e.renderPass?e.stencilConfigForOverlap(a):[{},a],c=h(l,2),u=c[0],f=c[1],p=d(f);try{for(p.s();!(n=p.n()).done;){var m=n.value,g=t.getTile(m);void 0!==g.needsHillshadePrepare&&g.needsHillshadePrepare&&"offscreen"===e.renderPass?Wi(e,g,i,o,Pi.disabled,s):"translucent"===e.renderPass&&Yi(e,m,g,i,o,u[m.overscaledZ],s)}}catch(v){p.e(v)}finally{p.f()}r.viewport.set([0,0,e.width,e.height])}},raster:function(e,t,i,a){if("translucent"===e.renderPass&&0!==i.paint.get("raster-opacity")&&a.length){var n,r=e.context,o=r.gl,s=t.getSource(),l=e.useProgram("raster"),c=e.colorModeForRenderPass(),u=s instanceof B?[{},a]:e.stencilConfigForOverlap(a),f=h(u,2),p=f[0],m=f[1],g=m[m.length-1].overscaledZ,v=!e.options.moving,y=d(m);try{for(y.s();!(n=y.n()).done;){var x=n.value,b=e.depthModeForSublayer(x.overscaledZ-g,1===i.paint.get("raster-opacity")?Ii.ReadWrite:Ii.ReadOnly,o.LESS),_=t.getTile(x);_.registerFadeDuration(i.paint.get("raster-fade-duration"));var w=t.findLoadedParent(x,0),k=Hi(_,w,t,i,e.transform,e.style.terrain),S=void 0,C=void 0,A="nearest"===i.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;r.activeTexture.set(o.TEXTURE0),_.texture.bind(A,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),r.activeTexture.set(o.TEXTURE1),w?(w.texture.bind(A,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),S=Math.pow(2,w.tileID.overscaledZ-_.tileID.overscaledZ),C=[_.tileID.canonical.x*S%1,_.tileID.canonical.y*S%1]):_.texture.bind(A,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST);var O=e.style.terrain&&e.style.terrain.getTerrainData(x),T=O?x:null,M=T?T.posMatrix:e.transform.calculatePosMatrix(x.toUnwrapped(),v),E=Rt(M,C||[0,0],S||1,k,i);s instanceof B?l.draw(r,o.TRIANGLES,b,Pi.disabled,c,zi.disabled,E,O,i.id,s.boundsBuffer,e.quadTriangleIndexBuffer,s.boundsSegments):l.draw(r,o.TRIANGLES,b,p[x.overscaledZ],c,zi.disabled,E,O,i.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}}catch(I){y.e(I)}finally{y.f()}}},background:function(e,t,i,a){var n=i.paint.get("background-color"),r=i.paint.get("background-opacity");if(0!==r){var o=e.context,s=o.gl,l=e.transform,c=l.tileSize,u=i.paint.get("background-pattern");if(!e.isPatternMissing(u)){var h=!u&&1===n.a&&1===r&&e.opaquePassEnabledForLayer()?"opaque":"translucent";if(e.renderPass===h){var f=Pi.disabled,p=e.depthModeForSublayer(0,"opaque"===h?Ii.ReadWrite:Ii.ReadOnly),m=e.colorModeForRenderPass(),g=e.useProgram(u?"backgroundPattern":"background"),v=a||l.coveringTiles({tileSize:c,terrain:e.style.terrain});u&&(o.activeTexture.set(s.TEXTURE0),e.imageManager.bind(e.context));var y,x=i.getCrossfadeParameters(),b=d(v);try{for(b.s();!(y=b.n()).done;){var _=y.value,w=a?_.posMatrix:e.transform.calculatePosMatrix(_.toUnwrapped()),k=u?Yt(w,r,e,u,{tileID:_,tileSize:c},x):Vt(w,r,n),S=e.style.terrain&&e.style.terrain.getTerrainData(_);g.draw(o,s.TRIANGLES,p,f,m,zi.disabled,k,S,i.id,e.tileExtentBuffer,e.quadTriangleIndexBuffer,e.tileExtentSegments)}}catch(C){b.e(C)}finally{b.f()}}}}},debug:function(e,t,i){for(var a=0;a<i.length;a++)$i(e,t,i[a])},custom:function(e,t,i){var a=e.context,n=i.implementation;if("offscreen"===e.renderPass){var r=n.prerender;r&&(e.setCustomLayerDefaults(),a.setColorMode(e.colorModeForRenderPass()),r.call(n,a.gl,e.transform.customLayerMatrix()),a.setDirty(),e.setBaseState())}else if("translucent"===e.renderPass){e.setCustomLayerDefaults(),a.setColorMode(e.colorModeForRenderPass()),a.setStencilMode(Pi.disabled);var o="3d"===n.renderingMode?new Ii(e.context.gl.LEQUAL,Ii.ReadWrite,e.depthRangeFor3D):e.depthModeForSublayer(0,Ii.ReadOnly);a.setDepthMode(o),n.render(a.gl,e.transform.customLayerMatrix()),a.setDirty(),e.setBaseState(),a.bindFramebuffer.set(null)}}},na=function(){function t(i,a){p(this,t),this.context=new Ei(i),this.transform=a,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:e.create(),renderTime:0},this.setup(),this.numSublayers=Z.maxUnderzooming+Z.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new at,this.gpuTimers={}}return f(t,[{key:"resize",value:function(e,t,i){if(this.width=e*i,this.height=t*i,this.pixelRatio=i,this.context.viewport.set([0,0,this.width,this.height]),this.style){var a,n=d(this.style._order);try{for(n.s();!(a=n.n()).done;){var r=a.value;this.style._layers[r].resize()}}catch(o){n.e(o)}finally{n.f()}}}},{key:"setup",value:function(){var t=this.context,i=new e.PosArray;i.emplaceBack(0,0),i.emplaceBack(e.EXTENT,0),i.emplaceBack(0,e.EXTENT),i.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(i,nt.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);var a=new e.PosArray;a.emplaceBack(0,0),a.emplaceBack(e.EXTENT,0),a.emplaceBack(0,e.EXTENT),a.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=t.createVertexBuffer(a,nt.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);var n=new e.RasterBoundsArray;n.emplaceBack(0,0,0,0),n.emplaceBack(e.EXTENT,0,e.EXTENT,0),n.emplaceBack(0,e.EXTENT,0,e.EXTENT),n.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.rasterBoundsBuffer=t.createVertexBuffer(n,F.members),this.rasterBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);var r=new e.PosArray;r.emplaceBack(0,0),r.emplaceBack(1,0),r.emplaceBack(0,1),r.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(r,nt.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);var o=new e.LineStripIndexArray;o.emplaceBack(0),o.emplaceBack(1),o.emplaceBack(3),o.emplaceBack(2),o.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(o);var s=new e.TriangleIndexArray;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(s),this.emptyTexture=new x(t,{width:1,height:1,data:new Uint8Array([0,0,0,0])},t.gl.RGBA);var l=this.context.gl;this.stencilClearMode=new Pi({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO)}},{key:"clearStencil",value:function(){var t=this.context,i=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var a=e.create();e.ortho(a,0,this.width,this.height,0,0,1),e.scale(a,a,[i.drawingBufferWidth,i.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(t,i.TRIANGLES,Ii.disabled,this.stencilClearMode,Mi.disabled,zi.disabled,Tt(a),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}},{key:"_renderTileClippingMasks",value:function(e,t){if(this.currentStencilSource!==e.source&&e.isTileClipped()&&t&&t.length){this.currentStencilSource=e.source;var i=this.context,a=i.gl;this.nextStencilID+t.length>256&&this.clearStencil(),i.setColorMode(Mi.disabled),i.setDepthMode(Ii.disabled);var n=this.useProgram("clippingMask");this._tileClippingMaskIDs={};var r,o=d(t);try{for(o.s();!(r=o.n()).done;){var s=r.value,l=this._tileClippingMaskIDs[s.key]=this.nextStencilID++,c=this.style.terrain&&this.style.terrain.getTerrainData(s);n.draw(i,a.TRIANGLES,Ii.disabled,new Pi({func:a.ALWAYS,mask:0},l,255,a.KEEP,a.KEEP,a.REPLACE),Mi.disabled,zi.disabled,Tt(s.posMatrix),c,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}catch(u){o.e(u)}finally{o.f()}}}},{key:"stencilModeFor3D",value:function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var e=this.nextStencilID++,t=this.context.gl;return new Pi({func:t.NOTEQUAL,mask:255},e,255,t.KEEP,t.KEEP,t.REPLACE)}},{key:"stencilModeForClipping",value:function(e){var t=this.context.gl;return new Pi({func:t.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,t.KEEP,t.KEEP,t.REPLACE)}},{key:"stencilConfigForOverlap",value:function(e){var t=this.context.gl,i=e.sort((function(e,t){return t.overscaledZ-e.overscaledZ})),n=i[i.length-1].overscaledZ,r=i[0].overscaledZ-n+1;if(r>1){this.currentStencilSource=void 0,this.nextStencilID+r>256&&this.clearStencil();for(var o={},s=0;s<r;s++)o[s+n]=new Pi({func:t.GEQUAL,mask:255},s+this.nextStencilID,255,t.KEEP,t.KEEP,t.REPLACE);return this.nextStencilID+=r,[o,i]}return[a({},n,Pi.disabled),i]}},{key:"colorModeForRenderPass",value:function(){var t=this.context.gl;return this._showOverdrawInspector?new Mi([t.CONSTANT_COLOR,t.ONE],new e.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Mi.unblended:Mi.alphaBlended}},{key:"depthModeForSublayer",value:function(e,t,i){if(!this.opaquePassEnabledForLayer())return Ii.disabled;var a=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new Ii(i||this.context.gl.LEQUAL,t,[a,a])}},{key:"opaquePassEnabledForLayer",value:function(){return this.currentLayer<this.opaquePassCutoff}},{key:"render",value:function(t,i){var a=this;this.style=t,this.options=i,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(e.exported.now()),this.imageManager.beginFrame();var n=this.style._order,r=this.style.sourceCaches,o=this.style.terrain&&new ia(this);for(var s in r){var l=r[s];l.used&&l.prepare(this.context)}var c={},u={},h={};for(var f in r){var p=r[f];c[f]=p.getVisibleCoordinates(),u[f]=c[f].slice().reverse(),h[f]=p.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var m=0;m<n.length;m++)if(this.style._layers[n[m]].is3D()){this.opaquePassCutoff=m;break}if(o){this.opaquePassCutoff=0;var g=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!e.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||g.length)&&(e.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(t,i){var a=t.context,n=a.gl,r=Mi.unblended,o=new Ii(n.LEQUAL,Ii.ReadWrite,[0,1]),s=i.getTerrainMesh(),l=i.sourceCache.getRenderableTiles(),c=t.useProgram("terrainDepth");a.bindFramebuffer.set(i.getFramebuffer("depth").framebuffer),a.viewport.set([0,0,t.width/devicePixelRatio,t.height/devicePixelRatio]),a.clear({color:e.Color.transparent,depth:1});var u,h=d(l);try{for(h.s();!(u=h.n()).done;){var f=u.value,p=i.getTerrainData(f.tileID),m=t.transform.calculatePosMatrix(f.tileID.toUnwrapped());c.draw(a,n.TRIANGLES,o,Pi.disabled,r,zi.backCCW,{u_matrix:m},p,"terrain",s.vertexBuffer,s.indexBuffer,s.segments)}}catch(g){h.e(g)}finally{h.f()}a.bindFramebuffer.set(null),a.viewport.set([0,0,t.width,t.height])}(this,this.style.terrain),function(t,i){var a=t.context,n=a.gl,r=Mi.unblended,o=new Ii(n.LEQUAL,Ii.ReadWrite,[0,1]),s=i.getTerrainMesh(),l=i.getCoordsTexture(),c=i.sourceCache.getRenderableTiles(),u=t.useProgram("terrainCoords");a.bindFramebuffer.set(i.getFramebuffer("coords").framebuffer),a.viewport.set([0,0,t.width/devicePixelRatio,t.height/devicePixelRatio]),a.clear({color:e.Color.transparent,depth:1}),i.coordsIndex=[];var h,f=d(c);try{for(f.s();!(h=f.n()).done;){var p=h.value,m=i.getTerrainData(p.tileID);a.activeTexture.set(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,l.texture);var g=t.transform.calculatePosMatrix(p.tileID.toUnwrapped());u.draw(a,n.TRIANGLES,o,Pi.disabled,r,zi.backCCW,{u_matrix:g,u_terrain_coords_id:(255-i.coordsIndex.length)/255,u_texture:0},m,"terrain",s.vertexBuffer,s.indexBuffer,s.segments),i.coordsIndex.push(p.tileID.key)}}catch(v){f.e(v)}finally{f.f()}a.bindFramebuffer.set(null),a.viewport.set([0,0,t.width,t.height])}(this,this.style.terrain))}this.renderPass="offscreen";var v,y,x,b=d(n);try{for(b.s();!(v=b.n()).done;){var _=v.value,w=this.style._layers[_];if(w.hasOffscreenPass()&&!w.isHidden(this.transform.zoom)){var k=u[w.source];("custom"===w.type||k.length)&&this.renderLayer(this,r[w.source],w,k)}}}catch(E){b.e(E)}finally{b.f()}if(this.context.bindFramebuffer.set(null),this.context.clear({color:i.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=i.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],!o)for(this.renderPass="opaque",this.currentLayer=n.length-1;this.currentLayer>=0;this.currentLayer--){var S=this.style._layers[n[this.currentLayer]],C=r[S.source],A=c[S.source];this._renderTileClippingMasks(S,A),this.renderLayer(this,C,S,A)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<n.length;this.currentLayer++){var O=this.style._layers[n[this.currentLayer]],T=r[O.source];if(!o||!o.renderLayer(O)){var M=("symbol"===O.type?h:u)[O.source];this._renderTileClippingMasks(O,c[O.source]),this.renderLayer(this,T,O,M)}}this.options.showTileBoundaries&&(Object.values(this.style._layers).forEach((function(e){e.source&&!e.isHidden(a.transform.zoom)&&(e.source!==(x&&x.id)&&(x=a.style.sourceCaches[e.source]),(!y||y.getSource().maxzoom<x.getSource().maxzoom)&&(y=x))})),y&&aa.debug(this,y,y.getVisibleCoordinates())),this.options.showPadding&&function(e){var t=e.transform.padding;Ki(e,e.transform.height-(t.top||0),3,Ui),Ki(e,t.bottom||0,3,Xi),Ji(e,t.left||0,3,Gi),Ji(e,e.transform.width-(t.right||0),3,qi);var i=e.transform.centerPoint;!function(e,t,i,a){Qi(e,t-1,i-10,2,20,a),Qi(e,t-10,i-1,20,2,a)}(e,i.x,e.transform.height-i.y,Zi)}(this),this.context.setDefault()}},{key:"renderLayer",value:function(e,t,i,a){i.isHidden(this.transform.zoom)||("background"===i.type||"custom"===i.type||(a||[]).length)&&(this.id=i.id,this.gpuTimingStart(i),aa[i.type](e,t,i,a,this.style.placement.variableOffsets),this.gpuTimingEnd())}},{key:"gpuTimingStart",value:function(e){if(this.options.gpuTiming){var t=this.context.extTimerQuery,i=this.gpuTimers[e.id];i||(i=this.gpuTimers[e.id]={calls:0,cpuTime:0,query:t.createQueryEXT()}),i.calls++,t.beginQueryEXT(t.TIME_ELAPSED_EXT,i.query)}}},{key:"gpuTimingEnd",value:function(){if(this.options.gpuTiming){var e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}}},{key:"collectGpuTimers",value:function(){var e=this.gpuTimers;return this.gpuTimers={},e}},{key:"queryGpuTimers",value:function(e){var t={};for(var i in e){var a=e[i],n=this.context.extTimerQuery,r=n.getQueryObjectEXT(a.query,n.QUERY_RESULT_EXT)/1e6;n.deleteQueryEXT(a.query),t[i]=r}return t}},{key:"translatePosMatrix",value:function(t,i,a,n,r){if(!a[0]&&!a[1])return t;var o=r?"map"===n?this.transform.angle:0:"viewport"===n?-this.transform.angle:0;if(o){var s=Math.sin(o),l=Math.cos(o);a=[a[0]*l-a[1]*s,a[0]*s+a[1]*l]}var c=[r?a[0]:Ie(i,a[0],this.transform.zoom),r?a[1]:Ie(i,a[1],this.transform.zoom),0],u=new Float32Array(16);return e.translate(u,t,c),u}},{key:"saveTileTexture",value:function(e){var t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]}},{key:"getTileTexture",value:function(e){var t=this._tileTextures[e];return t&&t.length>0?t.pop():null}},{key:"isPatternMissing",value:function(e){if(!e)return!1;if(!e.from||!e.to)return!0;var t=this.imageManager.getPattern(e.from.toString()),i=this.imageManager.getPattern(e.to.toString());return!t||!i}},{key:"useProgram",value:function(e,t){this.cache=this.cache||{};var i=e+(t?t.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[i]||(this.cache[i]=new vt(this.context,e,ft[e],t,Wt[e],this._showOverdrawInspector,this.style.terrain)),this.cache[i]}},{key:"setCustomLayerDefaults",value:function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}},{key:"setBaseState",value:function(){var e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}},{key:"initDebugOverlayCanvas",value:function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new x(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}},{key:"destroy",value:function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}]),t}(),ra=function(){function t(e,i){p(this,t),this.points=e,this.planes=i}return f(t,null,[{key:"fromInvProjectionMatrix",value:function(i,a,n){var r=Math.pow(2,n),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((function(t){var n=1/(t=e.transformMat4([],t,i))[3]/a*r;return e.mul$1(t,t,[n,n,1/t[3],n])})),s=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((function(t){var i=e.sub([],o[t[0]],o[t[1]]),a=e.sub([],o[t[2]],o[t[1]]),n=e.normalize([],e.cross([],i,a)),r=-e.dot(n,o[t[1]]);return n.concat(r)}));return new t(o,s)}}]),t}(),oa=function(){function t(i,a){p(this,t),this.min=i,this.max=a,this.center=e.scale$1([],e.add([],this.min,this.max),.5)}return f(t,[{key:"quadrant",value:function(i){for(var a=[i%2==0,i<2],n=e.clone$2(this.min),r=e.clone$2(this.max),o=0;o<a.length;o++)n[o]=a[o]?this.min[o]:this.center[o],r[o]=a[o]?this.center[o]:this.max[o];return r[2]=this.max[2],new t(n,r)}},{key:"distanceX",value:function(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}},{key:"distanceY",value:function(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}},{key:"intersects",value:function(t){for(var i=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]],a=!0,n=0;n<t.planes.length;n++){for(var r=t.planes[n],o=0,s=0;s<i.length;s++)e.dot$1(r,i[s])>=0&&o++;if(0===o)return 0;o!==i.length&&(a=!1)}if(a)return 2;for(var l=0;l<3;l++){for(var c=Number.MAX_VALUE,u=-Number.MAX_VALUE,h=0;h<t.points.length;h++){var d=t.points[h][l]-this.min[l];c=Math.min(c,d),u=Math.max(u,d)}if(u<0||c>this.max[l]-this.min[l])return 0}return 1}}]),t}(),sa=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(p(this,t),isNaN(e)||e<0||isNaN(i)||i<0||isNaN(a)||a<0||isNaN(n)||n<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=i,this.left=a,this.right=n}return f(t,[{key:"interpolate",value:function(t,i,a){return null!=i.top&&null!=t.top&&(this.top=e.number(t.top,i.top,a)),null!=i.bottom&&null!=t.bottom&&(this.bottom=e.number(t.bottom,i.bottom,a)),null!=i.left&&null!=t.left&&(this.left=e.number(t.left,i.left,a)),null!=i.right&&null!=t.right&&(this.right=e.number(t.right,i.right,a)),this}},{key:"getCenter",value:function(t,i){var a=e.clamp((this.left+t-this.right)/2,0,t),n=e.clamp((this.top+i-this.bottom)/2,0,i);return new e.pointGeometry(a,n)}},{key:"equals",value:function(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}},{key:"clone",value:function(){return new t(this.top,this.bottom,this.left,this.right)}},{key:"toJSON",value:function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}]),t}(),la=function(){function t(i,a,n,r,o){p(this,t),this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=void 0===o||!!o,this._minZoom=i||0,this._maxZoom=a||22,this._minPitch=null==n?0:n,this._maxPitch=null==r?60:r,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new sa,this._posMatrixCache={},this._alignedPosMatrixCache={}}return f(t,[{key:"clone",value:function(){var e=new t(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return e.tileSize=this.tileSize,e.latRange=this.latRange,e.width=this.width,e.height=this.height,e._center=this._center,e._elevation=this._elevation,e.zoom=this.zoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._unmodified=this._unmodified,e._edgeInsets=this._edgeInsets.clone(),e._calcMatrices(),e}},{key:"minZoom",get:function(){return this._minZoom},set:function(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}},{key:"maxZoom",get:function(){return this._maxZoom},set:function(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}},{key:"minPitch",get:function(){return this._minPitch},set:function(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}},{key:"maxPitch",get:function(){return this._maxPitch},set:function(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}},{key:"renderWorldCopies",get:function(){return this._renderWorldCopies},set:function(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e}},{key:"worldSize",get:function(){return this.tileSize*this.scale}},{key:"centerOffset",get:function(){return this.centerPoint._sub(this.size._div(2))}},{key:"size",get:function(){return new e.pointGeometry(this.width,this.height)}},{key:"bearing",get:function(){return-this.angle/Math.PI*180},set:function(t){var i,a=-e.wrap(t,-180,180)*Math.PI/180;this.angle!==a&&(this._unmodified=!1,this.angle=a,this._calcMatrices(),this.rotationMatrix=(i=new e.ARRAY_TYPE(4),e.ARRAY_TYPE!=Float32Array&&(i[1]=0,i[2]=0),i[0]=1,i[3]=1,i),function(e,t,i){var a=t[0],n=t[1],r=t[2],o=t[3],s=Math.sin(i),l=Math.cos(i);e[0]=a*l+r*s,e[1]=n*l+o*s,e[2]=a*-s+r*l,e[3]=n*-s+o*l}(this.rotationMatrix,this.rotationMatrix,this.angle))}},{key:"pitch",get:function(){return this._pitch/Math.PI*180},set:function(t){var i=e.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==i&&(this._unmodified=!1,this._pitch=i,this._calcMatrices())}},{key:"fov",get:function(){return this._fov/Math.PI*180},set:function(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())}},{key:"zoom",get:function(){return this._zoom},set:function(e){var t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom,this._constrain(),this._calcMatrices())}},{key:"center",get:function(){return this._center},set:function(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())}},{key:"elevation",get:function(){return this._elevation},set:function(e){e!==this._elevation&&(this._elevation=e,this._constrain(),this._calcMatrices())}},{key:"padding",get:function(){return this._edgeInsets.toJSON()},set:function(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}},{key:"centerPoint",get:function(){return this._edgeInsets.getCenter(this.width,this.height)}},{key:"isPaddingEqual",value:function(e){return this._edgeInsets.equals(e)}},{key:"interpolatePadding",value:function(e,t,i){this._unmodified=!1,this._edgeInsets.interpolate(e,t,i),this._constrain(),this._calcMatrices()}},{key:"coveringZoomLevel",value:function(e){var t=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,t)}},{key:"getVisibleUnwrappedCoordinates",value:function(t){var i=[new e.UnwrappedTileID(0,t)];if(this._renderWorldCopies)for(var a=this.pointCoordinate(new e.pointGeometry(0,0)),n=this.pointCoordinate(new e.pointGeometry(this.width,0)),r=this.pointCoordinate(new e.pointGeometry(this.width,this.height)),o=this.pointCoordinate(new e.pointGeometry(0,this.height)),s=Math.floor(Math.min(a.x,n.x,r.x,o.x)),l=Math.floor(Math.max(a.x,n.x,r.x,o.x)),c=s-1;c<=l+1;c++)0!==c&&i.push(new e.UnwrappedTileID(c,t));return i}},{key:"coveringTiles",value:function(t){var i,a,n=this.coveringZoomLevel(t),r=n;if(void 0!==t.minzoom&&n<t.minzoom)return[];void 0!==t.maxzoom&&n>t.maxzoom&&(n=t.maxzoom);var o=this.pointCoordinate(this.getCameraPoint()),s=e.MercatorCoordinate.fromLngLat(this.center),l=Math.pow(2,n),c=[l*o.x,l*o.y,0],u=[l*s.x,l*s.y,0],h=ra.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,n),d=t.minzoom||0;!t.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(d=n);var f=t.terrain?2/Math.min(this.tileSize,t.tileSize)*this.tileSize:3,p=function(e){return{aabb:new oa([e*l,0,0],[(e+1)*l,l,0]),zoom:0,x:0,y:0,wrap:e,fullyVisible:!1}},m=[],g=[],v=n,y=t.reparseOverscaled?r:n;if(this._renderWorldCopies)for(var x=1;x<=3;x++)m.push(p(-x)),m.push(p(x));for(m.push(p(0));m.length>0;){var b=m.pop(),_=b.x,w=b.y,k=b.fullyVisible;if(!k){var S=b.aabb.intersects(h);if(0===S)continue;k=2===S}var C=t.terrain?c:u,A=b.aabb.distanceX(C),O=b.aabb.distanceY(C),T=Math.max(Math.abs(A),Math.abs(O)),M=f+(1<<v-b.zoom)-2;if(b.zoom===v||T>M&&b.zoom>=d){var E=v-b.zoom,I=c[0]-.5-(_<<E),P=c[1]-.5-(w<<E);g.push({tileID:new e.OverscaledTileID(b.zoom===v?y:b.zoom,b.wrap,b.zoom,_,w),distanceSq:e.sqrLen([u[0]-.5-_,u[1]-.5-w]),tileDistanceToCamera:Math.sqrt(I*I+P*P)})}else for(var D=0;D<4;D++){var z=(_<<1)+D%2,L=(w<<1)+(D>>1),j=b.zoom+1,R=b.aabb.quadrant(D);if(t.terrain){var F=new e.OverscaledTileID(j,b.wrap,j,z,L),B=t.terrain.getMinMaxElevation(F),N=null!==(i=B.minElevation)&&void 0!==i?i:this.elevation,V=null!==(a=B.maxElevation)&&void 0!==a?a:this.elevation;R=new oa([R.min[0],R.min[1],N],[R.max[0],R.max[1],V])}m.push({aabb:R,zoom:j,x:z,y:L,wrap:b.wrap,fullyVisible:k})}}return g.sort((function(e,t){return e.distanceSq-t.distanceSq})).map((function(e){return e.tileID}))}},{key:"resize",value:function(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()}},{key:"unmodified",get:function(){return this._unmodified}},{key:"zoomScale",value:function(e){return Math.pow(2,e)}},{key:"scaleZoom",value:function(e){return Math.log(e)/Math.LN2}},{key:"project",value:function(t){var i=e.clamp(t.lat,-this.maxValidLatitude,this.maxValidLatitude);return new e.pointGeometry(e.mercatorXfromLng(t.lng)*this.worldSize,e.mercatorYfromLat(i)*this.worldSize)}},{key:"unproject",value:function(t){return new e.MercatorCoordinate(t.x/this.worldSize,t.y/this.worldSize).toLngLat()}},{key:"point",get:function(){return this.project(this.center)}},{key:"updateElevation",value:function(e){this.freezeElevation||(this.elevation=e?this.getElevation(this._center,e):0)}},{key:"getElevation",value:function(t,i){var a=e.MercatorCoordinate.fromLngLat(t),n=(1<<this.tileZoom)*e.EXTENT,r=a.x*n,o=a.y*n,s=Math.floor(r/e.EXTENT),l=Math.floor(o/e.EXTENT),c=new e.OverscaledTileID(this.tileZoom,0,this.tileZoom,s,l);return i.getElevation(c,r%e.EXTENT,o%e.EXTENT,e.EXTENT)}},{key:"getCameraPosition",value:function(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}},{key:"recalculateZoom",value:function(t){var i=this.pointLocation(this.centerPoint,t),a=this.getElevation(i,t);if(this.elevation-a){var n=this.getCameraPosition(),r=e.MercatorCoordinate.fromLngLat(n.lngLat,n.altitude),o=e.MercatorCoordinate.fromLngLat(i,a),s=r.x-o.x,l=r.y-o.y,c=r.z-o.z,u=Math.sqrt(s*s+l*l+c*c),h=this.scaleZoom(this.cameraToCenterDistance/u/this.tileSize);this._elevation=a,this._center=i,this.zoom=h}}},{key:"setLocationAtPoint",value:function(t,i){var a=this.pointCoordinate(i),n=this.pointCoordinate(this.centerPoint),r=this.locationCoordinate(t),o=new e.MercatorCoordinate(r.x-(a.x-n.x),r.y-(a.y-n.y));this.center=this.coordinateLocation(o),this._renderWorldCopies&&(this.center=this.center.wrap())}},{key:"locationPoint",value:function(e,t){return t?this.coordinatePoint(this.locationCoordinate(e),this.getElevation(e,t),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(e))}},{key:"pointLocation",value:function(e,t){return this.coordinateLocation(this.pointCoordinate(e,t))}},{key:"locationCoordinate",value:function(t){return e.MercatorCoordinate.fromLngLat(t)}},{key:"coordinateLocation",value:function(e){return e&&e.toLngLat()}},{key:"pointCoordinate",value:function(t,i){if(i){var a=i.pointCoordinate(t);if(null!=a)return a}var n=[t.x,t.y,0,1],r=[t.x,t.y,1,1];e.transformMat4(n,n,this.pixelMatrixInverse),e.transformMat4(r,r,this.pixelMatrixInverse);var o=n[3],s=r[3],l=n[1]/o,c=r[1]/s,u=n[2]/o,h=r[2]/s,d=u===h?0:(0-u)/(h-u);return new e.MercatorCoordinate(e.number(n[0]/o,r[0]/s,d)/this.worldSize,e.number(l,c,d)/this.worldSize)}},{key:"coordinatePoint",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.pixelMatrix,n=[t.x*this.worldSize,t.y*this.worldSize,i,1];return e.transformMat4(n,n,a),new e.pointGeometry(n[0]/n[3],n[1]/n[3])}},{key:"getBounds",value:function(){var t=Math.max(0,this.height/2-this.getHorizon());return(new e.LngLatBounds).extend(this.pointLocation(new e.pointGeometry(0,t))).extend(this.pointLocation(new e.pointGeometry(this.width,t))).extend(this.pointLocation(new e.pointGeometry(this.width,this.height))).extend(this.pointLocation(new e.pointGeometry(0,this.height)))}},{key:"getMaxBounds",value:function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new e.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}},{key:"getHorizon",value:function(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}},{key:"setMaxBounds",value:function(e){e?(this.lngRange=[e.getWest(),e.getEast()],this.latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}},{key:"calculatePosMatrix",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=t.key,n=i?this._alignedPosMatrixCache:this._posMatrixCache;if(n[a])return n[a];var r=t.canonical,o=this.worldSize/this.zoomScale(r.z),s=r.x+Math.pow(2,r.z)*t.wrap,l=e.identity(new Float64Array(16));return e.translate(l,l,[s*o,r.y*o,0]),e.scale(l,l,[o/e.EXTENT,o/e.EXTENT,1]),e.multiply(l,i?this.alignedProjMatrix:this.projMatrix,l),n[a]=new Float32Array(l),n[a]}},{key:"customLayerMatrix",value:function(){return this.mercatorMatrix.slice()}},{key:"_constrain",value:function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var t,i,a,n,r=-90,o=90,s=-180,l=180,c=this.size,u=this._unmodified;if(this.latRange){var h=this.latRange;r=e.mercatorYfromLat(h[1])*this.worldSize,t=(o=e.mercatorYfromLat(h[0])*this.worldSize)-r<c.y?c.y/(o-r):0}if(this.lngRange){var d=this.lngRange;s=e.wrap(e.mercatorXfromLng(d[0])*this.worldSize,0,this.worldSize),(l=e.wrap(e.mercatorXfromLng(d[1])*this.worldSize,0,this.worldSize))<s&&(l+=this.worldSize),i=l-s<c.x?c.x/(l-s):0}var f=this.point,p=Math.max(i||0,t||0);if(p)return this.center=this.unproject(new e.pointGeometry(i?(l+s)/2:f.x,t?(o+r)/2:f.y)),this.zoom+=this.scaleZoom(p),this._unmodified=u,void(this._constraining=!1);if(this.latRange){var m=f.y,g=c.y/2;m-g<r&&(n=r+g),m+g>o&&(n=o-g)}if(this.lngRange){var v=(s+l)/2,y=e.wrap(f.x,v-this.worldSize/2,v+this.worldSize/2),x=c.x/2;y-x<s&&(a=s+x),y+x>l&&(a=l-x)}void 0===a&&void 0===n||(this.center=this.unproject(new e.pointGeometry(void 0!==a?a:f.x,void 0!==n?n:f.y)).wrap()),this._unmodified=u,this._constraining=!1}}},{key:"_calcMatrices",value:function(){if(this.height){var t=this.centerOffset,i=this.point.x,a=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;var n=e.identity(new Float64Array(16));e.scale(n,n,[this.width/2,-this.height/2,1]),e.translate(n,n,[1,-1,0]),this.labelPlaneMatrix=n,n=e.identity(new Float64Array(16)),e.scale(n,n,[1,-1,1]),e.translate(n,n,[-1,-1,0]),e.scale(n,n,[2/this.width,2/this.height,1]),this.glCoordMatrix=n,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);var r=Math.PI/2+this._pitch,o=this._fov*(.5+t.y/this.height),s=Math.sin(o)*this.cameraToSeaLevelDistance/Math.sin(e.clamp(Math.PI-r-o,.01,Math.PI-.01)),l=this.getHorizon(),c=2*Math.atan(l/this.cameraToCenterDistance)*(.5+t.y/(2*l)),u=Math.sin(c)*this.cameraToSeaLevelDistance/Math.sin(e.clamp(Math.PI-r-c,.01,Math.PI-.01)),h=Math.cos(Math.PI/2-this._pitch)*s+this.cameraToSeaLevelDistance,d=Math.cos(Math.PI/2-this._pitch)*u+this.cameraToSeaLevelDistance,f=1.01*Math.min(h,d),p=this.height/50;n=new Float64Array(16),e.perspective(n,this._fov,this.width/this.height,p,f),n[8]=2*-t.x/this.width,n[9]=2*t.y/this.height,e.scale(n,n,[1,-1,1]),e.translate(n,n,[0,0,-this.cameraToCenterDistance]),e.rotateX(n,n,this._pitch),e.rotateZ(n,n,this.angle),e.translate(n,n,[-i,-a,0]),this.mercatorMatrix=e.scale([],n,[this.worldSize,this.worldSize,this.worldSize]),e.scale(n,n,[1,1,this._pixelPerMeter]),this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,n),e.translate(n,n,[0,0,-this.elevation]),this.projMatrix=n,this.invProjMatrix=e.invert([],n),this.pixelMatrix3D=e.multiply(new Float64Array(16),this.labelPlaneMatrix,n);var m=this.width%2/2,g=this.height%2/2,v=Math.cos(this.angle),y=Math.sin(this.angle),x=i-Math.round(i)+v*m+y*g,b=a-Math.round(a)+v*g+y*m,_=new Float64Array(n);if(e.translate(_,_,[x>.5?x-1:x,b>.5?b-1:b,0]),this.alignedProjMatrix=_,!(n=e.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=n,this._posMatrixCache={},this._alignedPosMatrixCache={}}}},{key:"maxPitchScaleFactor",value:function(){if(!this.pixelMatrixInverse)return 1;var t=this.pointCoordinate(new e.pointGeometry(0,0)),i=[t.x*this.worldSize,t.y*this.worldSize,0,1];return e.transformMat4(i,i,this.pixelMatrix)[3]/this.cameraToCenterDistance}},{key:"getCameraPoint",value:function(){var t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.pointGeometry(0,t))}},{key:"getCameraQueryGeometry",value:function(t){var i=this.getCameraPoint();if(1===t.length)return[t[0],i];var a,n=i.x,r=i.y,o=i.x,s=i.y,l=d(t);try{for(l.s();!(a=l.n()).done;){var c=a.value;n=Math.min(n,c.x),r=Math.min(r,c.y),o=Math.max(o,c.x),s=Math.max(s,c.y)}}catch(u){l.e(u)}finally{l.f()}return[new e.pointGeometry(n,r),new e.pointGeometry(o,r),new e.pointGeometry(o,s),new e.pointGeometry(n,s),new e.pointGeometry(n,r)]}}]),t}(),ca=function(){function t(i){p(this,t),this._hashName=i&&encodeURIComponent(i),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(e,t){var i=!1,a=null;return function(){return i=!0,a||function t(){a=null,i&&(e(),a=setTimeout(t,300),i=!1)}(),a}}(this._updateHashUnthrottled.bind(this))}return f(t,[{key:"addTo",value:function(e){return this._map=e,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}},{key:"remove",value:function(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}},{key:"getHashString",value:function(e){var t=this._map.getCenter(),i=Math.round(100*this._map.getZoom())/100,a=Math.ceil((i*Math.LN2+Math.log(512/360/.5))/Math.LN10),n=Math.pow(10,a),r=Math.round(t.lng*n)/n,o=Math.round(t.lat*n)/n,s=this._map.getBearing(),l=this._map.getPitch(),c="";if(c+=e?"/".concat(r,"/").concat(o,"/").concat(i):"".concat(i,"/").concat(o,"/").concat(r),(s||l)&&(c+="/"+Math.round(10*s)/10),l&&(c+="/".concat(Math.round(l))),this._hashName){var u=this._hashName,h=!1,d=window.location.hash.slice(1).split("&").map((function(e){var t=e.split("=")[0];return t===u?(h=!0,"".concat(t,"=").concat(c)):e})).filter((function(e){return e}));return h||d.push("".concat(u,"=").concat(c)),"#".concat(d.join("&"))}return"#".concat(c)}},{key:"_getCurrentHash",value:function(){var e,t=this,i=window.location.hash.replace("#","");return this._hashName?(i.split("&").map((function(e){return e.split("=")})).forEach((function(i){i[0]===t._hashName&&(e=i)})),(e&&e[1]||"").split("/")):i.split("/")}},{key:"_onHashChange",value:function(){var e=this._getCurrentHash();if(e.length>=3&&!e.some((function(e){return isNaN(e)}))){var t=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(e[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:t,pitch:+(e[4]||0)}),!0}return!1}},{key:"_updateHashUnthrottled",value:function(){var e=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,e)}catch(e){}}}]),t}(),ua={linearity:.3,easing:e.bezier(0,0,.3,1)},ha=e.extend({deceleration:2500,maxSpeed:1400},ua),da=e.extend({deceleration:20,maxSpeed:1400},ua),fa=e.extend({deceleration:1e3,maxSpeed:360},ua),pa=e.extend({deceleration:1e3,maxSpeed:90},ua),ma=function(){function t(e){p(this,t),this._map=e,this.clear()}return f(t,[{key:"clear",value:function(){this._inertiaBuffer=[]}},{key:"record",value:function(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.exported.now(),settings:t})}},{key:"_drainInertiaBuffer",value:function(){for(var t=this._inertiaBuffer,i=e.exported.now();t.length>0&&i-t[0].time>160;)t.shift()}},{key:"_onMoveEnd",value:function(t){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){var i,a={zoom:0,bearing:0,pitch:0,pan:new e.pointGeometry(0,0),pinchAround:void 0,around:void 0},n=d(this._inertiaBuffer);try{for(n.s();!(i=n.n()).done;){var r=i.value.settings;a.zoom+=r.zoomDelta||0,a.bearing+=r.bearingDelta||0,a.pitch+=r.pitchDelta||0,r.panDelta&&a.pan._add(r.panDelta),r.around&&(a.around=r.around),r.pinchAround&&(a.pinchAround=r.pinchAround)}}catch(p){n.e(p)}finally{n.f()}var o=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,s={};if(a.pan.mag()){var l=va(a.pan.mag(),o,e.extend({},ha,t||{}));s.offset=a.pan.mult(l.amount/a.pan.mag()),s.center=this._map.transform.center,ga(s,l)}if(a.zoom){var c=va(a.zoom,o,da);s.zoom=this._map.transform.zoom+c.amount,ga(s,c)}if(a.bearing){var u=va(a.bearing,o,fa);s.bearing=this._map.transform.bearing+e.clamp(u.amount,-179,179),ga(s,u)}if(a.pitch){var h=va(a.pitch,o,pa);s.pitch=this._map.transform.pitch+h.amount,ga(s,h)}if(s.zoom||s.bearing){var f=void 0===a.pinchAround?a.around:a.pinchAround;s.around=f?this._map.unproject(f):this._map.getCenter()}return this.clear(),e.extend(s,{noMoveStart:!0})}}}]),t}();function ga(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function va(t,i,a){var n=a.maxSpeed,r=a.linearity,o=a.deceleration,s=e.clamp(t*r/(i/1e3),-n,n),l=Math.abs(s)/(o*r);return{easing:a.easing,duration:1e3*l,amount:s*(l/2)}}var ya=function(t){m(a,t);var i=g(a);function a(t,n,r){var o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};p(this,a);var l=u.mousePos(n.getCanvasContainer(),r),c=n.unproject(l);return(o=i.call(this,t,e.extend({point:l,lngLat:c,originalEvent:r},s)))._defaultPrevented=!1,o.target=n,o}return f(a,[{key:"preventDefault",value:function(){this._defaultPrevented=!0}},{key:"defaultPrevented",get:function(){return this._defaultPrevented}}]),a}(e.Event),xa=function(t){m(a,t);var i=g(a);function a(t,n,r){var o;p(this,a);var s="touchend"===t?r.changedTouches:r.touches,l=u.touchPos(n.getCanvasContainer(),s),c=l.map((function(e){return n.unproject(e)})),h=l.reduce((function(e,t,i,a){return e.add(t.div(a.length))}),new e.pointGeometry(0,0));return(o=i.call(this,t,{points:l,point:h,lngLats:c,lngLat:n.unproject(h),originalEvent:r}))._defaultPrevented=!1,o}return f(a,[{key:"preventDefault",value:function(){this._defaultPrevented=!0}},{key:"defaultPrevented",get:function(){return this._defaultPrevented}}]),a}(e.Event),ba=function(e){m(i,e);var t=g(i);function i(e,a,n){var r;return p(this,i),(r=t.call(this,e,{originalEvent:n}))._defaultPrevented=!1,r}return f(i,[{key:"preventDefault",value:function(){this._defaultPrevented=!0}},{key:"defaultPrevented",get:function(){return this._defaultPrevented}}]),i}(e.Event),_a=function(){function e(t,i){p(this,e),this._map=t,this._clickTolerance=i.clickTolerance}return f(e,[{key:"reset",value:function(){delete this._mousedownPos}},{key:"wheel",value:function(e){return this._firePreventable(new ba(e.type,this._map,e))}},{key:"mousedown",value:function(e,t){return this._mousedownPos=t,this._firePreventable(new ya(e.type,this._map,e))}},{key:"mouseup",value:function(e){this._map.fire(new ya(e.type,this._map,e))}},{key:"click",value:function(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||this._map.fire(new ya(e.type,this._map,e))}},{key:"dblclick",value:function(e){return this._firePreventable(new ya(e.type,this._map,e))}},{key:"mouseover",value:function(e){this._map.fire(new ya(e.type,this._map,e))}},{key:"mouseout",value:function(e){this._map.fire(new ya(e.type,this._map,e))}},{key:"touchstart",value:function(e){return this._firePreventable(new xa(e.type,this._map,e))}},{key:"touchmove",value:function(e){this._map.fire(new xa(e.type,this._map,e))}},{key:"touchend",value:function(e){this._map.fire(new xa(e.type,this._map,e))}},{key:"touchcancel",value:function(e){this._map.fire(new xa(e.type,this._map,e))}},{key:"_firePreventable",value:function(e){if(this._map.fire(e),e.defaultPrevented)return{}}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){}},{key:"disable",value:function(){}}]),e}(),wa=function(){function e(t){p(this,e),this._map=t}return f(e,[{key:"reset",value:function(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}},{key:"mousemove",value:function(e){this._map.fire(new ya(e.type,this._map,e))}},{key:"mousedown",value:function(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}},{key:"mouseup",value:function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ya("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}},{key:"contextmenu",value:function(e){this._delayContextMenu?this._contextMenuEvent=e:this._ignoreContextMenu||this._map.fire(new ya(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){}},{key:"disable",value:function(){}}]),e}(),ka=function(){function t(e,i){p(this,t),this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=i.clickTolerance||1}return f(t,[{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return!!this._active}},{key:"enable",value:function(){this.isEnabled()||(this._enabled=!0)}},{key:"disable",value:function(){this.isEnabled()&&(this._enabled=!1)}},{key:"mousedown",value:function(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(u.disableDrag(),this._startPos=this._lastPos=t,this._active=!0)}},{key:"mousemoveWindow",value:function(e,t){if(this._active){var i=t;if(!(this._lastPos.equals(i)||!this._box&&i.dist(this._startPos)<this._clickTolerance)){var a=this._startPos;this._lastPos=i,this._box||(this._box=u.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));var n=Math.min(a.x,i.x),r=Math.max(a.x,i.x),o=Math.min(a.y,i.y),s=Math.max(a.y,i.y);u.setTransform(this._box,"translate(".concat(n,"px,").concat(o,"px)")),this._box.style.width=r-n+"px",this._box.style.height=s-o+"px"}}}},{key:"mouseupWindow",value:function(t,i){var a=this;if(this._active&&0===t.button){var n=this._startPos,r=i;if(this.reset(),u.suppressClick(),n.x!==r.x||n.y!==r.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:t})),{cameraAnimation:function(e){return e.fitScreenCoordinates(n,r,a._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",t)}}},{key:"keydown",value:function(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))}},{key:"reset",value:function(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(u.remove(this._box),this._box=null),u.enableDrag(),delete this._startPos,delete this._lastPos}},{key:"_fireEvent",value:function(t,i){return this._map.fire(new e.Event(t,{originalEvent:i}))}}]),t}();function Sa(e,t){if(e.length!==t.length)throw new Error("The number of touches and points are not equal - touches ".concat(e.length,", points ").concat(t.length));for(var i={},a=0;a<e.length;a++)i[e[a].identifier]=t[a];return i}var Ca=function(){function t(e){p(this,t),this.reset(),this.numTouches=e.numTouches}return f(t,[{key:"reset",value:function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}},{key:"touchstart",value:function(t,i,a){(this.centroid||a.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=t.timeStamp),a.length===this.numTouches&&(this.centroid=function(t){var i,a=new e.pointGeometry(0,0),n=d(t);try{for(n.s();!(i=n.n()).done;){var r=i.value;a._add(r)}}catch(o){n.e(o)}finally{n.f()}return a.div(t.length)}(i),this.touches=Sa(a,i)))}},{key:"touchmove",value:function(e,t,i){if(!this.aborted&&this.centroid){var a=Sa(i,t);for(var n in this.touches){var r=this.touches[n],o=a[n];(!o||o.dist(r)>30)&&(this.aborted=!0)}}}},{key:"touchend",value:function(e,t,i){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===i.length){var a=!this.aborted&&this.centroid;if(this.reset(),a)return a}}}]),t}(),Aa=function(){function e(t){p(this,e),this.singleTap=new Ca(t),this.numTaps=t.numTaps,this.reset()}return f(e,[{key:"reset",value:function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}},{key:"touchstart",value:function(e,t,i){this.singleTap.touchstart(e,t,i)}},{key:"touchmove",value:function(e,t,i){this.singleTap.touchmove(e,t,i)}},{key:"touchend",value:function(e,t,i){var a=this.singleTap.touchend(e,t,i);if(a){var n=e.timeStamp-this.lastTime<500,r=!this.lastTap||this.lastTap.dist(a)<30;if(n&&r||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=a,this.count===this.numTaps)return this.reset(),a}}}]),e}(),Oa=function(){function e(){p(this,e),this._zoomIn=new Aa({numTouches:1,numTaps:2}),this._zoomOut=new Aa({numTouches:2,numTaps:1}),this.reset()}return f(e,[{key:"reset",value:function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}},{key:"touchstart",value:function(e,t,i){this._zoomIn.touchstart(e,t,i),this._zoomOut.touchstart(e,t,i)}},{key:"touchmove",value:function(e,t,i){this._zoomIn.touchmove(e,t,i),this._zoomOut.touchmove(e,t,i)}},{key:"touchend",value:function(e,t,i){var a=this,n=this._zoomIn.touchend(e,t,i),r=this._zoomOut.touchend(e,t,i);return n?(this._active=!0,e.preventDefault(),setTimeout((function(){return a.reset()}),0),{cameraAnimation:function(t){return t.easeTo({duration:300,zoom:t.getZoom()+1,around:t.unproject(n)},{originalEvent:e})}}):r?(this._active=!0,e.preventDefault(),setTimeout((function(){return a.reset()}),0),{cameraAnimation:function(t){return t.easeTo({duration:300,zoom:t.getZoom()-1,around:t.unproject(r)},{originalEvent:e})}}):void 0}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),Ta={0:1,2:2},Ma=function(){function e(t){p(this,e),this.reset(),this._clickTolerance=t.clickTolerance||1}return f(e,[{key:"reset",value:function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}},{key:"_correctButton",value:function(e,t){return!1}},{key:"_move",value:function(e,t){return{}}},{key:"mousedown",value:function(e,t){if(!this._lastPoint){var i=u.mouseButton(e);this._correctButton(e,i)&&(this._lastPoint=t,this._eventButton=i)}}},{key:"mousemoveWindow",value:function(e,t){var i=this._lastPoint;if(i)if(e.preventDefault(),function(e,t){var i=Ta[t];return void 0===e.buttons||(e.buttons&i)!==i}(e,this._eventButton))this.reset();else if(this._moved||!(t.dist(i)<this._clickTolerance))return this._moved=!0,this._lastPoint=t,this._move(i,t)}},{key:"mouseupWindow",value:function(e){this._lastPoint&&u.mouseButton(e)===this._eventButton&&(this._moved&&u.suppressClick(),this.reset())}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),Ea=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"mousedown",value:function(e,t){o(s(i.prototype),"mousedown",this).call(this,e,t),this._lastPoint&&(this._active=!0)}},{key:"_correctButton",value:function(e,t){return 0===t&&!e.ctrlKey}},{key:"_move",value:function(e,t){return{around:t,panDelta:t.sub(e)}}}]),i}(Ma),Ia=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"_correctButton",value:function(e,t){return 0===t&&e.ctrlKey||2===t}},{key:"_move",value:function(e,t){var i=.8*(t.x-e.x);if(i)return this._active=!0,{bearingDelta:i}}},{key:"contextmenu",value:function(e){e.preventDefault()}}]),i}(Ma),Pa=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"_correctButton",value:function(e,t){return 0===t&&e.ctrlKey||2===t}},{key:"_move",value:function(e,t){var i=-.5*(t.y-e.y);if(i)return this._active=!0,{pitchDelta:i}}},{key:"contextmenu",value:function(e){e.preventDefault()}}]),i}(Ma),Da=function(){function t(e,i){p(this,t),this._minTouches=e.cooperativeGestures?2:1,this._clickTolerance=e.clickTolerance||1,this._map=i,this.reset()}return f(t,[{key:"reset",value:function(){var t=this;this._active=!1,this._touches={},this._sum=new e.pointGeometry(0,0),setTimeout((function(){t._cancelCooperativeMessage=!1}),200)}},{key:"touchstart",value:function(e,t,i){return this._calculateTransform(e,t,i)}},{key:"touchmove",value:function(e,t,i){if(this._map._cooperativeGestures&&(2===this._minTouches&&i.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(e,!1,i.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(i.length<this._minTouches))return e.preventDefault(),this._calculateTransform(e,t,i)}},{key:"touchend",value:function(e,t,i){this._calculateTransform(e,t,i),this._active&&i.length<this._minTouches&&this.reset()}},{key:"touchcancel",value:function(){this.reset()}},{key:"_calculateTransform",value:function(t,i,a){a.length>0&&(this._active=!0);var n=Sa(a,i),r=new e.pointGeometry(0,0),o=new e.pointGeometry(0,0),s=0;for(var l in n){var c=n[l],u=this._touches[l];u&&(r._add(c),o._add(c.sub(u)),s++,n[l]=c)}if(this._touches=n,!(s<this._minTouches)&&o.mag()){var h=o.div(s);return this._sum._add(h),this._sum.mag()<this._clickTolerance?void 0:{around:r.div(s),panDelta:h}}}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),t}(),za=function(){function e(){p(this,e),this.reset()}return f(e,[{key:"reset",value:function(){this._active=!1,delete this._firstTwoTouches}},{key:"_start",value:function(e){}},{key:"_move",value:function(e,t,i){return{}}},{key:"touchstart",value:function(e,t,i){this._firstTwoTouches||i.length<2||(this._firstTwoTouches=[i[0].identifier,i[1].identifier],this._start([t[0],t[1]]))}},{key:"touchmove",value:function(e,t,i){if(this._firstTwoTouches){e.preventDefault();var a=h(this._firstTwoTouches,2),n=a[0],r=a[1],o=La(i,t,n),s=La(i,t,r);if(o&&s){var l=this._aroundCenter?null:o.add(s).div(2);return this._move([o,s],l,e)}}}},{key:"touchend",value:function(e,t,i){if(this._firstTwoTouches){var a=h(this._firstTwoTouches,2),n=a[0],r=a[1],o=La(i,t,n),s=La(i,t,r);o&&s||(this._active&&u.suppressClick(),this.reset())}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}();function La(e,t,i){for(var a=0;a<e.length;a++)if(e[a].identifier===i)return t[a]}function ja(e,t){return Math.log(e/t)/Math.LN2}var Ra=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"reset",value:function(){o(s(i.prototype),"reset",this).call(this),delete this._distance,delete this._startDistance}},{key:"_start",value:function(e){this._startDistance=this._distance=e[0].dist(e[1])}},{key:"_move",value:function(e,t){var i=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(ja(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ja(this._distance,i),pinchAround:t}}}]),i}(za);function Fa(e,t){return 180*e.angleWith(t)/Math.PI}var Ba=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i,[{key:"reset",value:function(){o(s(i.prototype),"reset",this).call(this),delete this._minDiameter,delete this._startVector,delete this._vector}},{key:"_start",value:function(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}},{key:"_move",value:function(e,t){var i=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Fa(this._vector,i),pinchAround:t}}},{key:"_isBelowThreshold",value:function(e){this._minDiameter=Math.min(this._minDiameter,e.mag());var t=25/(Math.PI*this._minDiameter)*360,i=Fa(e,this._startVector);return Math.abs(i)<t}}]),i}(za);function Na(e){return Math.abs(e.y)>Math.abs(e.x)}var Va=function(e){m(i,e);var t=g(i);function i(e){var a;return p(this,i),(a=t.call(this))._map=e,a}return f(i,[{key:"reset",value:function(){o(s(i.prototype),"reset",this).call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints}},{key:"touchstart",value:function(e,t,a){o(s(i.prototype),"touchstart",this).call(this,e,t,a),this._currentTouchCount=a.length}},{key:"_start",value:function(e){this._lastPoints=e,Na(e[0].sub(e[1]))&&(this._valid=!1)}},{key:"_move",value:function(e,t,i){if(!(this._map._cooperativeGestures&&this._currentTouchCount<3)){var a=e[0].sub(this._lastPoints[0]),n=e[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(a,n,i.timeStamp),this._valid?(this._lastPoints=e,this._active=!0,{pitchDelta:(a.y+n.y)/2*-.5}):void 0}}},{key:"gestureBeginsVertically",value:function(e,t,i){if(void 0!==this._valid)return this._valid;var a=e.mag()>=2,n=t.mag()>=2;if(a||n){if(!a||!n)return void 0===this._firstMove&&(this._firstMove=i),i-this._firstMove<100&&void 0;var r=e.y>0==t.y>0;return Na(e)&&Na(t)&&r}}}]),i}(za),Ya={panStep:100,bearingStep:15,pitchStep:10},Wa=function(){function e(){p(this,e);var t=Ya;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}return f(e,[{key:"reset",value:function(){this._active=!1}},{key:"keydown",value:function(e){var t=this;if(!(e.altKey||e.ctrlKey||e.metaKey)){var i=0,a=0,n=0,r=0,o=0;switch(e.keyCode){case 61:case 107:case 171:case 187:i=1;break;case 189:case 109:case 173:i=-1;break;case 37:e.shiftKey?a=-1:(e.preventDefault(),r=-1);break;case 39:e.shiftKey?a=1:(e.preventDefault(),r=1);break;case 38:e.shiftKey?n=1:(e.preventDefault(),o=-1);break;case 40:e.shiftKey?n=-1:(e.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(a=0,n=0),{cameraAnimation:function(s){var l=s.getZoom();s.easeTo({duration:300,easeId:"keyboardHandler",easing:Ha,zoom:i?Math.round(l)+i*(e.shiftKey?2:1):l,bearing:s.getBearing()+a*t._bearingStep,pitch:s.getPitch()+n*t._pitchStep,offset:[-r*t._panStep,-o*t._panStep],center:s.getCenter()},{originalEvent:e})}}}}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}},{key:"disableRotation",value:function(){this._rotationDisabled=!0}},{key:"enableRotation",value:function(){this._rotationDisabled=!1}}]),e}();function Ha(e){return e*(2-e)}var Ua=4.000244140625,Xa=function(){function t(i,a){p(this,t),this._map=i,this._el=i.getCanvasContainer(),this._handler=a,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,e.bindAll(["_onTimeout"],this)}return f(t,[{key:"setZoomRate",value:function(e){this._defaultZoomRate=e}},{key:"setWheelZoomRate",value:function(e){this._wheelZoomRate=e}},{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return!!this._active||void 0!==this._finishTimeout}},{key:"isZooming",value:function(){return!!this._zooming}},{key:"enable",value:function(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=e&&"center"===e.around)}},{key:"disable",value:function(){this.isEnabled()&&(this._enabled=!1)}},{key:"wheel",value:function(t){if(this.isEnabled()){if(this._map._cooperativeGestures){if(!this._map._metaPress)return;t.preventDefault()}var i=t.deltaMode===WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY,a=e.exported.now(),n=a-(this._lastWheelEventTime||0);this._lastWheelEventTime=a,0!==i&&i%Ua==0?this._type="wheel":0!==i&&Math.abs(i)<4?this._type="trackpad":n>400?(this._type=null,this._lastValue=i,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(n*i)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,i+=this._lastValue)),t.shiftKey&&i&&(i/=4),this._type&&(this._lastWheelEvent=t,this._delta-=i,this._active||this._start(t)),t.preventDefault()}}},{key:"_onTimeout",value:function(e){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)}},{key:"_start",value:function(t){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var i=u.mousePos(this._el,t);this._around=e.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(i)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}}},{key:"renderFrame",value:function(){var t=this;if(this._frameId&&(this._frameId=null,this.isActive())){var i=this._map.transform;if(0!==this._delta){var a="wheel"===this._type&&Math.abs(this._delta)>Ua?this._wheelZoomRate:this._defaultZoomRate,n=2/(1+Math.exp(-Math.abs(this._delta*a)));this._delta<0&&0!==n&&(n=1/n);var r="number"==typeof this._targetZoom?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(r*n))),"wheel"===this._type&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var o,s="number"==typeof this._targetZoom?this._targetZoom:i.zoom,l=this._startZoom,c=this._easing,u=!1;if("wheel"===this._type&&l&&c){var h=Math.min((e.exported.now()-this._lastWheelEventTime)/200,1),d=c(h);o=e.number(l,s,d),h<1?this._frameId||(this._frameId=!0):u=!0}else o=s,u=!0;return this._active=!0,u&&(this._active=!1,this._finishTimeout=setTimeout((function(){t._zooming=!1,t._handler._triggerRenderFrame(),delete t._targetZoom,delete t._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!u,zoomDelta:o-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}}},{key:"_smoothOutEasing",value:function(t){var i=e.ease;if(this._prevEase){var a=this._prevEase,n=(e.exported.now()-a.start)/a.duration,r=a.easing(n+.01)-a.easing(n),o=.27/Math.sqrt(r*r+1e-4)*.01,s=Math.sqrt(.0729-o*o);i=e.bezier(o,s,.25,1)}return this._prevEase={start:e.exported.now(),duration:t,easing:i},i}},{key:"reset",value:function(){this._active=!1}}]),t}(),Ga=function(){function e(t,i){p(this,e),this._clickZoom=t,this._tapZoom=i}return f(e,[{key:"enable",value:function(){this._clickZoom.enable(),this._tapZoom.enable()}},{key:"disable",value:function(){this._clickZoom.disable(),this._tapZoom.disable()}},{key:"isEnabled",value:function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}},{key:"isActive",value:function(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}]),e}(),qa=function(){function e(){p(this,e),this.reset()}return f(e,[{key:"reset",value:function(){this._active=!1}},{key:"dblclick",value:function(e,t){return e.preventDefault(),{cameraAnimation:function(i){i.easeTo({duration:300,zoom:i.getZoom()+(e.shiftKey?-1:1),around:i.unproject(t)},{originalEvent:e})}}}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),Za=function(){function e(){p(this,e),this._tap=new Aa({numTouches:1,numTaps:1}),this.reset()}return f(e,[{key:"reset",value:function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}},{key:"touchstart",value:function(e,t,i){this._swipePoint||(this._tapTime&&e.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?i.length>0&&(this._swipePoint=t[0],this._swipeTouch=i[0].identifier):this._tap.touchstart(e,t,i))}},{key:"touchmove",value:function(e,t,i){if(this._tapTime){if(this._swipePoint){if(i[0].identifier!==this._swipeTouch)return;var a=t[0],n=a.y-this._swipePoint.y;return this._swipePoint=a,e.preventDefault(),this._active=!0,{zoomDelta:n/128}}}else this._tap.touchmove(e,t,i)}},{key:"touchend",value:function(e,t,i){this._tapTime?this._swipePoint&&0===i.length&&this.reset():this._tap.touchend(e,t,i)&&(this._tapTime=e.timeStamp)}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),Ka=function(){function e(t,i,a){p(this,e),this._el=t,this._mousePan=i,this._touchPan=a}return f(e,[{key:"enable",value:function(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}},{key:"disable",value:function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}},{key:"isEnabled",value:function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}},{key:"isActive",value:function(){return this._mousePan.isActive()||this._touchPan.isActive()}}]),e}(),Ja=function(){function e(t,i,a){p(this,e),this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=i,this._mousePitch=a}return f(e,[{key:"enable",value:function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}},{key:"disable",value:function(){this._mouseRotate.disable(),this._mousePitch.disable()}},{key:"isEnabled",value:function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}},{key:"isActive",value:function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}]),e}(),Qa=function(){function e(t,i,a,n){p(this,e),this._el=t,this._touchZoom=i,this._touchRotate=a,this._tapDragZoom=n,this._rotationDisabled=!1,this._enabled=!0}return f(e,[{key:"enable",value:function(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}},{key:"disable",value:function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}},{key:"isEnabled",value:function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}},{key:"isActive",value:function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}},{key:"disableRotation",value:function(){this._rotationDisabled=!0,this._touchRotate.disable()}},{key:"enableRotation",value:function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}]),e}(),$a=function(e){return e.zoom||e.drag||e.pitch||e.rotate},en=function(e){m(i,e);var t=g(i);function i(){return p(this,i),t.apply(this,arguments)}return f(i)}(e.Event);function tn(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}var an=function(){function t(i,a){p(this,t),this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ma(i),this._bearingSnap=a.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(a),e.bindAll(["handleEvent","handleWindowEvent"],this);var n=this._el;this._listeners=[[n,"touchstart",{passive:!0}],[n,"touchmove",{passive:!1}],[n,"touchend",void 0],[n,"touchcancel",void 0],[n,"mousedown",void 0],[n,"mousemove",void 0],[n,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[n,"mouseover",void 0],[n,"mouseout",void 0],[n,"dblclick",void 0],[n,"click",void 0],[n,"keydown",{capture:!1}],[n,"keyup",void 0],[n,"wheel",{passive:!1}],[n,"contextmenu",void 0],[window,"blur",void 0]];var r,o=d(this._listeners);try{for(o.s();!(r=o.n()).done;){var s=h(r.value,3),l=s[0],c=s[1],f=s[2];u.addEventListener(l,c,l===document?this.handleWindowEvent:this.handleEvent,f)}}catch(m){o.e(m)}finally{o.f()}}return f(t,[{key:"destroy",value:function(){var e,t=d(this._listeners);try{for(t.s();!(e=t.n()).done;){var i=h(e.value,3),a=i[0],n=i[1],r=i[2];u.removeEventListener(a,n,a===document?this.handleWindowEvent:this.handleEvent,r)}}catch(o){t.e(o)}finally{t.f()}}},{key:"_addDefaultHandlers",value:function(e){var t=this._map,i=t.getCanvasContainer();this._add("mapEvent",new _a(t,e));var a=t.boxZoom=new ka(t,e);this._add("boxZoom",a);var n=new Oa,r=new qa;t.doubleClickZoom=new Ga(r,n),this._add("tapZoom",n),this._add("clickZoom",r);var o=new Za;this._add("tapDragZoom",o);var s=t.touchPitch=new Va(t);this._add("touchPitch",s);var l=new Ia(e),c=new Pa(e);t.dragRotate=new Ja(e,l,c),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",c,["mouseRotate"]);var u=new Ea(e),h=new Da(e,t);t.dragPan=new Ka(i,u,h),this._add("mousePan",u),this._add("touchPan",h,["touchZoom","touchRotate"]);var d=new Ba,f=new Ra;t.touchZoomRotate=new Qa(i,f,d,o),this._add("touchRotate",d,["touchPan","touchZoom"]),this._add("touchZoom",f,["touchPan","touchRotate"]);var p=t.scrollZoom=new Xa(t,this);this._add("scrollZoom",p,["mousePan"]);var m=t.keyboard=new Wa;this._add("keyboard",m),this._add("blockableMapEvent",new wa(t));for(var g=0,v=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];g<v.length;g++){var y=v[g];e.interactive&&e[y]&&t[y].enable(e[y])}}},{key:"_add",value:function(e,t,i){this._handlers.push({handlerName:e,handler:t,allowed:i}),this._handlersById[e]=t}},{key:"stop",value:function(e){if(!this._updatingCamera){var t,i=d(this._handlers);try{for(i.s();!(t=i.n()).done;)t.value.handler.reset()}catch(a){i.e(a)}finally{i.f()}this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}},{key:"isActive",value:function(){var e,t=d(this._handlers);try{for(t.s();!(e=t.n()).done;)if(e.value.handler.isActive())return!0}catch(i){t.e(i)}finally{t.f()}return!1}},{key:"isZooming",value:function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}},{key:"isRotating",value:function(){return!!this._eventsInProgress.rotate}},{key:"isMoving",value:function(){return Boolean($a(this._eventsInProgress))||this.isZooming()}},{key:"_blockedByActive",value:function(e,t,i){for(var a in e)if(a!==i&&(!t||t.indexOf(a)<0))return!0;return!1}},{key:"handleWindowEvent",value:function(e){this.handleEvent(e,"".concat(e.type,"Window"))}},{key:"_getMapTouches",value:function(e){var t,i=[],a=d(e);try{for(a.s();!(t=a.n()).done;){var n=t.value;this._el.contains(n.target)&&i.push(n)}}catch(r){a.e(r)}finally{a.f()}return i}},{key:"handleEvent",value:function(e,t){if("blur"!==e.type){this._updatingCamera=!0;var i,a="renderFrame"===e.type?void 0:e,n={needsRenderFrame:!1},r={},o={},s=e.touches,l=s?this._getMapTouches(s):void 0,c=l?u.touchPos(this._el,l):u.mousePos(this._el,e),h=d(this._handlers);try{for(h.s();!(i=h.n()).done;){var f=i.value,p=f.handlerName,m=f.handler,g=f.allowed;if(m.isEnabled()){var v=void 0;this._blockedByActive(o,g,p)?m.reset():m[t||e.type]&&(v=m[t||e.type](e,c,l),this.mergeHandlerResult(n,r,v,p,a),v&&v.needsRenderFrame&&this._triggerRenderFrame()),(v||m.isActive())&&(o[p]=m)}}}catch(_){h.e(_)}finally{h.f()}var y={};for(var x in this._previousActiveHandlers)o[x]||(y[x]=a);this._previousActiveHandlers=o,(Object.keys(y).length||tn(n))&&(this._changes.push([n,r,y]),this._triggerRenderFrame()),(Object.keys(o).length||tn(n))&&this._map._stop(!0),this._updatingCamera=!1;var b=n.cameraAnimation;b&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],b(this._map))}else this.stop(!0)}},{key:"mergeHandlerResult",value:function(t,i,a,n,r){if(a){e.extend(t,a);var o={handlerName:n,originalEvent:a.originalEvent||r};void 0!==a.zoomDelta&&(i.zoom=o),void 0!==a.panDelta&&(i.drag=o),void 0!==a.pitchDelta&&(i.pitch=o),void 0!==a.bearingDelta&&(i.rotate=o)}}},{key:"_applyChanges",value:function(){var t,i={},a={},n={},r=d(this._changes);try{for(r.s();!(t=r.n()).done;){var o=h(t.value,3),s=o[0],l=o[1],c=o[2];s.panDelta&&(i.panDelta=(i.panDelta||new e.pointGeometry(0,0))._add(s.panDelta)),s.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+s.zoomDelta),s.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+s.bearingDelta),s.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+s.pitchDelta),void 0!==s.around&&(i.around=s.around),void 0!==s.pinchAround&&(i.pinchAround=s.pinchAround),s.noInertia&&(i.noInertia=s.noInertia),e.extend(a,l),e.extend(n,c)}}catch(u){r.e(u)}finally{r.f()}this._updateMapTransform(i,a,n),this._changes=[]}},{key:"_updateMapTransform",value:function(t,i,a){var n=this._map,r=n.transform,o=n.style&&n.style.terrain;if(!(tn(t)||o&&this._drag))return this._fireEvents(i,a,!0);var s=t.panDelta,l=t.zoomDelta,c=t.bearingDelta,u=t.pitchDelta,h=t.around,d=t.pinchAround;void 0!==d&&(h=d),n._stop(!0),h=h||n.transform.centerPoint;var f=r.pointLocation(s?h.sub(s):h);c&&(r.bearing+=c),u&&(r.pitch+=u),l&&(r.zoom+=l),o?i.drag&&!this._drag?(this._drag={center:r.centerPoint,lngLat:r.pointLocation(h),point:h,handlerName:i.drag.handlerName},n.fire(new e.Event("freezeElevation",{freeze:!0}))):this._drag&&a[this._drag.handlerName]?(n.fire(new e.Event("freezeElevation",{freeze:!1})),this._drag=null):i.drag&&this._drag&&(r.center=r.pointLocation(r.centerPoint.sub(s))):r.setLocationAtPoint(f,h),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(i,a,!0)}},{key:"_fireEvents",value:function(t,i,a){var n=this,r=$a(this._eventsInProgress),o=$a(t),s={};for(var l in t){var c=t[l].originalEvent;this._eventsInProgress[l]||(s["".concat(l,"start")]=c),this._eventsInProgress[l]=t[l]}for(var u in!r&&o&&this._fireEvent("movestart",o.originalEvent),s)this._fireEvent(u,s[u]);for(var h in o&&this._fireEvent("move",o.originalEvent),t){var d=t[h].originalEvent;this._fireEvent(h,d)}var f,p={};for(var m in this._eventsInProgress){var g=this._eventsInProgress[m],v=g.handlerName,y=g.originalEvent;this._handlersById[v].isActive()||(delete this._eventsInProgress[m],f=i[v]||y,p["".concat(m,"end")]=f)}for(var x in p)this._fireEvent(x,p[x]);var b=$a(this._eventsInProgress);if(a&&(r||o)&&!b){this._updatingCamera=!0;var _=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),w=function(e){return 0!==e&&-n._bearingSnap<e&&e<n._bearingSnap};_?(w(_.bearing||this._map.getBearing())&&(_.bearing=0),this._map.easeTo(_,{originalEvent:f})):(this._map.fire(new e.Event("moveend",{originalEvent:f})),w(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}},{key:"_fireEvent",value:function(t,i){this._map.fire(new e.Event(t,i?{originalEvent:i}:{}))}},{key:"_requestFrame",value:function(){var e=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add((function(t){delete e._frameId,e.handleEvent(new en("renderFrame",{timeStamp:t})),e._applyChanges()}))}},{key:"_triggerRenderFrame",value:function(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}]),t}(),nn=function(t){for(var i=arguments.length,a=new Array(i>1?i-1:0),n=1;n<i;n++)a[n-1]=arguments[n];return e.extend.apply(e,[t].concat(a))},rn=function(t){m(a,t);var i=g(a);function a(t,r){var o;return p(this,a),(o=i.call(this))._moving=!1,o._zooming=!1,o.transform=t,o._bearingSnap=r.bearingSnap,e.bindAll(["_renderFrameCallback"],n(o)),o}return f(a,[{key:"getCenter",value:function(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)}},{key:"setCenter",value:function(e,t){return this.jumpTo({center:e},t)}},{key:"panBy",value:function(t,i,a){return t=e.pointGeometry.convert(t).mult(-1),this.panTo(this.transform.center,e.extend({offset:t},i),a)}},{key:"panTo",value:function(t,i,a){return this.easeTo(e.extend({center:t},i),a)}},{key:"getZoom",value:function(){return this.transform.zoom}},{key:"setZoom",value:function(e,t){return this.jumpTo({zoom:e},t),this}},{key:"zoomTo",value:function(t,i,a){return this.easeTo(e.extend({zoom:t},i),a)}},{key:"zoomIn",value:function(e,t){return this.zoomTo(this.getZoom()+1,e,t),this}},{key:"zoomOut",value:function(e,t){return this.zoomTo(this.getZoom()-1,e,t),this}},{key:"getBearing",value:function(){return this.transform.bearing}},{key:"setBearing",value:function(e,t){return this.jumpTo({bearing:e},t),this}},{key:"getPadding",value:function(){return this.transform.padding}},{key:"setPadding",value:function(e,t){return this.jumpTo({padding:e},t),this}},{key:"rotateTo",value:function(t,i,a){return this.easeTo(e.extend({bearing:t},i),a)}},{key:"resetNorth",value:function(t,i){return this.rotateTo(0,e.extend({duration:1e3},t),i),this}},{key:"resetNorthPitch",value:function(t,i){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},t),i),this}},{key:"snapToNorth",value:function(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this}},{key:"getPitch",value:function(){return this.transform.pitch}},{key:"setPitch",value:function(e,t){return this.jumpTo({pitch:e},t),this}},{key:"cameraForBounds",value:function(t,i){t=e.LngLatBounds.convert(t);var a=i&&i.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),a,i)}},{key:"_cameraForBoxAndBearing",value:function(t,i,a,n){var r={top:0,bottom:0,right:0,left:0};if("number"==typeof(n=e.extend({padding:r,offset:[0,0],maxZoom:this.transform.maxZoom},n)).padding){var o=n.padding;n.padding={top:o,bottom:o,right:o,left:o}}n.padding=e.extend(r,n.padding);var s=this.transform,l=s.padding,c=s.project(e.LngLat.convert(t)),u=s.project(e.LngLat.convert(i)),h=c.rotate(-a*Math.PI/180),d=u.rotate(-a*Math.PI/180),f=new e.pointGeometry(Math.max(h.x,d.x),Math.max(h.y,d.y)),p=new e.pointGeometry(Math.min(h.x,d.x),Math.min(h.y,d.y)),m=f.sub(p),g=(s.width-(l.left+l.right+n.padding.left+n.padding.right))/m.x,v=(s.height-(l.top+l.bottom+n.padding.top+n.padding.bottom))/m.y;if(!(v<0||g<0)){var y=Math.min(s.scaleZoom(s.scale*Math.min(g,v)),n.maxZoom),x=e.pointGeometry.convert(n.offset),b=new e.pointGeometry((n.padding.left-n.padding.right)/2,(n.padding.top-n.padding.bottom)/2).rotate(a*Math.PI/180),_=x.add(b).mult(s.scale/s.zoomScale(y));return{center:s.unproject(c.add(u).div(2).sub(_)),zoom:y,bearing:a}}e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}},{key:"fitBounds",value:function(e,t,i){return this._fitInternal(this.cameraForBounds(e,t),t,i)}},{key:"fitScreenCoordinates",value:function(t,i,a,n,r){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(e.pointGeometry.convert(t)),this.transform.pointLocation(e.pointGeometry.convert(i)),a,n),n,r)}},{key:"_fitInternal",value:function(t,i,a){return t?(delete(i=e.extend(t,i)).padding,i.linear?this.easeTo(i,a):this.flyTo(i,a)):this}},{key:"jumpTo",value:function(t,i){this.stop();var a=this.transform,n=!1,r=!1,o=!1;return"zoom"in t&&a.zoom!==+t.zoom&&(n=!0,a.zoom=+t.zoom),void 0!==t.center&&(a.center=e.LngLat.convert(t.center)),"bearing"in t&&a.bearing!==+t.bearing&&(r=!0,a.bearing=+t.bearing),"pitch"in t&&a.pitch!==+t.pitch&&(o=!0,a.pitch=+t.pitch),null==t.padding||a.isPaddingEqual(t.padding)||(a.padding=t.padding),this.fire(new e.Event("movestart",i)).fire(new e.Event("move",i)),n&&this.fire(new e.Event("zoomstart",i)).fire(new e.Event("zoom",i)).fire(new e.Event("zoomend",i)),r&&this.fire(new e.Event("rotatestart",i)).fire(new e.Event("rotate",i)).fire(new e.Event("rotateend",i)),o&&this.fire(new e.Event("pitchstart",i)).fire(new e.Event("pitch",i)).fire(new e.Event("pitchend",i)),this.fire(new e.Event("moveend",i))}},{key:"calculateCameraOptionsFromTo",value:function(t,i,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=e.MercatorCoordinate.fromLngLat(t,i),o=e.MercatorCoordinate.fromLngLat(a,n),s=o.x-r.x,l=o.y-r.y,c=o.z-r.z,u=Math.hypot(s,l,c);if(0===u)throw new Error("Can't calculate camera options with same From and To");var h=Math.hypot(s,l),d=this.transform.scaleZoom(this.transform.cameraToCenterDistance/u/this.transform.tileSize),f=180*Math.atan2(s,-l)/Math.PI,p=180*Math.acos(h/u)/Math.PI;return p=c<0?90-p:90+p,{center:o.toLngLat(),zoom:d,pitch:p,bearing:f}}},{key:"easeTo",value:function(t,i){var a=this;this._stop(!1,t.easeId),(!1===(t=e.extend({offset:[0,0],duration:500,easing:e.ease},t)).animate||!t.essential&&e.exported.prefersReducedMotion)&&(t.duration=0);var n=this.transform,r=this.getZoom(),o=this.getBearing(),s=this.getPitch(),l=this.getPadding(),c="zoom"in t?+t.zoom:r,u="bearing"in t?this._normalizeBearing(t.bearing,o):o,h="pitch"in t?+t.pitch:s,d="padding"in t?t.padding:n.padding,f=e.pointGeometry.convert(t.offset),p=n.centerPoint.add(f),m=n.pointLocation(p),g=e.LngLat.convert(t.center||m);this._normalizeCenter(g);var v,y,x=n.project(m),b=n.project(g).sub(x),_=n.zoomScale(c-r);t.around&&(v=e.LngLat.convert(t.around),y=n.locationPoint(v));var w={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||c!==r,this._rotating=this._rotating||o!==u,this._pitching=this._pitching||h!==s,this._padding=!n.isPaddingEqual(d),this._easeId=t.easeId,this._prepareEase(i,t.noMoveStart,w),this._ease((function(t){if(a._zooming&&(n.zoom=e.number(r,c,t)),a._rotating&&(n.bearing=e.number(o,u,t)),a._pitching&&(n.pitch=e.number(s,h,t)),a._padding&&(n.interpolatePadding(l,d,t),p=n.centerPoint.add(f)),v)n.setLocationAtPoint(v,y);else{var m=n.zoomScale(n.zoom-r),g=c>r?Math.min(2,_):Math.max(.5,_),w=Math.pow(g,1-t),k=n.unproject(x.add(b.mult(t*w)).mult(m));n.setLocationAtPoint(n.renderWorldCopies?k.wrap():k,p)}a._fireMoveEvents(i)}),(function(e){a._afterEase(i,e)}),t),this}},{key:"_prepareEase",value:function(t,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._moving=!0,this.fire(new e.Event("freezeElevation",{freeze:!0})),i||a.moving||this.fire(new e.Event("movestart",t)),this._zooming&&!a.zooming&&this.fire(new e.Event("zoomstart",t)),this._rotating&&!a.rotating&&this.fire(new e.Event("rotatestart",t)),this._pitching&&!a.pitching&&this.fire(new e.Event("pitchstart",t))}},{key:"_fireMoveEvents",value:function(t){this.fire(new e.Event("move",t)),this._zooming&&this.fire(new e.Event("zoom",t)),this._rotating&&this.fire(new e.Event("rotate",t)),this._pitching&&this.fire(new e.Event("pitch",t))}},{key:"_afterEase",value:function(t,i){if(!this._easeId||!i||this._easeId!==i){delete this._easeId,this.fire(new e.Event("freezeElevation",{freeze:!1}));var a=this._zooming,n=this._rotating,r=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,a&&this.fire(new e.Event("zoomend",t)),n&&this.fire(new e.Event("rotateend",t)),r&&this.fire(new e.Event("pitchend",t)),this.fire(new e.Event("moveend",t))}}},{key:"flyTo",value:function(t,i){var a=this;if(!t.essential&&e.exported.prefersReducedMotion){var n=e.pick(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(n,i)}this.stop(),t=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},t);var r=this.transform,o=this.getZoom(),s=this.getBearing(),l=this.getPitch(),c=this.getPadding(),u="zoom"in t?e.clamp(+t.zoom,r.minZoom,r.maxZoom):o,h="bearing"in t?this._normalizeBearing(t.bearing,s):s,d="pitch"in t?+t.pitch:l,f="padding"in t?t.padding:r.padding,p=r.zoomScale(u-o),m=e.pointGeometry.convert(t.offset),g=r.centerPoint.add(m),v=r.pointLocation(g),y=e.LngLat.convert(t.center||v);this._normalizeCenter(y);var x=r.project(v),b=r.project(y).sub(x),_=t.curve,w=Math.max(r.width,r.height),k=w/p,S=b.mag();if("minZoom"in t){var C=e.clamp(Math.min(t.minZoom,o,u),r.minZoom,r.maxZoom),A=w/r.zoomScale(C-o);_=Math.sqrt(A/S*2)}var O=_*_;function T(e){var t=(k*k-w*w+(e?-1:1)*O*O*S*S)/(2*(e?k:w)*O*S);return Math.log(Math.sqrt(t*t+1)-t)}function M(e){return(Math.exp(e)-Math.exp(-e))/2}function E(e){return(Math.exp(e)+Math.exp(-e))/2}var I=T(0),P=function(e){return E(I)/E(I+_*e)},D=function(e){return w*((E(I)*(M(t=I+_*e)/E(t))-M(I))/O)/S;var t},z=(T(1)-I)/_;if(Math.abs(S)<1e-6||!isFinite(z)){if(Math.abs(w-k)<1e-6)return this.easeTo(t,i);var L=k<w?-1:1;z=Math.abs(Math.log(k/w))/_,D=function(){return 0},P=function(e){return Math.exp(L*_*e)}}return t.duration="duration"in t?+t.duration:1e3*z/("screenSpeed"in t?+t.screenSpeed/_:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=s!==h,this._pitching=d!==l,this._padding=!r.isPaddingEqual(f),this._prepareEase(i,!1),this._ease((function(t){var n=t*z,p=1/P(n);r.zoom=1===t?u:o+r.scaleZoom(p),a._rotating&&(r.bearing=e.number(s,h,t)),a._pitching&&(r.pitch=e.number(l,d,t)),a._padding&&(r.interpolatePadding(c,f,t),g=r.centerPoint.add(m));var v=1===t?y:r.unproject(x.add(b.mult(D(n))).mult(p));r.setLocationAtPoint(r.renderWorldCopies?v.wrap():v,g),a._fireMoveEvents(i)}),(function(){return a._afterEase(i)}),t),this}},{key:"isEasing",value:function(){return!!this._easeFrameId}},{key:"stop",value:function(){return this._stop()}},{key:"_stop",value:function(e,t){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var i=this._onEaseEnd;delete this._onEaseEnd,i.call(this,t)}if(!e){var a=this.handlers;a&&a.stop(!1)}return this}},{key:"_ease",value:function(t,i,a){!1===a.animate||0===a.duration?(t(1),i()):(this._easeStart=e.exported.now(),this._easeOptions=a,this._onEaseFrame=t,this._onEaseEnd=i,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}},{key:"_renderFrameCallback",value:function(){var t=Math.min((e.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}},{key:"_normalizeBearing",value:function(t,i){t=e.wrap(t,-180,180);var a=Math.abs(t-i);return Math.abs(t-360-i)<a&&(t-=360),Math.abs(t+360-i)<a&&(t+=360),t}},{key:"_normalizeCenter",value:function(e){var t=this.transform;if(t.renderWorldCopies&&!t.lngRange){var i=e.lng-t.center.lng;e.lng+=i>180?-360:i<-180?360:0}}}]),a}(e.Evented),on=function(){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p(this,t),this.options=i,e.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}return f(t,[{key:"getDefaultPosition",value:function(){return"bottom-right"}},{key:"onAdd",value:function(e){return this._map=e,this._compact=this.options&&this.options.compact,this._container=u.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=u.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=u.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}},{key:"onRemove",value:function(){u.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}},{key:"_setElementTitle",value:function(e,t){var i=this._map._getUIString("AttributionControl.".concat(t));e.title=i,e.setAttribute("aria-label",i)}},{key:"_toggleAttribution",value:function(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}},{key:"_updateData",value:function(e){!e||"metadata"!==e.sourceDataType&&"visibility"!==e.sourceDataType&&"style"!==e.dataType&&"terrain"!==e.type||this._updateAttributions()}},{key:"_updateAttributions",value:function(){if(this._map.style){var e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map((function(e){return"string"!=typeof e?"":e}))):"string"==typeof this.options.customAttribution&&e.push(this.options.customAttribution)),this._map.style.stylesheet){var t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}var i=this._map.style.sourceCaches;for(var a in i){var n=i[a];if(n.used||n.usedForTerrain){var r=n.getSource();r.attribution&&e.indexOf(r.attribution)<0&&e.push(r.attribution)}}(e=e.filter((function(e){return String(e).trim()}))).sort((function(e,t){return e.length-t.length}));var o=(e=e.filter((function(t,i){for(var a=i+1;a<e.length;a++)if(e[a].indexOf(t)>=0)return!1;return!0}))).join(" | ");o!==this._attribHTML&&(this._attribHTML=o,e.length?(this._innerContainer.innerHTML=o,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}}},{key:"_updateCompact",value:function(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1===this._compact?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}},{key:"_updateCompactMinimize",value:function(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}]),t}(),sn=function(){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p(this,t),this.options=i,e.bindAll(["_updateCompact"],this)}return f(t,[{key:"getDefaultPosition",value:function(){return"bottom-left"}},{key:"onAdd",value:function(e){this._map=e,this._compact=this.options&&this.options.compact,this._container=u.create("div","maplibregl-ctrl mapboxgl-ctrl");var t=u.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://maplibre.org/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}},{key:"onRemove",value:function(){u.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}},{key:"_updateCompact",value:function(){var e=this._container.children;if(e.length){var t=e[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1!==this._compact&&t.classList.add("maplibregl-compact","mapboxgl-compact"):t.classList.remove("maplibregl-compact","mapboxgl-compact")}}}]),t}(),ln=function(){function e(){p(this,e),this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}return f(e,[{key:"add",value:function(e){var t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t}},{key:"remove",value:function(e){var t,i=this._currentlyRunning,a=i?this._queue.concat(i):this._queue,n=d(a);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.id===e)return void(r.cancelled=!0)}}catch(o){n.e(o)}finally{n.f()}}},{key:"run",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");var t=this._currentlyRunning=this._queue;this._queue=[];var i,a=d(t);try{for(a.s();!(i=a.n()).done;){var n=i.value;if(!n.cancelled&&(n.callback(e),this._cleared))break}}catch(r){a.e(r)}finally{a.f()}this._cleared=!1,this._currentlyRunning=!1}},{key:"clear",value:function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}]),e}(),cn={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},un={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},hn={showCompass:!0,showZoom:!0,visualizePitch:!1},dn=function(){function t(i,a){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];p(this,t),this._clickTolerance=10,this.element=a,this.mouseRotate=new Ia({clickTolerance:i.dragRotate._mouseRotate._clickTolerance}),this.map=i,n&&(this.mousePitch=new Pa({clickTolerance:i.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),u.addEventListener(a,"mousedown",this.mousedown),u.addEventListener(a,"touchstart",this.touchstart,{passive:!1}),u.addEventListener(a,"touchmove",this.touchmove),u.addEventListener(a,"touchend",this.touchend),u.addEventListener(a,"touchcancel",this.reset)}return f(t,[{key:"down",value:function(e,t){this.mouseRotate.mousedown(e,t),this.mousePitch&&this.mousePitch.mousedown(e,t),u.disableDrag()}},{key:"move",value:function(e,t){var i=this.map,a=this.mouseRotate.mousemoveWindow(e,t);if(a&&a.bearingDelta&&i.setBearing(i.getBearing()+a.bearingDelta),this.mousePitch){var n=this.mousePitch.mousemoveWindow(e,t);n&&n.pitchDelta&&i.setPitch(i.getPitch()+n.pitchDelta)}}},{key:"off",value:function(){var e=this.element;u.removeEventListener(e,"mousedown",this.mousedown),u.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),u.removeEventListener(e,"touchmove",this.touchmove),u.removeEventListener(e,"touchend",this.touchend),u.removeEventListener(e,"touchcancel",this.reset),this.offTemp()}},{key:"offTemp",value:function(){u.enableDrag(),u.removeEventListener(window,"mousemove",this.mousemove),u.removeEventListener(window,"mouseup",this.mouseup)}},{key:"mousedown",value:function(t){this.down(e.extend({},t,{ctrlKey:!0,preventDefault:function(){return t.preventDefault()}}),u.mousePos(this.element,t)),u.addEventListener(window,"mousemove",this.mousemove),u.addEventListener(window,"mouseup",this.mouseup)}},{key:"mousemove",value:function(e){this.move(e,u.mousePos(this.element,e))}},{key:"mouseup",value:function(e){this.mouseRotate.mouseupWindow(e),this.mousePitch&&this.mousePitch.mouseupWindow(e),this.offTemp()}},{key:"touchstart",value:function(e){1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=u.touchPos(this.element,e.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return e.preventDefault()}},this._startPos))}},{key:"touchmove",value:function(e){1!==e.targetTouches.length?this.reset():(this._lastPos=u.touchPos(this.element,e.targetTouches)[0],this.move({preventDefault:function(){return e.preventDefault()}},this._lastPos))}},{key:"touchend",value:function(e){0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}},{key:"reset",value:function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}]),t}();function fn(t,i,a){if(t=new e.LngLat(t.lng,t.lat),i){var n=new e.LngLat(t.lng-360,t.lat),r=new e.LngLat(t.lng+360,t.lat),o=a.locationPoint(t).distSqr(i);a.locationPoint(n).distSqr(i)<o?t=n:a.locationPoint(r).distSqr(i)<o&&(t=r)}for(;Math.abs(t.lng-a.center.lng)>180;){var s=a.locationPoint(t);if(s.x>=0&&s.y>=0&&s.x<=a.width&&s.y<=a.height)break;t.lng>a.center.lng?t.lng-=360:t.lng+=360}return t}var pn={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function mn(e,t,i){var a=e.classList;for(var n in pn)a.remove("maplibregl-".concat(i,"-anchor-").concat(n),"mapboxgl-".concat(i,"-anchor-").concat(n));a.add("maplibregl-".concat(i,"-anchor-").concat(t),"mapboxgl-".concat(i,"-anchor-").concat(t))}var gn,vn=function(t){m(a,t);var i=g(a);function a(t,r){var o;if(p(this,a),o=i.call(this),(t instanceof HTMLElement||r)&&(t=e.extend({element:t},r)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],n(o)),o._anchor=t&&t.anchor||"center",o._color=t&&t.color||"#3FB1CE",o._scale=t&&t.scale||1,o._draggable=t&&t.draggable||!1,o._clickTolerance=t&&t.clickTolerance||0,o._isDragging=!1,o._state="inactive",o._rotation=t&&t.rotation||0,o._rotationAlignment=t&&t.rotationAlignment||"auto",o._pitchAlignment=t&&t.pitchAlignment&&"auto"!==t.pitchAlignment?t.pitchAlignment:o._rotationAlignment,t&&t.element)o._element=t.element,o._offset=e.pointGeometry.convert(t&&t.offset||[0,0]);else{o._defaultMarker=!0,o._element=u.create("div"),o._element.setAttribute("aria-label","Map marker");var s=u.createNS("http://www.w3.org/2000/svg","svg");s.setAttributeNS(null,"display","block"),s.setAttributeNS(null,"height","".concat(41,"px")),s.setAttributeNS(null,"width","".concat(27,"px")),s.setAttributeNS(null,"viewBox","0 0 ".concat(27," ").concat(41));var c=u.createNS("http://www.w3.org/2000/svg","g");c.setAttributeNS(null,"stroke","none"),c.setAttributeNS(null,"stroke-width","1"),c.setAttributeNS(null,"fill","none"),c.setAttributeNS(null,"fill-rule","evenodd");var h=u.createNS("http://www.w3.org/2000/svg","g");h.setAttributeNS(null,"fill-rule","nonzero");var d=u.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"transform","translate(3.0, 29.0)"),d.setAttributeNS(null,"fill","#000000");for(var f=0,m=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];f<m.length;f++){var g=m[f],v=u.createNS("http://www.w3.org/2000/svg","ellipse");v.setAttributeNS(null,"opacity","0.04"),v.setAttributeNS(null,"cx","10.5"),v.setAttributeNS(null,"cy","5.80029008"),v.setAttributeNS(null,"rx",g.rx),v.setAttributeNS(null,"ry",g.ry),d.appendChild(v)}var y=u.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"fill",o._color);var x=u.createNS("http://www.w3.org/2000/svg","path");x.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),y.appendChild(x);var b=u.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"opacity","0.25"),b.setAttributeNS(null,"fill","#000000");var _=u.createNS("http://www.w3.org/2000/svg","path");_.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),b.appendChild(_);var w=u.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"transform","translate(6.0, 7.0)"),w.setAttributeNS(null,"fill","#FFFFFF");var k=u.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"transform","translate(8.0, 8.0)");var S=u.createNS("http://www.w3.org/2000/svg","circle");S.setAttributeNS(null,"fill","#000000"),S.setAttributeNS(null,"opacity","0.25"),S.setAttributeNS(null,"cx","5.5"),S.setAttributeNS(null,"cy","5.5"),S.setAttributeNS(null,"r","5.4999962");var C=u.createNS("http://www.w3.org/2000/svg","circle");C.setAttributeNS(null,"fill","#FFFFFF"),C.setAttributeNS(null,"cx","5.5"),C.setAttributeNS(null,"cy","5.5"),C.setAttributeNS(null,"r","5.4999962"),k.appendChild(S),k.appendChild(C),h.appendChild(d),h.appendChild(y),h.appendChild(b),h.appendChild(w),h.appendChild(k),s.appendChild(h),s.setAttributeNS(null,"height",41*o._scale+"px"),s.setAttributeNS(null,"width",27*o._scale+"px"),o._element.appendChild(s),o._offset=e.pointGeometry.convert(t&&t.offset||[0,-14])}return o._element.classList.add("maplibregl-marker","mapboxgl-marker"),o._element.addEventListener("dragstart",(function(e){e.preventDefault()})),o._element.addEventListener("mousedown",(function(e){e.preventDefault()})),mn(o._element,o._anchor,"marker"),o._popup=null,l(o)}return f(a,[{key:"addTo",value:function(e){return this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}},{key:"remove",value:function(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),u.remove(this._element),this._popup&&this._popup.remove(),this}},{key:"getLngLat",value:function(){return this._lngLat}},{key:"setLngLat",value:function(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}},{key:"getElement",value:function(){return this._element}},{key:"setPopup",value:function(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){var t=Math.sqrt(Math.pow(13.5,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[t,-1*(24.6+t)],"bottom-right":[-t,-1*(24.6+t)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=e,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}},{key:"_onKeyPress",value:function(e){var t=e.code,i=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==i&&13!==i||this.togglePopup()}},{key:"_onMapClick",value:function(e){var t=e.originalEvent.target,i=this._element;this._popup&&(t===i||i.contains(t))&&this.togglePopup()}},{key:"getPopup",value:function(){return this._popup}},{key:"togglePopup",value:function(){var e=this._popup;return e?(e.isOpen()?e.remove():e.addTo(this._map),this):this}},{key:"_update",value:function(e){var t=this;if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=fn(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var i="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?i="rotateZ(".concat(this._rotation,"deg)"):"map"===this._rotationAlignment&&(i="rotateZ(".concat(this._rotation-this._map.getBearing(),"deg)"));var a="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?a="rotateX(0deg)":"map"===this._pitchAlignment&&(a="rotateX(".concat(this._map.getPitch(),"deg)")),e&&"moveend"!==e.type||(this._pos=this._pos.round()),u.setTransform(this._element,"".concat(pn[this._anchor]," translate(").concat(this._pos.x,"px, ").concat(this._pos.y,"px) ").concat(a," ").concat(i)),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout((function(){var e=t._map.unproject(t._pos),i=40075016.686*Math.abs(Math.cos(t._lngLat.lat*Math.PI/180))/Math.pow(2,t._map.transform.tileZoom+8);t._element.style.opacity=e.distanceTo(t._lngLat)>20*i?"0.2":"1.0",t._opacityTimeout=null}),100))}}},{key:"getOffset",value:function(){return this._offset}},{key:"setOffset",value:function(t){return this._offset=e.pointGeometry.convert(t),this._update(),this}},{key:"_onMove",value:function(t){if(!this._isDragging){var i=this._clickTolerance||this._map._clickTolerance;this._isDragging=t.point.dist(this._pointerdownPos)>=i}this._isDragging&&(this._pos=t.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag")))}},{key:"_onUp",value:function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"}},{key:"_addDragHandler",value:function(e){this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(this._pos).add(this._offset),this._pointerdownPos=e.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}},{key:"setDraggable",value:function(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}},{key:"isDraggable",value:function(){return this._draggable}},{key:"setRotation",value:function(e){return this._rotation=e||0,this._update(),this}},{key:"getRotation",value:function(){return this._rotation}},{key:"setRotationAlignment",value:function(e){return this._rotationAlignment=e||"auto",this._update(),this}},{key:"getRotationAlignment",value:function(){return this._rotationAlignment}},{key:"setPitchAlignment",value:function(e){return this._pitchAlignment=e&&"auto"!==e?e:this._rotationAlignment,this._update(),this}},{key:"getPitchAlignment",value:function(){return this._pitchAlignment}}]),a}(e.Evented),yn={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},xn=0,bn=!1,_n={maxWidth:100,unit:"metric"};function wn(e,t,i){var a=i&&i.maxWidth||100,n=e._container.clientHeight/2,r=e.unproject([0,n]),o=e.unproject([a,n]),s=r.distanceTo(o);if(i&&"imperial"===i.unit){var l=3.2808*s;l>5280?kn(t,a,l/5280,e._getUIString("ScaleControl.Miles")):kn(t,a,l,e._getUIString("ScaleControl.Feet"))}else i&&"nautical"===i.unit?kn(t,a,s/1852,e._getUIString("ScaleControl.NauticalMiles")):s>=1e3?kn(t,a,s/1e3,e._getUIString("ScaleControl.Kilometers")):kn(t,a,s,e._getUIString("ScaleControl.Meters"))}function kn(e,t,i,a){var n=function(e){var t=Math.pow(10,"".concat(Math.floor(e)).length-1),i=e/t;return t*(i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:i>=1?1:function(e){var t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(i))}(i);e.style.width=t*(n/i)+"px",e.innerHTML="".concat(n,"&nbsp;").concat(a)}var Sn={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Cn=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function An(t){if(t){if("number"==typeof t){var i=Math.round(Math.sqrt(.5*Math.pow(t,2)));return{center:new e.pointGeometry(0,0),top:new e.pointGeometry(0,t),"top-left":new e.pointGeometry(i,i),"top-right":new e.pointGeometry(-i,i),bottom:new e.pointGeometry(0,-t),"bottom-left":new e.pointGeometry(i,-i),"bottom-right":new e.pointGeometry(-i,-i),left:new e.pointGeometry(t,0),right:new e.pointGeometry(-t,0)}}if(t instanceof e.pointGeometry||Array.isArray(t)){var a=e.pointGeometry.convert(t);return{center:a,top:a,"top-left":a,"top-right":a,bottom:a,"bottom-left":a,"bottom-right":a,left:a,right:a}}return{center:e.pointGeometry.convert(t.center||[0,0]),top:e.pointGeometry.convert(t.top||[0,0]),"top-left":e.pointGeometry.convert(t["top-left"]||[0,0]),"top-right":e.pointGeometry.convert(t["top-right"]||[0,0]),bottom:e.pointGeometry.convert(t.bottom||[0,0]),"bottom-left":e.pointGeometry.convert(t["bottom-left"]||[0,0]),"bottom-right":e.pointGeometry.convert(t["bottom-right"]||[0,0]),left:e.pointGeometry.convert(t.left||[0,0]),right:e.pointGeometry.convert(t.right||[0,0])}}return An(new e.pointGeometry(0,0))}var On={supported:t,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:function(i){m(y,i);var c=g(y);function y(t){var i,a;if(p(this,y),e.PerformanceUtils.mark(e.PerformanceMarkers.create),null!=(t=e.extend({},un,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=t.minPitch&&null!=t.maxPitch&&t.minPitch>t.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=t.minPitch&&t.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=t.maxPitch&&t.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if((i=c.call(this,new la(t.minZoom,t.maxZoom,t.minPitch,t.maxPitch,t.renderWorldCopies),{bearingSnap:t.bearingSnap}))._interactive=t.interactive,i._cooperativeGestures=t.cooperativeGestures,i._maxTileCacheSize=t.maxTileCacheSize,i._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,i._preserveDrawingBuffer=t.preserveDrawingBuffer,i._antialias=t.antialias,i._trackResize=t.trackResize,i._bearingSnap=t.bearingSnap,i._refreshExpiredTiles=t.refreshExpiredTiles,i._fadeDuration=t.fadeDuration,i._crossSourceCollisions=t.crossSourceCollisions,i._crossFadingFactor=1,i._collectResourceTiming=t.collectResourceTiming,i._renderTaskQueue=new ln,i._controls=[],i._mapId=e.uniqueId(),i._locale=e.extend({},cn,t.locale),i._clickTolerance=t.clickTolerance,i._pixelRatio=null!==(a=t.pixelRatio)&&void 0!==a?a:devicePixelRatio,i._requestManager=new v(t.transformRequest),"string"==typeof t.container){if(i._container=document.getElementById(t.container),!i._container)throw new Error("Container '".concat(t.container,"' not found."))}else{if(!(t.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");i._container=t.container}if(t.maxBounds&&i.setMaxBounds(t.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],n(i)),i._setupContainer(),i._setupPainter(),void 0===i.painter)throw new Error("Failed to initialize WebGL.");return i.on("move",(function(){return i._update(!1)})),i.on("moveend",(function(){return i._update(!1)})),i.on("zoom",(function(){return i._update(!0)})),i.on("terrain",(function(){i.painter.terrainFacilitator.dirty=!0,i._update(!0)})),"undefined"!=typeof window&&(addEventListener("online",i._onWindowOnline,!1),addEventListener("resize",i._onWindowResize,!1),addEventListener("orientationchange",i._onWindowResize,!1)),i.handlers=new an(n(i),t),i._cooperativeGestures&&i._setupCooperativeGestures(),i._hash=t.hash&&new ca("string"==typeof t.hash&&t.hash||void 0).addTo(n(i)),i._hash&&i._hash._onHashChange()||(i.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(i.resize(),i.fitBounds(t.bounds,e.extend({},t.fitBoundsOptions,{duration:0})))),i.resize(),i._localIdeographFontFamily=t.localIdeographFontFamily,t.style&&i.setStyle(t.style,{localIdeographFontFamily:t.localIdeographFontFamily}),t.attributionControl&&i.addControl(new on({customAttribution:t.customAttribution})),t.maplibreLogo&&i.addControl(new sn,t.logoPosition),i.on("style.load",(function(){i.transform.unmodified&&i.jumpTo(i.style.stylesheet)})),i.on("data",(function(t){i._update("style"===t.dataType),i.fire(new e.Event("".concat(t.dataType,"data"),t))})),i.on("dataloading",(function(t){i.fire(new e.Event("".concat(t.dataType,"dataloading"),t))})),i.on("dataabort",(function(t){i.fire(new e.Event("sourcedataabort",t))})),l(i)}return f(y,[{key:"_getMapId",value:function(){return this._mapId}},{key:"addControl",value:function(t,i){if(void 0===i&&(i=t.getDefaultPosition?t.getDefaultPosition():"top-right"),!t||!t.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var a=t.onAdd(this);this._controls.push(t);var n=this._controlPositions[i];return-1!==i.indexOf("bottom")?n.insertBefore(a,n.firstChild):n.appendChild(a),this}},{key:"removeControl",value:function(t){if(!t||!t.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var i=this._controls.indexOf(t);return i>-1&&this._controls.splice(i,1),t.onRemove(this),this}},{key:"hasControl",value:function(e){return this._controls.indexOf(e)>-1}},{key:"calculateCameraOptionsFromTo",value:function(e,t,i,a){return null==a&&this.style.terrain&&(a=this.transform.getElevation(i,this.style.terrain)),o(s(y.prototype),"calculateCameraOptionsFromTo",this).call(this,e,t,i,a)}},{key:"resize",value:function(t){var i=this._containerDimensions(),a=i[0],n=i[1];this._resizeCanvas(a,n,this.getPixelRatio()),this.transform.resize(a,n),this.painter.resize(a,n,this.getPixelRatio());var r=!this._moving;return r&&(this.stop(),this.fire(new e.Event("movestart",t)).fire(new e.Event("move",t))),this.fire(new e.Event("resize",t)),r&&this.fire(new e.Event("moveend",t)),this}},{key:"getPixelRatio",value:function(){return this._pixelRatio}},{key:"setPixelRatio",value:function(e){var t=this._containerDimensions(),i=h(t,2),a=i[0],n=i[1];this._pixelRatio=e,this._resizeCanvas(a,n,e),this.painter.resize(a,n,e)}},{key:"getBounds",value:function(){return this.transform.getBounds()}},{key:"getMaxBounds",value:function(){return this.transform.getMaxBounds()}},{key:"setMaxBounds",value:function(t){return this.transform.setMaxBounds(e.LngLatBounds.convert(t)),this._update()}},{key:"setMinZoom",value:function(e){if((e=null==e?-2:e)>=-2&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e&&this.setZoom(e),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}},{key:"getMinZoom",value:function(){return this.transform.minZoom}},{key:"setMaxZoom",value:function(e){if((e=null==e?22:e)>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e&&this.setZoom(e),this;throw new Error("maxZoom must be greater than the current minZoom")}},{key:"getMaxZoom",value:function(){return this.transform.maxZoom}},{key:"setMinPitch",value:function(e){if((e=null==e?0:e)<0)throw new Error("minPitch must be greater than or equal to 0");if(e>=0&&e<=this.transform.maxPitch)return this.transform.minPitch=e,this._update(),this.getPitch()<e&&this.setPitch(e),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}},{key:"getMinPitch",value:function(){return this.transform.minPitch}},{key:"setMaxPitch",value:function(e){if((e=null==e?60:e)>85)throw new Error("maxPitch must be less than or equal to 85");if(e>=this.transform.minPitch)return this.transform.maxPitch=e,this._update(),this.getPitch()>e&&this.setPitch(e),this;throw new Error("maxPitch must be greater than the current minPitch")}},{key:"getMaxPitch",value:function(){return this.transform.maxPitch}},{key:"getRenderWorldCopies",value:function(){return this.transform.renderWorldCopies}},{key:"setRenderWorldCopies",value:function(e){return this.transform.renderWorldCopies=e,this._update()}},{key:"project",value:function(t){return this.transform.locationPoint(e.LngLat.convert(t),this.style&&this.style.terrain)}},{key:"unproject",value:function(t){return this.transform.pointLocation(e.pointGeometry.convert(t),this.style&&this.style.terrain)}},{key:"isMoving",value:function(){return this._moving||this.handlers.isMoving()}},{key:"isZooming",value:function(){return this._zooming||this.handlers.isZooming()}},{key:"isRotating",value:function(){return this._rotating||this.handlers.isRotating()}},{key:"_createDelegatedListener",value:function(e,t,i){var n=this;if("mouseenter"===e||"mouseover"===e){var r=!1;return{layer:t,listener:i,delegates:{mousemove:function(a){var o=n.getLayer(t)?n.queryRenderedFeatures(a.point,{layers:[t]}):[];o.length?r||(r=!0,i.call(n,new ya(e,n,a.originalEvent,{features:o}))):r=!1},mouseout:function(){r=!1}}}}if("mouseleave"===e||"mouseout"===e){var o=!1;return{layer:t,listener:i,delegates:{mousemove:function(a){(n.getLayer(t)?n.queryRenderedFeatures(a.point,{layers:[t]}):[]).length?o=!0:o&&(o=!1,i.call(n,new ya(e,n,a.originalEvent)))},mouseout:function(t){o&&(o=!1,i.call(n,new ya(e,n,t.originalEvent)))}}}}return{layer:t,listener:i,delegates:a({},e,(function(e){var a=n.getLayer(t)?n.queryRenderedFeatures(e.point,{layers:[t]}):[];a.length&&(e.features=a,i.call(n,e),delete e.features)}))}}},{key:"on",value:function(e,t,i){if(void 0===i)return o(s(y.prototype),"on",this).call(this,e,t);var a=this._createDelegatedListener(e,t,i);for(var n in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(a),a.delegates)this.on(n,a.delegates[n]);return this}},{key:"once",value:function(e,t,i){if(void 0===i)return o(s(y.prototype),"once",this).call(this,e,t);var a=this._createDelegatedListener(e,t,i);for(var n in a.delegates)this.once(n,a.delegates[n]);return this}},{key:"off",value:function(e,t,i){var a=this;return void 0===i?o(s(y.prototype),"off",this).call(this,e,t):(this._delegatedListeners&&this._delegatedListeners[e]&&function(n){for(var r=a._delegatedListeners[e],o=0;o<r.length;o++){var s=r[o];if(s.layer===t&&s.listener===i){for(var l in s.delegates)a.off(l,s.delegates[l]);return r.splice(o,1),a}}}(),this)}},{key:"queryRenderedFeatures",value:function(t,i){if(!this.style)return[];var a;if(void 0!==i||void 0===t||t instanceof e.pointGeometry||Array.isArray(t)||(i=t,t=void 0),i=i||{},(t=t||[[0,0],[this.transform.width,this.transform.height]])instanceof e.pointGeometry||"number"==typeof t[0])a=[e.pointGeometry.convert(t)];else{var n=e.pointGeometry.convert(t[0]),r=e.pointGeometry.convert(t[1]);a=[n,new e.pointGeometry(r.x,n.y),r,new e.pointGeometry(n.x,r.y),n]}return this.style.queryRenderedFeatures(a,i,this.transform)}},{key:"querySourceFeatures",value:function(e,t){return this.style.querySourceFeatures(e,t)}},{key:"setStyle",value:function(t,i){return!1!==(i=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},i)).diff&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&t?(this._diffStyle(t,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(t,i))}},{key:"setTransformRequest",value:function(e){return this._requestManager.setTransformRequest(e),this}},{key:"_getUIString",value:function(e){var t=this._locale[e];if(null==t)throw new Error("Missing UI string '".concat(e,"'"));return t}},{key:"_updateStyle",value:function(e,t){return this.style&&(this.style.setEventedParent(null),this.style._remove()),e?(this.style=new ht(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e),this):(delete this.style,this)}},{key:"_lazyInitEmptyStyle",value:function(){this.style||(this.style=new ht(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}},{key:"_diffStyle",value:function(t,i){var a=this;if("string"==typeof t){var n=this._requestManager.transformRequest(t,e.ResourceType.Style);e.getJSON(n,(function(t,n){t?a.fire(new e.ErrorEvent(t)):n&&a._updateDiff(n,i)}))}else"object"==typeof t&&this._updateDiff(t,i)}},{key:"_updateDiff",value:function(t,i){try{this.style.setState(t)&&this._update(!0)}catch(r){e.warnOnce("Unable to perform style diff: ".concat(r.message||r.error||r,".  Rebuilding the style from scratch.")),this._updateStyle(t,i)}}},{key:"getStyle",value:function(){if(this.style)return this.style.serialize()}},{key:"isStyleLoaded",value:function(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")}},{key:"addSource",value:function(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)}},{key:"isSourceLoaded",value:function(t){var i=this.style&&this.style.sourceCaches[t];if(void 0!==i)return i.loaded();this.fire(new e.ErrorEvent(new Error("There is no source with ID '".concat(t,"'"))))}},{key:"setTerrain",value:function(e){return this.style.setTerrain(e),this}},{key:"getTerrain",value:function(){return this.style.terrain&&this.style.terrain.options}},{key:"areTilesLoaded",value:function(){var e=this.style&&this.style.sourceCaches;for(var t in e){var i=e[t]._tiles;for(var a in i){var n=i[a];if("loaded"!==n.state&&"errored"!==n.state)return!1}}return!0}},{key:"addSourceType",value:function(e,t,i){return this._lazyInitEmptyStyle(),this.style.addSourceType(e,t,i)}},{key:"removeSource",value:function(e){return this.style.removeSource(e),this._update(!0)}},{key:"getSource",value:function(e){return this.style.getSource(e)}},{key:"addImage",value:function(t,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.pixelRatio,r=void 0===n?1:n,o=a.sdf,s=void 0!==o&&o,l=a.stretchX,c=a.stretchY,u=a.content;if(this._lazyInitEmptyStyle(),i instanceof HTMLImageElement||e.isImageBitmap(i)){var h=e.exported.getImageData(i),d=h.width,f=h.height,p=h.data;this.style.addImage(t,{data:new e.RGBAImage({width:d,height:f},p),pixelRatio:r,stretchX:l,stretchY:c,content:u,sdf:s,version:0})}else{if(void 0===i.width||void 0===i.height)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var m=i.width,g=i.height,v=i.data,y=i;this.style.addImage(t,{data:new e.RGBAImage({width:m,height:g},new Uint8Array(v)),pixelRatio:r,stretchX:l,stretchY:c,content:u,sdf:s,version:0,userImage:y}),y.onAdd&&y.onAdd(this,t)}}},{key:"updateImage",value:function(t,i){var a=this.style.getImage(t);if(!a)return this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var n=i instanceof HTMLImageElement||e.isImageBitmap(i)?e.exported.getImageData(i):i,r=n.width,o=n.height,s=n.data;if(void 0===r||void 0===o)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(r!==a.data.width||o!==a.data.height)return this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var l=!(i instanceof HTMLImageElement||e.isImageBitmap(i));a.data.replace(s,l),this.style.updateImage(t,a)}},{key:"hasImage",value:function(t){return t?!!this.style.getImage(t):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)}},{key:"removeImage",value:function(e){this.style.removeImage(e)}},{key:"loadImage",value:function(t,i){e.getImage(this._requestManager.transformRequest(t,e.ResourceType.Image),i)}},{key:"listImages",value:function(){return this.style.listImages()}},{key:"addLayer",value:function(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)}},{key:"moveLayer",value:function(e,t){return this.style.moveLayer(e,t),this._update(!0)}},{key:"removeLayer",value:function(e){return this.style.removeLayer(e),this._update(!0)}},{key:"getLayer",value:function(e){return this.style.getLayer(e)}},{key:"setLayerZoomRange",value:function(e,t,i){return this.style.setLayerZoomRange(e,t,i),this._update(!0)}},{key:"setFilter",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.style.setFilter(e,t,i),this._update(!0)}},{key:"getFilter",value:function(e){return this.style.getFilter(e)}},{key:"setPaintProperty",value:function(e,t,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setPaintProperty(e,t,i,a),this._update(!0)}},{key:"getPaintProperty",value:function(e,t){return this.style.getPaintProperty(e,t)}},{key:"setLayoutProperty",value:function(e,t,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setLayoutProperty(e,t,i,a),this._update(!0)}},{key:"getLayoutProperty",value:function(e,t){return this.style.getLayoutProperty(e,t)}},{key:"setLight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)}},{key:"getLight",value:function(){return this.style.getLight()}},{key:"setFeatureState",value:function(e,t){return this.style.setFeatureState(e,t),this._update()}},{key:"removeFeatureState",value:function(e,t){return this.style.removeFeatureState(e,t),this._update()}},{key:"getFeatureState",value:function(e){return this.style.getFeatureState(e)}},{key:"getContainer",value:function(){return this._container}},{key:"getCanvasContainer",value:function(){return this._canvasContainer}},{key:"getCanvas",value:function(){return this._canvas}},{key:"_containerDimensions",value:function(){var e=0,t=0;return this._container&&(e=this._container.clientWidth||400,t=this._container.clientHeight||300),[e,t]}},{key:"_setupContainer",value:function(){var e=this._container;e.classList.add("maplibregl-map","mapboxgl-map");var t=this._canvasContainer=u.create("div","maplibregl-canvas-container mapboxgl-canvas-container",e);this._interactive&&t.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=u.create("canvas","maplibregl-canvas mapboxgl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var i=this._containerDimensions();this._resizeCanvas(i[0],i[1],this.getPixelRatio());var a=this._controlContainer=u.create("div","maplibregl-control-container mapboxgl-control-container",e),n=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((function(e){n[e]=u.create("div","maplibregl-ctrl-".concat(e," mapboxgl-ctrl-").concat(e),a)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}},{key:"_setupCooperativeGestures",value:function(){var e=this,t=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=u.create("div","maplibregl-cooperative-gesture-screen",t);var i="Control",a="boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";0===navigator.platform.indexOf("Mac")&&(a="boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use \u2318 + scroll to zoom the map",i="Meta"),this._cooperativeGesturesScreen.innerHTML='\n            <div class="maplibregl-desktop-message">'.concat(a,'</div>\n            <div class="maplibregl-mobile-message">').concat("boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map","</div>\n        "),document.addEventListener("keydown",(function(t){t.key===i&&(e._metaPress=!0)})),document.addEventListener("keyup",(function(t){t.key===i&&(e._metaPress=!1)})),this._canvasContainer.addEventListener("wheel",(function(t){e._onCooperativeGesture(t,e._metaPress,1)}),!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}},{key:"_resizeCanvas",value:function(e,t,i){this._canvas.width=i*e,this._canvas.height=i*t,this._canvas.style.width="".concat(e,"px"),this._canvas.style.height="".concat(t,"px")}},{key:"_setupPainter",value:function(){var i=e.extend({},t.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),a=this._canvas.getContext("webgl",i)||this._canvas.getContext("experimental-webgl",i);a?(this.painter=new na(a,this.transform),e.exported$1.testSupport(a)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))}},{key:"_contextLost",value:function(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:t}))}},{key:"_contextRestored",value:function(t){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:t}))}},{key:"_onMapScroll",value:function(e){if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}},{key:"_onCooperativeGesture",value:function(e,t,i){var a=this;return!t&&i<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout((function(){a._cooperativeGesturesScreen.classList.remove("maplibregl-show")}),100)),!1}},{key:"loaded",value:function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}},{key:"_update",value:function(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this}},{key:"_requestRenderFrame",value:function(e){return this._update(),this._renderTaskQueue.add(e)}},{key:"_cancelRenderFrame",value:function(e){this._renderTaskQueue.remove(e)}},{key:"_render",value:function(t){var i,a=this,n=0,r=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(i=r.createQueryEXT(),r.beginQueryEXT(r.TIME_ELAPSED_EXT,i),n=e.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(t),!this._removed){var o=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var s=this.transform.zoom,l=e.exported.now();this.style.zoomHistory.update(s,l);var c=new e.EvaluationParameters(s,{now:l,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),u=c.crossFadingFactor();1===u&&u===this._crossFadingFactor||(o=!0,this._crossFadingFactor=u),this.style.update(c)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,e.PerformanceUtils.mark(e.PerformanceMarkers.load),this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||o)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var h=e.exported.now()-n;r.endQueryEXT(r.TIME_ELAPSED_EXT,i),setTimeout((function(){var t=r.getQueryObjectEXT(i,r.QUERY_RESULT_EXT)/1e6;r.deleteQueryEXT(i),a.fire(new e.Event("gpu-timing-frame",{cpuTime:h,gpuTime:t}))}),50)}if(this.listens("gpu-timing-layer")){var d=this.painter.collectGpuTimers();setTimeout((function(){var t=a.painter.queryGpuTimers(d);a.fire(new e.Event("gpu-timing-layer",{layerTimes:t}))}),50)}var f=this._sourcesDirty||this._styleDirty||this._placementDirty;return f||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new e.Event("idle")),!this._loaded||this._fullyLoaded||f||(this._fullyLoaded=!0,e.PerformanceUtils.mark(e.PerformanceMarkers.fullLoad)),this}}},{key:"redraw",value:function(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}},{key:"remove",value:function(){this._hash&&this._hash.remove();var t,i=d(this._controls);try{for(i.s();!(t=i.n()).done;)t.value.onRemove(this)}catch(n){i.e(n)}finally{i.f()}this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),"undefined"!=typeof window&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));var a=this.painter.context.gl.getExtension("WEBGL_lose_context");a&&a.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),u.remove(this._canvasContainer),u.remove(this._controlContainer),this._cooperativeGestures&&u.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),e.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new e.Event("remove"))}},{key:"triggerRepaint",value:function(){var t=this;this.style&&!this._frame&&(this._frame=e.exported.frame((function(i){e.PerformanceUtils.frame(i),t._frame=null,t._render(i)})))}},{key:"_onWindowOnline",value:function(){this._update()}},{key:"_onWindowResize",value:function(e){this._trackResize&&this.resize({originalEvent:e})._update()}},{key:"showTileBoundaries",get:function(){return!!this._showTileBoundaries},set:function(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())}},{key:"showPadding",get:function(){return!!this._showPadding},set:function(e){this._showPadding!==e&&(this._showPadding=e,this._update())}},{key:"showCollisionBoxes",get:function(){return!!this._showCollisionBoxes},set:function(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())}},{key:"showOverdrawInspector",get:function(){return!!this._showOverdrawInspector},set:function(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())}},{key:"repaint",get:function(){return!!this._repaint},set:function(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())}},{key:"vertices",get:function(){return!!this._vertices},set:function(e){this._vertices=e,this._update()}},{key:"_setCacheLimits",value:function(t,i){e.setCacheLimits(t,i)}},{key:"version",get:function(){return"2.4.0"}}]),y}(rn),NavigationControl:function(){function t(i){var a=this;p(this,t),this.options=e.extend({},hn,i),this._container=u.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(function(e){return e.preventDefault()})),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",(function(e){return a._map.zoomIn({},{originalEvent:e})})),u.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",(function(e){return a._map.zoomOut({},{originalEvent:e})})),u.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",(function(e){a.options.visualizePitch?a._map.resetNorthPitch({},{originalEvent:e}):a._map.resetNorth({},{originalEvent:e})})),this._compassIcon=u.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}return f(t,[{key:"_updateZoomButtons",value:function(){var e=this._map.getZoom(),t=e===this._map.getMaxZoom(),i=e===this._map.getMinZoom();this._zoomInButton.disabled=t,this._zoomOutButton.disabled=i,this._zoomInButton.setAttribute("aria-disabled",t.toString()),this._zoomOutButton.setAttribute("aria-disabled",i.toString())}},{key:"_rotateCompassArrow",value:function(){var e=this.options.visualizePitch?"scale(".concat(1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5),") rotateX(").concat(this._map.transform.pitch,"deg) rotateZ(").concat(this._map.transform.angle*(180/Math.PI),"deg)"):"rotate(".concat(this._map.transform.angle*(180/Math.PI),"deg)");this._compassIcon.style.transform=e}},{key:"onAdd",value:function(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new dn(this._map,this._compass,this.options.visualizePitch)),this._container}},{key:"onRemove",value:function(){u.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}},{key:"_createButton",value:function(e,t){var i=u.create("button",e,this._container);return i.type="button",i.addEventListener("click",t),i}},{key:"_setButtonTitle",value:function(e,t){var i=this._map._getUIString("NavigationControl.".concat(t));e.title=i,e.setAttribute("aria-label",i)}}]),t}(),GeolocateControl:function(t){m(a,t);var i=g(a);function a(t){var r;return p(this,a),(r=i.call(this)).options=e.extend({},yn,t),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],n(r)),r}return f(a,[{key:"onAdd",value:function(e){var t;return this._map=e,this._container=u.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),t=this._setupUI,void 0!==gn?t(gn):void 0!==window.navigator.permissions?window.navigator.permissions.query({name:"geolocation"}).then((function(e){gn="denied"!==e.state,t(gn)})):(gn=!!window.navigator.geolocation,t(gn)),this._container}},{key:"onRemove",value:function(){void 0!==this._geolocationWatchID&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),u.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,xn=0,bn=!1}},{key:"_isOutOfMapMaxBounds",value:function(e){var t=this._map.getMaxBounds(),i=e.coords;return t&&(i.longitude<t.getWest()||i.longitude>t.getEast()||i.latitude<t.getSouth()||i.latitude>t.getNorth())}},{key:"_setErrorState",value:function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error("Unexpected watchState ".concat(this._watchState))}}},{key:"_onSuccess",value:function(t){if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error("Unexpected watchState ".concat(this._watchState))}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",t)),this._finish()}}},{key:"_updateCamera",value:function(t){var i=new e.LngLat(t.coords.longitude,t.coords.latitude),a=t.coords.accuracy,n=this._map.getBearing(),r=e.extend({bearing:n},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(a),r,{geolocateSource:!0})}},{key:"_updateMarker",value:function(t){if(t){var i=new e.LngLat(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}},{key:"_updateCircleRadius",value:function(){var e=this._map._container.clientHeight/2,t=this._map.unproject([0,e]),i=this._map.unproject([1,e]),a=t.distanceTo(i),n=Math.ceil(2*this._accuracy/a);this._circleElement.style.width="".concat(n,"px"),this._circleElement.style.height="".concat(n,"px")}},{key:"_onZoom",value:function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}},{key:"_onError",value:function(t){if(this._map){if(this.options.trackUserLocation)if(1===t.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===t.code&&bn)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",t)),this._finish()}}},{key:"_finish",value:function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}},{key:"_setupUI",value:function(t){var i=this;if(this._container.addEventListener("contextmenu",(function(e){return e.preventDefault()})),this._geolocateButton=u.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),u.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===t){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a)}else{var n=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=u.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new vn(this._dotElement),this._circleElement=u.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new vn({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(function(t){t.geolocateSource||"ACTIVE_LOCK"!==i._watchState||t.originalEvent&&"resize"===t.originalEvent.type||(i._watchState="BACKGROUND",i._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),i._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),i.fire(new e.Event("trackuserlocationend")))}))}},{key:"trigger",value:function(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":xn--,bn=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"));break;default:throw new Error("Unexpected watchState ".concat(this._watchState))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error("Unexpected watchState ".concat(this._watchState))}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var t;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++xn>1?(t={maximumAge:6e5,timeout:0},bn=!0):(t=this.options.positionOptions,bn=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,t)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}},{key:"_clearWatch",value:function(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}}]),a}(e.Evented),AttributionControl:on,LogoControl:sn,ScaleControl:function(){function t(i){p(this,t),this.options=e.extend({},_n,i),e.bindAll(["_onMove","setUnit"],this)}return f(t,[{key:"getDefaultPosition",value:function(){return"bottom-left"}},{key:"_onMove",value:function(){wn(this._map,this._container,this.options)}},{key:"onAdd",value:function(e){return this._map=e,this._container=u.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}},{key:"onRemove",value:function(){u.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},{key:"setUnit",value:function(e){this.options.unit=e,wn(this._map,this._container,this.options)}}]),t}(),FullscreenControl:function(){function t(i){p(this,t),this._fullscreen=!1,i&&i.container&&(i.container instanceof HTMLElement?this._container=i.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}return f(t,[{key:"onAdd",value:function(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=u.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}},{key:"onRemove",value:function(){u.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}},{key:"_checkFullscreenSupport",value:function(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}},{key:"_setupUI",value:function(){var e=this._fullscreenButton=u.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);u.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",e).setAttribute("aria-hidden","true"),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}},{key:"_updateTitle",value:function(){var e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.title=e}},{key:"_getTitle",value:function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}},{key:"_isFullscreen",value:function(){return this._fullscreen}},{key:"_changeIcon",value:function(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}},{key:"_onClickFullscreen",value:function(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}}]),t}(),TerrainControl:function(){function t(i){p(this,t),this.options=i,e.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}return f(t,[{key:"onAdd",value:function(e){return this._map=e,this._container=u.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=u.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),u.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}},{key:"onRemove",value:function(){u.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},{key:"_toggleTerrain",value:function(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}},{key:"_updateTerrainIcon",value:function(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}}]),t}(),Popup:function(t){m(a,t);var i=g(a);function a(t){var r;return p(this,a),(r=i.call(this)).options=e.extend(Object.create(Sn),t),e.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],n(r)),r}return f(a,[{key:"addTo",value:function(t){return this._map&&this.remove(),this._map=t,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new e.Event("open")),this}},{key:"isOpen",value:function(){return!!this._map}},{key:"remove",value:function(){return this._content&&u.remove(this._content),this._container&&(u.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new e.Event("close")),this}},{key:"getLngLat",value:function(){return this._lngLat}},{key:"setLngLat",value:function(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}},{key:"trackPointer",value:function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}},{key:"getElement",value:function(){return this._container}},{key:"setText",value:function(e){return this.setDOMContent(document.createTextNode(e))}},{key:"setHTML",value:function(e){var t,i=document.createDocumentFragment(),a=document.createElement("body");for(a.innerHTML=e;t=a.firstChild;)i.appendChild(t);return this.setDOMContent(i)}},{key:"getMaxWidth",value:function(){return this._container&&this._container.style.maxWidth}},{key:"setMaxWidth",value:function(e){return this.options.maxWidth=e,this._update(),this}},{key:"setDOMContent",value:function(e){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=u.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(e),this._createCloseButton(),this._update(),this._focusFirstElement(),this}},{key:"addClassName",value:function(e){this._container&&this._container.classList.add(e)}},{key:"removeClassName",value:function(e){this._container&&this._container.classList.remove(e)}},{key:"setOffset",value:function(e){return this.options.offset=e,this._update(),this}},{key:"toggleClassName",value:function(e){if(this._container)return this._container.classList.toggle(e)}},{key:"_createCloseButton",value:function(){this.options.closeButton&&(this._closeButton=u.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}},{key:"_onMouseUp",value:function(e){this._update(e.point)}},{key:"_onMouseMove",value:function(e){this._update(e.point)}},{key:"_onDrag",value:function(e){this._update(e.point)}},{key:"_update",value:function(e){var t=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=u.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=u.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((function(e){return t._container.classList.add(e)})),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=fn(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||e)){var i=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat),a=this.options.anchor,n=An(this.options.offset);if(!a){var r,o=this._container.offsetWidth,s=this._container.offsetHeight;r=i.y+n.bottom.y<s?["top"]:i.y>this._map.transform.height-s?["bottom"]:[],i.x<o/2?r.push("left"):i.x>this._map.transform.width-o/2&&r.push("right"),a=0===r.length?"bottom":r.join("-")}var l=i.add(n[a]).round();u.setTransform(this._container,"".concat(pn[a]," translate(").concat(l.x,"px,").concat(l.y,"px)")),mn(this._container,a,"popup")}}},{key:"_focusFirstElement",value:function(){if(this.options.focusAfterOpen&&this._container){var e=this._container.querySelector(Cn);e&&e.focus()}}},{key:"_onClose",value:function(){this.remove()}}]),a}(e.Evented),Marker:vn,Style:ht,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.pointGeometry,MercatorCoordinate:e.MercatorCoordinate,Evented:e.Evented,AJAXError:e.AJAXError,config:e.config,CanvasSource:V,GeoJSONSource:R,ImageSource:B,RasterDEMTileSource:j,RasterTileSource:L,VectorTileSource:z,VideoSource:N,prewarm:function(){ie().acquire($)},clearPrewarmedResources:function(){var e=Q;e&&(e.isPreloaded()&&1===e.numActive()?(e.release($),Q=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return ee.workerCount},set workerCount(e){ee.workerCount=e},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){e.config.MAX_PARALLEL_IMAGE_REQUESTS=t},clearStorage:function(t){e.clearTileCache(t)},workerUrl:"",addProtocol:function(t,i){e.config.REGISTERED_PROTOCOLS[t]=i},removeProtocol:function(t){delete e.config.REGISTERED_PROTOCOLS[t]}};return nn(On,{isSafari:e.isSafari,getPerformanceMetrics:e.PerformanceUtils.getPerformanceMetrics}),On})),i}()},432:function(e,t,i){var a=i(233);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}},433:function(e,t){function i(t){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?e.exports=i=function(e){return typeof e}:e.exports=i=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(t)}e.exports=i},434:function(e,t,i){var a=i(358);e.exports=function(e){if(Array.isArray(e))return a(e)}},435:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},436:function(e,t){e.exports=function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var i=[],a=!0,n=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);a=!0);}catch(l){n=!0,r=l}finally{try{a||null==s.return||s.return()}finally{if(n)throw r}}return i}}},437:function(e,t){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}},438:function(e,t,i){},439:function(e,t,i){},440:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var a=i(286),n={dayOfMonth:"d",fullDate:"DD",fullDateWithWeekday:"DDDD",fullDateTime:"ff",fullDateTime12h:"DD, hh:mm a",fullDateTime24h:"DD, T",fullTime:"t",fullTime12h:"hh:mm a",fullTime24h:"HH:mm",hours12h:"hh",hours24h:"HH",keyboardDate:"D",keyboardDateTime:"D t",keyboardDateTime12h:"D hh:mm a",keyboardDateTime24h:"D T",minutes:"mm",seconds:"ss",month:"LLLL",monthAndDate:"MMMM d",monthAndYear:"LLLL yyyy",monthShort:"MMM",weekday:"cccc",weekdayShort:"ccc",normalDate:"d MMMM",normalDateWithWeekday:"EEE, MMM d",shortDate:"MMM d",year:"yyyy"},r=function(e){var t=this,i=void 0===e?{}:e,r=i.locale,o=i.formats;this.lib="luxon",this.date=function(e){return"undefined"===typeof e?a.DateTime.local():null===e?null:"string"===typeof e?a.DateTime.fromJSDate(new Date(e),{locale:t.locale}):e instanceof a.DateTime?e:a.DateTime.fromJSDate(e,{locale:t.locale})},this.toJsDate=function(e){return e.toJSDate()},this.parseISO=function(e){return a.DateTime.fromISO(e)},this.toISO=function(e){return e.toISO({format:"extended"})},this.parse=function(e,i){return""===e?null:a.DateTime.fromFormat(e,i,{locale:t.locale})},this.is12HourCycleInCurrentLocale=function(){var e,i;return"undefined"===typeof Intl||"undefined"===typeof Intl.DateTimeFormat||Boolean(null===(i=null===(e=new Intl.DateTimeFormat(t.locale,{hour:"numeric"}))||void 0===e?void 0:e.resolvedOptions())||void 0===i?void 0:i.hour12)},this.getFormatHelperText=function(e){return""},this.getCurrentLocaleCode=function(){return t.locale||a.Settings.defaultLocale},this.addSeconds=function(e,t){return e.plus({seconds:t})},this.addMinutes=function(e,t){return e.plus({minutes:t})},this.addHours=function(e,t){return e.plus({hours:t})},this.addDays=function(e,t){return e.plus({days:t})},this.addWeeks=function(e,t){return e.plus({weeks:t})},this.addMonths=function(e,t){return e.plus({months:t})},this.isValid=function(e){return e instanceof a.DateTime?e.isValid:null!==e&&t.date(e).isValid},this.isEqual=function(e,i){return null===e&&null===i||null!==e&&null!==i&&t.date(e).equals(t.date(i))},this.isSameDay=function(e,t){return e.hasSame(t,"day")},this.isSameMonth=function(e,t){return e.hasSame(t,"month")},this.isSameYear=function(e,t){return e.hasSame(t,"year")},this.isSameHour=function(e,t){return e.hasSame(t,"hour")},this.isAfter=function(e,t){return e>t},this.isBefore=function(e,t){return e<t},this.isBeforeDay=function(e,t){return e.diff(t.startOf("day"),"days").toObject().days<0},this.isAfterDay=function(e,t){return e.diff(t.endOf("day"),"days").toObject().days>0},this.isBeforeYear=function(e,t){return e.diff(t.startOf("year"),"years").toObject().years<0},this.isAfterYear=function(e,t){return e.diff(t.endOf("year"),"years").toObject().years>0},this.getDiff=function(e,t,i){return"string"===typeof t&&(t=a.DateTime.fromJSDate(new Date(t))),i?Math.floor(e.diff(t).as(i)):e.diff(t).as("millisecond")},this.startOfDay=function(e){return e.startOf("day")},this.endOfDay=function(e){return e.endOf("day")},this.format=function(e,i){return t.formatByString(e,t.formats[i])},this.formatByString=function(e,i){return e.setLocale(t.locale).toFormat(i)},this.formatNumber=function(e){return e},this.getHours=function(e){return e.get("hour")},this.setHours=function(e,t){return e.set({hour:t})},this.getMinutes=function(e){return e.get("minute")},this.setMinutes=function(e,t){return e.set({minute:t})},this.getSeconds=function(e){return e.get("second")},this.setSeconds=function(e,t){return e.set({second:t})},this.getMonth=function(e){return e.get("month")-1},this.getDaysInMonth=function(e){return e.daysInMonth},this.setMonth=function(e,t){return e.set({month:t+1})},this.getYear=function(e){return e.get("year")},this.setYear=function(e,t){return e.set({year:t})},this.mergeDateAndTime=function(e,t){return e.set({second:t.second,hour:t.hour,minute:t.minute})},this.startOfYear=function(e){return e.startOf("year")},this.endOfYear=function(e){return e.endOf("year")},this.startOfMonth=function(e){return e.startOf("month")},this.endOfMonth=function(e){return e.endOf("month")},this.startOfWeek=function(e){return e.startOf("week")},this.endOfWeek=function(e){return e.endOf("week")},this.getNextMonth=function(e){return e.plus({months:1})},this.getPreviousMonth=function(e){return e.minus({months:1})},this.getMonthArray=function(e){for(var i=[t.date(e).startOf("year")];i.length<12;){var a=i[i.length-1];i.push(t.getNextMonth(a))}return i},this.getWeekdays=function(){return a.Info.weekdaysFormat("narrow",{locale:t.locale})},this.getWeekArray=function(e){var t=e.endOf("month").endOf("week").diff(e.startOf("month").startOf("week"),"days").toObject().days,i=[];return new Array(Math.round(t)).fill(0).map((function(e,t){return t})).map((function(t){return e.startOf("month").startOf("week").plus({days:t})})).forEach((function(e,t){0===t||t%7===0&&t>6?i.push([e]):i[i.length-1].push(e)})),i},this.getYearRange=function(e,i){for(var a=t.date(e).startOf("year"),n=t.date(i).endOf("year"),r=a,o=[];r<n;)o.push(r),r=r.plus({year:1});return o},this.getMeridiemText=function(e){return a.Info.meridiems({locale:t.locale}).find((function(t){return t.toLowerCase()===e.toLowerCase()}))},this.isNull=function(e){return null===e},this.isWithinRange=function(e,i){var a=i[0],n=i[1];return e.equals(a)||e.equals(n)||t.isAfter(e,a)&&t.isBefore(e,n)},this.locale=r||"en-US",this.formats=Object.assign({},n,o)}},441:function(e,t,i){"use strict";var a=i(223);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(i(224)),r=i(31),o=(0,n.default)((0,r.jsx)("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star");t.default=o},538:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return Lt}));var a=i(2),n=i(12),r=i(7),o=i(0),s=i.n(o),l=i(551),c=i(547),u=i(550),h=i(197),d=i(207),f=i(6),p=i(17),m=i(97),g=i(504),v=i(98),y=i(96),x=i(505),b=i(507);function _(e){return Object(x.a)("MuiTableContainer",e)}Object(b.a)("MuiTableContainer",["root"]);var w=i(31),k=["className","component"],S=Object(y.a)("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:function(e,t){return t.root}})({width:"100%",overflowX:"auto"}),C=o.forwardRef((function(e,t){var i=Object(v.a)({props:e,name:"MuiTableContainer"}),a=i.className,n=i.component,r=void 0===n?"div":n,o=Object(p.a)(i,k),s=Object(f.a)({},i,{component:r}),l=function(e){var t=e.classes;return Object(g.a)({root:["root"]},_,t)}(s);return Object(w.jsx)(S,Object(f.a)({ref:t,as:r,className:Object(m.a)(l.root,a),ownerState:s},o))}));var A=o.createContext();function O(e){return Object(x.a)("MuiTable",e)}Object(b.a)("MuiTable",["root","stickyHeader"]);var T=["className","component","padding","size","stickyHeader"],M=Object(y.a)("table",{name:"MuiTable",slot:"Root",overridesResolver:function(e,t){var i=e.ownerState;return[t.root,i.stickyHeader&&t.stickyHeader]}})((function(e){var t=e.theme,i=e.ownerState;return Object(f.a)({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":Object(f.a)({},t.typography.body2,{padding:t.spacing(2),color:(t.vars||t).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},i.stickyHeader&&{borderCollapse:"separate"})})),E=o.forwardRef((function(e,t){var i=Object(v.a)({props:e,name:"MuiTable"}),a=i.className,n=i.component,r=void 0===n?"table":n,s=i.padding,l=void 0===s?"normal":s,c=i.size,u=void 0===c?"medium":c,h=i.stickyHeader,d=void 0!==h&&h,y=Object(p.a)(i,T),x=Object(f.a)({},i,{component:r,padding:l,size:u,stickyHeader:d}),b=function(e){var t=e.classes,i={root:["root",e.stickyHeader&&"stickyHeader"]};return Object(g.a)(i,O,t)}(x),_=o.useMemo((function(){return{padding:l,size:u,stickyHeader:d}}),[l,u,d]);return Object(w.jsx)(A.Provider,{value:_,children:Object(w.jsx)(M,Object(f.a)({as:r,role:"table"===r?null:"table",ref:t,className:Object(m.a)(b.root,a),ownerState:x},y))})}));var I=o.createContext();function P(e){return Object(x.a)("MuiTableHead",e)}Object(b.a)("MuiTableHead",["root"]);var D=["className","component"],z=Object(y.a)("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:function(e,t){return t.root}})({display:"table-header-group"}),L={variant:"head"},j=o.forwardRef((function(e,t){var i=Object(v.a)({props:e,name:"MuiTableHead"}),a=i.className,n=i.component,r=void 0===n?"thead":n,o=Object(p.a)(i,D),s=Object(f.a)({},i,{component:r}),l=function(e){var t=e.classes;return Object(g.a)({root:["root"]},P,t)}(s);return Object(w.jsx)(I.Provider,{value:L,children:Object(w.jsx)(z,Object(f.a)({as:r,className:Object(m.a)(l.root,a),ref:t,role:"thead"===r?null:"rowgroup",ownerState:s},o))})})),R=i(32),F=i(510);function B(e){return Object(x.a)("MuiTableRow",e)}var N=Object(b.a)("MuiTableRow",["root","selected","hover","head","footer"]),V=["className","component","hover","selected"],Y=Object(y.a)("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:function(e,t){var i=e.ownerState;return[t.root,i.head&&t.head,i.footer&&t.footer]}})((function(e){var t,i=e.theme;return t={color:"inherit",display:"table-row",verticalAlign:"middle",outline:0},Object(R.a)(t,"&.".concat(N.hover,":hover"),{backgroundColor:(i.vars||i).palette.action.hover}),Object(R.a)(t,"&.".concat(N.selected),{backgroundColor:i.vars?"rgba(".concat(i.vars.palette.primary.mainChannel," / ").concat(i.vars.palette.action.selectedOpacity,")"):Object(F.a)(i.palette.primary.main,i.palette.action.selectedOpacity),"&:hover":{backgroundColor:i.vars?"rgba(".concat(i.vars.palette.primary.mainChannel," / calc(").concat(i.vars.palette.action.selectedOpacity," + ").concat(i.vars.palette.action.hoverOpacity,"))"):Object(F.a)(i.palette.primary.main,i.palette.action.selectedOpacity+i.palette.action.hoverOpacity)}}),t})),W=o.forwardRef((function(e,t){var i=Object(v.a)({props:e,name:"MuiTableRow"}),a=i.className,n=i.component,r=void 0===n?"tr":n,s=i.hover,l=void 0!==s&&s,c=i.selected,u=void 0!==c&&c,h=Object(p.a)(i,V),d=o.useContext(I),y=Object(f.a)({},i,{component:r,hover:l,selected:u,head:d&&"head"===d.variant,footer:d&&"footer"===d.variant}),x=function(e){var t=e.classes,i={root:["root",e.selected&&"selected",e.hover&&"hover",e.head&&"head",e.footer&&"footer"]};return Object(g.a)(i,B,t)}(y);return Object(w.jsx)(Y,Object(f.a)({as:r,ref:t,className:Object(m.a)(x.root,a),role:"tr"===r?null:"row",ownerState:y},h))})),H=i(99);function U(e){return Object(x.a)("MuiTableCell",e)}var X=Object(b.a)("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),G=["align","className","component","padding","scope","size","sortDirection","variant"],q=Object(y.a)("td",{name:"MuiTableCell",slot:"Root",overridesResolver:function(e,t){var i=e.ownerState;return[t.root,t[i.variant],t["size".concat(Object(H.a)(i.size))],"normal"!==i.padding&&t["padding".concat(Object(H.a)(i.padding))],"inherit"!==i.align&&t["align".concat(Object(H.a)(i.align))],i.stickyHeader&&t.stickyHeader]}})((function(e){var t=e.theme,i=e.ownerState;return Object(f.a)({},t.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:t.vars?"1px solid ".concat(t.vars.palette.TableCell.border):"1px solid\n    ".concat("light"===t.palette.mode?Object(F.d)(Object(F.a)(t.palette.divider,1),.88):Object(F.b)(Object(F.a)(t.palette.divider,1),.68)),textAlign:"left",padding:16},"head"===i.variant&&{color:(t.vars||t).palette.text.primary,lineHeight:t.typography.pxToRem(24),fontWeight:t.typography.fontWeightMedium},"body"===i.variant&&{color:(t.vars||t).palette.text.primary},"footer"===i.variant&&{color:(t.vars||t).palette.text.secondary,lineHeight:t.typography.pxToRem(21),fontSize:t.typography.pxToRem(12)},"small"===i.size&&Object(R.a)({padding:"6px 16px"},"&.".concat(X.paddingCheckbox),{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}),"checkbox"===i.padding&&{width:48,padding:"0 0 0 4px"},"none"===i.padding&&{padding:0},"left"===i.align&&{textAlign:"left"},"center"===i.align&&{textAlign:"center"},"right"===i.align&&{textAlign:"right",flexDirection:"row-reverse"},"justify"===i.align&&{textAlign:"justify"},i.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(t.vars||t).palette.background.default})})),Z=o.forwardRef((function(e,t){var i,a=Object(v.a)({props:e,name:"MuiTableCell"}),n=a.align,r=void 0===n?"inherit":n,s=a.className,l=a.component,c=a.padding,u=a.scope,h=a.size,d=a.sortDirection,y=a.variant,x=Object(p.a)(a,G),b=o.useContext(A),_=o.useContext(I),k=_&&"head"===_.variant;i=l||(k?"th":"td");var S=u;!S&&k&&(S="col");var C=y||_&&_.variant,O=Object(f.a)({},a,{align:r,component:i,padding:c||(b&&b.padding?b.padding:"normal"),size:h||(b&&b.size?b.size:"medium"),sortDirection:d,stickyHeader:"head"===C&&b&&b.stickyHeader,variant:C}),T=function(e){var t=e.classes,i=e.variant,a=e.align,n=e.padding,r=e.size,o={root:["root",i,e.stickyHeader&&"stickyHeader","inherit"!==a&&"align".concat(Object(H.a)(a)),"normal"!==n&&"padding".concat(Object(H.a)(n)),"size".concat(Object(H.a)(r))]};return Object(g.a)(o,U,t)}(O),M=null;return d&&(M="asc"===d?"ascending":"descending"),Object(w.jsx)(q,Object(f.a)({as:i,ref:t,className:Object(m.a)(T.root,s),"aria-sort":M,scope:S,ownerState:O},x))})),K=i(549),J={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:-1,overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"},Q=i(112),$=i(205),ee=i(145),te=i(217),ie=i(100),ae=i(109),ne=Object(ae.a)(Object(w.jsx)("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star"),re=Object(ae.a)(Object(w.jsx)("path",{d:"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"}),"StarBorder");function oe(e){return Object(x.a)("MuiRating",e)}var se=Object(b.a)("MuiRating",["root","sizeSmall","sizeMedium","sizeLarge","readOnly","disabled","focusVisible","visuallyHidden","pristine","label","labelEmptyValueActive","icon","iconEmpty","iconFilled","iconHover","iconFocus","iconActive","decimal"]),le=["value"],ce=["className","defaultValue","disabled","emptyIcon","emptyLabelText","getLabelText","highlightSelectedOnly","icon","IconContainerComponent","max","name","onChange","onChangeActive","onMouseLeave","onMouseMove","precision","readOnly","size","value"];function ue(e,t){if(null==e)return e;var i=Math.round(e/t)*t;return Number(i.toFixed(function(e){var t=e.toString().split(".")[1];return t?t.length:0}(t)))}var he=Object(y.a)("span",{name:"MuiRating",slot:"Root",overridesResolver:function(e,t){var i=e.ownerState;return[Object(R.a)({},"& .".concat(se.visuallyHidden),t.visuallyHidden),t.root,t["size".concat(Object(H.a)(i.size))],i.readOnly&&t.readOnly]}})((function(e){var t,i=e.theme,a=e.ownerState;return Object(f.a)((t={display:"inline-flex",position:"relative",fontSize:i.typography.pxToRem(24),color:"#faaf00",cursor:"pointer",textAlign:"left",WebkitTapHighlightColor:"transparent"},Object(R.a)(t,"&.".concat(se.disabled),{opacity:(i.vars||i).palette.action.disabledOpacity,pointerEvents:"none"}),Object(R.a)(t,"&.".concat(se.focusVisible," .").concat(se.iconActive),{outline:"1px solid #999"}),Object(R.a)(t,"& .".concat(se.visuallyHidden),J),t),"small"===a.size&&{fontSize:i.typography.pxToRem(18)},"large"===a.size&&{fontSize:i.typography.pxToRem(30)},a.readOnly&&{pointerEvents:"none"})})),de=Object(y.a)("label",{name:"MuiRating",slot:"Label",overridesResolver:function(e,t){return t.label}})((function(e){var t=e.ownerState;return Object(f.a)({cursor:"inherit"},t.emptyValueFocused&&{top:0,bottom:0,position:"absolute",outline:"1px solid #999",width:"100%"})})),fe=Object(y.a)("span",{name:"MuiRating",slot:"Icon",overridesResolver:function(e,t){var i=e.ownerState;return[t.icon,i.iconEmpty&&t.iconEmpty,i.iconFilled&&t.iconFilled,i.iconHover&&t.iconHover,i.iconFocus&&t.iconFocus,i.iconActive&&t.iconActive]}})((function(e){var t=e.theme,i=e.ownerState;return Object(f.a)({display:"flex",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest}),pointerEvents:"none"},i.iconActive&&{transform:"scale(1.2)"},i.iconEmpty&&{color:(t.vars||t).palette.action.disabled})})),pe=Object(y.a)("span",{name:"MuiRating",slot:"Decimal",shouldForwardProp:function(e){return Object(y.c)(e)&&"iconActive"!==e},overridesResolver:function(e,t){var i=e.iconActive;return[t.decimal,i&&t.iconActive]}})((function(e){var t=e.iconActive;return Object(f.a)({position:"relative"},t&&{transform:"scale(1.2)"})}));function me(e){var t=Object(p.a)(e,le);return Object(w.jsx)("span",Object(f.a)({},t))}function ge(e){var t=e.classes,i=e.disabled,a=e.emptyIcon,n=e.focus,r=e.getLabelText,s=e.highlightSelectedOnly,l=e.hover,c=e.icon,u=e.IconContainerComponent,h=e.isActive,d=e.itemValue,p=e.labelProps,g=e.name,v=e.onBlur,y=e.onChange,x=e.onClick,b=e.onFocus,_=e.readOnly,k=e.ownerState,S=e.ratingValue,C=s?d===S:d<=S,A=d<=l,O=d<=n,T=d===e.ratingValueRounded,M=Object($.a)(),E=Object(w.jsx)(fe,{as:u,value:d,className:Object(m.a)(t.icon,C?t.iconFilled:t.iconEmpty,A&&t.iconHover,O&&t.iconFocus,h&&t.iconActive),ownerState:Object(f.a)({},k,{iconEmpty:!C,iconFilled:C,iconHover:A,iconFocus:O,iconActive:h}),children:a&&!C?a:c});return _?Object(w.jsx)("span",Object(f.a)({},p,{children:E})):Object(w.jsxs)(o.Fragment,{children:[Object(w.jsxs)(de,Object(f.a)({ownerState:Object(f.a)({},k,{emptyValueFocused:void 0}),htmlFor:M},p,{children:[E,Object(w.jsx)("span",{className:t.visuallyHidden,children:r(d)})]})),Object(w.jsx)("input",{className:t.visuallyHidden,onFocus:b,onBlur:v,onChange:y,onClick:x,disabled:i,value:d,id:M,type:"radio",name:g,checked:T})]})}var ve=Object(w.jsx)(ne,{fontSize:"inherit"}),ye=Object(w.jsx)(re,{fontSize:"inherit"});function xe(e){return"".concat(e," Star").concat(1!==e?"s":"")}var be=o.forwardRef((function(e,t){var i=Object(v.a)({name:"MuiRating",props:e}),a=i.className,n=i.defaultValue,s=void 0===n?null:n,l=i.disabled,c=void 0!==l&&l,u=i.emptyIcon,h=void 0===u?ye:u,d=i.emptyLabelText,y=void 0===d?"Empty":d,x=i.getLabelText,b=void 0===x?xe:x,_=i.highlightSelectedOnly,k=void 0!==_&&_,S=i.icon,C=void 0===S?ve:S,A=i.IconContainerComponent,O=void 0===A?me:A,T=i.max,M=void 0===T?5:T,E=i.name,I=i.onChange,P=i.onChangeActive,D=i.onMouseLeave,z=i.onMouseMove,L=i.precision,j=void 0===L?1:L,R=i.readOnly,F=void 0!==R&&R,B=i.size,N=void 0===B?"medium":B,V=i.value,Y=Object(p.a)(i,ce),W=Object($.a)(E),U=Object(ee.a)({controlled:V,default:s,name:"Rating"}),X=Object(r.a)(U,2),G=X[0],q=X[1],Z=ue(G,j),K=Object(Q.a)(),J=o.useState({hover:-1,focus:-1}),ae=Object(r.a)(J,2),ne=ae[0],re=ne.hover,se=ne.focus,le=ae[1],fe=Z;-1!==re&&(fe=re),-1!==se&&(fe=se);var be=Object(te.a)(),_e=be.isFocusVisibleRef,we=be.onBlur,ke=be.onFocus,Se=be.ref,Ce=o.useState(!1),Ae=Object(r.a)(Ce,2),Oe=Ae[0],Te=Ae[1],Me=o.useRef(),Ee=Object(ie.a)(Se,Me),Ie=Object(ie.a)(Ee,t),Pe=function(e){var t=""===e.target.value?null:parseFloat(e.target.value);-1!==re&&(t=re),q(t),I&&I(e,t)},De=function(e){0===e.clientX&&0===e.clientY||(le({hover:-1,focus:-1}),q(null),I&&parseFloat(e.target.value)===Z&&I(e,null))},ze=function(e){ke(e),!0===_e.current&&Te(!0);var t=parseFloat(e.target.value);le((function(e){return{hover:e.hover,focus:t}}))},Le=function(e){if(-1===re){we(e),!1===_e.current&&Te(!1);le((function(e){return{hover:e.hover,focus:-1}}))}},je=o.useState(!1),Re=Object(r.a)(je,2),Fe=Re[0],Be=Re[1],Ne=Object(f.a)({},i,{defaultValue:s,disabled:c,emptyIcon:h,emptyLabelText:y,emptyValueFocused:Fe,focusVisible:Oe,getLabelText:b,icon:C,IconContainerComponent:O,max:M,precision:j,readOnly:F,size:N}),Ve=function(e){var t=e.classes,i=e.size,a=e.readOnly,n=e.disabled,r=e.emptyValueFocused,o=e.focusVisible,s={root:["root","size".concat(Object(H.a)(i)),n&&"disabled",o&&"focusVisible",a&&"readyOnly"],label:["label","pristine"],labelEmptyValue:[r&&"labelEmptyValueActive"],icon:["icon"],iconEmpty:["iconEmpty"],iconFilled:["iconFilled"],iconHover:["iconHover"],iconFocus:["iconFocus"],iconActive:["iconActive"],decimal:["decimal"],visuallyHidden:["visuallyHidden"]};return Object(g.a)(s,oe,t)}(Ne);return Object(w.jsxs)(he,Object(f.a)({ref:Ie,onMouseMove:function(e){z&&z(e);var t,i=Me.current,a=i.getBoundingClientRect(),n=a.right,r=a.left,o=i.firstChild.getBoundingClientRect().width;t="rtl"===K.direction?(n-e.clientX)/(o*M):(e.clientX-r)/(o*M);var s=ue(M*t+j/2,j);s=function(e,t,i){return e<t?t:e>i?i:e}(s,j,M),le((function(e){return e.hover===s&&e.focus===s?e:{hover:s,focus:s}})),Te(!1),P&&re!==s&&P(e,s)},onMouseLeave:function(e){D&&D(e);le({hover:-1,focus:-1}),P&&-1!==re&&P(e,-1)},className:Object(m.a)(Ve.root,a),ownerState:Ne,role:F?"img":null,"aria-label":F?b(fe):null},Y,{children:[Array.from(new Array(M)).map((function(e,t){var i=t+1,a={classes:Ve,disabled:c,emptyIcon:h,focus:se,getLabelText:b,highlightSelectedOnly:k,hover:re,icon:C,IconContainerComponent:O,name:W,onBlur:Le,onChange:Pe,onClick:De,onFocus:ze,ratingValue:fe,ratingValueRounded:Z,readOnly:F,ownerState:Ne},n=i===Math.ceil(fe)&&(-1!==re||-1!==se);if(j<1){var r=Array.from(new Array(1/j));return Object(w.jsx)(pe,{className:Object(m.a)(Ve.decimal,n&&Ve.iconActive),ownerState:Ne,iconActive:n,children:r.map((function(e,t){var n=ue(i-1+(t+1)*j,j);return Object(w.jsx)(ge,Object(f.a)({},a,{isActive:!1,itemValue:n,labelProps:{style:r.length-1===t?{}:{width:n===fe?"".concat((t+1)*j*100,"%"):"0%",overflow:"hidden",position:"absolute"}}}),n)}))},i)}return Object(w.jsx)(ge,Object(f.a)({},a,{isActive:n,itemValue:i}),i)})),!F&&!c&&Object(w.jsxs)(de,{className:Object(m.a)(Ve.label,Ve.labelEmptyValue),ownerState:Ne,children:[Object(w.jsx)("input",{className:Ve.visuallyHidden,value:"",id:"".concat(W,"-empty"),type:"radio",name:W,checked:null==Z,onFocus:function(){return Be(!0)},onBlur:function(){return Be(!1)},onChange:Pe}),Object(w.jsx)("span",{className:Ve.visuallyHidden,children:y})]})]}))})),_e=i(441),we=i.n(_e),ke=i(369),Se=i(440),Ce=i(238),Ae=i(132),Oe=i(279),Te=i(281),Me=i(216),Ee=i(1),Ie=i(20),Pe=i(421),De=i.n(Pe),ze=i(13),Le=i.n(ze),je=i(423),Re=i.n(je),Fe=i(424),Be=i.n(Fe),Ne=i(425),Ve=i.n(Ne),Ye=i(426),We=i.n(Ye),He=i(427),Ue=i.n(He),Xe=i(428),Ge=i.n(Xe),qe=function(){var e=Object(o.useState)({chart:{type:"line",stacked:!1},dataLabels:{enabled:!1},colors:["#FF1654","#247BA0"],series:[{name:"This month",data:[0,0,0,0]},{name:"Last month",data:[0,0,0,0]}],stroke:{width:[2,2]},plotOptions:{bar:{columnWidth:"10%"}},xaxis:{categories:["week1","week2","week3","week4"]},yaxis:[{axisTicks:{show:!1},axisBorder:{show:!1,color:"#FF1654"},labels:{style:{colors:"#FF1654"}}},{opposite:!1,axisTicks:{show:!0},axisBorder:{show:!0,color:"#247BA0"},labels:{style:{colors:"#247BA0"}},title:{style:{color:"#247BA0"}}}],tooltip:{shared:!1,intersect:!0,x:{show:!1},y:{show:!1}},legend:{horizontalAlign:"left",offsetX:10}}),t=Object(r.a)(e,2),i=t[0];t[1];return s.a.createElement("div",null,s.a.createElement(Ge.a,{options:i,series:i.series,type:i.chart.type,height:180,width:400}))},Ze=(i(430),function(e){var t=e.progress,i=Object(o.useState)(0),a=Object(r.a)(i,2),n=a[0],l=a[1];return s.a.useEffect((function(){l(t)}),[t]),s.a.createElement("div",{className:"ProgressBar"},s.a.createElement("div",{className:"progress-bar"},s.a.createElement("div",{className:"progress-bar-fill",style:{width:"".concat(n,"%")}})),s.a.createElement("p",{className:"p_1"},t,"%"))}),Ke=o.createContext(null);var Je=i(35),Qe=i(193),$e=i(194);function et(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function tt(e,t){var i=t.viewState||t,a=!1;if("longitude"in i&&"latitude"in i){var n=e.center;e.center=new n.constructor(i.longitude,i.latitude),a=a||n!==e.center}if("zoom"in i){var r=e.zoom;e.zoom=i.zoom,a=a||r!==e.zoom}if("bearing"in i){var o=e.bearing;e.bearing=i.bearing,a=a||o!==e.bearing}if("pitch"in i){var s=e.pitch;e.pitch=i.pitch,a=a||s!==e.pitch}return i.padding&&!e.isPaddingEqual(i.padding)&&(a=!0,e.padding=i.padding),a}var it=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function at(e){if(!e)return null;if("string"===typeof e)return e;if("toJS"in e&&(e=e.toJS()),!e.layers)return e;var t,i={},n=Object(Je.a)(e.layers);try{for(n.s();!(t=n.n()).done;){var r=t.value;i[r.id]=r}}catch(s){n.e(s)}finally{n.f()}var o=e.layers.map((function(e){var t=i[e.ref],n=null;if("interactive"in e&&delete(n=Object(a.a)({},e)).interactive,t){delete(n=n||Object(a.a)({},e)).ref;var r,o=Object(Je.a)(it);try{for(o.s();!(r=o.n()).done;){var l=r.value;l in t&&(n[l]=t[l])}}catch(s){o.e(s)}finally{o.f()}}return n||e}));return Object(a.a)(Object(a.a)({},e),{},{layers:o})}function nt(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(!nt(e[i],t[i]))return!1;return!0}if(Array.isArray(t))return!1;if("object"===typeof e&&"object"===typeof t){var a=Object.keys(e),n=Object.keys(t);if(a.length!==n.length)return!1;for(var r=0,o=a;r<o.length;r++){var s=o[r];if(!t.hasOwnProperty(s))return!1;if(!nt(e[s],t[s]))return!1}return!0}return!1}var rt={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},ot={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},st={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},lt=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],ct=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"],ut=function(){function e(t,i,a){var n=this;Object(Qe.a)(this,e),this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=function(e){var t=n.props[st[e.type]];t&&t(e)},this._onPointerEvent=function(e){"mousemove"!==e.type&&"mouseout"!==e.type||n._updateHover(e);var t=n.props[rt[e.type]];if(t){if(n.props.interactiveLayerIds&&"mouseover"!==e.type&&"mouseout"!==e.type){var i=n._hoveredFeatures||n._map.queryRenderedFeatures(e.point,{layers:n.props.interactiveLayerIds});e.features=i}t(e),delete e.features}},this._onCameraEvent=function(e){if(!n._internalUpdate){var t=n.props[ot[e.type]];t&&t(e)}e.type in n._deferredEvents&&(n._deferredEvents[e.type]=!1)},this._MapClass=t,this.props=i,this._initialize(a)}return Object($e.a)(e,[{key:"map",get:function(){return this._map}},{key:"transform",get:function(){return this._renderTransform}},{key:"setProps",value:function(e){var t=this.props;this.props=e;var i=this._updateSettings(e,t);i&&this._createShadowTransform(this._map);var a=this._updateSize(e),n=this._updateViewState(e,!0);this._updateStyle(e,t),this._updateStyleComponents(e,t),this._updateHandlers(e,t),(i||a||n&&!this._map.isMoving())&&this.redraw()}},{key:"_initialize",value:function(e){var t=this,i=this.props,n=Object(a.a)(Object(a.a)(Object(a.a)({},i),i.initialViewState),{},{accessToken:i.mapboxAccessToken||ht()||null,container:e,style:at(i.mapStyle)}),r=n.initialViewState||n.viewState||n;if(Object.assign(n,{center:[r.longitude||0,r.latitude||0],zoom:r.zoom||0,pitch:r.pitch||0,bearing:r.bearing||0}),i.gl){var o=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=function(){return HTMLCanvasElement.prototype.getContext=o,i.gl}}var s=new this._MapClass(n);r.padding&&s.setPadding(r.padding),i.cursor&&(s.getCanvas().style.cursor=i.cursor),this._createShadowTransform(s);var l=s._render;s._render=function(e){t._inRender=!0,l.call(s,e),t._inRender=!1};var c=s._renderTaskQueue.run;s._renderTaskQueue.run=function(e){c.call(s._renderTaskQueue,e),t._onBeforeRepaint()},s.on("render",(function(){return t._onAfterRepaint()}));var u=s.fire;for(var h in s.fire=this._fireEvent.bind(this,u),s.on("resize",(function(){t._renderTransform.resize(s.transform.width,s.transform.height)})),s.on("styledata",(function(){return t._updateStyleComponents(t.props,{})})),s.on("sourcedata",(function(){return t._updateStyleComponents(t.props,{})})),rt)s.on(h,this._onPointerEvent);for(var d in ot)s.on(d,this._onCameraEvent);for(var f in st)s.on(f,this._onEvent);this._map=s}},{key:"recycle",value:function(){var t=this.map.getContainer().querySelector("[mapboxgl-children]");null===t||void 0===t||t.remove(),e.savedMaps.push(this)}},{key:"destroy",value:function(){this._map.remove()}},{key:"redraw",value:function(){var e=this._map;!this._inRender&&e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}},{key:"_createShadowTransform",value:function(e){var t=function(e){var t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}(e.transform);e.painter.transform=t,this._renderTransform=t}},{key:"_updateSize",value:function(e){var t=e.viewState;if(t){var i=this._map;if(t.width!==i.transform.width||t.height!==i.transform.height)return i.resize(),!0}return!1}},{key:"_updateViewState",value:function(e,t){if(this._internalUpdate)return!1;var i=this._map,n=this._renderTransform,r=n.zoom,o=n.pitch,s=n.bearing,l=i.isMoving();l&&(n.cameraElevationReference="sea");var c=tt(n,Object(a.a)(Object(a.a)({},et(i.transform)),e));if(l&&(n.cameraElevationReference="ground"),c&&t){var u=this._deferredEvents;u.move=!0,u.zoom||(u.zoom=r!==n.zoom),u.rotate||(u.rotate=s!==n.bearing),u.pitch||(u.pitch=o!==n.pitch)}return l||tt(i.transform,e),c}},{key:"_updateSettings",value:function(e,t){var i,a=this._map,n=!1,r=Object(Je.a)(lt);try{for(r.s();!(i=r.n()).done;){var o=i.value;o in e&&!nt(e[o],t[o])&&(n=!0,a["set".concat(o[0].toUpperCase()).concat(o.slice(1))](e[o]))}}catch(s){r.e(s)}finally{r.f()}return n}},{key:"_updateStyle",value:function(e,t){if(e.cursor!==t.cursor&&(this._map.getCanvas().style.cursor=e.cursor),e.mapStyle!==t.mapStyle){var i={diff:e.styleDiffing};return"localIdeographFontFamily"in e&&(i.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(at(e.mapStyle),i),!0}return!1}},{key:"_updateStyleComponents",value:function(e,t){var i=this._map,a=!1;return i.style.loaded()&&("light"in e&&!nt(e.light,t.light)&&(a=!0,i.setLight(e.light)),"fog"in e&&!nt(e.fog,t.fog)&&(a=!0,i.setFog(e.fog)),"terrain"in e&&!nt(e.terrain,t.terrain)&&(e.terrain&&!i.getSource(e.terrain.source)||(a=!0,i.setTerrain(e.terrain)))),a}},{key:"_updateHandlers",value:function(e,t){var i,a=this._map,n=!1,r=Object(Je.a)(ct);try{for(r.s();!(i=r.n()).done;){var o=i.value,s=e[o];nt(s,t[o])||(n=!0,s?a[o].enable(s):a[o].disable())}}catch(l){r.e(l)}finally{r.f()}return n}},{key:"_updateHover",value:function(e){var t,i=this.props;if(i.interactiveLayerIds&&(i.onMouseMove||i.onMouseEnter||i.onMouseLeave)){var a,n=e.type,r=(null===(t=this._hoveredFeatures)||void 0===t?void 0:t.length)>0;if("mousemove"===n)try{a=this._map.queryRenderedFeatures(e.point,{layers:i.interactiveLayerIds})}catch(s){a=[]}else a=[];var o=a.length>0;!o&&r&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=a,o&&!r&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=n}else this._hoveredFeatures=null}},{key:"_fireEvent",value:function(e,t,i){var a=this._map,n=a.transform,r="string"===typeof t?t:t.type;return"move"===r&&this._updateViewState(this.props,!1),r in ot&&("object"===typeof t&&(t.viewState=et(n)),this._map.isMoving())?(a.transform=this._renderTransform,e.call(a,t,i),a.transform=n,a):(e.call(a,t,i),a)}},{key:"_onBeforeRepaint",value:function(){var e=this,t=this._map;for(var i in this._internalUpdate=!0,this._deferredEvents)this._deferredEvents[i]&&t.fire(i);this._internalUpdate=!1;var a=this._map.transform;this._map.transform=this._renderTransform,this._onAfterRepaint=function(){e._map.transform=a}}}],[{key:"reuse",value:function(t,i){var n=e.savedMaps.pop();if(!n)return null;var r=n.map,o=r.getContainer();for(i.className=o.className;o.childNodes.length>0;)i.appendChild(o.childNodes[0]);r._container=i,n.setProps(Object(a.a)(Object(a.a)({},t),{},{styleDiffing:!1})),r.resize();var s=t.initialViewState;return s&&(s.bounds?r.fitBounds(s.bounds,Object(a.a)(Object(a.a)({},s.fitBoundsOptions),{},{duration:0})):n._updateViewState(s,!1)),r.isStyleLoaded()?r.fire("load"):r.once("styledata",(function(){return r.fire("load")})),n}}]),e}();function ht(){var e=null;if("undefined"!==typeof location){var t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).MapboxAccessToken}catch(i){}try{e=e||Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_MAPBOX_ACCESS_TOKEN}catch(a){}return e}ut.savedMaps=[];var dt=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function ft(e,t){if(!e)return null;var i,a=e.map,n={getMap:function(){return a},getCenter:function(){return e.transform.center},getZoom:function(){return e.transform.zoom},getBearing:function(){return e.transform.bearing},getPitch:function(){return e.transform.pitch},getPadding:function(){return e.transform.padding},getBounds:function(){return e.transform.getBounds()},project:function(i){return e.transform.locationPoint(t.LngLat.convert(i))},unproject:function(i){return e.transform.pointLocation(t.Point.convert(i))},queryTerrainElevation:function(t,i){var n=a.transform;a.transform=e.transform;var r=a.queryTerrainElevation(t,i);return a.transform=n,r}},r=Object(Je.a)(function(e){var t=new Set,i=e;for(;i;){var a,n=Object(Je.a)(Object.getOwnPropertyNames(i));try{for(n.s();!(a=n.n()).done;){var r=a.value;"_"!==r[0]&&"function"===typeof e[r]&&"fire"!==r&&"setEventedParent"!==r&&t.add(r)}}catch(o){n.e(o)}finally{n.f()}i=Object.getPrototypeOf(i)}return Array.from(t)}(a));try{for(r.s();!(i=r.n()).done;){var o=i.value;o in n||dt.includes(o)||(n[o]=a[o].bind(a))}}catch(s){r.e(s)}finally{r.f()}return n}var pt="undefined"!==typeof document?o.useLayoutEffect:o.useEffect,mt=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];var gt=o.createContext(null),vt={minZoom:0,maxZoom:22,minPitch:0,maxPitch:60,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,mapStyle:{version:8,sources:{},layers:[]},styleDiffing:!0,projection:"mercator",renderWorldCopies:!0,onError:function(e){return console.error(e.error)},RTLTextPlugin:"https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"},yt=Object(o.forwardRef)((function(e,t){var n=Object(o.useContext)(Ke),s=Object(o.useState)(null),l=Object(r.a)(s,2),c=l[0],u=l[1],h=Object(o.useRef)(),d=Object(o.useRef)({mapLib:null,map:null}).current;Object(o.useEffect)((function(){var t,a=e.mapLib,r=!0;return Promise.resolve(a||i.e(24).then(i.t.bind(null,537,7))).then((function(i){if(r){if(i.Map||(i=i.default),!i||!i.Map)throw new Error("Invalid mapLib");if(!i.supported(e))throw new Error("Map is not supported by this browser");!function(e,t){var i,a=Object(Je.a)(mt);try{for(a.s();!(i=a.n()).done;){var n=i.value;n in t&&(e[n]=t[n])}}catch(r){a.e(r)}finally{a.f()}t.RTLTextPlugin&&e.getRTLTextPluginStatus&&"unavailable"===e.getRTLTextPluginStatus()&&e.setRTLTextPlugin(t.RTLTextPlugin,(function(e){e&&console.error(e)}),!1)}(i,e),e.reuseMaps&&(t=ut.reuse(e,h.current)),t||(t=new ut(i.Map,e,h.current)),d.map=ft(t,i),d.mapLib=i,u(t),null===n||void 0===n||n.onMapMount(d.map,e.id)}})).catch((function(t){e.onError({type:"error",target:null,originalEvent:null,error:t})})),function(){r=!1,t&&(null===n||void 0===n||n.onMapUnmount(e.id),e.reuseMaps?t.recycle():t.destroy())}}),[]),pt((function(){c&&c.setProps(e)})),Object(o.useImperativeHandle)(t,(function(){return d.map}),[c]);var f=Object(o.useMemo)((function(){return Object(a.a)({position:"relative",width:"100%",height:"100%"},e.style)}),[e.style]);return o.createElement("div",{id:e.id,ref:h,style:f},c&&o.createElement(gt.Provider,{value:d},o.createElement("div",{"mapboxgl-children":""},e.children)))}));yt.displayName="Map",yt.defaultProps=vt;var xt=yt,bt=i(18),_t=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function wt(e,t){if(e&&t){var i=e.style;for(var a in t){var n=t[a];Number.isFinite(n)&&!_t.test(a)?i[a]="".concat(n,"px"):i[a]=n}}}function kt(e){var t=Object(o.useContext)(gt),i=t.map,n=t.mapLib,r=Object(o.useRef)({props:e});r.current.props=e;var s=Object(o.useMemo)((function(){var t=!1;o.Children.forEach(e.children,(function(e){e&&(t=!0)}));var i=Object(a.a)(Object(a.a)({},e),{},{element:t?document.createElement("div"):null}),l=new n.Marker(i).setLngLat([e.longitude,e.latitude]);return l.getElement().addEventListener("click",(function(e){var t,i;null===(i=(t=r.current.props).onClick)||void 0===i||i.call(t,{type:"click",target:l,originalEvent:e})})),l.on("dragstart",(function(e){var t,i,a=e;a.lngLat=s.getLngLat(),null===(i=(t=r.current.props).onDragStart)||void 0===i||i.call(t,a)})),l.on("drag",(function(e){var t,i,a=e;a.lngLat=s.getLngLat(),null===(i=(t=r.current.props).onDrag)||void 0===i||i.call(t,a)})),l.on("dragend",(function(e){var t,i,a=e;a.lngLat=s.getLngLat(),null===(i=(t=r.current.props).onDragEnd)||void 0===i||i.call(t,a)})),l}),[]);return Object(o.useEffect)((function(){return s.addTo(i.getMap()),function(){s.remove()}}),[]),Object(o.useEffect)((function(){wt(s.getElement(),e.style)}),[e.style]),s.getLngLat().lng===e.longitude&&s.getLngLat().lat===e.latitude||s.setLngLat([e.longitude,e.latitude]),e.offset&&!function(e,t){var i=Array.isArray(e)?e[0]:e?e.x:0,a=Array.isArray(e)?e[1]:e?e.y:0,n=Array.isArray(t)?t[0]:t?t.x:0,r=Array.isArray(t)?t[1]:t?t.y:0;return i===n&&a===r}(s.getOffset(),e.offset)&&s.setOffset(e.offset),s.isDraggable()!==e.draggable&&s.setDraggable(e.draggable),s.getRotation()!==e.rotation&&s.setRotation(e.rotation),s.getRotationAlignment()!==e.rotationAlignment&&s.setRotationAlignment(e.rotationAlignment),s.getPitchAlignment()!==e.pitchAlignment&&s.setPitchAlignment(e.pitchAlignment),s.getPopup()!==e.popup&&s.setPopup(e.popup),Object(bt.createPortal)(e.children,s.getElement())}kt.defaultProps={draggable:!1,popup:null,rotation:0,rotationAlignment:"auto",pitchAlignment:"auto"};var St=o.memo(kt);function Ct(e){return new Set(e?e.trim().split(/\s+/):[])}o.memo((function(e){var t=Object(o.useContext)(gt),i=t.map,n=t.mapLib,r=Object(o.useMemo)((function(){return document.createElement("div")}),[]),s=Object(o.useRef)({props:e});s.current.props=e;var l=Object(o.useMemo)((function(){var t=Object(a.a)({},e),i=new n.Popup(t).setLngLat([e.longitude,e.latitude]);return i.once("open",(function(e){var t,i;null===(i=(t=s.current.props).onOpen)||void 0===i||i.call(t,e)})),i}),[]);if(Object(o.useEffect)((function(){var e=function(e){var t,i;null===(i=(t=s.current.props).onClose)||void 0===i||i.call(t,e)};return l.on("close",e),l.setDOMContent(r).addTo(i.getMap()),function(){l.off("close",e),l.isOpen()&&l.remove()}}),[]),Object(o.useEffect)((function(){wt(l.getElement(),e.style)}),[e.style]),l.isOpen()&&(l.getLngLat().lng===e.longitude&&l.getLngLat().lat===e.latitude||l.setLngLat([e.longitude,e.latitude]),e.offset&&!nt(l.options.offset,e.offset)&&l.setOffset(e.offset),l.options.anchor===e.anchor&&l.options.maxWidth===e.maxWidth||(l.options.anchor=e.anchor,l.setMaxWidth(e.maxWidth)),l.options.className!==e.className)){var c,u=Ct(l.options.className),h=Ct(e.className),d=Object(Je.a)(u);try{for(d.s();!(c=d.n()).done;){var f=c.value;h.has(f)||l.removeClassName(f)}}catch(v){d.e(v)}finally{d.f()}var p,m=Object(Je.a)(h);try{for(m.s();!(p=m.n()).done;){var g=p.value;u.has(g)||l.addClassName(g)}}catch(v){m.e(v)}finally{m.f()}l.options.className=e.className}return Object(bt.createPortal)(e.children,r)}));var At=function(e,t,i,a){var n=Object(o.useContext)(gt),r=Object(o.useMemo)((function(){return e(n)}),[]);return Object(o.useEffect)((function(){var e=a||i||t,o="function"===typeof t&&"function"===typeof i?t:null,s="function"===typeof i?i:"function"===typeof t?t:null,l=n.map;return l.hasControl(r)||(l.addControl(r,null===e||void 0===e?void 0:e.position),o&&o(n)),function(){s&&s(n),l.hasControl(r)&&l.removeControl(r)}}),[]),r};o.memo((function(e){var t=At((function(t){return new t.mapLib.AttributionControl(e)}),{position:e.position});return Object(o.useEffect)((function(){wt(t._container,e.style)}),[e.style]),null}));o.memo((function(e){var t=At((function(t){return new t.mapLib.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)})}),{position:e.position});return Object(o.useEffect)((function(){wt(t._controlContainer,e.style)}),[e.style]),null}));var Ot=Object(o.forwardRef)((function(e,t){var i=Object(o.useRef)({props:e}),a=At((function(t){var a=new t.mapLib.GeolocateControl(e),n=a._setupUI;return a._setupUI=function(e){a._container.hasChildNodes()||n(e)},a.on("geolocate",(function(e){var t,a;null===(a=(t=i.current.props).onGeolocate)||void 0===a||a.call(t,e)})),a.on("error",(function(e){var t,a;null===(a=(t=i.current.props).onError)||void 0===a||a.call(t,e)})),a.on("outofmaxbounds",(function(e){var t,a;null===(a=(t=i.current.props).onOutOfMaxBounds)||void 0===a||a.call(t,e)})),a.on("trackuserlocationstart",(function(e){var t,a;null===(a=(t=i.current.props).onTrackUserLocationStart)||void 0===a||a.call(t,e)})),a.on("trackuserlocationend",(function(e){var t,a;null===(a=(t=i.current.props).onTrackUserLocationEnd)||void 0===a||a.call(t,e)})),a}),{position:e.position});return i.current.props=e,Object(o.useImperativeHandle)(t,(function(){return{trigger:function(){return a.trigger()}}}),[]),Object(o.useEffect)((function(){wt(a._container,e.style)}),[e.style]),null}));Ot.displayName="GeolocateControl";o.memo(Ot);var Tt=o.memo((function(e){var t=At((function(t){return new t.mapLib.NavigationControl(e)}),{position:e.position});return Object(o.useEffect)((function(){wt(t._container,e.style)}),[e.style]),null}));function Mt(e){var t=At((function(t){return new t.mapLib.ScaleControl(e)}),{position:e.position});return t.options.unit===e.unit&&t.options.maxWidth===e.maxWidth||(t.options.maxWidth=e.maxWidth,t.setUnit(e.unit)),Object(o.useEffect)((function(){wt(t._container,e.style)}),[e.style]),null}Mt.defaultProps={unit:"metric",maxWidth:100};o.memo(Mt);var Et=i(431),It=i.n(Et);i(438);var Pt=function(){return o.createElement("div",null,o.createElement(xt,{mapLib:It.a,initialViewState:{longitude:100.523186,latitude:13.736717,zoom:6},style:{width:"45vw",height:"40vh"},mapStyle:"https://api.maptiler.com/maps/streets/style.json?key=qIIg1bS0SsYVMmXn5Bn5"},o.createElement(Tt,{position:"top-left"}),o.createElement(St,{longitude:100.523186,latitude:13.736717,color:"red"})))},Dt=i(141);i(439);function zt(){zt=function(){return e};var e={},t=Object.prototype,i=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},n=a.iterator||"@@iterator",r=a.asyncIterator||"@@asyncIterator",o=a.toStringTag||"@@toStringTag";function s(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(A){s=function(e,t,i){return e[t]=i}}function l(e,t,i,a){var n=t&&t.prototype instanceof h?t:h,r=Object.create(n.prototype),o=new k(a||[]);return r._invoke=function(e,t,i){var a="suspendedStart";return function(n,r){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===n)throw r;return C()}for(i.method=n,i.arg=r;;){var o=i.delegate;if(o){var s=b(o,i);if(s){if(s===u)continue;return s}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var l=c(e,t,i);if("normal"===l.type){if(a=i.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(a="completed",i.method="throw",i.arg=l.arg)}}}(e,i,o),r}function c(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(A){return{type:"throw",arg:A}}}e.wrap=l;var u={};function h(){}function d(){}function f(){}var p={};s(p,n,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(S([])));g&&g!==t&&i.call(g,n)&&(p=g);var v=f.prototype=h.prototype=Object.create(p);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){var a;this._invoke=function(n,r){function o(){return new t((function(a,o){!function a(n,r,o,s){var l=c(e[n],e,r);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==typeof h&&i.call(h,"__await")?t.resolve(h.__await).then((function(e){a("next",e,o,s)}),(function(e){a("throw",e,o,s)})):t.resolve(h).then((function(e){u.value=e,o(u)}),(function(e){return a("throw",e,o,s)}))}s(l.arg)}(n,r,a,o)}))}return a=a?a.then(o,o):o()}}function b(e,t){var i=e.iterator[t.method];if(void 0===i){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var a=c(i,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,u;var n=a.arg;return n?n.done?(t[e.resultName]=n.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):n:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function S(e){if(e){var t=e[n];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,r=function t(){for(;++a<e.length;)if(i.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:C}}function C(){return{value:void 0,done:!0}}return d.prototype=f,s(v,"constructor",f),s(f,"constructor",d),d.displayName=s(f,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,o,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},y(x.prototype),s(x.prototype,r,(function(){return this})),e.AsyncIterator=x,e.async=function(t,i,a,n,r){void 0===r&&(r=Promise);var o=new x(l(t,i,a,n),r);return e.isGeneratorFunction(i)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},y(v),s(v,o,"Generator"),s(v,n,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var i in e)t.push(i);return t.reverse(),function i(){for(;t.length;){var a=t.pop();if(a in e)return i.value=a,i.done=!1,i}return i.done=!0,i}},e.values=S,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(i,a){return o.type="throw",o.arg=e,t.next=i,a&&(t.method="next",t.arg=void 0),!!a}for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n],o=r.completion;if("root"===r.tryLoc)return a("end");if(r.tryLoc<=this.prev){var s=i.call(r,"catchLoc"),l=i.call(r,"finallyLoc");if(s&&l){if(this.prev<r.catchLoc)return a(r.catchLoc,!0);if(this.prev<r.finallyLoc)return a(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return a(r.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return a(r.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var n=this.tryEntries[a];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var r=n;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,u):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),w(i),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var a=i.completion;if("throw"===a.type){var n=a.arg;w(i)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:S(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=void 0),u}},e}function Lt(){var e,t=Object(Ee.f)(),i=Object(Ie.b)(),s=Object(Ee.e)(),f=Object(Ie.c)((function(e){return e.auth})),p=null===s||void 0===s||null===(e=s.state)||void 0===e?void 0:e.languages,m=null===f||void 0===f?void 0:f.token,g={Translator_name:null===f||void 0===f?void 0:f.name},v=o.useState([]),y=Object(r.a)(v,2),x=y[0],b=y[1],_=o.useState(0),w=Object(r.a)(_,2),k=w[0],S=w[1],A=o.useState(0),O=Object(r.a)(A,2),T=O[0],M=O[1],I=o.useState(0),P=Object(r.a)(I,2),D=P[0],z=P[1],L=o.useState(),R=Object(r.a)(L,2),F=(R[0],R[1]),B=o.useState(null),N=Object(r.a)(B,2),V=(N[0],N[1]),Y=o.useState(!1),H=Object(r.a)(Y,2),U=H[0],X=H[1],G=o.useState(!1),q=Object(r.a)(G,2),J=q[0],Q=q[1],$="https://54.244.204.59/api",ee=new Date,te=function(){m?console.log("value :",m):t("/Login")},ie=function(){Q(!1)};o.useEffect((function(){te(),re(g)}),[]);var ae=function(e){var t=null===e||void 0===e?void 0:e.length;console.log("i:",e),S(t);var i=null===e||void 0===e?void 0:e.filter((function(e){return null===e||void 0===e?void 0:e.Customer_name}));M(null===i||void 0===i?void 0:i.length);var a=null===e||void 0===e?void 0:e.map((function(e,t){try{var i=De()(null===e||void 0===e?void 0:e.Date).format("MM/DD/YYYY"),a=De()(null===e||void 0===e?void 0:e.Deadline).format("MM/DD/YYYY"),n=De()(ee).format("MM/DD/YYYY")>a;return z(1),{index:t,orderID:t+1,orderType:null===e||void 0===e?void 0:e.Order_type,orderName:null===e||void 0===e?void 0:e.Order_type,translator:null===e||void 0===e?void 0:e.Translator_name,orderPrice:null===e||void 0===e?void 0:e.Price,orderedDate:i,status:null===e||void 0===e?void 0:e.Status,Customer:null===e||void 0===e?void 0:e.Customer_name,orderDeadline:n}}catch(r){return console.error(r),null}}));b(a)},ne=function(e){var t=null===e||void 0===e?void 0:e.filter((function(e){return"customer"===e.type}));console.log("All",t.length),F(t.length)},re=function(){var e=Object(n.a)(zt().mark((function e(t){var i,a;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Le.a.get("".concat($,"/getOrder"),{params:{Translator_name:t.Translator_name}});case 3:return i=e.sent,e.next=6,Le.a.get("".concat($,"/getUsers"),{});case 6:a=e.sent,ae(null===i||void 0===i?void 0:i.data),ne(null===a||void 0===a?void 0:a.data),e.next=26;break;case 11:if(e.prev=11,e.t0=e.catch(0),!e.t0.response||404!==e.t0.response.status){e.next=17;break}throw new Error("Translator not found");case 17:if(!e.t0.response||500!==e.t0.response.status){e.next=21;break}throw new Error("Internal server error");case 21:if(!e.t0.response||400!==e.t0.response.status){e.next=25;break}throw new Error("Bad request");case 25:throw new Error("Something went wrong");case 26:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return console.log("data1",x),o.createElement("div",{className:"App-body3"},o.createElement("header",{className:"App-headerDashboard"},"English"===p?o.createElement(Me.a,{navigate:t,dispatch:i,languages:"English"}):"Thai"===p?o.createElement(Me.a,{navigate:t,dispatch:i,languages:"Thai"}):"German"===p?o.createElement(Me.a,{navigate:t,dispatch:i,languages:"German"}):o.createElement(Me.a,{navigate:t,dispatch:i,languages:"English"})),o.createElement(l.a,{sx:{display:"flex",width:"100% "}},o.createElement(Te.a,{languages:p,value:m}),o.createElement(l.a,{component:"main"},o.createElement(c.a,{hideBackdrop:!0,open:J,onClose:ie,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description"},o.createElement(l.a,{sx:{position:"absolute",top:"50%",left:"45%",transform:"translate(-50%, -70%)",width:700,bgcolor:"background.paper",boxShadow:24,p:4,borderRadius:5,border:"1px solid #E5E5E5",textAlign:"center",paddingRight:0,paddingLeft:"25px"}},o.createElement(Pt,null),o.createElement("div",{style:{marginTop:10,textAlign:"left",float:"left"}}),o.createElement("div",{style:{marginTop:10,textAlign:"right",marginRight:"20px"}},o.createElement("button",{style:{height:40,borderRadius:5,color:"#034D82",fontWeight:700,filter:"drop-shadow(0px 4px 10px rgba(0, 0, 0, 0.1))",background:"#FFFFFF",border:"1px solid #034D82"},onClick:function(){return ie()}},"Close")))),o.createElement("div",{className:"mainDashboard"},o.createElement("div",{className:"HeaderDashboard"},o.createElement("p",{className:"HDashboard"},"Dashboard"),o.createElement("div",{className:"gbutton"})),o.createElement("div",{className:"group1"},o.createElement("div",{className:"BoxAllg1"},o.createElement("div",{className:"box_num_1"},o.createElement("p",{id:"head3"},"All customers"),o.createElement("br",null),o.createElement("div",{className:"BoxDB"},o.createElement("img",{src:Re.a,alt:"All_online",id:"img_icons"}),o.createElement("p",{id:"int_count"},k)),o.createElement("br",null)),o.createElement("div",{className:"box_num"},o.createElement("p",{id:"head3"},"Old customers"),o.createElement("br",null),o.createElement("div",{className:"BoxDB"},o.createElement("img",{src:Be.a,alt:"Old_customers",id:"img_icons2"}),o.createElement("p",{id:"int_count"},T)),o.createElement("br",null)),o.createElement("div",{className:"box_num_1"},o.createElement("p",{id:"head3"},"Country"),o.createElement("br",null),o.createElement("div",{className:"BoxDB"},o.createElement("img",{src:Ve.a,alt:"Country",id:"img_icons2"}),o.createElement("p",{id:"int_count"},D)),o.createElement("br",null)),o.createElement("div",{className:"box_num"},o.createElement("p",{id:"head3"},"All work"),o.createElement("br",null),o.createElement("div",{className:"BoxDB"},o.createElement("img",{src:We.a,alt:"All_work",id:"img_icons"}),o.createElement("p",{id:"int_count"},T)),o.createElement("br",null))),o.createElement("div",{className:"Wallet"},o.createElement("h3",null,"Wallet"),o.createElement("div",{className:"ChartDB1"},o.createElement(qe,null))),o.createElement("button",{className:"box_salary",onMouseEnter:function(){return X(!0)},onMouseLeave:function(){return X(!1)},onClick:function(){return Q(!0)}},o.createElement("h3",null,"Customer Map"),o.createElement("div",{style:{textAlign:"center",marginTop:20}},o.createElement("img",{src:Ue.a,alt:"Map1"}),U?o.createElement("div",{className:"HoverText"},"click view map"):null))),o.createElement("div",{className:"group2"},o.createElement("div",{className:"Job_status"},o.createElement("h3",null,"Job status"),o.createElement(u.a,{component:"form",sx:{p:"2px 4px",display:"flex",alignItems:"center",backgroundColor:"#FBFBFB",boxShadow:"none"}},o.createElement(Ce.a,{dateAdapter:Se.a},o.createElement("div",{style:{float:"left"}},o.createElement("div",{style:{marginBottom:10}},o.createElement("p",{style:{fontWeight:"bold",fontSize:20,color:"#333333"}},"Select date")),o.createElement(ke.a,{label:"Select date",mask:"__/__/___",onChange:function(e){},renderInput:function(e){return o.createElement(o.Fragment,null,o.createElement(h.a,e))}}))),o.createElement("div",{style:{float:"left",marginLeft:90}},o.createElement("div",{style:{marginBottom:10}},o.createElement("p",{style:{fontWeight:"bold",fontSize:20,color:"#333333"}},"Select status")),o.createElement(d.a,{id:"country-select-demo",options:Dt.g,sx:{width:260},autoHighlight:!0,getOptionLabel:function(e){return e.label},onChange:function(e,t){return V(t.label)},popupIcon:o.createElement(Ae.a,{style:{color:"#333333",width:30,height:33}}),renderOption:function(e,t){return o.createElement(l.a,Object.assign({component:"li",sx:{"& > img":{mr:2,flexShrink:0}}},e),t.label)},renderInput:function(e){return o.createElement(h.a,Object.assign({},e,{label:"Select status",inputProps:Object(a.a)(Object(a.a)({},e.inputProps),{},{autoComplete:"new-password"})}))}}))),o.createElement("div",{style:{marginTop:20,textAlign:"left",width:"60vw",display:"flex",overflowY:"scroll",flexDirection:"column",height:"65vh"}},o.createElement("div",{style:{}},o.createElement(C,{component:u.a,style:{width:"58vw",marginBottom:20}},o.createElement(E,null,o.createElement(j,null,o.createElement(W,null,o.createElement(Z,{align:"center",className:"roworderID"},"ID"),o.createElement(Z,{align:"center",className:"rowCustomer"},"Customer"),o.createElement(Z,{align:"center",className:"rowType"},"Type"),o.createElement(Z,{align:"center",className:"rowCustomer"},"Status"),o.createElement(Z,{align:"center",className:"rowCustomer"},"Price"),o.createElement(Z,{align:"center"}))))),x.map((function(e){return o.createElement(C,{component:u.a,style:{width:"58vw",marginBottom:20,height:"8vh"}},o.createElement(E,null,o.createElement(j,null,o.createElement(W,{key:null===e||void 0===e?void 0:e.orderID},o.createElement(Z,{align:"center",className:"roworderID"},null===e||void 0===e?void 0:e.orderID),o.createElement(Z,{align:"center",className:"rowCustomer"},null===e||void 0===e?void 0:e.Customer),o.createElement(Z,{align:"center",className:"rowType"},null===e||void 0===e?void 0:e.orderName),!0===(null===e||void 0===e?void 0:e.orderDeadline)?o.createElement(Z,{align:"center",className:"rowCustomer",style:{color:"#047ACF"}},"late"):o.createElement(o.Fragment,null,"1"===(null===e||void 0===e?void 0:e.status)?o.createElement(Z,{align:"center",className:"rowCustomer",style:{color:"#FFC100"}},"In progress"):o.createElement(Z,{align:"center",className:"rowCustomer",style:{color:"#46BC52"}},"Succeed")),o.createElement(Z,{align:"center",className:"rowCustomer"},null===e||void 0===e?void 0:e.orderPrice),o.createElement(Z,{align:"center",className:"rowType"},o.createElement(K.a,{onClick:function(){return t("/Chats")}},o.createElement(Oe.c,{style:{width:20}})))))))}))))),o.createElement("div",{className:"Review"},o.createElement("h3",null,"Review"),o.createElement("div",null,o.createElement("p",{style:{color:"#333333",fontWeight:300}},"Text something")),o.createElement("div",null,o.createElement(l.a,{sx:{width:200,display:"grid",alignItems:"center",gridTemplateColumns:"20% 80%"}},o.createElement(l.a,null,0),o.createElement(be,{name:"text-feedback",value:0,readOnly:!0,precision:.5,emptyIcon:o.createElement(we.a,{style:{opacity:.55},fontSize:"inherit"})}))),o.createElement("div",{className:"boxliststars"},o.createElement("div",{className:"liststars"},o.createElement("p",null,"5 stars"),o.createElement(Ze,{progress:0})),o.createElement("div",{className:"liststars"},o.createElement("p",null,"4 stars"),o.createElement(Ze,{progress:0})),o.createElement("div",{className:"liststars"},o.createElement("p",null,"3 stars"),o.createElement(Ze,{progress:0})),o.createElement("div",{className:"liststars"},o.createElement("p",null,"2 stars"),o.createElement(Ze,{progress:0})),o.createElement("div",{className:"liststars"},o.createElement("p",null,"1 stars"),o.createElement(Ze,{progress:0}))),o.createElement("h3",null,"Comment")))))))}}}]);
//# sourceMappingURL=8.14dd859c.chunk.js.map